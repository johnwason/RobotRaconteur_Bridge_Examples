/**
 * @version 1.0.0.0
 * @copyright Copyright Â©  2019
 * @compiler Bridge.NET 17.9.0
 */
Bridge.assembly("RobotRaconteurBridge", function ($asm, globals) {
    "use strict";

    Bridge.define("RobotRaconteurServiceIndex.NodeInfo", {
        fields: {
            NodeName: null,
            NodeID: null,
            ServiceIndexConnectionURL: null
        }
    });

    Bridge.define("RobotRaconteurWeb.IStructureStub", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.ServiceFactory", {
        fields: {
            sdef: null,
            node: null,
            context: null
        },
        ctors: {
            ctor: function (node, context) {
                if (node === void 0) { node = null; }
                if (context === void 0) { context = null; }

                this.$initialize();
                if (node != null) {
                    this.node = node;
                } else {
                    this.node = RobotRaconteurWeb.RobotRaconteurNode.s;
                }

                this.context = context;
            }
        },
        methods: {
            ServiceDef: function () {
                if (this.sdef == null) {
                    this.sdef = new RobotRaconteurWeb.ServiceDefinition();
                    this.sdef.FromString(this.DefString());
                }
                return this.sdef;
            },
            RemovePath: function (path) {
                return RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(path).Item2;
            },
            CompareNamespace: function (qualified_typename, typename) {
                var s = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(qualified_typename);
                typename.v = s.Item2;
                return Bridge.referenceEquals(s.Item1, this.GetServiceName());
            },
            PackStructure: function (s) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType(Bridge.getType(s)), typename)) {
                    return this.FindStructureStub(typename.v).RobotRaconteurWeb$IStructureStub$PackStructure(s);
                } else {
                    return this.node.PackStructure(s, this.context);
                }
            },
            UnpackStructure: function (T, l) {
                var typename = { };
                if (this.CompareNamespace(l.Type, typename)) {
                    return this.FindStructureStub(typename.v).RobotRaconteurWeb$IStructureStub$UnpackStructure(T, l);
                } else {
                    return this.node.UnpackStructure(T, l, this.context);
                }
            },
            CreateStub: function (objecttype, path, context) {
                var extdef = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(objecttype).Item1;
                if (Bridge.referenceEquals(extdef, this.GetServiceName())) {
                    throw new System.InvalidOperationException.$ctor1("Invalid service factory request");
                }
                if (this.context == null) {
                    return this.node.GetServiceType(extdef).CreateStub(objecttype, path, context);
                } else {
                    return this.context.GetPulledServiceType(extdef).CreateStub(objecttype, path, context);
                }
            },
            PackPodToArray: function (T, s) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType(Bridge.getType(s.v, T)), typename)) {
                    return Bridge.cast(this.FindPodStub(typename.v), RobotRaconteurWeb.PodStub$1(T)).PackPodToArray(s);
                } else {
                    return this.node.PackPodToArray(T, s, this.context);
                }
            },
            UnpackPodFromArray: function (T, l) {
                var typename = { };
                if (this.CompareNamespace(l.Type, typename)) {
                    return Bridge.cast(this.FindPodStub(typename.v), RobotRaconteurWeb.PodStub$1(T)).UnpackPodFromArray(l);
                } else {
                    return this.node.UnpackPodFromArray(T, l, this.context);
                }
            },
            PackPodArray: function (T, s) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType((Bridge.getType(s).$elementType || null)), typename)) {
                    return Bridge.cast(this.FindPodStub(typename.v), RobotRaconteurWeb.PodStub$1(T)).PackPodArray(s);
                } else {
                    return this.node.PackPodArray(T, s, this.context);
                }
            },
            UnpackPodArray: function (T, l) {
                var typename = { };
                if (this.CompareNamespace(l.Type, typename)) {
                    return Bridge.cast(this.FindPodStub(typename.v), RobotRaconteurWeb.PodStub$1(T)).UnpackPodArray(l);
                } else {
                    return this.node.UnpackPodArray(T, l, this.context);
                }
            },
            PackPodMultiDimArray: function (T, s) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType((Bridge.getType(s.pod_array).$elementType || null)), typename)) {
                    return Bridge.cast(this.FindPodStub(typename.v), RobotRaconteurWeb.PodStub$1(T)).PackPodMultiDimArray(s);
                } else {
                    return this.node.PackPodMultiDimArray(T, s, this.context);
                }
            },
            UnpackPodMultiDimArray: function (T, l) {
                var typename = { };
                if (this.CompareNamespace(l.Type, typename)) {
                    return Bridge.cast(this.FindPodStub(typename.v), RobotRaconteurWeb.PodStub$1(T)).UnpackPodMultiDimArray(l);
                } else {
                    return this.node.UnpackPodMultiDimArray(T, l, this.context);
                }
            },
            PackPod: function (s) {
                var t;

                var s1 = Bridge.as(s, RobotRaconteurWeb.PodMultiDimArray);
                if (s1 != null) {
                    t = (Bridge.getType(s1.pod_array).$elementType || null);
                } else {
                    var s2 = Bridge.as(s, Array);
                    if (s2 != null) {
                        t = (Bridge.getType(s2).$elementType || null);
                    } else {
                        t = Bridge.getType(s);
                    }
                }


                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType(t), typename)) {
                    return this.FindPodStub(typename.v).RobotRaconteurWeb$IPodStub$PackPod(s);
                } else {
                    return this.node.PackPod(s, this.context);
                }
            },
            UnpackPod: function (m) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.MessageElementUtil.GetMessageElementDataTypeString(m), typename)) {
                    return this.FindPodStub(typename.v).RobotRaconteurWeb$IPodStub$UnpackPod(m);
                } else {
                    return this.node.UnpackPod(m, this.context);
                }
            },
            PackNamedArrayToArray: function (T, s) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType(Bridge.getType(s.v, T)), typename)) {
                    return Bridge.cast(this.FindNamedArrayStub(typename.v), RobotRaconteurWeb.INamedArrayStub$1(T))["RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedArrayStructToArray"](s);
                } else {
                    return this.node.PackNamedArrayToArray(T, s, this.context);
                }
            },
            UnpackNamedArrayFromArray: function (T, l) {
                var typename = { };
                if (this.CompareNamespace(l.Type, typename)) {
                    return Bridge.cast(this.FindNamedArrayStub(typename.v), RobotRaconteurWeb.INamedArrayStub$1(T))["RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedArrayStructFromArray"](l);
                } else {
                    return this.node.UnpackNamedArrayFromArray(T, l, this.context);
                }
            },
            PackNamedArray: function (T, s) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType((Bridge.getType(s).$elementType || null)), typename)) {
                    return Bridge.cast(this.FindNamedArrayStub(typename.v), RobotRaconteurWeb.INamedArrayStub$1(T))["RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedArray$1"](s);
                } else {
                    return this.node.PackNamedArray(T, s, this.context);
                }
            },
            PackNamedArray$1: function (s) {
                var t;

                var s1 = Bridge.as(s, RobotRaconteurWeb.NamedMultiDimArray);
                if (s1 != null) {
                    t = (Bridge.getType(s1.namedarray_array).$elementType || null);
                } else {
                    var s2 = Bridge.as(s, Array);
                    if (s2 != null) {
                        t = (Bridge.getType(s2).$elementType || null);
                    } else {
                        t = Bridge.getType(s);
                    }
                }


                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType(t), typename)) {
                    return this.FindNamedArrayStub(typename.v).RobotRaconteurWeb$INamedArrayStub$PackNamedArray(s);
                } else {
                    return this.node.PackNamedArray$1(s, this.context);
                }
            },
            UnpackNamedArray: function (T, l) {
                var typename = { };
                if (this.CompareNamespace(l.Type, typename)) {
                    return Bridge.cast(this.FindNamedArrayStub(typename.v), RobotRaconteurWeb.INamedArrayStub$1(T))["RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedArray$1"](l);
                } else {
                    return this.node.UnpackNamedArray(T, l, this.context);
                }
            },
            UnpackNamedArray$1: function (m) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.MessageElementUtil.GetMessageElementDataTypeString(m), typename)) {
                    return this.FindNamedArrayStub(typename.v).RobotRaconteurWeb$INamedArrayStub$UnpackNamedArray(m);
                } else {
                    return this.node.UnpackNamedArray$1(m, this.context);
                }
            },
            PackNamedMultiDimArray: function (T, s) {
                var typename = { };
                if (this.CompareNamespace(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType((Bridge.getType(s.namedarray_array).$elementType || null)), typename)) {
                    return Bridge.cast(this.FindNamedArrayStub(typename.v), RobotRaconteurWeb.INamedArrayStub$1(T))["RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedMultiDimArray"](s);
                } else {
                    return this.node.PackNamedMultiDimArray(T, s, this.context);
                }
            },
            UnpackNamedMultiDimArray: function (T, l) {
                var typename = { };
                if (this.CompareNamespace(l.Type, typename)) {
                    return Bridge.cast(this.FindNamedArrayStub(typename.v), RobotRaconteurWeb.INamedArrayStub$1(T))["RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedMultiDimArray"](l);
                } else {
                    return this.node.UnpackNamedMultiDimArray(T, l, this.context);
                }
            },
            CreateSkel: function (path, obj, context) {
                var objecttype = RobotRaconteurWeb.ServiceDefinitionUtil.FindObjectRRType(obj);
                var extdef = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(objecttype).Item1;
                if (Bridge.referenceEquals(extdef, this.GetServiceName())) {
                    throw new System.InvalidOperationException.$ctor1("Invalid service factory request");
                }

                return this.node.GetServiceType(extdef).CreateSkel(path, obj, context);

            },
            DownCastException: function (exp) {
                try {
                    if (!System.String.contains(exp.error,".")) {
                        return exp;
                    }

                    var f = { v : null };

                    var s = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(exp.error);

                    if (this.context != null) {
                        if (!this.context.TryGetPulledServiceType(s.Item1, f)) {
                            f.v = null;
                        }
                    }
                    if (f.v == null) {
                        if (!this.node.TryGetServiceType(s.Item1, f)) {
                            f.v = null;
                        }
                    }

                    if (f.v == null) {
                        return exp;
                    }

                    return f.v.DownCastException(exp);
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    return null;
                }
            },
            PackMapType: function (K, T, o) {
                return this.node.PackMapType(K, T, o, this.context);
            },
            PackListType: function (T, o) {
                return this.node.PackListType(T, o, this.context);
            },
            PackMultiDimArray: function (multiDimArray) {
                return this.node.PackMultiDimArray(multiDimArray);
            },
            PackVarType: function (p) {
                return this.node.PackVarType(p, this.context);
            },
            UnpackMapType: function (K, T, o) {
                return this.node.UnpackMapType(K, T, o, this.context);
            },
            UnpackListType: function (T, o) {
                return this.node.UnpackListType(T, o, this.context);
            },
            UnpackMultiDimArray: function (o) {
                return this.node.UnpackMultiDimArray(o);
            },
            UnpackVarType: function (o) {
                return this.node.UnpackVarType(o, this.context);
            }
        }
    });

    Bridge.define("RobotRaconteurServiceIndex.ServiceIndex", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.ServiceSkel", {
        fields: {
            rr_node: null,
            rr_context: null,
            m_ServicePath: null,
            m_context: null,
            uncastobj: null,
            objectlock: null,
            monitorlock: null,
            monitorlocks: null,
            generators: null
        },
        props: {
            ServicePath: {
                get: function () {
                    return this.m_ServicePath;
                }
            },
            RRContext: {
                get: function () {
                    return this.m_context;
                }
            },
            UncastObject: {
                get: function () {
                    return this.uncastobj;
                }
            },
            IsLocked: {
                get: function () {
                    if (this.objectlock == null) {
                        return false;
                    }
                    return this.objectlock.IsLocked;
                }
            },
            IsMonitorLocked: {
                get: function () {
                    if (this.monitorlock == null) {
                        return false;
                    }
                    return this.monitorlock.IsLocked;
                }
            }
        },
        ctors: {
            init: function () {
                this.monitorlocks = new (System.Collections.Generic.Dictionary$2(System.UInt32,RobotRaconteurWeb.ServerContext.MonitorObjectSkel)).ctor();
                this.generators = new (System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurWeb.GeneratorServerBase)).ctor();
            },
            ctor: function (s, o, c) {
                this.$initialize();
                this.m_ServicePath = s;
                this.m_context = c;
                this.uncastobj = o;
                if (o == null) {
                    throw new System.NullReferenceException.ctor();
                }

                this.rr_node = c.node;

                this.RegisterEvents(o);
                this.InitPipeServers(o);
                this.InitCallbackServers(o);
            }
        },
        methods: {
            InitCallbackServers: function (o) { },
            GetSubObj: function (name) {
                var s1 = System.String.split(name, System.Array.init([91], System.Char).map(function (i) {{ return String.fromCharCode(i); }}));
                if (s1.length === 1) {
                    return this.GetSubObj$1(name, "");
                } else {
                    var ind = RobotRaconteurWeb.Extensions.RRUriExtensions.UnescapeDataString(System.String.replaceAll(s1[System.Array.index(1, s1)], "]", ""));
                    return this.GetSubObj$1(s1[System.Array.index(0, s1)], ind);
                }
            },
            RegisterEvents: function (obj1) {

                if (Bridge.is(obj1, RobotRaconteurWeb.IRobotRaconteurServiceObject)) {
                    var obj2 = Bridge.cast(obj1, RobotRaconteurWeb.IRobotRaconteurServiceObject);
                    obj2.RobotRaconteurWeb$IRobotRaconteurServiceObject$addRobotRaconteurObjRefChanged(Bridge.fn.cacheBind(this, this.ObjRefChanged));
                }

            },
            UnregisterEvents: function (obj1) {
                if (Bridge.is(obj1, RobotRaconteurWeb.IRobotRaconteurServiceObject)) {
                    var obj2 = Bridge.cast(obj1, RobotRaconteurWeb.IRobotRaconteurServiceObject);
                    obj2.RobotRaconteurWeb$IRobotRaconteurServiceObject$removeRobotRaconteurObjRefChanged(Bridge.fn.cacheBind(this, this.ObjRefChanged));
                }
            },
            InitPipeServers: function (obj1) { },
            ObjRefChanged: function (name) {
                var path = (this.ServicePath || "") + "." + (name || "");
                this.RRContext.ReplaceObject(path);
            },
            SendEvent: function (m) {
                m.ServicePath = this.ServicePath;
                this.RRContext.SendEvent(m);
            },
            ReleaseObject: function () {
                this.UnregisterEvents(this.uncastobj);
                this.uncastobj = null;
                this.m_context = null;
            },
            SendPipeMessage: function (m, e, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        m.ServicePath = this.ServicePath;
                                        $task1 = this.RRContext.SendMessage(m, e, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SendWireMessage: function (m, e, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        m.ServicePath = this.ServicePath;
                                        $task1 = this.RRContext.SendMessage(m, e, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DispatchPipeMessage: function (m, e) { },
            DispatchWireMessage: function (m, e) { },
            CallPipeFunction: function (m, e) {
                throw new RobotRaconteurWeb.MemberNotFoundException("Pipe " + (m.MemberName || "") + " not found");
            },
            CallWireFunction: function (m, e) {
                throw new RobotRaconteurWeb.MemberNotFoundException("Wire " + (m.MemberName || "") + " not found");
            },
            GetCallbackFunction: function (endpoint, membername) {
                throw new RobotRaconteurWeb.MemberNotFoundException("Callback " + (membername || "") + " not found");
            },
            CallMemoryFunction: function (m, e) {
                throw new RobotRaconteurWeb.MemberNotFoundException("Memory " + (m.MemberName || "") + " not found");
            },
            GetNewGeneratorIndex: function () {
                var index;
                var r = new System.Random.ctor();
                do {
                    index = r.Next();
                } while (this.generators.containsKey(index));
                return index;
            },
            CallGeneratorNext: function (m, ep) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    index, 
                    $t, 
                    gen, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        index = ($t = m.FindElement("index").CastData(System.Array.type(System.Int32)))[System.Array.index(0, $t)];
                                        gen = { };
                                        this.generators;
                                        {
                                            if (!this.generators.tryGetValue(index, gen)) {
                                                throw new System.InvalidOperationException.$ctor1("Invalid generator");
                                            }
                                            gen.v.last_access_time = System.DateTime.getUtcNow();
                                        }

                                        if (gen.v.Endpoint !== ep.LocalEndpoint) {
                                            throw new System.InvalidOperationException.$ctor1("Invalid generator");
                                        }
                                        $task1 = gen.v.CallNext(m);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceStub", {
        fields: {
            RRServicePath: null,
            rr_context: null,
            rr_node: null,
            rr_context_lock: null,
            rr_async_mutex: null
        },
        props: {
            RRContext: {
                get: function () {
                    this.rr_context_lock;
                    {
                        return this.rr_context;
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.rr_context_lock = { };
                this.rr_async_mutex = new RobotRaconteurWeb.AsyncMutex();
            },
            ctor: function (path, c) {
                this.$initialize();
                this.rr_context = c;
                this.rr_node = c.node;
                this.RRServicePath = path;
            }
        },
        methods: {
            RRReleaseContext: function () {
                this.rr_context_lock;
                {
                    this.rr_context = null;
                }
            },
            ProcessRequest: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (this.RRContext == null) {
                                            throw new RobotRaconteurWeb.ServiceException("Reference has been released");
                                        }

                                        m.ServicePath = this.RRServicePath;
                                        $task1 = this.RRContext.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindObjRef$1: function (n, cancel) {
                if (this.RRContext == null) {
                    throw new RobotRaconteurWeb.ServiceException("Reference has been released");
                }
                return this.RRContext.FindObjRef((this.RRServicePath || "") + "." + (n || ""), null, cancel);
            },
            FindObjRef: function (n, i, cancel) {
                if (this.RRContext == null) {
                    throw new RobotRaconteurWeb.ServiceException("Reference has been released");
                }
                return this.RRContext.FindObjRef((this.RRServicePath || "") + "." + (n || "") + "[" + (System.String.replaceAll(RobotRaconteurWeb.Extensions.RRUriExtensions.EscapeDataString(Bridge.toString(i)), ".", "%2e") || "") + "]", null, cancel);
            },
            FindObjRefTyped$1: function (n, objecttype, cancel) {
                if (this.RRContext == null) {
                    throw new RobotRaconteurWeb.ServiceException("Reference has been released");
                }
                return this.RRContext.FindObjRef((this.RRServicePath || "") + "." + (n || ""), objecttype, cancel);
            },
            FindObjRefTyped: function (n, i, objecttype, cancel) {
                if (this.RRContext == null) {
                    throw new RobotRaconteurWeb.ServiceException("Reference has been released");
                }
                return this.RRContext.FindObjRef((this.RRServicePath || "") + "." + (n || "") + "[" + (System.String.replaceAll(RobotRaconteurWeb.Extensions.RRUriExtensions.EscapeDataString(Bridge.toString(i)), ".", "%2e") || "") + "]", objecttype, cancel);
            },
            SendPipeMessage: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (this.RRContext == null) {
                                            throw new RobotRaconteurWeb.ServiceException("Reference has been released");
                                        }
                                        m.ServicePath = this.RRServicePath;
                                        $task1 = this.RRContext.SendPipeMessage(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SendWireMessage: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (this.RRContext == null) {
                                            throw new RobotRaconteurWeb.ServiceException("Reference has been released");
                                        }
                                        m.ServicePath = this.RRServicePath;
                                        $task1 = this.RRContext.SendWireMessage(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DispatchPipeMessage: function (m) { },
            DispatchWireMessage: function (m) { },
            CallbackCall: function (m) {
                throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
            }
        }
    });

    Bridge.define("RobotRaconteurServiceIndex.ServiceInfo", {
        fields: {
            Name: null,
            RootObjectType: null,
            RootObjectImplements: null,
            ConnectionURL: null,
            Attributes: null
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurException", {
        inherits: [System.Exception],
        fields: {
            errorCode: 0,
            error: null
        },
        ctors: {
            init: function () {
                this.errorCode = RobotRaconteurWeb.MessageErrorType.None;
                this.error = "";
            },
            ctor: function () {
                this.$initialize();
                System.Exception.ctor.call(this);
            },
            $ctor1: function (ErrorCode, error, message) {
                this.$initialize();
                System.Exception.ctor.call(this, message);
                this.error = error;
                this.errorCode = ErrorCode;
            },
            $ctor2: function (message, innerexception) {
                this.$initialize();
                System.Exception.ctor.call(this, message, innerexception);

            }
        },
        methods: {
            toString: function () {
                return "RobotRaconteurException: " + (this.error || "") + ": " + (this.Message || "");
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ArrayBinaryReader", {
        inherits: [System.IO.BinaryReader],
        statics: {
            fields: {
                bufsize: 0
            },
            ctors: {
                init: function () {
                    this.bufsize = 60000;
                }
            }
        },
        fields: {
            abuffer: null,
            memstream: false,
            s_memstream: null,
            membuf: null,
            limits: null,
            m_Position: 0
        },
        props: {
            CurrentLimit: {
                get: function () {
                    return this.limits.Peek();
                }
            },
            Position: {
                get: function () {
                    return this.m_Position;
                }
            },
            DistanceFromLimit: {
                get: function () {
                    return ((((this.CurrentLimit) | 0) - (this.m_Position | 0)) | 0);
                }
            }
        },
        ctors: {
            init: function () {
                this.abuffer = System.Array.init(RobotRaconteurWeb.ArrayBinaryReader.bufsize, 0, System.Byte);
                this.memstream = false;
                this.limits = new (System.Collections.Generic.Stack$1(System.UInt32)).ctor();
                this.m_Position = 0;
            },
            $ctor1: function (s, length) {
                this.$initialize();
                System.IO.BinaryReader.ctor.call(this, s);

                this.memstream = false;

                this.limits.Push((length >>> 0));
            },
            ctor: function (s, membuf1, length) {
                this.$initialize();
                System.IO.BinaryReader.ctor.call(this, s);
                this.s_memstream = s;
                this.memstream = true;
                this.membuf = membuf1;
                this.limits.Push((length >>> 0));
            }
        },
        methods: {
            ReadArray: function (a) {


                if (a != null) {
                    if (a.length > 0) {
                        if (Bridge.is(a, System.Array.type(RobotRaconteurWeb.CDouble))) {
                            var a1 = Bridge.cast(a, System.Array.type(RobotRaconteurWeb.CDouble));
                            var a2 = System.Array.init(Bridge.Int.mul(a1.length, 2), 0, System.Double);
                            this.ReadArray(a2);
                            for (var i = 0; i < a1.length; i = (i + 1) | 0) {
                                a1[System.Array.index(i, a1)] = new RobotRaconteurWeb.CDouble.$ctor1(a2[System.Array.index(Bridge.Int.mul(i, 2), a2)], a2[System.Array.index(((Bridge.Int.mul(i, 2) + 1) | 0), a2)]);
                            }
                            return;
                        }

                        if (Bridge.is(a, System.Array.type(RobotRaconteurWeb.CSingle))) {
                            var a11 = Bridge.cast(a, System.Array.type(RobotRaconteurWeb.CSingle));
                            var a21 = System.Array.init(Bridge.Int.mul(a11.length, 2), 0, System.Single);
                            this.ReadArray(a21);
                            for (var i1 = 0; i1 < a11.length; i1 = (i1 + 1) | 0) {
                                a11[System.Array.index(i1, a11)] = new RobotRaconteurWeb.CSingle.$ctor1(a21[System.Array.index(Bridge.Int.mul(i1, 2), a21)], a21[System.Array.index(((Bridge.Int.mul(i1, 2) + 1) | 0), a21)]);
                            }
                            return;
                        }

                        var l = a.length;
                        var bl = RobotRaconteurWeb.Extensions.Buffer.ByteLength(a);


                        if (this.memstream) {
                            if (System.Int64(this.Position).add(System.Int64(bl)).gt(System.Int64(this.CurrentLimit))) {
                                throw new RobotRaconteurWeb.IOException("Message read error");
                            }

                            RobotRaconteurWeb.Extensions.Buffer.BlockCopy$1(this.membuf, System.Int64.clip32(this.s_memstream.Position), a, 0, bl);
                            this.s_memstream.Position = this.s_memstream.Position.add(System.Int64(bl));

                            this.m_Position = (this.m_Position + (bl >>> 0)) >>> 0;
                        } else {
                            if (System.Int64(this.Position).add(System.Int64(bl)).gt(System.Int64(this.CurrentLimit))) {
                                throw new RobotRaconteurWeb.IOException("Message read error");
                            }
                            if (Bridge.referenceEquals(Bridge.getTypeName((Bridge.getType(a).$elementType || null)), "byte")) {
                                this.Read$1(Bridge.cast(a, System.Array.type(System.Byte)), 0, a.length);
                            } else {



                                var n = (Bridge.Int.div(bl, RobotRaconteurWeb.ArrayBinaryReader.bufsize)) | 0;
                                var nm = bl % RobotRaconteurWeb.ArrayBinaryReader.bufsize;



                                for (var i2 = 0; i2 < n; i2 = (i2 + 1) | 0) {
                                    this.Read$1(this.abuffer, 0, RobotRaconteurWeb.ArrayBinaryReader.bufsize);
                                    RobotRaconteurWeb.Extensions.Buffer.BlockCopy$1(this.abuffer, 0, a, Bridge.Int.mul(i2, RobotRaconteurWeb.ArrayBinaryReader.bufsize), RobotRaconteurWeb.ArrayBinaryReader.bufsize);



                                }

                                if (nm > 0) {
                                    this.Read$1(this.abuffer, 0, nm);
                                    RobotRaconteurWeb.Extensions.Buffer.BlockCopy$1(this.abuffer, 0, a, Bridge.Int.mul((n), RobotRaconteurWeb.ArrayBinaryReader.bufsize), nm);

                                }
                            }
                            this.m_Position = (this.m_Position + (bl >>> 0)) >>> 0;

                        }
                    }
                }
            },
            ReadString8: function (l) {
                var b = System.Array.init(l, 0, System.Byte);
                if (System.Int64(this.Position).add(System.Int64(b.length)).gt(System.Int64(this.CurrentLimit))) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var n = this.Read$1(b, 0, b.length);

                var s = System.Text.Encoding.UTF8.GetString(b);
                if (System.String.contains(s,"\u0000")) {
                    System.Console.WriteLine("null");
                }

                this.m_Position = (this.m_Position + ((b.length) >>> 0)) >>> 0;
                return s;

            },
            ReadNumber: function (t) {

                switch (t) {
                    case RobotRaconteurWeb.DataTypes.double_t: 
                        return Bridge.box(this.ReadDouble(), System.Double, System.Double.format, System.Double.getHashCode);
                    case RobotRaconteurWeb.DataTypes.single_t: 
                        return Bridge.box(this.ReadSingle(), System.Single, System.Single.format, System.Single.getHashCode);
                    case RobotRaconteurWeb.DataTypes.int8_t: 
                        return Bridge.box(this.ReadSByte(), System.SByte);
                    case RobotRaconteurWeb.DataTypes.uint8_t: 
                        return Bridge.box(this.ReadByte(), System.Byte);
                    case RobotRaconteurWeb.DataTypes.int16_t: 
                        return Bridge.box(this.ReadInt16(), System.Int16);
                    case RobotRaconteurWeb.DataTypes.uint16_t: 
                        return Bridge.box(this.ReadUInt16(), System.UInt16);
                    case RobotRaconteurWeb.DataTypes.int32_t: 
                        return Bridge.box(this.ReadInt32(), System.Int32);
                    case RobotRaconteurWeb.DataTypes.uint32_t: 
                        return Bridge.box(this.ReadUInt32(), System.UInt32);
                    case RobotRaconteurWeb.DataTypes.int64_t: 
                        return this.ReadInt64();
                    case RobotRaconteurWeb.DataTypes.uint64_t: 
                        return this.ReadUInt64();
                }

                throw new RobotRaconteurWeb.DataTypeException("Unknown data type to read");
            },
            Read: function () {
                if (((this.Position + 1) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.Read.call(this);
                return i;
            },
            Read$1: function (buffer, index, count) {
                if (System.Int64(this.Position).add(System.Int64(count)).gt(System.Int64(this.CurrentLimit))) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.Read$1.call(this, buffer, index, count);
                return i;
            },
            ReadDouble: function () {
                if (((this.Position + 8) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadDouble.call(this);
                this.m_Position = (this.m_Position + 8) >>> 0;
                return i;
            },
            ReadSingle: function () {
                if (((this.Position + 4) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadSingle.call(this);
                this.m_Position = (this.m_Position + 4) >>> 0;
                return i;
            },
            ReadSByte: function () {
                if (((this.Position + 1) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadSByte.call(this);
                this.m_Position = (this.m_Position + 1) >>> 0;
                return i;
            },
            ReadByte: function () {
                if (((this.Position + 1) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadByte.call(this);
                this.m_Position = (this.m_Position + 1) >>> 0;
                return i;
            },
            ReadInt16: function () {
                if (((this.Position + 2) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadInt16.call(this);
                this.m_Position = (this.m_Position + 2) >>> 0;
                return i;
            },
            ReadUInt16: function () {
                if (((this.Position + 2) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadUInt16.call(this);
                this.m_Position = (this.m_Position + 2) >>> 0;
                return i;
            },
            ReadInt32: function () {
                if (((this.Position + 4) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadInt32.call(this);
                this.m_Position = (this.m_Position + 4) >>> 0;
                return i;
            },
            ReadUInt32: function () {
                if (((this.Position + 4) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadUInt32.call(this);
                this.m_Position = (this.m_Position + 4) >>> 0;
                return i;
            },
            ReadInt64: function () {
                if (((this.Position + 8) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadInt64.call(this);
                this.m_Position = (this.m_Position + 8) >>> 0;
                return i;
            },
            ReadUInt64: function () {
                if (((this.Position + 8) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message read error");
                }
                var i = System.IO.BinaryReader.prototype.ReadUInt64.call(this);
                this.m_Position = (this.m_Position + 8) >>> 0;
                return i;
            },
            PushRelativeLimit: function (limit) {
                if (((this.Position + limit) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Error reading message");
                }

                this.limits.Push(((this.Position + limit) >>> 0));
            },
            PushAbsoluteLimit: function (limit) {
                if (limit > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Error reading message");
                }

                this.limits.Push(limit);
            },
            PopLimit: function () {
                this.limits.Pop();
            },
            Reset: function (length) {
                this.limits.Clear();
                this.limits.Push((length >>> 0));
                this.m_Position = 0;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ArrayBinaryWriter", {
        inherits: [System.IO.BinaryWriter],
        statics: {
            fields: {
                bufsize: 0
            },
            ctors: {
                init: function () {
                    this.bufsize = 60000;
                }
            },
            methods: {
                GetStringByteCount8: function (s) {
                    return System.Text.Encoding.UTF8.GetByteCount$2(s);
                }
            }
        },
        fields: {
            abuffer: null,
            memstream: false,
            s_memstream: null,
            membuf: null,
            limits: null,
            m_Position: 0
        },
        props: {
            CurrentLimit: {
                get: function () {
                    return this.limits.Peek();
                }
            },
            Position: {
                get: function () {
                    return this.m_Position;
                }
            },
            DistanceFromLimit: {
                get: function () {
                    return ((((this.CurrentLimit) | 0) - (this.m_Position | 0)) | 0);
                }
            }
        },
        ctors: {
            init: function () {
                this.abuffer = System.Array.init(RobotRaconteurWeb.ArrayBinaryWriter.bufsize, 0, System.Byte);
                this.memstream = false;
                this.limits = new (System.Collections.Generic.Stack$1(System.UInt32)).ctor();
                this.m_Position = 0;
            },
            $ctor1: function (s, length) {
                this.$initialize();
                System.IO.BinaryWriter.$ctor1.call(this, s);

                this.limits.Push((length >>> 0));
                this.memstream = false;
            },
            ctor: function (s, membuf1, length) {
                this.$initialize();
                System.IO.BinaryWriter.$ctor1.call(this, s);
                this.s_memstream = s;
                this.memstream = true;
                this.membuf = membuf1;
                this.limits.Push((length >>> 0));
            }
        },
        methods: {
            WriteArray: function (a) {

                if (a != null) {
                    if (a.length > 0) {

                        if (Bridge.is(a, System.Array.type(RobotRaconteurWeb.CDouble))) {
                            var a1 = Bridge.cast(a, System.Array.type(RobotRaconteurWeb.CDouble));
                            var a2 = System.Array.init(Bridge.Int.mul(a1.length, 2), 0, System.Double);
                            for (var i = 0; i < a1.length; i = (i + 1) | 0) {
                                a2[System.Array.index(Bridge.Int.mul(i, 2), a2)] = a1[System.Array.index(i, a1)].Real;
                                a2[System.Array.index(((Bridge.Int.mul(i, 2) + 1) | 0), a2)] = a1[System.Array.index(i, a1)].Imag;
                            }
                            this.WriteArray(a2);
                            return;
                        }

                        if (Bridge.is(a, System.Array.type(RobotRaconteurWeb.CSingle))) {
                            var a11 = Bridge.cast(a, System.Array.type(RobotRaconteurWeb.CSingle));
                            var a21 = System.Array.init(Bridge.Int.mul(a11.length, 2), 0, System.Single);
                            for (var i1 = 0; i1 < a11.length; i1 = (i1 + 1) | 0) {
                                a21[System.Array.index(Bridge.Int.mul(i1, 2), a21)] = a11[System.Array.index(i1, a11)].Real;
                                a21[System.Array.index(((Bridge.Int.mul(i1, 2) + 1) | 0), a21)] = a11[System.Array.index(i1, a11)].Imag;
                            }
                            this.WriteArray(a21);
                            return;
                        }

                        var l = a.length;
                        var bl = RobotRaconteurWeb.Extensions.Buffer.ByteLength(a);

                        if (System.Int64(bl).add(System.Int64(this.Position)).gt(System.Int64(this.CurrentLimit))) {
                            throw new RobotRaconteurWeb.IOException("Message write error");
                        }

                        if (this.memstream) {

                            this.m_Position = (this.m_Position + (bl >>> 0)) >>> 0;
                            RobotRaconteurWeb.Extensions.Buffer.BlockCopy(a, 0, this.membuf, System.Int64.clip32(this.s_memstream.Position), bl);
                            this.s_memstream.Position = this.s_memstream.Position.add(System.Int64(bl));
                        } else {

                            if (Bridge.referenceEquals(Bridge.getTypeName((Bridge.getType(a).$elementType || null)), "byte")) {
                                this.Write$2(Bridge.cast(a, System.Array.type(System.Byte)));
                            } else {


                                var n = (Bridge.Int.div(bl, RobotRaconteurWeb.ArrayBinaryWriter.bufsize)) | 0;
                                var nm = bl % RobotRaconteurWeb.ArrayBinaryWriter.bufsize;



                                for (var i2 = 0; i2 < n; i2 = (i2 + 1) | 0) {

                                    RobotRaconteurWeb.Extensions.Buffer.BlockCopy(a, Bridge.Int.mul(i2, RobotRaconteurWeb.ArrayBinaryWriter.bufsize), this.abuffer, 0, RobotRaconteurWeb.ArrayBinaryWriter.bufsize);
                                    this.Write$3(this.abuffer, 0, RobotRaconteurWeb.ArrayBinaryWriter.bufsize);



                                }

                                if (nm > 0) {
                                    RobotRaconteurWeb.Extensions.Buffer.BlockCopy(a, Bridge.Int.mul((n), RobotRaconteurWeb.ArrayBinaryWriter.bufsize), this.abuffer, 0, nm);
                                    this.Write$3(this.abuffer, 0, nm);
                                }
                            }

                            this.m_Position = (this.m_Position + (bl >>> 0)) >>> 0;
                        }
                    }
                }
            },
            WriteString8: function (s) {

                var b = System.Text.Encoding.UTF8.GetBytes$2(s);
                if (System.Int64(b.length).add(System.Int64(this.Position)).gt(System.Int64(this.CurrentLimit))) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                this.Write$2(b);
                this.m_Position = (this.m_Position + ((b.length) >>> 0)) >>> 0;

            },
            WriteNumber: function (n, t) {
                switch (t) {
                    case RobotRaconteurWeb.DataTypes.double_t: 
                        this.Write$8(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.Double), System.Double)));
                        return;
                    case RobotRaconteurWeb.DataTypes.single_t: 
                        this.Write$13(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.Single), System.Single)));
                        return;
                    case RobotRaconteurWeb.DataTypes.int8_t: 
                        this.Write$12(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.SByte), System.SByte)));
                        return;
                    case RobotRaconteurWeb.DataTypes.uint8_t: 
                        this.Write$1(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.Byte), System.Byte)));
                        return;
                    case RobotRaconteurWeb.DataTypes.int16_t: 
                        this.Write$9(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.Int16), System.Int16)));
                        return;
                    case RobotRaconteurWeb.DataTypes.uint16_t: 
                        this.Write$15(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.UInt16), System.UInt16)));
                        return;
                    case RobotRaconteurWeb.DataTypes.int32_t: 
                        this.Write$10(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.Int32), System.Int32)));
                        return;
                    case RobotRaconteurWeb.DataTypes.uint32_t: 
                        this.Write$16(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.UInt32), System.UInt32)));
                        return;
                    case RobotRaconteurWeb.DataTypes.int64_t: 
                        this.Write$11(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.Int64), System.Int64)));
                        return;
                    case RobotRaconteurWeb.DataTypes.uint64_t: 
                        this.Write$17(System.Nullable.getValue(Bridge.cast(Bridge.unbox(n, System.UInt64), System.UInt64)));
                        return;
                }

                throw new RobotRaconteurWeb.DataTypeException("Unknown data type to write");
            },
            Write$3: function (buffer, index, count) {
                if (System.Int64(count).add(System.Int64(this.Position)).gt(System.Int64(this.CurrentLimit))) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$3.call(this, buffer, index, count);
            },
            Write$8: function (value) {
                if (((8 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$8.call(this, value);
                this.m_Position = (this.m_Position + 8) >>> 0;
            },
            Write$13: function (value) {
                if (((4 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$13.call(this, value);
                this.m_Position = (this.m_Position + 4) >>> 0;
            },
            Write$1: function (value) {
                if (((1 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$1.call(this, value);
                this.m_Position = (this.m_Position + 1) >>> 0;
            },
            Write$12: function (value) {
                if (((1 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$12.call(this, value);
                this.m_Position = (this.m_Position + 1) >>> 0;
            },
            Write$9: function (value) {
                if (((2 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$9.call(this, value);
                this.m_Position = (this.m_Position + 2) >>> 0;
            },
            Write$15: function (value) {
                if (((2 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$15.call(this, value);
                this.m_Position = (this.m_Position + 2) >>> 0;
            },
            Write$10: function (value) {
                if (((4 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$10.call(this, value);
                this.m_Position = (this.m_Position + 4) >>> 0;
            },
            Write$16: function (value) {
                if (((4 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$16.call(this, value);
                this.m_Position = (this.m_Position + 4) >>> 0;
            },
            Write$11: function (value) {
                if (((8 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$11.call(this, value);
                this.m_Position = (this.m_Position + 8) >>> 0;
            },
            Write$17: function (value) {
                if (((8 + this.Position) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                System.IO.BinaryWriter.prototype.Write$17.call(this, value);
                this.m_Position = (this.m_Position + 8) >>> 0;
            },
            PushRelativeLimit: function (limit) {
                if (((this.Position + limit) >>> 0) > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Error reading message");
                }

                this.limits.Push(((this.Position + limit) >>> 0));
            },
            PushAbsoluteLimit: function (limit) {
                if (limit > this.CurrentLimit) {
                    throw new RobotRaconteurWeb.IOException("Error reading message");
                }

                this.limits.Push(limit);
            },
            PopLimit: function () {
                this.limits.Pop();
            },
            Reset: function (length) {
                this.limits.Clear();
                this.limits.Push((length >>> 0));
                this.m_Position = 0;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ArrayMemoryBase");

    Bridge.define("RobotRaconteurWeb.ArrayMemoryClientImplBase", {
        fields: {
            m_MemberName: null,
            stub: null,
            direction: 0,
            element_type: 0,
            element_size: 0,
            max_size_read: false,
            remote_max_size: 0
        },
        props: {
            MemberName: {
                get: function () {
                    return this.m_MemberName;
                }
            },
            Direction: {
                get: function () {
                    return this.direction;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, element_type, element_size, direction) {
                this.$initialize();
                this.stub = stub;
                this.m_MemberName = membername;
                this.direction = direction;
                this.element_type = element_type;
                this.element_size = element_size;
            }
        },
        methods: {
            GetLength: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    $t, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParam, this.MemberName);
                                        m.AddElement$1("parameter", "Length");
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        $tcs.setResult(($t = ret.FindElement("return").CastData(System.Array.type(System.UInt64)))[System.Array.index(0, $t)]);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetMaxTransferSize: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    my_max_size, 
                    m, 
                    ret, 
                    remote_max_size1, 
                    $t, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        my_max_size = this.stub.rr_node.MemoryMaxTransferSize;
                                        this;
                                        {
                                            if (this.max_size_read) {
                                                if (this.remote_max_size > my_max_size) {
                                                    $tcs.setResult(my_max_size);
                                                    return;
                                                } else {
                                                    $tcs.setResult(this.remote_max_size);
                                                    return;
                                                }
                                            }
                                        }

                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParam, this.MemberName);
                                        m.AddElement$1("parameter", "MaxTransferSize");
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        remote_max_size1 = ($t = ret.FindElement("return").CastData(System.Array.type(System.UInt32)))[System.Array.index(0, $t)];
                                        this;
                                        {
                                            if (!this.max_size_read) {
                                                this.remote_max_size = remote_max_size1;
                                                this.max_size_read = true;
                                            }

                                            if (this.remote_max_size > my_max_size) {
                                                $tcs.setResult(my_max_size);
                                                return;
                                            } else {
                                                $tcs.setResult(this.remote_max_size);
                                                return;
                                            }
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ReadImpl: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $task4, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    max_transfer_size, 
                    max_elems, 
                    e, 
                    ret, 
                    blocks, 
                    blockrem, 
                    i, 
                    bufferpos_i, 
                    memorypos_i, 
                    bufferpos_i1, 
                    memorypos_i1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,13], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.writeonly) {
                                            throw new RobotRaconteurWeb.WriteOnlyMemberException("Write only member");
                                        }

                                        $task1 = this.GetMaxTransferSize(cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        max_transfer_size = $taskResult1;
                                        max_elems = (Bridge.Int.div((max_transfer_size), this.element_size)) >>> 0;

                                        if (count.lte(System.UInt64(max_elems))) {
                                            $step = 2;
                                            continue;
                                        } else  {
                                            $step = 4;
                                            continue;
                                        }
                                    }
                                    case 2: {
                                        e = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryRead, this.MemberName);
                                        e.AddElement$1("memorypos", memorypos);
                                        e.AddElement$1("count", count);
                                        $task2 = this.stub.ProcessRequest(e, cancel);
                                        $step = 3;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        ret = $taskResult2;
                                        this.UnpackReadResult(ret.FindElement("data").Data, buffer, bufferpos, count);
                                        $step = 13;
                                        continue;
                                    }
                                    case 4: {
                                        blocks = count.div(System.UInt64(max_elems));
                                        blockrem = count.mod(System.UInt64(max_elems));

                                        i = System.UInt64(0);
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        if ( i.lt(blocks) ) {
                                            $step = 6;
                                            continue;
                                        }
                                        $step = 9;
                                        continue;
                                    }
                                    case 6: {
                                        bufferpos_i = bufferpos.add(System.UInt64(max_elems).mul(i));
                                        memorypos_i = memorypos.add(System.UInt64(max_elems).mul(i));

                                        $task3 = this.ReadImpl(memorypos_i, buffer, bufferpos_i, System.UInt64(max_elems));
                                        $step = 7;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 7: {
                                        $task3.getAwaitedResult();
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        i = i.inc();
                                        $step = 5;
                                        continue;
                                    }
                                    case 9: {
                                        if (blockrem.gt(System.UInt64(0))) {
                                            $step = 10;
                                            continue;
                                        } 
                                        $step = 12;
                                        continue;
                                    }
                                    case 10: {
                                        bufferpos_i1 = bufferpos.add(System.UInt64(max_elems).mul(blocks));
                                        memorypos_i1 = memorypos.add(System.UInt64(max_elems).mul(blocks));

                                        $task4 = this.ReadImpl(memorypos_i1, buffer, bufferpos_i1, blockrem);
                                        $step = 11;
                                        if ($task4.isCompleted()) {
                                            continue;
                                        }
                                        $task4.continue($asyncBody);
                                        return;
                                    }
                                    case 11: {
                                        $task4.getAwaitedResult();
                                        $step = 12;
                                        continue;
                                    }

                                    case 13: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            WriteImpl: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $task3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    max_transfer_size, 
                    max_elems, 
                    e, 
                    ret, 
                    blocks, 
                    blockrem, 
                    i, 
                    bufferpos_i, 
                    memorypos_i, 
                    bufferpos_i1, 
                    memorypos_i1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,12], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.readonly_) {
                                            throw new RobotRaconteurWeb.ReadOnlyMemberException("Read only member");
                                        }

                                        $task1 = this.GetMaxTransferSize(cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        max_transfer_size = System.UInt64($taskResult1);
                                        max_elems = max_transfer_size.div(System.UInt64(this.element_size));

                                        if (count.lte(max_elems)) {
                                            $step = 2;
                                            continue;
                                        } else  {
                                            $step = 3;
                                            continue;
                                        }
                                    }
                                    case 2: {
                                        e = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryWrite, this.MemberName);
                                        e.AddElement$1("memorypos", memorypos);
                                        e.AddElement$1("count", count);
                                        e.AddElement$1("data", this.PackWriteRequest(buffer, bufferpos, count));

                                        ret = this.stub.ProcessRequest(e, cancel);
                                        $step = 12;
                                        continue;
                                    }
                                    case 3: {
                                        if (this.GetBufferLength(buffer).sub(bufferpos).lt(count)) {
                                            throw new RobotRaconteurWeb.OutOfRangeException("");
                                        }

                                        blocks = count.div(max_elems);
                                        blockrem = count.mod(max_elems);

                                        i = System.UInt64(0);
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        if ( i.lt(blocks) ) {
                                            $step = 5;
                                            continue;
                                        }
                                        $step = 8;
                                        continue;
                                    }
                                    case 5: {
                                        bufferpos_i = bufferpos.add(max_elems.mul(i));
                                        memorypos_i = memorypos.add(max_elems.mul(i));
                                        $task2 = this.WriteImpl(memorypos_i, buffer, bufferpos_i, max_elems);
                                        $step = 6;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $task2.getAwaitedResult();
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        i = i.inc();
                                        $step = 4;
                                        continue;
                                    }
                                    case 8: {
                                        if (blockrem.gt(System.UInt64(0))) {
                                            $step = 9;
                                            continue;
                                        } 
                                        $step = 11;
                                        continue;
                                    }
                                    case 9: {
                                        bufferpos_i1 = bufferpos.add(max_elems.mul(blocks));
                                        memorypos_i1 = memorypos.add(max_elems.mul(blocks));
                                        $task3 = this.WriteImpl(memorypos_i1, buffer, bufferpos_i1, blockrem);
                                        $step = 10;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 10: {
                                        $task3.getAwaitedResult();
                                        $step = 11;
                                        continue;
                                    }

                                    case 12: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ArrayMemoryServiceSkelBase", {
        fields: {
            m_MemberName: null,
            skel: null,
            direction: 0,
            element_type: 0,
            element_size: 0
        },
        props: {
            MemberName: {
                get: function () {
                    return this.m_MemberName;
                }
            }
        },
        ctors: {
            ctor: function (membername, skel, element_type, element_size, direction) {
                this.$initialize();
                this.m_MemberName = membername;
                this.skel = skel;
                this.direction = direction;
                this.element_type = element_type;
                this.element_size = element_size;
            }
        },
        methods: {
            CallMemoryFunction: function (m, e, mem) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $task3, 
                    $taskResult3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $t, 
                    memorypos, 
                    $t1, 
                    count, 
                    $t2, 
                    data, 
                    ret, 
                    memorypos1, 
                    $t3, 
                    count1, 
                    $t4, 
                    data1, 
                    ret1, 
                    param, 
                    ret2, 
                    len, 
                    ret3, 
                    MaxTransferSize, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11], $step);
                                switch ($step) {
                                    case 0: {
                                        $t = m.EntryType;
                                        if ($t === RobotRaconteurWeb.MessageEntryType.MemoryRead) {
                                            $step = 1;
                                            continue;
                                        }
                                        else if ($t === RobotRaconteurWeb.MessageEntryType.MemoryWrite) {
                                            $step = 3;
                                            continue;
                                        }
                                        else if ($t === RobotRaconteurWeb.MessageEntryType.MemoryGetParam) {
                                            $step = 5;
                                            continue;
                                        }
                                        else  {
                                            $step = 10;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 1: {
                                        if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.writeonly) {
                                            throw new RobotRaconteurWeb.WriteOnlyMemberException("Write only member");
                                        }

                                        memorypos = ($t1 = m.FindElement("memorypos").CastData(System.Array.type(System.UInt64)))[System.Array.index(0, $t1)];
                                        count = ($t2 = m.FindElement("count").CastData(System.Array.type(System.UInt64)))[System.Array.index(0, $t2)];
                                        $task1 = this.DoRead(memorypos, System.UInt64(0), count, mem);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        data = $taskResult1;
                                        ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryReadRet, this.MemberName);
                                        ret.AddElement$1("memorypos", memorypos);
                                        ret.AddElement$1("count", count);
                                        ret.AddElement$1("data", data);
                                        $tcs.setResult(ret);
                                        return;
                                    }
                                    case 3: {
                                        if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.readonly_) {
                                            throw new RobotRaconteurWeb.ReadOnlyMemberException("Read only member");
                                        }

                                        memorypos1 = ($t3 = m.FindElement("memorypos").CastData(System.Array.type(System.UInt64)))[System.Array.index(0, $t3)];
                                        count1 = ($t4 = m.FindElement("count").CastData(System.Array.type(System.UInt64)))[System.Array.index(0, $t4)];
                                        data1 = m.FindElement("data").Data;
                                        $task2 = this.DoWrite(memorypos1, data1, System.UInt64(0), count1, mem);
                                        $step = 4;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $task2.getAwaitedResult();
                                        ret1 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryReadRet, this.MemberName);
                                        ret1.AddElement$1("memorypos", memorypos1);
                                        ret1.AddElement$1("count", count1);
                                        $tcs.setResult(ret1);
                                        return;
                                    }
                                    case 5: {
                                        param = m.FindElement("parameter").CastData(System.String);
                                        if (Bridge.referenceEquals(param, "Length")) {
                                            $step = 6;
                                            continue;
                                        } else  {
                                            $step = 8;
                                            continue;
                                        }
                                    }
                                    case 6: {
                                        ret2 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParamRet, this.MemberName);
                                        $task3 = mem.GetLength();
                                        $step = 7;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 7: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        len = $taskResult3;
                                        ret2.AddElement$1("return", len);
                                        $tcs.setResult(ret2);
                                        return;
                                    }
                                    case 8: {
                                        if (Bridge.referenceEquals(param, "MaxTransferSize")) {
                                            ret3 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParamRet, this.MemberName);
                                            MaxTransferSize = this.skel.rr_node.MemoryMaxTransferSize;
                                            ret3.AddElement$1("return", Bridge.box(MaxTransferSize, System.UInt32));
                                            $tcs.setResult(ret3);
                                            return;

                                        } else {
                                            throw new System.InvalidOperationException.$ctor1("Unknown parameter");
                                        }
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {

                                    }
                                    case 10: {
                                        throw new RobotRaconteurWeb.ProtocolException("Invalid command");
                                    }
                                    case 11: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.AsyncMutex", {
        fields: {
            waiting_tasks: null,
            current: null
        },
        ctors: {
            init: function () {
                this.waiting_tasks = new (System.Collections.Generic.Queue$1(System.Threading.Tasks.TaskCompletionSource)).ctor();
            }
        },
        methods: {
            Lock: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    t, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        t = this.Enter();
                                        $task1 = t;
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(new RobotRaconteurWeb.AsyncMutex.LockHandle(this, t));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            LockWithTimeout: function (timeout) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    t, 
                    noop, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        t = null;
                                        t = this.Enter();
                                        $task1 = System.Threading.Tasks.Task.whenAny(t, System.Threading.Tasks.Task.delay(timeout));
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        if (t.isCompleted() || t.isFaulted() || t.isCanceled()) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        $task2 = t;
                                        $step = 3;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task2.getAwaitedResult();
                                        $tcs.setResult(new RobotRaconteurWeb.AsyncMutex.LockHandle(this, t));
                                        return;
                                    }
                                    case 4: {
                                        noop = t.continueWith(Bridge.fn.bind(this, function (x) {
                                            var e = x.getException();
                                            try {
                                                this.Exit(x);
                                            } catch ($e1) {
                                                $e1 = System.Exception.create($e1);
                                            }
                                        }));

                                        throw new System.TimeoutException.$ctor1("Timeout wating for mutex lock");
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Enter: function () {
                var t = new System.Threading.Tasks.TaskCompletionSource();
                this;
                {
                    if (this.current == null) {
                        t.trySetResult(0);
                        this.current = t.task;
                        return t.task;
                    } else {
                        this.waiting_tasks.Enqueue(t);
                        return t.task;
                    }

                }
            },
            Exit: function (t) {
                var c = null;
                this;
                {
                    if (!Bridge.referenceEquals(t, this.current)) {
                        throw new System.InvalidOperationException.$ctor1("Invalid task to release mutex");
                    }
                    if (this.waiting_tasks.Count > 0) {
                        c = this.waiting_tasks.Dequeue();
                        this.current = c.task;
                    } else {
                        this.current = null;
                    }
                }
                if (c != null) {
                    c.trySetResult(0);
                }
            },
            CancelAll: function () {
                var c2 = new (System.Collections.Generic.Queue$1(System.Threading.Tasks.TaskCompletionSource)).ctor();
                this;
                {
                    while (this.waiting_tasks.Count > 0) {
                        c2.Enqueue(this.waiting_tasks.Dequeue());
                    }

                }

                while (c2.Count > 0) {
                    c2.Dequeue().trySetCanceled();
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.AsyncMutex.LockHandle", {
        inherits: [System.IDisposable],
        $kind: "nested class",
        fields: {
            task: null,
            owner: null
        },
        alias: ["Dispose", "System$IDisposable$Dispose"],
        ctors: {
            ctor: function (owner, task) {
                this.$initialize();
                this.task = task;
                this.owner = owner;
            }
        },
        methods: {
            Dispose: function () {
                this.owner.Exit(this.task);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ITransportConnection", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.AsyncStreamTransportParent", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.AuthenticatedUser", {
        fields: {
            m_Username: null,
            m_Privileges: null,
            m_LoginTime: null,
            m_LastAccessTime: null
        },
        props: {
            Username: {
                get: function () {
                    return this.m_Username;
                }
            },
            Privileges: {
                get: function () {
                    return this.m_Privileges;
                }
            },
            LoginTime: {
                get: function () {
                    return this.m_LoginTime;
                }
            },
            LastAccessTime: {
                get: function () {
                    return this.m_LastAccessTime;
                }
            }
        },
        ctors: {
            init: function () {
                this.m_LoginTime = System.DateTime.getDefaultValue();
                this.m_LastAccessTime = System.DateTime.getDefaultValue();
            },
            ctor: function (username, privileges) {
                this.$initialize();
                this.m_Username = username;
                this.m_Privileges = privileges;
                this.m_LoginTime = System.DateTime.getUtcNow();
                this.m_LastAccessTime = System.DateTime.getUtcNow();
            }
        },
        methods: {
            UpdateLastAccess: function () {
                this.m_LastAccessTime = System.DateTime.getUtcNow();
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Transport", {
        statics: {
            fields: {
                m_CurrentThreadTransportConnectionURL: null,
                m_CurrentThreadTransport: null
            },
            props: {
                CurrentThreadTransportConnectionURL: {
                    get: function () {
                        return RobotRaconteurWeb.Transport.m_CurrentThreadTransportConnectionURL;
                    }
                },
                CurrentThreadTransport: {
                    get: function () {
                        return RobotRaconteurWeb.Transport.m_CurrentThreadTransport;
                    }
                }
            }
        },
        fields: {
            TransportID: 0,
            node: null
        },
        events: {
            MessageReceivedEvent: null,
            TransportListeners: null
        },
        ctors: {
            ctor: function (node) {
                if (node === void 0) { node = null; }

                this.$initialize();
                if (node != null) {

                    this.node = node;
                } else {
                    this.node = RobotRaconteurWeb.RobotRaconteurNode.s;
                }
            }
        },
        methods: {
            CheckConnection: function (endpoint) {

            },
            SendMessage: function (m, cancel) {
                throw new System.NotImplementedException.ctor();
            },
            MessageReceived: function (m) {


                this.MessageReceivedEvent(m);
            },
            SpecialRequest: function (m) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    type, 
                    r, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,5], $step);
                                switch ($step) {
                                    case 0: {
                                        if (m.entries.Count >= 1) {
                                            $step = 1;
                                            continue;
                                        } 
                                        $step = 5;
                                        continue;
                                    }
                                    case 1: {
                                        type = ((m.entries.getItem(0).EntryType) >>> 0);
                                        if (type < 500 && (type % 2 === 1)) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        $task1 = this.node.SpecialRequest(m, this.TransportID);
                                        $step = 3;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        r = $taskResult1;
                                        $tcs.setResult(r);
                                        return;
                                    }

                                    case 5: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Close: function () {
                this.FireTransportEventListener(RobotRaconteurWeb.TransportListenerEventType.TransportClosed, null);
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            TransportCapability: function (name) {
                return 0;
            },
            FireTransportEventListener: function (ev, parameter) {
                if (!Bridge.staticEquals(this.TransportListeners, null)) {
                    try {
                        this.TransportListeners(this, ev, parameter);
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                }
            },
            GetDetectedNodes: function (token) {
                var o = new (System.Collections.Generic.List$1(RobotRaconteurWeb.NodeDiscoveryInfo)).ctor();
                return System.Threading.Tasks.Task.fromResult(o, System.Collections.Generic.List$1(RobotRaconteurWeb.NodeDiscoveryInfo));
            },
            LocalNodeServicesChanged: function () {

            },
            SendDiscoveryRequest: function () {

            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Callback$1", function (T) { return {
        fields: {
            m_MemberName: null
        },
        ctors: {
            ctor: function (name) {
                this.$initialize();
                this.m_MemberName = name;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.MemberDefinition", {
        statics: {
            methods: {
                MemberDefinition_ParseCommaList: function (r, s, res) {
                    var r_empty = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*$");
                    if (r_empty.isMatch(s)) {
                        return true;
                    }

                    var r_match = r.match(s);
                    if (!r_match.getSuccess()) {
                        return false;
                    }

                    res.v.add(r_match.getGroups().get(1).getValue());
                    if (r_match.getGroups().get(2).getSuccess()) {
                        if (!RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParseCommaList(r, r_match.getGroups().get(2).getValue(), res)) {
                            return false;
                        }
                    }
                    return true;
                },
                MemberDefinition_ParseParameters: function (s, res) {
                    var r_params = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*((?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)*(?:\\[[0-9\\,\\*\\-]*\\])?(?:\\{\\w{1,16}\\})?[ \\t]+\\w+)(?:[ \\t]*,[ \\t]*([ -~\\t]*\\w[ -~\\t]*))?[ \\t]*$");

                    return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParseCommaList(r_params, s, res);
                },
                MemberDefinition_ParseModifiers: function (s, res) {
                    var r_modifier = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*([a-zA-Z](?:\\w*[a-zA-Z0-9])?(?:\\([\\w\\-\\., \\t\\\"\\{\\}\\:]*\\))?)(?:[ \\t]*,([ -~\\t]*))?$");

                    return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParseCommaList(r_modifier, s, res);
                },
                MemberDefinition_ModifiersToString: function (modifiers) {
                    if (modifiers.Count === 0) {
                        return "";
                    }

                    return " [" + (Bridge.toArray(modifiers).join(",") || "") + "]";
                },
                MemberDefinition_ParseFormat_common: function (s, res) {
                    var r = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*([a-zA-Z]+)[ \\t]+(?:([a-zA-Z][\\w\\{\\}\\[\\]\\*\\,\\-\\.]*)[ \\t]+)?(\\w+)(?:[ \\t]*(\\(([^)]*)\\)))?(?:[ \\t]+\\[([^\\]]*)\\])?[ \\t]*$");
                    var r_result = r.match(s);
                    if (!r_result.getSuccess()) {
                        res.v = null;
                        return false;
                    }

                    res.v = new RobotRaconteurWeb.MemberDefinition.MemberDefiniton_ParseResults();
                    res.v.Modifiers.clear();
                    res.v.Parameters.clear();

                    var member_type_result = r_result.getGroups().get(1);
                    var data_type_result = r_result.getGroups().get(2);
                    var name_result = r_result.getGroups().get(3);
                    var params_present_result = r_result.getGroups().get(4);
                    var params_result = r_result.getGroups().get(5);
                    var modifiers_result = r_result.getGroups().get(6);

                    res.v.MemberType = member_type_result.getValue();
                    if (data_type_result.getSuccess()) {
                        res.v.DataType = data_type_result.getValue();
                    }
                    res.v.Name = name_result.getValue();

                    if (params_present_result.getSuccess()) {
                        res.v.Parameters = new (System.Collections.Generic.List$1(System.String)).ctor();
                        if (!RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParseParameters(params_result.getValue(), Bridge.ref(res.v, "Parameters"))) {
                            return false;
                        }
                    }

                    if (modifiers_result.getSuccess()) {
                        res.v.Modifiers = new (System.Collections.Generic.List$1(System.String)).ctor();
                        if (!RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParseModifiers(modifiers_result.getValue(), Bridge.ref(res.v, "Modifiers"))) {
                            return false;
                        }

                        if (res.v.Modifiers.Count === 0) {
                            return false;
                        }
                    }
                    return true;
                },
                MemberDefinition_FromStringFormat_common: function (parse_res, s1, member_types, def) {

                    if (!RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParseFormat_common(s1, parse_res)) {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Could not parse " + (member_types.getItem(0) || "") + " definition \"" + (s1 || "") + "\"");
                    }

                    var m = parse_res.v.MemberType;
                    if (member_types.Find(function (x) {
                        return Bridge.referenceEquals(x, m);
                    }) == null) {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Format Error");
                    }

                    def.Reset();

                    def.Name = parse_res.v.Name;
                },
                MemberDefinition_FromStringFormat1: function (s1, member_types, def, type) {
                    var parse_res = { v : new RobotRaconteurWeb.MemberDefinition.MemberDefiniton_ParseResults() };
                    RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat_common(parse_res, s1, member_types, def);

                    if (parse_res.v.DataType == null || parse_res.v.Parameters.Count > 0) {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Format error for " + (member_types.getItem(0) || "") + " definition \"" + (s1 || "") + "\"");
                    }
                    type.v = new RobotRaconteurWeb.TypeDefinition.$ctor1(def);
                    type.v.FromString(parse_res.v.DataType);
                    type.v.Rename("value");
                    type.v.QualifyTypeStringWithUsing();

                    if (parse_res.v.Modifiers != null) {
                        def.Modifiers = parse_res.v.Modifiers;
                    }
                },
                MemberDefinition_FromStringFormat1$1: function (s1, member_type, def, type) {
                    var member_types = new (System.Collections.Generic.List$1(System.String)).ctor();
                    member_types.add(member_type);
                    RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat1(s1, member_types, def, type);
                },
                MemberDefinition_ToStringFormat1: function (member_type, def, data_type) {
                    var t = { v : new RobotRaconteurWeb.TypeDefinition.ctor() };
                    data_type.CopyTo(t);
                    t.v.Rename(def.Name);
                    t.v.UnqualifyTypeStringWithUsing();

                    return (member_type || "") + " " + (t.v.toString() || "") + (RobotRaconteurWeb.MemberDefinition.MemberDefinition_ModifiersToString(def.Modifiers) || "");
                },
                MemberDefinition_ParamatersFromStrings: function (s, params_, def) {
                    var $t;

                    $t = Bridge.getEnumerator(s);
                    try {
                        while ($t.moveNext()) {
                            var s1 = $t.Current;
                            var tdef = new RobotRaconteurWeb.TypeDefinition.$ctor1(def);
                            tdef.FromString(s1);
                            tdef.QualifyTypeStringWithUsing();
                            params_.v.add(tdef);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                },
                MemberDefinition_ParametersToString: function (params_) {
                    var $t;
                    var params2 = new (System.Collections.Generic.List$1(System.String)).ctor();
                    $t = Bridge.getEnumerator(params_);
                    try {
                        while ($t.moveNext()) {
                            var p = $t.Current;
                            var p2 = { v : new RobotRaconteurWeb.TypeDefinition.ctor() };
                            p.CopyTo(p2);
                            p2.v.UnqualifyTypeStringWithUsing();
                            params2.add(p2.v.toString());
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return Bridge.toArray(params2).join(", ");
                },
                MemberDefinition_FromStringFormat2: function (s1, member_type, def, return_type, params_) {
                    var member_types = new (System.Collections.Generic.List$1(System.String)).ctor();
                    member_types.add(member_type);

                    var parse_res = { v : new RobotRaconteurWeb.MemberDefinition.MemberDefiniton_ParseResults() };
                    RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat_common(parse_res, s1, member_types, def);

                    if (parse_res.v.DataType == null || parse_res.v.Parameters == null) {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Format error for " + (member_types.getItem(0) || "") + " definition \"" + (s1 || "") + "\"");
                    }
                    return_type.v = new RobotRaconteurWeb.TypeDefinition.$ctor1(def);
                    return_type.v.FromString(parse_res.v.DataType);
                    return_type.v.Rename("");
                    return_type.v.QualifyTypeStringWithUsing();

                    RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParamatersFromStrings(parse_res.v.Parameters, params_, def);

                    if (parse_res.v.Modifiers != null) {
                        def.Modifiers = parse_res.v.Modifiers;
                    }
                },
                MemberDefinition_ToStringFormat2: function (member_type, def, return_type, params_) {
                    var t = { v : new RobotRaconteurWeb.TypeDefinition.$ctor1(def) };
                    return_type.CopyTo(t);
                    t.v.Rename(def.Name);
                    t.v.UnqualifyTypeStringWithUsing();

                    return (member_type || "") + " " + (t.v.toString() || "") + "(" + (RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParametersToString(params_) || "") + ")" + (RobotRaconteurWeb.MemberDefinition.MemberDefinition_ModifiersToString(def.Modifiers) || "");
                },
                MemberDefinition_FromStringFormat3: function (s1, member_type, def, params_) {
                    var member_types = new (System.Collections.Generic.List$1(System.String)).ctor();
                    member_types.add(member_type);

                    var parse_res = { v : new RobotRaconteurWeb.MemberDefinition.MemberDefiniton_ParseResults() };
                    RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat_common(parse_res, s1, member_types, def);

                    if (parse_res.v.DataType != null || parse_res.v.Parameters == null) {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Format error for " + (member_types.getItem(0) || "") + " definition \"" + (s1 || "") + "\"");
                    }

                    RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParamatersFromStrings(parse_res.v.Parameters, params_, def);

                    if (parse_res.v.Modifiers != null) {
                        def.Modifiers = parse_res.v.Modifiers;
                    }
                },
                MemberDefinition_ToStringFormat3: function (member_type, def, params_) {
                    return (member_type || "") + " " + (def.Name || "") + "(" + (RobotRaconteurWeb.MemberDefinition.MemberDefinition_ParametersToString(params_) || "") + ")" + (RobotRaconteurWeb.MemberDefinition.MemberDefinition_ModifiersToString(def.Modifiers) || "");
                },
                MemberDefinition_GetDirection: function (modifiers) {
                    if (modifiers == null) {
                        return RobotRaconteurWeb.MemberDefinition_Direction.both;
                    }
                    if (modifiers.contains("readonly")) {
                        return RobotRaconteurWeb.MemberDefinition_Direction.readonly_;
                    }

                    if (modifiers.contains("writeonly")) {
                        return RobotRaconteurWeb.MemberDefinition_Direction.writeonly;
                    }

                    return RobotRaconteurWeb.MemberDefinition_Direction.both;
                }
            }
        },
        fields: {
            Name: null,
            ServiceEntry: null,
            Modifiers: null
        },
        ctors: {
            ctor: function (ServiceEntry) {
                this.$initialize();
                this.ServiceEntry = ServiceEntry;
            }
        },
        methods: {
            Reset: function () {
                this.Name = "";
                this.Modifiers = null;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.CDouble", {
        $kind: "struct",
        statics: {
            methods: {
                op_Equality: function (a, b) {
                    return (a.Real === b.Real) && (a.Imag === b.Imag);
                },
                op_Inequality: function (a, b) {
                    return !((a.Real === b.Real) && (a.Imag === b.Imag));
                },
                getDefaultValue: function () { return new RobotRaconteurWeb.CDouble(); }
            }
        },
        fields: {
            Real: 0,
            Imag: 0
        },
        ctors: {
            $ctor1: function (real, imag) {
                this.$initialize();
                this.Real = real;
                this.Imag = imag;
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            equals: function (obj) {
                if (obj == null) {
                    return false;
                }
                if (!(Bridge.is(obj, RobotRaconteurWeb.CDouble))) {
                    return false;
                }
                return RobotRaconteurWeb.CDouble.op_Equality(System.Nullable.getValue(Bridge.cast(Bridge.unbox(obj, RobotRaconteurWeb.CDouble), RobotRaconteurWeb.CDouble)), this);
            },
            getHashCode: function () {
                return Bridge.Int.clip32(this.Real % 10000000.0 + this.Imag % 10000000.0);
            },
            $clone: function (to) {
                var s = to || new RobotRaconteurWeb.CDouble();
                s.Real = this.Real;
                s.Imag = this.Imag;
                return s;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Endpoint", {
        fields: {
            m_LocalEndpoint: 0,
            m_RemoteEndpoint: 0,
            m_RemoteNodeName: null,
            m_RemoteNodeID: null,
            TransportConnection: null,
            transport: 0,
            LastMessageReceivedTime: null,
            MessageNumber: 0,
            MessageNumberLock: null,
            node: null
        },
        props: {
            LocalEndpoint: {
                get: function () {
                    return this.m_LocalEndpoint;
                }
            },
            RemoteEndpoint: {
                get: function () {
                    return this.m_RemoteEndpoint;
                }
            },
            RemoteNodeName: {
                get: function () {
                    return this.m_RemoteNodeName;
                }
            },
            RemoteNodeID: {
                get: function () {
                    return this.m_RemoteNodeID;
                }
            }
        },
        ctors: {
            init: function () {
                this.LastMessageReceivedTime = System.DateTime.getDefaultValue();
                this.m_LocalEndpoint = 0;
                this.m_RemoteEndpoint = 0;
                this.m_RemoteNodeName = "";
                this.m_RemoteNodeID = RobotRaconteurWeb.NodeID.Any;
                this.LastMessageReceivedTime = System.DateTime.getUtcNow();
                this.MessageNumber = 0;
                this.MessageNumberLock = { };
            },
            ctor: function (node) {
                this.$initialize();
                if (node == null) {
                    this.node = RobotRaconteurWeb.RobotRaconteurNode.s;
                } else {
                    this.node = node;
                }
            }
        },
        methods: {
            SendMessage: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (m.header == null) {
                                            m.header = new RobotRaconteurWeb.MessageHeader();
                                        }

                                        if (m.entries.Count === 1 && m.entries.getItem(0).EntryType <= 500) {
                                            m.header.ReceiverNodeName = this.RemoteNodeName;
                                            m.header.SenderNodeName = this.node.NodeName;
                                        }
                                        m.header.SenderEndpoint = this.LocalEndpoint;
                                        m.header.ReceiverEndpoint = this.RemoteEndpoint;

                                        m.header.SenderNodeID = this.node.NodeID;
                                        m.header.ReceiverNodeID = this.RemoteNodeID;


                                        this.MessageNumberLock;
                                        {
                                            m.header.MessageID = this.MessageNumber;

                                            this.MessageNumber = ((this.MessageNumber === (65535)) ? 0 : ((this.MessageNumber + 1) | 0)) & 65535;
                                        }

                                        $task1 = this.node.SendMessage(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CheckEndpointCapabilityMessage: function (m) {
                var capability = 0;
                var e;

                var ret = new RobotRaconteurWeb.Message();
                ret.header = new RobotRaconteurWeb.MessageHeader();
                ret.header.ReceiverNodeName = m.header.SenderNodeName;
                ret.header.SenderNodeName = this.node.NodeName;
                ret.header.ReceiverNodeID = m.header.SenderNodeID;
                ret.header.ReceiverEndpoint = m.header.SenderEndpoint;
                ret.header.SenderEndpoint = m.header.ReceiverEndpoint;
                ret.header.SenderNodeID = this.node.NodeID;


                try {

                    if (m.entries.Count === 0) {
                        throw new System.InvalidOperationException.ctor();
                    }

                    e = m.entries.getItem(0);

                    var eret = ret.AddEntry(RobotRaconteurWeb.MessageEntryType.EndpointCheckCapabilityRet, m.entries.getItem(0).MemberName);
                    eret.RequestID = e.RequestID;
                    eret.ServicePath = e.ServicePath;

                    if (e.EntryType !== RobotRaconteurWeb.MessageEntryType.EndpointCheckCapability) {
                        throw new System.InvalidOperationException.ctor();
                    }
                    var name = e.MemberName;
                    capability = this.EndpointCapability(name);
                    eret.AddElement$1("return", Bridge.box(capability, System.UInt32));
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);



                }

                RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage(ret, Bridge.getDefaultValue(System.Threading.CancellationToken)));


            },
            EndpointCapability: function (name) {
                return 0;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ClientServiceListenerEventType", {
        $kind: "enum",
        statics: {
            fields: {
                ClientClosed: 1
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ConstantDefinition", {
        statics: {
            methods: {
                ConstantDefinition_CheckScalar: function (t, val) {

                    switch (t) {
                        case RobotRaconteurWeb.DataTypes.double_t: 
                            var res1 = { };
                            return System.Double.tryParse(val, null, res1);
                        case RobotRaconteurWeb.DataTypes.single_t: 
                            var res2 = { };
                            return System.Single.tryParse(val, null, res2);
                        case RobotRaconteurWeb.DataTypes.int8_t: 
                            var res3 = { };
                            return System.SByte.tryParse(val, res3);
                        case RobotRaconteurWeb.DataTypes.uint8_t: 
                            var res4 = { };
                            return System.Byte.tryParse(val, res4);
                        case RobotRaconteurWeb.DataTypes.int16_t: 
                            var res5 = { };
                            return System.Int16.tryParse(val, res5);
                        case RobotRaconteurWeb.DataTypes.uint16_t: 
                            var res6 = { };
                            return System.UInt16.tryParse(val, res6);
                        case RobotRaconteurWeb.DataTypes.int32_t: 
                            var res7 = { };
                            return System.Int32.tryParse(val, res7);
                        case RobotRaconteurWeb.DataTypes.uint32_t: 
                            var res8 = { };
                            return System.UInt32.tryParse(val, res8);
                        case RobotRaconteurWeb.DataTypes.int64_t: 
                            var res9 = { };
                            return System.Int64.tryParse(val, res9);
                        case RobotRaconteurWeb.DataTypes.uint64_t: 
                            var res10 = { };
                            return System.UInt64.tryParse(val, res10);
                        default: 
                            return false;
                    }
                },
                ConstantDefinition_UnescapeString_Formatter: function (match) {
                    var i = match.getGroups().get(0).getValue();
                    if (Bridge.referenceEquals(i, "\\\"")) {
                        return "\"";
                    }
                    if (Bridge.referenceEquals(i, "\\\\")) {
                        return "\\";
                    }
                    if (Bridge.referenceEquals(i, "\\/")) {
                        return "/";
                    }
                    if (Bridge.referenceEquals(i, "\\b")) {
                        return "\b";
                    }
                    if (Bridge.referenceEquals(i, "\\f")) {
                        return "\f";
                    }
                    if (Bridge.referenceEquals(i, "\\n")) {
                        return "\n";
                    }
                    if (Bridge.referenceEquals(i, "\\r")) {
                        return "\r";
                    }
                    if (Bridge.referenceEquals(i, "\\t")) {
                        return "\t";
                    }

                    if (System.String.startsWith(i, "\\u")) {

                        var v3 = System.Array.init(((Bridge.Int.div(i.length, 3)) | 0), 0, System.Byte);
                        for (var j = 0; j < ((Bridge.Int.div(v3.length, 2)) | 0); j = (j + 1) | 0) {
                            var v = i.substr(((Bridge.Int.mul(j, 6) + 2) | 0), 2);
                            var v2 = i.substr(((Bridge.Int.mul(j, 6) + 4) | 0), 2);

                            v3[System.Array.index(Bridge.Int.mul(j, 2), v3)] = System.Convert.toNumberInBase(v, 16, 6);
                            v3[System.Array.index(((Bridge.Int.mul(j, 2) + 1) | 0), v3)] = System.Convert.toNumberInBase(v2, 16, 6);
                        }
                        return System.Text.Encoding.Unicode.GetString(v3);
                    }

                    throw new RobotRaconteurWeb.InternalErrorException("Internal error");
                },
                UnescapeString: function (in_) {
                    var r_string_expression = new System.Text.RegularExpressions.Regex.ctor("(\\\\\"|\\\\\\\\|\\\\/|\\\\b|\\\\f|\\\\n|\\\\r|\\\\t|(?:\\\\u[\\da-fA-F]{4})+)");
                    return r_string_expression.replace(in_, RobotRaconteurWeb.ConstantDefinition.ConstantDefinition_UnescapeString_Formatter);
                },
                ConstantDefinition_EscapeString_Formatter: function (match) {
                    var i = match.getGroups().get(0).getValue();

                    if (Bridge.referenceEquals(i, "\"")) {
                        return "\\\"";
                    }
                    if (Bridge.referenceEquals(i, "\\")) {
                        return "\\\\";
                    }
                    if (Bridge.referenceEquals(i, "/")) {
                        return "\\/";
                    }
                    if (Bridge.referenceEquals(i, "\b")) {
                        return "\\b";
                    }
                    if (Bridge.referenceEquals(i, "\f")) {
                        return "\\f";
                    }
                    if (Bridge.referenceEquals(i, "\n")) {
                        return "\\n";
                    }
                    if (Bridge.referenceEquals(i, "\r")) {
                        return "\\r";
                    }
                    if (Bridge.referenceEquals(i, "\t")) {
                        return "\\t";
                    }

                    var v = System.Text.Encoding.Unicode.GetBytes$2(i);
                    var v2 = new System.IO.StringWriter.ctor();
                    for (var j = 0; j < v.length; j = (j + 2) | 0) {
                        v2.Write$12("\\u{0:X02}{1:X02}", Bridge.box(v[System.Array.index(j, v)], System.Byte), Bridge.box(v[System.Array.index(((j + 1) | 0), v)], System.Byte));
                    }
                    return v2.toString();
                },
                EscapeString: function (in_) {
                    var r_replace = new System.Text.RegularExpressions.Regex.ctor("(\"|\\\\|\\/|[\\x00-\\x1F]|\\x7F|[\\x80-\\xFF]+)");
                    return r_replace.replace(in_, RobotRaconteurWeb.ConstantDefinition.ConstantDefinition_EscapeString_Formatter);
                }
            }
        },
        fields: {
            Name: null,
            Type: null,
            Value: null,
            service: null,
            service_entry: null
        },
        ctors: {
            ctor: function (service) {
                this.$initialize();
                this.service = service;
            },
            $ctor1: function (service_entry) {
                this.$initialize();
                this.service_entry = service_entry;
            }
        },
        methods: {
            toString: function () {
                return "constant " + (this.Type.toString() || "") + " " + (this.Name || "") + " " + (this.Value || "");
            },
            FromString: function (s) {
                this.Reset();

                var r = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*constant[ \\t]+((?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)*(?:\\[[0-9\\,\\*\\-]*\\])?(?:\\{\\w{1,16}\\})?)[ \\t]+([a-zA-Z](?:\\w*[a-zA-Z0-9])?)[ \\t]+([^\\s](?:[ -~\\t]*[^\\s])?)[ \\t]*$");
                var r_match = r.match(s);
                if (!r_match.getSuccess()) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid constant definition: " + (s.trim() || ""));
                }

                var type_str = r_match.getGroups().get(1).getValue();
                var def = new RobotRaconteurWeb.TypeDefinition.ctor();
                def.FromString(type_str);
                if (!this.VerifyTypeAndValue(def, r_match.getGroups().get(3).getValue())) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid constant definition: " + (s.trim() || ""));
                }

                this.Type = def;
                this.Name = r_match.getGroups().get(2).getValue();
                this.Value = r_match.getGroups().get(3).getValue();
            },
            VerifyValue: function () {
                return this.VerifyTypeAndValue(this.Type, this.Value);
            },
            VerifyTypeAndValue: function (t, value) {
                var $t;
                if (t.ArrayType === RobotRaconteurWeb.DataTypes_ArrayTypes.multidimarray) {
                    return false;
                }
                if (RobotRaconteurWeb.DataTypeUtil.IsNumber(t.Type)) {
                    if (t.Type === RobotRaconteurWeb.DataTypes.cdouble_t || t.Type === RobotRaconteurWeb.DataTypes.csingle_t || t.Type === RobotRaconteurWeb.DataTypes.bool_t) {
                        return false;
                    }
                    if (t.ContainerType !== RobotRaconteurWeb.DataTypes_ContainerTypes.none) {
                        return false;
                    }
                    if (t.ArrayType === RobotRaconteurWeb.DataTypes_ArrayTypes.none) {
                        if (t.Type === RobotRaconteurWeb.DataTypes.double_t || t.Type === RobotRaconteurWeb.DataTypes.single_t) {
                            var r_scalar = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*[+\\-]?(?:(?:0|[1-9]\\d*)(?:\\.\\d*)?|:\\.\\d+)(?:[eE][+\\-]?\\d+)?[ \\t]*$");
                            if (!r_scalar.isMatch(value)) {
                                return false;
                            }
                        } else {
                            var r_scalar1 = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*[+\\-]?\\d+[ \\t]*$");
                            if (!r_scalar1.isMatch(value)) {
                                return false;
                            }
                        }
                        return RobotRaconteurWeb.ConstantDefinition.ConstantDefinition_CheckScalar(t.Type, value);
                    } else {
                        var r_array_match;
                        if (t.Type === RobotRaconteurWeb.DataTypes.double_t || t.Type === RobotRaconteurWeb.DataTypes.single_t) {
                            var r_array = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*\\{[ \\t]*((?:[+\\-]?(?:(?:0|[1-9]\\d*)(?:\\.\\d*)?|:\\.\\d+)(?:[eE][+\\-]?\\d+)?)(?:[ \\t]*,[ \\t]*(?:[+\\-]?(?:(?:0|[1-9]\\d*)(?:\\.\\d*)?|:\\.\\d+)(?:[eE][+\\-]?\\d+)?))*)?[ \\t]*}[ \\t]*$");
                            r_array_match = r_array.match(value);
                            if (!r_array_match.getSuccess()) {
                                return false;
                            }
                        } else {
                            var r_array1 = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*\\{[ \\t]*((?:[+\\-]?\\d+)(?:[ \\t]*,[ \\t]*(?:[+\\-]?\\d+))*)?[ \\t]*}[ \\t]*$");
                            r_array_match = r_array1.match(value);
                            if (!r_array_match.getSuccess()) {
                                return false;
                            }
                        }

                        if (!r_array_match.getGroups().get(1).getSuccess()) {
                            return true;
                        }



                        $t = Bridge.getEnumerator(System.String.split(r_array_match.getGroups().get(1).getValue(), System.Array.init([44], System.Char).map(function (i) {{ return String.fromCharCode(i); }})));
                        try {
                            while ($t.moveNext()) {
                                var e = $t.Current;
                                if (!RobotRaconteurWeb.ConstantDefinition.ConstantDefinition_CheckScalar(t.Type, e.trim())) {
                                    return false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$Dispose();
                            }
                        }
                        return true;
                    }
                } else {
                    if (t.ArrayType !== RobotRaconteurWeb.DataTypes_ArrayTypes.none) {
                        return false;
                    }
                    if (t.Type === RobotRaconteurWeb.DataTypes.string_t) {
                        var r_string = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*\"(?:(?:\\\\\"|\\\\\\\\|\\\\/|\\\\b|\\\\f|\\\\n|\\\\r|\\\\t|\\\\u[\\da-fA-F]{4})|[^\"\\\\])*\"[ \\t]*$");
                        if (!r_string.isMatch(value)) {
                            return false;
                        }
                        return true;
                    } else if (t.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                        var r_struct = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*\\{[ \\t]*(?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?[ \\t]*\\:[ \\t]*[a-zA-Z](?:\\w*[a-zA-Z0-9])?(?:[ \\t]*,[ \\t]*[a-zA-Z](?:\\w*[a-zA-Z0-9])?[ \\t]*\\:[ \\t]*[a-zA-Z](?:\\w*[a-zA-Z0-9])?)*[ \\t]*)?\\}[ \\t]*$");
                        if (!r_struct.isMatch(value)) {
                            return false;
                        }
                        return true;
                    }
                    return false;
                }
            },
            Reset: function () {
                this.Name = "";
                this.Type = null;
                this.Value = null;
            },
            ValueToScalar: function (T) {
                return Bridge.cast(Bridge.unbox(System.Convert.changeType(this.Value.trim(), T), T), T);
            },
            ValueToArray: function (T) {
                var value1 = System.String.trim(this.Value, [32, 9, 123, 125]).trim();
                if (value1.length === 0) {
                    return System.Array.init(0, function (){
                        return Bridge.getDefaultValue(T);
                    }, T);
                }

                return System.Linq.Enumerable.from(System.String.split(value1, [44].map(function (i) {{ return String.fromCharCode(i); }})), System.String).select(function (x) {
                        return Bridge.cast(Bridge.unbox(System.Convert.changeType(x.trim(), T), T), T);
                    }).ToArray(T);
            },
            ValueToString: function () {
                if (RobotRaconteurWeb.TypeDefinition.op_Equality(this.Type, null)) {
                    throw new System.InvalidOperationException.$ctor1("Invalid operation");
                }
                if (this.Type.Type !== RobotRaconteurWeb.DataTypes.string_t) {
                    throw new System.InvalidOperationException.$ctor1("Invalid operation");
                }

                var r_string = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*\"((?:(?:\\\\\"|\\\\\\\\|\\\\/|\\\\b|\\\\f|\\\\n|\\\\r|\\\\t|\\\\u[\\da-fA-F]{4})|(?:(?![\"\\\\])[ -~]))*)\"[ \\t]*$");
                var r_string_match = r_string.match(this.Value);
                if (!r_string_match.getSuccess()) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid string constant format");
                }

                var value2 = r_string_match.getGroups().get(1).getValue();
                return RobotRaconteurWeb.ConstantDefinition.UnescapeString(value2);
            },
            ValueToStructFields: function () {
                var $t;
                var o = new (System.Collections.Generic.List$1(RobotRaconteurWeb.ConstantDefinition_StructField)).ctor();
                var value1 = System.String.trim(this.Value, System.Array.init([32, 9, 123, 125], System.Char)).trim();
                if (value1.length === 0) {
                    return o;
                }

                var r = new System.Text.RegularExpressions.Regex.ctor("[ \\t]*([a-zA-Z](?:\\w*[a-zA-Z0-9])?)[ \\t]*\\:[ \\t]*([a-zA-Z](?:\\w*[a-zA-Z0-9])?)[ \\t]*");
                var s = System.String.split(value1, System.Array.init([44], System.Char).map(function (i) {{ return String.fromCharCode(i); }}));
                $t = Bridge.getEnumerator(s);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var r_match = r.match(e);
                        if (!r_match.getSuccess()) {
                            throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid struct constant format");
                        }
                        var f = new RobotRaconteurWeb.ConstantDefinition_StructField();
                        f.Name = r_match.getGroups().get(1).getValue();
                        f.ConstantRefName = r_match.getGroups().get(2).getValue();
                        o.add(f);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
                return o;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ConstantDefinition_StructField", {
        fields: {
            Name: null,
            ConstantRefName: null
        }
    });

    Bridge.define("RobotRaconteurWeb.CSingle", {
        $kind: "struct",
        statics: {
            methods: {
                op_Equality: function (a, b) {
                    return (a.Real === b.Real) && (a.Imag === b.Imag);
                },
                op_Inequality: function (a, b) {
                    return !((a.Real === b.Real) && (a.Imag === b.Imag));
                },
                getDefaultValue: function () { return new RobotRaconteurWeb.CSingle(); }
            }
        },
        fields: {
            Real: 0,
            Imag: 0
        },
        ctors: {
            $ctor1: function (real, imag) {
                this.$initialize();
                this.Real = real;
                this.Imag = imag;
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            equals: function (obj) {
                if (obj == null) {
                    return false;
                }
                if (!(Bridge.is(obj, RobotRaconteurWeb.CSingle))) {
                    return false;
                }
                return RobotRaconteurWeb.CSingle.op_Equality(System.Nullable.getValue(Bridge.cast(Bridge.unbox(obj, RobotRaconteurWeb.CSingle), RobotRaconteurWeb.CSingle)), this);
            },
            getHashCode: function () {
                return Bridge.Int.clip32(this.Real % 10000000.0 + this.Imag % 10000000.0);
            },
            $clone: function (to) {
                var s = to || new RobotRaconteurWeb.CSingle();
                s.Real = this.Real;
                s.Imag = this.Imag;
                return s;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.DataTypes", {
        $kind: "enum",
        statics: {
            fields: {
                void_t: 0,
                double_t: 1,
                single_t: 2,
                int8_t: 3,
                uint8_t: 4,
                int16_t: 5,
                uint16_t: 6,
                int32_t: 7,
                uint32_t: 8,
                int64_t: 9,
                uint64_t: 10,
                string_t: 11,
                cdouble_t: 12,
                csingle_t: 13,
                bool_t: 14,
                structure_t: 101,
                vector_t: 102,
                dictionary_t: 103,
                object_t: 104,
                varvalue_t: 105,
                varobject_t: 106,
                list_t: 108,
                pod_t: 109,
                pod_array_t: 110,
                pod_multidimarray_t: 111,
                enum_t: 112,
                namedtype_t: 113,
                namedarray_t: 114,
                namedarray_array_t: 115,
                namedarray_multidimarray_t: 116,
                multidimarray_t: 117
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.DataTypes_ArrayTypes", {
        $kind: "enum",
        statics: {
            fields: {
                none: 0,
                array: 1,
                multidimarray: 2
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.DataTypes_ContainerTypes", {
        $kind: "enum",
        statics: {
            fields: {
                none: 0,
                list: 1,
                map_int32: 2,
                map_string: 3,
                generator: 4
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.DataTypeUtil", {
        statics: {
            methods: {
                size: function (type) {
                    switch (type) {
                        case RobotRaconteurWeb.DataTypes.double_t: 
                            return 8;
                        case RobotRaconteurWeb.DataTypes.single_t: 
                            return 4;
                        case RobotRaconteurWeb.DataTypes.int8_t: 
                        case RobotRaconteurWeb.DataTypes.uint8_t: 
                            return 1;
                        case RobotRaconteurWeb.DataTypes.int16_t: 
                        case RobotRaconteurWeb.DataTypes.uint16_t: 
                            return 2;
                        case RobotRaconteurWeb.DataTypes.int32_t: 
                        case RobotRaconteurWeb.DataTypes.uint32_t: 
                            return 4;
                        case RobotRaconteurWeb.DataTypes.int64_t: 
                        case RobotRaconteurWeb.DataTypes.uint64_t: 
                            return 8;
                        case RobotRaconteurWeb.DataTypes.string_t: 
                            return 1;
                        case RobotRaconteurWeb.DataTypes.cdouble_t: 
                            return 16;
                        case RobotRaconteurWeb.DataTypes.csingle_t: 
                            return 8;
                        case RobotRaconteurWeb.DataTypes.bool_t: 
                            return 1;
                        default: 
                            throw new RobotRaconteurWeb.DataTypeException("Invalid data type");
                    }
                },
                TypeIDFromString: function (stype) {
                    switch (stype) {
                        case "null": 
                            return RobotRaconteurWeb.DataTypes.void_t;
                        case "System.Double": 
                            return RobotRaconteurWeb.DataTypes.double_t;
                        case "System.Single": 
                            return RobotRaconteurWeb.DataTypes.single_t;
                        case "System.SByte": 
                            return RobotRaconteurWeb.DataTypes.int8_t;
                        case "System.Byte": 
                            return RobotRaconteurWeb.DataTypes.uint8_t;
                        case "System.Int16": 
                            return RobotRaconteurWeb.DataTypes.int16_t;
                        case "System.UInt16": 
                            return RobotRaconteurWeb.DataTypes.uint16_t;
                        case "System.Int32": 
                            return RobotRaconteurWeb.DataTypes.int32_t;
                        case "System.UInt32": 
                            return RobotRaconteurWeb.DataTypes.uint32_t;
                        case "System.Int64": 
                            return RobotRaconteurWeb.DataTypes.int64_t;
                        case "System.UInt64": 
                            return RobotRaconteurWeb.DataTypes.uint64_t;
                        case "System.String": 
                            return RobotRaconteurWeb.DataTypes.string_t;
                        case "System.Boolean": 
                            return RobotRaconteurWeb.DataTypes.bool_t;
                        case "RobotRaconteurWeb.CDouble": 
                            return RobotRaconteurWeb.DataTypes.cdouble_t;
                        case "RobotRaconteurWeb.CSingle": 
                            return RobotRaconteurWeb.DataTypes.csingle_t;
                        case "RobotRaconteurWeb.MessageElementStructure": 
                            return RobotRaconteurWeb.DataTypes.structure_t;
                        case "RobotRaconteurWeb.MessageElementMap<int>": 
                            return RobotRaconteurWeb.DataTypes.vector_t;
                        case "RobotRaconteurWeb.MessageElementMap<string>": 
                            return RobotRaconteurWeb.DataTypes.dictionary_t;
                        case "RobotRaconteurWeb.MessageElementMultiDimArray": 
                            return RobotRaconteurWeb.DataTypes.multidimarray_t;
                        case "RobotRaconteurWeb.MessageElementList": 
                            return RobotRaconteurWeb.DataTypes.list_t;
                        case "RobotRaconteurWeb.MessageElementPod": 
                            return RobotRaconteurWeb.DataTypes.pod_t;
                        case "RobotRaconteurWeb.MessageElementPodArray": 
                            return RobotRaconteurWeb.DataTypes.pod_array_t;
                        case "RobotRaconteurWeb.MessageElementPodMultiDimArray": 
                            return RobotRaconteurWeb.DataTypes.pod_multidimarray_t;
                        case "RobotRaconteurWeb.MessageElementNamedArray": 
                            return RobotRaconteurWeb.DataTypes.namedarray_array_t;
                        case "RobotRaconteurWeb.MessageElementNamedMultiDimArray": 
                            return RobotRaconteurWeb.DataTypes.namedarray_multidimarray_t;
                        case "System.Object": 
                            return RobotRaconteurWeb.DataTypes.varvalue_t;
                    }



                    throw new RobotRaconteurWeb.DataTypeException("Unknown data type");
                },
                TypeIDFromString_known: function (stype) {
                    switch (stype) {
                        case "null": 
                        case "System.Double": 
                        case "System.Single": 
                        case "System.SByte": 
                        case "System.Byte": 
                        case "System.Int16": 
                        case "System.UInt16": 
                        case "System.Int32": 
                        case "System.UInt32": 
                        case "System.Int64": 
                        case "System.UInt64": 
                        case "System.String": 
                        case "System.Boolean": 
                        case "RobotRaconteurWeb.CDouble": 
                        case "RobotRaconteurWeb.CSingle": 
                        case "RobotRaconteurWeb.MessageElementStructure": 
                        case "RobotRaconteurWeb.MessageElementIndexedSet<int>": 
                        case "RobotRaconteurWeb.MessageElementIndexedSet<string>": 
                        case "RobotRaconteurWeb.MessageElementMultiDimArray": 
                        case "System.Object": 
                            return true;
                    }



                    return false;
                },
                IsNumber: function (t) {
                    switch (t) {
                        case RobotRaconteurWeb.DataTypes.double_t: 
                        case RobotRaconteurWeb.DataTypes.single_t: 
                        case RobotRaconteurWeb.DataTypes.int8_t: 
                        case RobotRaconteurWeb.DataTypes.uint8_t: 
                        case RobotRaconteurWeb.DataTypes.int16_t: 
                        case RobotRaconteurWeb.DataTypes.uint16_t: 
                        case RobotRaconteurWeb.DataTypes.int32_t: 
                        case RobotRaconteurWeb.DataTypes.uint32_t: 
                        case RobotRaconteurWeb.DataTypes.int64_t: 
                        case RobotRaconteurWeb.DataTypes.uint64_t: 
                        case RobotRaconteurWeb.DataTypes.cdouble_t: 
                        case RobotRaconteurWeb.DataTypes.csingle_t: 
                        case RobotRaconteurWeb.DataTypes.bool_t: 
                            return true;
                        default: 
                            return false;
                    }
                },
                ArrayFromDataType: function (t, length) {
                    switch (t) {
                        case RobotRaconteurWeb.DataTypes.double_t: 
                            return System.Array.init(length, 0, System.Double);
                        case RobotRaconteurWeb.DataTypes.single_t: 
                            return System.Array.init(length, 0, System.Single);
                        case RobotRaconteurWeb.DataTypes.int8_t: 
                            return System.Array.init(length, 0, System.SByte);
                        case RobotRaconteurWeb.DataTypes.uint8_t: 
                            return System.Array.init(length, 0, System.Byte);
                        case RobotRaconteurWeb.DataTypes.int16_t: 
                            return System.Array.init(length, 0, System.Int16);
                        case RobotRaconteurWeb.DataTypes.uint16_t: 
                            return System.Array.init(length, 0, System.UInt16);
                        case RobotRaconteurWeb.DataTypes.int32_t: 
                            return System.Array.init(length, 0, System.Int32);
                        case RobotRaconteurWeb.DataTypes.uint32_t: 
                            return System.Array.init(length, 0, System.UInt32);
                        case RobotRaconteurWeb.DataTypes.int64_t: 
                            return System.Array.init(length, System.Int64(0), System.Int64);
                        case RobotRaconteurWeb.DataTypes.uint64_t: 
                            return System.Array.init(length, System.UInt64(0), System.UInt64);
                        case RobotRaconteurWeb.DataTypes.string_t: 
                            return null;
                        case RobotRaconteurWeb.DataTypes.cdouble_t: 
                            return System.Array.init(length, function (){
                                return new RobotRaconteurWeb.CDouble();
                            }, RobotRaconteurWeb.CDouble);
                        case RobotRaconteurWeb.DataTypes.csingle_t: 
                            return System.Array.init(length, function (){
                                return new RobotRaconteurWeb.CSingle();
                            }, RobotRaconteurWeb.CSingle);
                        case RobotRaconteurWeb.DataTypes.bool_t: 
                            return System.Array.init(length, false, System.Boolean);
                        case RobotRaconteurWeb.DataTypes.structure_t: 
                            return null;
                    }

                    throw new RobotRaconteurWeb.DataTypeException("Could not create array for data type");
                },
                ArrayFromScalar: function (inv) {

                    if (Bridge.is(inv, Array)) {
                        return inv;
                    }

                    var stype = Bridge.getTypeName(Bridge.getType(inv));
                    switch (stype) {
                        case "System.Double": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.Double), System.Double))], System.Double);
                        case "System.Single": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.Single), System.Single))], System.Single);
                        case "System.SByte": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.SByte), System.SByte))], System.SByte);
                        case "System.Byte": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.Byte), System.Byte))], System.Byte);
                        case "System.Int16": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.Int16), System.Int16))], System.Int16);
                        case "System.UInt16": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.UInt16), System.UInt16))], System.UInt16);
                        case "System.Int32": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.Int32), System.Int32))], System.Int32);
                        case "System.UInt32": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.UInt32), System.UInt32))], System.UInt32);
                        case "System.Int64": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.Int64), System.Int64))], System.Int64);
                        case "System.UInt64": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.UInt64), System.UInt64))], System.UInt64);
                        case "RobotRaconteurWeb.CDouble": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, RobotRaconteurWeb.CDouble), RobotRaconteurWeb.CDouble))], RobotRaconteurWeb.CDouble);
                        case "RobotRaconteurWeb.CSingle": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, RobotRaconteurWeb.CSingle), RobotRaconteurWeb.CSingle))], RobotRaconteurWeb.CSingle);
                        case "System.Boolean": 
                            return System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(inv, System.Boolean), System.Boolean))], System.Boolean);
                    }

                    throw new RobotRaconteurWeb.DataTypeException("Could not create array for data");
                },
                TypeIDFromType: function (stype) {
                    switch (System.Type.getTypeCode(stype)) {
                        case System.TypeCode.Double: 
                            return RobotRaconteurWeb.DataTypes.double_t;
                        case System.TypeCode.Single: 
                            return RobotRaconteurWeb.DataTypes.single_t;
                        case System.TypeCode.SByte: 
                            return RobotRaconteurWeb.DataTypes.int8_t;
                        case System.TypeCode.Byte: 
                            return RobotRaconteurWeb.DataTypes.uint8_t;
                        case System.TypeCode.Int16: 
                            return RobotRaconteurWeb.DataTypes.int16_t;
                        case System.TypeCode.UInt16: 
                            return RobotRaconteurWeb.DataTypes.uint16_t;
                        case System.TypeCode.Int32: 
                            return RobotRaconteurWeb.DataTypes.int32_t;
                        case System.TypeCode.UInt32: 
                            return RobotRaconteurWeb.DataTypes.uint32_t;
                        case System.TypeCode.Int64: 
                            return RobotRaconteurWeb.DataTypes.int64_t;
                        case System.TypeCode.UInt64: 
                            return RobotRaconteurWeb.DataTypes.uint64_t;
                        case System.TypeCode.String: 
                            return RobotRaconteurWeb.DataTypes.string_t;
                        case System.TypeCode.Boolean: 
                            return RobotRaconteurWeb.DataTypes.bool_t;
                        case System.TypeCode.Object: 
                            {
                                if (Bridge.referenceEquals(stype, RobotRaconteurWeb.CDouble)) {
                                    return RobotRaconteurWeb.DataTypes.cdouble_t;
                                }
                                if (Bridge.referenceEquals(stype, RobotRaconteurWeb.CSingle)) {
                                    return RobotRaconteurWeb.DataTypes.csingle_t;
                                }
                                return RobotRaconteurWeb.DataTypes.varvalue_t;
                            }
                        default: 
                            throw new RobotRaconteurWeb.DataTypeException("Unknown data type");
                    }

                },
                VerifyArrayLength: function (T, a, len, varlength) {
                    if (a == null) {
                        throw new System.NullReferenceException.ctor();
                    }
                    if (len !== 0) {
                        if (varlength && a.length > len) {
                            throw new RobotRaconteurWeb.DataTypeException("Array dimension mismatch");
                        }
                        if (!varlength && a.length !== len) {
                            throw new RobotRaconteurWeb.DataTypeException("Array dimension mismatch");
                        }
                    }
                    return a;
                },
                VerifyArrayLength$1: function (a, n_elems, len) {
                    if (a.Dims.length !== len.length) {
                        throw new RobotRaconteurWeb.DataTypeException("Array dimension mismatch");
                    }

                    for (var i = 0; i < len.length; i = (i + 1) | 0) {
                        if (a.Dims[System.Array.index(i, a.Dims)] !== len[System.Array.index(i, len)]) {
                            throw new RobotRaconteurWeb.DataTypeException("Array dimension mismatch");
                        }
                    }
                    return a;
                },
                VerifyArrayLength$3: function (a, n_elems, len) {
                    if (a.Dims.length !== len.length) {
                        throw new RobotRaconteurWeb.DataTypeException("Array dimension mismatch");
                    }

                    for (var i = 0; i < len.length; i = (i + 1) | 0) {
                        if (a.Dims[System.Array.index(i, a.Dims)] !== len[System.Array.index(i, len)]) {
                            throw new RobotRaconteurWeb.DataTypeException("Array dimension mismatch");
                        }
                    }
                    return a;
                },
                VerifyArrayLength$2: function (a, n_elems, len) {
                    if (a.Dims.length !== len.length) {
                        throw new RobotRaconteurWeb.DataTypeException("Array dimension mismatch");
                    }

                    for (var i = 0; i < len.length; i = (i + 1) | 0) {
                        if (a.Dims[System.Array.index(i, a.Dims)] !== len[System.Array.index(i, len)]) {
                            throw new RobotRaconteurWeb.DataTypeException("Array dimension mismatch");
                        }
                    }
                    return a;
                },
                VerifyArrayLength$8: function (T, a, len, varlength) {
                    var $t;
                    if (a == null) {
                        return a;
                    }
                    $t = Bridge.getEnumerator(a);
                    try {
                        while ($t.moveNext()) {
                            var aa = $t.Current;
                            RobotRaconteurWeb.DataTypeUtil.VerifyArrayLength(T, aa, len, varlength);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return a;
                },
                VerifyArrayLength$4: function (K, T, a, len, varlength) {
                    var $t;
                    if (a == null) {
                        return a;
                    }
                    $t = Bridge.getEnumerator(a.Values);
                    try {
                        while ($t.moveNext()) {
                            var aa = $t.Current;
                            RobotRaconteurWeb.DataTypeUtil.VerifyArrayLength(T, aa, len, varlength);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return a;
                },
                VerifyArrayLength$9: function (a, n_elems, len) {
                    var $t;
                    if (a == null) {
                        return a;
                    }
                    $t = Bridge.getEnumerator(a);
                    try {
                        while ($t.moveNext()) {
                            var aa = $t.Current;
                            RobotRaconteurWeb.DataTypeUtil.VerifyArrayLength$1(aa, n_elems, len);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return a;
                },
                VerifyArrayLength$5: function (K, a, n_elems, len) {
                    var $t;
                    if (a == null) {
                        return a;
                    }
                    $t = Bridge.getEnumerator(a.Values);
                    try {
                        while ($t.moveNext()) {
                            var aa = $t.Current;
                            RobotRaconteurWeb.DataTypeUtil.VerifyArrayLength$1(aa, n_elems, len);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return a;
                },
                VerifyArrayLength$11: function (a, n_elems, len) {
                    var $t;
                    if (a == null) {
                        return a;
                    }
                    $t = Bridge.getEnumerator(a);
                    try {
                        while ($t.moveNext()) {
                            var aa = $t.Current;
                            RobotRaconteurWeb.DataTypeUtil.VerifyArrayLength$3(aa, n_elems, len);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return a;
                },
                VerifyArrayLength$7: function (K, a, n_elems, len) {
                    var $t;
                    if (a == null) {
                        return a;
                    }
                    $t = Bridge.getEnumerator(a.Values);
                    try {
                        while ($t.moveNext()) {
                            var aa = $t.Current;
                            RobotRaconteurWeb.DataTypeUtil.VerifyArrayLength$3(aa, n_elems, len);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return a;
                },
                VerifyArrayLength$10: function (a, n_elems, len) {
                    var $t;
                    if (a == null) {
                        return a;
                    }
                    $t = Bridge.getEnumerator(a);
                    try {
                        while ($t.moveNext()) {
                            var aa = $t.Current;
                            RobotRaconteurWeb.DataTypeUtil.VerifyArrayLength$2(aa, n_elems, len);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return a;
                },
                VerifyArrayLength$6: function (K, a, n_elems, len) {
                    var $t;
                    if (a == null) {
                        return a;
                    }
                    $t = Bridge.getEnumerator(a.Values);
                    try {
                        while ($t.moveNext()) {
                            var aa = $t.Current;
                            RobotRaconteurWeb.DataTypeUtil.VerifyArrayLength$2(aa, n_elems, len);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return a;
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.detail.ServiceDefinitionUtil", {
        statics: {
            fields: {
                RR_NAME_REGEX: null,
                RR_TYPE_REGEX: null,
                RR_QUALIFIED_TYPE_REGEX: null,
                RR_TYPE2_REGEX: null,
                RR_INT_REGEX: null,
                RR_FLOAT_REGEX: null
            },
            ctors: {
                init: function () {
                    this.RR_NAME_REGEX = "[a-zA-Z](?:\\w*[a-zA-Z0-9])?";
                    this.RR_TYPE_REGEX = "(?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)*";
                    this.RR_QUALIFIED_TYPE_REGEX = "(?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)+";
                    this.RR_TYPE2_REGEX = "(?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)*(?:\\[[0-9\\,\\*\\-]*\\])?(?:\\{\\w{1,16}\\})?";
                    this.RR_INT_REGEX = "[+\\-]?\\d+";
                    this.RR_FLOAT_REGEX = "[+\\-]?(?:(?:0|[1-9]\\d*)(?:\\.\\d*)?|:\\.\\d+)(?:[eE][+\\-]?\\d+)?";
                }
            },
            methods: {
                ServiceDefinition_FromStringFormat_common: function (r, l, keyword, vec) {
                    var r_match = r.match(l);
                    if (!r_match.getSuccess()) {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Format error for " + (keyword || "") + " definition \"" + (l || "") + "\"");
                    }

                    if (!Bridge.referenceEquals(r_match.getGroups().get(1).getValue(), keyword)) {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Format error for " + (keyword || "") + " definition \"" + (l || "") + "\"");
                    }
                    vec.v.add(r_match.getGroups().get(2).getValue());
                },
                ServiceDefinition_FromStringImportFormat: function (l, keyword, vec) {
                    var r = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*(\\w{1,16})[ \\t]+((?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)*)[ \\t]*$");
                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FromStringFormat_common(r, l, keyword, vec);
                },
                ServiceDefinition_FromStringTypeFormat: function (l, keyword, vec) {
                    var r = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*(\\w{1,16})[ \\t]+((?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)*)[ \\t]*$");
                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FromStringFormat_common(r, l, keyword, vec);
                },
                ServiceDefinition_GetLine: function (is_, l, pos) {
                    var r_comment = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*#[ -~\\t]*$");
                    var r_empty = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*$");
                    var r_valid = new System.Text.RegularExpressions.Regex.ctor("^[ -~\\t]*$");

                    var l2;

                    while (true) {
                        l2 = is_.ReadLine();
                        if (l2 == null) {
                            return false;
                        }
                        pos.v = (pos.v + 1) >>> 0;

                        l2 = System.String.trimEnd(l2, System.Array.init([13], System.Char));

                        if (System.Linq.Enumerable.from(l2, System.Char).contains(0)) {
                            throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Service definition must not contain null characters");
                        }

                        if (r_comment.isMatch(l2)) {
                            continue;
                        }

                        if (r_empty.isMatch(l2)) {
                            continue;
                        }

                        while (System.String.endsWith(l2, "\\")) {
                            if (l2.length <= 0) {
                                throw new RobotRaconteurWeb.InternalErrorException("Internal parsing error");
                            }
                            l2 = (l2.substr(0, ((l2.length - 1) | 0)) || "") + String.fromCharCode(32);
                            var l3 = is_.ReadLine();
                            if (l3 == null) {
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Service definition line continuation must not be on last line");
                            }
                            l3 = System.String.trimEnd(l3, System.Array.init([13], System.Char));

                            if (System.Linq.Enumerable.from(l3, System.Char).contains(0)) {
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Service definition must not contain null characters");
                            }
                            l2 = (l2 || "") + (l3 || "");
                        }

                        if (!r_valid.isMatch(l2)) {
                            throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Service definition must contain only ASCII characters");
                        }

                        l.v = l2;
                        return true;
                    }
                },
                ServiceDefinition_FindBlock: function (current_line, is_, os, pos, init_pos) {
                    var r_start = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*(\\w{1,16})[ \\t]+([a-zA-Z](?:\\w*[a-zA-Z0-9])?)[ \\t]*$");
                    var r_end = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*end(?:[ \\t]+(\\w{1,16}))?[ \\t]*$");

                    init_pos.v = pos.v;

                    var r_start_match = r_start.match(current_line);
                    if (!r_start_match.getSuccess()) {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error near: " + (current_line || ""), (pos.v | 0));
                    }

                    os.WriteLine$11(current_line);

                    var block_type = r_start_match.getGroups().get(1).getValue();
                    var l = { v : null };

                    var last_pos = pos.v;

                    while (RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_GetLine(is_, l, pos)) {
                        last_pos = (last_pos + 1) >>> 0;
                        for (; last_pos < pos.v; last_pos = (last_pos + 1) >>> 0) {
                            os.WriteLine$11("");
                        }

                        os.WriteLine$11(l.v);

                        var r_end_match = r_end.match(l.v);
                        if (r_end_match.getSuccess()) {
                            if (r_end_match.getGroups().get(1).getSuccess()) {
                                if (!Bridge.referenceEquals(r_end_match.getGroups().get(1).getValue(), block_type)) {
                                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Block end does not match start: " + (l.v || ""), (pos.v | 0));
                                }
                            }

                            return;
                        }
                    }
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Block end not found: " + (current_line || ""), (init_pos.v | 0));
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.DynamicServiceFactory", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.NamedTypeDefinition", {
        fields: {
            Name: null
        }
    });

    Bridge.define("RobotRaconteurWeb.EnumDefinitionValue", {
        fields: {
            Name: null,
            Value: 0,
            ImplicitValue: false,
            HexValue: false
        }
    });

    Bridge.definei("RobotRaconteurWeb.Generator2$1", function (ReturnType) { return {
        $kind: "interface"
    }; });

    Bridge.define("RobotRaconteurWeb.Extensions.Buffer", {
        statics: {
            methods: {
                BlockCopy$2: function (recbuf, v1, newbuf, v2, v3) {
                    System.Array.copy(recbuf, v1, newbuf, v2, v3);
                },
                BlockCopy: function (a, v, membuf, position, bl) {
                    var b = new System.IO.BinaryWriter.$ctor1(new System.IO.MemoryStream.$ctor3(membuf, position, bl));
                    var t = System.Type.getTypeCode((Bridge.getType(a).$elementType || null));
                    switch (t) {
                        case System.TypeCode.Double: 
                            {
                                var a1 = Bridge.cast(a, System.Array.type(System.Double));
                                for (var i = 0; i < ((Bridge.Int.div(bl, 8)) | 0); i = (i + 1) | 0) {
                                    b.Write$8(a1[System.Array.index(((i + v) | 0), a1)]);
                                }
                                break;
                            }
                        case System.TypeCode.Single: 
                            {
                                var a11 = Bridge.cast(a, System.Array.type(System.Single));
                                for (var i1 = 0; i1 < ((Bridge.Int.div(bl, 4)) | 0); i1 = (i1 + 1) | 0) {
                                    b.Write$13(a11[System.Array.index(((i1 + v) | 0), a11)]);
                                }
                                break;
                            }
                        case System.TypeCode.Byte: 
                            {
                                var a12 = Bridge.cast(a, System.Array.type(System.Byte));
                                for (var i2 = 0; i2 < bl; i2 = (i2 + 1) | 0) {
                                    b.Write$1(a12[System.Array.index(((i2 + v) | 0), a12)]);
                                }
                                break;
                            }
                        case System.TypeCode.SByte: 
                            {
                                var a13 = Bridge.cast(a, System.Array.type(System.SByte));
                                for (var i3 = 0; i3 < bl; i3 = (i3 + 1) | 0) {
                                    b.Write$12(a13[System.Array.index(((i3 + v) | 0), a13)]);
                                }
                                break;
                            }
                        case System.TypeCode.UInt16: 
                            {
                                var a14 = Bridge.cast(a, System.Array.type(System.UInt16));
                                for (var i4 = 0; i4 < ((Bridge.Int.div(bl, 2)) | 0); i4 = (i4 + 1) | 0) {
                                    b.Write$15(a14[System.Array.index(((i4 + v) | 0), a14)]);
                                }
                                break;
                            }
                        case System.TypeCode.Int16: 
                            {
                                var a15 = Bridge.cast(a, System.Array.type(System.Int16));
                                for (var i5 = 0; i5 < ((Bridge.Int.div(bl, 2)) | 0); i5 = (i5 + 1) | 0) {
                                    b.Write$9(a15[System.Array.index(((i5 + v) | 0), a15)]);
                                }
                                break;
                            }
                        case System.TypeCode.UInt32: 
                            {
                                var a16 = Bridge.cast(a, System.Array.type(System.UInt32));
                                for (var i6 = 0; i6 < ((Bridge.Int.div(bl, 4)) | 0); i6 = (i6 + 1) | 0) {
                                    b.Write$16(a16[System.Array.index(((i6 + v) | 0), a16)]);
                                }
                                break;
                            }
                        case System.TypeCode.Int32: 
                            {
                                var a17 = Bridge.cast(a, System.Array.type(System.Int32));
                                for (var i7 = 0; i7 < ((Bridge.Int.div(bl, 4)) | 0); i7 = (i7 + 1) | 0) {
                                    b.Write$10(a17[System.Array.index(((i7 + v) | 0), a17)]);
                                }
                                break;
                            }
                        case System.TypeCode.UInt64: 
                            {
                                var a18 = Bridge.cast(a, System.Array.type(System.UInt64));
                                for (var i8 = 0; i8 < ((Bridge.Int.div(bl, 8)) | 0); i8 = (i8 + 1) | 0) {
                                    b.Write$17(a18[System.Array.index(((i8 + v) | 0), a18)]);
                                }
                                break;
                            }
                        case System.TypeCode.Int64: 
                            {
                                var a19 = Bridge.cast(a, System.Array.type(System.Int64));
                                for (var i9 = 0; i9 < ((Bridge.Int.div(bl, 8)) | 0); i9 = (i9 + 1) | 0) {
                                    b.Write$11(a19[System.Array.index(((i9 + v) | 0), a19)]);
                                }
                                break;
                            }
                        case System.TypeCode.Boolean: 
                            {
                                var a110 = Bridge.cast(a, System.Array.type(System.Boolean));
                                for (var i10 = 0; i10 < bl; i10 = (i10 + 1) | 0) {
                                    b.Write(a110[System.Array.index(((i10 + v) | 0), a110)]);
                                }
                                break;
                            }
                        default: 
                            throw new System.ArgumentException.$ctor1("Invalid array type");
                    }
                },
                BlockCopy$1: function (membuf, position, a, v, bl) {
                    var b = new System.IO.BinaryReader.ctor(new System.IO.MemoryStream.$ctor3(membuf, position, bl));
                    var t = System.Type.getTypeCode((Bridge.getType(a).$elementType || null));
                    switch (t) {
                        case System.TypeCode.Double: 
                            {
                                var a1 = Bridge.cast(a, System.Array.type(System.Double));
                                for (var i = 0; i < ((Bridge.Int.div(bl, 8)) | 0); i = (i + 1) | 0) {
                                    a1[System.Array.index(((i + v) | 0), a1)] = b.ReadDouble();
                                }
                                break;
                            }
                        case System.TypeCode.Single: 
                            {
                                var a11 = Bridge.cast(a, System.Array.type(System.Single));
                                for (var i1 = 0; i1 < ((Bridge.Int.div(bl, 4)) | 0); i1 = (i1 + 1) | 0) {
                                    a11[System.Array.index(((i1 + v) | 0), a11)] = b.ReadSingle();
                                }
                                break;
                            }
                        case System.TypeCode.Byte: 
                            {
                                var a12 = Bridge.cast(a, System.Array.type(System.Byte));
                                for (var i2 = 0; i2 < bl; i2 = (i2 + 1) | 0) {
                                    a12[System.Array.index(((i2 + v) | 0), a12)] = b.ReadByte();
                                }
                                break;
                            }
                        case System.TypeCode.SByte: 
                            {
                                var a13 = Bridge.cast(a, System.Array.type(System.SByte));
                                for (var i3 = 0; i3 < bl; i3 = (i3 + 1) | 0) {
                                    a13[System.Array.index(((i3 + v) | 0), a13)] = b.ReadSByte();
                                }
                                break;
                            }
                        case System.TypeCode.UInt16: 
                            {
                                var a14 = Bridge.cast(a, System.Array.type(System.UInt16));
                                for (var i4 = 0; i4 < ((Bridge.Int.div(bl, 2)) | 0); i4 = (i4 + 1) | 0) {
                                    a14[System.Array.index(((i4 + v) | 0), a14)] = b.ReadUInt16();
                                }
                                break;
                            }
                        case System.TypeCode.Int16: 
                            {
                                var a15 = Bridge.cast(a, System.Array.type(System.Int16));
                                for (var i5 = 0; i5 < ((Bridge.Int.div(bl, 2)) | 0); i5 = (i5 + 1) | 0) {
                                    a15[System.Array.index(((i5 + v) | 0), a15)] = b.ReadInt16();
                                }
                                break;
                            }
                        case System.TypeCode.UInt32: 
                            {
                                var a16 = Bridge.cast(a, System.Array.type(System.UInt32));
                                for (var i6 = 0; i6 < ((Bridge.Int.div(bl, 4)) | 0); i6 = (i6 + 1) | 0) {
                                    a16[System.Array.index(((i6 + v) | 0), a16)] = b.ReadUInt32();
                                }
                                break;
                            }
                        case System.TypeCode.Int32: 
                            {
                                var a17 = Bridge.cast(a, System.Array.type(System.Int32));
                                for (var i7 = 0; i7 < ((Bridge.Int.div(bl, 4)) | 0); i7 = (i7 + 1) | 0) {
                                    a17[System.Array.index(((i7 + v) | 0), a17)] = b.ReadInt32();
                                }
                                break;
                            }
                        case System.TypeCode.UInt64: 
                            {
                                var a18 = Bridge.cast(a, System.Array.type(System.UInt64));
                                for (var i8 = 0; i8 < ((Bridge.Int.div(bl, 8)) | 0); i8 = (i8 + 1) | 0) {
                                    a18[System.Array.index(((i8 + v) | 0), a18)] = b.ReadUInt64();
                                }
                                break;
                            }
                        case System.TypeCode.Int64: 
                            {
                                var a19 = Bridge.cast(a, System.Array.type(System.Int64));
                                for (var i9 = 0; i9 < ((Bridge.Int.div(bl, 8)) | 0); i9 = (i9 + 1) | 0) {
                                    a19[System.Array.index(((i9 + v) | 0), a19)] = b.ReadInt64();
                                }
                                break;
                            }
                        case System.TypeCode.Boolean: 
                            {
                                var a110 = Bridge.cast(a, System.Array.type(System.Boolean));
                                for (var i10 = 0; i10 < bl; i10 = (i10 + 1) | 0) {
                                    a110[System.Array.index(((i10 + v) | 0), a110)] = b.ReadBoolean();
                                }
                                break;
                            }
                        default: 
                            throw new System.ArgumentException.$ctor1("Invalid array type");
                    }
                },
                ByteLength: function (a) {
                    var t = System.Type.getTypeCode((Bridge.getType(a).$elementType || null));
                    switch (t) {
                        case System.TypeCode.Double: 
                            return Bridge.Int.mul(8, a.length);
                        case System.TypeCode.Single: 
                            return Bridge.Int.mul(4, a.length);
                        case System.TypeCode.Byte: 
                        case System.TypeCode.SByte: 
                            return a.length;
                        case System.TypeCode.UInt16: 
                        case System.TypeCode.Int16: 
                            return Bridge.Int.mul(2, a.length);
                        case System.TypeCode.UInt32: 
                        case System.TypeCode.Int32: 
                            return Bridge.Int.mul(4, a.length);
                        case System.TypeCode.UInt64: 
                        case System.TypeCode.Int64: 
                            return Bridge.Int.mul(8, a.length);
                        case System.TypeCode.Boolean: 
                            return a.length;
                        default: 
                            throw new System.ArgumentException.$ctor1("Invalid array type");
                    }
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Extensions.Extensions", {
        statics: {
            methods: {
                AwaitWithTimeout: function (task, timeout) {
                    var $step = 0,
                        $task1, 
                        $task2, 
                        $taskResult2, 
                        $task3, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        c, 
                        timeout_task, 
                        r1, 
                        noop, 
                        noop1, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1,2,3,4,5,6,7,8], $step);
                                    switch ($step) {
                                        case 0: {
                                            if (timeout < 0) {
                                                $step = 1;
                                                continue;
                                            } 
                                            $step = 3;
                                            continue;
                                        }
                                        case 1: {
                                            $task1 = task;
                                            $step = 2;
                                            if ($task1.isCompleted()) {
                                                continue;
                                            }
                                            $task1.continue($asyncBody);
                                            return;
                                        }
                                        case 2: {
                                            $task1.getAwaitedResult();
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        case 3: {
                                            c = new System.Threading.CancellationTokenSource();
                                            timeout_task = System.Threading.Tasks.Task.delay(timeout, c.token);

                                            $task2 = System.Threading.Tasks.Task.whenAny(task, timeout_task);
                                            $step = 4;
                                            if ($task2.isCompleted()) {
                                                continue;
                                            }
                                            $task2.continue($asyncBody);
                                            return;
                                        }
                                        case 4: {
                                            $taskResult2 = $task2.getAwaitedResult();
                                            r1 = $taskResult2;
                                            if (task.isCompleted() || task.isFaulted() || task.isCanceled()) {
                                                $step = 5;
                                                continue;
                                            } else  {
                                                $step = 7;
                                                continue;
                                            }
                                        }
                                        case 5: {
                                            noop = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(timeout_task);
                                            c.cancel();

                                            $task3 = task;
                                            $step = 6;
                                            if ($task3.isCompleted()) {
                                                continue;
                                            }
                                            $task3.continue($asyncBody);
                                            return;
                                        }
                                        case 6: {
                                            $task3.getAwaitedResult();
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        case 7: {
                                            noop1 = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(task);
                                            throw new System.TimeoutException.$ctor1("Operation timed out");
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AwaitWithTimeout$1: function (T, task, timeout) {
                    var $step = 0,
                        $task1, 
                        $taskResult1, 
                        $task2, 
                        $taskResult2, 
                        $task3, 
                        $taskResult3, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        c, 
                        timeout_task, 
                        r1, 
                        noop, 
                        noop1, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1,2,3,4,5,6,7,8], $step);
                                    switch ($step) {
                                        case 0: {
                                            if (timeout < 0) {
                                                $step = 1;
                                                continue;
                                            } 
                                            $step = 3;
                                            continue;
                                        }
                                        case 1: {
                                            $task1 = task;
                                            $step = 2;
                                            if ($task1.isCompleted()) {
                                                continue;
                                            }
                                            $task1.continue($asyncBody);
                                            return;
                                        }
                                        case 2: {
                                            $taskResult1 = $task1.getAwaitedResult();
                                            $tcs.setResult($taskResult1);
                                            return;
                                        }
                                        case 3: {
                                            c = new System.Threading.CancellationTokenSource();
                                            timeout_task = System.Threading.Tasks.Task.delay(timeout, c.token);

                                            $task2 = System.Threading.Tasks.Task.whenAny(task, timeout_task);
                                            $step = 4;
                                            if ($task2.isCompleted()) {
                                                continue;
                                            }
                                            $task2.continue($asyncBody);
                                            return;
                                        }
                                        case 4: {
                                            $taskResult2 = $task2.getAwaitedResult();
                                            r1 = $taskResult2;
                                            if (task.isCompleted() || task.isFaulted() || task.isCanceled()) {
                                                $step = 5;
                                                continue;
                                            } else  {
                                                $step = 7;
                                                continue;
                                            }
                                        }
                                        case 5: {
                                            noop = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(timeout_task);
                                            c.cancel();

                                            $task3 = task;
                                            $step = 6;
                                            if ($task3.isCompleted()) {
                                                continue;
                                            }
                                            $task3.continue($asyncBody);
                                            return;
                                        }
                                        case 6: {
                                            $taskResult3 = $task3.getAwaitedResult();
                                            $tcs.setResult($taskResult3);
                                            return;
                                        }
                                        case 7: {
                                            noop1 = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult$1(T, task);
                                            throw new System.TimeoutException.$ctor1("Operation timed out");
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AttachCancellationToken: function (T, source, cancel, e) {
                    if (e === void 0) { e = null; }
                    cancel.register(function () {
                        if (e == null) {
                            source.trySetCanceled();
                        } else {
                            source.trySetException(e);
                        }
                    });
                },
                IgnoreResult: function (t) {
                    return t.continueWith(function (t2) {
                        try {
                            var e = t2.getException();
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                    });
                },
                IgnoreResult$1: function (T, t) {
                    return t.continueWith(function (t2) {
                        try {
                            var e = t2.getResult();
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                    });
                },
                AsApm$1: function (T, task, callback, state) {
                    if (task == null) {
                        throw new System.ArgumentNullException.$ctor1("task");
                    }

                    var tcs = new System.Threading.Tasks.TaskCompletionSource(state);
                    task.continueWith(function (t) {
                        if (t.isFaulted()) {
                            tcs.trySetException(t.getException().innerExceptions);
                        } else {
                            if (t.isCanceled()) {
                                tcs.trySetCanceled();
                            } else {
                                tcs.trySetResult(t.getResult());
                            }
                        }

                        if (!Bridge.staticEquals(callback, null)) {
                            callback(tcs.task);
                        }
                    });
                    return tcs.task;
                },
                AsApm: function (task, callback, state) {
                    if (task == null) {
                        throw new System.ArgumentNullException.$ctor1("task");
                    }

                    var tcs = new System.Threading.Tasks.TaskCompletionSource(state);
                    task.continueWith(function (t) {
                        if (t.isFaulted()) {
                            tcs.trySetException(t.getException().innerExceptions);
                        } else {
                            if (t.isCanceled()) {
                                tcs.trySetCanceled();
                            } else {
                                tcs.trySetResult(0);
                            }
                        }

                        if (!Bridge.staticEquals(callback, null)) {
                            callback(tcs.task);
                        }
                    });
                    return tcs.task;
                },
                ReplaceFirst: function (text, search, replace) {
                    var pos = System.String.indexOf(text, search);
                    if (pos < 0) {
                        return text;
                    }
                    return (text.substr(0, pos) || "") + (replace || "") + (text.substr(((pos + search.length) | 0)) || "");
                },
                ReadAsync: function (stream, buffer, offset, count, cancel) {
                    if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                    if (stream == null) {
                        throw new System.ArgumentNullException.$ctor1("stream");
                    }

                    var tcs = new System.Threading.Tasks.TaskCompletionSource();
                    stream.BeginRead(buffer, offset, count, function (iar) {
                        try {
                            tcs.trySetResult(stream.EndRead(iar));
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                            var exc;
                            if (Bridge.is($e1, System.OperationCanceledException)) {
                                tcs.trySetCanceled();
                            } else {
                                exc = $e1;
                                tcs.trySetException(exc);
                            }
                        }
                    }, null);
                    return tcs.task;
                },
                WriteAsync: function (stream, buffer, offset, count, cancel) {
                    if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                    if (stream == null) {
                        throw new System.ArgumentNullException.$ctor1("stream");
                    }

                    var tcs = new System.Threading.Tasks.TaskCompletionSource();
                    stream.BeginWrite(buffer, offset, count, function (iar) {
                        try {
                            tcs.trySetResult(stream.EndRead(iar));
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                            var exc;
                            if (Bridge.is($e1, System.OperationCanceledException)) {
                                tcs.trySetCanceled();
                            } else {
                                exc = $e1;
                                tcs.trySetException(exc);
                            }
                        }
                    }, null);
                    return tcs.task;
                },
                ConfigureAwait: function (T, t, v) {
                    return t;
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Extensions.RRUriExtensions", {
        statics: {
            methods: {
                EscapeDataString: function (s) {
                    return encodeURI(s);
                },
                UnescapeDataString: function (s) {
                    return decodeURI(s);
                }
            }
        }
    });

    Bridge.definei("RobotRaconteurWeb.Generator1$2", function (ReturnType, ParamType) { return {
        $kind: "interface"
    }; });

    Bridge.define("RobotRaconteurWeb.GeneratorClientBase", {
        fields: {
            stub: null,
            membername: null,
            id: 0
        },
        props: {
            MemberName: {
                get: function () {
                    return this.membername;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, id) {
                this.$initialize();
                this.stub = stub;
                this.membername = membername;
                this.id = id;
            }
        },
        methods: {
            Abort: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    err, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.GeneratorNextReq, this.MemberName);
                                        err = new RobotRaconteurWeb.AbortOperationException("Generator abort requested");
                                        RobotRaconteurWeb.RobotRaconteurExceptionUtil.ExceptionToMessageEntry(err, m);
                                        m.AddElement$1("index", Bridge.box(this.id, System.Int32));
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Close: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    err, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.GeneratorNextReq, this.MemberName);
                                        err = new RobotRaconteurWeb.StopIterationException("Generator abort requested");
                                        RobotRaconteurWeb.RobotRaconteurExceptionUtil.ExceptionToMessageEntry(err, m);
                                        m.AddElement$1("index", Bridge.box(this.id, System.Int32));
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            NextBase: function (v, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    mret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.GeneratorNextReq, this.MemberName);
                                        m.AddElement$1("index", Bridge.box(this.id, System.Int32));
                                        if (v != null) {
                                            v.ElementName = "parameter";
                                            m.elements.add(v);
                                        }
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        mret = { };
                                        ret.TryFindElement("return", mret);
                                        $tcs.setResult(mret.v);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.GeneratorServerBase", {
        fields: {
            name: null,
            index: 0,
            skel: null,
            ep: null,
            last_access_time: null
        },
        props: {
            Endpoint: {
                get: function () {
                    return this.ep.LocalEndpoint;
                }
            }
        },
        ctors: {
            init: function () {
                this.last_access_time = System.DateTime.getDefaultValue();
            },
            ctor: function (name, index, skel, ep) {
                this.$initialize();
                this.name = name;
                this.index = index;
                this.skel = skel;
                this.ep = ep;
            }
        }
    });

    Bridge.definei("RobotRaconteurWeb.Generator3$1", function (ParamType) { return {
        $kind: "interface"
    }; });

    Bridge.define("RobotRaconteurWeb.INamedArrayStub", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.IPodStub", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.IRate", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.IRobotRaconteurMonitorObject", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.IRobotRaconteurServiceObject", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.ITimer", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.MemberDefinition.MemberDefiniton_ParseResults", {
        $kind: "nested class",
        fields: {
            MemberType: null,
            Name: null,
            DataType: null,
            Parameters: null,
            Modifiers: null
        },
        ctors: {
            init: function () {
                this.Parameters = new (System.Collections.Generic.List$1(System.String)).ctor();
                this.Modifiers = new (System.Collections.Generic.List$1(System.String)).ctor();
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MemberDefinition_Direction", {
        $kind: "enum",
        statics: {
            fields: {
                readonly_: 0,
                writeonly: 1,
                both: 2
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Message", {
        fields: {
            header: null,
            entries: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.entries = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageEntry)).ctor();
            }
        },
        methods: {
            ComputeSize: function () {
                var $t;
                var s = this.header.ComputeSize();
                $t = Bridge.getEnumerator(this.entries);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        s = (s + (e.ComputeSize())) >>> 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
                return s;
            },
            Write: function (w) {
                var $t;
                w.PushRelativeLimit(this.ComputeSize());
                this.header.UpdateHeader(this.ComputeSize(), ((this.entries.Count) & 65535));
                this.header.Write(w);
                $t = Bridge.getEnumerator(this.entries);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.Write(w);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
                if (w.DistanceFromLimit !== 0) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                w.PopLimit();

            },
            FindEntry: function (name) {
                var $t;

                if (this.entries == null) {
                    return null;
                }

                $t = Bridge.getEnumerator(this.entries);
                try {
                    while ($t.moveNext()) {
                        var m = $t.Current;
                        if (Bridge.referenceEquals(m.MemberName, name)) {
                            return m;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }

                throw new RobotRaconteurWeb.MessageEntryNotFoundException("Element " + (name || "") + " not found.");

            },
            AddEntry: function (t, name) {
                var m = new RobotRaconteurWeb.MessageEntry.ctor();
                m.MemberName = name;
                m.EntryType = t;

                if (this.entries == null) {
                    this.entries = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageEntry)).ctor();
                }
                this.entries.add(m);

                return m;
            },
            Read: function (r) {
                this.header = new RobotRaconteurWeb.MessageHeader();
                this.header.Read(r);

                r.PushRelativeLimit(((this.header.MessageSize - this.header.HeaderLength) >>> 0));

                var s = this.header.EntryCount;
                this.entries = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageEntry)).$ctor2(s);
                for (var i = 0; i < s; i = (i + 1) | 0) {
                    var e = new RobotRaconteurWeb.MessageEntry.ctor();
                    e.Read(r);
                    this.entries.add(e);
                }

                r.PopLimit();

            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElement", {
        statics: {
            methods: {
                FindElement$1: function (m, name) {
                    var $t;
                    $t = Bridge.getEnumerator(m);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.ElementName, name)) {
                                return e;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                    throw new RobotRaconteurWeb.MessageElementNotFoundException("Could not find element " + (name || ""));
                },
                FindElement: function (m, name) {
                    return RobotRaconteurWeb.MessageElement.FindElement$1(m.elements, name);
                },
                CastData: function (T, Data) {
                    if (Data == null) {
                        return Bridge.getDefaultValue(T);
                    }
                    if (Bridge.is(Data, T)) {
                        return Bridge.cast(Bridge.unbox(Data, T), T);
                    }
                    throw new RobotRaconteurWeb.DataTypeException("Could not cast data to type " + (Bridge.getTypeName(T) || ""));
                }
            }
        },
        fields: {
            ElementSize: 0,
            ElementName: null,
            ElementType: 0,
            ElementTypeName: null,
            MetaData: null,
            DataCount: 0,
            dat: null
        },
        props: {
            Data: {
                get: function () {
                    return this.dat;
                },
                set: function (value) {
                    this.dat = value;

                    this.UpdateData();
                }
            }
        },
        ctors: {
            init: function () {
                this.ElementName = "";
                this.ElementTypeName = "";
                this.MetaData = "";
            },
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (name, datin) {
                this.$initialize();
                this.ElementName = name;
                this.Data = datin;
            }
        },
        methods: {
            ComputeSize: function () {
                var $t, $t1, $t2, $t3, $t4, $t5, $t6, $t7, $t8, $t9;
                var s = (((((16 + ((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.ElementName)) >>> 0)) >>> 0) + ((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.ElementTypeName)) >>> 0)) >>> 0) + ((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.MetaData)) >>> 0)) >>> 0;

                if (this.ElementType === RobotRaconteurWeb.DataTypes.structure_t) {

                    var d = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementStructure);


                    $t = Bridge.getEnumerator(d.Elements);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            s = (s + (e.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }


                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.vector_t) {
                    var d1 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementMap$1(System.Int32));


                    $t1 = Bridge.getEnumerator(d1.Elements);
                    try {
                        while ($t1.moveNext()) {
                            var e1 = $t1.Current;
                            s = (s + (e1.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.dictionary_t) {
                    var d2 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementMap$1(System.String));


                    $t2 = Bridge.getEnumerator(d2.Elements);
                    try {
                        while ($t2.moveNext()) {
                            var e2 = $t2.Current;
                            s = (s + (e2.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.list_t) {
                    var d3 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementList);


                    $t3 = Bridge.getEnumerator(d3.Elements);
                    try {
                        while ($t3.moveNext()) {
                            var e3 = $t3.Current;
                            s = (s + (e3.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.multidimarray_t) {
                    var d4 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementMultiDimArray);
                    $t4 = Bridge.getEnumerator(d4.Elements);
                    try {
                        while ($t4.moveNext()) {
                            var e4 = $t4.Current;
                            s = (s + (e4.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t4, System.IDisposable)) {
                            $t4.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.pod_t) {
                    var d5 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementPod);
                    $t5 = Bridge.getEnumerator(d5.Elements);
                    try {
                        while ($t5.moveNext()) {
                            var e5 = $t5.Current;
                            s = (s + (e5.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t5, System.IDisposable)) {
                            $t5.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.pod_array_t) {
                    var d6 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementPodArray);
                    $t6 = Bridge.getEnumerator(d6.Elements);
                    try {
                        while ($t6.moveNext()) {
                            var e6 = $t6.Current;
                            s = (s + (e6.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t6, System.IDisposable)) {
                            $t6.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.pod_multidimarray_t) {
                    var d7 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementPodMultiDimArray);
                    $t7 = Bridge.getEnumerator(d7.Elements);
                    try {
                        while ($t7.moveNext()) {
                            var e7 = $t7.Current;
                            s = (s + (e7.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t7, System.IDisposable)) {
                            $t7.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.namedarray_array_t) {
                    var d8 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementNamedArray);
                    $t8 = Bridge.getEnumerator(d8.Elements);
                    try {
                        while ($t8.moveNext()) {
                            var e8 = $t8.Current;
                            s = (s + (e8.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t8, System.IDisposable)) {
                            $t8.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.namedarray_multidimarray_t) {
                    var d9 = Bridge.cast(this.Data, RobotRaconteurWeb.MessageElementNamedMultiDimArray);
                    $t9 = Bridge.getEnumerator(d9.Elements);
                    try {
                        while ($t9.moveNext()) {
                            var e9 = $t9.Current;
                            s = (s + (e9.ComputeSize())) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t9, System.IDisposable)) {
                            $t9.System$IDisposable$Dispose();
                        }
                    }
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.void_t) {
                    s = (s + 0) >>> 0;
                } else {

                    s = (s + (Bridge.Int.umul(this.DataCount, RobotRaconteurWeb.DataTypeUtil.size(this.ElementType)))) >>> 0;
                }

                return s;
            },
            UpdateData: function () {
                var datatype;

                if (this.dat == null) {
                    datatype = "null";
                } else if (Bridge.is(this.dat, Array)) {
                    datatype = Bridge.getTypeName((Bridge.getType(this.dat).$elementType || null));
                    this.DataCount = (Bridge.cast(this.dat, Array).length) >>> 0;
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementStructure)) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementStructure).Elements.Count) >>> 0;
                    this.ElementTypeName = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementStructure).Type;
                    datatype = "RobotRaconteurWeb.MessageElementStructure";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementMap$1(System.Int32))) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementMap$1(System.Int32)).Elements.Count) >>> 0;
                    datatype = "RobotRaconteurWeb.MessageElementMap<int>";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementMap$1(System.String))) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementMap$1(System.String)).Elements.Count) >>> 0;
                    datatype = "RobotRaconteurWeb.MessageElementMap<string>";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementList)) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementList).Elements.Count) >>> 0;
                    datatype = "RobotRaconteurWeb.MessageElementList";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementMultiDimArray)) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementMultiDimArray).Elements.Count) >>> 0;
                    datatype = "RobotRaconteurWeb.MessageElementMultiDimArray";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementPod)) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementPod).Elements.Count) >>> 0;
                    datatype = "RobotRaconteurWeb.MessageElementPod";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementPodArray)) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementPodArray).Elements.Count) >>> 0;
                    this.ElementTypeName = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementPodArray).Type;
                    datatype = "RobotRaconteurWeb.MessageElementPodArray";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementPodMultiDimArray)) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementPodMultiDimArray).Elements.Count) >>> 0;
                    this.ElementTypeName = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementPodMultiDimArray).Type;
                    datatype = "RobotRaconteurWeb.MessageElementPodMultiDimArray";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementNamedArray)) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementNamedArray).Elements.Count) >>> 0;
                    this.ElementTypeName = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementNamedArray).Type;
                    datatype = "RobotRaconteurWeb.MessageElementNamedArray";
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementNamedMultiDimArray)) {
                    this.DataCount = (Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementNamedMultiDimArray).Elements.Count) >>> 0;
                    this.ElementTypeName = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementNamedMultiDimArray).Type;
                    datatype = "RobotRaconteurWeb.MessageElementNamedMultiDimArray";
                } else if (Bridge.is(this.dat, System.String)) {
                    datatype = "System.String";
                    this.DataCount = (System.Text.Encoding.UTF8.GetByteCount$2(Bridge.cast(this.dat, System.String))) >>> 0;

                } else {

                    this.DataCount = 1;
                    datatype = Bridge.getTypeName(Bridge.getType(this.dat));
                }

                this.ElementType = RobotRaconteurWeb.DataTypeUtil.TypeIDFromString(datatype);

                if (this.ElementType !== RobotRaconteurWeb.DataTypes.void_t && this.ElementType < RobotRaconteurWeb.DataTypes.string_t && !(Bridge.is(this.dat, Array))) {
                    this.dat = RobotRaconteurWeb.DataTypeUtil.ArrayFromScalar(this.dat);
                }

                this.ElementSize = this.ComputeSize();

            },
            Write: function (w) {
                var $t, $t1, $t2, $t3, $t4, $t5, $t6, $t7, $t8, $t9;
                this.UpdateData();
                w.PushRelativeLimit(this.ElementSize);
                w.Write$16(this.ElementSize);
                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.ElementName)) & 65535));
                w.WriteString8(this.ElementName);
                w.Write$15((this.ElementType & 65535));
                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.ElementTypeName)) & 65535));
                w.WriteString8(this.ElementTypeName);
                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.MetaData)) & 65535));
                w.WriteString8(this.MetaData);
                w.Write$16(this.DataCount);
                if (this.dat == null) {

                } else if (Bridge.isArray(null, Bridge.getType(this.dat))) {
                    w.WriteArray(Bridge.cast(this.dat, Array));
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementStructure)) {
                    var l = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementStructure).Elements;
                    $t = Bridge.getEnumerator(l);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            e.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementMap$1(System.Int32))) {
                    var l1 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementMap$1(System.Int32)).Elements;
                    $t1 = Bridge.getEnumerator(l1);
                    try {
                        while ($t1.moveNext()) {
                            var e1 = $t1.Current;
                            e1.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }

                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementMap$1(System.String))) {
                    var l2 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementMap$1(System.String)).Elements;
                    $t2 = Bridge.getEnumerator(l2);
                    try {
                        while ($t2.moveNext()) {
                            var e2 = $t2.Current;
                            e2.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$Dispose();
                        }
                    }

                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementList)) {
                    var l3 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementList).Elements;
                    $t3 = Bridge.getEnumerator(l3);
                    try {
                        while ($t3.moveNext()) {
                            var e3 = $t3.Current;
                            e3.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$Dispose();
                        }
                    }

                } else if (Bridge.is(this.dat, System.String)) {
                    w.WriteString8(Bridge.cast(this.dat, System.String));
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementMultiDimArray)) {
                    var l4 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementMultiDimArray).Elements;
                    $t4 = Bridge.getEnumerator(l4);
                    try {
                        while ($t4.moveNext()) {
                            var e4 = $t4.Current;
                            e4.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t4, System.IDisposable)) {
                            $t4.System$IDisposable$Dispose();
                        }
                    }
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementPod)) {
                    var l5 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementPod).Elements;
                    $t5 = Bridge.getEnumerator(l5);
                    try {
                        while ($t5.moveNext()) {
                            var e5 = $t5.Current;
                            e5.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t5, System.IDisposable)) {
                            $t5.System$IDisposable$Dispose();
                        }
                    }
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementPodArray)) {
                    var l6 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementPodArray).Elements;
                    $t6 = Bridge.getEnumerator(l6);
                    try {
                        while ($t6.moveNext()) {
                            var e6 = $t6.Current;
                            e6.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t6, System.IDisposable)) {
                            $t6.System$IDisposable$Dispose();
                        }
                    }
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementPodMultiDimArray)) {
                    var l7 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementPodMultiDimArray).Elements;
                    $t7 = Bridge.getEnumerator(l7);
                    try {
                        while ($t7.moveNext()) {
                            var e7 = $t7.Current;
                            e7.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t7, System.IDisposable)) {
                            $t7.System$IDisposable$Dispose();
                        }
                    }
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementNamedArray)) {
                    var l8 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementNamedArray).Elements;
                    $t8 = Bridge.getEnumerator(l8);
                    try {
                        while ($t8.moveNext()) {
                            var e8 = $t8.Current;
                            e8.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t8, System.IDisposable)) {
                            $t8.System$IDisposable$Dispose();
                        }
                    }
                } else if (Bridge.is(this.dat, RobotRaconteurWeb.MessageElementNamedMultiDimArray)) {
                    var l9 = Bridge.cast(this.dat, RobotRaconteurWeb.MessageElementNamedMultiDimArray).Elements;
                    $t9 = Bridge.getEnumerator(l9);
                    try {
                        while ($t9.moveNext()) {
                            var e9 = $t9.Current;
                            e9.Write(w);
                        }
                    } finally {
                        if (Bridge.is($t9, System.IDisposable)) {
                            $t9.System$IDisposable$Dispose();
                        }
                    }
                } else {
                    w.WriteNumber(this.dat, this.ElementType);
                }

                if (w.DistanceFromLimit !== 0) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                w.PopLimit();

            },
            Read: function (r) {
                this.ElementSize = r.ReadUInt32();
                r.PushRelativeLimit(((this.ElementSize - 4) >>> 0));
                var name_s = r.ReadUInt16();
                this.ElementName = r.ReadString8(name_s);
                this.ElementType = r.ReadUInt16();
                var nametype_s = r.ReadUInt16();
                this.ElementTypeName = r.ReadString8(nametype_s);
                var metadata_s = r.ReadUInt16();
                this.MetaData = r.ReadString8(metadata_s);
                this.DataCount = r.ReadUInt32();

                if (this.ElementType === RobotRaconteurWeb.DataTypes.void_t) {
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.structure_t) {
                    var l = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i = 0; System.Int64(i).lt(System.Int64(this.DataCount)); i = (i + 1) | 0) {
                        var m = new RobotRaconteurWeb.MessageElement.ctor();
                        m.Read(r);
                        l.add(m);

                    }

                    this.dat = new RobotRaconteurWeb.MessageElementStructure(this.ElementTypeName, l);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.vector_t) {
                    var l1 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i1 = 0; System.Int64(i1).lt(System.Int64(this.DataCount)); i1 = (i1 + 1) | 0) {
                        var m1 = new RobotRaconteurWeb.MessageElement.ctor();
                        m1.Read(r);
                        l1.add(m1);

                    }

                    this.dat = new (RobotRaconteurWeb.MessageElementMap$1(System.Int32))(l1);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.dictionary_t) {
                    var l2 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i2 = 0; System.Int64(i2).lt(System.Int64(this.DataCount)); i2 = (i2 + 1) | 0) {
                        var m2 = new RobotRaconteurWeb.MessageElement.ctor();
                        m2.Read(r);
                        l2.add(m2);

                    }

                    this.dat = new (RobotRaconteurWeb.MessageElementMap$1(System.String))(l2);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.list_t) {
                    var l3 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i3 = 0; System.Int64(i3).lt(System.Int64(this.DataCount)); i3 = (i3 + 1) | 0) {
                        var m3 = new RobotRaconteurWeb.MessageElement.ctor();
                        m3.Read(r);
                        l3.add(m3);

                    }

                    this.dat = new RobotRaconteurWeb.MessageElementList(l3);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.string_t) {
                    if (System.Int64(this.DataCount).gt(System.Int64(r.DistanceFromLimit))) {
                        throw new RobotRaconteurWeb.IOException("Error reading message");
                    }
                    this.dat = r.ReadString8(this.DataCount);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.multidimarray_t) {
                    var l4 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i4 = 0; System.Int64(i4).lt(System.Int64(this.DataCount)); i4 = (i4 + 1) | 0) {
                        var m4 = new RobotRaconteurWeb.MessageElement.ctor();
                        m4.Read(r);
                        l4.add(m4);

                    }
                    this.dat = new RobotRaconteurWeb.MessageElementMultiDimArray(l4);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.pod_t) {
                    var l5 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i5 = 0; System.Int64(i5).lt(System.Int64(this.DataCount)); i5 = (i5 + 1) | 0) {
                        var m5 = new RobotRaconteurWeb.MessageElement.ctor();
                        m5.Read(r);
                        l5.add(m5);

                    }
                    this.dat = new RobotRaconteurWeb.MessageElementPod(l5);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.pod_array_t) {
                    var l6 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i6 = 0; System.Int64(i6).lt(System.Int64(this.DataCount)); i6 = (i6 + 1) | 0) {
                        var m6 = new RobotRaconteurWeb.MessageElement.ctor();
                        m6.Read(r);
                        l6.add(m6);

                    }
                    this.dat = new RobotRaconteurWeb.MessageElementPodArray(this.ElementTypeName, l6);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.pod_multidimarray_t) {
                    var l7 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i7 = 0; System.Int64(i7).lt(System.Int64(this.DataCount)); i7 = (i7 + 1) | 0) {
                        var m7 = new RobotRaconteurWeb.MessageElement.ctor();
                        m7.Read(r);
                        l7.add(m7);

                    }
                    this.dat = new RobotRaconteurWeb.MessageElementPodMultiDimArray(this.ElementTypeName, l7);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.pod_t) {
                    var l8 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i8 = 0; System.Int64(i8).lt(System.Int64(this.DataCount)); i8 = (i8 + 1) | 0) {
                        var m8 = new RobotRaconteurWeb.MessageElement.ctor();
                        m8.Read(r);
                        l8.add(m8);

                    }
                    this.dat = new RobotRaconteurWeb.MessageElementPod(l8);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.namedarray_array_t) {
                    var l9 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i9 = 0; System.Int64(i9).lt(System.Int64(this.DataCount)); i9 = (i9 + 1) | 0) {
                        var m9 = new RobotRaconteurWeb.MessageElement.ctor();
                        m9.Read(r);
                        l9.add(m9);

                    }
                    this.dat = new RobotRaconteurWeb.MessageElementNamedArray(this.ElementTypeName, l9);
                } else if (this.ElementType === RobotRaconteurWeb.DataTypes.namedarray_multidimarray_t) {
                    var l10 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2((this.DataCount | 0));
                    for (var i10 = 0; System.Int64(i10).lt(System.Int64(this.DataCount)); i10 = (i10 + 1) | 0) {
                        var m10 = new RobotRaconteurWeb.MessageElement.ctor();
                        m10.Read(r);
                        l10.add(m10);

                    }
                    this.dat = new RobotRaconteurWeb.MessageElementNamedMultiDimArray(this.ElementTypeName, l10);
                } else {
                    if (System.Int64(Bridge.Int.umul(this.DataCount, RobotRaconteurWeb.DataTypeUtil.size(this.ElementType))).gt(System.Int64(r.DistanceFromLimit))) {
                        throw new RobotRaconteurWeb.IOException("Error reading message");
                    }
                    var d = RobotRaconteurWeb.DataTypeUtil.ArrayFromDataType(this.ElementType, this.DataCount);
                    r.ReadArray(d);
                    this.dat = d;

                }

                if (r.DistanceFromLimit !== 0) {
                    throw new RobotRaconteurWeb.IOException("Error reading message");
                }
                r.PopLimit();

            },
            CastData: function (T) {
                if (this.Data == null) {
                    return Bridge.getDefaultValue(T);
                }
                if (Bridge.is(this.Data, T)) {
                    return Bridge.cast(Bridge.unbox(this.Data, T), T);
                }
                throw new RobotRaconteurWeb.DataTypeException("Could not cast data to type " + (Bridge.getTypeName(T) || ""));
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementList", {
        fields: {
            Elements: null
        },
        ctors: {
            ctor: function (e) {
                this.$initialize();
                this.Elements = e;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementMap$1", function (T) { return {
        fields: {
            Elements: null
        },
        ctors: {
            ctor: function (e) {
                this.$initialize();
                this.Elements = e;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.MessageElementMultiDimArray", {
        fields: {
            Elements: null
        },
        ctors: {
            ctor: function (e) {
                this.$initialize();
                this.Elements = e;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementNamedArray", {
        fields: {
            Type: null,
            Elements: null
        },
        ctors: {
            ctor: function (type, e) {
                this.$initialize();
                this.Elements = e;
                this.Type = type;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementNamedMultiDimArray", {
        fields: {
            Type: null,
            Elements: null
        },
        ctors: {
            ctor: function (type, e) {
                this.$initialize();
                this.Elements = e;
                this.Type = type;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementPod", {
        fields: {
            Elements: null
        },
        ctors: {
            ctor: function (e) {
                this.$initialize();
                this.Elements = e;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementPodArray", {
        fields: {
            Type: null,
            Elements: null
        },
        ctors: {
            ctor: function (type, e) {
                this.$initialize();
                this.Elements = e;
                this.Type = type;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementPodMultiDimArray", {
        fields: {
            Type: null,
            Elements: null
        },
        ctors: {
            ctor: function (type, e) {
                this.$initialize();
                this.Elements = e;
                this.Type = type;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementStructure", {
        fields: {
            Elements: null,
            Type: null
        },
        ctors: {
            ctor: function (type_, elements_) {
                this.$initialize();
                this.Elements = elements_;
                this.Type = type_;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementUtil", {
        statics: {
            methods: {
                NewMessageElement$1: function (name, data) {
                    var m = new RobotRaconteurWeb.MessageElement.ctor();
                    m.ElementName = name;
                    m.Data = data;
                    return m;
                },
                NewMessageElement: function (i, data) {
                    var m = new RobotRaconteurWeb.MessageElement.ctor();
                    m.ElementName = Bridge.toString(i);
                    m.Data = data;
                    return m;
                },
                AddMessageElement$5: function (vct, name, data) {
                    var m = RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, data);
                    vct.add(m);
                },
                AddMessageElement$2: function (m, name, data) {
                    var m1 = RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, data);
                    m.AddElement(m1);
                },
                AddMessageElement$4: function (vct, i, data) {
                    var m = RobotRaconteurWeb.MessageElementUtil.NewMessageElement(i, data);
                    vct.add(m);
                },
                AddMessageElement$1: function (m, i, data) {
                    var m1 = RobotRaconteurWeb.MessageElementUtil.NewMessageElement(i, data);
                    m.AddElement(m1);
                },
                AddMessageElement$3: function (vct, m) {
                    vct.add(m);
                },
                AddMessageElement: function (m, mm) {
                    m.AddElement(mm);
                },
                FindElementAndCast: function (T, elems, name) {
                    var e = RobotRaconteurWeb.MessageElement.FindElement$1(elems, name);

                    return e.CastData(T);
                },
                FindElement$1: function (elems, name) {
                    return RobotRaconteurWeb.MessageElement.FindElement$1(elems, name);
                },
                FindElement: function (m, name) {
                    return RobotRaconteurWeb.MessageElement.FindElement(m, name);
                },
                CastData: function (T, m) {
                    return m.CastData(T);
                },
                GetMessageElementNumber: function (e) {
                    var res = { };
                    if (!System.Int32.tryParse(e.ElementName, res)) {
                        throw new RobotRaconteurWeb.ProtocolException("Could not determine Element Number");
                    }
                    return res.v;
                },
                PackScalar: function (T, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, System.Array.init([val], T));
                },
                PackArray: function (T, name, val) {
                    if (val == null) {
                        throw new System.NullReferenceException.ctor();
                    }
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, val);
                },
                PackMultiDimArray: function (node, name, val) {
                    if (val == null) {
                        throw new System.NullReferenceException.ctor();
                    }

                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackMultiDimArray(val));
                },
                PackString: function (name, val) {
                    if (val == null) {
                        throw new System.NullReferenceException.ctor();
                    }
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, val);
                },
                PackStructure: function (node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackStructure(val, client));
                },
                PackVarType: function (node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackVarType(val, client));
                },
                PackMapType: function (K, T, node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackMapType(K, T, val, client));
                },
                PackListType: function (T, node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackListType(T, val, client));
                },
                PackEnum: function (T, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, System.Array.init([System.Nullable.getValue(Bridge.cast(Bridge.unbox(val, System.Int32), System.Int32))], System.Int32));
                },
                PackPodToArray: function (T, node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackPodToArray(T, val, client));
                },
                PackPodArray: function (T, node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackPodArray(T, val, client));
                },
                PackPodMultiDimArray: function (T, node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackPodMultiDimArray(T, val, client));
                },
                PackNamedArrayToArray: function (T, node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackNamedArrayToArray(T, val, client));
                },
                PackNamedArray: function (T, node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackNamedArray(T, val, client));
                },
                PackNamedMultiDimArray: function (T, node, client, name, val) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, node.PackNamedMultiDimArray(T, val, client));
                },
                UnpackScalar: function (T, m) {
                    var a = RobotRaconteurWeb.MessageElementUtil.CastData(System.Array.type(T), m);
                    if (a.length !== 1) {
                        throw new RobotRaconteurWeb.DataTypeException("Invalid scalar");
                    }
                    return a[System.Array.index(0, a)];
                },
                UnpackArray: function (T, m) {
                    var a = RobotRaconteurWeb.MessageElementUtil.CastData(System.Array.type(T), m);
                    if (a == null) {
                        throw new System.NullReferenceException.ctor();
                    }
                    return a;
                },
                UnpackMultiDimArray: function (node, m) {
                    var a = node.UnpackMultiDimArray(RobotRaconteurWeb.MessageElementUtil.CastData(RobotRaconteurWeb.MessageElementMultiDimArray, m));
                    if (a == null) {
                        throw new System.NullReferenceException.ctor();
                    }
                    return a;
                },
                UnpackString: function (m) {
                    var s = RobotRaconteurWeb.MessageElementUtil.CastData(System.String, m);
                    if (s == null) {
                        throw new System.NullReferenceException.ctor();
                    }
                    return s;
                },
                UnpackStructure: function (T, node, client, m) {
                    return node.UnpackStructure(T, RobotRaconteurWeb.MessageElementUtil.CastData(RobotRaconteurWeb.MessageElementStructure, m), client);
                },
                UnpackVarType: function (node, client, m) {
                    return node.UnpackVarType(m, client);
                },
                UnpackMap: function (K, T, node, client, m) {
                    return Bridge.cast(node.UnpackMapType(K, T, m.Data, client), System.Collections.Generic.Dictionary$2(K,T));
                },
                UnpackList: function (T, node, client, m) {
                    return Bridge.cast(node.UnpackListType(T, m.Data, client), System.Collections.Generic.List$1(T));
                },
                UnpackEnum: function (T, m) {
                    var a = RobotRaconteurWeb.MessageElementUtil.CastData(System.Array.type(System.Int32), m);
                    if (a.length !== 1) {
                        throw new RobotRaconteurWeb.DataTypeException("Invalid enum");
                    }
                    return Bridge.cast(Bridge.unbox(Bridge.box(a[System.Array.index(0, a)], System.Int32), T), T);
                },
                UnpackPodFromArray: function (T, node, client, m) {
                    return node.UnpackPodFromArray(T, RobotRaconteurWeb.MessageElementUtil.CastData(RobotRaconteurWeb.MessageElementPodArray, m), client);
                },
                UnpackPodArray: function (T, node, client, m) {
                    return node.UnpackPodArray(T, RobotRaconteurWeb.MessageElementUtil.CastData(RobotRaconteurWeb.MessageElementPodArray, m), client);
                },
                UnpackPodMultiDimArray: function (T, node, client, m) {
                    return node.UnpackPodMultiDimArray(T, RobotRaconteurWeb.MessageElementUtil.CastData(RobotRaconteurWeb.MessageElementPodMultiDimArray, m), client);
                },
                UnpackNamedArrayFromArray: function (T, node, client, m) {
                    return node.UnpackNamedArrayFromArray(T, RobotRaconteurWeb.MessageElementUtil.CastData(RobotRaconteurWeb.MessageElementNamedArray, m), client);
                },
                UnpackNamedArray: function (T, node, client, m) {
                    return node.UnpackNamedArray(T, RobotRaconteurWeb.MessageElementUtil.CastData(RobotRaconteurWeb.MessageElementNamedArray, m), client);
                },
                UnpackNamedMultiDimArray: function (T, node, client, m) {
                    return node.UnpackNamedMultiDimArray(T, RobotRaconteurWeb.MessageElementUtil.CastData(RobotRaconteurWeb.MessageElementNamedMultiDimArray, m), client);
                },
                GetMessageElementDataTypeString: function (o) {
                    var f = Bridge.Reflection.getMembers(Bridge.getType(o), 4, 284, "Type");
                    return Bridge.cast(Bridge.Reflection.fieldAccess(f, Bridge.unbox(o)), System.String);
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageEntry", {
        fields: {
            EntrySize: 0,
            EntryType: 0,
            ServicePath: null,
            MemberName: null,
            RequestID: 0,
            Error: 0,
            MetaData: null,
            elements: null
        },
        ctors: {
            init: function () {
                this.ServicePath = "";
                this.MemberName = "";
                this.MetaData = "";
            },
            ctor: function () {
                this.$initialize();
                this.elements = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
            },
            $ctor1: function (t, n) {
                this.$initialize();
                this.elements = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                this.EntryType = t;
                this.MemberName = n;
            }
        },
        methods: {
            ComputeSize: function () {
                var $t;
                var s = 22;
                $t = Bridge.getEnumerator(this.elements);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        s = (s + (e.ComputeSize())) >>> 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }

                s = (s + ((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.ServicePath)) >>> 0)) >>> 0;
                s = (s + ((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.MemberName)) >>> 0)) >>> 0;
                s = (s + ((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.MetaData)) >>> 0)) >>> 0;

                return s;
            },
            FindElement: function (name) {
                var $t;

                if (this.elements == null) {
                    return null;
                }

                $t = Bridge.getEnumerator(this.elements);
                try {
                    while ($t.moveNext()) {
                        var m = $t.Current;
                        if (Bridge.referenceEquals(m.ElementName, name)) {
                            return m;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }

                throw new RobotRaconteurWeb.MessageElementNotFoundException("Element " + (name || "") + " not found.");

            },
            TryFindElement: function (name, m) {
                var $t;
                if (this.elements != null) {
                    $t = Bridge.getEnumerator(this.elements);
                    try {
                        while ($t.moveNext()) {
                            var m1 = $t.Current;
                            if (Bridge.referenceEquals(m1.ElementName, name)) {
                                m.v = m1;
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                }
                m.v = null;
                return false;
            },
            AddElement$1: function (name, data) {
                var m = new RobotRaconteurWeb.MessageElement.ctor();
                m.ElementName = name;
                m.Data = data;

                if (this.elements == null) {
                    this.elements = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                }
                this.elements.add(m);

                return m;
            },
            AddElement: function (m) {
                if (this.elements == null) {
                    this.elements = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                }
                this.elements.add(m);

                return m;
            },
            Write: function (w) {
                var $t;

                this.EntrySize = this.ComputeSize();
                w.PushRelativeLimit(this.EntrySize);
                w.Write$16(this.EntrySize);
                w.Write$15((this.EntryType & 65535));
                w.Write$15(0);

                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.ServicePath)) & 65535));
                w.WriteString8(this.ServicePath);
                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.MemberName)) & 65535));
                w.WriteString8(this.MemberName);
                w.Write$16(this.RequestID);
                w.Write$15((this.Error & 65535));
                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.MetaData)) & 65535));
                w.WriteString8(this.MetaData);
                w.Write$15(((this.elements.Count) & 65535));

                $t = Bridge.getEnumerator(this.elements);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.Write(w);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }

                if (w.DistanceFromLimit !== 0) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                w.PopLimit();
            },
            Read: function (r) {
                this.EntrySize = r.ReadUInt32();

                r.PushRelativeLimit(((this.EntrySize - 4) >>> 0));

                this.EntryType = r.ReadUInt16();
                r.ReadUInt16();

                var sname_s = r.ReadUInt16();
                this.ServicePath = r.ReadString8(sname_s);
                var mname_s = r.ReadUInt16();
                this.MemberName = r.ReadString8(mname_s);
                this.RequestID = r.ReadUInt32();
                this.Error = r.ReadUInt16();

                var metadata_s = r.ReadUInt16();
                this.MetaData = r.ReadString8(metadata_s);

                var ecount = r.ReadUInt16();



                this.elements = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).$ctor2(ecount);
                for (var i = 0; i < ecount; i = (i + 1) | 0) {
                    var e = new RobotRaconteurWeb.MessageElement.ctor();
                    e.Read(r);
                    this.elements.add(e);
                }

                if (r.DistanceFromLimit !== 0) {
                    throw new RobotRaconteurWeb.IOException("Error reading message");
                }
                r.PopLimit();

            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageEntryType", {
        $kind: "enum",
        statics: {
            fields: {
                Null: 0,
                StreamOp: 1,
                StreamOpRet: 2,
                StreamCheckCapability: 3,
                StreamCheckCapabilityRet: 4,
                StringTableOp: 5,
                StringTableOpRet: 6,
                GetServiceDesc: 101,
                GetServiceDescRet: 102,
                ObjectTypeName: 103,
                ObjectTypeNameRet: 104,
                ServiceClosed: 105,
                ServiceClosedRet: 106,
                ConnectClient: 107,
                ConnectClientRet: 108,
                DisconnectClient: 109,
                DisconnectClientRet: 110,
                ConnectionTest: 111,
                ConnectionTestRet: 112,
                GetNodeInfo: 113,
                GetNodeInfoRet: 114,
                ReconnectClient: 115,
                ReconnectClientRet: 116,
                NodeCheckCapability: 117,
                NodeCheckCapabilityRet: 118,
                GetServiceAttributes: 119,
                GetServiceAttributesRet: 120,
                ConnectClientCombined: 121,
                ConnectClientCombinedRet: 122,
                EndpointCheckCapability: 501,
                EndpointCheckCapabilityRet: 502,
                ServiceCheckCapabilityReq: 1101,
                ServiceCheckCapabilityRet: 1102,
                ClientKeepAliveReq: 1105,
                ClientKeepAliveRet: 1106,
                ClientSessionOpReq: 1107,
                ClientSessionOpRet: 1108,
                ServicePathReleasedReq: 1109,
                ServicePathReleasedRet: 1110,
                PropertyGetReq: 1111,
                PropertyGetRes: 1112,
                PropertySetReq: 1113,
                PropertySetRes: 1114,
                FunctionCallReq: 1121,
                FunctionCallRes: 1122,
                GeneratorNextReq: 1123,
                GeneratorNextRes: 1124,
                EventReq: 1131,
                EventRes: 1132,
                PipePacket: 1141,
                PipePacketRet: 1142,
                PipeConnectReq: 1143,
                PipeConnectRet: 1144,
                PipeDisconnectReq: 1145,
                PipeDisconnectRet: 1146,
                PipeClosed: 1147,
                PipeClosedRet: 1148,
                CallbackCallReq: 1151,
                CallbackCallRet: 1152,
                WirePacket: 1161,
                WirePacketRet: 1162,
                WireConnectReq: 1163,
                WireConnectRet: 1164,
                WireDisconnectReq: 1165,
                WireDisconnectRet: 1166,
                WireClosed: 1167,
                WireClosedRet: 1168,
                MemoryRead: 1171,
                MemoryReadRet: 1172,
                MemoryWrite: 1173,
                MemoryWriteRet: 1174,
                MemoryGetParam: 1175,
                MemoryGetParamRet: 1176,
                WirePeekInValueReq: 1181,
                WirePeekInValueRet: 1182,
                WirePeekOutValueReq: 1183,
                WirePeekOutValueRet: 1184,
                WirePokeOutValueReq: 1185,
                WirePokeOutValueRet: 1186,
                WireTransportOpReq: 11161,
                WireTransportOpRet: 11162,
                WireTransportEvent: 11163,
                WireTransportEventRet: 11164
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageErrorType", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                ConnectionError: 1,
                ProtocolError: 2,
                ServiceNotFound: 3,
                ObjectNotFound: 4,
                InvalidEndpoint: 5,
                EndpointCommunicationFatalError: 6,
                NodeNotFound: 7,
                ServiceError: 8,
                MemberNotFound: 9,
                MemberFormatMismatch: 10,
                DataTypeMismatch: 11,
                DataTypeError: 12,
                DataSerializationError: 13,
                MessageEntryNotFound: 14,
                MessageElementNotFound: 15,
                UnknownError: 16,
                InvalidOperation: 17,
                InvalidArgument: 18,
                OperationFailed: 19,
                NullValue: 20,
                InternalError: 21,
                SystemResourcePermissionDenied: 22,
                OutOfSystemResource: 23,
                SystemResourceError: 24,
                ResourceNotFound: 25,
                IOError: 26,
                BufferLimitViolation: 27,
                ServiceDefinitionError: 28,
                OutOfRange: 29,
                KeyNotFound: 30,
                RemoteError: 100,
                RequestTimeout: 101,
                ReadOnlyMember: 102,
                WriteOnlyMember: 103,
                NotImplementedError: 104,
                MemberBusy: 105,
                ValueNotSet: 106,
                AbortOperation: 107,
                OperationAborted: 108,
                StopIteration: 109,
                AuthenticationError: 150,
                ObjectLockedError: 151,
                PermissionDenied: 152
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageHeader", {
        fields: {
            HeaderLength: 0,
            SenderEndpoint: 0,
            ReceiverEndpoint: 0,
            SenderNodeName: null,
            ReceiverNodeName: null,
            SenderNodeID: null,
            ReceiverNodeID: null,
            MetaData: null,
            EntryCount: 0,
            MessageID: 0,
            MessageResID: 0,
            MessageSize: 0
        },
        ctors: {
            init: function () {
                this.SenderNodeName = "";
                this.ReceiverNodeName = "";
                this.SenderNodeID = new RobotRaconteurWeb.NodeID.ctor(System.Array.init([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], System.Byte));
                this.ReceiverNodeID = new RobotRaconteurWeb.NodeID.ctor(System.Array.init([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], System.Byte));
                this.MetaData = "";
            }
        },
        methods: {
            ComputeSize: function () {
                return ((((((((64 + RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.SenderNodeName)) | 0) + RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.ReceiverNodeName)) | 0) + RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.MetaData)) | 0)) & 65535);
            },
            UpdateHeader: function (message_size, entry_count) {
                this.HeaderLength = this.ComputeSize();
                this.MessageSize = message_size;
                this.EntryCount = entry_count;
            },
            Write: function (w) {
                w.PushRelativeLimit(this.HeaderLength);
                w.WriteString8("RRAC");
                w.Write$16(this.MessageSize);
                w.Write$15(2);

                w.Write$15(this.HeaderLength);

                var bSenderNodeID = this.SenderNodeID.ToByteArray();
                var bReceiverNodeID = this.ReceiverNodeID.ToByteArray();
                for (var i = 0; i < 16; i = (i + 1) | 0) {
                    w.Write$1(bSenderNodeID[System.Array.index(i, bSenderNodeID)]);
                }
                ;
                for (var i1 = 0; i1 < 16; i1 = (i1 + 1) | 0) {
                    w.Write$1(bReceiverNodeID[System.Array.index(i1, bReceiverNodeID)]);
                }
                ;
                w.Write$16(this.SenderEndpoint);
                w.Write$16(this.ReceiverEndpoint);
                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.SenderNodeName)) & 65535));
                w.WriteString8(this.SenderNodeName);
                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.ReceiverNodeName)) & 65535));
                w.WriteString8(this.ReceiverNodeName);
                w.Write$15(((RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(this.MetaData)) & 65535));
                w.WriteString8(this.MetaData);
                w.Write$15(this.EntryCount);
                w.Write$15(this.MessageID);
                w.Write$15(this.MessageResID);

                if (w.DistanceFromLimit !== 0) {
                    throw new RobotRaconteurWeb.IOException("Message write error");
                }
                w.PopLimit();

            },
            Read: function (r) {
                var seed = r.ReadString8(4);
                if (!Bridge.referenceEquals(seed, "RRAC")) {
                    throw new RobotRaconteurWeb.ProtocolException("Incorrect message seed");
                }
                this.MessageSize = r.ReadUInt32();
                var version = r.ReadUInt16();
                if (version !== 2) {
                    throw new RobotRaconteurWeb.ProtocolException("Uknown protocol version");
                }

                this.HeaderLength = r.ReadUInt16();

                r.PushRelativeLimit(((((this.HeaderLength - 12) | 0)) >>> 0));

                var bSenderNodeID = System.Array.init([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], System.Byte);
                for (var i = 0; i < 16; i = (i + 1) | 0) {
                    bSenderNodeID[System.Array.index(i, bSenderNodeID)] = r.ReadByte();
                }
                ;
                this.SenderNodeID = new RobotRaconteurWeb.NodeID.ctor(bSenderNodeID);
                var bReceiverNodeID = System.Array.init([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], System.Byte);
                for (var i1 = 0; i1 < 16; i1 = (i1 + 1) | 0) {
                    bReceiverNodeID[System.Array.index(i1, bReceiverNodeID)] = r.ReadByte();
                }
                ;
                this.ReceiverNodeID = new RobotRaconteurWeb.NodeID.ctor(bReceiverNodeID);
                this.SenderEndpoint = r.ReadUInt32();
                this.ReceiverEndpoint = r.ReadUInt32();
                var pname_s = r.ReadUInt16();
                this.SenderNodeName = r.ReadString8(pname_s);
                var pname_r = r.ReadUInt16();
                this.ReceiverNodeName = r.ReadString8(pname_r);
                var meta_s = r.ReadUInt16();
                this.MetaData = r.ReadString8(meta_s);

                this.EntryCount = r.ReadUInt16();
                this.MessageID = r.ReadUInt16();
                this.MessageResID = r.ReadUInt16();
                if (r.DistanceFromLimit !== 0) {
                    throw new RobotRaconteurWeb.IOException("Error reading message");
                }
                r.PopLimit();

            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MultiDimArray", {
        fields: {
            Dims: null,
            Array_: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (Dims, Array_) {
                this.$initialize();

                this.Dims = Dims;
                this.Array_ = Array_;
            }
        },
        methods: {
            RetrieveSubArray: function (memorypos, buffer, bufferpos, count) {

                var mema = this;
                var memb = buffer;

                var iter = RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter.BeginIter(mema.Dims, memorypos, memb.Dims, bufferpos, count);

                var indexa = { };
                var indexb = { };
                var len = { };

                while (iter.Next(indexa, indexb, len)) {
                    System.Array.copy(mema.Array_, System.Int64(indexa.v).toNumber(), memb.Array_, System.Int64(indexb.v).toNumber(), System.Int64(len.v).toNumber());
                }

            },
            AssignSubArray: function (memorypos, buffer, bufferpos, count) {


                var mema = this;
                var memb = buffer;

                var iter = RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter.BeginIter(mema.Dims, memorypos, memb.Dims, bufferpos, count);

                var indexa = { };
                var indexb = { };
                var len = { };

                while (iter.Next(indexa, indexb, len)) {
                    System.Array.copy(memb.Array_, System.Int64(indexb.v).toNumber(), mema.Array_, System.Int64(indexa.v).toNumber(), System.Int64(len.v).toNumber());

                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter", {
        statics: {
            methods: {
                BeginIter: function (mema_dims, mema_pos, memb_dims, memb_pos, count) {
                    if (count.length === 0) {
                        throw new System.ArgumentException.$ctor1("MultiDimArray count invalid");
                    }

                    if (count.length > mema_dims.length || count.length > memb_dims.length) {
                        throw new System.ArgumentException.$ctor1("MultiDimArray copy count invalid");
                    }
                    if (count.length > memb_dims.length || count.length > memb_dims.length) {
                        throw new System.ArgumentException.$ctor1("MultiDimArray copy count invalid");
                    }

                    for (var i = 0; i < mema_dims.length; i = (i + 1) | 0) {
                        if (mema_dims[System.Array.index(i, mema_dims)] < 0) {
                            throw new System.ArgumentException.$ctor1("MultiDimArray mema_dims invalid");
                        }
                    }

                    for (var i1 = 0; i1 < memb_dims.length; i1 = (i1 + 1) | 0) {
                        if (memb_dims[System.Array.index(i1, memb_dims)] < 0) {
                            throw new System.ArgumentException.$ctor1("MultiDimArray memb_dims invalid");
                        }
                    }

                    for (var i2 = 0; i2 < count.length; i2 = (i2 + 1) | 0) {
                        if (count[System.Array.index(i2, count)] < 0) {
                            throw new System.ArgumentException.$ctor1("MultiDimArray count invalid");
                        }
                    }

                    for (var i3 = 0; i3 < mema_dims.length && i3 < count.length; i3 = (i3 + 1) | 0) {
                        if (mema_pos[System.Array.index(i3, mema_pos)] > mema_dims[System.Array.index(i3, mema_dims)] || (((mema_pos[System.Array.index(i3, mema_pos)] + count[System.Array.index(i3, count)]) >>> 0)) > mema_dims[System.Array.index(i3, mema_dims)]) {
                            throw new System.ArgumentException.$ctor1("MultiDimArray A count invalid");
                        }
                    }

                    for (var i4 = 0; i4 < memb_dims.length && i4 < count.length; i4 = (i4 + 1) | 0) {
                        if (memb_pos[System.Array.index(i4, memb_pos)] > memb_dims[System.Array.index(i4, memb_dims)] || (((memb_pos[System.Array.index(i4, memb_pos)] + count[System.Array.index(i4, count)]) >>> 0)) > memb_dims[System.Array.index(i4, memb_dims)]) {
                            throw new System.ArgumentException.$ctor1("MultiDimArray B count invalid");
                        }
                    }

                    var stridea = System.Array.init(count.length, 0, System.UInt32);
                    stridea[System.Array.index(0, stridea)] = 1;
                    for (var i5 = 1; i5 < ((count.length) >>> 0); i5 = (i5 + 1) >>> 0) {
                        stridea[System.Array.index(i5, stridea)] = Bridge.Int.umul(stridea[System.Array.index(((i5 - 1) >>> 0), stridea)], mema_dims[System.Array.index(((i5 - 1) >>> 0), mema_dims)]);
                    }

                    var strideb = System.Array.init(count.length, 0, System.UInt32);
                    strideb[System.Array.index(0, strideb)] = 1;
                    for (var i6 = 1; i6 < ((count.length) >>> 0); i6 = (i6 + 1) >>> 0) {
                        strideb[System.Array.index(i6, strideb)] = Bridge.Int.umul(strideb[System.Array.index(((i6 - 1) >>> 0), strideb)], memb_dims[System.Array.index(((i6 - 1) >>> 0), memb_dims)]);
                    }

                    var o = new RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter();

                    o.mema_dims = mema_dims;
                    o.memb_dims = memb_dims;
                    o.mema_pos = mema_pos;
                    o.memb_pos = memb_pos;
                    o.count = count;
                    o.current_count = System.Array.init(count.length, 0, System.UInt32);
                    o.done = false;
                    o.stridea = stridea;
                    o.strideb = strideb;
                    return o;
                }
            }
        },
        fields: {
            mema_dims: null,
            memb_dims: null,
            mema_pos: null,
            memb_pos: null,
            count: null,
            stridea: null,
            strideb: null,
            current_count: null,
            done: false
        },
        methods: {
            Next: function (indexa, indexb, len) {
                var $t;
                if (this.done) {
                    indexa.v = 0;
                    indexb.v = 0;
                    len.v = 0;
                    return false;
                }

                var a = 0;
                var b = 0;

                indexa.v = 0;
                for (var j = 0; j < ((this.count.length) >>> 0); j = (j + 1) >>> 0) {
                    indexa.v = (indexa.v + (Bridge.Int.umul((((this.current_count[System.Array.index(j, this.current_count)] + this.mema_pos[System.Array.index(j, this.mema_pos)]) >>> 0)), this.stridea[System.Array.index(j, this.stridea)]))) >>> 0;
                }
                indexb.v = 0;
                for (var j1 = 0; j1 < ((this.count.length) >>> 0); j1 = (j1 + 1) >>> 0) {
                    indexb.v = (indexb.v + (Bridge.Int.umul((((this.current_count[System.Array.index(j1, this.current_count)] + this.memb_pos[System.Array.index(j1, this.memb_pos)]) >>> 0)), this.strideb[System.Array.index(j1, this.strideb)]))) >>> 0;
                }

                len.v = this.count[System.Array.index(0, this.count)];

                if (this.count.length <= 1) {
                    this.done = true;
                    return true;
                }

                this.current_count[System.Array.index(1, this.current_count)] = (this.current_count[System.Array.index(1, this.current_count)] + 1) >>> 0;
                for (var j2 = 1; j2 < ((this.count.length) >>> 0); j2 = (j2 + 1) >>> 0) {
                    if (this.current_count[System.Array.index(j2, this.current_count)] > (((this.count[System.Array.index(j2, this.count)] - 1) >>> 0))) {
                        this.current_count[System.Array.index(j2, this.current_count)] = (this.current_count[System.Array.index(j2, this.current_count)] - this.count[System.Array.index(j2, this.count)]) >>> 0;
                        if (j2 < ((((this.count.length) >>> 0) - 1) >>> 0)) {
                            this.current_count[System.Array.index(($t = ((j2 + 1) >>> 0)), this.current_count)] = (this.current_count[System.Array.index($t, this.current_count)] + 1) >>> 0;
                        } else {
                            this.done = true;
                            return true;
                        }
                    }
                }

                return true;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MultiDimArrayMemoryBase");

    Bridge.define("RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase", {
        statics: {
            methods: {
                CalculateMatrixBlocks: function (element_size, count, max_elems, split_dim, split_dim_block, split_elem_count, splits_count, split_remainder, block_count, block_count_edge) {
                    split_elem_count.v = System.UInt64(1);
                    split_dim.v = -1;
                    split_dim_block.v = System.UInt64(0);
                    var split_dim_found = false;
                    block_count.v = System.Array.init(count.length, System.UInt64(0), System.UInt64);
                    splits_count.v = 0;
                    split_remainder.v = 0;
                    for (var i = 0; i < count.length; i = (i + 1) | 0) {
                        if (!split_dim_found) {
                            var temp_elem_count1 = split_elem_count.v.mul(count[System.Array.index(i, count)]);
                            if (temp_elem_count1.gt(max_elems)) {
                                split_dim.v = i;
                                split_dim_block.v = max_elems.div(split_elem_count.v);
                                split_dim_found = true;
                                block_count.v[System.Array.index(i, block_count.v)] = split_dim_block.v;
                                splits_count.v = System.Int64.clip32(count[System.Array.index(i, count)].div(split_dim_block.v));
                                split_remainder.v = System.Int64.clip32(count[System.Array.index(i, count)].mod(split_dim_block.v));
                            } else {
                                split_elem_count.v = temp_elem_count1;
                                block_count.v[System.Array.index(i, block_count.v)] = count[System.Array.index(i, count)];
                            }
                        } else {
                            block_count.v[System.Array.index(i, block_count.v)] = System.UInt64(1);
                        }
                    }

                    block_count_edge.v = System.Array.init(block_count.v.length, System.UInt64(0), System.UInt64);
                    System.Array.copy(block_count.v, 0, block_count_edge.v, 0, block_count.v.length);
                    block_count_edge.v[System.Array.index(split_dim.v, block_count_edge.v)] = count[System.Array.index(split_dim.v, count)].mod(split_dim_block.v);
                }
            }
        },
        fields: {
            m_MemberName: null,
            stub: null,
            direction: 0,
            element_type: 0,
            element_size: 0,
            max_size_read: false,
            remote_max_size: 0
        },
        props: {
            MemberName: {
                get: function () {
                    return this.m_MemberName;
                }
            },
            Direction: {
                get: function () {
                    return this.direction;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, element_type, element_size, direction) {
                this.$initialize();
                this.stub = stub;
                this.m_MemberName = membername;
                this.direction = direction;
                this.element_type = element_type;
                this.element_size = element_size;
            }
        },
        methods: {
            GetDimCount: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    $t, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParam, this.MemberName);
                                        m.AddElement$1("parameter", "DimCount");
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        $tcs.setResult(($t = ret.FindElement("return").CastData(System.Array.type(System.UInt64)))[System.Array.index(0, $t)]);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetDimensions: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParam, this.MemberName);
                                        m.AddElement$1("parameter", "Dimensions");
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        $tcs.setResult(ret.FindElement("return").CastData(System.Array.type(System.UInt64)));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetMaxTransferSize: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    my_max_size, 
                    m, 
                    ret, 
                    remote_max_size1, 
                    $t, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        my_max_size = this.stub.rr_node.MemoryMaxTransferSize;
                                        this;
                                        {
                                            if (this.max_size_read) {
                                                if (this.remote_max_size > my_max_size) {
                                                    $tcs.setResult(my_max_size);
                                                    return;
                                                } else {
                                                    $tcs.setResult(this.remote_max_size);
                                                    return;
                                                }
                                            }
                                        }

                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParam, this.MemberName);
                                        m.AddElement$1("parameter", "MaxTransferSize");
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        remote_max_size1 = ($t = ret.FindElement("return").CastData(System.Array.type(System.UInt32)))[System.Array.index(0, $t)];
                                        this;
                                        {
                                            if (!this.max_size_read) {
                                                this.remote_max_size = remote_max_size1;
                                                this.max_size_read = true;
                                            }

                                            if (this.remote_max_size > my_max_size) {
                                                $tcs.setResult(my_max_size);
                                                return;
                                            } else {
                                                $tcs.setResult(this.remote_max_size);
                                                return;
                                            }
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ReadImpl: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $task4, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    max_transfer_size, 
                    elemcount, 
                    max_elems, 
                    e, 
                    ret, 
                    split_dim, 
                    split_dim_block, 
                    split_elem_count, 
                    splits_count, 
                    split_remainder, 
                    block_count, 
                    block_count_edge, 
                    done, 
                    current_pos, 
                    i, 
                    current_buf_pos, 
                    current_mem_pos, 
                    current_buf_pos1, 
                    current_mem_pos1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.writeonly) {
                                            throw new RobotRaconteurWeb.WriteOnlyMemberException("Write only member");
                                        }

                                        $task1 = this.GetMaxTransferSize(cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        max_transfer_size = $taskResult1;

                                        elemcount = System.Linq.Enumerable.from(count, System.UInt64).aggregate(System.UInt64(1), function (x, y) {
                                            return x.mul(y);
                                        });
                                        max_elems = System.UInt64(Bridge.Int.div(max_transfer_size, this.element_size));

                                        if (elemcount.lte(max_elems)) {
                                            $step = 2;
                                            continue;
                                        } else  {
                                            $step = 4;
                                            continue;
                                        }
                                    }
                                    case 2: {
                                        e = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryRead, this.MemberName);
                                        e.AddElement$1("memorypos", memorypos);
                                        e.AddElement$1("count", count);
                                        $task2 = this.stub.ProcessRequest(e, cancel);
                                        $step = 3;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        ret = $taskResult2;

                                        this.UnpackReadResult(ret.FindElement("data").Data, buffer, bufferpos, count, elemcount);
                                        $step = 16;
                                        continue;
                                    }
                                    case 4: {
                                        split_dim = { };
                                        split_dim_block = { };
                                        split_elem_count = { };
                                        splits_count = { };
                                        split_remainder = { };
                                        block_count = { };
                                        block_count_edge = { };

                                        RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase.CalculateMatrixBlocks(this.element_size, count, max_elems, split_dim, split_dim_block, split_elem_count, splits_count, split_remainder, block_count, block_count_edge);

                                        done = false;
                                        current_pos = System.Array.init(count.length, System.UInt64(0), System.UInt64);

                                        
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        if ( !done ) {
                                            $step = 6;
                                            continue;
                                        } 
                                        $step = 15;
                                        continue;
                                    }
                                    case 6: {
                                        i = 0;
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        if ( System.Int64(i).lt(System.Int64(splits_count.v)) ) {
                                            $step = 8;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 8: {
                                        current_pos[System.Array.index(split_dim.v, current_pos)] = split_dim_block.v.mul(System.UInt64(i));

                                        current_buf_pos = System.Array.init(bufferpos.length, System.UInt64(0), System.UInt64);
                                        current_mem_pos = System.Array.init(bufferpos.length, System.UInt64(0), System.UInt64);

                                        for (var j = System.Int64(0); j.lt(System.Array.getLongLength(current_buf_pos)); j = j.inc()) {
                                            current_buf_pos[System.Array.index(System.Int64.toNumber(j), current_buf_pos)] = current_pos[System.Array.index(System.Int64.toNumber(j), current_pos)].add(bufferpos[System.Array.index(System.Int64.toNumber(j), bufferpos)]);
                                            current_mem_pos[System.Array.index(System.Int64.toNumber(j), current_mem_pos)] = current_pos[System.Array.index(System.Int64.toNumber(j), current_pos)].add(memorypos[System.Array.index(System.Int64.toNumber(j), memorypos)]);
                                        }

                                        $task3 = this.ReadImpl(current_mem_pos, buffer, current_buf_pos, block_count.v);
                                        $step = 9;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 9: {
                                        $task3.getAwaitedResult();
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {
                                        i = (i + 1) >>> 0;
                                        $step = 7;
                                        continue;
                                    }
                                    case 11: {
                                        if (split_remainder.v !== 0) {
                                            $step = 12;
                                            continue;
                                        } 
                                        $step = 14;
                                        continue;
                                    }
                                    case 12: {
                                        current_pos[System.Array.index(split_dim.v, current_pos)] = split_dim_block.v.mul(Bridge.Int.clipu64(splits_count.v));
                                        current_buf_pos1 = System.Array.init(bufferpos.length, System.UInt64(0), System.UInt64);
                                        current_mem_pos1 = System.Array.init(bufferpos.length, System.UInt64(0), System.UInt64);

                                        for (var j1 = System.Int64(0); j1.lt(System.Array.getLongLength(current_buf_pos1)); j1 = j1.inc()) {
                                            current_buf_pos1[System.Array.index(System.Int64.toNumber(j1), current_buf_pos1)] = current_pos[System.Array.index(System.Int64.toNumber(j1), current_pos)].add(bufferpos[System.Array.index(System.Int64.toNumber(j1), bufferpos)]);
                                            current_mem_pos1[System.Array.index(System.Int64.toNumber(j1), current_mem_pos1)] = current_pos[System.Array.index(System.Int64.toNumber(j1), current_pos)].add(memorypos[System.Array.index(System.Int64.toNumber(j1), memorypos)]);
                                        }

                                        $task4 = this.ReadImpl(current_mem_pos1, buffer, current_buf_pos1, block_count_edge.v);
                                        $step = 13;
                                        if ($task4.isCompleted()) {
                                            continue;
                                        }
                                        $task4.continue($asyncBody);
                                        return;
                                    }
                                    case 13: {
                                        $task4.getAwaitedResult();
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if (split_dim.v === ((count.length - 1) | 0)) {
                                            done = true;
                                        } else {
                                            current_pos[System.Array.index(((split_dim.v + 1) | 0), current_pos)] = current_pos[System.Array.index(((split_dim.v + 1) | 0), current_pos)].inc();
                                            if (current_pos[System.Array.index(((split_dim.v + 1) | 0), current_pos)].gte(count[System.Array.index(((split_dim.v + 1) | 0), count)])) {
                                                if (((split_dim.v + 1) | 0) === ((count.length - 1) | 0)) {
                                                    done = true;
                                                } else {
                                                    current_pos[System.Array.index(((split_dim.v + 1) | 0), current_pos)] = System.UInt64(0);
                                                    for (var j2 = (split_dim.v + 2) | 0; j2 < count.length; j2 = (j2 + 1) | 0) {
                                                        if (current_pos[System.Array.index(((j2 - 1) | 0), current_pos)].gte(count[System.Array.index(((j2 - 1) | 0), count)])) {
                                                            current_pos[System.Array.index(j2, current_pos)] = current_pos[System.Array.index(j2, current_pos)].inc();
                                                        }
                                                    }
                                                    if (current_pos[System.Array.index(((count.length - 1) | 0), current_pos)].gte(count[System.Array.index(((count.length - 1) | 0), count)])) {
                                                        done = true;
                                                    }
                                                }
                                            }
                                        }

                                        $step = 5;
                                        continue;
                                    }

                                    case 16: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            WriteImpl: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $task3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    max_transfer_size, 
                    elemcount, 
                    max_elems, 
                    e, 
                    ret, 
                    split_dim, 
                    split_dim_block, 
                    split_elem_count, 
                    splits_count, 
                    split_remainder, 
                    block_count, 
                    block_count_edge, 
                    done, 
                    current_pos, 
                    i, 
                    current_buf_pos, 
                    current_mem_pos, 
                    current_buf_pos1, 
                    current_mem_pos1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,15], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.readonly_) {
                                            throw new RobotRaconteurWeb.ReadOnlyMemberException("Read only member");
                                        }

                                        $task1 = this.GetMaxTransferSize();
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        max_transfer_size = $taskResult1;

                                        elemcount = System.Linq.Enumerable.from(count, System.UInt64).aggregate(System.UInt64(1), function (x, y) {
                                            return x.mul(y);
                                        });

                                        max_elems = (Bridge.Int.div(max_transfer_size, this.element_size)) >>> 0;

                                        if (elemcount.lte(System.UInt64(max_elems))) {
                                            $step = 2;
                                            continue;
                                        } else  {
                                            $step = 3;
                                            continue;
                                        }
                                    }
                                    case 2: {
                                        e = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryWrite, this.MemberName);
                                        e.AddElement$1("memorypos", memorypos);
                                        e.AddElement$1("count", count);

                                        e.AddElement$1("data", this.PackWriteRequest(buffer, bufferpos, count, elemcount));

                                        ret = this.stub.ProcessRequest(e, cancel);
                                        $step = 15;
                                        continue;
                                    }
                                    case 3: {
                                        split_dim = { };
                                        split_dim_block = { };
                                        split_elem_count = { };
                                        splits_count = { };
                                        split_remainder = { };
                                        block_count = { };
                                        block_count_edge = { };

                                        RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase.CalculateMatrixBlocks(this.element_size, count, System.UInt64(max_elems), split_dim, split_dim_block, split_elem_count, splits_count, split_remainder, block_count, block_count_edge);

                                        done = false;
                                        current_pos = System.Array.init(count.length, System.UInt64(0), System.UInt64);

                                        
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        if ( !done ) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 14;
                                        continue;
                                    }
                                    case 5: {
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( System.Int64(i).lt(System.Int64(splits_count.v)) ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 10;
                                        continue;
                                    }
                                    case 7: {
                                        current_pos[System.Array.index(split_dim.v, current_pos)] = split_dim_block.v.mul(System.UInt64(i));

                                        current_buf_pos = System.Array.init(bufferpos.length, System.UInt64(0), System.UInt64);
                                        current_mem_pos = System.Array.init(bufferpos.length, System.UInt64(0), System.UInt64);

                                        for (var j = System.Int64(0); j.lt(System.Array.getLongLength(current_buf_pos)); j = j.inc()) {
                                            current_buf_pos[System.Array.index(System.Int64.toNumber(j), current_buf_pos)] = current_pos[System.Array.index(System.Int64.toNumber(j), current_pos)].add(bufferpos[System.Array.index(System.Int64.toNumber(j), bufferpos)]);
                                            current_mem_pos[System.Array.index(System.Int64.toNumber(j), current_mem_pos)] = current_pos[System.Array.index(System.Int64.toNumber(j), current_pos)].add(memorypos[System.Array.index(System.Int64.toNumber(j), memorypos)]);
                                        }

                                        $task2 = this.WriteImpl(current_mem_pos, buffer, current_buf_pos, block_count.v);
                                        $step = 8;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 8: {
                                        $task2.getAwaitedResult();
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        i = (i + 1) >>> 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 10: {
                                        if (split_remainder.v !== 0) {
                                            $step = 11;
                                            continue;
                                        } 
                                        $step = 13;
                                        continue;
                                    }
                                    case 11: {
                                        current_pos[System.Array.index(split_dim.v, current_pos)] = split_dim_block.v.mul(Bridge.Int.clipu64(splits_count.v));
                                        current_buf_pos1 = System.Array.init(bufferpos.length, System.UInt64(0), System.UInt64);
                                        current_mem_pos1 = System.Array.init(bufferpos.length, System.UInt64(0), System.UInt64);

                                        for (var j1 = System.Int64(0); j1.lt(System.Array.getLongLength(current_buf_pos1)); j1 = j1.inc()) {
                                            current_buf_pos1[System.Array.index(System.Int64.toNumber(j1), current_buf_pos1)] = current_pos[System.Array.index(System.Int64.toNumber(j1), current_pos)].add(bufferpos[System.Array.index(System.Int64.toNumber(j1), bufferpos)]);
                                            current_mem_pos1[System.Array.index(System.Int64.toNumber(j1), current_mem_pos1)] = current_pos[System.Array.index(System.Int64.toNumber(j1), current_pos)].add(memorypos[System.Array.index(System.Int64.toNumber(j1), memorypos)]);
                                        }

                                        $task3 = this.WriteImpl(current_mem_pos1, buffer, current_buf_pos1, block_count_edge.v);
                                        $step = 12;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 12: {
                                        $task3.getAwaitedResult();
                                        $step = 13;
                                        continue;
                                    }
                                    case 13: {
                                        if (split_dim.v === (((count.length - 1) | 0))) {
                                            done = true;
                                        } else {
                                            current_pos[System.Array.index(((split_dim.v + 1) | 0), current_pos)] = current_pos[System.Array.index(((split_dim.v + 1) | 0), current_pos)].inc();
                                            if (current_pos[System.Array.index(((split_dim.v + 1) | 0), current_pos)].gte(count[System.Array.index(((split_dim.v + 1) | 0), count)])) {
                                                if (((split_dim.v + 1) | 0) === (((count.length - 1) | 0))) {
                                                    done = true;
                                                } else {
                                                    current_pos[System.Array.index(((split_dim.v + 1) | 0), current_pos)] = System.UInt64(0);
                                                    for (var j2 = (split_dim.v + 2) | 0; j2 < count.length; j2 = (j2 + 1) | 0) {
                                                        if (current_pos[System.Array.index(((j2 - 1) | 0), current_pos)].gte(count[System.Array.index(((j2 - 1) | 0), count)])) {
                                                            current_pos[System.Array.index(j2, current_pos)] = current_pos[System.Array.index(j2, current_pos)].inc();
                                                        }
                                                    }
                                                    if (current_pos[System.Array.index(System.Int64.toNumber(System.Array.getLongLength(count).sub(System.Int64(1))), current_pos)].gte(count[System.Array.index(System.Int64.toNumber(System.Array.getLongLength(count).sub(System.Int64(1))), count)])) {
                                                        done = true;
                                                    }
                                                }
                                            }
                                        }

                                        $step = 4;
                                        continue;
                                    }

                                    case 15: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MultiDimArrayMemoryServiceSkelBase", {
        fields: {
            m_MemberName: null,
            skel: null,
            direction: 0,
            element_type: 0,
            element_size: 0
        },
        props: {
            MemberName: {
                get: function () {
                    return this.m_MemberName;
                }
            }
        },
        ctors: {
            ctor: function (membername, skel, element_type, element_size, direction) {
                this.$initialize();
                this.m_MemberName = membername;
                this.skel = skel;
                this.direction = direction;
                this.element_type = element_type;
                this.element_size = element_size;
            }
        },
        methods: {
            CallMemoryFunction: function (m, e, mem) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $task3, 
                    $taskResult3, 
                    $task4, 
                    $taskResult4, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $t, 
                    memorypos, 
                    count, 
                    elem_count, 
                    data, 
                    ret, 
                    memorypos1, 
                    count1, 
                    elem_count1, 
                    data1, 
                    ret1, 
                    param, 
                    ret2, 
                    l, 
                    ret3, 
                    l1, 
                    ret4, 
                    MaxTransferSize, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14], $step);
                                switch ($step) {
                                    case 0: {
                                        $t = m.EntryType;
                                        if ($t === RobotRaconteurWeb.MessageEntryType.MemoryRead) {
                                            $step = 1;
                                            continue;
                                        }
                                        else if ($t === RobotRaconteurWeb.MessageEntryType.MemoryWrite) {
                                            $step = 3;
                                            continue;
                                        }
                                        else if ($t === RobotRaconteurWeb.MessageEntryType.MemoryGetParam) {
                                            $step = 5;
                                            continue;
                                        }
                                        else  {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 14;
                                        continue;
                                    }
                                    case 1: {
                                        if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.writeonly) {
                                            throw new RobotRaconteurWeb.WriteOnlyMemberException("Write only member");
                                        }

                                        memorypos = m.FindElement("memorypos").CastData(System.Array.type(System.UInt64));
                                        count = m.FindElement("count").CastData(System.Array.type(System.UInt64));
                                        elem_count = System.Linq.Enumerable.from(count, System.UInt64).aggregate(System.UInt64(1), function (x, y) {
                                            return x.mul(y);
                                        });
                                        $task1 = this.DoRead(memorypos, System.Array.init(count.length, System.UInt64(0), System.UInt64), count, elem_count, mem);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        data = $taskResult1;
                                        ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryReadRet, this.MemberName);
                                        ret.AddElement$1("memorypos", memorypos);
                                        ret.AddElement$1("count", count);
                                        ret.AddElement$1("data", data);
                                        $tcs.setResult(ret);
                                        return;
                                    }
                                    case 3: {
                                        if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.readonly_) {
                                            throw new RobotRaconteurWeb.ReadOnlyMemberException("Read only member");
                                        }

                                        memorypos1 = m.FindElement("memorypos").CastData(System.Array.type(System.UInt64));
                                        count1 = m.FindElement("count").CastData(System.Array.type(System.UInt64));
                                        elem_count1 = System.Linq.Enumerable.from(count1, System.UInt64).aggregate(System.UInt64(1), function (x, y) {
                                            return x.mul(y);
                                        });
                                        data1 = m.FindElement("data").Data;
                                        $task2 = this.DoWrite(memorypos1, data1, System.Array.init(count1.length, System.UInt64(0), System.UInt64), count1, elem_count1, mem);
                                        $step = 4;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $task2.getAwaitedResult();
                                        ret1 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryReadRet, this.MemberName);
                                        ret1.AddElement$1("memorypos", memorypos1);
                                        ret1.AddElement$1("count", count1);
                                        $tcs.setResult(ret1);
                                        return;
                                    }
                                    case 5: {
                                        param = m.FindElement("parameter").CastData(System.String);
                                        if (Bridge.referenceEquals(param, "Dimensions")) {
                                            $step = 6;
                                            continue;
                                        } 
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        ret2 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParamRet, this.MemberName);
                                        $task3 = mem.GetDimensions();
                                        $step = 7;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 7: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        l = $taskResult3;
                                        ret2.AddElement$1("return", l);
                                        $tcs.setResult(ret2);
                                        return;
                                    }
                                    case 8: {
                                        if (Bridge.referenceEquals(param, "DimCount")) {
                                            $step = 9;
                                            continue;
                                        } else  {
                                            $step = 11;
                                            continue;
                                        }
                                    }
                                    case 9: {
                                        ret3 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParamRet, this.MemberName);
                                        $task4 = mem.GetDimCount();
                                        $step = 10;
                                        if ($task4.isCompleted()) {
                                            continue;
                                        }
                                        $task4.continue($asyncBody);
                                        return;
                                    }
                                    case 10: {
                                        $taskResult4 = $task4.getAwaitedResult();
                                        l1 = $taskResult4;
                                        ret3.AddElement$1("return", l1);
                                        $tcs.setResult(ret3);
                                        return;
                                    }
                                    case 11: {
                                        if (Bridge.referenceEquals(param, "MaxTransferSize")) {
                                            ret4 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.MemoryGetParamRet, this.MemberName);
                                            MaxTransferSize = this.skel.rr_node.MemoryMaxTransferSize;
                                            ret4.AddElement$1("return", Bridge.box(MaxTransferSize, System.UInt32));
                                            $tcs.setResult(ret4);
                                            return;

                                        } else {
                                            throw new System.InvalidOperationException.$ctor1("Unknown parameter");
                                        }
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    case 13: {
                                        throw new RobotRaconteurWeb.ProtocolException("Invalid command");
                                    }
                                    case 14: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.NamedMultiDimArray", {
        fields: {
            Dims: null,
            namedarray_array: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.Dims = System.Array.init([0], System.UInt32);
            },
            $ctor1: function (dims, array) {
                this.$initialize();
                this.Dims = dims;
                this.namedarray_array = array;
            }
        },
        methods: {
            RetrieveSubArray: function (memorypos, buffer, bufferpos, count) {

                var mema = this;
                var memb = buffer;

                var iter = RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter.BeginIter(mema.Dims, memorypos, memb.Dims, bufferpos, count);

                var indexa = { };
                var indexb = { };
                var len = { };

                while (iter.Next(indexa, indexb, len)) {
                    System.Array.copy(mema.namedarray_array, System.Int64(indexa.v).toNumber(), memb.namedarray_array, System.Int64(indexb.v).toNumber(), System.Int64(len.v).toNumber());
                }

            },
            AssignSubArray: function (memorypos, buffer, bufferpos, count) {
                var mema = this;
                var memb = buffer;

                var iter = RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter.BeginIter(mema.Dims, memorypos, memb.Dims, bufferpos, count);

                var indexa = { };
                var indexb = { };
                var len = { };

                while (iter.Next(indexa, indexb, len)) {
                    System.Array.copy(memb.namedarray_array, System.Int64(indexb.v).toNumber(), mema.namedarray_array, System.Int64(indexa.v).toNumber(), System.Int64(len.v).toNumber());
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.NodeDiscoveryInfo", {
        fields: {
            NodeID: null,
            NodeName: null,
            URLs: null
        },
        ctors: {
            init: function () {
                this.NodeName = "";
                this.URLs = new (System.Collections.Generic.List$1(RobotRaconteurWeb.NodeDiscoveryInfoURL)).ctor();
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.NodeDiscoveryInfoURL", {
        fields: {
            URL: null,
            LastAnnounceTime: null
        },
        ctors: {
            init: function () {
                this.LastAnnounceTime = System.DateTime.getDefaultValue();
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.NodeID", {
        statics: {
            props: {
                Any: {
                    get: function () {
                        return new RobotRaconteurWeb.NodeID.ctor(System.Array.init(16, 0, System.Byte));
                    }
                }
            },
            methods: {
                TryParse$1: function (stringid, bytes) {
                    if (Bridge.referenceEquals(stringid, "{0}")) {
                        bytes.v = System.Array.init(16, 0, System.Byte);
                        return true;
                    }

                    bytes.v = null;
                    var r = new System.Text.RegularExpressions.Regex.ctor("\\{?([a-fA-F0-9]{8})-([a-fA-F0-9]{4})-([a-fA-F0-9]{4})-([a-fA-F0-9]{4})-([a-fA-F0-9]{12})\\}?");
                    var res = r.match(stringid);
                    if (!res.getSuccess()) {
                        return false;
                    }
                    var res1 = "";
                    for (var i = 1; i < 6; i = (i + 1) | 0) {
                        res1 = (res1 || "") + (res.getGroups().get(i).getValue() || "");
                    }
                    bytes.v = System.Array.init(16, 0, System.Byte);
                    for (var i1 = 0; i1 < 16; i1 = (i1 + 1) | 0) {
                        bytes.v[System.Array.index(i1, bytes.v)] = System.Convert.toNumberInBase(res1.substr(Bridge.Int.mul(i1, 2), 2), 16, 6);
                    }
                    return true;
                },
                TryParse: function (stringid, nodeid) {
                    var bytes = { };
                    nodeid.v = null;
                    if (!RobotRaconteurWeb.NodeID.TryParse$1(stringid, bytes)) {
                        return false;
                    }
                    nodeid.v = new RobotRaconteurWeb.NodeID.ctor(bytes.v);
                    return true;
                },
                NewUniqueID: function () {
                    var guid = System.Guid.NewGuid().ToString("B");
                    return new RobotRaconteurWeb.NodeID.$ctor1(guid);
                },
                op_Explicit: function (i) {
                    return i.ToByteArray();
                },
                op_Equality: function (id1, id2) {
                    if (id1 == null && id2 == null) {
                        return true;
                    }
                    if ((id1 == null && id2 != null) || (id1 != null && id2 == null)) {
                        return false;
                    }

                    return System.Linq.Enumerable.from(id1.id, System.Byte).sequenceEqual(id2.id);
                },
                op_Inequality: function (id1, id2) {
                    if (id1 == null && id2 == null) {
                        return false;
                    }
                    if ((id1 == null && id2 != null) || (id1 != null && id2 == null)) {
                        return true;
                    }

                    return !System.Linq.Enumerable.from(id1.id, System.Byte).sequenceEqual(id2.id);
                }
            }
        },
        fields: {
            id: null
        },
        props: {
            IsAnyNode: {
                get: function () {
                    return System.Linq.Enumerable.from(this.id, System.Byte).all(function (x) {
                            return x === 0;
                        });
                }
            }
        },
        ctors: {
            ctor: function (id) {
                this.$initialize();
                if (id.length !== 16) {
                    throw new System.InvalidOperationException.$ctor1("Node ID must be 128 bits long");
                }
                this.id = id;
            },
            $ctor1: function (id) {
                this.$initialize();
                var id1 = { v : null };
                if (RobotRaconteurWeb.NodeID.TryParse$1(id, id1)) {
                    this.id = id1.v;
                    return;
                }

                if (id1.v == null) {
                    throw new System.InvalidOperationException.$ctor1("Invalid format for NodeID");
                }
                this.id = id1.v;
            }
        },
        methods: {
            ToByteArray: function () {
                var bid = System.Array.init(16, 0, System.Byte);
                System.Array.copy(this.id, 0, bid, 0, 16);
                return bid;
            },
            toString: function () {
                var hexvals = System.Linq.Enumerable.from(this.id, System.Byte).select(function (x) {
                        return System.String.format("{0:x2}", [Bridge.box(x, System.Byte)]);
                    }).ToArray(System.String);
                var g1 = hexvals.slice(0, 0 + 4).join("");
                var g2 = hexvals.slice(4, 4 + 2).join("");
                var g3 = hexvals.slice(6, 6 + 2).join("");
                var g4 = hexvals.slice(8, 8 + 2).join("");
                var g5 = hexvals.slice(10, 10 + 6).join("");

                return "{" + (System.Array.init([g1, g2, g3, g4, g5], System.String).join("-") || "") + "}";
            },
            equals: function (obj) {
                if (obj == null) {
                    return false;
                }
                if (!(Bridge.is(obj, RobotRaconteurWeb.NodeID))) {
                    return false;
                }
                return RobotRaconteurWeb.NodeID.op_Equality(this, Bridge.cast(obj, RobotRaconteurWeb.NodeID));
            },
            getHashCode: function () {
                var $t;
                var sum = 0;
                $t = Bridge.getEnumerator(this.id);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        sum = (sum + b) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
                return sum;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.NodeInfo2", {
        fields: {
            NodeID: null,
            NodeName: null,
            ConnectionURL: null
        }
    });

    Bridge.define("RobotRaconteurWeb.ParseConnectionUrlResult", {
        fields: {
            scheme: null,
            host: null,
            port: 0,
            path: null,
            nodeid: null,
            nodename: null,
            service: null
        },
        ctors: {
            init: function () {
                this.port = 0;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.PeriodicTask", {
        statics: {
            methods: {
                Run$1: function (action, period, cancellationToken) {
                    var $step = 0,
                        $task1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([1,2,3,4], $step);
                                    switch ($step) {

                                        case 1: {
                                            if ( !cancellationToken.getIsCancellationRequested() ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $task1 = System.Threading.Tasks.Task.delay(period, cancellationToken);
                                            $step = 3;
                                            if ($task1.isCompleted()) {
                                                continue;
                                            }
                                            $task1.continue($asyncBody);
                                            return;
                                        }
                                        case 3: {
                                            $task1.getAwaitedResult();
                                            if (cancellationToken.getIsCancellationRequested()) {
                                                $step = 4;
                                                continue;
                                            }
                                            action();

                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                Run: function (action, period) {
                    return RobotRaconteurWeb.PeriodicTask.Run$1(action, period, System.Threading.CancellationToken.none);
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Pipe$1", function (T) { return {
        statics: {
            fields: {
                ANY_INDEX: 0
            },
            ctors: {
                init: function () {
                    this.ANY_INDEX = -1;
                }
            }
        },
        fields: {
            rawelements: false
        },
        ctors: {
            init: function () {
                this.rawelements = false;
            },
            ctor: function () {
                this.$initialize();
                if (Bridge.referenceEquals(T, RobotRaconteurWeb.MessageElement)) {
                    this.rawelements = true;
                }

            }
        },
        methods: {
            DispatchPacketAck: function (me, e) {
                var $t;
                var pnum = ($t = me.CastData(System.Array.type(System.UInt32)))[System.Array.index(0, $t)];
                e.PipePacketAckReceived(pnum);
            },
            DispatchPacket: function (me, e, packetnumber) {
                var $t, $t1;
                var index = System.Int32.parse(me.ElementName);
                var elems = Bridge.cast(me.Data, RobotRaconteurWeb.MessageElementMap$1(System.String)).Elements;
                packetnumber.v = ($t = (RobotRaconteurWeb.MessageElement.FindElement$1(elems, "packetnumber").CastData(System.Array.type(System.UInt32))))[System.Array.index(0, $t)];
                var data;
                if (!this.rawelements) {
                    data = this.UnpackVarType(RobotRaconteurWeb.MessageElement.FindElement$1(elems, "packet"));
                } else {
                    data = RobotRaconteurWeb.MessageElement.FindElement$1(elems, "packet");
                }

                if (Bridge.is(data, Array)) {
                    if (Bridge.isArray(null, T)) {
                        e.PipePacketReceived(Bridge.cast(Bridge.unbox(data, T), T), packetnumber.v);
                    } else {
                        e.PipePacketReceived(($t1 = Bridge.cast(data, System.Array.type(T)))[System.Array.index(0, $t1)], packetnumber.v);
                    }
                } else {
                    e.PipePacketReceived(Bridge.cast(Bridge.unbox(data, T), T), packetnumber.v);
                }

                var requestack = (System.Linq.Enumerable.from(elems, RobotRaconteurWeb.MessageElement).any(function (x) {
                        return Bridge.referenceEquals(x.ElementName, "requestack");
                    }));
                return requestack;
            },
            PackPacket: function (data, index, packetnumber, requestack) {
                var elems = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                elems.add(new RobotRaconteurWeb.MessageElement.$ctor1("packetnumber", Bridge.box(packetnumber, System.UInt32)));
                if (!this.rawelements) {
                    var pdata = this.PackVarType(data);
                    elems.add(new RobotRaconteurWeb.MessageElement.$ctor1("packet", pdata));
                } else {
                    var pme = Bridge.cast(data, RobotRaconteurWeb.MessageElement);
                    pme.ElementName = "packet";
                    elems.add(pme);
                }

                if (requestack) {
                    elems.add(new RobotRaconteurWeb.MessageElement.$ctor1("requestack", System.Array.init([1], System.Int32)));
                }

                var delems = new (RobotRaconteurWeb.MessageElementMap$1(System.String))(elems);

                var me = new RobotRaconteurWeb.MessageElement.$ctor1(Bridge.toString(index), delems);

                return me;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.Pipe$1.PipeEndpoint", function (T) { return {
        $kind: "nested class",
        fields: {
            send_packet_number: 0,
            recv_packet_number: 0,
            parent: null,
            index: 0,
            endpoint: null,
            RequestPacketAck: false,
            send_mutex: null,
            out_of_order_packets: null,
            recv_lock: null,
            recv_packets: null,
            close_callback: null
        },
        events: {
            PacketReceivedEvent: null,
            PacketAckReceivedEvent: null
        },
        props: {
            Index: {
                get: function () {
                    return this.index;
                }
            },
            Endpoint: {
                get: function () {
                    return this.endpoint.LocalEndpoint;
                }
            },
            Available: {
                get: function () {
                    this.recv_lock;
                    {
                        return this.recv_packets.Count;
                    }
                }
            },
            PipeCloseCallback: {
                get: function () {
                    return this.close_callback;
                },
                set: function (value) {
                    this.close_callback = value;
                }
            }
        },
        ctors: {
            init: function () {
                this.send_packet_number = 0;
                this.recv_packet_number = 0;
                this.RequestPacketAck = false;
                this.send_mutex = new RobotRaconteurWeb.AsyncMutex();
                this.out_of_order_packets = new (System.Collections.Generic.Dictionary$2(System.UInt32,T)).ctor();
                this.recv_lock = { };
                this.recv_packets = new (System.Collections.Generic.Queue$1(T)).ctor();
            },
            ctor: function (parent, index, endpoint) {
                if (endpoint === void 0) { endpoint = null; }

                this.$initialize();
                this.parent = parent;
                this.index = index;
                this.endpoint = endpoint;
            }
        },
        methods: {
            SendPacket: function (packet, cancel) {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mutex, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        mutex = this.send_mutex.Enter();
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = mutex;
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        this.send_packet_number = (this.send_packet_number < 4294967295) ? ((this.send_packet_number + 1) >>> 0) : 0;

                                        $task2 = this.parent.SendPipePacket(packet, this.index, this.send_packet_number, this.RequestPacketAck, this.endpoint, cancel);
                                        $step = 3;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task2.getAwaitedResult();
                                        $returnValue = this.send_packet_number;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        this.send_mutex.Exit(mutex);

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 1 && $step <= 3) {
                                $step = 4;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Close: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        $task1 = this.parent.Close(this);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            increment_packet_number: function (packetnum) {
                return (packetnum < 4294967295) ? ((packetnum + 1) >>> 0) : 0;

            },
            PipePacketReceived: function (packet, packetnum) {
                this.recv_lock;
                {
                    if (packetnum === this.increment_packet_number(this.recv_packet_number)) {
                        this.recv_packets.Enqueue(packet);
                        this.recv_packet_number = this.increment_packet_number(this.recv_packet_number);
                        if (this.out_of_order_packets.Count > 0) {
                            while (System.Linq.Enumerable.from(this.out_of_order_packets.Keys, System.UInt32).contains(this.increment_packet_number(this.recv_packet_number))) {
                                this.recv_packet_number = this.increment_packet_number(this.recv_packet_number);
                                var opacket = this.out_of_order_packets.getItem(this.recv_packet_number);
                                this.recv_packets.Enqueue(opacket);
                                this.out_of_order_packets.remove(this.recv_packet_number);
                            }
                        }

                        if (!Bridge.staticEquals(this.PacketReceivedEvent, null)) {
                            try {
                                this.PacketReceivedEvent(this);
                            } catch ($e1) {
                                $e1 = System.Exception.create($e1);
                            }
                        }
                    } else {
                        this.out_of_order_packets.add(packetnum, packet);
                    }
                }
            },
            PipePacketAckReceived: function (packetnum) {
                this.PacketAckReceivedEvent(this, packetnum);
            },
            PeekNextPacket: function () {
                this.recv_lock;
                {
                    return this.recv_packets.Peek();
                }
            },
            ReceivePacket: function () {
                this.recv_lock;
                {
                    return this.recv_packets.Dequeue();
                }
            },
            RemoteClose: function () {
                if (!Bridge.staticEquals(this.close_callback, null)) {
                    try {
                        this.close_callback(this);
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                }
                ;
                try {
                    RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.Close());
                } catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PipeBroadcaster$1", function (T) { return {
        fields: {
            pipe: null,
            endpoints: null,
            maximum_backlog: 0
        },
        props: {
            Pipe: {
                get: function () {
                    return this.pipe;
                }
            }
        },
        ctors: {
            init: function () {
                this.endpoints = new (System.Collections.Generic.List$1(RobotRaconteurWeb.PipeBroadcaster$1.connected_endpoint(T))).ctor();
            },
            ctor: function (pipe, maximum_backlog) {
                if (maximum_backlog === void 0) { maximum_backlog = -1; }

                this.$initialize();
                this.pipe = pipe;
                this.maximum_backlog = maximum_backlog;
                pipe.PipeConnectCallback = Bridge.fn.cacheBind(this, this.EndpointConnected);
            }
        },
        methods: {
            EndpointConnected: function (ep) {
                this.endpoints;
                {
                    var cep = new (RobotRaconteurWeb.PipeBroadcaster$1.connected_endpoint(T))(ep);
                    ep.PipeCloseCallback = Bridge.fn.bind(this, function (ep1) {
                        this.EndpointClosed(cep);
                    });
                    ep.addPacketReceivedEvent(Bridge.fn.cacheBind(this, this.PacketReceived));
                    ep.addPacketAckReceivedEvent(Bridge.fn.bind(this, function (ep1, pnum) {
                        this.PacketAckReceived(cep, pnum);
                    }));
                    ep.RequestPacketAck = true;
                    this.endpoints.add(cep);
                }
            },
            EndpointClosed: function (ep) {
                this.endpoints;
                {

                    try {
                        this.endpoints.remove(ep);
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                }
            },
            PacketReceived: function (ep) {
                this.endpoints;
                {
                    try {
                        while (ep.Available > 0) {
                            ep.ReceivePacket();
                        }
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                }
            },
            PacketAckReceived: function (ep, pnum) {
                this.endpoints;
                {
                    try {
                        if (System.Linq.Enumerable.from(ep.backlog, System.UInt32).count(function (x) {
                                return x === pnum;
                            }) === 0) {
                            ep.forward_backlog.add(pnum);
                        } else {
                            ep.backlog.remove(pnum);
                        }
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                }
            },
            AsyncSendPacket: function (packet, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    endpoints1, 
                    eps, 
                    $t, 
                    cep, 
                    ep, 
                    t, 
                    send_key, 
                    $e1, 
                    i, 
                    t1, 
                    cep1, 
                    pnum, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,7,8,9,10,11,13,14,15], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        endpoints1 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.PipeBroadcaster$1.connected_endpoint(T))).ctor();
                                        this.endpoints;
                                        {
                                            this.endpoints.ForEach(function (item) {
                                                endpoints1.add(item);
                                            });
                                        }

                                        eps = new (System.Collections.Generic.List$1(System.Tuple$3(System.Threading.Tasks.Task$1(System.UInt32),RobotRaconteurWeb.PipeBroadcaster$1.connected_endpoint(T),System.Object))).ctor();

                                        $t = Bridge.getEnumerator(endpoints1);
                                        try {
                                            while ($t.moveNext()) {
                                                cep = $t.Current;
                                                try {
                                                    ep = cep.ep;
                                                    if (ep == null) {
                                                        this.endpoints;
                                                        {
                                                            this.endpoints.remove(cep);

                                                        }
                                                        continue;
                                                    }


                                                    this.endpoints;
                                                    {
                                                        if (this.maximum_backlog !== -1 && ((cep.backlog.Count + cep.active_sends.Count) | 0) > this.maximum_backlog) {
                                                            continue;
                                                        }
                                                    }
                                                    t = ep.SendPacket(packet, cancel);
                                                    send_key = { };

                                                    this.endpoints;
                                                    {
                                                        cep.active_sends.add(send_key);
                                                    }
                                                    eps.add({ Item1: t, Item2: cep, Item3: send_key });
                                                } catch ($e1) {
                                                    $e1 = System.Exception.create($e1);
                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$Dispose();
                                            }
                                        }

                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( eps.Count > 0 ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 15;
                                        continue;
                                    }
                                    case 2: {
                                        $task1 = System.Threading.Tasks.Task.whenAny.apply(System.Threading.Tasks.Task, System.Linq.Enumerable.from(eps, System.Tuple$3(System.Threading.Tasks.Task$1(System.UInt32),RobotRaconteurWeb.PipeBroadcaster$1.connected_endpoint(T),System.Object)).select(function (x) {
                                            return x.Item1;
                                        }).ToArray(System.Threading.Tasks.Task$1(System.UInt32)));
                                        $step = 3;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        i = 0;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        if ( i < eps.Count ) {
                                            $step = 5;
                                            continue;
                                        }
                                        $step = 14;
                                        continue;
                                    }
                                    case 5: {
                                        t1 = eps.getItem(i).Item1;
                                        cep1 = eps.getItem(i).Item2;
                                        if (t1.isCompleted() || t1.isFaulted() || t1.isCanceled()) {
                                            $step = 6;
                                            continue;
                                        } else  {
                                            $step = 11;
                                            continue;
                                        }
                                    }

                                    case 7: {
                                        $task2 = t1;
                                        $step = 8;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 8: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        pnum = { v : $taskResult2 };
                                        this.endpoints;
                                        {
                                            cep1.active_sends.remove(eps.getItem(i).Item3);
                                            if (this.maximum_backlog !== -1) {
                                                if (System.Linq.Enumerable.from(cep1.forward_backlog, System.UInt32).count((function ($me, pnum) {
                                                    return function (x) {
                                                        return x === pnum.v;
                                                    };
                                                })(this, pnum)) !== 0) {
                                                    cep1.forward_backlog.remove(pnum.v);
                                                } else {
                                                    cep1.backlog.add(pnum.v);
                                                }
                                            }
                                        }
                                        $step = 10;
                                        continue;
                                    }
                                    case 9: {
                                        this.endpoints;
                                        {
                                            this.endpoints.remove(cep1);
                                        }
                                        $async_e = null;
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {
                                        eps.removeAt(i);
                                        $step = 12;
                                        continue;
                                    }
                                    case 11: {
                                        i = (i + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }

                                    case 13: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 14: {
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 15: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 7 && $step <= 8 ) {
                                $step = 9;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PipeBroadcaster$1.connected_endpoint", function (T) { return {
        $kind: "nested class",
        fields: {
            ep: null,
            backlog: null,
            forward_backlog: null,
            sending: false,
            active_sends: null
        },
        ctors: {
            init: function () {
                this.backlog = new (System.Collections.Generic.List$1(System.UInt32)).ctor();
                this.forward_backlog = new (System.Collections.Generic.List$1(System.UInt32)).ctor();
                this.sending = false;
                this.active_sends = new (System.Collections.Generic.List$1(System.Object)).ctor();
            },
            ctor: function (ep) {
                this.$initialize();
                this.ep = ep;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodMultiDimArray", {
        fields: {
            Dims: null,
            pod_array: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.Dims = System.Array.init([0], System.UInt32);
            },
            $ctor1: function (dims, array) {
                this.$initialize();
                this.Dims = dims;
                this.pod_array = array;
            }
        },
        methods: {
            RetrieveSubArray: function (memorypos, buffer, bufferpos, count) {

                var mema = this;
                var memb = buffer;

                var iter = RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter.BeginIter(mema.Dims, memorypos, memb.Dims, bufferpos, count);

                var indexa = { };
                var indexb = { };
                var len = { };

                while (iter.Next(indexa, indexb, len)) {
                    System.Array.copy(mema.pod_array, System.Int64(indexa.v).toNumber(), memb.pod_array, System.Int64(indexb.v).toNumber(), System.Int64(len.v).toNumber());
                }

            },
            AssignSubArray: function (memorypos, buffer, bufferpos, count) {
                var mema = this;
                var memb = buffer;

                var iter = RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter.BeginIter(mema.Dims, memorypos, memb.Dims, bufferpos, count);

                var indexa = { };
                var indexb = { };
                var len = { };

                while (iter.Next(indexa, indexb, len)) {
                    System.Array.copy(memb.pod_array, System.Int64(indexb.v).toNumber(), mema.pod_array, System.Int64(indexa.v).toNumber(), System.Int64(len.v).toNumber());
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurExceptionUtil", {
        statics: {
            methods: {
                ExceptionToMessageEntry: function (exception, entry) {


                    if (Bridge.is(exception, System.InvalidOperationException)) {
                        entry.Error = RobotRaconteurWeb.MessageErrorType.InvalidOperation;
                        entry.AddElement$1("errorname", "RobotRaconteur.InvalidOperation");
                        entry.AddElement$1("errorstring", exception.Message);
                        return;
                    }

                    if (Bridge.is(exception, System.ArgumentException)) {
                        entry.Error = RobotRaconteurWeb.MessageErrorType.InvalidArgument;
                        entry.AddElement$1("errorname", "RobotRaconteur.InvalidArgument");
                        entry.AddElement$1("errorstring", exception.Message);
                        return;
                    }

                    if (Bridge.is(exception, System.NullReferenceException)) {
                        entry.Error = RobotRaconteurWeb.MessageErrorType.NullValue;
                        entry.AddElement$1("errorname", "RobotRaconteur.NullValue");
                        entry.AddElement$1("errorstring", exception.Message);
                        return;
                    }

                    if (Bridge.is(exception, System.NotImplementedException)) {
                        entry.Error = RobotRaconteurWeb.MessageErrorType.NotImplementedError;
                        entry.AddElement$1("errorname", "RobotRaconteur.NotImplementedError");
                        entry.AddElement$1("errorstring", exception.Message);
                        return;
                    }


                    if (Bridge.is(exception, RobotRaconteurWeb.RobotRaconteurException)) {
                        var r = Bridge.cast(exception, RobotRaconteurWeb.RobotRaconteurException);
                        entry.Error = r.errorCode;
                        entry.AddElement$1("errorname", r.error);
                        entry.AddElement$1("errorstring", r.Message);

                    } else {
                        entry.Error = RobotRaconteurWeb.MessageErrorType.RemoteError;
                        entry.AddElement$1("errorname", Bridge.getTypeName(Bridge.getType(exception)));
                        entry.AddElement$1("errorstring", exception.Message);


                    }

                },
                MessageEntryToException: function (entry) {
                    var error_code = entry.Error;
                    var errorname = entry.FindElement("errorname").CastData(System.String);
                    var errorstring = entry.FindElement("errorstring").CastData(System.String);

                    switch (error_code) {
                        case RobotRaconteurWeb.MessageErrorType.RemoteError: 
                            var e1 = new RobotRaconteurWeb.RobotRaconteurRemoteException(errorname, errorstring);
                            return e1;
                        case RobotRaconteurWeb.MessageErrorType.ConnectionError: 
                            return new RobotRaconteurWeb.ConnectionException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ProtocolError: 
                            return new RobotRaconteurWeb.ProtocolException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ServiceNotFound: 
                            return new RobotRaconteurWeb.ServiceNotFoundException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ObjectNotFound: 
                            return new RobotRaconteurWeb.ObjectNotFoundException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.InvalidEndpoint: 
                            return new RobotRaconteurWeb.InvalidEndpointException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.EndpointCommunicationFatalError: 
                            return new RobotRaconteurWeb.EndpointCommunicationFatalException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.NodeNotFound: 
                            return new RobotRaconteurWeb.NodeNotFoundException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ServiceError: 
                            return new RobotRaconteurWeb.ServiceException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.MemberNotFound: 
                            return new RobotRaconteurWeb.MemberNotFoundException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.MemberFormatMismatch: 
                            return new RobotRaconteurWeb.MemberFormatMismatchException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.DataTypeMismatch: 
                            return new RobotRaconteurWeb.DataTypeMismatchException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.DataTypeError: 
                            return new RobotRaconteurWeb.DataTypeException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.DataSerializationError: 
                            return new RobotRaconteurWeb.DataSerializationException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.MessageEntryNotFound: 
                            return new RobotRaconteurWeb.MessageEntryNotFoundException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.MessageElementNotFound: 
                            return new RobotRaconteurWeb.MessageElementNotFoundException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.UnknownError: 
                            return new RobotRaconteurWeb.UnknownException(errorname, errorstring);
                        case RobotRaconteurWeb.MessageErrorType.InvalidOperation: 
                            return new System.InvalidOperationException.$ctor1(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.InvalidArgument: 
                            return new System.ArgumentException.$ctor1(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.OperationFailed: 
                            return new RobotRaconteurWeb.OperationFailedException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.NullValue: 
                            return new System.NullReferenceException.$ctor1(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.InternalError: 
                            return new RobotRaconteurWeb.InternalErrorException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.SystemResourcePermissionDenied: 
                            return new RobotRaconteurWeb.SystemResourcePermissionDeniedException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.OutOfSystemResource: 
                            return new RobotRaconteurWeb.OutOfSystemResourceException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.SystemResourceError: 
                            return new RobotRaconteurWeb.SystemResourceException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ResourceNotFound: 
                            return new RobotRaconteurWeb.ResourceNotFoundException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.IOError: 
                            return new RobotRaconteurWeb.IOException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.BufferLimitViolation: 
                            return new RobotRaconteurWeb.BufferLimitViolationException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ServiceDefinitionError: 
                            return new RobotRaconteurWeb.ServiceDefinitionException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.OutOfRange: 
                            return new RobotRaconteurWeb.OutOfRangeException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.KeyNotFound: 
                            return new RobotRaconteurWeb.KeyNotFoundException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.RequestTimeout: 
                            return new RobotRaconteurWeb.RequestTimeoutException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ReadOnlyMember: 
                            return new RobotRaconteurWeb.ReadOnlyMemberException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.WriteOnlyMember: 
                            return new RobotRaconteurWeb.WriteOnlyMemberException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.NotImplementedError: 
                            return new System.NotImplementedException.$ctor1(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.MemberBusy: 
                            return new RobotRaconteurWeb.MemberBusyException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ValueNotSet: 
                            return new RobotRaconteurWeb.ValueNotSetException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.AuthenticationError: 
                            return new RobotRaconteurWeb.AuthenticationException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.ObjectLockedError: 
                            return new RobotRaconteurWeb.ObjectLockedException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.PermissionDenied: 
                            return new RobotRaconteurWeb.PermissionDeniedException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.AbortOperation: 
                            return new RobotRaconteurWeb.AbortOperationException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.OperationAborted: 
                            return new RobotRaconteurWeb.OperationAbortedException(errorstring);
                        case RobotRaconteurWeb.MessageErrorType.StopIteration: 
                            return new RobotRaconteurWeb.StopIterationException(errorstring);
                    }

                    return new RobotRaconteurWeb.RobotRaconteurException.$ctor1(error_code, errorname, errorstring);

                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurNamedArrayElementTypeAndCount", {
        inherits: [System.Attribute],
        fields: {
            RRType: null,
            ElementArrayType: null,
            ElementArrayCount: 0
        },
        ctors: {
            ctor: function (rr_type, element_type, element_array_count) {
                this.$initialize();
                System.Attribute.ctor.call(this);
                this.RRType = rr_type;
                this.ElementArrayType = element_type;
                this.ElementArrayCount = element_array_count;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurNode", {
        statics: {
            fields: {
                Version: null,
                sp: null
            },
            props: {
                s: {
                    get: function () {
                        if (RobotRaconteurWeb.RobotRaconteurNode.sp == null) {
                            RobotRaconteurWeb.RobotRaconteurNode.sp = new RobotRaconteurWeb.RobotRaconteurNode();
                        }
                        return RobotRaconteurWeb.RobotRaconteurNode.sp;
                    }
                }
            },
            ctors: {
                init: function () {
                    this.Version = "0.9.0";
                }
            },
            methods: {
                SelectRemoteNodeURL: function (urls) {
                    var $t;
                    var url_order = System.Array.init(["rr+local://", "rr+pci://", "rr+usb://", "rr+tcp://127.0.0.1", "tcp://127.0.0.1", "rr+tcp://[::1]", "tcp://[::1]", "rr+tcp://localhost", "tcp://localhost", "rrs+tcp://[fe80", "rrs+wss://[fe80", "rrs+ws://[fe80", "rrs+tcp://", "rrs+wss://", "rrs+ws://", "rr+tcp://[fe80", "rr+wss://[fe80", "rr+ws://[fe80", "rr+tcp://", "rr+wss://", "rr+ws://"], System.String);

                    $t = Bridge.getEnumerator(url_order);
                    try {
                        while ($t.moveNext()) {
                            var u = { v : $t.Current };
                            var u1 = System.Linq.Enumerable.from(urls, System.String).firstOrDefault((function ($me, u) {
                                    return function (x) {
                                        return System.String.startsWith(x.toLowerCase(), u.v);
                                    };
                                })(this, u), null);
                            if (u1 != null) {
                                return u1;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return System.Linq.Enumerable.from(urls, System.String).first();
                }
            }
        },
        fields: {
            m_NodeID: null,
            m_NodeName: null,
            endpoints: null,
            transports: null,
            service_factories: null,
            dynamic_factory: null,
            services: null,
            transport_count: 0,
            EndpointInactivityTimeout: 0,
            TransportInactivityTimeout: 0,
            RequestTimeout: 0,
            serviceindexer: null,
            MemoryMaxTransferSize: 0,
            browser_transport: null,
            shutdown_token: null,
            m_DiscoveredNodes: null,
            cleandiscoverednodes_task: null,
            service_state_nonce: null
        },
        props: {
            NodeID: {
                get: function () {
                    if (RobotRaconteurWeb.NodeID.op_Equality(this.m_NodeID, null)) {
                        this.m_NodeID = RobotRaconteurWeb.NodeID.NewUniqueID();
                    }
                    return this.m_NodeID;
                },
                set: function (value) {
                    if (RobotRaconteurWeb.NodeID.op_Equality(this.m_NodeID, null)) {
                        this.m_NodeID = value;

                    } else {
                        throw new System.InvalidOperationException.$ctor1("NodeID cannot be changed once it is set");
                    }
                }
            },
            NodeName: {
                get: function () {
                    if (this.m_NodeName == null) {
                        this.m_NodeName = "";
                    }
                    return this.m_NodeName;
                },
                set: function (value) {
                    if (this.m_NodeName == null) {

                        if (!System.Text.RegularExpressions.Regex.match(value, "^[a-zA-Z][a-zA-Z0-9_\\.\\-]*$").getSuccess()) {
                            throw new System.InvalidOperationException.$ctor1("Invalid node name");
                        }

                        this.m_NodeName = value;

                    } else {
                        throw new System.InvalidOperationException.$ctor1("NodeName cannot be changed once it is set");
                    }
                }
            },
            DynamicServiceFactory: {
                get: function () {
                    return this.dynamic_factory;
                }
            },
            DiscoveredNodes: {
                get: function () {
                    return this.m_DiscoveredNodes;
                }
            },
            UtcNow: {
                get: function () {
                    return System.DateTime.getUtcNow();
                }
            },
            ServiceStateNonce: {
                get: function () {
                    this;
                    {
                        return this.service_state_nonce;
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.endpoints = new (System.Collections.Generic.Dictionary$2(System.UInt32,RobotRaconteurWeb.Endpoint)).ctor();
                this.transports = new (System.Collections.Generic.Dictionary$2(System.UInt32,RobotRaconteurWeb.Transport)).ctor();
                this.service_factories = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceFactory)).ctor();
                this.services = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServerContext)).ctor();
                this.transport_count = 0;
                this.EndpointInactivityTimeout = 600000;
                this.TransportInactivityTimeout = 600000;
                this.RequestTimeout = 15000;
                this.MemoryMaxTransferSize = 102400;
                this.shutdown_token = new System.Threading.CancellationTokenSource();
                this.m_DiscoveredNodes = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.NodeDiscoveryInfo)).ctor();
            },
            ctor: function () {
                this.$initialize();
                this.serviceindexer = new RobotRaconteurWeb.RobotRaconteurNode.ServiceIndexer(this);
                this.RegisterServiceType(new RobotRaconteurServiceIndex.RobotRaconteurServiceIndexFactory(this));
                this.RegisterService$1("RobotRaconteurServiceIndex", "RobotRaconteurServiceIndex", this.serviceindexer);
                this.cleandiscoverednodes_task = RobotRaconteurWeb.PeriodicTask.Run$1(Bridge.fn.cacheBind(this, this.CleanDiscoveredNodes), System.TimeSpan.fromSeconds(5), this.shutdown_token.token);
                this.browser_transport = new RobotRaconteurWeb.BrowserWebSocketTransport(this);
                this.RegisterTransport(this.browser_transport);
            }
        },
        methods: {
            GetServiceFactoryForType: function (type, context) {
                var servicename = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(type).Item1;

                if (context != null) {
                    var f = { };
                    if (context.TryGetPulledServiceType(servicename, f)) {
                        return f.v;
                    }
                }
                return this.GetServiceType(servicename);
            },
            GetServiceFactoryForType$1: function (type, context) {
                return this.GetServiceFactoryForType(RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType(type), context);
            },
            PackStructure: function (s, context) {
                if (s == null) {
                    return null;
                }

                return this.GetServiceFactoryForType$1(Bridge.getType(s), context).PackStructure(s);
            },
            UnpackStructure: function (T, l, context) {
                if (l == null) {
                    return Bridge.getDefaultValue(T);
                }
                return this.GetServiceFactoryForType(l.Type, context).UnpackStructure(T, l);
            },
            PackPodToArray: function (T, s, context) {
                return this.GetServiceFactoryForType$1(Bridge.getType(s.v, T), context).PackPodToArray(T, s);
            },
            UnpackPodFromArray: function (T, l, context) {
                return this.GetServiceFactoryForType(l.Type, context).UnpackPodFromArray(T, l);
            },
            PackPodArray: function (T, s, context) {
                if (s == null) {
                    return null;
                }
                return this.GetServiceFactoryForType$1(Bridge.getType(s), context).PackPodArray(T, s);
            },
            UnpackPodArray: function (T, l, context) {
                if (l == null) {
                    return null;
                }
                return this.GetServiceFactoryForType(l.Type, context).UnpackPodArray(T, l);
            },
            PackPodMultiDimArray: function (T, s, context) {
                if (s == null) {
                    return null;
                }
                return this.GetServiceFactoryForType$1(Bridge.getType(s.pod_array), context).PackPodMultiDimArray(T, s);
            },
            UnpackPodMultiDimArray: function (T, l, context) {
                if (l == null) {
                    return null;
                }
                return this.GetServiceFactoryForType(l.Type, context).UnpackPodMultiDimArray(T, l);
            },
            PackPod: function (s, context) {
                var t = Bridge.getType(s);

                if (Bridge.Reflection.isValueType(t)) {
                    return this.GetServiceFactoryForType$1(t, context).PackPod(s);
                } else if (Bridge.isArray(null, t)) {
                    return this.GetServiceFactoryForType$1((t.$elementType || null), context).PackPod(s);
                } else if (Bridge.referenceEquals(t, RobotRaconteurWeb.PodMultiDimArray)) {
                    return this.GetServiceFactoryForType$1((Bridge.getType(Bridge.cast(s, RobotRaconteurWeb.PodMultiDimArray).pod_array).$elementType || null), context).PackPod(s);
                } else if (Bridge.referenceEquals(t, RobotRaconteurWeb.NamedMultiDimArray)) {
                    return this.GetServiceFactoryForType$1((Bridge.getType(Bridge.cast(s, RobotRaconteurWeb.NamedMultiDimArray).namedarray_array).$elementType || null), context).PackNamedArray$1(s);
                }
                throw new RobotRaconteurWeb.DataTypeException("Invalid pod object");
            },
            UnpackPod: function (l, context) {
                return this.GetServiceFactoryForType(RobotRaconteurWeb.MessageElementUtil.GetMessageElementDataTypeString(l), context).UnpackPod(l);
            },
            PackNamedArrayToArray: function (T, s, context) {
                return this.GetServiceFactoryForType$1(Bridge.getType(s.v, T), context).PackNamedArrayToArray(T, s);
            },
            UnpackNamedArrayFromArray: function (T, l, context) {
                return this.GetServiceFactoryForType(l.Type, context).UnpackNamedArrayFromArray(T, l);
            },
            PackNamedArray: function (T, s, context) {
                if (s == null) {
                    return null;
                }
                return this.GetServiceFactoryForType$1(Bridge.getType(s), context).PackNamedArray(T, s);
            },
            PackNamedArray$1: function (s, context) {
                var t = Bridge.getType(s);

                if (Bridge.Reflection.isValueType(t)) {
                    return this.GetServiceFactoryForType$1(t, context).PackNamedArray$1(s);
                } else if (Bridge.isArray(null, t)) {
                    return this.GetServiceFactoryForType$1((t.$elementType || null), context).PackNamedArray$1(s);
                } else if (Bridge.referenceEquals(t, RobotRaconteurWeb.NamedMultiDimArray)) {
                    return this.GetServiceFactoryForType$1((Bridge.getType(Bridge.cast(s, RobotRaconteurWeb.NamedMultiDimArray).namedarray_array).$elementType || null), context).PackNamedArray$1(s);
                }
                throw new RobotRaconteurWeb.DataTypeException("Invalid pod object");
            },
            UnpackNamedArray: function (T, l, context) {
                if (l == null) {
                    return null;
                }
                return this.GetServiceFactoryForType(l.Type, context).UnpackNamedArray(T, l);
            },
            UnpackNamedArray$1: function (l, context) {
                return this.GetServiceFactoryForType(RobotRaconteurWeb.MessageElementUtil.GetMessageElementDataTypeString(l), context).UnpackNamedArray$1(l);
            },
            PackNamedMultiDimArray: function (T, s, context) {
                if (s == null) {
                    return null;
                }
                return this.GetServiceFactoryForType$1(Bridge.getType(s.namedarray_array), context).PackNamedMultiDimArray(T, s);
            },
            UnpackNamedMultiDimArray: function (T, l, context) {
                if (l == null) {
                    return null;
                }
                return this.GetServiceFactoryForType(l.Type, context).UnpackNamedMultiDimArray(T, l);
            },
            PackContainerValue$1: function (T, name, data, context) {
                var t = T;

                if (Bridge.referenceEquals(t, System.Object)) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, this.PackVarType(data.v, context));
                }

                var is_array = Bridge.isArray(null, t);
                if (!(Bridge.Reflection.isValueType(t) || !System.Collections.Generic.EqualityComparer$1(T).def.equals2(data.v, Bridge.getDefaultValue(T)))) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, null);
                }

                if (Bridge.Reflection.isPrimitive(t)) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, System.Array.init([data.v], T));
                }

                if (is_array && Bridge.Reflection.isPrimitive((t.$elementType || null))) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, data.v);
                }

                if (Bridge.referenceEquals(t, System.String)) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, data.v);
                }

                if (Bridge.referenceEquals(t, RobotRaconteurWeb.CDouble) || Bridge.referenceEquals(t, RobotRaconteurWeb.CSingle)) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, data.v);
                }

                if (is_array) {
                    var t2 = (t.$elementType || null);
                    if (Bridge.referenceEquals(t2, RobotRaconteurWeb.CDouble) || Bridge.referenceEquals(t2, RobotRaconteurWeb.CSingle)) {
                        return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, data.v);
                    }
                }

                if (Bridge.referenceEquals(t, RobotRaconteurWeb.MultiDimArray)) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, this.PackMultiDimArray(Bridge.cast(data.v, RobotRaconteurWeb.MultiDimArray)));
                }

                if (Bridge.referenceEquals(t, RobotRaconteurWeb.PodMultiDimArray)) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, this.PackPod(data.v, context));
                }

                if (Bridge.referenceEquals(t, RobotRaconteurWeb.NamedMultiDimArray)) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, this.PackNamedArray$1(data.v, context));
                }

                if (Bridge.Reflection.isGenericType(t)) {
                    throw new RobotRaconteurWeb.DataTypeException("Invalid Robot Raconteur container value type");
                }

                if (!Bridge.Reflection.isValueType(t) && !is_array && !Bridge.referenceEquals(t, RobotRaconteurWeb.PodMultiDimArray) && !Bridge.referenceEquals(t, RobotRaconteurWeb.NamedMultiDimArray)) {
                    return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, this.PackStructure(data.v, context));
                } else {
                    var t21 = t;
                    if (Bridge.isArray(null, t)) {
                        t21 = (t.$elementType || null);
                    }
                    if (Bridge.Reflection.getAttributes(t21, RobotRaconteurWeb.RobotRaconteurNamedArrayElementTypeAndCount, false).length > 0) {
                        return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, this.PackNamedArray$1(data.v, context));
                    } else {
                        return RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1(name, this.PackPod(data.v, context));
                    }
                }
            },
            PackContainerValue: function (T, num, data, context) {
                return this.PackContainerValue$1(T, Bridge.toString(num), data, context);
            },
            UnpackContainerValue: function (T, e, context) {
                var $t, $t1, $t2;
                switch (e.ElementType) {
                    case RobotRaconteurWeb.DataTypes.void_t: 
                        if (Bridge.Reflection.isValueType(T)) {
                            throw new RobotRaconteurWeb.DataTypeException("Primitive types may not be null");
                        }
                        return Bridge.getDefaultValue(T);
                    case RobotRaconteurWeb.DataTypes.double_t: 
                    case RobotRaconteurWeb.DataTypes.single_t: 
                    case RobotRaconteurWeb.DataTypes.int8_t: 
                    case RobotRaconteurWeb.DataTypes.uint8_t: 
                    case RobotRaconteurWeb.DataTypes.int16_t: 
                    case RobotRaconteurWeb.DataTypes.uint16_t: 
                    case RobotRaconteurWeb.DataTypes.int32_t: 
                    case RobotRaconteurWeb.DataTypes.uint32_t: 
                    case RobotRaconteurWeb.DataTypes.int64_t: 
                    case RobotRaconteurWeb.DataTypes.uint64_t: 
                    case RobotRaconteurWeb.DataTypes.cdouble_t: 
                    case RobotRaconteurWeb.DataTypes.csingle_t: 
                    case RobotRaconteurWeb.DataTypes.bool_t: 
                        if (Bridge.isArray(null, T)) {
                            return Bridge.cast(Bridge.unbox(e.Data, T), T);
                        } else {
                            return (Bridge.referenceEquals(T, System.Object)) ? Bridge.cast(Bridge.unbox(e.Data, T), T) : ($t = Bridge.cast(e.Data, System.Array.type(T)))[System.Array.index(0, $t)];
                        }
                    case RobotRaconteurWeb.DataTypes.string_t: 
                        return Bridge.cast(Bridge.unbox(e.Data, T), T);
                    case RobotRaconteurWeb.DataTypes.multidimarray_t: 
                        {
                            var md = Bridge.cast(e.Data, RobotRaconteurWeb.MessageElementMultiDimArray);
                            return Bridge.cast(Bridge.unbox(this.UnpackMultiDimArray(md), T), T);
                        }
                    case RobotRaconteurWeb.DataTypes.structure_t: 
                        {
                            var md1 = Bridge.cast(e.Data, RobotRaconteurWeb.MessageElementStructure);
                            return this.UnpackStructure(T, md1, context);
                        }
                    case RobotRaconteurWeb.DataTypes.pod_array_t: 
                        {
                            var md2 = Bridge.cast(e.Data, RobotRaconteurWeb.MessageElementPodArray);
                            if (Bridge.Reflection.isValueType(T)) {
                                if (md2.Elements.Count !== 1) {
                                    throw new RobotRaconteurWeb.DataTypeException("Invalid array size for scalar structure");
                                }
                                return ($t1 = Bridge.cast(this.UnpackPod(md2, context), System.Array.type(T)))[System.Array.index(0, $t1)];
                            } else {
                                return Bridge.cast(Bridge.unbox(this.UnpackPod(md2, context), T), T);
                            }
                        }
                    case RobotRaconteurWeb.DataTypes.pod_multidimarray_t: 
                        {
                            return Bridge.cast(Bridge.unbox(this.UnpackPod(e.Data, context), T), T);
                        }
                    case RobotRaconteurWeb.DataTypes.namedarray_array_t: 
                        {
                            var md3 = Bridge.cast(e.Data, RobotRaconteurWeb.MessageElementNamedArray);
                            if (Bridge.Reflection.isValueType(T)) {
                                if (md3.Elements.Count !== 1) {
                                    throw new RobotRaconteurWeb.DataTypeException("Invalid array size for scalar structure");
                                }

                                return ($t2 = Bridge.cast(this.UnpackNamedArray$1(md3, context), System.Array.type(T)))[System.Array.index(0, $t2)];

                            } else {
                                return Bridge.cast(Bridge.unbox(this.UnpackNamedArray$1(md3, context), T), T);
                            }
                        }
                    case RobotRaconteurWeb.DataTypes.namedarray_multidimarray_t: 
                        {
                            return Bridge.cast(Bridge.unbox(this.UnpackNamedArray$1(e.Data, context), T), T);
                        }
                    default: 
                        throw new RobotRaconteurWeb.DataTypeException("Invalid container data type");
                }
            },
            UnpackContainerValue$1: function (T, e, name, context) {
                name.v = e.ElementName;
                return this.UnpackContainerValue(T, e, context);
            },
            UnpackContainerValue$2: function (T, e, num, context) {
                num.v = RobotRaconteurWeb.MessageElementUtil.GetMessageElementNumber(e);
                return this.UnpackContainerValue(T, e, context);
            },
            PackMapType: function (Tkey, Tvalue, data, context) {
                var $t, $t1;
                if (data == null) {
                    return null;
                }

                if (Bridge.referenceEquals(Tkey, System.Int32)) {
                    var m = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();

                    var ddata = Bridge.cast(data, System.Collections.Generic.Dictionary$2(Tkey,Tvalue));

                    $t = Bridge.getEnumerator(ddata);
                    try {
                        while ($t.moveNext()) {
                            var d = $t.Current;
                            var v = { v : d.value };
                            RobotRaconteurWeb.MessageElementUtil.AddMessageElement$3(m, this.PackContainerValue(Tvalue, System.Convert.toInt32(d.key), v, context));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                    return new (RobotRaconteurWeb.MessageElementMap$1(System.Int32))(m);
                }

                if (Bridge.referenceEquals(Tkey, System.String)) {
                    var m1 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                    var ddata1 = Bridge.cast(data, System.Collections.Generic.Dictionary$2(Tkey,Tvalue));

                    $t1 = Bridge.getEnumerator(ddata1);
                    try {
                        while ($t1.moveNext()) {
                            var d1 = $t1.Current;
                            var v1 = { v : d1.value };
                            RobotRaconteurWeb.MessageElementUtil.AddMessageElement$3(m1, this.PackContainerValue$1(Tvalue, Bridge.toString(d1.key), v1, context));
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }
                    return new (RobotRaconteurWeb.MessageElementMap$1(System.String))(m1);
                }

                throw new RobotRaconteurWeb.DataTypeException("Indexed types can only be indexed by int32 and string");
            },
            UnpackMapType: function (Tkey, Tvalue, data, context) {
                var $t, $t1;
                if (data == null) {
                    return null;
                }

                if (Bridge.is(data, RobotRaconteurWeb.MessageElementMap$1(System.Int32))) {
                    var o = new (System.Collections.Generic.Dictionary$2(System.Int32,Tvalue)).ctor();

                    var cdata = Bridge.cast(data, RobotRaconteurWeb.MessageElementMap$1(System.Int32));
                    var cdataElements = cdata.Elements;
                    {
                        $t = Bridge.getEnumerator(cdataElements);
                        try {
                            while ($t.moveNext()) {
                                var e = $t.Current;
                                var num = { };
                                var val = this.UnpackContainerValue$2(Tvalue, e, num, context);
                                o.add(num.v, val);

                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$Dispose();
                            }
                        }
                        return o;
                    }
                } else if (Bridge.is(data, RobotRaconteurWeb.MessageElementMap$1(System.String))) {
                    var o1 = new (System.Collections.Generic.Dictionary$2(System.String,Tvalue)).ctor();

                    var cdata1 = Bridge.cast(data, RobotRaconteurWeb.MessageElementMap$1(System.String));
                    var cdataElements1 = cdata1.Elements;
                    {
                        $t1 = Bridge.getEnumerator(cdataElements1);
                        try {
                            while ($t1.moveNext()) {
                                var e1 = $t1.Current;
                                var name = { };
                                var val1 = this.UnpackContainerValue$1(Tvalue, e1, name, context);
                                o1.add(name.v, val1);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$Dispose();
                            }
                        }
                        return o1;
                    }
                } else {
                    throw new RobotRaconteurWeb.DataTypeException("Indexed types can only be indexed by int32 and string");
                }
            },
            PackListType: function (Tvalue, data, context) {
                var $t;
                if (data == null) {
                    return null;
                }

                var m = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                {
                    var ddata = Bridge.cast(data, System.Collections.Generic.List$1(Tvalue));

                    var count = 0;
                    $t = Bridge.getEnumerator(ddata);
                    try {
                        while ($t.moveNext()) {
                            var d = $t.Current;
                            var v = { v : d };
                            RobotRaconteurWeb.MessageElementUtil.AddMessageElement$3(m, this.PackContainerValue(Tvalue, count, v, context));
                            count = (count + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return new RobotRaconteurWeb.MessageElementList(m);
                }
            },
            UnpackListType: function (Tvalue, data, context) {
                var $t;
                if (data == null) {
                    return null;
                }
                var o = new (System.Collections.Generic.List$1(Tvalue)).ctor();
                var count = 0;
                var cdata = Bridge.cast(data, RobotRaconteurWeb.MessageElementList);
                var cdataElements = cdata.Elements;
                {
                    $t = Bridge.getEnumerator(cdataElements);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            var num = { };
                            var val = this.UnpackContainerValue$2(Tvalue, e, num, context);
                            if (count !== num.v) {
                                throw new RobotRaconteurWeb.DataTypeException("Error in list format");
                            }
                            o.add(val);
                            count = (count + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                    return o;
                }
            },
            PackVarType: function (data, context) {
                if (data == null) {
                    return null;
                }

                var t = Bridge.getType(data);

                if (Bridge.referenceEquals(t, System.Collections.Generic.Dictionary$2(System.Int32,System.Object))) {
                    return this.PackMapType(System.Int32, System.Object, data, context);

                } else if (Bridge.referenceEquals(t, System.Collections.Generic.Dictionary$2(System.String,System.Object))) {
                    return this.PackMapType(System.String, System.Object, data, context);

                } else if (Bridge.referenceEquals(t, System.Collections.Generic.List$1(System.Object))) {
                    return this.PackListType(System.Object, data, context);

                }

                var is_array = Bridge.isArray(null, t);

                if (Bridge.Reflection.isPrimitive(t) || (is_array && Bridge.Reflection.isPrimitive((t.$elementType || null)))) {
                    return data;
                }

                if (Bridge.referenceEquals(t, System.String)) {
                    return data;
                }

                if (Bridge.referenceEquals(t, RobotRaconteurWeb.MultiDimArray)) {
                    return this.PackMultiDimArray(Bridge.cast(data, RobotRaconteurWeb.MultiDimArray));
                }

                if (Bridge.referenceEquals(t, RobotRaconteurWeb.PodMultiDimArray)) {
                    return this.PackPod(data, context);
                }

                if (Bridge.Reflection.isGenericType(t)) {
                    throw new RobotRaconteurWeb.DataTypeException("Invalid Robot Raconteur varvalue type");
                }

                if (!Bridge.Reflection.isValueType(t) && !is_array && !Bridge.referenceEquals(t, RobotRaconteurWeb.PodMultiDimArray) && !Bridge.referenceEquals(t, RobotRaconteurWeb.NamedMultiDimArray)) {
                    return this.PackStructure(data, context);
                } else {
                    var t2 = t;
                    if (Bridge.isArray(null, t)) {
                        t2 = (t.$elementType || null);
                    }
                    if (Bridge.Reflection.getAttributes(t2, RobotRaconteurWeb.RobotRaconteurNamedArrayElementTypeAndCount, false).length > 0) {
                        return this.PackNamedArray$1(data, context);
                    } else {
                        return this.PackPod(data, context);
                    }
                }
            },
            UnpackVarType: function (me, context) {
                if (me == null) {
                    return null;
                }

                switch (me.ElementType) {
                    case RobotRaconteurWeb.DataTypes.void_t: 
                        return null;
                    case RobotRaconteurWeb.DataTypes.double_t: 
                    case RobotRaconteurWeb.DataTypes.single_t: 
                    case RobotRaconteurWeb.DataTypes.int8_t: 
                    case RobotRaconteurWeb.DataTypes.uint8_t: 
                    case RobotRaconteurWeb.DataTypes.int16_t: 
                    case RobotRaconteurWeb.DataTypes.uint16_t: 
                    case RobotRaconteurWeb.DataTypes.int32_t: 
                    case RobotRaconteurWeb.DataTypes.uint32_t: 
                    case RobotRaconteurWeb.DataTypes.int64_t: 
                    case RobotRaconteurWeb.DataTypes.uint64_t: 
                    case RobotRaconteurWeb.DataTypes.string_t: 
                        return me.Data;
                    case RobotRaconteurWeb.DataTypes.multidimarray_t: 
                        {
                            var md = Bridge.cast(me.Data, RobotRaconteurWeb.MessageElementMultiDimArray);
                            return this.UnpackMultiDimArray(md);
                        }
                    case RobotRaconteurWeb.DataTypes.structure_t: 
                        {
                            var md1 = Bridge.cast(me.Data, RobotRaconteurWeb.MessageElementStructure);
                            return this.UnpackStructure(System.Object, md1, context);
                        }
                    case RobotRaconteurWeb.DataTypes.pod_array_t: 
                    case RobotRaconteurWeb.DataTypes.pod_multidimarray_t: 
                        {
                            return this.UnpackPod(me.Data, context);
                        }
                    case RobotRaconteurWeb.DataTypes.namedarray_array_t: 
                    case RobotRaconteurWeb.DataTypes.namedarray_multidimarray_t: 
                        {
                            return this.UnpackNamedArray$1(me.Data, context);
                        }
                    case RobotRaconteurWeb.DataTypes.vector_t: 
                        {
                            return this.UnpackMapType(System.Int32, System.Object, me.Data, context);
                        }
                    case RobotRaconteurWeb.DataTypes.dictionary_t: 
                        {
                            return this.UnpackMapType(System.String, System.Object, me.Data, context);
                        }
                    case RobotRaconteurWeb.DataTypes.list_t: 
                        {
                            return this.UnpackListType(System.Object, me.Data, context);
                        }
                    default: 
                        throw new RobotRaconteurWeb.DataTypeException("Invalid varvalue data type");
                }
            },
            PackMultiDimArray: function (array) {
                if (array == null) {
                    return null;
                }
                var l = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                l.add(new RobotRaconteurWeb.MessageElement.$ctor1("dims", array.Dims));
                l.add(new RobotRaconteurWeb.MessageElement.$ctor1("array", array.Array_));
                return new RobotRaconteurWeb.MessageElementMultiDimArray(l);
            },
            UnpackMultiDimArray: function (marray) {
                if (marray == null) {
                    return null;
                }

                var m = new RobotRaconteurWeb.MultiDimArray.ctor();

                m.Dims = (RobotRaconteurWeb.MessageElement.FindElement$1(marray.Elements, "dims").CastData(System.Array.type(System.UInt32)));
                m.Array_ = (RobotRaconteurWeb.MessageElement.FindElement$1(marray.Elements, "array").CastData(Array));
                return m;
            },
            SendMessage: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    e, 
                    $e1, 
                    c, 
                    $e2, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (RobotRaconteurWeb.NodeID.op_Inequality(m.header.SenderNodeID, this.NodeID)) {

                                            throw new RobotRaconteurWeb.ConnectionException("Could not route message");

                                        }

                                        try {
                                            this.endpoints;
                                            {
                                                e = this.endpoints.getItem(m.header.SenderEndpoint);
                                            }
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                            if (Bridge.is($e1, RobotRaconteurWeb.KeyNotFoundException)) {
                                                throw new RobotRaconteurWeb.InvalidEndpointException("Could not find endpoint");
                                            } else {
                                                throw $e1;
                                            }
                                        }


                                        try {
                                            this.transports;
                                            {
                                                c = this.transports.getItem(e.transport);
                                            }
                                        } catch ($e2) {
                                            $e2 = System.Exception.create($e2);
                                            if (Bridge.is($e2, RobotRaconteurWeb.KeyNotFoundException)) {
                                                throw new RobotRaconteurWeb.ConnectionException("Could not find transport");
                                            } else {
                                                throw $e2;
                                            }
                                        }

                                        $task1 = c.SendMessage(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MessageReceived: function (m) {
                if (RobotRaconteurWeb.NodeID.op_Inequality(m.header.ReceiverNodeID, this.NodeID)) {
                    var eret = this.GenerateErrorReturnMessage(m, RobotRaconteurWeb.MessageErrorType.NodeNotFound, "RobotRaconteur.NodeNotFound", "Could not find route to remote node");
                    if (eret.entries.Count > 0) {
                        RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage(eret, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                    }

                } else {



                    try {

                        var e;
                        this.endpoints;
                        {
                            e = this.endpoints.getItem(m.header.ReceiverEndpoint);
                        }

                        e.MessageReceived(m);
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                        if (Bridge.is($e1, RobotRaconteurWeb.KeyNotFoundException)) {
                            var eret1 = this.GenerateErrorReturnMessage(m, RobotRaconteurWeb.MessageErrorType.InvalidEndpoint, "RobotRaconteur.InvalidEndpoint", "Invalid destination endpoint");
                            if (eret1.entries.Count > 0) {
                                RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage(eret1, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                            }
                        } else {
                            throw $e1;
                        }
                    }
                }



            },
            GenerateErrorReturnMessage: function (m, err, errname, errdesc) {
                var $t;
                var ret = new RobotRaconteurWeb.Message();
                ret.header = new RobotRaconteurWeb.MessageHeader();
                ret.header.ReceiverNodeName = m.header.SenderNodeName;
                ret.header.SenderNodeName = m.header.ReceiverNodeName;
                ret.header.ReceiverNodeID = m.header.SenderNodeID;
                ret.header.ReceiverEndpoint = m.header.SenderEndpoint;
                ret.header.SenderEndpoint = m.header.ReceiverEndpoint;
                ret.header.SenderNodeID = m.header.ReceiverNodeID;
                $t = Bridge.getEnumerator(m.entries);
                try {
                    while ($t.moveNext()) {
                        var me = $t.Current;
                        if (me.EntryType % 2 === 1) {
                            var eret = new RobotRaconteurWeb.MessageEntry.$ctor1(((me.EntryType + 1) | 0), me.MemberName);
                            eret.RequestID = me.RequestID;
                            eret.ServicePath = me.ServicePath;
                            eret.AddElement$1("errorname", errname);
                            eret.AddElement$1("errorstring", errdesc);
                            eret.Error = err;
                            ret.entries.add(eret);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }

                return ret;

            },
            RegisterServiceType: function (f) {
                this.service_factories;
                {
                    this.service_factories.add(f.GetServiceName(), f);
                }
            },
            GetServiceType: function (servicetype) {
                var f = { };
                if (!this.TryGetServiceType(servicetype, f)) {
                    throw new RobotRaconteurWeb.ServiceException("Service factory not found for " + (servicetype || ""));
                }
                return f.v;
            },
            TryGetServiceType: function (servicetype, f) {
                this.service_factories;
                {
                    return this.service_factories.tryGetValue(servicetype, f);
                }
            },
            GetServiceTypes: function () {
                var $t;
                this.service_factories;
                {
                    return ($t = System.String, System.Linq.Enumerable.from(this.service_factories.Keys, $t).ToArray($t));
                }
            },
            RegisterDynamicServiceFactory: function (f) {
                if (this.dynamic_factory != null) {
                    throw new System.InvalidOperationException.$ctor1("Dynamic service factory already set");
                }
                this.dynamic_factory = f;
            },
            RegisterService$1: function (name, servicetype, obj, securitypolicy) {
                if (securitypolicy === void 0) { securitypolicy = null; }
                this.services;
                {

                    if (System.Linq.Enumerable.from(this.services.Keys, System.String).contains(name)) {
                        this.CloseService(name);
                    }

                    var c = new RobotRaconteurWeb.ServerContext(this.GetServiceType(servicetype), this);
                    c.SetBaseObject(name, obj, securitypolicy);

                    this.services.add(name, c);

                    this.UpdateServiceStateNonce();

                    return c;
                }
            },
            RegisterService: function (c) {
                this.services;
                {
                    if (System.Linq.Enumerable.from(this.services.Keys, System.String).contains(c.ServiceName)) {
                        this.CloseService(c.ServiceName);
                    }

                    this.services.add(c.ServiceName, c);
                    return c;
                }
            },
            CloseService: function (sname) {
                this.services;
                {
                    var s = this.GetService(sname);



                    s.Close();

                    this.services.remove(sname);
                }




            },
            GetService: function (name) {
                try {
                    this.services;
                    {
                        return this.services.getItem(name);
                    }
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    if (Bridge.is($e1, RobotRaconteurWeb.KeyNotFoundException)) {
                        throw new RobotRaconteurWeb.ServiceNotFoundException("Service " + (name || "") + " not found");
                    } else {
                        throw $e1;
                    }
                }


            },
            RegisterTransport: function (c) {
                this.transports;
                {
                    this.transport_count = (this.transport_count + 1) >>> 0;
                    c.TransportID = this.transport_count;
                    this.transports.add(this.transport_count, c);
                    return this.transport_count;
                }
            },
            SpecialRequest: function (m, transportid) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ret, 
                    $t, 
                    e, 
                    eret, 
                    $t1, 
                    path, 
                    s1, 
                    s, 
                    objtype, 
                    $async_e, 
                    name, 
                    servicedef, 
                    $e1, 
                    name1, 
                    c, 
                    se, 
                    $e2, 
                    name2, 
                    se1, 
                    $e3, 
                    path1, 
                    s11, 
                    attr, 
                    $e4, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17], $step);
                                switch ($step) {
                                    case 0: {
                                        if (!(RobotRaconteurWeb.NodeID.op_Equality(m.header.ReceiverNodeID, RobotRaconteurWeb.NodeID.Any) && (Bridge.referenceEquals(m.header.ReceiverNodeName, "") || Bridge.referenceEquals(m.header.ReceiverNodeName, this.NodeName))) && !(RobotRaconteurWeb.NodeID.op_Equality(m.header.ReceiverNodeID, this.NodeID))) {
                                            $tcs.setResult(this.GenerateErrorReturnMessage(m, RobotRaconteurWeb.MessageErrorType.NodeNotFound, "RobotRaconteur.NodeNotFound", "Could not find route to remote node"));
                                            return;
                                        }


                                        ret = new RobotRaconteurWeb.Message();
                                        ret.header = new RobotRaconteurWeb.MessageHeader();
                                        ret.header.ReceiverNodeName = m.header.SenderNodeName;
                                        ret.header.SenderNodeName = this.NodeName;
                                        ret.header.ReceiverNodeID = m.header.SenderNodeID;
                                        ret.header.ReceiverEndpoint = m.header.SenderEndpoint;
                                        ret.header.SenderEndpoint = m.header.ReceiverEndpoint;
                                        ret.header.SenderNodeID = this.NodeID;

                                        $t = Bridge.getEnumerator(m.entries);
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                            e = $t.Current;
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 17;
                                        continue;
                                    }
                                    case 2: {
                                        eret = ret.AddEntry(((e.EntryType + 1) | 0), e.MemberName);
                                        eret.RequestID = e.RequestID;
                                        eret.ServicePath = e.ServicePath;

                                        $t1 = e.EntryType;
                                        if ($t1 === RobotRaconteurWeb.MessageEntryType.GetNodeInfo) {
                                            $step = 3;
                                            continue;
                                        }
                                        else if ($t1 === RobotRaconteurWeb.MessageEntryType.ObjectTypeName) {
                                            $step = 4;
                                            continue;
                                        }
                                        else if ($t1 === RobotRaconteurWeb.MessageEntryType.GetServiceDesc) {
                                            $step = 9;
                                            continue;
                                        }
                                        else if ($t1 === RobotRaconteurWeb.MessageEntryType.ConnectClient) {
                                            $step = 10;
                                            continue;
                                        }
                                        else if ($t1 === RobotRaconteurWeb.MessageEntryType.DisconnectClient) {
                                            $step = 11;
                                            continue;
                                        }
                                        else if ($t1 === RobotRaconteurWeb.MessageEntryType.ConnectionTest) {
                                            $step = 12;
                                            continue;
                                        }
                                        else if ($t1 === RobotRaconteurWeb.MessageEntryType.NodeCheckCapability) {
                                            $step = 13;
                                            continue;
                                        }
                                        else if ($t1 === RobotRaconteurWeb.MessageEntryType.GetServiceAttributes) {
                                            $step = 14;
                                            continue;
                                        }
                                        else  {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 16;
                                        continue;
                                    }
                                    case 3: {
                                        $step = 16;
                                        continue;
                                    }
                                    case 4: {
                                        path = e.ServicePath;
                                        s1 = System.String.split(path, System.Array.init([46], System.Char).map(function (i) {{ return String.fromCharCode(i); }}), 2);
                                        
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        s = this.GetService(s1[System.Array.index(0, s1)]);

                                        $task1 = s.GetObjectType(path);
                                        $step = 6;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        objtype = $taskResult1;
                                        eret.AddElement$1("objecttype", objtype);
                                        $step = 8;
                                        continue;
                                    }
                                    case 7: {
                                        eret.AddElement$1("errorname", "RobotRaconteur.ObjectNotFoundException");
                                        eret.AddElement$1("errorstring", "Object not found");
                                        eret.Error = RobotRaconteurWeb.MessageErrorType.ObjectNotFound;
                                        $async_e = null;
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 16;
                                        continue;
                                    }
                                    case 9: {
                                        {
                                            name = e.ServicePath;
                                            try {
                                                servicedef = "";
                                                if (System.Linq.Enumerable.from(e.elements, RobotRaconteurWeb.MessageElement).any(function (x) {
                                                    return Bridge.referenceEquals(x.ElementName, "ServiceType");
                                                })) {
                                                    name = e.FindElement("ServiceType").CastData(System.String);
                                                    servicedef = this.GetServiceType(name).DefString();
                                                } else if (System.Linq.Enumerable.from(e.elements, RobotRaconteurWeb.MessageElement).any(function (x) {
                                                    return Bridge.referenceEquals(x.ElementName, "servicetype");
                                                })) {
                                                    name = e.FindElement("servicetype").CastData(System.String);
                                                    servicedef = this.GetServiceType(name).DefString();
                                                } else {
                                                    servicedef = this.GetService(name).ServiceDef.DefString();
                                                    eret.AddElement$1("attributes", this.PackMapType(System.String, System.Object, this.GetService(name).Attributes, null));
                                                }
                                                eret.AddElement$1("servicedef", servicedef);
                                            } catch ($e1) {
                                                $e1 = System.Exception.create($e1);
                                                eret.AddElement$1("errorname", "RobotRaconteur.ServiceNotFoundException");
                                                eret.AddElement$1("errorstring", "Service not found");
                                                eret.Error = RobotRaconteurWeb.MessageErrorType.ServiceNotFound;
                                            }
                                        }
                                        $step = 16;
                                        continue;
                                    }
                                    case 10: {
                                        {
                                            name1 = e.ServicePath;

                                            try {


                                                c = this.GetService(name1);
                                                se = new RobotRaconteurWeb.ServerEndpoint(c, this);

                                                se.m_RemoteEndpoint = m.header.SenderEndpoint;
                                                se.m_RemoteNodeID = m.header.SenderNodeID;
                                                this.RegisterEndpoint(se);

                                                se.transport = transportid;

                                                c.AddClient(se);

                                                ret.header.SenderEndpoint = se.LocalEndpoint;


                                            } catch ($e2) {
                                                $e2 = System.Exception.create($e2);
                                                eret.AddElement$1("errorname", "RobotRaconteur.ServiceNotFoundException");
                                                eret.AddElement$1("errorstring", "Service not found");
                                                eret.Error = RobotRaconteurWeb.MessageErrorType.ServiceNotFound;
                                            }
                                        }
                                        $step = 16;
                                        continue;
                                    }
                                    case 11: {
                                        {


                                            try {
                                                name2 = e.FindElement("servicename").CastData(System.String);
                                        this.endpoints;
                                                {
                                                    se1 = Bridge.cast(this.endpoints.getItem(m.header.ReceiverEndpoint), RobotRaconteurWeb.ServerEndpoint);
                                                }

                                                this.services;
                                                {
                                                    this.GetService(name2).RemoveClient(se1);
                                                }
                                                this.DeleteEndpoint(se1);
                                            } catch ($e3) {
                                                $e3 = System.Exception.create($e3);
                                                eret.AddElement$1("errorname", "RobotRaconteur.ServiceNotFoundException");
                                                eret.AddElement$1("errorstring", "Service not found");
                                                eret.Error = RobotRaconteurWeb.MessageErrorType.ServiceNotFound;
                                            }
                                        }
                                        $step = 16;
                                        continue;
                                    }
                                    case 12: {
                                        $step = 16;
                                        continue;
                                    }
                                    case 13: {
                                        eret.AddElement$1("return", Bridge.box(0, System.UInt32));
                                        $step = 16;
                                        continue;
                                    }
                                    case 14: {
                                        {
                                            path1 = e.ServicePath;
                                            s11 = System.String.split(path1, System.Array.init([46], System.Char).map(function (i) {{ return String.fromCharCode(i); }}), 2);
                                            try {

                                                s1 = this.GetService(s11[System.Array.index(0, s11)]);

                                                attr = s1.Attributes;
                                                eret.AddElement$1("return", this.PackMapType(System.String, System.Object, attr, null));
                                            } catch ($e4) {
                                                $e4 = System.Exception.create($e4);
                                                eret.AddElement$1("errorname", "RobotRaconteur.ServiceError");
                                                eret.AddElement$1("errorstring", "Service not found");
                                                eret.Error = RobotRaconteurWeb.MessageErrorType.ServiceError;
                                            }
                                        }
                                        $step = 16;
                                        continue;
                                    }
                                    case 15: {
                                        eret.Error = RobotRaconteurWeb.MessageErrorType.ProtocolError;
                                        eret.AddElement$1("errorname", "RobotRaconteur.ProtocolError");
                                        eret.AddElement$1("errorstring", "Invalid Special Operation");
                                        $step = 16;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 17: {
                                        $tcs.setResult(ret);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 5 && $step <= 6 ) {
                                $step = 7;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ConnectService: function (url, username, credentials, listener, objecttype, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    c, 
                    atransports, 
                    $t, 
                    $t1, 
                    end, 
                    r, 
                    $e1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,7,8], $step);
                                switch ($step) {
                                    case 0: {
                                        if (username === void 0) { username = null; }
                                        if (credentials === void 0) { credentials = null; }
                                        if (listener === void 0) { listener = null; }
                                        if (objecttype === void 0) { objecttype = null; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }


                                        c = new RobotRaconteurWeb.ClientContext.ctor(this);
                                        this.RegisterEndpoint(c);
                                        this.transports;
                                        {
                                            atransports = ($t = RobotRaconteurWeb.Transport, System.Linq.Enumerable.from(this.transports.Values, $t).ToArray($t));
                                        }
                                        $t1 = Bridge.getEnumerator(atransports);
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ($t1.moveNext()) {
                                            end = $t1.Current;
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 8;
                                        continue;
                                    }
                                    case 2: {
                                        if (end == null) {
                                            $step = 1;
                                            continue;
                                        }
                                        if (end.IsClient) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 7;
                                        continue;
                                    }
                                    case 3: {
                                        if (end.CanConnectService(url)) {
                                            $step = 4;
                                            continue;
                                        } 
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $task1 = c.ConnectService(end, url, username, credentials, objecttype, cancel);
                                        $step = 5;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        r = $taskResult1;

                                        if (!Bridge.staticEquals(listener, null)) {
                                            c.addClientServiceListener(listener);
                                        }
                                        $tcs.setResult(r);
                                        return;
                                    }

                                    case 7: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 8: {
                                        try {
                                            this.DeleteEndpoint(c);
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                        }
                                        ;

                                        throw new RobotRaconteurWeb.ConnectionException("Could not connect to service");
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ConnectService$1: function (urls, username, credentials, listener, objecttype, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    urlsl, 
                    $t, 
                    url, 
                    e, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7], $step);
                                switch ($step) {
                                    case 0: {
                                        if (username === void 0) { username = null; }
                                        if (credentials === void 0) { credentials = null; }
                                        if (listener === void 0) { listener = null; }
                                        if (objecttype === void 0) { objecttype = null; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        urlsl = ($t = System.String, System.Linq.Enumerable.from(urls, $t).toList($t));

                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( urlsl.Count > 0 && !cancel.getIsCancellationRequested() ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        url = { v : RobotRaconteurWeb.RobotRaconteurNode.SelectRemoteNodeURL(urlsl.ToArray()) };

                                        
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        $task1 = this.ConnectService(url.v, username, credentials, listener, objecttype, cancel);
                                        $step = 4;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    case 5: {
                                        if (Bridge.is(e, RobotRaconteurWeb.RobotRaconteurException)) {
                                            if (!(Bridge.is(e, RobotRaconteurWeb.ConnectionException) || Bridge.is(e, System.TimeoutException))) {
                                                throw e;
                                            }

                                        }

                                        $async_e = null;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        ;

                                        urlsl.RemoveAll((function ($me, url) {
                                            return function (x) {
                                                return (Bridge.referenceEquals(x, url.v));
                                            };
                                        })(this, url));



                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {
                                        throw new RobotRaconteurWeb.ConnectionException("Could not connect to service");
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 3 && $step <= 4 ) {
                                e = $async_e;
                                $step = 5;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DisconnectService: function (obj, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    stub, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        stub = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);
                                        $task1 = stub.RRContext.Close(cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetServiceAttributes: function (obj) {
                var stub = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);
                return stub.RRContext.Attributes;
            },
            RegisterEndpoint: function (e) {
                this.endpoints;
                {
                    var r = new System.Random.ctor();
                    var local_endpoint;
                    do {
                        var b = System.Array.init(4, 0, System.Byte);
                        r.NextBytes(b);
                        local_endpoint = System.BitConverter.toUInt32(b, 0);
                    } while (this.endpoints.containsKey(local_endpoint));

                    e.m_LocalEndpoint = local_endpoint;
                    this.endpoints.add(local_endpoint, e);
                    return local_endpoint;
                }
            },
            DeleteEndpoint: function (e) {

                try {
                    var c;
                    this.transports;
                    {
                        c = this.transports.getItem(e.transport);
                    }
                    RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(c.CloseTransportConnection(e, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }

                try {
                    this.endpoints;
                    {
                        this.endpoints.remove(e.LocalEndpoint);
                    }
                } catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }
            },
            CheckConnection: function (endpoint) {
                try {
                    var e;
                    this.endpoints;
                    {
                        try {
                            e = this.endpoints.getItem(endpoint);
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                            if (Bridge.is($e1, RobotRaconteurWeb.KeyNotFoundException)) {
                                throw new RobotRaconteurWeb.InvalidEndpointException("Invalid endpoint");
                            } else {
                                throw $e1;
                            }
                        }
                    }

                    var c;
                    this.transports;
                    {
                        try {
                            c = this.transports.getItem(e.transport);
                        } catch ($e2) {
                            $e2 = System.Exception.create($e2);
                            if (Bridge.is($e2, RobotRaconteurWeb.KeyNotFoundException)) {
                                throw new RobotRaconteurWeb.ConnectionException("Transport not found");
                            } else {
                                throw $e2;
                            }
                        }
                    }
                    c.CheckConnection(endpoint);
                } catch ($e3) {
                    $e3 = System.Exception.create($e3);
                    if (Bridge.is($e3, RobotRaconteurWeb.KeyNotFoundException)) {
                        throw new RobotRaconteurWeb.ConnectionException("Transport not connected");
                    } else {
                        throw $e3;
                    }
                }

            },
            Shutdown: function () {
                var $t, $t1, $t2, $t3;

                this.shutdown_token.cancel();

                var cc;
                this.transports;
                {
                    cc = ($t = RobotRaconteurWeb.Transport, System.Linq.Enumerable.from(this.transports.Values, $t).ToArray($t));
                }

                $t1 = Bridge.getEnumerator(cc);
                try {
                    while ($t1.moveNext()) {
                        var c = $t1.Current;
                        try {
                            c.Close();
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                        ;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }

                var sc;
                this.services;
                {
                    sc = ($t2 = RobotRaconteurWeb.ServerContext, System.Linq.Enumerable.from(this.services.Values, $t2).ToArray($t2));
                }

                $t3 = Bridge.getEnumerator(sc);
                try {
                    while ($t3.moveNext()) {
                        var c1 = $t3.Current;
                        try {
                            c1.Close();
                        } catch ($e2) {
                            $e2 = System.Exception.create($e2);
                        }
                        ;
                    }
                } finally {
                    if (Bridge.is($t3, System.IDisposable)) {
                        $t3.System$IDisposable$Dispose();
                    }
                }

                this.endpoints;
                {
                    try {
                        this.endpoints.clear();
                    } catch ($e3) {
                        $e3 = System.Exception.create($e3);
                    }
                }



            },
            NodeAnnouncePacketReceived: function (packet) {
                try {
                    var seed = "Robot Raconteur Node Discovery Packet";
                    if (Bridge.referenceEquals(packet.substr(0, seed.length), seed)) {
                        this.m_DiscoveredNodes;
                        {
                            var lines = System.String.split(packet, System.Array.init([10], System.Char).map(function (i) {{ return String.fromCharCode(i); }}));
                            var idline = System.String.split(lines[System.Array.index(1, lines)], System.Array.init([44], System.Char).map(function (i) {{ return String.fromCharCode(i); }}));

                            var nodeid = new RobotRaconteurWeb.NodeID.$ctor1(idline[System.Array.index(0, idline)]);

                            var nodename = idline[System.Array.index(1, idline)];
                            var url = lines[System.Array.index(2, lines)];


                            if (System.Linq.Enumerable.from(this.m_DiscoveredNodes.Keys, System.String).contains(nodeid.toString())) {
                                var i = this.m_DiscoveredNodes.getItem(nodeid.toString());
                                i.NodeName = nodename;
                                if (!System.Linq.Enumerable.from(i.URLs, RobotRaconteurWeb.NodeDiscoveryInfoURL).any(function (x) {
                                        return Bridge.referenceEquals(x.URL, url);
                                    })) {
                                    var u = new RobotRaconteurWeb.NodeDiscoveryInfoURL();
                                    u.URL = url;
                                    u.LastAnnounceTime = System.DateTime.getUtcNow();
                                    i.URLs.add(u);
                                } else {
                                    System.Linq.Enumerable.from(i.URLs, RobotRaconteurWeb.NodeDiscoveryInfoURL).first(function (x) {
                                            return Bridge.referenceEquals(x.URL, url);
                                        }).LastAnnounceTime = System.DateTime.getUtcNow();
                                }
                            } else {
                                var i1 = new RobotRaconteurWeb.NodeDiscoveryInfo();
                                i1.NodeID = nodeid;
                                i1.NodeName = nodename;
                                var u1 = new RobotRaconteurWeb.NodeDiscoveryInfoURL();
                                u1.URL = url;
                                u1.LastAnnounceTime = System.DateTime.getUtcNow();
                                i1.URLs.add(u1);
                                this.m_DiscoveredNodes.add(nodeid.toString(), i1);
                            }
                        }

                    }

                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
                ;


            },
            NodeDetected: function (n) {
                var $t, $t1;
                try {
                    this.m_DiscoveredNodes;
                    {
                        if (System.Linq.Enumerable.from(this.m_DiscoveredNodes.Keys, System.String).contains(n.NodeID.toString())) {
                            var i = this.m_DiscoveredNodes.getItem(n.NodeID.toString());
                            i.NodeName = n.NodeName;
                            $t = Bridge.getEnumerator(n.URLs);
                            try {
                                while ($t.moveNext()) {
                                    var url = { v : $t.Current };
                                    if (!System.Linq.Enumerable.from(i.URLs, RobotRaconteurWeb.NodeDiscoveryInfoURL).any((function ($me, url) {
                                            return function (x) {
                                                return Bridge.referenceEquals(x.URL, url.v.URL);
                                            };
                                        })(this, url))) {
                                        var u = new RobotRaconteurWeb.NodeDiscoveryInfoURL();
                                        u.URL = url.v.URL;
                                        u.LastAnnounceTime = System.DateTime.getUtcNow();
                                        i.URLs.add(u);
                                    } else {
                                        System.Linq.Enumerable.from(i.URLs, RobotRaconteurWeb.NodeDiscoveryInfoURL).first((function ($me, url) {
                                                return function (x) {
                                                    return Bridge.referenceEquals(x.URL, url.v.URL);
                                                };
                                            })(this, url)).LastAnnounceTime = System.DateTime.getUtcNow();
                                    }
                                }
                            } finally {
                                if (Bridge.is($t, System.IDisposable)) {
                                    $t.System$IDisposable$Dispose();
                                }
                            }
                        } else {
                            $t1 = Bridge.getEnumerator(n.URLs);
                            try {
                                while ($t1.moveNext()) {
                                    var u1 = $t1.Current;
                                    u1.LastAnnounceTime = System.DateTime.getUtcNow();
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$Dispose();
                                }
                            }
                            this.m_DiscoveredNodes.add(n.NodeID.toString(), n);
                        }
                    }
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }

            },
            CleanDiscoveredNodes: function () {
                var $t, $t1, $t2;
                try {
                    this.m_DiscoveredNodes;
                    {
                        var now = System.DateTime.getUtcNow();

                        var keys = ($t = System.String, System.Linq.Enumerable.from(this.m_DiscoveredNodes.Keys, $t).ToArray($t));
                        $t1 = Bridge.getEnumerator(keys);
                        try {
                            while ($t1.moveNext()) {
                                var key = $t1.Current;
                                var newurls = new (System.Collections.Generic.List$1(RobotRaconteurWeb.NodeDiscoveryInfoURL)).ctor();
                                var urls = this.m_DiscoveredNodes.getItem(key).URLs.ToArray();
                                $t2 = Bridge.getEnumerator(urls);
                                try {
                                    while ($t2.moveNext()) {
                                        var u = $t2.Current;

                                        var time = (System.DateTime.subdd(now, u.LastAnnounceTime)).getTotalMilliseconds();
                                        if (time < 60000) {
                                            newurls.add(u);
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$Dispose();
                                    }
                                }

                                this.m_DiscoveredNodes.getItem(key).URLs = newurls;

                                if (newurls.Count === 0) {
                                    this.m_DiscoveredNodes.remove(key);
                                }

                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$Dispose();
                            }
                        }


                    }
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }

            },
            UpdateDetectedNodes: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    tasks, 
                    t, 
                    $t, 
                    t2, 
                    $t1, 
                    t21, 
                    task1, 
                    $t2, 
                    t22, 
                    info, 
                    $t3, 
                    i, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,4,5,6,7,8], $step);
                                switch ($step) {
                                    case 0: {
                                        tasks = new (System.Collections.Generic.List$1(System.Threading.Tasks.Task$1(System.Collections.Generic.List$1(RobotRaconteurWeb.NodeDiscoveryInfo)))).ctor();
                                        t = new (System.Collections.Generic.List$1(RobotRaconteurWeb.Transport)).ctor();
                                        this.transports;
                                        {
                                            $t = Bridge.getEnumerator(this.transports.Values);
                                            try {
                                                while ($t.moveNext()) {
                                                    t2 = $t.Current;
                                                    t.add(t2);
                                                }
                                            } finally {
                                                if (Bridge.is($t, System.IDisposable)) {
                                                    $t.System$IDisposable$Dispose();
                                                }
                                            }
                                        }

                                        $t1 = Bridge.getEnumerator(t);
                                        try {
                                            while ($t1.moveNext()) {
                                                t21 = $t1.Current;
                                                task1 = t21.GetDetectedNodes(cancel);
                                                tasks.add(task1);
                                            }
                                        } finally {
                                            if (Bridge.is($t1, System.IDisposable)) {
                                                $t1.System$IDisposable$Dispose();
                                            }
                                        }

                                        $task1 = System.Threading.Tasks.Task.whenAll(tasks);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $t2 = Bridge.getEnumerator(tasks);
                                        $step = 2;
                                        continue;
                                    }
                                    case 2: {
                                        if ($t2.moveNext()) {
                                            t22 = $t2.Current;
                                            $step = 3;
                                            continue;
                                        }
                                        $step = 8;
                                        continue;
                                    }

                                    case 4: {
                                        $task2 = t22;
                                        $step = 5;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        info = $taskResult2;
                                        $t3 = Bridge.getEnumerator(info);
                                        try {
                                            while ($t3.moveNext()) {
                                                i = $t3.Current;
                                                this.NodeDetected(i);
                                            }
                                        } finally {
                                            if (Bridge.is($t3, System.IDisposable)) {
                                                $t3.System$IDisposable$Dispose();
                                            }
                                        }
                                        $step = 7;
                                        continue;
                                    }
                                    case 6: {
                                        $async_e = null;
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        $step = 2;
                                        continue;
                                    }
                                    case 8: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 4 && $step <= 5 ) {
                                $step = 6;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoFindServiceByType: function (urls, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ind, 
                    $t, 
                    NodeID, 
                    NodeName, 
                    inf, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2], $step);
                                switch ($step) {
                                    case 0: {
                                        $task1 = this.ConnectService$1(($t = System.String, System.Linq.Enumerable.from(urls, $t).ToArray($t)), void 0, void 0, void 0, void 0, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ind = Bridge.cast($taskResult1, RobotRaconteurServiceIndex.ServiceIndex);
                                        NodeID = Bridge.cast(ind, RobotRaconteurWeb.ServiceStub).RRContext.RemoteNodeID.ToByteArray();
                                        NodeName = Bridge.cast(ind, RobotRaconteurWeb.ServiceStub).RRContext.RemoteNodeName;
                                        $task2 = ind.RobotRaconteurServiceIndex$ServiceIndex$GetLocalNodeServices(cancel);
                                        $step = 2;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        inf = $taskResult2;
                                        $tcs.setResult({ Item1: NodeID, Item2: NodeName, Item3: inf });
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindServiceByType: function (servicetype, transportschemes) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    cancel, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        cancel = new System.Threading.CancellationTokenSource();
                                        cancel.cancelAfter(5000);
                                        $task1 = this.FindServiceByType$1(servicetype, transportschemes, cancel.token);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindServiceByType$1: function (servicetype, transportschemes, cancel) {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $task3, 
                    $taskResult3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    services, 
                    nodeids, 
                    $t, 
                    info_wait, 
                    urls, 
                    $t1, 
                    url, 
                    $t2, 
                    s, 
                    $e1, 
                    $e2, 
                    waittask, 
                    i1, 
                    inf, 
                    n, 
                    $t3, 
                    ii, 
                    $t4, 
                    impl, 
                    $e3, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4,5,6,7,8,9,11,12,13,15,16], $step);
                                switch ($step) {

                                    case 1: {
                                        $task1 = this.UpdateDetectedNodes(cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        ;

                                        services = new (System.Collections.Generic.List$1(RobotRaconteurWeb.ServiceInfo2)).ctor();
                                        this.m_DiscoveredNodes;
                                        {

                                            nodeids = ($t = System.String, System.Linq.Enumerable.from(this.DiscoveredNodes.Keys, $t).toList($t));

                                        }

                                        info_wait = new (System.Collections.Generic.List$1(System.Threading.Tasks.Task$1(System.Tuple$3(System.Array.type(System.Byte),System.String,System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.ServiceInfo))))).ctor();

                                        for (var i = 0; i < nodeids.Count; i = (i + 1) | 0) {

                                            try {
                                                urls = new (System.Collections.Generic.List$1(System.String)).ctor();
                                                this.m_DiscoveredNodes;
                                                {
                                                    $t1 = Bridge.getEnumerator(this.m_DiscoveredNodes.getItem(nodeids.getItem(i)).URLs);
                                                    try {
                                                        while ($t1.moveNext()) {
                                                            url = $t1.Current;
                                                            $t2 = Bridge.getEnumerator(transportschemes);
                                                            try {
                                                                while ($t2.moveNext()) {
                                                                    s = $t2.Current;
                                                                    if (System.String.startsWith(url.URL, (s || "") + "://")) {
                                                                        urls.add(url.URL);
                                                                        break;
                                                                    }

                                                                }
                                                            } finally {
                                                                if (Bridge.is($t2, System.IDisposable)) {
                                                                    $t2.System$IDisposable$Dispose();
                                                                }
                                                            }
                                                        }
                                                    } finally {
                                                        if (Bridge.is($t1, System.IDisposable)) {
                                                            $t1.System$IDisposable$Dispose();
                                                        }
                                                    }
                                                }
                                                if (urls.Count > 0) {
                                                    info_wait.add(this.DoFindServiceByType(urls.ToArray(), cancel));
                                                }
                                            } catch ($e1) {
                                                $e1 = System.Exception.create($e1);
                                                try {
                                                    this.m_DiscoveredNodes;
                                                    {
                                                        this.m_DiscoveredNodes.remove(nodeids.getItem(i));
                                                    }
                                                } catch ($e2) {
                                                    $e2 = System.Exception.create($e2);
                                                }
                                            }

                                        }

                                        if (info_wait.Count === 0) {
                                            $tcs.setResult(System.Array.init(0, null, RobotRaconteurWeb.ServiceInfo2));
                                            return;
                                        }

                                        
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        waittask = System.Threading.Tasks.Task.whenAll(info_wait);

                                        $task2 = waittask;
                                        $step = 6;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $task2.getAwaitedResult();
                                        $step = 8;
                                        continue;
                                    }
                                    case 7: {
                                        $async_e = null;
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        i1 = 0;
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        if ( i1 < nodeids.Count ) {
                                            $step = 10;
                                            continue;
                                        }
                                        $step = 16;
                                        continue;
                                    }

                                    case 11: {
                                        if (!info_wait.getItem(i1).isCompleted()) {
                                            throw new System.TimeoutException.$ctor1("Timeout");
                                        }

                                        $task3 = info_wait.getItem(i1);
                                        $step = 12;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 12: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        inf = $taskResult3;


                                        n = new RobotRaconteurServiceIndex.NodeInfo();
                                        n.NodeID = inf.Item1;
                                        n.NodeName = inf.Item2;


                                        $t3 = Bridge.getEnumerator(inf.Item3.Values);
                                        try {
                                            while ($t3.moveNext()) {
                                                ii = $t3.Current;
                                                if (Bridge.referenceEquals(ii.RootObjectType, servicetype)) {
                                                    services.add(new RobotRaconteurWeb.ServiceInfo2.$ctor1(ii, n));
                                                } else {
                                                    $t4 = Bridge.getEnumerator(ii.RootObjectImplements.Values);
                                                    try {
                                                        while ($t4.moveNext()) {
                                                            impl = $t4.Current;
                                                            if (Bridge.referenceEquals(impl, servicetype)) {
                                                                services.add(new RobotRaconteurWeb.ServiceInfo2.$ctor1(ii, n));
                                                            }
                                                        }
                                                    } finally {
                                                        if (Bridge.is($t4, System.IDisposable)) {
                                                            $t4.System$IDisposable$Dispose();
                                                        }
                                                    }

                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t3, System.IDisposable)) {
                                                $t3.System$IDisposable$Dispose();
                                            }
                                        }
                                        $step = 14;
                                        continue;
                                    }
                                    case 13: {
                                        try {
                                            this.m_DiscoveredNodes;
                                            {
                                                this.m_DiscoveredNodes.remove(nodeids.getItem(i1));
                                            }
                                        } catch ($e3) {
                                            $e3 = System.Exception.create($e3);
                                        }
                                        $async_e = null;
                                        $step = 14;
                                        continue;
                                    }

                                    case 15: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 9;
                                        continue;
                                    }
                                    case 16: {
                                        $tcs.setResult(services.ToArray());
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            if ( $step >= 5 && $step <= 6 ) {
                                $step = 7;
                                $asyncBody();
                                return;
                            }
                            if ( $step >= 11 && $step <= 12 ) {
                                $step = 13;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindNodeByID: function (id, schemes) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    cancel, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        cancel = new System.Threading.CancellationTokenSource();
                                        cancel.cancelAfter(5000);
                                        $task1 = this.FindNodeByID$1(id, schemes, cancel.token);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindNodeByID$1: function (id, schemes, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    o, 
                    nodeid_str, 
                    ni, 
                    n, 
                    c, 
                    $t, 
                    url, 
                    u, 
                    short_url, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4], $step);
                                switch ($step) {

                                    case 1: {
                                        $task1 = this.UpdateDetectedNodes(cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        ;

                                        o = new (System.Collections.Generic.List$1(RobotRaconteurWeb.NodeInfo2)).ctor();

                                        this.m_DiscoveredNodes;
                                        {
                                            nodeid_str = id.toString();
                                            if (this.m_DiscoveredNodes.containsKey(nodeid_str)) {
                                                ni = this.m_DiscoveredNodes.getItem(nodeid_str);
                                                n = new RobotRaconteurWeb.NodeInfo2();
                                                n.NodeID = new RobotRaconteurWeb.NodeID.$ctor1(nodeid_str);
                                                n.NodeName = ni.NodeName;

                                                c = new (System.Collections.Generic.List$1(System.String)).ctor();

                                                $t = Bridge.getEnumerator(ni.URLs);
                                                try {
                                                    while ($t.moveNext()) {
                                                        url = $t.Current;
                                                        u = { v : RobotRaconteurWeb.TransportUtil.ParseConnectionUrl(url.URL) };
                                                        if (System.Linq.Enumerable.from(schemes, System.String).any((function ($me, u) {
                                                            return function (x) {
                                                                return Bridge.referenceEquals(x, u.v.scheme);
                                                            };
                                                        })(this, u))) {
                                        if (u.v.port === -1) {
                                                                short_url = (u.v.scheme || "") + "//" + (u.v.host || "") + (u.v.path || "") + "?nodeid=" + (System.String.trim(nodeid_str, System.Array.init([123, 125], System.Char)) || "");
                                                            } else {
                                                                short_url = (u.v.scheme || "") + "//" + (u.v.host || "") + ":" + u.v.port + (u.v.path || "") + "?nodeid=" + (System.String.trim(nodeid_str, System.Array.init([123, 125], System.Char)) || "");
                                                            }

                                                            c.add(short_url);
                                                        }

                                                    }
                                                } finally {
                                                    if (Bridge.is($t, System.IDisposable)) {
                                                        $t.System$IDisposable$Dispose();
                                                    }
                                                }

                                                if (c.Count !== 0) {
                                                    n.ConnectionURL = c.ToArray();
                                                    o.add(n);
                                                }
                                            }
                                        }

                                        $tcs.setResult(o.ToArray());
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindNodeByName: function (name, schemes) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    cancel, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        cancel = new System.Threading.CancellationTokenSource();
                                        cancel.cancelAfter(5000);
                                        $task1 = this.FindNodeByName$1(name, schemes, cancel.token);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindNodeByName$1: function (name, schemes, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    o, 
                    $t, 
                    e, 
                    n, 
                    nodeid_str, 
                    c, 
                    $t1, 
                    url, 
                    u, 
                    short_url, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4], $step);
                                switch ($step) {

                                    case 1: {
                                        $task1 = this.UpdateDetectedNodes(cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        ;

                                        o = new (System.Collections.Generic.List$1(RobotRaconteurWeb.NodeInfo2)).ctor();

                                        this.m_DiscoveredNodes;
                                        {
                                            $t = Bridge.getEnumerator(this.m_DiscoveredNodes);
                                            try {
                                                while ($t.moveNext()) {
                                                    e = $t.Current;
                                                    if (Bridge.referenceEquals(e.value.NodeName, name)) {
                                                        n = new RobotRaconteurWeb.NodeInfo2();
                                                        nodeid_str = e.value.NodeID.toString();
                                                        n.NodeID = new RobotRaconteurWeb.NodeID.$ctor1(nodeid_str);
                                                        n.NodeName = e.value.NodeName;

                                                        c = new (System.Collections.Generic.List$1(System.String)).ctor();

                                                        $t1 = Bridge.getEnumerator(e.value.URLs);
                                                        try {
                                                            while ($t1.moveNext()) {
                                                                url = $t1.Current;
                                                                u = { v : RobotRaconteurWeb.TransportUtil.ParseConnectionUrl(url.URL) };
                                                                if (System.Linq.Enumerable.from(schemes, System.String).any((function ($me, u) {
                                                                    return function (x) {
                                                                        return Bridge.referenceEquals(x, u.v.scheme);
                                                                    };
                                                                })(this, u))) {
                                        if (u.v.port === -1) {
                                                                        short_url = (u.v.scheme || "") + "//" + (u.v.host || "") + (u.v.path || "") + "?nodeid=" + (System.String.trim(nodeid_str, System.Array.init([123, 125], System.Char)) || "");
                                                                    } else {
                                                                        short_url = (u.v.scheme || "") + "//" + (u.v.host || "") + ":" + u.v.port + (u.v.path || "") + "?nodeid=" + (System.String.trim(nodeid_str, System.Array.init([123, 125], System.Char)) || "");
                                                                    }

                                                                    c.add(short_url);
                                                                }

                                                            }
                                                        } finally {
                                                            if (Bridge.is($t1, System.IDisposable)) {
                                                                $t1.System$IDisposable$Dispose();
                                                            }
                                                        }

                                                        if (c.Count !== 0) {
                                                            n.ConnectionURL = c.ToArray();
                                                            o.add(n);
                                                        }
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t, System.IDisposable)) {
                                                    $t.System$IDisposable$Dispose();
                                                }
                                            }
                                        }

                                        $tcs.setResult(o.ToArray());
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            RequestObjectLock: function (obj, flags, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    s, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (!(Bridge.is(obj, RobotRaconteurWeb.ServiceStub))) {
                                            throw new System.InvalidOperationException.$ctor1("Can only lock object opened through Robot Raconteur");
                                        }
                                        s = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);

                                        $task1 = s.RRContext.RequestObjectLock(obj, flags, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ReleaseObjectLock: function (obj, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    s, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (!(Bridge.is(obj, RobotRaconteurWeb.ServiceStub))) {
                                            throw new System.InvalidOperationException.$ctor1("Can only unlock object opened through Robot Raconteur");
                                        }
                                        s = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);

                                        $task1 = s.RRContext.ReleaseObjectLock(obj, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MonitorEnter: function (obj, timeout, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    s, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (timeout === void 0) { timeout = -1; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (!(Bridge.is(obj, RobotRaconteurWeb.ServiceStub))) {
                                            throw new System.InvalidOperationException.$ctor1("Only service stubs can be monitored by RobotRaconteurNode");
                                        }
                                        s = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);

                                        $task1 = s.RRContext.MonitorEnter(obj, timeout, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MonitorExit: function (lock_, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }

                                        $task1 = lock_.stub.RRContext.MonitorExit(lock_, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindObjRefTyped$1: function (obj, objref, objecttype, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    s, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (!(Bridge.is(obj, RobotRaconteurWeb.ServiceStub))) {
                                            throw new System.InvalidOperationException.$ctor1("Only service stubs can have objrefs");
                                        }
                                        s = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);

                                        $task1 = s.FindObjRefTyped$1(objref, objecttype, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            FindObjRefTyped: function (obj, objref, index, objecttype, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    s, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (!(Bridge.is(obj, RobotRaconteurWeb.ServiceStub))) {
                                            throw new System.InvalidOperationException.$ctor1("Only service stubs can have objrefs");
                                        }
                                        s = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);

                                        $task1 = s.FindObjRefTyped(objref, index, objecttype, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CreateTimer: function (period, handler, oneshot) {
                if (oneshot === void 0) { oneshot = false; }
                var t = new RobotRaconteurWeb.WallTimer(period, handler, oneshot, this);
                return t;
            },
            CreateRate: function (period) {
                return new RobotRaconteurWeb.WallRate(period, this);
            },
            GetRandomString: function (count) {
                var o = "";
                var r = new System.Random.ctor();
                var strvals = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

                for (var i = 0; i < count; i = (i + 1) | 0) {
                    o = (o || "") + String.fromCharCode(strvals.charCodeAt(r.Next$2(0, (((strvals.length - 1) | 0)))));
                }
                return o;
            },
            UpdateServiceStateNonce: function () {
                var $t;
                this;
                {
                    var new_nonce;
                    do {
                        var r = new System.Random.ctor();
                        new_nonce = this.GetRandomString(16);
                    } while (Bridge.referenceEquals(new_nonce, this.service_state_nonce));

                    this.service_state_nonce = new_nonce;
                }

                this.transports;
                {
                    $t = Bridge.getEnumerator(this.transports.Values);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            t.LocalNodeServicesChanged();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurNode.MonitorLock", {
        $kind: "nested class",
        fields: {
            lock_: null,
            stub: null
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurObjectLockFlags", {
        $kind: "enum",
        statics: {
            fields: {
                USER_LOCK: 0,
                CLIENT_LOCK: 1
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurParseException", {
        inherits: [System.Exception],
        fields: {
            lineNumber: 0
        },
        ctors: {
            ctor: function (e) {
                this.$initialize();
                System.Exception.ctor.call(this, e);

            },
            $ctor1: function (e, line) {
                this.$initialize();
                System.Exception.ctor.call(this, e);
                this.lineNumber = line;

            }
        },
        methods: {
            toString: function () {
                return "RobotRaconteur Parse Error On Line " + this.lineNumber + ": " + (this.Message || "");
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurServiceObjectInterface", {
        inherits: [System.Attribute],
        fields: {
            rrtype: null
        },
        props: {
            RRType: {
                get: function () {
                    return this.rrtype;
                }
            }
        },
        ctors: {
            ctor: function (rrtype) {
                this.$initialize();
                System.Attribute.ctor.call(this);
                this.rrtype = rrtype;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurServicePod", {
        inherits: [System.Attribute],
        fields: {
            RRType: null
        },
        ctors: {
            ctor: function (rr_type) {
                this.$initialize();
                System.Attribute.ctor.call(this);
                this.RRType = rr_type;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurServiceStruct", {
        inherits: [System.Attribute],
        fields: {
            rrtype: null
        },
        props: {
            RRType: {
                get: function () {
                    return this.rrtype;
                }
            }
        },
        ctors: {
            ctor: function (rrtype) {
                this.$initialize();
                System.Attribute.ctor.call(this);
                this.rrtype = rrtype;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurVersion", {
        $kind: "struct",
        statics: {
            methods: {
                op_Equality: function (v1, v2) {
                    return (v1.major === v2.major) && (v1.minor === v2.minor) && (v1.patch === v2.patch) && (v1.tweak === v2.tweak);
                },
                op_Inequality: function (v1, v2) {
                    return !((v1.major === v2.major) && (v1.minor === v2.minor) && (v1.patch === v2.patch) && (v1.tweak === v2.tweak));
                },
                op_GreaterThan: function (v1, v2) {
                    if (v1.major > v2.major) {
                        return true;
                    }
                    if (v1.minor > v2.minor) {
                        return true;
                    }
                    if (v1.patch > v2.patch) {
                        return true;
                    }
                    if (v1.tweak > v2.tweak) {
                        return true;
                    }
                    return false;
                },
                op_GreaterThanOrEqual: function (v1, v2) {
                    if ((v1.major === v2.major) && (v1.minor === v2.minor) && (v1.patch === v2.patch) && (v1.tweak === v2.tweak)) {
                        return true;
                    }
                    return RobotRaconteurWeb.RobotRaconteurVersion.op_GreaterThan(v1.$clone(), v2.$clone());
                },
                op_LessThan: function (v1, v2) {
                    if (v1.major < v2.major) {
                        return true;
                    }
                    if (v1.minor < v2.minor) {
                        return true;
                    }
                    if (v1.patch < v2.patch) {
                        return true;
                    }
                    if (v1.tweak < v2.tweak) {
                        return true;
                    }
                    return false;
                },
                op_LessThanOrEqual: function (v1, v2) {
                    if ((v1.major === v2.major) && (v1.minor === v2.minor) && (v1.patch === v2.patch) && (v1.tweak === v2.tweak)) {
                        return true;
                    }
                    return RobotRaconteurWeb.RobotRaconteurVersion.op_LessThan(v1.$clone(), v2.$clone());
                },
                op_Explicit: function (v1) {
                    return !((v1.major === 0) && (v1.minor === 0) && (v1.patch === 0) && (v1.tweak === 0));
                },
                getDefaultValue: function () { return new RobotRaconteurWeb.RobotRaconteurVersion(); }
            }
        },
        fields: {
            major: 0,
            minor: 0,
            patch: 0,
            tweak: 0
        },
        ctors: {
            $ctor2: function (major, minor, patch, tweak) {
                if (patch === void 0) { patch = 0; }
                if (tweak === void 0) { tweak = 0; }

                this.$initialize();
                this.major = major;
                this.minor = minor;
                this.patch = patch;
                this.tweak = tweak;
            },
            $ctor1: function (v) {
                this.$initialize();
                this.major = 0;
                this.minor = 0;
                this.patch = 0;
                this.tweak = 0;
                this.FromString(v);
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            toString: function () {
                if (this.patch === 0 && this.tweak === 0) {
                    return System.String.format("{0}.{1}", Bridge.box(this.major, System.UInt32), Bridge.box(this.minor, System.UInt32));
                } else if (this.tweak === 0) {
                    return System.String.format("{0}.{1}.{2}", Bridge.box(this.major, System.UInt32), Bridge.box(this.minor, System.UInt32), Bridge.box(this.patch, System.UInt32));
                }
                return System.String.format("{0}.{1}.{2}.{3}", Bridge.box(this.major, System.UInt32), Bridge.box(this.minor, System.UInt32), Bridge.box(this.patch, System.UInt32), Bridge.box(this.tweak, System.UInt32));
            },
            FromString: function (v) {
                var m = System.Text.RegularExpressions.Regex.match(v, "^(\\d+)\\.(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?$");
                if (!m.getSuccess()) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Format error for version definition \"" + (v || "") + "\"");
                }

                this.major = System.UInt32.parse(m.getGroups().get(1).getValue());
                this.minor = System.UInt32.parse(m.getGroups().get(2).getValue());
                this.patch = m.getGroups().get(3).getSuccess() ? System.UInt32.parse(m.getGroups().get(3).getValue()) : 0;
                this.tweak = m.getGroups().get(4).getSuccess() ? System.UInt32.parse(m.getGroups().get(4).getValue()) : 0;
            },
            getHashCode: function () {
                var h = Bridge.addHash([8807519882, this.major, this.minor, this.patch, this.tweak]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, RobotRaconteurWeb.RobotRaconteurVersion)) {
                    return false;
                }
                return Bridge.equals(this.major, o.major) && Bridge.equals(this.minor, o.minor) && Bridge.equals(this.patch, o.patch) && Bridge.equals(this.tweak, o.tweak);
            },
            $clone: function (to) {
                var s = to || new RobotRaconteurWeb.RobotRaconteurVersion();
                s.major = this.major;
                s.minor = this.minor;
                s.patch = this.patch;
                s.tweak = this.tweak;
                return s;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServerContext", {
        statics: {
            fields: {
                m_CurrentServerContext: null,
                m_CurrentServicePath: null
            },
            props: {
                CurrentServerContext: {
                    get: function () {
                        return RobotRaconteurWeb.ServerContext.m_CurrentServerContext;
                    }
                },
                CurrentServicePath: {
                    get: function () {
                        return RobotRaconteurWeb.ServerContext.m_CurrentServicePath;
                    }
                }
            }
        },
        fields: {
            Attributes: null,
            m_ServiceDef: null,
            m_ServiceName: null,
            skels: null,
            client_endpoints: null,
            m_RootObjectType: null,
            node: null,
            cancel_source: null,
            rec_sync: null,
            base_object_set: false,
            get_sub_obj_tasks: null,
            user_authenticator: null,
            security_policies: null,
            RequireValidUser: false,
            AllowObjectLock: false,
            ClientLockOp_lockobj: null,
            active_object_locks: null,
            rec_wait: null,
            request_number: 0,
            ProcessCallbackRequest_checkconnection_current: null
        },
        events: {
            ServerServiceListener: null
        },
        props: {
            ServiceDef: {
                get: function () {
                    return this.m_ServiceDef;
                }
            },
            ServiceName: {
                get: function () {
                    return this.m_ServiceName;
                }
            },
            RootObjectType: {
                get: function () {
                    return this.m_RootObjectType;
                }
            }
        },
        ctors: {
            init: function () {
                this.Attributes = new (System.Collections.Generic.Dictionary$2(System.String,System.Object)).ctor();
                this.skels = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceSkel)).ctor();
                this.client_endpoints = new (System.Collections.Generic.Dictionary$2(System.UInt32,RobotRaconteurWeb.ServerEndpoint)).ctor();
                this.m_RootObjectType = "";
                this.cancel_source = new System.Threading.CancellationTokenSource();
                this.rec_sync = { };
                this.base_object_set = false;
                this.get_sub_obj_tasks = new (System.Collections.Generic.Dictionary$2(System.String,System.Threading.Tasks.Task$1(RobotRaconteurWeb.ServiceSkel))).ctor();
                this.RequireValidUser = false;
                this.AllowObjectLock = false;
                this.ClientLockOp_lockobj = { };
                this.active_object_locks = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServerContext.ObjectLock)).ctor();
                this.rec_wait = new (System.Collections.Generic.Dictionary$2(System.UInt32,System.Tuple$2(System.Threading.Tasks.TaskCompletionSource,RobotRaconteurWeb.ServerEndpoint))).ctor();
                this.request_number = 0;
            },
            ctor: function (f, node) {
                if (node === void 0) { node = null; }

                this.$initialize();
                this.m_ServiceDef = f;
                if (node != null) {
                    this.node = node;
                } else {
                    this.node = RobotRaconteurWeb.RobotRaconteurNode.s;
                }

                var noop = RobotRaconteurWeb.PeriodicTask.Run$1(Bridge.fn.cacheBind(this, this.PeriodicCleanupTask), System.TimeSpan.fromSeconds(5), this.cancel_source.token);
            }
        },
        methods: {
            SendEvent: function (m) {
                var $t, $t1;


                var mm = new RobotRaconteurWeb.Message();

                var cc;
                this.client_endpoints;
                {
                    cc = ($t = RobotRaconteurWeb.ServerEndpoint, System.Linq.Enumerable.from(this.client_endpoints.Values, $t).ToArray($t));
                }

                $t1 = Bridge.getEnumerator(cc);
                try {
                    while ($t1.moveNext()) {
                        var c = { v : $t1.Current };

                        if (this.RequireValidUser) {
                            if (System.String.isNullOrWhiteSpace(c.v.AuthenticatedUsername)) {
                                continue;
                            }
                        }

                        try {
                            this.node.CheckConnection(c.v.LocalEndpoint);
                            this.SendMessage(m, c.v, Bridge.getDefaultValue(System.Threading.CancellationToken)).continueWith((function ($me, c) {
                                return Bridge.fn.bind($me, function (t) {
                                    var e = t.getException();
                                    if (e != null) {
                                        try {
                                            this.RemoveClient(c.v);
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                        }
                                        ;
                                    }
                                });
                            })(this, c));
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                            try {
                                this.RemoveClient(c.v);
                            } catch ($e2) {
                                $e2 = System.Exception.create($e2);
                            }
                            ;
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }

                return System.Threading.Tasks.Task.fromResult(0, System.Int32);

            },
            SendMessage: function (m, e, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mm, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mm = new RobotRaconteurWeb.Message();
                                        mm.header = new RobotRaconteurWeb.MessageHeader();
                                        mm.entries.add(m);

                                        $task1 = e.SendMessage(mm, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SetSecurityPolicy: function (policy) {
                this.user_authenticator = policy.Authenticator;
                this.security_policies = policy.Policies;

                if (System.Linq.Enumerable.from(this.security_policies.Keys, System.String).contains("requirevaliduser")) {
                    if (Bridge.referenceEquals(this.security_policies.getItem("requirevaliduser").toLowerCase(), "true")) {
                        this.RequireValidUser = true;
                    }
                }

                if (System.Linq.Enumerable.from(this.security_policies.Keys, System.String).contains("allowobjectlock")) {
                    if (Bridge.referenceEquals(this.security_policies.getItem("allowobjectlock").toLowerCase(), "true")) {
                        this.AllowObjectLock = true;
                    }
                }


            },
            SetBaseObject: function (name, o, policy) {
                if (policy === void 0) { policy = null; }
                if (this.base_object_set) {
                    throw new System.InvalidOperationException.$ctor1("Base object already set");
                }

                if (policy != null) {
                    this.SetSecurityPolicy(policy);
                }

                this.m_ServiceName = name;
                var s = this.ServiceDef.CreateSkel(name, o, this);

                this.m_RootObjectType = System.String.replaceAll(Bridge.getTypeName(Bridge.getType(s)), "_skel", "");
                this.base_object_set = true;
                this.skels;
                {
                    this.skels.setItem(name, s);
                }

            },
            GetObjectSkel: function (servicepath) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    p, 
                    ppath, 
                    skel, 
                    skel1, 
                    i, 
                    ppath1, 
                    t, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,4,5,6,8,9,10], $step);
                                switch ($step) {
                                    case 0: {
                                        p = System.String.split(servicepath, System.Array.init([46], System.Char).map(function (i) {{ return String.fromCharCode(i); }}));

                                        ppath = p[System.Array.index(0, p)];

                                        this.skels;
                                        {
                                            skel = this.skels.getItem(ppath);
                                        }

                                        skel1 = skel;

                                        i = 1;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( i < p.length ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 10;
                                        continue;
                                    }
                                    case 2: {
                                        ppath1 = ppath;
                                        ppath = System.Array.init([ppath, p[System.Array.index(i, p)]], System.String).join(".");

                                        skel1 = null;
                                        this.skels;
                                        {
                                            if (System.Linq.Enumerable.from(this.skels.Keys, System.String).contains(ppath)) {
                                                skel1 = this.skels.getItem(ppath);
                                            }
                                        }

                                        if (skel1 == null) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 8;
                                        continue;
                                    }

                                    case 4: {
                                        this.get_sub_obj_tasks;
                                        {
                                            if (this.get_sub_obj_tasks.containsKey(ppath)) {
                                                t = this.get_sub_obj_tasks.getItem(ppath);
                                            } else {
                                                t = this.GetObjectSkel2(ppath1, p[System.Array.index(i, p)], skel);
                                                this.get_sub_obj_tasks.add(ppath, t);
                                            }

                                        }

                                        $task1 = t;
                                        $step = 5;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        skel1 = $taskResult1;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        this.get_sub_obj_tasks;
                                        {
                                            if (this.get_sub_obj_tasks.containsKey(ppath)) {
                                                this.get_sub_obj_tasks.remove(ppath);
                                            }
                                        }

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 7;
                                        continue;
                                    }

                                    case 8: {
                                        skel = skel1;
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        i = (i + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 10: {
                                        $tcs.setResult(skel);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 4 && $step <= 5) {
                                $step = 6;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetObjectSkel2: function (ppath1, objname, skel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    obj1, 
                    ppath, 
                    skel1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        RobotRaconteurWeb.ServerContext.m_CurrentServicePath = ppath1;
                                        RobotRaconteurWeb.ServerContext.m_CurrentServerContext = this;
                                        $task1 = skel.GetSubObj(objname);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        obj1 = $taskResult1;
                                        RobotRaconteurWeb.ServerContext.m_CurrentServicePath = null;
                                        RobotRaconteurWeb.ServerContext.m_CurrentServerContext = null;

                                        ppath = System.Array.init([ppath1, objname], System.String).join(".");

                                        skel1 = this.ServiceDef.CreateSkel(ppath, obj1, this);
                                        if (skel.objectlock != null) {
                                            skel.objectlock.AddSkel(skel1);
                                        }
                                        this.skels.setItem(ppath, skel1);
                                        $tcs.setResult(skel1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ReplaceObject: function (path) {

                this.ReleaseServicePath(path);


            },
            GetObjectType: function (servicepath) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    s, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        $task1 = this.GetObjectSkel(servicepath);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        s = $taskResult1;

                                        if (Bridge.is(s, RobotRaconteurWeb.ServiceSkelDynamic)) {
                                            $tcs.setResult(Bridge.cast(s, RobotRaconteurWeb.ServiceSkelDynamic).RobotRaconteurWeb$ServiceSkelDynamic$GetObjectType());
                                            return;
                                        }
                                        $tcs.setResult(System.Text.RegularExpressions.Regex.replace(Bridge.getTypeName(Bridge.getType(s)), "_skel", ""));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ProcessMessageEntry: function (m, c) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $taskResult3, 
                    $task4, 
                    $taskResult4, 
                    $task5, 
                    $taskResult5, 
                    $task6, 
                    $taskResult6, 
                    $task7, 
                    $taskResult7, 
                    $task8, 
                    $taskResult8, 
                    $task9, 
                    $taskResult9, 
                    $task10, 
                    $taskResult10, 
                    $task11, 
                    $taskResult11, 
                    $task12, 
                    $taskResult12, 
                    $task13, 
                    $taskResult13, 
                    $task14, 
                    $taskResult14, 
                    $task15, 
                    $taskResult15, 
                    $task16, 
                    $taskResult16, 
                    $task17, 
                    $taskResult17, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    noreturn, 
                    ret, 
                    skel, 
                    skel1, 
                    skel2, 
                    skel3, 
                    skel4, 
                    skel5, 
                    r, 
                    t_id, 
                    skel6, 
                    e, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,42,43,44], $step);
                                switch ($step) {
                                    case 0: {
                                        noreturn = false;
                                        ret = null;


                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.ServicePathReleasedRet) {
                                            $tcs.setResult(null);
                                            return;
                                        }

                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.ClientSessionOpReq) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        $task1 = this.ClientSessionOp(m, c);
                                        $step = 3;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult($taskResult1);
                                        return;
                                    }
                                    case 4: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.ClientKeepAliveReq) {
                                            ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientKeepAliveRet, m.MemberName);
                                            ret.RequestID = m.RequestID;
                                            ret.ServicePath = m.ServicePath;
                                            $tcs.setResult(ret);
                                            return;
                                        }

                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.ServiceCheckCapabilityReq) {
                                            ret = this.CheckServiceCapability(m, c);
                                        }



                                        if (this.RequireValidUser) {
                                            if (RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser == null) {
                                                throw new RobotRaconteurWeb.AuthenticationException("User must authenticate before accessing this service");
                                            }
                                        }

                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PipePacket || m.EntryType === RobotRaconteurWeb.MessageEntryType.PipePacketRet) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $task2 = this.GetObjectSkel(m.ServicePath);
                                        $step = 6;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        ($taskResult2).DispatchPipeMessage(m, c);
                                        ret = null;
                                        noreturn = true;
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePacket) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 10;
                                        continue;
                                    }
                                    case 8: {
                                        $task3 = this.GetObjectSkel(m.ServicePath);
                                        $step = 9;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 9: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        ($taskResult3).DispatchWireMessage(m, c);
                                        ret = null;
                                        noreturn = true;
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {
                                        RobotRaconteurWeb.ServerContext.m_CurrentServicePath = m.ServicePath;
                                        RobotRaconteurWeb.ServerContext.m_CurrentServerContext = this;


                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PropertyGetReq) {
                                            $step = 11;
                                            continue;
                                        } 
                                        $step = 14;
                                        continue;
                                    }
                                    case 11: {
                                        $task4 = this.GetObjectSkel(m.ServicePath);
                                        $step = 12;
                                        if ($task4.isCompleted()) {
                                            continue;
                                        }
                                        $task4.continue($asyncBody);
                                        return;
                                    }
                                    case 12: {
                                        $taskResult4 = $task4.getAwaitedResult();
                                        skel = $taskResult4;
                                        this.check_lock(skel);
                                        $task5 = skel.CallGetProperty(m);
                                        $step = 13;
                                        if ($task5.isCompleted()) {
                                            continue;
                                        }
                                        $task5.continue($asyncBody);
                                        return;
                                    }
                                    case 13: {
                                        $taskResult5 = $task5.getAwaitedResult();
                                        ret = $taskResult5;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PropertySetReq) {
                                            $step = 15;
                                            continue;
                                        } 
                                        $step = 18;
                                        continue;
                                    }
                                    case 15: {
                                        $task6 = this.GetObjectSkel(m.ServicePath);
                                        $step = 16;
                                        if ($task6.isCompleted()) {
                                            continue;
                                        }
                                        $task6.continue($asyncBody);
                                        return;
                                    }
                                    case 16: {
                                        $taskResult6 = $task6.getAwaitedResult();
                                        skel1 = $taskResult6;
                                        this.check_lock(skel1);
                                        $task7 = skel1.CallSetProperty(m);
                                        $step = 17;
                                        if ($task7.isCompleted()) {
                                            continue;
                                        }
                                        $task7.continue($asyncBody);
                                        return;
                                    }
                                    case 17: {
                                        $taskResult7 = $task7.getAwaitedResult();
                                        ret = $taskResult7;
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.FunctionCallReq) {
                                            $step = 19;
                                            continue;
                                        } 
                                        $step = 22;
                                        continue;
                                    }
                                    case 19: {
                                        $task8 = this.GetObjectSkel(m.ServicePath);
                                        $step = 20;
                                        if ($task8.isCompleted()) {
                                            continue;
                                        }
                                        $task8.continue($asyncBody);
                                        return;
                                    }
                                    case 20: {
                                        $taskResult8 = $task8.getAwaitedResult();
                                        skel2 = $taskResult8;
                                        this.check_lock(skel2);
                                        $task9 = skel2.CallFunction(m);
                                        $step = 21;
                                        if ($task9.isCompleted()) {
                                            continue;
                                        }
                                        $task9.continue($asyncBody);
                                        return;
                                    }
                                    case 21: {
                                        $taskResult9 = $task9.getAwaitedResult();
                                        ret = $taskResult9;
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PipeConnectReq || m.EntryType === RobotRaconteurWeb.MessageEntryType.PipeDisconnectReq) {
                                            $step = 23;
                                            continue;
                                        } 
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        $task10 = this.GetObjectSkel(m.ServicePath);
                                        $step = 24;
                                        if ($task10.isCompleted()) {
                                            continue;
                                        }
                                        $task10.continue($asyncBody);
                                        return;
                                    }
                                    case 24: {
                                        $taskResult10 = $task10.getAwaitedResult();
                                        skel3 = $taskResult10;
                                        this.check_lock(skel3);
                                        $task11 = skel3.CallPipeFunction(m, c);
                                        $step = 25;
                                        if ($task11.isCompleted()) {
                                            continue;
                                        }
                                        $task11.continue($asyncBody);
                                        return;
                                    }
                                    case 25: {
                                        $taskResult11 = $task11.getAwaitedResult();
                                        ret = $taskResult11;
                                        $step = 26;
                                        continue;
                                    }
                                    case 26: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.WireConnectReq || m.EntryType === RobotRaconteurWeb.MessageEntryType.WireDisconnectReq || m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePeekInValueReq || m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePeekOutValueReq || m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePokeOutValueReq) {
                                            $step = 27;
                                            continue;
                                        } 
                                        $step = 30;
                                        continue;
                                    }
                                    case 27: {
                                        $task12 = this.GetObjectSkel(m.ServicePath);
                                        $step = 28;
                                        if ($task12.isCompleted()) {
                                            continue;
                                        }
                                        $task12.continue($asyncBody);
                                        return;
                                    }
                                    case 28: {
                                        $taskResult12 = $task12.getAwaitedResult();
                                        skel4 = $taskResult12;
                                        this.check_lock(skel4);
                                        $task13 = skel4.CallWireFunction(m, c);
                                        $step = 29;
                                        if ($task13.isCompleted()) {
                                            continue;
                                        }
                                        $task13.continue($asyncBody);
                                        return;
                                    }
                                    case 29: {
                                        $taskResult13 = $task13.getAwaitedResult();
                                        ret = $taskResult13;
                                        $step = 30;
                                        continue;
                                    }
                                    case 30: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.MemoryWrite || m.EntryType === RobotRaconteurWeb.MessageEntryType.MemoryRead || m.EntryType === RobotRaconteurWeb.MessageEntryType.MemoryGetParam) {
                                            $step = 31;
                                            continue;
                                        } else  {
                                            $step = 34;
                                            continue;
                                        }
                                    }
                                    case 31: {
                                        $task14 = this.GetObjectSkel(m.ServicePath);
                                        $step = 32;
                                        if ($task14.isCompleted()) {
                                            continue;
                                        }
                                        $task14.continue($asyncBody);
                                        return;
                                    }
                                    case 32: {
                                        $taskResult14 = $task14.getAwaitedResult();
                                        skel5 = $taskResult14;
                                        this.check_lock(skel5);
                                        $task15 = skel5.CallMemoryFunction(m, c);
                                        $step = 33;
                                        if ($task15.isCompleted()) {
                                            continue;
                                        }
                                        $task15.continue($asyncBody);
                                        return;
                                    }
                                    case 33: {
                                        $taskResult15 = $task15.getAwaitedResult();
                                        ret = $taskResult15;
                                        $step = 42;
                                        continue;
                                    }
                                    case 34: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.CallbackCallRet) {
                                            $step = 35;
                                            continue;
                                        } else  {
                                            $step = 36;
                                            continue;
                                        }
                                    }
                                    case 35: {
                                        r = null;
                                        this.rec_wait;
                                        {
                                            t_id = m.RequestID;
                                            if (this.rec_wait.containsKey(t_id)) {
                                                r = this.rec_wait.getItem(t_id).Item1;
                                            }
                                        }

                                        if (r != null) {
                                            r.trySetResult(m);
                                        }
                                        noreturn = true;
                                        $step = 41;
                                        continue;
                                    }
                                    case 36: {
                                        if (m.EntryType === RobotRaconteurWeb.MessageEntryType.GeneratorNextReq) {
                                            $step = 37;
                                            continue;
                                        } 
                                        $step = 40;
                                        continue;
                                    }
                                    case 37: {
                                        $task16 = this.GetObjectSkel(m.ServicePath);
                                        $step = 38;
                                        if ($task16.isCompleted()) {
                                            continue;
                                        }
                                        $task16.continue($asyncBody);
                                        return;
                                    }
                                    case 38: {
                                        $taskResult16 = $task16.getAwaitedResult();
                                        skel6 = $taskResult16;
                                        this.check_lock(skel6);
                                        $task17 = skel6.CallGeneratorNext(m, c);
                                        $step = 39;
                                        if ($task17.isCompleted()) {
                                            continue;
                                        }
                                        $task17.continue($asyncBody);
                                        return;
                                    }
                                    case 39: {
                                        $taskResult17 = $task17.getAwaitedResult();
                                        ret = $taskResult17;
                                        noreturn = true;
                                        $step = 40;
                                        continue;
                                    }


                                    case 42: {
                                        $step = 44;
                                        continue;
                                    }
                                    case 43: {
                                        ret = new RobotRaconteurWeb.MessageEntry.$ctor1(((m.EntryType + 1) | 0), m.MemberName);
                                        RobotRaconteurWeb.RobotRaconteurExceptionUtil.ExceptionToMessageEntry(e, ret);

                                        $async_e = null;
                                        $step = 44;
                                        continue;
                                    }
                                    case 44: {
                                        RobotRaconteurWeb.ServerContext.m_CurrentServicePath = null;
                                        RobotRaconteurWeb.ServerContext.m_CurrentServerContext = null;

                                        if (ret == null && !noreturn && m.EntryType % 2 === 1) {
                                            ret = new RobotRaconteurWeb.MessageEntry.$ctor1(((m.EntryType + 1) | 0), m.MemberName);
                                            ret.Error = RobotRaconteurWeb.MessageErrorType.ProtocolError;
                                            ret.AddElement$1("errorname", "RobotRaconteur.ProtocolError");
                                            ret.AddElement$1("errorstring", "Unknown transaction type");

                                        }

                                        if (!noreturn) {
                                            ret.ServicePath = m.ServicePath;
                                            ret.RequestID = m.RequestID;
                                        }

                                        $tcs.setResult(ret);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 42 ) {
                                e = $async_e;
                                $step = 43;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Close: function () {
                var $t, $t1, $t2;
                this.cancel_source.cancel();
                try {
                    var e = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ServiceClosed, "");
                    RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendEvent(e));
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
                ;

                var eea = ($t = RobotRaconteurWeb.ServerEndpoint, System.Linq.Enumerable.from(this.client_endpoints.Values, $t).ToArray($t));

                $t1 = Bridge.getEnumerator(eea);
                try {
                    while ($t1.moveNext()) {
                        var ee = $t1.Current;
                        try {
                            this.node.DeleteEndpoint(ee);
                        } catch ($e2) {
                            $e2 = System.Exception.create($e2);
                        }
                        ;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }

                this.client_endpoints.clear();

                $t2 = Bridge.getEnumerator(this.skels.Values);
                try {
                    while ($t2.moveNext()) {
                        var s = $t2.Current;
                        try {
                            s.ReleaseObject();
                        } catch ($e3) {
                            $e3 = System.Exception.create($e3);
                        }
                        ;
                    }
                } finally {
                    if (Bridge.is($t2, System.IDisposable)) {
                        $t2.System$IDisposable$Dispose();
                    }
                }

                try {
                    if (!Bridge.staticEquals(this.ServerServiceListener, null)) {
                        this.ServerServiceListener(this, RobotRaconteurWeb.ServerServiceListenerEventType.ServiceClosed, null);
                    }
                } catch ($e4) {
                    $e4 = System.Exception.create($e4);
                }
            },
            MessageReceived: function (m, e) {
                RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.MessageReceived2(m, e));

            },
            MessageReceived2: function (m, e) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mret, 
                    $t, 
                    mm, 
                    mmret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7], $step);
                                switch ($step) {
                                    case 0: {
                                        mret = new RobotRaconteurWeb.Message();
                                        mret.header = new RobotRaconteurWeb.MessageHeader();

                                        $t = Bridge.getEnumerator(m.entries);
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                            mm = $t.Current;
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        if (mm.Error === RobotRaconteurWeb.MessageErrorType.InvalidEndpoint) {
                                            this.RemoveClient(e);
                                            $tcs.setResult(null);
                                            return;
                                        }

                                        $task1 = this.ProcessMessageEntry(mm, e);
                                        $step = 3;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        mmret = $taskResult1;
                                        if (mmret != null) {
                                            mret.entries.add(mmret);
                                        }
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {
                                        if (mret.entries.Count > 0) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $task2 = e.SendMessage(mret, Bridge.getDefaultValue(System.Threading.CancellationToken));
                                        $step = 6;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $task2.getAwaitedResult();
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            AddClient: function (cendpoint) {
                this.client_endpoints;
                {
                    this.client_endpoints.add(cendpoint.LocalEndpoint, cendpoint);
                }

                try {
                    if (!Bridge.staticEquals(this.ServerServiceListener, null)) {
                        this.ServerServiceListener(this, RobotRaconteurWeb.ServerServiceListenerEventType.ClientConnected, Bridge.box(cendpoint.LocalEndpoint, System.UInt32));
                    }
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }

            },
            RemoveClient: function (cendpoint) {
                var $t, $t1;


                var cusername = cendpoint.AuthenticatedUsername;
                var ce = cendpoint.LocalEndpoint;

                this.client_endpoints;
                {
                    this.client_endpoints.remove(cendpoint.LocalEndpoint);
                }
                this.node.DeleteEndpoint(cendpoint);


                this.ClientLockOp_lockobj;
                {
                    var oo = ($t = System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServerContext.ObjectLock), System.Linq.Enumerable.from(this.active_object_locks, $t).ToArray($t));
                    $t1 = Bridge.getEnumerator(oo);
                    try {
                        while ($t1.moveNext()) {
                            var o = $t1.Current;
                            try {
                                if (Bridge.referenceEquals(o.value.Username, cusername)) {
                                    if (o.value.Endpoint === ce) {
                                        o.value.ReleaseLock();
                                        this.active_object_locks.remove(o.key);
                                    } else {
                                        this.client_endpoints;
                                        {
                                            if (!System.Linq.Enumerable.from(this.client_endpoints, System.Collections.Generic.KeyValuePair$2(System.UInt32,RobotRaconteurWeb.ServerEndpoint)).any(function (x) {
                                                    return Bridge.referenceEquals(x.value.AuthenticatedUsername, cusername);
                                                })) {
                                                o.value.ReleaseLock();
                                                this.active_object_locks.remove(o.key);
                                            }
                                        }
                                    }
                                }
                            } catch ($e1) {
                                $e1 = System.Exception.create($e1);
                            }

                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }
                }



                try {
                    if (!Bridge.staticEquals(this.ServerServiceListener, null)) {
                        this.ServerServiceListener(this, RobotRaconteurWeb.ServerServiceListenerEventType.ClientDisconnected, Bridge.box(cendpoint.LocalEndpoint, System.UInt32));
                    }
                } catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }
            },
            PackStructure: function (s) {
                return this.ServiceDef.PackStructure(s);
            },
            UnpackStructure: function (T, l) {
                return this.ServiceDef.UnpackStructure(T, l);
            },
            PackMapType: function (K, T, o) {
                return this.ServiceDef.PackMapType(K, T, o);
            },
            PackListType: function (T, o) {
                return this.ServiceDef.PackListType(T, o);
            },
            PackMultiDimArray: function (multiDimArray) {
                return this.ServiceDef.PackMultiDimArray(multiDimArray);
            },
            PackVarType: function (p) {
                return this.ServiceDef.PackVarType(p);
            },
            UnpackMapType: function (K, T, o) {
                return this.ServiceDef.UnpackMapType(K, T, o);
            },
            UnpackListType: function (T, o) {
                return this.ServiceDef.UnpackListType(T, o);
            },
            UnpackMultiDimArray: function (o) {
                return this.ServiceDef.UnpackMultiDimArray(o);
            },
            UnpackVarType: function (o) {
                return this.ServiceDef.UnpackVarType(o);
            },
            ClientSessionOp: function (m, e) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ret, 
                    command, 
                    username, 
                    credentials, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6], $step);
                                switch ($step) {
                                    case 0: {
                                        if (this.user_authenticator == null && !System.String.startsWith(m.MemberName, "Monitor")) {
                                            throw new System.InvalidOperationException.$ctor1("User authentication not activated for this service");
                                        }

                                        ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientSessionOpRet, m.MemberName);
                                        ret.RequestID = m.RequestID;
                                        ret.ServicePath = m.ServicePath;

                                        command = m.MemberName;
                                        if (command === "AuthenticateUser") {
                                            $step = 1;
                                            continue;
                                        }
                                        else if (command === "LogoutUser") {
                                            $step = 2;
                                            continue;
                                        }
                                        else if (command === "RequestObjectLock" || command === "ReleaseObjectLock" || command === "RequestClientObjectLock" || command === "ReleaseClientObjectLock" || command === "MonitorEnter" || command === "MonitorContinueEnter" || command === "MonitorExit") {
                                            $step = 3;
                                            continue;
                                        }
                                        else  {
                                            $step = 5;
                                            continue;
                                        }
                                        $step = 6;
                                        continue;
                                    }
                                    case 1: {
                                        username = m.FindElement("username").CastData(System.String);
                                        credentials = Bridge.cast(this.UnpackMapType(System.String, System.Object, m.FindElement("credentials").Data), System.Collections.Generic.Dictionary$2(System.String,System.Object));
                                        e.AuthenticateUser(username, credentials);
                                        ret.AddElement$1("return", "OK");
                                        $tcs.setResult(ret);
                                        return;
                                    }
                                    case 2: {
                                        e.LogoutUser();
                                        ret.AddElement$1("return", "OK");
                                        $tcs.setResult(ret);
                                        return;
                                    }
                                    case 3: {
                                        $task1 = this.ClientLockOp(m, ret);
                                        $step = 4;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(ret);
                                        return;
                                    }
                                    case 5: {
                                        throw new RobotRaconteurWeb.ProtocolException("Invalid ClientSessionOp command");
                                    }
                                    case 6: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            AuthenticateUser: function (username, credentials) {
                return this.user_authenticator.RobotRaconteurWeb$UserAuthenticator$AuthenticateUser(username, credentials);

            },
            ClientLockOp: function (m, ret) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $taskResult3, 
                    $task4, 
                    $taskResult4, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    priv, 
                    username, 
                    servicepath, 
                    skel, 
                    $t, 
                    sskels, 
                    o, 
                    $t1, 
                    s, 
                    sskels1, 
                    o1, 
                    $t2, 
                    s1, 
                    timeout, 
                    s2, 
                    $t3, 
                    retcode, 
                    s3, 
                    retcode1, 
                    retcode2, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                                switch ($step) {
                                    case 0: {
                                        priv = null;
                                        username = null;
                                        if (!System.String.startsWith(m.MemberName, "Monitor")) {
                                            if (RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser == null) {
                                                throw new RobotRaconteurWeb.AuthenticationException("User must be authenticated to lock object");
                                            }
                                            priv = RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser.Privileges;
                                            if (!(System.Array.contains(priv, "objectlock", System.String) || System.Array.contains(priv, "objectlockoverride", System.String))) {
                                                throw new RobotRaconteurWeb.ObjectLockedException("User does not have object locking privileges");
                                            }
                                            username = RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser.Username;
                                        } else {
                                            if (this.RequireValidUser) {
                                                if (RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser == null) {
                                                    throw new RobotRaconteurWeb.AuthenticationException("User is not authenticated");
                                                }
                                            }
                                        }



                                        servicepath = m.ServicePath;

                                        $task1 = this.GetObjectSkel(servicepath);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        skel = $taskResult1;

                                        $t = m.MemberName;
                                        if ($t === "RequestObjectLock") {
                                            $step = 2;
                                            continue;
                                        }
                                        else if ($t === "RequestClientObjectLock") {
                                            $step = 3;
                                            continue;
                                        }
                                        else if ($t === "ReleaseObjectLock") {
                                            $step = 4;
                                            continue;
                                        }
                                        else if ($t === "MonitorEnter") {
                                            $step = 5;
                                            continue;
                                        }
                                        else if ($t === "MonitorContinueEnter") {
                                            $step = 7;
                                            continue;
                                        }
                                        else if ($t === "MonitorExit") {
                                            $step = 9;
                                            continue;
                                        }
                                        else  {
                                            $step = 11;
                                            continue;
                                        }
                                        $step = 12;
                                        continue;
                                    }
                                    case 2: {
                                        this.ClientLockOp_lockobj;
                                        {
                                            if (skel.IsLocked) {
                                                throw new RobotRaconteurWeb.ObjectLockedException("Object already locked");
                                            }
                                            sskels = (System.Linq.Enumerable.from(this.skels, System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServiceSkel)).where(function (x) {
                                                return System.String.startsWith(x.key, servicepath);
                                            }).ToArray(System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServiceSkel)));
                                            if (System.Linq.Enumerable.from(sskels, System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServiceSkel)).any(function (x) {
                                                return x.value.IsLocked;
                                            })) {
                                                throw new RobotRaconteurWeb.ObjectLockedException("Object already locked");
                                            }

                                            o = new RobotRaconteurWeb.ServerContext.ObjectLock(RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser.Username, skel);
                                            $t1 = Bridge.getEnumerator(sskels);
                                            try {
                                                while ($t1.moveNext()) {
                                                    s = $t1.Current;
                                                    o.AddSkel(s.value);
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$Dispose();
                                                }
                                            }
                                            this.active_object_locks.add(o.RootServicePath, o);
                                            ret.AddElement$1("return", "OK");
                                        }
                                        $step = 12;
                                        continue;
                                    }
                                    case 3: {
                                        this.ClientLockOp_lockobj;
                                        {
                                            if (skel.IsLocked) {
                                                throw new RobotRaconteurWeb.ObjectLockedException("Object already locked");
                                            }
                                            sskels1 = (System.Linq.Enumerable.from(this.skels, System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServiceSkel)).where(function (x) {
                                                return System.String.startsWith(x.key, servicepath);
                                            }).ToArray(System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServiceSkel)));
                                            if (System.Linq.Enumerable.from(sskels1, System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServiceSkel)).any(function (x) {
                                                return x.value.IsLocked;
                                            })) {
                                                throw new RobotRaconteurWeb.ObjectLockedException("Object already locked");
                                            }

                                            o1 = new RobotRaconteurWeb.ServerContext.ObjectLock(RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser.Username, skel, RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint);
                                            $t2 = Bridge.getEnumerator(sskels1);
                                            try {
                                                while ($t2.moveNext()) {
                                                    s1 = $t2.Current;
                                                    s1.value.objectlock = o1;
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$Dispose();
                                                }
                                            }
                                            this.active_object_locks.add(o1.RootServicePath, o1);
                                            ret.AddElement$1("return", "OK");
                                        }
                                        $step = 12;
                                        continue;
                                    }
                                    case 4: {
                                        this.ClientLockOp_lockobj;
                                        {
                                            if (!skel.IsLocked) {
                                                $tcs.setResult(null);
                                                return;
                                            }
                                            if (!Bridge.referenceEquals(skel.objectlock.RootServicePath, servicepath)) {
                                                throw new RobotRaconteurWeb.ObjectLockedException("Cannot release inherited lock");
                                            }
                                            if (!Bridge.referenceEquals(username, skel.objectlock.Username) && !System.Array.contains(priv, "objectlockoverride", System.String)) {
                                                throw new RobotRaconteurWeb.ObjectLockedException("Service locked by user " + (skel.objectlock.Username || ""));
                                            }
                                            if (skel.objectlock.Endpoint !== 0) {
                                                if (RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint !== skel.objectlock.Endpoint && !System.Array.contains(priv, "objectlockoverride", System.String)) {
                                                    if (!Bridge.referenceEquals(username, skel.objectlock.Username) && !System.Array.contains(priv, "objectlockoverride", System.String)) {
                                                        throw new System.Exception("Service locked by other session");
                                                    }
                                                }
                                            }

                                            this.active_object_locks.remove(skel.ServicePath);
                                            skel.objectlock.ReleaseLock();

                                            ret.AddElement$1("return", "OK");
                                        }
                                        $step = 12;
                                        continue;
                                    }
                                    case 5: {
                                        timeout = 0;
                                        this.ClientLockOp_lockobj;
                                        {
                                            if (skel.monitorlocks.containsKey(RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint)) {
                                                throw new System.InvalidOperationException.$ctor1("Already acquiring or acquired monitor lock");
                                            }
                                            s2 = new RobotRaconteurWeb.ServerContext.MonitorObjectSkel(skel);
                                            timeout = ($t3 = m.FindElement("timeout").CastData(System.Array.type(System.Int32)))[System.Array.index(0, $t3)];
                                        }
                                        $task2 = s2.MonitorEnter(RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint, timeout);
                                        $step = 6;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        retcode = $taskResult2;
                                        ret.AddElement$1("return", retcode);

                                        $step = 12;
                                        continue;
                                    }
                                    case 7: {
                                        this.ClientLockOp_lockobj;
                                        {
                                            if (!skel.monitorlocks.containsKey(RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint)) {
                                                throw new System.InvalidOperationException.$ctor1("Not acquiring monitor lock");
                                            }
                                            s3 = skel.monitorlocks.getItem(RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint);
                                        }
                                        $task3 = s3.MonitorContinueEnter(RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint);
                                        $step = 8;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 8: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        retcode1 = $taskResult3;
                                        ret.AddElement$1("return", retcode1);
                                        $step = 12;
                                        continue;
                                    }
                                    case 9: {
                                        this.ClientLockOp_lockobj;
                                        {
                                            if (skel.monitorlock.LocalEndpoint !== (RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint)) {
                                                throw new System.InvalidOperationException.$ctor1("Not monitor locked");
                                            }
                                        }
                                        $task4 = skel.monitorlock.MonitorExit(RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint);
                                        $step = 10;
                                        if ($task4.isCompleted()) {
                                            continue;
                                        }
                                        $task4.continue($asyncBody);
                                        return;
                                    }
                                    case 10: {
                                        $taskResult4 = $task4.getAwaitedResult();
                                        retcode2 = $taskResult4;
                                        ret.AddElement$1("return", retcode2);
                                        $step = 12;
                                        continue;
                                    }
                                    case 11: {
                                        throw new System.Exception("Invalid command");
                                    }
                                    case 12: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            check_lock: function (skel) {
                this.check_monitor_lock(skel);
                if (skel.IsLocked) {
                    if (Bridge.referenceEquals(skel.objectlock.Username, RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser.Username) && skel.objectlock.Endpoint === 0) {
                        return;
                    }
                    if (Bridge.referenceEquals(skel.objectlock.Username, RobotRaconteurWeb.ServerEndpoint.CurrentAuthenticatedUser.Username) && skel.objectlock.Endpoint === RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint) {
                        return;
                    }
                    throw new RobotRaconteurWeb.ObjectLockedException("Object locked by " + (skel.objectlock.Username || ""));

                }
            },
            check_monitor_lock: function (skel) {
                if (skel.IsMonitorLocked) {
                    if (skel.monitorlock.LocalEndpoint === RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint) {
                        skel.monitorlock.MonitorRefresh(RobotRaconteurWeb.ServerEndpoint.CurrentEndpoint.LocalEndpoint);
                    } else {
                        throw new System.Exception("Object is currently monitor locked. Use MonitorEnter to obtain monitor lock");
                    }

                }

            },
            PeriodicCleanupTask: function () {
                var $t;
                this.client_endpoints;
                {
                    $t = Bridge.getEnumerator(this.client_endpoints.Values);
                    try {
                        while ($t.moveNext()) {
                            var c = $t.Current;
                            c.PeriodicCleanupTask();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                }


            },
            CheckServiceCapability: function (m, c) {
                var ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ServiceCheckCapabilityRet, m.MemberName);
                ret.ServicePath = m.ServicePath;
                ret.RequestID = m.RequestID;
                ret.AddElement$1("return", Bridge.box(0, System.UInt32));
                return ret;

            },
            ReleaseServicePath: function (path) {
                var $t;

                if (Bridge.referenceEquals(path, this.ServiceName)) {
                    throw new RobotRaconteurWeb.ServiceException("Root object cannot be released");
                }

                this.skels;
                {
                    var objkeys = System.Linq.Enumerable.from(this.skels.Keys, System.String).where(function (x) {
                            return System.String.startsWith(x, path);
                        }).ToArray(System.String);
                    if (System.Linq.Enumerable.from(objkeys, System.String).count() === 0) {
                        throw new RobotRaconteurWeb.ServiceException("Unknown service path");
                    }

                    $t = Bridge.getEnumerator(objkeys);
                    try {
                        while ($t.moveNext()) {
                            var path1 = $t.Current;
                            var s = this.skels.getItem(path1);

                            if (s.IsLocked) {
                                this.ClientLockOp_lockobj;
                                {
                                    if (Bridge.referenceEquals(s.objectlock.RootServicePath, path1)) {
                                        this.active_object_locks.remove(s.objectlock.Username);
                                        s.objectlock.ReleaseLock();

                                    } else {
                                        s.objectlock.ReleaseSkel(s);
                                    }
                                }
                            }

                            s.ReleaseObject();
                            s.ReleaseCastObject();
                            this.skels.remove(path1);

                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                }

                var m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ServicePathReleasedReq, "");
                m.ServicePath = path;

                this.SendEvent(m);


            },
            ReleaseServicePath$1: function (path, endpoints) {
                var $t, $t1, $t2;

                if (Bridge.referenceEquals(path, this.ServiceName)) {
                    throw new RobotRaconteurWeb.ServiceException("Root object cannot be released");
                }

                this.skels;
                {
                    var objkeys = System.Linq.Enumerable.from(this.skels.Keys, System.String).where(function (x) {
                            return System.String.startsWith(x, path);
                        }).ToArray(System.String);
                    if (System.Linq.Enumerable.from(objkeys, System.String).count() === 0) {
                        throw new RobotRaconteurWeb.ServiceException("Unknown service path");
                    }

                    $t = Bridge.getEnumerator(objkeys);
                    try {
                        while ($t.moveNext()) {
                            var path1 = $t.Current;
                            var s = this.skels.getItem(path1);

                            if (s.IsLocked) {
                                this.ClientLockOp_lockobj;
                                {
                                    if (Bridge.referenceEquals(s.objectlock.RootServicePath, path1)) {
                                        this.active_object_locks.remove(s.objectlock.Username);
                                        s.objectlock.ReleaseLock();

                                    } else {
                                        s.objectlock.ReleaseSkel(s);
                                    }
                                }
                            }

                            s.ReleaseObject();
                            s.ReleaseCastObject();
                            this.skels.remove(path1);

                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                }

                var m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ServicePathReleasedReq, "");
                m.ServicePath = path;

                var cc = new (System.Collections.Generic.List$1(RobotRaconteurWeb.ServerEndpoint)).ctor();

                this.client_endpoints;
                {
                    $t1 = Bridge.getEnumerator(endpoints);
                    try {
                        while ($t1.moveNext()) {
                            var e = $t1.Current;
                            if (this.client_endpoints.containsKey(e)) {
                                cc.add(this.client_endpoints.getItem(e));
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }

                }

                $t2 = Bridge.getEnumerator(cc);
                try {
                    while ($t2.moveNext()) {
                        var c = { v : $t2.Current };
                        if (this.RequireValidUser) {
                            try {
                                if (System.String.isNullOrWhiteSpace(c.v.AuthenticatedUsername)) {
                                    continue;
                                }
                            } catch ($e1) {
                                $e1 = System.Exception.create($e1);
                                continue;
                            }


                        }

                        try {
                            this.node.CheckConnection(c.v.LocalEndpoint);
                            this.SendMessage(m, c.v, Bridge.getDefaultValue(System.Threading.CancellationToken)).continueWith((function ($me, c) {
                                return Bridge.fn.bind($me, function (t) {
                                    var e1 = t.getException();
                                    if (e1 != null) {
                                        try {
                                            this.RemoveClient(c.v);
                                        } catch ($e2) {
                                            $e2 = System.Exception.create($e2);
                                        }
                                        ;
                                    }
                                });
                            })(this, c));
                        } catch ($e2) {
                            $e2 = System.Exception.create($e2);
                            try {
                                this.RemoveClient(c.v);
                            } catch ($e3) {
                                $e3 = System.Exception.create($e3);
                            }
                            ;
                        }
                    }
                } finally {
                    if (Bridge.is($t2, System.IDisposable)) {
                        $t2.System$IDisposable$Dispose();
                    }
                }

            },
            ProcessCallbackRequest: function (m, endpointid, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    e, 
                    request_start, 
                    request_timeout, 
                    rec_source, 
                    t_id, 
                    rec_message, 
                    r, 
                    $async_e, 
                    e1, 
                    e2, 
                    e3, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        e = this.client_endpoints.getItem(endpointid);

                                        request_start = System.DateTime.getUtcNow();
                                        request_timeout = this.node.RequestTimeout;

                                        rec_source = new System.Threading.Tasks.TaskCompletionSource();
                                        this.rec_wait;
                                        {
                                            this.request_number = (this.request_number + 1) >>> 0;
                                            m.RequestID = this.request_number;
                                            t_id = this.request_number;
                                            this.rec_wait.add(t_id, { Item1: rec_source, Item2: e });
                                            if (this.ProcessCallbackRequest_checkconnection_current == null) {
                                                this.ProcessCallbackRequest_checkconnection_current = this.ProcessCallbackRequest_checkconnection();
                                            }
                                        }

                                        rec_message = null;
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        cancel.register(function () {
                                            rec_source.trySetCanceled();
                                        });


                                        r = Bridge.fn.bind(this, function () {
                                            var $step = 0,
                                                $task1, 
                                                $task2, 
                                                $taskResult2, 
                                                $jumpFromFinally, 
                                                $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                                                $returnValue, 
                                                $async_e, 
                                                $asyncBody = Bridge.fn.bind(this, function () {
                                                    try {
                                                        for (;;) {
                                                            $step = System.Array.min([0,1,2], $step);
                                                            switch ($step) {
                                                                case 0: {
                                                                    $task1 = this.SendMessage(m, e, cancel);
                                                                    $step = 1;
                                                                    if ($task1.isCompleted()) {
                                                                        continue;
                                                                    }
                                                                    $task1.continue($asyncBody);
                                                                    return;
                                                                }
                                                                case 1: {
                                                                    $task1.getAwaitedResult();
                                                                    $task2 = rec_source.task;
                                                                    $step = 2;
                                                                    if ($task2.isCompleted()) {
                                                                        continue;
                                                                    }
                                                                    $task2.continue($asyncBody);
                                                                    return;
                                                                }
                                                                case 2: {
                                                                    $taskResult2 = $task2.getAwaitedResult();
                                                                    rec_message = $taskResult2;
                                                                    $tcs.setResult(null);
                                                                    return;
                                                                }
                                                                default: {
                                                                    $tcs.setResult(null);
                                                                    return;
                                                                }
                                                            }
                                                        }
                                                    } catch($async_e1) {
                                                        $async_e = System.Exception.create($async_e1);
                                                        $tcs.setException($async_e);
                                                    }
                                                }, arguments);

                                            $asyncBody();
                                            return $tcs.task;
                                        });

                                        $task1 = RobotRaconteurWeb.Extensions.Extensions.AwaitWithTimeout(r(), ((this.node.RequestTimeout) | 0));
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        this.rec_wait;
                                        {
                                            this.rec_wait.remove(t_id);
                                        }


                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        if (rec_message.RequestID !== t_id) {
                                            throw new System.Exception("This should be impossible!");
                                        }

                                        if (rec_message.Error !== RobotRaconteurWeb.MessageErrorType.None) {
                                            e1 = RobotRaconteurWeb.RobotRaconteurExceptionUtil.MessageEntryToException(rec_message);
                                            e2 = Bridge.as(e1, RobotRaconteurWeb.RobotRaconteurRemoteException);
                                            if (e2 != null) {
                                                e3 = this.ServiceDef.DownCastException(e2);
                                                if (e3 != null) {
                                                    e1 = e3;
                                                }
                                            }
                                            throw e1;
                                        }

                                        $tcs.setResult(rec_message);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 1 && $step <= 2) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ProcessCallbackRequest_checkconnection: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $t, 
                    c, 
                    $e1, 
                    rec_wait2, 
                    $t1, 
                    r, 
                    $t2, 
                    t, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        this.rec_wait;
                                        {
                                            if (this.rec_wait.Count < 0) {
                                                this.ProcessCallbackRequest_checkconnection_current = null;
                                                $tcs.setResult(null);
                                                return;
                                            }
                                        }

                                        $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.rec_wait.Values, System.Tuple$2(System.Threading.Tasks.TaskCompletionSource,RobotRaconteurWeb.ServerEndpoint)).distinct());
                                        try {
                                            while ($t.moveNext()) {
                                                c = $t.Current;
                                                try {
                                                    this.node.CheckConnection(c.Item2.LocalEndpoint);
                                                } catch ($e1) {
                                                    $e1 = System.Exception.create($e1);
                                                    rec_wait2 = new (System.Collections.Generic.List$1(System.Threading.Tasks.TaskCompletionSource)).ctor();
                                                    this.rec_wait;
                                                    {
                                                        $t1 = Bridge.getEnumerator(this.rec_wait.Values);
                                                        try {
                                                            while ($t1.moveNext()) {
                                                                r = $t1.Current;
                                                                if (r.Item2.LocalEndpoint === c.Item2.LocalEndpoint) {
                                                                    rec_wait2.add(r.Item1);
                                                                }
                                                            }
                                                        } finally {
                                                            if (Bridge.is($t1, System.IDisposable)) {
                                                                $t1.System$IDisposable$Dispose();
                                                            }
                                                        }
                                                    }

                                                    $t2 = Bridge.getEnumerator(rec_wait2);
                                                    try {
                                                        while ($t2.moveNext()) {
                                                            t = $t2.Current;
                                                            t.trySetException(new RobotRaconteurWeb.ConnectionException("Connection closed"));
                                                        }
                                                    } finally {
                                                        if (Bridge.is($t2, System.IDisposable)) {
                                                            $t2.System$IDisposable$Dispose();
                                                        }
                                                    }
                                                    $tcs.setResult(null);
                                                    return;
                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$Dispose();
                                            }
                                        }
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = System.Threading.Tasks.Task.delay(500);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServerContext.MonitorObjectSkel", {
        $kind: "nested class",
        fields: {
            wait_thread: null,
            wait_event: null,
            obj: null,
            local_endpoint: 0,
            timeout: 0,
            monitor_acquire_exception: null,
            monitor_acquired: false,
            monitor_thread_event: null,
            maintain_lock: false,
            skel: null,
            last_refreshed: null
        },
        props: {
            LocalEndpoint: {
                get: function () {
                    return this.local_endpoint;
                }
            },
            IsLocked: {
                get: function () {
                    return this.monitor_acquired;
                }
            }
        },
        ctors: {
            init: function () {
                this.last_refreshed = System.DateTime.getDefaultValue();
                this.local_endpoint = 0;
                this.timeout = 0;
                this.monitor_acquired = false;
                this.maintain_lock = false;
                this.last_refreshed = System.DateTime.getUtcNow();
            },
            ctor: function (skel) {
                this.$initialize();
                var obj = skel.UncastObject;
                if (!(Bridge.is(obj, RobotRaconteurWeb.IRobotRaconteurMonitorObject))) {
                    throw new System.InvalidOperationException.$ctor1("Object is not monitor lockable");
                }

                this.obj = Bridge.cast(obj, RobotRaconteurWeb.IRobotRaconteurMonitorObject);
                this.skel = skel;
            }
        },
        methods: {
            MonitorEnter: function (local_endpoint, timeout) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        this.timeout = timeout;
                                        this.local_endpoint = local_endpoint;
                                        this.wait_event = new System.Threading.Tasks.TaskCompletionSource();
                                        this.monitor_thread_event = new System.Threading.Tasks.TaskCompletionSource();
                                        this.maintain_lock = true;

                                        this;
                                        {
                                            this.last_refreshed = System.DateTime.getUtcNow();
                                        }

                                        this.skel.monitorlocks;
                                        {
                                            this.skel.monitorlocks.add(local_endpoint, this);
                                        }

                                        this.wait_thread = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.thread_func());

                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = RobotRaconteurWeb.Extensions.Extensions.AwaitWithTimeout$1(System.Int32, this.wait_event.task, 5000);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        if (this.monitor_acquire_exception != null) {
                                            this.maintain_lock = false;
                                            throw this.monitor_acquire_exception;
                                        }

                                        $tcs.setResult((this.monitor_acquired ? "OK" : "Continue"));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MonitorContinueEnter: function (localendpoint) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        this;
                                        {
                                            this.last_refreshed = System.DateTime.getUtcNow();
                                        }

                                        if (this.monitor_acquired) {
                                            $tcs.setResult("OK");
                                            return;
                                        }

                                        if (this.monitor_acquire_exception != null) {
                                            this.maintain_lock = false;
                                            throw this.monitor_acquire_exception;
                                        }

                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = RobotRaconteurWeb.Extensions.Extensions.AwaitWithTimeout$1(System.Int32, this.wait_event.task, 5000);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        if (this.monitor_acquire_exception != null) {
                                            this.maintain_lock = false;
                                            throw this.monitor_acquire_exception;
                                        }

                                        $tcs.setResult((this.monitor_acquired ? "OK" : "Continue"));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MonitorRefresh: function (localendpoint) {
                this;
                {
                    this.last_refreshed = System.DateTime.getUtcNow();
                }
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            MonitorExit: function (local_endpoint) {

                this.maintain_lock = false;
                this.monitor_thread_event.trySetResult(0);

                return System.Threading.Tasks.Task.fromResult("OK", System.String);
            },
            thread_func: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    l, 
                    e, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,5,6,8,9,10,11,12,13,14,15], $step);
                                switch ($step) {
                                    case 0: {
                                        l = null;
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = this.obj.RobotRaconteurWeb$IRobotRaconteurMonitorObject$RobotRaconteurMonitorEnter$1(this.timeout);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        l = $taskResult1;
                                        this.monitor_acquired = true;
                                        this.skel.monitorlock = this;
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        this.monitor_acquire_exception = e;
                                        this.wait_event.trySetResult(0);

                                        this.skel.monitorlocks;
                                        {
                                            this.skel.monitorlocks.remove(this.local_endpoint);
                                        }

                                        $tcs.setResult(null);
                                        return;
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }

                                    case 5: {
                                        this.wait_event.trySetResult(0);

                                        
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( this.maintain_lock ) {
                                            $step = 7;
                                            continue;
                                        } 
                                        $step = 12;
                                        continue;
                                    }

                                    case 8: {
                                        $task2 = RobotRaconteurWeb.Extensions.Extensions.AwaitWithTimeout$1(System.Int32, this.monitor_thread_event.task, 30000);
                                        $step = 9;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 9: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        $step = 11;
                                        continue;
                                    }
                                    case 10: {
                                        $async_e = null;
                                        $step = 11;
                                        continue;
                                    }
                                    case 11: {
                                        this;
                                        if (System.DateTime.gt(System.DateTime.getUtcNow(), System.DateTime.addSeconds(this.last_refreshed, 30))) {
                                            this.maintain_lock = false;
                                        }

                                        $step = 6;
                                        continue;
                                    }
                                    case 12: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 13: {
                                        $async_e = null;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        this.skel.monitorlocks;
                                        {
                                            this.skel.monitorlocks.remove(this.local_endpoint);
                                        }

                                        l.System$IDisposable$Dispose();

                                        this.monitor_acquired = false;
                                        this.wait_event.trySetResult(0);


                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 15;
                                        continue;
                                    }
                                    case 15: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                e = $async_e;
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            if ( $step >= 8 && $step <= 9 ) {
                                $step = 10;
                                $asyncBody();
                                return;
                            }
                            if ( $step >= 5 && $step <= 12 ) {
                                $step = 13;
                                $asyncBody();
                                return;
                            }
                            if ($step >= 5 && $step <= 13) {
                                $step = 14;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServerContext.ObjectLock", {
        $kind: "nested class",
        fields: {
            m_Locked: false,
            m_Username: null,
            skels: null,
            m_RootSkel: null,
            m_Endpoint: 0,
            m_RootServicePath: null
        },
        props: {
            Username: {
                get: function () {
                    return this.m_Username;
                }
            },
            IsLocked: {
                get: function () {
                    return this.m_Locked;
                }
            },
            RootServicePath: {
                get: function () {
                    return this.m_RootServicePath;
                }
            },
            Endpoint: {
                get: function () {
                    return this.m_Endpoint;
                }
            }
        },
        ctors: {
            init: function () {
                this.m_Locked = true;
                this.skels = new (System.Collections.Generic.List$1(RobotRaconteurWeb.ServiceSkel)).ctor();
                this.m_Endpoint = 0;
            },
            ctor: function (username, root_skel, endpoint) {
                if (endpoint === void 0) { endpoint = 0; }

                this.$initialize();
                this.skels;
                {
                    this.m_Locked = true;
                    this.m_RootSkel = root_skel;
                    this.m_Username = username;
                    this.m_RootServicePath = root_skel.ServicePath;
                    this.m_Endpoint = endpoint;
                }
            }
        },
        methods: {
            AddSkel: function (skel) {
                this.skels;
                {
                    skel.objectlock = this;
                    var sp = skel.ServicePath;
                    if (Bridge.referenceEquals(sp, this.m_RootServicePath)) {

                        if (!Bridge.referenceEquals(skel, this.m_RootSkel)) {
                            return;
                        }

                        try {
                            if (this.m_RootSkel != null) {
                                this.m_RootSkel.objectlock = this;
                            }
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                        this.m_RootSkel = skel;
                        return;
                    }


                    this.skels.add(skel);
                }





            },
            ReleaseSkel: function (skel) {
                this.skels;
                {
                    try {
                        skel.objectlock = null;
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }

                    var sp = skel.ServicePath;
                    if (Bridge.referenceEquals(sp, this.m_RootServicePath)) {
                        try {
                            if (this.m_RootSkel != null) {
                                this.m_RootSkel.objectlock = null;
                            }
                        } catch ($e2) {
                            $e2 = System.Exception.create($e2);
                        }
                        this.m_RootSkel = null;
                        return;
                    }

                    this.skels.remove(skel);


                }
            },
            ReleaseLock: function () {
                var $t;
                this.skels;
                {
                    this.m_Locked = false;

                    try {
                        this.m_RootSkel.objectlock = null;
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }

                    $t = Bridge.getEnumerator(this.skels);
                    try {
                        while ($t.moveNext()) {
                            var s = $t.Current;
                            try {
                                s.objectlock = null;
                            } catch ($e2) {
                                $e2 = System.Exception.create($e2);
                            }

                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    this.skels.clear();

                }



            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServerServiceListenerEventType", {
        $kind: "enum",
        statics: {
            fields: {
                ServiceClosed: 1,
                ClientConnected: 2,
                ClientDisconnected: 3
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceDefinition", {
        fields: {
            Name: null,
            Structures: null,
            Pods: null,
            NamedArrays: null,
            Objects: null,
            Options: null,
            Imports: null,
            Using: null,
            Exceptions: null,
            Constants: null,
            Enums: null,
            StdVer: null
        },
        ctors: {
            init: function () {
                this.StdVer = new RobotRaconteurWeb.RobotRaconteurVersion();
                this.Structures = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition)).ctor();
                this.Pods = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition)).ctor();
                this.NamedArrays = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition)).ctor();
                this.Objects = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition)).ctor();
                this.Options = new (System.Collections.Generic.List$1(System.String)).ctor();
                this.Imports = new (System.Collections.Generic.List$1(System.String)).ctor();
                this.Using = new (System.Collections.Generic.List$1(RobotRaconteurWeb.UsingDefinition)).ctor();
                this.Exceptions = new (System.Collections.Generic.List$1(System.String)).ctor();
                this.Constants = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ConstantDefinition)).ctor();
                this.Enums = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.EnumDefinition)).ctor();
            }
        },
        methods: {
            ToWriter: function (o) {
                var $t, $t1, $t2, $t3, $t4, $t5, $t6, $t7, $t8, $t9, $t10;
                o.WriteLine$12("service {0}", this.Name);
                o.WriteLine();

                if (RobotRaconteurWeb.RobotRaconteurVersion.op_Explicit(this.StdVer)) {
                    var version_found = false;
                    $t = Bridge.getEnumerator(this.Options);
                    try {
                        while ($t.moveNext()) {
                            var so = $t.Current;
                            var r_version = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*version[ \\t]+(?:(\\d+(?:\\.\\d+)*)|[ -~\\t]*)$");
                            var r_version_match = r_version.match(so);
                            if (r_version_match.getSuccess()) {
                                if (version_found) {
                                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Robot Raconteur version already specified");
                                }
                                if (r_version_match.getGroups().get(1).getSuccess()) {
                                    version_found = true;
                                    break;
                                } else {
                                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid Robot Raconteur version specified");
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                    if (!version_found) {
                        if (RobotRaconteurWeb.RobotRaconteurVersion.op_LessThan(this.StdVer.$clone(), new RobotRaconteurWeb.RobotRaconteurVersion.$ctor2(0, 9))) {
                            o.WriteLine$12("option version {0}", this.StdVer.toString());
                            o.WriteLine();
                        } else {
                            o.WriteLine$12("stdver {0}", this.StdVer.toString());
                            o.WriteLine();
                        }
                    }
                }

                $t1 = Bridge.getEnumerator(this.Imports);
                try {
                    while ($t1.moveNext()) {
                        var $import = $t1.Current;
                        o.WriteLine$12("import {0}", $import);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }
                if (this.Imports.Count !== 0) {
                    o.WriteLine();
                }

                $t2 = Bridge.getEnumerator(this.Using);
                try {
                    while ($t2.moveNext()) {
                        var u = $t2.Current;
                        o.Write$10(u.toString());
                    }
                } finally {
                    if (Bridge.is($t2, System.IDisposable)) {
                        $t2.System$IDisposable$Dispose();
                    }
                }
                if (this.Using.Count !== 0) {
                    o.WriteLine();
                }

                $t3 = Bridge.getEnumerator(this.Options);
                try {
                    while ($t3.moveNext()) {
                        var option = $t3.Current;
                        o.WriteLine$12("option {0}", option);
                    }
                } finally {
                    if (Bridge.is($t3, System.IDisposable)) {
                        $t3.System$IDisposable$Dispose();
                    }
                }
                if (this.Options.Count !== 0) {
                    o.WriteLine();
                }

                $t4 = Bridge.getEnumerator(this.Constants.Values);
                try {
                    while ($t4.moveNext()) {
                        var constant = $t4.Current;
                        o.WriteLine$11(constant.toString());
                    }
                } finally {
                    if (Bridge.is($t4, System.IDisposable)) {
                        $t4.System$IDisposable$Dispose();
                    }
                }
                if (this.Constants.Count !== 0) {
                    o.WriteLine();
                }

                $t5 = Bridge.getEnumerator(this.Enums.Values);
                try {
                    while ($t5.moveNext()) {
                        var e = $t5.Current;
                        o.Write$10(e.toString());
                    }
                } finally {
                    if (Bridge.is($t5, System.IDisposable)) {
                        $t5.System$IDisposable$Dispose();
                    }
                }
                if (this.Enums.Count !== 0) {
                    o.WriteLine();
                }

                $t6 = Bridge.getEnumerator(this.Exceptions);
                try {
                    while ($t6.moveNext()) {
                        var e1 = $t6.Current;
                        o.WriteLine$12("exception {0}", e1);
                    }
                } finally {
                    if (Bridge.is($t6, System.IDisposable)) {
                        $t6.System$IDisposable$Dispose();
                    }
                }
                if (this.Exceptions.Count !== 0) {
                    o.WriteLine();
                }

                $t7 = Bridge.getEnumerator(this.Structures.Values);
                try {
                    while ($t7.moveNext()) {
                        var d = $t7.Current;
                        o.WriteLine$11(d.toString());
                    }
                } finally {
                    if (Bridge.is($t7, System.IDisposable)) {
                        $t7.System$IDisposable$Dispose();
                    }
                }

                $t8 = Bridge.getEnumerator(this.Pods.Values);
                try {
                    while ($t8.moveNext()) {
                        var d1 = $t8.Current;
                        o.WriteLine$11(d1.toString());
                    }
                } finally {
                    if (Bridge.is($t8, System.IDisposable)) {
                        $t8.System$IDisposable$Dispose();
                    }
                }

                $t9 = Bridge.getEnumerator(this.NamedArrays.Values);
                try {
                    while ($t9.moveNext()) {
                        var d2 = $t9.Current;
                        o.WriteLine$11(d2.toString());
                    }
                } finally {
                    if (Bridge.is($t9, System.IDisposable)) {
                        $t9.System$IDisposable$Dispose();
                    }
                }

                $t10 = Bridge.getEnumerator(this.Objects.Values);
                try {
                    while ($t10.moveNext()) {
                        var d3 = $t10.Current;
                        o.WriteLine$11(d3.toString());
                    }
                } finally {
                    if (Bridge.is($t10, System.IDisposable)) {
                        $t10.System$IDisposable$Dispose();
                    }
                }
            },
            toString: function () {
                var w = new System.IO.StringWriter.ctor();
                w.NewLine = "\n";
                this.ToWriter(w);
                return w.toString();
            },
            CheckVersion: function (ver) {
                if (ver === void 0) { ver = new RobotRaconteurWeb.RobotRaconteurVersion(); }

                if (!RobotRaconteurWeb.RobotRaconteurVersion.op_Explicit(this.StdVer)) {
                    return;
                }

                if (RobotRaconteurWeb.RobotRaconteurVersion.op_Equality(ver.$clone(), new RobotRaconteurWeb.RobotRaconteurVersion.$ctor2(0, 0))) {
                    ver = new RobotRaconteurWeb.RobotRaconteurVersion.$ctor1(RobotRaconteurWeb.RobotRaconteurNode.Version);
                }

                if (RobotRaconteurWeb.RobotRaconteurVersion.op_LessThan(ver.$clone(), this.StdVer.$clone())) {
                    throw new RobotRaconteurWeb.ServiceException("Service " + (this.Name || "") + " requires newer version of Robot Raconteur");
                }

            },
            FromString: function (s) {
                var w = { v : new (System.Collections.Generic.List$1(System.Exception)).ctor() };
                this.FromString$1(s, w);
            },
            FromString$1: function (s, warnings) {
                var is_ = new System.IO.StringReader(s);
                this.FromReader$1(is_, warnings);
            },
            FromReader: function (is_) {
                var w = { v : new (System.Collections.Generic.List$1(System.Exception)).ctor() };
                this.FromReader$1(is_, w);
            },
            FromReader$1: function (is_, warnings) {
                var $t;
                var r_comment = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*#[ -~\\t]*$");
                var r_empty = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*$");
                var r_entry = new System.Text.RegularExpressions.Regex.ctor("(?:^[ \\t]*(?:(service)|(stdver)|(option)|(import)|(using)|(exception)|(constant)|(enum)|(struct)|(object)|(pod)|(namedarray))[ \\t]+(\\w[^\\s]*(?:[ \\t]+[^\\s]+)*)[ \\t]*$)|(^[ \\t]*$)");

                var service_name_found = false;

                var pos = { v : 0 };
                var l = { v : null };

                var stdver_version = new RobotRaconteurWeb.RobotRaconteurVersion.ctor();
                var stdver_found = false;
                var entry_key_max = 0;

                try {
                    while (true) {
                        if (!RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_GetLine(is_, l, pos)) {
                            break;
                        }

                        var r_entry_match = r_entry.match(l.v);
                        if (!r_entry_match.getSuccess()) {
                            throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error near: " + (l.v || ""), (pos.v | 0));
                        }

                        var r_entry_match_blank = r_entry_match.getGroups().get(14);
                        if (r_entry_match_blank.getSuccess()) {
                            continue;
                        }

                        var entry_key = 1;
                        for (; entry_key < 12; entry_key = (entry_key + 1) | 0) {
                            if (r_entry_match.getGroups().get(entry_key).getSuccess()) {
                                break;
                            }
                        }

                        var r_entry_match_remaining = r_entry_match.getGroups().get(13);

                        if (entry_key !== 1 && !service_name_found) {
                            throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("service name must be first entry in service definition");
                        }

                        switch (entry_key) {
                            case 1: 
                                {
                                    if (entry_key_max >= 1) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("service name must be first entry in service definition");
                                    }
                                    if (service_name_found) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("service name already specified");
                                    }
                                    var tmp_name = { v : new (System.Collections.Generic.List$1(System.String)).ctor() };
                                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FromStringTypeFormat(l.v, "service", tmp_name);
                                    this.Name = tmp_name.v.getItem(0);
                                    entry_key_max = 1;
                                    service_name_found = true;
                                    continue;
                                }
                            case 2: 
                                {
                                    if (entry_key_max >= 2) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("service name must be first after service name");
                                    }
                                    stdver_version.FromString(r_entry_match_remaining.getValue());
                                    stdver_found = true;
                                    if (RobotRaconteurWeb.RobotRaconteurVersion.op_LessThan(stdver_version.$clone(), new RobotRaconteurWeb.RobotRaconteurVersion.$ctor2(0, 9))) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition standard version 0.9 or greater required for \"stdver\" keyword");
                                    }
                                    continue;
                                }
                            case 3: 
                                {
                                    this.Options.add(r_entry_match_remaining.getValue());
                                    continue;
                                }
                            case 4: 
                                {
                                    if (entry_key_max > 4) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("import must be before all but options");
                                    }
                                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FromStringImportFormat(l.v, "import", Bridge.ref(this, "Imports"));
                                    entry_key_max = 4;
                                    continue;
                                }
                            case 5: 
                                {
                                    if (entry_key_max > 5) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("using must be after imports and before all others except options");
                                    }
                                    var using_def = new RobotRaconteurWeb.UsingDefinition(this);
                                    using_def.FromString(l.v);
                                    this.Using.add(using_def);
                                    entry_key_max = 5;
                                    continue;
                                }
                            case 6: 
                                {
                                    if (entry_key_max >= 9) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("exception must be before struct and object");
                                    }
                                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FromStringTypeFormat(l.v, "exception", Bridge.ref(this, "Exceptions"));
                                    entry_key_max = 6;
                                    continue;
                                }
                            case 7: 
                                {
                                    if (entry_key_max >= 9) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("exception must be before struct and object");
                                    }
                                    var constant_def = new RobotRaconteurWeb.ConstantDefinition.ctor(this);
                                    constant_def.FromString(l.v);
                                    this.Constants.add(constant_def.Name, constant_def);
                                    entry_key_max = 7;
                                    continue;
                                }
                            case 8: 
                                {
                                    if (entry_key_max >= 9) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("enum must be before struct and object");
                                    }
                                    var init_pos = { v : 0 };
                                    var block = new System.IO.StringWriter.ctor();
                                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FindBlock(l.v, is_, block, pos, init_pos);
                                    var enum_def = new RobotRaconteurWeb.EnumDefinition(this);
                                    enum_def.FromString(block.toString(), init_pos.v);
                                    this.Enums.add(enum_def.Name, enum_def);
                                    entry_key_max = 8;
                                    continue;
                                }
                            case 9: 
                                {
                                    var init_pos1 = { v : 0 };
                                    var block1 = new System.IO.StringWriter.ctor();
                                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FindBlock(l.v, is_, block1, pos, init_pos1);
                                    var struct_def = new RobotRaconteurWeb.ServiceEntryDefinition(this);
                                    struct_def.FromString$2(block1.toString(), init_pos1.v, warnings);
                                    this.Structures.add(struct_def.Name, struct_def);
                                    entry_key_max = 9;
                                    continue;
                                }
                            case 10: 
                                {
                                    var init_pos2 = { v : 0 };
                                    var block2 = new System.IO.StringWriter.ctor();
                                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FindBlock(l.v, is_, block2, pos, init_pos2);
                                    var object_def = new RobotRaconteurWeb.ServiceEntryDefinition(this);
                                    object_def.FromString$2(block2.toString(), init_pos2.v, warnings);
                                    this.Objects.add(object_def.Name, object_def);
                                    entry_key_max = 10;
                                    continue;
                                }
                            case 11: 
                                {
                                    var init_pos3 = { v : 0 };
                                    var block3 = new System.IO.StringWriter.ctor();
                                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FindBlock(l.v, is_, block3, pos, init_pos3);
                                    var struct_def1 = new RobotRaconteurWeb.ServiceEntryDefinition(this);
                                    struct_def1.FromString$2(block3.toString(), init_pos3.v, warnings);
                                    this.Pods.add(struct_def1.Name, struct_def1);
                                    entry_key_max = 9;
                                    continue;
                                }
                            case 12: 
                                {
                                    var init_pos4 = { v : 0 };
                                    var block4 = new System.IO.StringWriter.ctor();
                                    RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FindBlock(l.v, is_, block4, pos, init_pos4);
                                    var struct_def2 = new RobotRaconteurWeb.ServiceEntryDefinition(this);
                                    struct_def2.FromString$2(block4.toString(), init_pos4.v, warnings);
                                    this.NamedArrays.add(struct_def2.Name, struct_def2);
                                    entry_key_max = 9;
                                    continue;
                                }
                            default: 
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error near: " + (l.v || ""), (pos.v | 0));
                        }

                    }

                    var version_found = false;
                    if (stdver_found) {
                        this.StdVer = stdver_version.$clone();
                        version_found = true;
                    }
                    $t = Bridge.getEnumerator(this.Options);
                    try {
                        while ($t.moveNext()) {
                            var so = $t.Current;
                            var r_version = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*version[ \\t]+(?:(\\d+(?:\\.\\d+)*)|[ -~\\t]*)$");
                            var r_version_match = r_version.match(so);
                            if (r_version_match.getSuccess()) {
                                if (version_found) {
                                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Robot Raconteur version already specified");
                                }
                                if (r_version_match.getGroups().get(1).getSuccess()) {
                                    this.StdVer = new RobotRaconteurWeb.RobotRaconteurVersion.$ctor1(r_version_match.getGroups().get(1).getValue());
                                } else {
                                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid Robot Raconteur version specified");
                                }
                                version_found = true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    var e;
                    if (Bridge.is($e1, RobotRaconteurWeb.RobotRaconteurParseException)) {
                        throw $e1;
                    } else {
                        e = $e1;
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error near: " + (l.v || ""), (pos.v | 0));
                    }
                }
            },
            Reset: function () {
                this.Structures.clear();
                this.Objects.clear();
                this.Options.clear();
                this.Imports.clear();
                this.Using.clear();
                this.Exceptions.clear();
                this.Constants.clear();
                this.Enums.clear();
                this.Pods.clear();
                this.NamedArrays.clear();
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceDefinitionUtil", {
        statics: {
            methods: {
                SplitQualifiedName: function (name) {
                    var pos = name.lastIndexOf(String.fromCharCode(46));
                    if (pos < 0) {
                        return { Item1: null, Item2: name };
                    }
                    return { Item1: name.substr(0, pos), Item2: name.substr(((pos + 1) | 0), ((((name.length - pos) | 0) - 1) | 0)) };
                },
                SplitParameterString: function (str) {
                    var o = new (System.Collections.Generic.List$1(System.String)).ctor();

                    var inbracket = false;
                    var pos = 0;
                    for (var i = 0; i < str.length; i = (i + 1) | 0) {
                        if (!inbracket && str.charCodeAt(i) === 91) {
                            inbracket = true;
                        }
                        if (inbracket && str.charCodeAt(i) === 93) {
                            inbracket = false;
                        }

                        if (!inbracket) {
                            if (str.charCodeAt(i) === 44) {
                                o.add(str.substr(pos, ((i - pos) | 0)));
                                pos = (i + 1) | 0;
                                if (pos > str.length) {
                                    break;
                                }
                            }
                        }
                    }

                    if (pos < str.length) {
                        o.add(str.substr(pos));
                    }
                    return System.Linq.Enumerable.from(o, System.String).select(function (x) {
                            return x.trim();
                        }).ToArray(System.String);
                },
                VerifyVersionSupport: function (def, major, minor, msg) {
                    var def_version = def.StdVer.$clone();
                    if (System.Nullable.lifteq(RobotRaconteurWeb.RobotRaconteurVersion.op_Equality, def_version.$clone(), null)) {
                        return;
                    }

                    if (RobotRaconteurWeb.RobotRaconteurVersion.op_LessThan(def_version.$clone(), new RobotRaconteurWeb.RobotRaconteurVersion.$ctor2(major, minor))) {
                        if (msg != null) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException(msg);
                        } else {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Newer service definition standard required for feature");
                        }
                    }
                },
                VerifyName: function (name, def, allowdot, ignorereserved) {
                    if (allowdot === void 0) { allowdot = false; }
                    if (ignorereserved === void 0) { ignorereserved = false; }
                    if (System.String.isNullOrEmpty(name)) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Empty name in service definition \"" + (def.Name || "") + "\"");
                    }

                    var name2 = name.toLowerCase();

                    if (!ignorereserved) {
                        if (Bridge.referenceEquals(name, "this") || Bridge.referenceEquals(name, "self") || Bridge.referenceEquals(name, "Me")) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("The names \"this\", \"self\", and \"Me\" are reserved, error in service definition \"" + (def.Name || "") + "\"");
                        }

                        var reserved = System.Array.init(["object", "end", "option", "service", "object", "struct", "import", "implements", "field", "property", "function", "event", "objref", "pipe", "callback", "wire", "memory", "void", "int8", "uint8", "int16", "uint16", "int32", "uint32", "int64", "uint64", "single", "double", "varvalue", "varobject", "exception", "using", "constant", "enum", "pod", "namedarray", "cdouble", "csingle", "bool"], System.String);

                        if (System.Array.contains(reserved, name, System.String)) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Name \"" + (name || "") + "\" is reserved in service definition\"" + (def.Name || "") + "\"");
                        }

                        if (System.String.startsWith(name2, "get_") || System.String.startsWith(name2, "set_") || System.String.startsWith(name2, "rr") || System.String.startsWith(name2, "robotraconteur") || System.String.startsWith(name2, "async_")) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Name \"" + (name || "") + "\" is invalid in service definition \"" + (def.Name || "") + "\"");
                        }
                    }

                    if (allowdot) {
                        if (!System.Text.RegularExpressions.Regex.isMatch(name, "^(?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)*$")) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Name \"" + (name || "") + "\" is invalid in service definition \"" + (def.Name || "") + "\"");
                        }
                    } else {
                        if (!System.Text.RegularExpressions.Regex.isMatch(name, "^[a-zA-Z](?:\\w*[a-zA-Z0-9])?$")) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Name \"" + (name || "") + "\" is invalid in service definition \"" + (def.Name || "") + "\"");
                        }
                    }
                },
                VerifyConstant$1: function (constant, def) {
                    var c = new RobotRaconteurWeb.ConstantDefinition.ctor(def);
                    try {
                        c.FromString(constant);
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Error in constant in service definition \"" + (def.Name || "") + "\"");
                    }

                    if (!c.VerifyValue()) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Error in constant " + (c.Name || "") + " in service definition \"" + (def.Name || "") + "\"");
                    }

                    if (c.Type.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Error in constant " + (c.Name || "") + " in service definition \"" + (def.Name || "") + "\"");
                    }

                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(c.Name, def);

                    return c.Name;
                },
                VerifyConstant: function (c, def, constants) {
                    if (!c.VerifyValue()) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Error in constant " + (c.Name || "") + " in service definition \"" + (def.Name || "") + "\"");
                    }
                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(c.Name, def);

                    if (c.Type.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyConstantStruct(c, def, constants, new (System.Collections.Generic.List$1(System.String)).ctor());

                    }

                    return c.Name;
                },
                VerifyConstantStruct: function (c, def, constants, parent_types) {
                    var $t, $t1, $t2;


                    var fields = c.ValueToStructFields();
                    parent_types.add(c.Name);
                    $t = Bridge.getEnumerator(fields);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(e.Name, def);
                            $t1 = Bridge.getEnumerator(parent_types);
                            try {
                                while ($t1.moveNext()) {
                                    var name = $t1.Current;
                                    if (Bridge.referenceEquals(e.ConstantRefName, name)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Error in constant " + (c.Name || "") + " in service definition \"" + (def.Name || "") + "\": recursive struct not allowed");
                                    }
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$Dispose();
                                }
                            }
                            var found = false;
                            $t2 = Bridge.getEnumerator(constants.Values);
                            try {
                                while ($t2.moveNext()) {
                                    var f = $t2.Current;
                                    if (Bridge.referenceEquals(f.Name, e.ConstantRefName)) {
                                        found = true;
                                        if (f.Type.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                                            RobotRaconteurWeb.ServiceDefinitionUtil.VerifyConstantStruct(f, def, constants, parent_types);
                                        }
                                        break;
                                    }
                                }
                            } finally {
                                if (Bridge.is($t2, System.IDisposable)) {
                                    $t2.System$IDisposable$Dispose();
                                }
                            }

                            if (!found) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Error in constant " + (c.Name || "") + " in service definition \"" + (def.Name || "") + "\": struct field " + (e.ConstantRefName || "") + " not found");
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                },
                VerifyEnum: function (e, def) {
                    var $t;
                    if (!e.VerifyValues()) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Error in constant in enum definition \"" + (def.Name || "") + "\"");
                    }

                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(e.Name, def);
                    $t = Bridge.getEnumerator(e.Values);
                    try {
                        while ($t.moveNext()) {
                            var e1 = $t.Current;
                            RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(e1.Name, def);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                },
                GetServiceNames: function (def) {
                    var $t, $t1, $t2, $t3, $t4, $t5, $t6;
                    var o = new (System.Collections.Generic.List$1(System.String)).ctor();
                    $t = Bridge.getEnumerator(def.Objects.Values);
                    try {
                        while ($t.moveNext()) {
                            var n = $t.Current;
                            o.add(n.Name);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(def.Structures.Values);
                    try {
                        while ($t1.moveNext()) {
                            var n1 = $t1.Current;
                            o.add(n1.Name);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }
                    $t2 = Bridge.getEnumerator(def.Pods.Values);
                    try {
                        while ($t2.moveNext()) {
                            var n2 = $t2.Current;
                            o.add(n2.Name);
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$Dispose();
                        }
                    }
                    $t3 = Bridge.getEnumerator(def.NamedArrays.Values);
                    try {
                        while ($t3.moveNext()) {
                            var n3 = $t3.Current;
                            o.add(n3.Name);
                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$Dispose();
                        }
                    }
                    $t4 = Bridge.getEnumerator(def.Constants.Values);
                    try {
                        while ($t4.moveNext()) {
                            var n4 = $t4.Current;
                            o.add(n4.Name);
                        }
                    } finally {
                        if (Bridge.is($t4, System.IDisposable)) {
                            $t4.System$IDisposable$Dispose();
                        }
                    }
                    $t5 = Bridge.getEnumerator(def.Enums.Values);
                    try {
                        while ($t5.moveNext()) {
                            var n5 = $t5.Current;
                            o.add(n5.Name);
                        }
                    } finally {
                        if (Bridge.is($t5, System.IDisposable)) {
                            $t5.System$IDisposable$Dispose();
                        }
                    }
                    $t6 = Bridge.getEnumerator(def.Exceptions);
                    try {
                        while ($t6.moveNext()) {
                            var n6 = $t6.Current;
                            o.add(n6);
                        }
                    } finally {
                        if (Bridge.is($t6, System.IDisposable)) {
                            $t6.System$IDisposable$Dispose();
                        }
                    }
                    return o;
                },
                VerifyUsing: function (e, def, importeddefs) {
                    var $t;
                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(e.UnqualifiedName, def);
                    var r = new System.Text.RegularExpressions.Regex.ctor(RobotRaconteurWeb.detail.ServiceDefinitionUtil.RR_QUALIFIED_TYPE_REGEX);
                    if (!r.isMatch(e.QualifiedName)) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Using \"" + (e.QualifiedName || "") + "\" is invalid in service definition \"" + (def.Name || "") + "\"");
                    }

                    var s1 = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(e.QualifiedName);

                    $t = Bridge.getEnumerator(importeddefs.Values);
                    try {
                        while ($t.moveNext()) {
                            var d1 = $t.Current;
                            if (Bridge.referenceEquals(s1.Item1, d1.Name)) {
                                var importeddefs_names = RobotRaconteurWeb.ServiceDefinitionUtil.GetServiceNames(d1);
                                if (!importeddefs_names.contains(s1.Item2)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Using \"" + (e.QualifiedName || "") + "\" is invalid in service definition \"" + (def.Name || "") + "\"");
                                }
                                return;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    throw new RobotRaconteurWeb.ServiceDefinitionException("Using \"" + (e.QualifiedName || "") + "\" is invalid in service definition \"" + (def.Name || "") + "\"");
                },
                VerifyType: function (t, def, defs) {
                    switch (t.ArrayType) {
                        case RobotRaconteurWeb.DataTypes_ArrayTypes.none: 
                        case RobotRaconteurWeb.DataTypes_ArrayTypes.array: 
                        case RobotRaconteurWeb.DataTypes_ArrayTypes.multidimarray: 
                            break;
                        default: 
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid Robot Raconteur data type \"" + (t.toString() || "") + "\" type in service \"" + (def.Name || "") + "\"");
                    }

                    switch (t.ContainerType) {
                        case RobotRaconteurWeb.DataTypes_ContainerTypes.none: 
                        case RobotRaconteurWeb.DataTypes_ContainerTypes.list: 
                        case RobotRaconteurWeb.DataTypes_ContainerTypes.map_int32: 
                        case RobotRaconteurWeb.DataTypes_ContainerTypes.map_string: 
                            break;
                        default: 
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid Robot Raconteur data type \"" + (t.toString() || "") + "\" type in service \"" + (def.Name || "") + "\"");
                    }

                    if (RobotRaconteurWeb.DataTypeUtil.IsNumber(t.Type)) {
                        return;

                    }
                    if (t.Type === RobotRaconteurWeb.DataTypes.string_t) {
                        if (t.ArrayType !== RobotRaconteurWeb.DataTypes_ArrayTypes.none) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid Robot Raconteur data type \"" + (t.toString() || "") + "\" type in service \"" + (def.Name || "") + "\"");
                        }

                        return;
                    }
                    if (t.Type === RobotRaconteurWeb.DataTypes.vector_t || t.Type === RobotRaconteurWeb.DataTypes.dictionary_t || t.Type === RobotRaconteurWeb.DataTypes.object_t || t.Type === RobotRaconteurWeb.DataTypes.varvalue_t || t.Type === RobotRaconteurWeb.DataTypes.varobject_t || t.Type === RobotRaconteurWeb.DataTypes.multidimarray_t) {
                        return;
                    }
                    if (t.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                        var nt = t.ResolveNamedType(defs);
                        var nt_type = nt.RRDataType;
                        if ((nt_type !== RobotRaconteurWeb.DataTypes.pod_t && nt_type !== RobotRaconteurWeb.DataTypes.namedarray_t) && t.ArrayType !== RobotRaconteurWeb.DataTypes_ArrayTypes.none) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid Robot Raconteur data type \"" + (t.toString() || "") + "\" type in service \"" + (def.Name || "") + "\"");
                        }
                        if (nt_type !== RobotRaconteurWeb.DataTypes.structure_t && nt_type !== RobotRaconteurWeb.DataTypes.pod_t && nt_type !== RobotRaconteurWeb.DataTypes.namedarray_t && nt_type !== RobotRaconteurWeb.DataTypes.enum_t) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid Robot Raconteur data type \"" + (t.toString() || "") + "\" type in service \"" + (def.Name || "") + "\"");
                        }
                        if (nt_type === RobotRaconteurWeb.DataTypes.pod_t) {

                        }
                        return;
                    }
                    throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid Robot Raconteur data type \"" + (t.toString() || "") + "\" type in service \"" + (def.Name || "") + "\"");
                },
                VerifyReturnType: function (t, def, defs) {
                    if (t.Type === RobotRaconteurWeb.DataTypes.void_t) {
                        if (t.ArrayType !== RobotRaconteurWeb.DataTypes_ArrayTypes.none || t.ContainerType !== RobotRaconteurWeb.DataTypes_ContainerTypes.none) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid Robot Raconteur data type \"" + (t.toString() || "") + "\" type in service \"" + (def.Name || "") + "\"");
                        }
                        return;
                    } else {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyType(t, def, defs);
                    }
                },
                VerifyParameters: function (p, def, defs) {
                    var $t;

                    var names = new (System.Collections.Generic.List$1(System.String)).ctor();
                    $t = Bridge.getEnumerator(p);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            RobotRaconteurWeb.ServiceDefinitionUtil.VerifyType(t, def, defs);
                            if (names.contains(t.Name)) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Parameters must have unique names");
                            }
                            names.add(t.Name);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                },
                VerifyModifiers: function (m, readwrite, unreliable, warnings) {
                    var $t, $t1;
                    var direction_found = false;
                    var unreliable_found = false;

                    $t = Bridge.getEnumerator(m.Modifiers);
                    try {
                        while ($t.moveNext()) {
                            var s = $t.Current;
                            if (readwrite) {
                                if (Bridge.referenceEquals(s, "readonly") || Bridge.referenceEquals(s, "writeonly")) {
                                    if (direction_found) {
                                        warnings.v.add(new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid member modifier combination: [readonly,writeonly]"));
                                    }
                                    direction_found = true;
                                    continue;
                                }
                            }

                            if (unreliable) {
                                if (Bridge.referenceEquals(s, "unreliable")) {
                                    var obj = m.ServiceEntry;
                                    if (obj != null) {
                                        $t1 = Bridge.getEnumerator(obj.Options);
                                        try {
                                            while ($t1.moveNext()) {
                                                var o = $t1.Current;
                                                var r = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*pipe[ \\t]+" + (m.Name || "") + "[ \\t]+unreliable[ \\t]*$");
                                                if (!r.isMatch(o)) {
                                                    warnings.v.add(new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid member modifier combination: [unreliable]"));
                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t1, System.IDisposable)) {
                                                $t1.System$IDisposable$Dispose();
                                            }
                                        }
                                    }

                                    if (unreliable_found) {
                                        warnings.v.add(new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid member modifier combination: [unreliable]"));
                                    }
                                    unreliable_found = true;
                                    continue;
                                }
                            }

                            warnings.v.add(new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Unknown member modifier: [" + (s || "") + "]"));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                },
                VerifyMember: function (m, def, defs, warnings) {
                    var $t, $t1;
                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(m.Name, def);

                    if (m.Modifiers.Count > 0) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyVersionSupport(def, 0, 9, "Service definition standard version 0.9 or greater required for Member Modifiers");
                    }

                    var p = Bridge.as(m, RobotRaconteurWeb.PropertyDefinition);
                    if (p != null) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyType(p.Type, def, defs);
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyModifiers(m, true, false, warnings);
                        return p.Name;
                    }
                    var f = Bridge.as(m, RobotRaconteurWeb.FunctionDefinition);
                    if (f != null) {
                        if (!f.IsGenerator) {
                            RobotRaconteurWeb.ServiceDefinitionUtil.VerifyParameters(f.Parameters, def, defs);
                            RobotRaconteurWeb.ServiceDefinitionUtil.VerifyReturnType(f.ReturnType, def, defs);
                            RobotRaconteurWeb.ServiceDefinitionUtil.VerifyModifiers(m, false, false, warnings);
                            return f.Name;
                        } else {
                            var generator_found = false;
                            ;
                            if (f.ReturnType.ContainerType === RobotRaconteurWeb.DataTypes_ContainerTypes.generator) {
                                if (f.ReturnType.Type === RobotRaconteurWeb.DataTypes.void_t) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Generator return must not be void");
                                }

                                var ret2 = f.ReturnType.Clone();
                                ret2.RemoveContainers();
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyType(ret2, def, defs);
                                if (f.ReturnType.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                                    f.ReturnType.ResolveNamedType(defs);
                                }
                                generator_found = true;
                            } else {
                                if (f.ReturnType.Type !== RobotRaconteurWeb.DataTypes.void_t) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Generator return must use generator container");
                                }
                            }

                            if (f.Parameters.Count > 0 && System.Linq.Enumerable.from(f.Parameters, RobotRaconteurWeb.TypeDefinition).last().ContainerType === RobotRaconteurWeb.DataTypes_ContainerTypes.generator) {
                                var p3 = System.Linq.Enumerable.from(f.Parameters, RobotRaconteurWeb.TypeDefinition).last().Clone();
                                p3.RemoveContainers();
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyType(p3, def, defs);
                                if (System.Linq.Enumerable.from(f.Parameters, RobotRaconteurWeb.TypeDefinition).last().Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                                    System.Linq.Enumerable.from(f.Parameters, RobotRaconteurWeb.TypeDefinition).last().ResolveNamedType(defs);
                                }
                                if (f.Parameters.Count > 1) {
                                    var params2 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.TypeDefinition)).$ctor1(System.Linq.Enumerable.from(f.Parameters, RobotRaconteurWeb.TypeDefinition).take(((f.Parameters.Count - 1) | 0)).ToArray(RobotRaconteurWeb.TypeDefinition));
                                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyParameters(params2, def, defs);
                                }
                                generator_found = true;
                            } else {
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyParameters(f.Parameters, def, defs);
                            }

                            if (!generator_found) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Generator return or parameter not found");
                            }

                            return f.Name;
                        }
                    }

                    var e = Bridge.as(m, RobotRaconteurWeb.EventDefinition);
                    if (e != null) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyParameters(e.Parameters, def, defs);
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyModifiers(m, false, false, warnings);
                        return e.Name;
                    }

                    var o = Bridge.as(m, RobotRaconteurWeb.ObjRefDefinition);
                    if (o != null) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyModifiers(m, false, false, warnings);

                        if (Bridge.referenceEquals(o.ObjectType, "varobject")) {
                            return o.Name;
                        }

                        if (!System.Linq.Enumerable.from(o.ObjectType, System.Char).contains(46)) {
                            $t = Bridge.getEnumerator(def.Objects.Values);
                            try {
                                while ($t.moveNext()) {
                                    var ee = $t.Current;
                                    if (Bridge.referenceEquals(ee.Name, o.ObjectType)) {
                                        return o.Name;
                                    }
                                }
                            } finally {
                                if (Bridge.is($t, System.IDisposable)) {
                                    $t.System$IDisposable$Dispose();
                                }
                            }
                        } else {
                            var s1 = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(o.ObjectType);

                            var defname = s1.Item1;
                            var def2 = { };
                            if (defs.tryGetValue(defname, def2)) {
                                $t1 = Bridge.getEnumerator(def2.v.Objects.Values);
                                try {
                                    while ($t1.moveNext()) {
                                        var ee1 = $t1.Current;
                                        if (Bridge.referenceEquals(ee1.Name, s1.Item2)) {
                                            return o.Name;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t1, System.IDisposable)) {
                                        $t1.System$IDisposable$Dispose();
                                    }
                                }
                            }
                        }
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Unknown object type \"" + (o.ObjectType || "") + "\" in member \"" + (m.Name || "") + "\" in  service \"" + (def.Name || "") + "\"");
                    }

                    var p2 = Bridge.as(m, RobotRaconteurWeb.PipeDefinition);
                    if (p2 != null) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyType(p2.Type, def, defs);
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyModifiers(m, true, true, warnings);
                        return p2.Name;
                    }

                    var c = Bridge.as(m, RobotRaconteurWeb.CallbackDefinition);
                    if (c != null) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyParameters(c.Parameters, def, defs);
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyReturnType(c.ReturnType, def, defs);
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyModifiers(m, false, false, warnings);
                        return c.Name;
                    }

                    var w = Bridge.as(m, RobotRaconteurWeb.WireDefinition);
                    if (w != null) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyType(w.Type, def, defs);
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyModifiers(m, true, false, warnings);
                        return w.Name;
                    }

                    var m2 = Bridge.as(m, RobotRaconteurWeb.MemoryDefinition);
                    if (m2 != null) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyType(m2.Type, def, defs);
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyModifiers(m, true, false, warnings);
                        if (!RobotRaconteurWeb.DataTypeUtil.IsNumber(m2.Type.Type)) {
                            if (m2.Type.Type !== RobotRaconteurWeb.DataTypes.namedtype_t) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Memory member must be numeric or pod");
                            }
                            var nt = m2.Type.ResolveNamedType(defs);
                            if (nt.RRDataType !== RobotRaconteurWeb.DataTypes.pod_t && nt.RRDataType !== RobotRaconteurWeb.DataTypes.namedarray_t) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Memory member must be numeric or pod");
                            }
                        }
                        switch (m2.Type.ArrayType) {
                            case RobotRaconteurWeb.DataTypes_ArrayTypes.array: 
                            case RobotRaconteurWeb.DataTypes_ArrayTypes.multidimarray: 
                                break;
                            default: 
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Memory member must be numeric or pod");
                        }

                        if (!m2.Type.ArrayVarLength) {
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Memory member must not be fixed size");
                        }

                        if (m2.Type.ArrayLength.Count !== 0) {
                            var array_count = System.Linq.Enumerable.from(m2.Type.ArrayLength, System.Int32).aggregate(1, function (x, y) {
                                    return Bridge.Int.mul(x, y);
                                });
                            if (array_count !== 0) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Memory member must not be fixed size");
                            }
                        }

                        return m2.Name;
                    }

                    throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid member \"" + (m.Name || "") + "\" type in service \"" + (def.Name || "") + "\"");
                },
                get_implements: function (obj, def, defs, rootobj) {
                    var $t, $t1, $t2, $t3;
                    if (rootobj === void 0) { rootobj = ""; }
                    var out_ = new RobotRaconteurWeb.ServiceDefinitionUtil.rrimplements();
                    out_.obj = obj;
                    out_.name = (def.Name || "") + "." + (obj.Name || "");

                    if (Bridge.referenceEquals(rootobj, "")) {
                        rootobj = out_.name;
                    }

                    $t = Bridge.getEnumerator(obj.Implements);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (!System.String.contains(e,".")) {


                                var obj2 = { };
                                if (!def.Objects.tryGetValue(e, obj2)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Object \"" + (def.Name || "") + "." + (e || "") + " not found");
                                }

                                if (Bridge.referenceEquals(rootobj, ((def.Name || "") + "." + (obj2.v.Name || "")))) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Recursive implements between \"" + (rootobj || "") + "\" and \"" + (def.Name || "") + "." + (obj2.v.Name || "") + "\"");
                                }

                                var imp2 = RobotRaconteurWeb.ServiceDefinitionUtil.get_implements(obj2.v, def, defs, rootobj);
                                out_.implements.add(imp2);
                            } else {
                                var s1 = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(e);

                                var def2 = { };
                                if (!defs.tryGetValue(s1.Item1, def2)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e || "") + "\" not found.");
                                }

                                var obj21 = { };
                                if (!def2.v.Objects.tryGetValue(s1.Item2, obj21)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Object \"" + (e || "") + " not found");
                                }

                                if (Bridge.referenceEquals(rootobj, ((def2.v.Name || "") + "." + (obj21.v.Name || "")))) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Recursive implements between \"" + (rootobj || "") + "\" and \"" + (def2.v.Name || "") + "." + (obj21.v.Name || "") + "\"");
                                }

                                var imp21 = RobotRaconteurWeb.ServiceDefinitionUtil.get_implements(obj21.v, def2.v, defs, rootobj);
                                out_.implements.add(imp21);
                            }




                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    $t1 = Bridge.getEnumerator(out_.implements);
                    try {
                        while ($t1.moveNext()) {
                            var r = $t1.Current;
                            $t2 = Bridge.getEnumerator(r.implements);
                            try {
                                while ($t2.moveNext()) {
                                    var r2 = $t2.Current;
                                    var found = false;
                                    $t3 = Bridge.getEnumerator(out_.implements);
                                    try {
                                        while ($t3.moveNext()) {
                                            var r3 = $t3.Current;
                                            if (Bridge.referenceEquals(r2.name, r3.name)) {
                                                found = true;
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$Dispose();
                                        }
                                    }
                                    if (!found) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Object \"" + (out_.name || "") + "\" does not implement inherited type \"" + (r2.name || "") + "\"");
                                    }
                                }
                            } finally {
                                if (Bridge.is($t2, System.IDisposable)) {
                                    $t2.System$IDisposable$Dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }
                    return out_;

                },
                CompareTypeDefinition: function (d1, t1, d2, t2) {
                    if (!Bridge.referenceEquals(t1.Name, t2.Name)) {
                        return false;
                    }
                    if (t1.ArrayType !== t2.ArrayType) {
                        return false;
                    }
                    if (t1.ArrayType !== RobotRaconteurWeb.DataTypes_ArrayTypes.none) {
                        if (t1.ArrayVarLength !== t2.ArrayVarLength) {
                            return false;
                        }
                        if (t1.ArrayLength.Count !== t2.ArrayLength.Count) {
                            return false;
                        }
                        if (!System.Linq.Enumerable.from(t1.ArrayLength, System.Int32).sequenceEqual(t2.ArrayLength)) {
                            return false;
                        }
                    }

                    if (t1.ContainerType !== t2.ContainerType) {
                        return false;
                    }

                    if (t1.Type !== t2.Type) {
                        return false;
                    }
                    if (t1.Type !== RobotRaconteurWeb.DataTypes.namedtype_t && t1.Type !== RobotRaconteurWeb.DataTypes.object_t) {
                        return true;
                    }

                    if (Bridge.referenceEquals(t1.TypeString, "varvalue") && Bridge.referenceEquals(t2.TypeString, "varvalue")) {
                        return true;
                    }


                    var st1 = "";
                    var st2 = "";

                    if (!System.Linq.Enumerable.from(t1.TypeString, System.Char).contains(46)) {
                        st1 = (d1.Name || "") + "." + (t1.TypeString || "");
                    } else {
                        st1 = t1.TypeString;
                    }

                    if (!System.Linq.Enumerable.from(t2.TypeString, System.Char).contains(46)) {
                        st2 = (d2.Name || "") + "." + (t2.TypeString || "");
                    } else {
                        st2 = t2.TypeString;
                    }

                    return Bridge.referenceEquals(st1, st2);
                },
                CompareTypeDefinitions: function (d1, t1, d2, t2) {
                    if (t1.Count !== t2.Count) {
                        return false;
                    }
                    for (var i = 0; i < t1.Count; i = (i + 1) | 0) {
                        if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinition(d1, t1.getItem(i), d2, t2.getItem(i))) {
                            return false;
                        }
                    }

                    return true;
                },
                CompareMember: function (m1, m2) {
                    if (!Bridge.referenceEquals(m1.Name, m2.Name)) {
                        return false;
                    }
                    if (!System.Linq.Enumerable.from(m1.Modifiers, System.String).sequenceEqual(m2.Modifiers)) {
                        return false;
                    }

                    var e1 = m1.ServiceEntry;
                    var e2 = m2.ServiceEntry;
                    if ((e1 == null) || (e2 == null)) {
                        return false;
                    }

                    var d1 = e1.ServiceDefinition;
                    var d2 = e2.ServiceDefinition;
                    if ((d1 == null) || (d2 == null)) {
                        return false;
                    }

                    var p1 = Bridge.as(m1, RobotRaconteurWeb.PropertyDefinition);
                    var p2 = Bridge.as(m2, RobotRaconteurWeb.PropertyDefinition);
                    if (p2 != null) {
                        if (p2 == null) {
                            return false;
                        }
                        return RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinition(d1, p1.Type, d2, p2.Type);
                    }

                    var f1 = Bridge.as(m1, RobotRaconteurWeb.FunctionDefinition);
                    var f2 = Bridge.as(m2, RobotRaconteurWeb.FunctionDefinition);
                    if (f1 != null) {
                        if (f2 == null) {
                            return false;
                        }
                        if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinition(d1, f1.ReturnType, d2, f2.ReturnType)) {
                            return false;
                        }
                        return RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinitions(d1, f1.Parameters, d2, f2.Parameters);
                    }

                    var ev1 = Bridge.as(m1, RobotRaconteurWeb.EventDefinition);
                    var ev2 = Bridge.as(m2, RobotRaconteurWeb.EventDefinition);
                    if (ev2 != null) {
                        if (ev2 == null) {
                            return false;
                        }

                        return RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinitions(d1, ev1.Parameters, d2, ev2.Parameters);
                    }

                    var o1 = Bridge.as(m1, RobotRaconteurWeb.ObjRefDefinition);
                    var o2 = Bridge.as(m2, RobotRaconteurWeb.ObjRefDefinition);
                    if (o1 != null) {
                        if (o2 == null) {
                            return false;
                        }

                        if (o1.ArrayType !== o2.ArrayType) {
                            return false;
                        }
                        if (o1.ContainerType !== o2.ContainerType) {
                            return false;
                        }

                        if (Bridge.referenceEquals(o1.ObjectType, "varobject") && Bridge.referenceEquals(o2.ObjectType, "varobject")) {
                            return true;
                        }


                        var st1 = "";
                        var st2 = "";

                        if (!System.Linq.Enumerable.from(o1.ObjectType, System.Char).contains(46)) {
                            st1 = (d1.Name || "") + "." + (o1.ObjectType || "");
                        } else {
                            st1 = o1.ObjectType;
                        }


                        if (!System.Linq.Enumerable.from(o2.ObjectType, System.Char).contains(46)) {
                            st2 = (d2.Name || "") + "." + (o2.ObjectType || "");
                        } else {
                            st2 = o2.ObjectType;
                        }

                        return Bridge.referenceEquals(st1, st2);

                    }

                    var pp1 = Bridge.as(m1, RobotRaconteurWeb.PipeDefinition);
                    var pp2 = Bridge.as(m2, RobotRaconteurWeb.PipeDefinition);
                    if (pp1 != null) {
                        if (pp2 == null) {
                            return false;
                        }

                        return RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinition(d1, pp1.Type, d2, pp2.Type);
                    }

                    var c1 = Bridge.as(m1, RobotRaconteurWeb.CallbackDefinition);
                    var c2 = Bridge.as(m2, RobotRaconteurWeb.CallbackDefinition);
                    if (c1 != null) {
                        if (c2 == null) {
                            return false;
                        }
                        if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinition(d1, c1.ReturnType, d2, c2.ReturnType)) {
                            return false;
                        }
                        return RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinitions(d1, c1.Parameters, d2, c2.Parameters);
                    }

                    var w1 = Bridge.as(m1, RobotRaconteurWeb.WireDefinition);
                    var w2 = Bridge.as(m2, RobotRaconteurWeb.WireDefinition);
                    if (w1 != null) {
                        if (w2 == null) {
                            return false;
                        }

                        return RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinition(d1, w1.Type, d2, w2.Type);
                    }

                    var mem1 = Bridge.as(m1, RobotRaconteurWeb.MemoryDefinition);
                    var mem2 = Bridge.as(m2, RobotRaconteurWeb.MemoryDefinition);
                    if (mem1 != null) {
                        if (mem2 == null) {
                            return false;
                        }

                        return RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinition(d1, mem1.Type, d2, mem2.Type);
                    }

                    return false;

                },
                VerifyObject: function (obj, def, defs, warnings) {
                    var $t, $t1, $t2, $t3, $t4;
                    if (obj.EntryType !== RobotRaconteurWeb.DataTypes.object_t) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid EntryType in " + (obj.Name || ""));
                    }

                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(obj.Name, def);

                    var membernames = new (System.Collections.Generic.List$1(System.String)).ctor();

                    $t = Bridge.getEnumerator(obj.Options);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            var s1 = System.String.split(e, null.map(function (i) {{ return String.fromCharCode(i); }}));
                            if (Bridge.referenceEquals(s1[System.Array.index(0, s1)], "constant")) {
                                var membername = RobotRaconteurWeb.ServiceDefinitionUtil.VerifyConstant$1(e, def);
                                if (membernames.contains(membername)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Object \"" + (obj.Name || "") + "\" in service definition \"" + (def.Name || "") + "\" contains multiple members named \"" + (membername || "") + "\"");
                                }
                                membernames.add(membername);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    if (obj.Constants.Count !== 0) {
                        RobotRaconteurWeb.ServiceDefinitionUtil.VerifyVersionSupport(def, 0, 9, "Service definition standard version 0.9 or greater required for \"constant\" keyword");
                    }

                    $t1 = Bridge.getEnumerator(obj.Constants.Values);
                    try {
                        while ($t1.moveNext()) {
                            var e1 = $t1.Current;
                            var membername1 = RobotRaconteurWeb.ServiceDefinitionUtil.VerifyConstant(e1, def, obj.Constants);
                            if (membernames.contains(membername1)) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Object \"" + (obj.Name || "") + "\" in service definition \"" + (def.Name || "") + "\" contains multiple members named \"" + (membername1 || "") + "\"");
                            }
                            membernames.add(membername1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }

                    $t2 = Bridge.getEnumerator(obj.Members.Values);
                    try {
                        while ($t2.moveNext()) {
                            var e2 = $t2.Current;

                            var membername2 = RobotRaconteurWeb.ServiceDefinitionUtil.VerifyMember(e2, def, defs, warnings);
                            if (membernames.contains(membername2)) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Object \"" + (obj.Name || "") + "\" in service definition \"" + (def.Name || "") + "\" contains multiple members named \"" + (membername2 || "") + "\"");
                            }
                            membernames.add(membername2);
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$Dispose();
                        }
                    }

                    var r = RobotRaconteurWeb.ServiceDefinitionUtil.get_implements(obj, def, defs);

                    $t3 = Bridge.getEnumerator(r.implements);
                    try {
                        while ($t3.moveNext()) {
                            var e3 = $t3.Current;
                            $t4 = Bridge.getEnumerator(e3.obj.Members.Values);
                            try {
                                while ($t4.moveNext()) {
                                    var ee = $t4.Current;
                                    var m2 = { };
                                    if (!obj.Members.tryGetValue(ee.Name, m2)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Object \"" + (obj.Name || "") + "\" in service definition \"" + (def.Name || "") + "\" does not implement required member \"" + (ee.Name || "") + "\"");
                                    }


                                    if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareMember(m2.v, ee)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Member \"" + (ee.Name || "") + "\" in object \"" + (obj.Name || "") + "\" in service definition \"" + (def.Name || "") + "\" does not match implemented member " + (Bridge.toString(m2.v) || ""));
                                    }
                                }
                            } finally {
                                if (Bridge.is($t4, System.IDisposable)) {
                                    $t4.System$IDisposable$Dispose();
                                }
                            }

                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$Dispose();
                        }
                    }

                },
                VerifyStructure_check_recursion: function (strut, names, entry_type) {
                    var $t;
                    if (strut.EntryType !== entry_type && strut.EntryType !== RobotRaconteurWeb.DataTypes.namedarray_t) {
                        throw new RobotRaconteurWeb.InternalErrorException("");
                    }

                    names.v.add(strut.Name);

                    $t = Bridge.getEnumerator(strut.Members.Values);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            var p = Bridge.as(e, RobotRaconteurWeb.PropertyDefinition);
                            if (p == null) {
                                throw new RobotRaconteurWeb.InternalErrorException("");
                            }

                            if (p.Type.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                                var nt_def = p.Type.ResolveNamedType();
                                var et_def = Bridge.as(nt_def, RobotRaconteurWeb.ServiceEntryDefinition);
                                if (et_def == null) {
                                    throw new RobotRaconteurWeb.InternalErrorException("");
                                }
                                if (et_def.EntryType !== entry_type && et_def.EntryType !== RobotRaconteurWeb.DataTypes.namedarray_t) {
                                    throw new RobotRaconteurWeb.InternalErrorException("");
                                }

                                if (names.v.contains(et_def.Name)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Recursive namedarray/pod detected in " + (strut.Name || ""));
                                }

                                var names2 = { v : new (System.Collections.Generic.HashSet$1(System.String)).$ctor1(names.v) };
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyStructure_check_recursion(et_def, names2, entry_type);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                },
                VerifyStructure_common: function (strut, def, defs, warnings, entry_type) {
                    var $t, $t1, $t2;
                    if (strut.EntryType !== entry_type) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid EntryType in " + (strut.Name || ""));
                    }

                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(strut.Name, def);
                    var membernames = new (System.Collections.Generic.List$1(System.String)).ctor();

                    $t = Bridge.getEnumerator(strut.Options);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            var s1 = System.String.split(e, null, null, 1);
                            if (Bridge.referenceEquals(s1[System.Array.index(0, s1)], "constant")) {
                                var membername = RobotRaconteurWeb.ServiceDefinitionUtil.VerifyConstant$1(e, def);
                                if (membernames.contains(membername)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Structure \"" + (strut.Name || "") + "\" in service definition \"" + (def.Name || "") + "\" contains multiple members named \"" + (membername || "") + "\"");
                                }
                                membernames.add(membername);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    $t1 = Bridge.getEnumerator(strut.Constants.Values);
                    try {
                        while ($t1.moveNext()) {
                            var e1 = $t1.Current;
                            var membername1 = RobotRaconteurWeb.ServiceDefinitionUtil.VerifyConstant(e1, def, strut.Constants);
                            if (membernames.contains(membername1)) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Struct \"" + (strut.Name || "") + "\" in service definition \"" + (def.Name || "") + "\" contains multiple members named \"" + (membername1 || "") + "\"");
                            }
                            membernames.add(membername1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }

                    var namedarray_element_type = RobotRaconteurWeb.DataTypes.void_t;

                    $t2 = Bridge.getEnumerator(strut.Members.Values);
                    try {
                        while ($t2.moveNext()) {
                            var e2 = $t2.Current;
                            var p = Bridge.as(e2, RobotRaconteurWeb.PropertyDefinition);
                            if (p == null) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Structure \"" + (strut.Name || "") + "\" can only contain fields in service definition \"" + (def.Name || "") + "\"");
                            }

                            var membername2 = RobotRaconteurWeb.ServiceDefinitionUtil.VerifyMember(p, def, defs, warnings);

                            if (entry_type === RobotRaconteurWeb.DataTypes.pod_t) {
                                var t = p.Type;
                                if (!RobotRaconteurWeb.DataTypeUtil.IsNumber(t.Type) && t.Type !== RobotRaconteurWeb.DataTypes.namedtype_t) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Pods must only contain numeric, pod, and namedarray types");
                                }

                                if (t.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                                    var tt = t.ResolveNamedType();
                                    if (tt.RRDataType !== RobotRaconteurWeb.DataTypes.pod_t && tt.RRDataType !== RobotRaconteurWeb.DataTypes.namedarray_t) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Pods must only contain numeric, custruct, pod types");
                                    }
                                }

                                if (t.ContainerType !== RobotRaconteurWeb.DataTypes_ContainerTypes.none) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Pods may not use containers");
                                }

                                if (t.ArrayLength.contains(0) || (t.ArrayType === RobotRaconteurWeb.DataTypes_ArrayTypes.multidimarray && t.ArrayLength.Count === 0)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Pods must have fixed or finite length arrays");
                                }

                                var n = { v : new (System.Collections.Generic.HashSet$1(System.String)).ctor() };
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyStructure_check_recursion(strut, n, RobotRaconteurWeb.DataTypes.pod_t);
                            }

                            if (entry_type === RobotRaconteurWeb.DataTypes.namedarray_t) {
                                var t1 = p.Type;
                                if (!RobotRaconteurWeb.DataTypeUtil.IsNumber(t1.Type) && t1.Type !== RobotRaconteurWeb.DataTypes.namedtype_t) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("NamedArrays must only contain numeric and namedarray types");
                                }

                                if (t1.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                                    var tt1 = t1.ResolveNamedType();
                                    if (tt1.RRDataType !== RobotRaconteurWeb.DataTypes.namedarray_t) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("NamedArrays must only contain numeric and namedarray types");
                                    }
                                }

                                if (t1.ContainerType !== RobotRaconteurWeb.DataTypes_ContainerTypes.none) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("NamedArrays may not use containers");
                                }

                                switch (t1.ArrayType) {
                                    case RobotRaconteurWeb.DataTypes_ArrayTypes.none: 
                                        break;
                                    case RobotRaconteurWeb.DataTypes_ArrayTypes.array: 
                                        if (t1.ArrayVarLength) {
                                            throw new RobotRaconteurWeb.ServiceDefinitionException("NamedArray fields must be scalars or fixed arrays");
                                        }
                                        break;
                                    default: 
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("NamedArray fields must be scalars or fixed arrays");
                                }

                                RobotRaconteurWeb.ServiceDefinitionUtil.GetNamedArrayElementTypeAndCount(strut, defs);
                            }

                            if (membernames.contains(membername2)) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Structure \"" + (strut.Name || "") + "\" in service definition \"" + (def.Name || "") + "\" contains multiple members named \"" + (membername2 || "") + "\"");
                            }
                            membernames.add(membername2);
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$Dispose();
                        }
                    }

                },
                VerifyStructure: function (strut, def, defs, warnings) {
                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyStructure_common(strut, def, defs, warnings, RobotRaconteurWeb.DataTypes.structure_t);
                },
                VerifyPod: function (strut, def, defs, warnings) {
                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyStructure_common(strut, def, defs, warnings, RobotRaconteurWeb.DataTypes.pod_t);
                },
                VerifyNamedArray: function (strut, def, defs, warnings) {
                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyStructure_common(strut, def, defs, warnings, RobotRaconteurWeb.DataTypes.namedarray_t);
                },
                get_imports: function (def, defs, rootdef) {
                    var $t;
                    if (rootdef === void 0) { rootdef = null; }
                    var out_ = new RobotRaconteurWeb.ServiceDefinitionUtil.rrimports();
                    out_.def = def;
                    if (def.Imports.Count === 0) {
                        return out_;
                    }

                    if (rootdef == null) {
                        rootdef = def;
                    }

                    $t = Bridge.getEnumerator(def.Imports);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            var def2 = { };
                            if (!defs.tryGetValue(e, def2)) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e || "") + "\" not found.");
                            }
                            if (Bridge.referenceEquals(def2.v.Name, rootdef.Name)) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Recursive imports between \"" + (def.Name || "") + "\" and \"" + (rootdef.Name || "") + "\"");
                            }
                            var imp2 = RobotRaconteurWeb.ServiceDefinitionUtil.get_imports(def2.v, defs, rootdef);
                            out_.imported.add(imp2);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return out_;
                },
                VerifyImports: function (def, defs) {
                    var c = RobotRaconteurWeb.ServiceDefinitionUtil.get_imports(def, defs);
                },
                VerifyServiceDefinitions$1: function (def, warnings) {
                    var $t, $t1, $t2, $t3, $t4, $t5, $t6, $t7, $t8, $t9, $t10, $t11, $t12;
                    $t = Bridge.getEnumerator(def.Values);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            e.CheckVersion();

                            if (!System.String.startsWith(e.Name, "RobotRaconteurTestService") && !System.String.startsWith(e.Name, "RobotRaconteurServiceIndex")) {
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(e.Name, e, true);
                            }

                            if (System.String.endsWith(e.Name, "_signed")) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition names ending with \"_signed\" are reserved");
                            }

                            RobotRaconteurWeb.ServiceDefinitionUtil.VerifyImports(e, def);

                            var names = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                            $t1 = Bridge.getEnumerator(e.Options);
                            try {
                                while ($t1.moveNext()) {
                                    var ee = $t1.Current;
                                    var s1 = System.String.split(ee, null, null, 1);
                                    if (Bridge.referenceEquals(s1[System.Array.index(0, s1)], "constant")) {
                                        var name = RobotRaconteurWeb.ServiceDefinitionUtil.VerifyConstant$1(ee, e);
                                        if (names.contains(name)) {
                                            throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name || "") + "\"");
                                        }
                                        names.add(name);
                                    }
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$Dispose();
                                }
                            }

                            if (e.Constants.Count !== 0) {
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyVersionSupport(e, 0, 9, "Service definition standard version 0.9 or greater required for \"constant\" keyword");
                            }

                            $t2 = Bridge.getEnumerator(e.Constants.Values);
                            try {
                                while ($t2.moveNext()) {
                                    var ee1 = $t2.Current;
                                    var name1 = RobotRaconteurWeb.ServiceDefinitionUtil.VerifyConstant(ee1, e, e.Constants);
                                    if (names.contains(name1)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name1 || "") + "\"");
                                    }
                                    names.add(name1);
                                }
                            } finally {
                                if (Bridge.is($t2, System.IDisposable)) {
                                    $t2.System$IDisposable$Dispose();
                                }
                            }

                            $t3 = Bridge.getEnumerator(e.Exceptions);
                            try {
                                while ($t3.moveNext()) {
                                    var ee2 = $t3.Current;
                                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyName(ee2, e);
                                    var name2 = ee2;
                                    if (names.contains(name2)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name2 || "") + "\"");
                                    }
                                    names.add(name2);
                                }
                            } finally {
                                if (Bridge.is($t3, System.IDisposable)) {
                                    $t3.System$IDisposable$Dispose();
                                }
                            }

                            var importeddefs = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition)).ctor();
                            $t4 = Bridge.getEnumerator(e.Imports);
                            try {
                                while ($t4.moveNext()) {
                                    var ee3 = $t4.Current;
                                    $t5 = Bridge.getEnumerator(def.Values);
                                    try {
                                        while ($t5.moveNext()) {
                                            var ee2 = $t5.Current;
                                            if (Bridge.referenceEquals(ee3, ee2.Name)) {
                                                importeddefs.add(ee2.Name, ee2);
                                            }

                                        }
                                    } finally {
                                        if (Bridge.is($t5, System.IDisposable)) {
                                            $t5.System$IDisposable$Dispose();
                                        }
                                    }
                                }
                            } finally {
                                if (Bridge.is($t4, System.IDisposable)) {
                                    $t4.System$IDisposable$Dispose();
                                }
                            }

                            if (RobotRaconteurWeb.RobotRaconteurVersion.op_Explicit(e.StdVer)) {
                                $t6 = Bridge.getEnumerator(importeddefs.Values);
                                try {
                                    while ($t6.moveNext()) {
                                        var ee4 = $t6.Current;
                                        if (!RobotRaconteurWeb.RobotRaconteurVersion.op_Explicit(ee4.StdVer) || RobotRaconteurWeb.RobotRaconteurVersion.op_GreaterThan(ee4.StdVer.$clone(), e.StdVer.$clone())) {
                                            throw new RobotRaconteurWeb.ServiceDefinitionException("Imported service definition " + (ee4.Name || "") + " has a higher Service Definition standard version than " + (e.Name || ""));
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t6, System.IDisposable)) {
                                        $t6.System$IDisposable$Dispose();
                                    }
                                }
                            }

                            if (e.Using.Count > 0) {
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyVersionSupport(e, 0, 9, "Service definition standard version 0.9 or greater required for \"using\" keyword");
                            }

                            $t7 = Bridge.getEnumerator(e.Using);
                            try {
                                while ($t7.moveNext()) {
                                    var ee5 = $t7.Current;
                                    var name3 = ee5.UnqualifiedName;
                                    if (names.contains(name3)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name3 || "") + "\"");
                                    }
                                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyUsing(ee5, e, importeddefs);
                                    names.add(name3);

                                }
                            } finally {
                                if (Bridge.is($t7, System.IDisposable)) {
                                    $t7.System$IDisposable$Dispose();
                                }
                            }

                            if (e.Enums.Count > 0) {
                                RobotRaconteurWeb.ServiceDefinitionUtil.VerifyVersionSupport(e, 0, 9, "Service definition standard version 0.9 or greater required for \"enum\" keyword");
                            }

                            $t8 = Bridge.getEnumerator(e.Enums.Values);
                            try {
                                while ($t8.moveNext()) {
                                    var ee6 = $t8.Current;
                                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyEnum(ee6, e);
                                    var name4 = ee6.Name;
                                    if (names.contains(name4)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name4 || "") + "\"");
                                    }
                                    names.add(name4);
                                }
                            } finally {
                                if (Bridge.is($t8, System.IDisposable)) {
                                    $t8.System$IDisposable$Dispose();
                                }
                            }

                            $t9 = Bridge.getEnumerator(e.Structures.Values);
                            try {
                                while ($t9.moveNext()) {
                                    var ee7 = $t9.Current;
                                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyStructure(ee7, e, importeddefs, warnings);

                                    var name5 = ee7.Name;
                                    if (names.contains(name5)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name5 || "") + "\"");
                                    }
                                    names.add(name5);
                                }
                            } finally {
                                if (Bridge.is($t9, System.IDisposable)) {
                                    $t9.System$IDisposable$Dispose();
                                }
                            }

                            $t10 = Bridge.getEnumerator(e.Pods.Values);
                            try {
                                while ($t10.moveNext()) {
                                    var ee8 = $t10.Current;
                                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyPod(ee8, e, importeddefs, warnings);

                                    var name6 = ee8.Name;
                                    if (names.contains(name6)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name6 || "") + "\"");
                                    }
                                    names.add(name6);
                                }
                            } finally {
                                if (Bridge.is($t10, System.IDisposable)) {
                                    $t10.System$IDisposable$Dispose();
                                }
                            }

                            $t11 = Bridge.getEnumerator(e.NamedArrays.Values);
                            try {
                                while ($t11.moveNext()) {
                                    var ee9 = $t11.Current;
                                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyNamedArray(ee9, e, importeddefs, warnings);

                                    var name7 = ee9.Name;
                                    if (names.contains(name7)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name7 || "") + "\"");
                                    }
                                    names.add(name7);
                                }
                            } finally {
                                if (Bridge.is($t11, System.IDisposable)) {
                                    $t11.System$IDisposable$Dispose();
                                }
                            }

                            $t12 = Bridge.getEnumerator(e.Objects.Values);
                            try {
                                while ($t12.moveNext()) {
                                    var ee10 = $t12.Current;
                                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyObject(ee10, e, importeddefs, warnings);

                                    var name8 = ee10.Name;
                                    if (names.contains(name8)) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("Service definition \"" + (e.Name || "") + "\" contains multiple high level names \"" + (name8 || "") + "\"");
                                    }
                                    names.add(name8);

                                }
                            } finally {
                                if (Bridge.is($t12, System.IDisposable)) {
                                    $t12.System$IDisposable$Dispose();
                                }
                            }

                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                },
                VerifyServiceDefinitions: function (def) {
                    var warnings = { v : new (System.Collections.Generic.List$1(System.Exception)).ctor() };
                    RobotRaconteurWeb.ServiceDefinitionUtil.VerifyServiceDefinitions$1(def, warnings);
                },
                CompareConstantDefinition: function (service1, d1, service2, d2) {
                    if (!Bridge.referenceEquals(d1.Name, d2.Name)) {
                        return false;
                    }
                    if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareTypeDefinition(service1, d1.Type, service2, d2.Type)) {
                        return false;
                    }
                    if (!Bridge.referenceEquals(d1.Value.trim(), d2.Value.trim())) {
                        return false;
                    }
                    return true;
                },
                CompareServiceEntryDefinition: function (service1, d1, service2, d2) {
                    var $t, $t1;
                    if (!Bridge.referenceEquals(d1.Name, d2.Name)) {
                        return false;
                    }
                    if (d1.EntryType !== d2.EntryType) {
                        return false;
                    }
                    if (!System.Linq.Enumerable.from(d1.Implements, System.String).sequenceEqual(d2.Implements)) {
                        return false;
                    }
                    if (!System.Linq.Enumerable.from(d1.Options, System.String).sequenceEqual(d2.Options)) {
                        return false;
                    }
                    if (d1.Constants.Count !== d2.Constants.Count) {
                        return false;
                    }
                    var constant_keys = ($t = System.String, System.Linq.Enumerable.from(d1.Constants.Keys, $t).ToArray($t));
                    for (var i = 0; i < d1.Constants.Count; i = (i + 1) | 0) {
                        if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareConstantDefinition(service1, d1.Constants.getItem(constant_keys[System.Array.index(i, constant_keys)]), service2, d2.Constants.getItem(constant_keys[System.Array.index(i, constant_keys)]))) {
                            return false;
                        }
                    }

                    if (d1.Members.Count !== d2.Members.Count) {
                        return false;
                    }
                    var member_keys = ($t1 = System.String, System.Linq.Enumerable.from(d1.Members.Keys, $t1).ToArray($t1));
                    for (var i1 = 0; i1 < d1.Members.Count; i1 = (i1 + 1) | 0) {
                        if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareMember(d1.Members.getItem(member_keys[System.Array.index(i1, member_keys)]), d2.Members.getItem(member_keys[System.Array.index(i1, member_keys)]))) {
                            return false;
                        }
                    }
                    return true;
                },
                CompareUsingDefinition: function (u1, u2) {
                    if (!Bridge.referenceEquals(u1.QualifiedName, u2.QualifiedName)) {
                        return false;
                    }
                    if (!Bridge.referenceEquals(u1.UnqualifiedName, u2.UnqualifiedName)) {
                        return false;
                    }
                    return true;
                },
                CompareEnumDefinition: function (enum1, enum2) {
                    if (!Bridge.referenceEquals(enum1.Name, enum2.Name)) {
                        return false;
                    }
                    if (enum1.Values.Count !== enum2.Values.Count) {
                        return false;
                    }
                    for (var i = 0; i < enum1.Values.Count; i = (i + 1) | 0) {
                        if (!Bridge.referenceEquals(enum1.Values.getItem(i).Name, enum2.Values.getItem(i).Name)) {
                            return false;
                        }
                        if (enum1.Values.getItem(i).Value !== enum2.Values.getItem(i).Value) {
                            return false;
                        }
                        if (enum1.Values.getItem(i).ImplicitValue !== enum2.Values.getItem(i).ImplicitValue) {
                            return false;
                        }
                        if (enum1.Values.getItem(i).HexValue !== enum2.Values.getItem(i).HexValue) {
                            return false;
                        }
                    }
                    return true;
                },
                CompareServiceDefinitions: function (service1, service2) {
                    var $t, $t1, $t2, $t3, $t4;
                    if (!Bridge.referenceEquals(service1.Name, service2.Name)) {
                        return false;
                    }
                    if (!System.Linq.Enumerable.from(service1.Imports, System.String).sequenceEqual(service2.Imports)) {
                        return false;
                    }
                    if (!System.Linq.Enumerable.from(service1.Options, System.String).sequenceEqual(service2.Options)) {
                        return false;
                    }

                    if (service1.Using.Count !== service2.Using.Count) {
                        return false;
                    }
                    for (var i = 0; i < service1.Using.Count; i = (i + 1) | 0) {
                        if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareUsingDefinition(service1.Using.getItem(i), service2.Using.getItem(i))) {
                            return false;
                        }
                    }

                    if (service1.Constants.Count !== service2.Constants.Count) {
                        return false;
                    }
                    $t = Bridge.getEnumerator(service1.Constants.Keys);
                    try {
                        while ($t.moveNext()) {
                            var i1 = $t.Current;
                            if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareConstantDefinition(service1, service1.Constants.getItem(i1), service2, service2.Constants.getItem(i1))) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    if (service1.Enums.Count !== service2.Enums.Count) {
                        return false;
                    }
                    $t1 = Bridge.getEnumerator(service1.Enums.Keys);
                    try {
                        while ($t1.moveNext()) {
                            var i2 = $t1.Current;
                            if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareEnumDefinition(service1.Enums.getItem(i2), service2.Enums.getItem(i2))) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }

                    if (RobotRaconteurWeb.RobotRaconteurVersion.op_Inequality(service1.StdVer.$clone(), service2.StdVer.$clone())) {
                        return false;
                    }

                    if (service1.Objects.Count !== service2.Objects.Count) {
                        return false;
                    }
                    $t2 = Bridge.getEnumerator(service1.Objects.Keys);
                    try {
                        while ($t2.moveNext()) {
                            var i3 = $t2.Current;
                            if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareServiceEntryDefinition(service1, service1.Objects.getItem(i3), service2, service2.Objects.getItem(i3))) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$Dispose();
                        }
                    }

                    if (service1.Structures.Count !== service2.Structures.Count) {
                        return false;
                    }
                    $t3 = Bridge.getEnumerator(service1.Structures.Keys);
                    try {
                        while ($t3.moveNext()) {
                            var i4 = $t3.Current;
                            if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareServiceEntryDefinition(service1, service1.Structures.getItem(i4), service2, service2.Structures.getItem(i4))) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$Dispose();
                        }
                    }

                    if (service1.Pods.Count !== service2.Pods.Count) {
                        return false;
                    }
                    $t4 = Bridge.getEnumerator(service1.Pods.Keys);
                    try {
                        while ($t4.moveNext()) {
                            var i5 = $t4.Current;
                            if (!RobotRaconteurWeb.ServiceDefinitionUtil.CompareServiceEntryDefinition(service1, service1.Pods.getItem(i5), service2, service2.Pods.getItem(i5))) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t4, System.IDisposable)) {
                            $t4.System$IDisposable$Dispose();
                        }
                    }

                    return true;
                },
                EstimatePodPackedElementSize: function (def, other_defs, node, client) {
                    var $t;
                    if (other_defs === void 0) { other_defs = null; }
                    if (node === void 0) { node = null; }
                    if (client === void 0) { client = null; }
                    var s = 16;
                    s = (s + (RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(def.Name))) | 0;
                    $t = Bridge.getEnumerator(def.Members.Values);
                    try {
                        while ($t.moveNext()) {
                            var m = $t.Current;
                            var p = Bridge.as(m, RobotRaconteurWeb.PropertyDefinition);
                            if (RobotRaconteurWeb.DataTypeUtil.IsNumber(p.Type.Type)) {
                                s = (s + 16) | 0;
                                s = (s + (RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(p.Name))) | 0;
                                var array_count;
                                if (p.Type.ArrayType === RobotRaconteurWeb.DataTypes_ArrayTypes.none) {
                                    array_count = 1;
                                } else {
                                    array_count = System.Linq.Enumerable.from(p.Type.ArrayLength, System.Int32).aggregate(1, function (x, y) {
                                            return Bridge.Int.mul(x, y);
                                        });
                                    ;
                                }
                                s = (s + (Bridge.Int.mul(((RobotRaconteurWeb.DataTypeUtil.size(p.Type.Type)) | 0), array_count))) | 0;
                            } else {
                                var nt = Bridge.cast((p.Type.ResolveNamedType(other_defs, node, client)), RobotRaconteurWeb.ServiceEntryDefinition);
                                s = (s + 16) | 0;
                                s = (s + (RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(p.Name))) | 0;
                                s = (s + (RobotRaconteurWeb.ArrayBinaryWriter.GetStringByteCount8(nt.ResolveQualifiedName()))) | 0;
                                var array_count1;
                                if (p.Type.ArrayType === RobotRaconteurWeb.DataTypes_ArrayTypes.none) {
                                    array_count1 = 1;
                                } else {
                                    array_count1 = System.Linq.Enumerable.from(p.Type.ArrayLength, System.Int32).aggregate(1, function (x, y) {
                                            return Bridge.Int.mul(x, y);
                                        });
                                }
                                s = (s + (Bridge.Int.mul(RobotRaconteurWeb.ServiceDefinitionUtil.EstimatePodPackedElementSize(nt, other_defs, node, client), array_count1))) | 0;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                    return s;
                },
                GetNamedArrayElementTypeAndCount: function (def, other_defs, node, client, n) {
                    var $t;
                    if (other_defs === void 0) { other_defs = null; }
                    if (node === void 0) { node = null; }
                    if (client === void 0) { client = null; }
                    if (n === void 0) { n = null; }
                    if (n == null) {
                        n = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                    }

                    if (def.EntryType !== RobotRaconteurWeb.DataTypes.namedarray_t) {
                        throw new System.InvalidOperationException.$ctor1("Argument must be an namedarray");
                    }

                    n.add(def.Name);

                    var element_type = RobotRaconteurWeb.DataTypes.void_t;
                    var element_count = 0;

                    if (def.Members.Count === 0) {
                        throw new RobotRaconteurWeb.ServiceDefinitionException("namedarray must not be empty");
                    }

                    $t = Bridge.getEnumerator(def.Members.Values);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            var field_element_count = 1;

                            var p = Bridge.as(e, RobotRaconteurWeb.PropertyDefinition);
                            if (p == null) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid member type in namedarray: " + (def.Name || ""));
                            }

                            if (p.Type.ContainerType !== RobotRaconteurWeb.DataTypes_ContainerTypes.none) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("namedarray must not contain containers: " + (def.Name || ""));
                            }

                            if (p.Type.ArrayType !== RobotRaconteurWeb.DataTypes_ArrayTypes.none && p.Type.ArrayVarLength) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("namedarray must not contain variable length arrays: " + (def.Name || ""));
                            }

                            if (p.Type.ArrayType !== RobotRaconteurWeb.DataTypes_ArrayTypes.none) {
                                field_element_count = System.Linq.Enumerable.from(p.Type.ArrayLength, System.Int32).aggregate(1, function (x, y) {
                                        return Bridge.Int.mul(x, y);
                                    });
                            }

                            if (RobotRaconteurWeb.DataTypeUtil.IsNumber(p.Type.Type)) {
                                if (element_type === RobotRaconteurWeb.DataTypes.void_t) {
                                    element_type = p.Type.Type;
                                } else {
                                    if (element_type !== p.Type.Type) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("namedarray must contain same numeric type: " + (def.Name || ""));
                                    }
                                }

                                element_count = (element_count + field_element_count) | 0;
                            } else if (p.Type.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                                var nt_def = p.Type.ResolveNamedType();
                                var et_def = Bridge.as(nt_def, RobotRaconteurWeb.ServiceEntryDefinition);
                                if (et_def == null) {
                                    throw new RobotRaconteurWeb.InternalErrorException("");
                                }
                                if (et_def.EntryType !== RobotRaconteurWeb.DataTypes.namedarray_t) {
                                    throw new RobotRaconteurWeb.InternalErrorException("");
                                }

                                if (n.contains(et_def.Name)) {
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Recursive namedarray detected in " + (def.Name || ""));
                                }

                                var n2 = new (System.Collections.Generic.HashSet$1(System.String)).$ctor1(n);
                                var v = RobotRaconteurWeb.ServiceDefinitionUtil.GetNamedArrayElementTypeAndCount(et_def, other_defs, node, client, n2);
                                if (element_type === RobotRaconteurWeb.DataTypes.void_t) {
                                    element_type = v.Item1;
                                } else {
                                    if (element_type !== v.Item1) {
                                        throw new RobotRaconteurWeb.ServiceDefinitionException("namedarray must contain same numeric type: " + (def.Name || ""));
                                    }
                                }

                                element_count = (element_count + (Bridge.Int.mul(field_element_count, v.Item2))) | 0;

                            } else {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid namedarray field in " + (def.Name || ""));
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return { Item1: element_type, Item2: element_count };

                },
                FindParentInterface: function (objtype) {
                    var interfaces = new (System.Collections.Generic.List$1(System.Type)).$ctor1(Bridge.Reflection.getInterfaces(objtype));
                    interfaces.RemoveAll(function (x) {
                        return (Bridge.Reflection.getAttributes(x, RobotRaconteurWeb.RobotRaconteurServiceObjectInterface, true).length === 0);
                    });

                    if (interfaces.Count === 0) {
                        throw new RobotRaconteurWeb.DataTypeException("Object not a Robot Raconteur type");
                    }
                    if (interfaces.Count === 1) {
                        return interfaces.getItem(0);
                    }

                    var parentinterfaces = new (System.Collections.Generic.List$1(System.Type)).ctor();

                    for (var i = 0; i < interfaces.Count; i = (i + 1) | 0) {
                        var parent = true;
                        for (var j = 0; j < interfaces.Count; j = (j + 1) | 0) {
                            if (i !== j) {
                                if (System.Linq.Enumerable.from(Bridge.Reflection.getInterfaces(interfaces.getItem(j)), System.Type).count(function (x) {
                                        return Bridge.referenceEquals(x, interfaces.getItem(i));
                                    }) !== 0) {
                                    parent = false;
                                }
                            }
                        }

                        if (parent) {
                            parentinterfaces.add(interfaces.getItem(i));
                        }

                    }

                    if (parentinterfaces.Count !== 1) {
                        throw new RobotRaconteurWeb.DataTypeException("Robot Raconteur types can only directly inheret one Robot Raconteur interface type");
                    }

                    return parentinterfaces.getItem(0);

                },
                FindObjectRRType: function (obj) {
                    var $t;
                    var i = RobotRaconteurWeb.ServiceDefinitionUtil.FindParentInterface(Bridge.getType(obj));
                    return Bridge.cast(($t = Bridge.Reflection.getAttributes(i, RobotRaconteurWeb.RobotRaconteurServiceObjectInterface, false))[System.Array.index(0, $t)], RobotRaconteurWeb.RobotRaconteurServiceObjectInterface).RRType;
                },
                FindStructRRType: function (s) {
                    if (Bridge.isArray(null, s)) {
                        s = (s.$elementType || null);
                    }

                    var t1 = Bridge.Reflection.getAttributes(s, RobotRaconteurWeb.RobotRaconteurServiceStruct, true);
                    if (t1.length > 0) {
                        return Bridge.cast(t1[System.Array.index(0, t1)], RobotRaconteurWeb.RobotRaconteurServiceStruct).RRType;
                    }

                    var t2 = Bridge.Reflection.getAttributes(s, RobotRaconteurWeb.RobotRaconteurNamedArrayElementTypeAndCount, true);
                    if (t2.length > 0) {
                        return Bridge.cast(t2[System.Array.index(0, t2)], RobotRaconteurWeb.RobotRaconteurNamedArrayElementTypeAndCount).RRType;
                    }

                    var t3 = Bridge.Reflection.getAttributes(s, RobotRaconteurWeb.RobotRaconteurServicePod, true);
                    if (t3.length > 0) {
                        return Bridge.cast(t3[System.Array.index(0, t3)], RobotRaconteurWeb.RobotRaconteurServicePod).RRType;
                    }

                    throw new System.ArgumentException.$ctor1("Invalid Robot Raconteur structure");
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceDefinitionUtil.rrimplements", {
        $kind: "nested class",
        fields: {
            name: null,
            obj: null,
            implements: null
        },
        ctors: {
            init: function () {
                this.implements = new (System.Collections.Generic.List$1(RobotRaconteurWeb.ServiceDefinitionUtil.rrimplements)).ctor();
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceDefinitionUtil.rrimports", {
        $kind: "nested class",
        fields: {
            def: null,
            imported: null
        },
        ctors: {
            init: function () {
                this.imported = new (System.Collections.Generic.List$1(RobotRaconteurWeb.ServiceDefinitionUtil.rrimports)).ctor();
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceInfo2", {
        fields: {
            Name: null,
            RootObjectType: null,
            RootObjectImplements: null,
            ConnectionURL: null,
            Attributes: null,
            NodeID: null,
            NodeName: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (info, ninfo) {
                var $t, $t1;
                this.$initialize();
                this.Name = info.Name;
                this.RootObjectType = info.RootObjectType;
                this.RootObjectImplements = ($t = System.String, System.Linq.Enumerable.from(info.RootObjectImplements.Values, $t).ToArray($t));
                this.ConnectionURL = ($t1 = System.String, System.Linq.Enumerable.from(info.ConnectionURL.Values, $t1).ToArray($t1));
                this.Attributes = info.Attributes;
                this.NodeID = new RobotRaconteurWeb.NodeID.ctor(ninfo.NodeID);
                this.NodeName = ninfo.NodeName;

            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceSecurityPolicy", {
        fields: {
            Authenticator: null,
            Policies: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.Authenticator = null;
                this.Policies = null;
            },
            $ctor1: function (Authenticator, Policies) {
                this.$initialize();
                this.Authenticator = Authenticator;
                this.Policies = Policies;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceSkelDynamic", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.TimerEvent", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new RobotRaconteurWeb.TimerEvent(); }
            }
        },
        fields: {
            stopped: false,
            last_expected: null,
            last_real: null,
            current_expected: null,
            current_real: null
        },
        ctors: {
            init: function () {
                this.last_expected = System.DateTime.getDefaultValue();
                this.last_real = System.DateTime.getDefaultValue();
                this.current_expected = System.DateTime.getDefaultValue();
                this.current_real = System.DateTime.getDefaultValue();
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([3403948852, this.stopped, this.last_expected, this.last_real, this.current_expected, this.current_real]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, RobotRaconteurWeb.TimerEvent)) {
                    return false;
                }
                return Bridge.equals(this.stopped, o.stopped) && Bridge.equals(this.last_expected, o.last_expected) && Bridge.equals(this.last_real, o.last_real) && Bridge.equals(this.current_expected, o.current_expected) && Bridge.equals(this.current_real, o.current_real);
            },
            $clone: function (to) {
                var s = to || new RobotRaconteurWeb.TimerEvent();
                s.stopped = this.stopped;
                s.last_expected = this.last_expected;
                s.last_real = this.last_real;
                s.current_expected = this.current_expected;
                s.current_real = this.current_real;
                return s;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.TimeSpec", {
        statics: {
            fields: {
                start_ticks: System.Int64(0),
                ticks_per_second: System.Int64(0),
                start_seconds: System.Int64(0),
                start_nanoseconds: 0,
                start_time: null,
                started: false,
                iswindows: false,
                start_lock: null
            },
            props: {
                Now: {
                    get: function () {
                        var t = new RobotRaconteurWeb.TimeSpec.ctor();
                        t.timespec_now();
                        return t;
                    }
                }
            },
            ctors: {
                init: function () {
                    this.start_time = System.DateTime.getDefaultValue();
                    this.started = false;
                    this.iswindows = false;
                    this.start_lock = { };
                }
            },
            methods: {
                QueryPerformanceCounter: function (lpPerformanceCount) {
                    lpPerformanceCount.v = System.Diagnostics.Stopwatch.getTimestamp();
                    return true;
                },
                QueryPerformanceFrequency: function (lpFrequency) {
                    lpFrequency.v = System.Diagnostics.Stopwatch.frequency;
                    return true;
                },
                op_Equality: function (t1, t2) {
                    if (t1 == null && t2 == null) {
                        return true;
                    }
                    if (t1 == null || t2 == null) {
                        return false;
                    }

                    return (t1.seconds.equals(t2.seconds) && t1.nanoseconds === t2.nanoseconds);
                },
                op_Inequality: function (t1, t2) {
                    return !(RobotRaconteurWeb.TimeSpec.op_Equality(t1, t2));
                },
                op_Subtraction: function (t1, t2) {
                    return new RobotRaconteurWeb.TimeSpec.$ctor1(t1.seconds.sub(t2.seconds), ((t1.nanoseconds - t2.nanoseconds) | 0));
                },
                op_Addition: function (t1, t2) {
                    return new RobotRaconteurWeb.TimeSpec.$ctor1(t1.seconds.add(t2.seconds), ((t1.nanoseconds + t2.nanoseconds) | 0));
                },
                op_GreaterThan: function (t1, t2) {
                    var diff = RobotRaconteurWeb.TimeSpec.op_Subtraction(t1, t2);
                    if (diff.seconds.equals(System.Int64(0))) {
                        return diff.nanoseconds > 0;
                    }
                    return diff.seconds.gt(System.Int64(0));
                },
                op_GreaterThanOrEqual: function (t1, t2) {
                    if (RobotRaconteurWeb.TimeSpec.op_Equality(t1, t2)) {
                        return true;
                    }
                    return RobotRaconteurWeb.TimeSpec.op_GreaterThan(t1, t2);
                },
                op_LessThan: function (t1, t2) {
                    return RobotRaconteurWeb.TimeSpec.op_GreaterThanOrEqual(t2, t1);
                },
                op_LessThanOrEqual: function (t1, t2) {
                    return RobotRaconteurWeb.TimeSpec.op_GreaterThan(t2, t1);
                }
            }
        },
        fields: {
            seconds: System.Int64(0),
            nanoseconds: 0
        },
        ctors: {
            $ctor1: function (seconds, nanoseconds) {
                this.$initialize();
                this.seconds = seconds;
                this.nanoseconds = nanoseconds;

                RobotRaconteurWeb.TimeSpec.start_lock;
                {
                    if (!RobotRaconteurWeb.TimeSpec.started) {
                        this.start();
                    }
                }

                this.cleanup_nanosecs();
            },
            ctor: function () {
                this.$initialize();
                if (!RobotRaconteurWeb.TimeSpec.started) {
                    this.start();
                }
                this.seconds = System.Int64(0);
                this.nanoseconds = 0;
            }
        },
        methods: {
            timespec_now: function () {
                this.seconds = System.Int64(0);
                this.nanoseconds = 0;

                RobotRaconteurWeb.TimeSpec.start_lock;
                {
                    if (!RobotRaconteurWeb.TimeSpec.started) {
                        this.start();
                        this.seconds = RobotRaconteurWeb.TimeSpec.start_seconds;
                        this.nanoseconds = RobotRaconteurWeb.TimeSpec.start_nanoseconds;
                    } else {
                        if (RobotRaconteurWeb.TimeSpec.iswindows) {
                            var ticks = { };
                            RobotRaconteurWeb.TimeSpec.QueryPerformanceCounter(ticks);

                            var diff_ticks = ticks.v.sub(RobotRaconteurWeb.TimeSpec.start_ticks);
                            var diff_secs = diff_ticks.div(RobotRaconteurWeb.TimeSpec.ticks_per_second);

                            var diff_nanosecs = ((diff_ticks.mul(System.Int64(1000000000))).div(RobotRaconteurWeb.TimeSpec.ticks_per_second)).mod(System.Int64(1000000000));



                            this.seconds = diff_secs.add(RobotRaconteurWeb.TimeSpec.start_seconds);
                            this.nanoseconds = (System.Int64.clip32(diff_nanosecs) + RobotRaconteurWeb.TimeSpec.start_nanoseconds) | 0;
                        } else {
                            var t = System.DateTime.subdd(System.DateTime.toUniversalTime(System.DateTime.getUtcNow()), (System.DateTime.create(1970, 1, 1, 0, 0, 0, 0, 1)));
                            this.seconds = Bridge.Int.clip64(Bridge.Math.round(t.getTotalSeconds(), 0, 6));
                            this.nanoseconds = Bridge.Int.clip32(Bridge.Math.IEEERemainder(t.getTotalMilliseconds() * 1000000.0, 1000000000.0));


                        }

                    }
                }

                this.cleanup_nanosecs();


            },
            start: function () {
                if (!RobotRaconteurWeb.TimeSpec.started) {


                    RobotRaconteurWeb.TimeSpec.start_time = System.DateTime.toUniversalTime(System.DateTime.getUtcNow());
                    var t = System.DateTime.subdd(RobotRaconteurWeb.TimeSpec.start_time, (System.DateTime.create(1970, 1, 1, 0, 0, 0, 0, 1)));
                    RobotRaconteurWeb.TimeSpec.start_seconds = Bridge.Int.clip64(Bridge.Math.round(t.getTotalSeconds(), 0, 6));
                    RobotRaconteurWeb.TimeSpec.start_nanoseconds = Bridge.Int.clip32(Bridge.Math.IEEERemainder(t.getTotalMilliseconds() * 1000000.0, 1000000000.0));

                    RobotRaconteurWeb.TimeSpec.started = true;
                }

            },
            cleanup_nanosecs: function () {
                var nanoseconds1 = this.nanoseconds;

                var nano_div = (Bridge.Int.div(this.nanoseconds, 1000000000)) | 0;
                this.nanoseconds = this.nanoseconds % 1000000000;
                this.seconds = this.seconds.add(System.Int64(nano_div));



                if (this.seconds.gt(System.Int64(0)) && this.nanoseconds < 0) {
                    this.seconds = this.seconds.sub(System.Int64(1));
                    this.nanoseconds = (1000000000 + this.nanoseconds) | 0;
                }

                if (this.seconds.lt(System.Int64(0)) && this.nanoseconds > 0) {
                    this.seconds = this.seconds.add(System.Int64(1));
                    this.nanoseconds = (this.nanoseconds - 1000000000) | 0;
                }



            },
            equals: function (obj) {
                if (obj == null) {
                    return false;
                }
                if (!(Bridge.is(obj, RobotRaconteurWeb.TimeSpec))) {
                    return false;
                }
                return RobotRaconteurWeb.TimeSpec.op_Equality(this, Bridge.cast(obj, RobotRaconteurWeb.TimeSpec));
            },
            getHashCode: function () {
                return ((this.nanoseconds + System.Int64.clip32(this.seconds)) | 0);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.TransportListenerEventType", {
        $kind: "enum",
        statics: {
            fields: {
                TransportClosed: 1,
                TransportConnectionClosed: 2
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.TransportUtil", {
        statics: {
            methods: {
                ParseConnectionUrl: function (url) {
                    var $t;
                    var rr1 = new System.Text.RegularExpressions.Regex.ctor("^([^:\\s]+)://((?:\\[[A-Fa-f0-9\\:]+(?:\\%\\w*)?\\])|(?:[^\\[\\]\\:/\\?\\s]+))(?::([^:/\\?\\s]+))?(?:/([^\\?\\s]*))?\\??([^\\s]*)$");
                    var u1 = rr1.match(url);

                    if (!u1.getSuccess()) {
                        throw new RobotRaconteurWeb.ConnectionException("Invalid connection URL");
                    }

                    if (!u1.getGroups().get(1).getSuccess()) {
                        throw new RobotRaconteurWeb.ConnectionException("Invalid connection URL");
                    }

                    var o = new RobotRaconteurWeb.ParseConnectionUrlResult();

                    o.scheme = u1.getGroups().get(1).getValue();
                    o.host = u1.getGroups().get(2).getValue();
                    if (u1.getGroups().get(3).getSuccess() && !Bridge.referenceEquals(u1.getGroups().get(3).getValue(), "")) {
                        o.port = System.Int32.parse(u1.getGroups().get(3).getValue());
                    } else {
                        o.port = -1;
                    }

                    if (Bridge.referenceEquals(o.scheme, "tcp")) {
                        if (u1.getGroups().get(5).getSuccess() && !Bridge.referenceEquals(u1.getGroups().get(5).getValue(), "")) {
                            throw new RobotRaconteurWeb.ConnectionException("Invalid connection URL");
                        }

                        if (!(u1.getGroups().get(4).getSuccess() && !Bridge.referenceEquals(u1.getGroups().get(4).getValue(), ""))) {
                            throw new RobotRaconteurWeb.ConnectionException("Invalid connection URL");
                        }

                        var ap = System.String.split(u1.getGroups().get(4).getValue(), System.Array.init([47], System.Char).map(function (i) {{ return String.fromCharCode(i); }}), null, 1);
                        if (ap.length !== 2) {
                            throw new RobotRaconteurWeb.ConnectionException("Invalid connection URL");
                        }
                        var noden = ap[System.Array.index(0, ap)];
                        if (System.String.contains(noden,"{") || System.String.contains(noden,"[")) {
                            o.nodeid = new RobotRaconteurWeb.NodeID.$ctor1(noden);
                            o.nodename = "";
                        } else {
                            o.nodename = noden;
                            o.nodeid = RobotRaconteurWeb.NodeID.Any;
                        }

                        o.service = ap[System.Array.index(1, ap)];
                        o.path = "/";

                        return o;
                    }

                    if (o.port === -1) {
                        if (Bridge.referenceEquals(o.scheme, "rr+tcp") || Bridge.referenceEquals(o.scheme, "rrs+tcp")) {
                            o.port = 48653;
                        }
                        if (Bridge.referenceEquals(o.scheme, "rr+ws") || Bridge.referenceEquals(o.scheme, "rrs+ws")) {
                            o.port = 80;
                        }
                        if (Bridge.referenceEquals(o.scheme, "rr+wss") || Bridge.referenceEquals(o.scheme, "rrs+wss")) {
                            o.port = 443;
                        }
                    }

                    o.path = u1.getGroups().get(4).getValue();

                    if (o.path == null || Bridge.referenceEquals(o.path, "")) {
                        o.path = "/";
                    }

                    var query_params = new (System.Collections.Generic.Dictionary$2(System.String,System.String)).ctor();

                    if (!(u1.getGroups().get(5).getSuccess() && !Bridge.referenceEquals(u1.getGroups().get(5).getValue(), ""))) {
                        throw new RobotRaconteurWeb.ConnectionException("Invalid connection URL");
                    }

                    var q2 = new (System.Collections.Generic.List$1(System.String)).ctor();
                    $t = Bridge.getEnumerator(System.String.split(System.String.trimStart(u1.getGroups().get(5).getValue(), System.Array.init([63], System.Char)), System.Array.init([38], System.Char).map(function (i) {{ return String.fromCharCode(i); }}), null, 1));
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            var q3 = System.String.split(e, System.Array.init([61], System.Char).map(function (i) {{ return String.fromCharCode(i); }}));
                            if (q3.length !== 2) {
                                throw new RobotRaconteurWeb.ConnectionException("Invalid Connection URL");
                            }
                            if (q3[System.Array.index(0, q3)].length === 0 || q3[System.Array.index(1, q3)].length === 0) {
                                throw new RobotRaconteurWeb.ConnectionException("Invalid Connection URL");
                            }
                            query_params.add(q3[System.Array.index(0, q3)], RobotRaconteurWeb.Extensions.RRUriExtensions.UnescapeDataString(q3[System.Array.index(1, q3)]));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    if (!query_params.containsKey("service")) {
                        throw new RobotRaconteurWeb.ConnectionException("Invalid Connection URL");
                    }

                    o.service = query_params.getItem("service");
                    if (System.String.isNullOrWhiteSpace(o.service)) {
                        throw new RobotRaconteurWeb.ConnectionException("Invalid Connection URL");
                    }

                    if (query_params.containsKey("nodeid")) {
                        o.nodeid = new RobotRaconteurWeb.NodeID.$ctor1(query_params.getItem("nodeid"));
                    } else {
                        o.nodeid = RobotRaconteurWeb.NodeID.Any;
                    }

                    if (query_params.containsKey("nodename")) {
                        o.nodename = query_params.getItem("nodename");
                        var rr = new System.Text.RegularExpressions.Regex.ctor("^[a-zA-Z][a-zA-Z0-9_\\.\\-]*$");

                        if (!rr.match(o.nodename).getSuccess()) {
                            throw new RobotRaconteurWeb.ConnectionException("\"" + (o.nodename || "") + "\" is an invalid NodeName");
                        }
                    } else {
                        o.nodename = "";
                    }

                    return o;
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.TypeDefinition", {
        statics: {
            methods: {
                DataTypeFromString: function (d) {
                    if (Bridge.referenceEquals(d, "void")) {
                        return RobotRaconteurWeb.DataTypes.void_t;
                    } else if (Bridge.referenceEquals(d, "double")) {
                        return RobotRaconteurWeb.DataTypes.double_t;
                    } else if (Bridge.referenceEquals(d, "single")) {
                        return RobotRaconteurWeb.DataTypes.single_t;
                    } else if (Bridge.referenceEquals(d, "int8")) {
                        return RobotRaconteurWeb.DataTypes.int8_t;
                    } else if (Bridge.referenceEquals(d, "uint8")) {
                        return RobotRaconteurWeb.DataTypes.uint8_t;
                    } else if (Bridge.referenceEquals(d, "int16")) {
                        return RobotRaconteurWeb.DataTypes.int16_t;
                    } else if (Bridge.referenceEquals(d, "uint16")) {
                        return RobotRaconteurWeb.DataTypes.uint16_t;
                    } else if (Bridge.referenceEquals(d, "int32")) {
                        return RobotRaconteurWeb.DataTypes.int32_t;
                    } else if (Bridge.referenceEquals(d, "uint32")) {
                        return RobotRaconteurWeb.DataTypes.uint32_t;
                    } else if (Bridge.referenceEquals(d, "int64")) {
                        return RobotRaconteurWeb.DataTypes.int64_t;
                    } else if (Bridge.referenceEquals(d, "uint64")) {
                        return RobotRaconteurWeb.DataTypes.uint64_t;
                    } else if (Bridge.referenceEquals(d, "string")) {
                        return RobotRaconteurWeb.DataTypes.string_t;
                    } else if (Bridge.referenceEquals(d, "cdouble")) {
                        return RobotRaconteurWeb.DataTypes.cdouble_t;
                    } else if (Bridge.referenceEquals(d, "csingle")) {
                        return RobotRaconteurWeb.DataTypes.csingle_t;
                    } else if (Bridge.referenceEquals(d, "bool")) {
                        return RobotRaconteurWeb.DataTypes.bool_t;
                    } else if (Bridge.referenceEquals(d, "structure")) {
                        return RobotRaconteurWeb.DataTypes.structure_t;
                    } else if (Bridge.referenceEquals(d, "object")) {
                        return RobotRaconteurWeb.DataTypes.object_t;
                    } else if (Bridge.referenceEquals(d, "varvalue")) {
                        return RobotRaconteurWeb.DataTypes.varvalue_t;
                    } else if (Bridge.referenceEquals(d, "varobject")) {
                        return RobotRaconteurWeb.DataTypes.varobject_t;

                    }

                    return RobotRaconteurWeb.DataTypes.namedtype_t;
                },
                StringFromDataType: function (d) {
                    switch (d) {
                        case RobotRaconteurWeb.DataTypes.void_t: 
                            return "void";
                        case RobotRaconteurWeb.DataTypes.double_t: 
                            return "double";
                        case RobotRaconteurWeb.DataTypes.single_t: 
                            return "single";
                        case RobotRaconteurWeb.DataTypes.int8_t: 
                            return "int8";
                        case RobotRaconteurWeb.DataTypes.uint8_t: 
                            return "uint8";
                        case RobotRaconteurWeb.DataTypes.int16_t: 
                            return "int16";
                        case RobotRaconteurWeb.DataTypes.uint16_t: 
                            return "uint16";
                        case RobotRaconteurWeb.DataTypes.int32_t: 
                            return "int32";
                        case RobotRaconteurWeb.DataTypes.uint32_t: 
                            return "uint32";
                        case RobotRaconteurWeb.DataTypes.int64_t: 
                            return "int64";
                        case RobotRaconteurWeb.DataTypes.uint64_t: 
                            return "uint64";
                        case RobotRaconteurWeb.DataTypes.string_t: 
                            return "string";
                        case RobotRaconteurWeb.DataTypes.cdouble_t: 
                            return "cdouble";
                        case RobotRaconteurWeb.DataTypes.csingle_t: 
                            return "csingle";
                        case RobotRaconteurWeb.DataTypes.bool_t: 
                            return "bool";
                        case RobotRaconteurWeb.DataTypes.structure_t: 
                            return "structure";
                        case RobotRaconteurWeb.DataTypes.object_t: 
                            return "object";
                        case RobotRaconteurWeb.DataTypes.varvalue_t: 
                            return "varvalue";
                        case RobotRaconteurWeb.DataTypes.varobject_t: 
                            return "varobject";
                        default: 
                            throw new RobotRaconteurWeb.DataTypeException("Invalid data type");
                    }

                },
                TypeDefinition_GetServiceUsingDefinition: function (def) {
                    var member1 = def.member;
                    if (member1 == null) {
                        throw new System.InvalidOperationException.$ctor1("Member not set for TypeDefinition");
                    }
                    var entry1 = member1.ServiceEntry;
                    if (entry1 == null) {
                        throw new System.InvalidOperationException.$ctor1("Object or struct not set for MemberDefinition " + (member1.Name || ""));
                    }
                    var service1 = entry1.ServiceDefinition;
                    if (service1 == null) {
                        throw new System.InvalidOperationException.$ctor1("ServiceDefinition or struct not set for Object or Structure " + (entry1.Name || ""));
                    }
                    return service1.Using;
                },
                op_Equality: function (a, b) {
                    if (Bridge.referenceEquals(a, b)) {
                        return true;
                    }

                    if ((a == null) || (b == null)) {
                        return false;
                    }

                    if (!Bridge.referenceEquals(a.Name, b.Name)) {
                        return false;
                    }
                    if (!Bridge.referenceEquals(a.TypeString, b.TypeString)) {
                        return false;
                    }
                    if (a.ArrayType !== b.ArrayType) {
                        return false;
                    }
                    if (a.ArrayVarLength !== b.ArrayVarLength) {
                        return false;
                    }
                    if (!Bridge.referenceEquals(a.ArrayLength, b.ArrayLength)) {
                        return false;
                    }
                    if (a.ContainerType !== b.ContainerType) {
                        return false;
                    }
                    return true;
                },
                op_Inequality: function (a, b) {
                    return !(RobotRaconteurWeb.TypeDefinition.op_Equality(a, b));
                }
            }
        },
        fields: {
            Name: null,
            Type: 0,
            TypeString: null,
            ArrayType: 0,
            ArrayVarLength: false,
            ArrayLength: null,
            ContainerType: 0,
            member: null,
            ResolveNamedType_cache: null
        },
        ctors: {
            init: function () {
                this.ArrayLength = new (System.Collections.Generic.List$1(System.Int32)).ctor();
            },
            ctor: function () {
                this.$initialize();

            },
            $ctor1: function (member) {
                this.$initialize();
                this.member = member;
            }
        },
        methods: {
            toString: function () {
                var $t;

                var o = new System.IO.StringWriter.ctor();
                o.Write$10((this.Type >= RobotRaconteurWeb.DataTypes.namedtype_t && (!(this.Type === RobotRaconteurWeb.DataTypes.varvalue_t) && !(this.Type === RobotRaconteurWeb.DataTypes.varobject_t))) ? this.TypeString : RobotRaconteurWeb.TypeDefinition.StringFromDataType(this.Type));

                switch (this.ArrayType) {
                    case RobotRaconteurWeb.DataTypes_ArrayTypes.none: 
                        break;
                    case RobotRaconteurWeb.DataTypes_ArrayTypes.array: 
                        {
                            o.Write$10("[" + ((this.ArrayLength.getItem(0) !== 0 ? Bridge.toString(((this.ArrayLength.getItem(0)) + ((this.ArrayVarLength ? "-" : "") || ""))) : "") || "") + "]");
                            break;
                        }
                    case RobotRaconteurWeb.DataTypes_ArrayTypes.multidimarray: 
                        {
                            if (this.ArrayVarLength) {
                                o.Write$10("[*]");
                            } else {
                                if (this.ArrayLength.Count === 1) {
                                    o.Write$11("[{0}]", Bridge.box(this.ArrayLength.getItem(0), System.Int32));
                                } else {
                                    var s3 = new (System.Collections.Generic.List$1(System.String)).ctor();
                                    $t = Bridge.getEnumerator(this.ArrayLength);
                                    try {
                                        while ($t.moveNext()) {
                                            var e = $t.Current;
                                            s3.add(Bridge.toString(e));
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$Dispose();
                                        }
                                    }
                                    o.Write$10("[" + (Bridge.toArray(s3).join(",") || "") + "]");
                                }

                            }
                            break;
                        }
                    default: 
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid type definition \"" + (this.Name || "") + "\"");
                }

                switch (this.ContainerType) {
                    case RobotRaconteurWeb.DataTypes_ContainerTypes.none: 
                        break;
                    case RobotRaconteurWeb.DataTypes_ContainerTypes.list: 
                        o.Write$10("{list}");
                        break;
                    case RobotRaconteurWeb.DataTypes_ContainerTypes.map_int32: 
                        o.Write$10("{int32}");
                        break;
                    case RobotRaconteurWeb.DataTypes_ContainerTypes.map_string: 
                        o.Write$10("{string}");
                        break;
                    case RobotRaconteurWeb.DataTypes_ContainerTypes.generator: 
                        o.Write$10("{generator}");
                        break;
                    default: 
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid type definition \"" + (this.Name || "") + "\"");
                }

                o.Write$10(" " + (this.Name || ""));
                return o.toString().trim();
            },
            FromString: function (s) {
                var $t;
                this.Reset();

                var r = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*([a-zA-Z][\\w\\.]*)(?:(\\[\\])|\\[(([0-9]+)|([0-9]+)\\-|(\\*)|([0-9]+)\\,|([0-9\\,]+))\\])?(?:\\{(\\w{1,16})\\})?(?:[ \\t]+(\\w+))?[ \\t]*$");
                var r_result = r.match(s);
                if (!r_result.getSuccess()) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Could not parse type \"" + (s.trim() || "") + "\"");
                }

                var type_result = r_result.getGroups().get(1);
                var array_result = r_result.getGroups().get(2);
                var array_result2 = r_result.getGroups().get(3);
                var array_var_result = r_result.getGroups().get(4);
                var array_max_var_result = r_result.getGroups().get(5);
                var array_multi_result = r_result.getGroups().get(6);
                var array_multi_single_fixed_result = r_result.getGroups().get(7);
                var array_multi_fixed_result = r_result.getGroups().get(8);
                var container_result = r_result.getGroups().get(9);
                var name_result = r_result.getGroups().get(10);

                this.Name = name_result.getSuccess() ? name_result.getValue() : "";

                if (container_result.getSuccess()) {
                    if (Bridge.referenceEquals(container_result.getValue(), "list")) {
                        this.ContainerType = RobotRaconteurWeb.DataTypes_ContainerTypes.list;
                    } else if (Bridge.referenceEquals(container_result.getValue(), "int32")) {
                        this.ContainerType = RobotRaconteurWeb.DataTypes_ContainerTypes.map_int32;
                    } else if (Bridge.referenceEquals(container_result.getValue(), "string")) {
                        this.ContainerType = RobotRaconteurWeb.DataTypes_ContainerTypes.map_string;
                    } else if (Bridge.referenceEquals(container_result.getValue(), "generator")) {
                        this.ContainerType = RobotRaconteurWeb.DataTypes_ContainerTypes.generator;
                    } else {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Could not parse type \"" + (s.trim() || "") + "\": invalid container type");
                    }
                }

                if (array_result.getSuccess()) {
                    this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.array;
                    this.ArrayVarLength = true;
                    this.ArrayLength = function (_o1) {
                            _o1.add(0);
                            return _o1;
                        }(new (System.Collections.Generic.List$1(System.Int32)).ctor());
                }
                if (array_result2.getSuccess()) {
                    if (array_var_result.getSuccess()) {
                        this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.array;
                        this.ArrayLength.clear();
                        this.ArrayLength.add(((System.UInt32.parse(array_var_result.getValue())) | 0));
                        this.ArrayVarLength = false;
                    } else if (array_max_var_result.getSuccess()) {
                        this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.array;
                        this.ArrayLength.clear();
                        this.ArrayLength.add(((System.UInt32.parse(array_max_var_result.getValue())) | 0));
                        this.ArrayVarLength = true;
                    } else if (array_multi_result.getSuccess()) {
                        this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.multidimarray;
                        this.ArrayVarLength = true;
                    } else if (array_multi_single_fixed_result.getSuccess()) {
                        this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.multidimarray;
                        this.ArrayVarLength = false;
                        this.ArrayLength.clear();
                        this.ArrayLength.add(((System.UInt32.parse(array_multi_single_fixed_result.getValue())) | 0));
                    } else if (array_multi_fixed_result.getSuccess()) {
                        this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.multidimarray;
                        this.ArrayVarLength = false;
                        var dims = System.String.split(array_multi_fixed_result.getValue(), System.Array.init([44], System.Char).map(function (i) {{ return String.fromCharCode(i); }}));
                        this.ArrayLength.clear();
                        $t = Bridge.getEnumerator(dims);
                        try {
                            while ($t.moveNext()) {
                                var d = $t.Current;
                                this.ArrayLength.add(((System.UInt32.parse(d)) | 0));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$Dispose();
                            }
                        }
                    } else {
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Could not parse type \"" + (s.trim() || "") + "\": array error");
                    }
                }

                var t = RobotRaconteurWeb.TypeDefinition.DataTypeFromString(type_result.getValue());
                if (t === RobotRaconteurWeb.DataTypes.namedtype_t) {
                    this.Type = RobotRaconteurWeb.DataTypes.namedtype_t;
                    this.TypeString = type_result.getValue();
                } else {
                    this.Type = t;
                    this.TypeString = "";
                }
            },
            equals: function (o) {
                if (o == null) {
                    return false;
                }
                return RobotRaconteurWeb.TypeDefinition.op_Equality(this, Bridge.cast(o, RobotRaconteurWeb.TypeDefinition));
            },
            Reset: function () {
                this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.none;
                this.ContainerType = RobotRaconteurWeb.DataTypes_ContainerTypes.none;

                this.ArrayVarLength = false;
                this.Type = RobotRaconteurWeb.DataTypes.void_t;
                this.ArrayLength.clear();
                this.TypeString = null;
            },
            CopyTo: function (def) {
                var $t;
                def.v.Name = this.Name;
                def.v.Type = this.Type;
                def.v.TypeString = this.TypeString;
                def.v.ArrayType = this.ArrayType;
                def.v.ContainerType = this.ContainerType;
                def.v.ArrayLength = ($t = System.Int32, System.Linq.Enumerable.from(this.ArrayLength, $t).toList($t));
                def.v.ArrayVarLength = this.ArrayVarLength;
                def.v.member = this.member;
                def.v.ResolveNamedType_cache = this.ResolveNamedType_cache;
            },
            Clone: function () {
                var def2 = { v : new RobotRaconteurWeb.TypeDefinition.ctor() };
                this.CopyTo(def2);
                return def2.v;
            },
            Rename: function (name) {
                this.Name = name;
            },
            RemoveContainers: function () {
                this.ContainerType = RobotRaconteurWeb.DataTypes_ContainerTypes.none;
            },
            RemoveArray: function () {
                if (this.ContainerType !== RobotRaconteurWeb.DataTypes_ContainerTypes.none) {
                    throw new System.InvalidOperationException.$ctor1("Remove containers first");
                }

                this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.none;
                this.ArrayLength.clear();
                this.ArrayVarLength = false;
            },
            QualifyTypeStringWithUsing: function () {
                var $t;
                if (this.Type !== RobotRaconteurWeb.DataTypes.namedtype_t) {
                    return;
                }

                if (System.String.contains(this.TypeString,".")) {
                    return;
                }

                var using_ = RobotRaconteurWeb.TypeDefinition.TypeDefinition_GetServiceUsingDefinition(this);
                $t = Bridge.getEnumerator(using_);
                try {
                    while ($t.moveNext()) {
                        var u = $t.Current;
                        if (Bridge.referenceEquals(u.UnqualifiedName, this.TypeString)) {
                            this.TypeString = u.QualifiedName;
                            return;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
            },
            UnqualifyTypeStringWithUsing: function () {
                var $t;
                if (this.Type !== RobotRaconteurWeb.DataTypes.namedtype_t) {
                    return;
                }

                if (!System.String.contains(this.TypeString,".")) {
                    return;
                }

                var using_ = RobotRaconteurWeb.TypeDefinition.TypeDefinition_GetServiceUsingDefinition(this);
                $t = Bridge.getEnumerator(using_);
                try {
                    while ($t.moveNext()) {
                        var u = $t.Current;
                        if (Bridge.referenceEquals(u.QualifiedName, this.TypeString)) {
                            this.TypeString = u.UnqualifiedName;
                            return;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
            },
            ResolveNamedType: function (imported_defs, node, client) {
                if (imported_defs === void 0) { imported_defs = null; }
                if (node === void 0) { node = null; }
                if (client === void 0) { client = null; }
                var o = this.ResolveNamedType_cache;
                if (o != null) {
                    return o;
                }

                var def = { v : null };

                var entry_name;

                if (!System.String.contains(this.TypeString,".")) {
                    entry_name = this.TypeString;
                    var m = this.member;
                    if (m != null) {
                        var entry = m.ServiceEntry;
                        if (entry != null) {
                            def.v = entry.ServiceDefinition;
                        }
                    }
                } else {
                    var s = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(this.TypeString);
                    var def_name = s.Item1;
                    entry_name = s.Item2;

                    if (imported_defs != null) {
                        imported_defs.tryGetValue(def_name, def);
                    }
                    if (def.v == null) {
                        if (node == null) {
                            throw new System.ArgumentException.$ctor1("Node not specified for ResolveType");
                        }
                        try {
                            if (client != null) {
                                var client2 = Bridge.cast(client, RobotRaconteurWeb.ServiceStub).RRContext;
                                def.v = client2.GetPulledServiceType(def_name).ServiceDef();
                            }

                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                    }
                }

                if (def.v == null) {
                    throw new RobotRaconteurWeb.ServiceDefinitionException("Could not resolve named type " + (this.TypeString || ""));
                }

                var found_struct = { };
                if (def.v.Structures.tryGetValue(entry_name, found_struct)) {
                    this.ResolveNamedType_cache = found_struct.v;
                    return found_struct.v;
                }
                var found_pod = { };
                if (def.v.Pods.tryGetValue(entry_name, found_pod)) {
                    this.ResolveNamedType_cache = found_pod.v;
                    return found_pod.v;
                }
                var found_namedarray = { };
                if (def.v.NamedArrays.tryGetValue(entry_name, found_namedarray)) {
                    this.ResolveNamedType_cache = found_namedarray.v;
                    return found_namedarray.v;
                }
                var found_object = { };
                if (def.v.Objects.tryGetValue(entry_name, found_object)) {
                    this.ResolveNamedType_cache = found_object.v;
                    return found_object.v;
                }
                var found_enum = { };
                if (def.v.Enums.tryGetValue(entry_name, found_enum)) {
                    this.ResolveNamedType_cache = found_enum.v;
                    return found_enum.v;
                }

                throw new RobotRaconteurWeb.ServiceDefinitionException("Could not resolve named type " + (def.v.Name || "") + "." + (entry_name || ""));
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.UserAuthenticator", {
        $kind: "interface"
    });

    Bridge.define("RobotRaconteurWeb.UsingDefinition", {
        fields: {
            QualifiedName: null,
            UnqualifiedName: null,
            service: null
        },
        ctors: {
            ctor: function (service) {
                this.$initialize();
                this.service = service;
            }
        },
        methods: {
            toString: function () {
                var s = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(this.QualifiedName);
                var qualified_name_type = s.Item2;
                if (Bridge.referenceEquals(qualified_name_type, this.UnqualifiedName)) {
                    return "using " + (this.QualifiedName || "") + "\n";
                } else {
                    return "using " + (this.QualifiedName || "") + " as " + (this.UnqualifiedName || "") + "\n";
                }
            },
            FromString: function (s) {
                var r = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*using[ \\t]+((?:[a-zA-Z](?:\\w*[a-zA-Z0-9])?)(?:\\.[a-zA-Z](?:\\w*[a-zA-Z0-9])?)+)(?:[ \\t]+as[ \\t]([a-zA-Z](?:\\w*[a-zA-Z0-9])?))?[ \\t]*$");

                var r_match = r.match(s);
                if (!r_match.getSuccess()) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Format error for using  definition \"" + (s || "") + "\"");
                }

                if (!r_match.getGroups().get(2).getSuccess()) {
                    this.QualifiedName = r_match.getGroups().get(1).getValue();
                    var s2 = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(r_match.getGroups().get(1).getValue());
                    this.UnqualifiedName = s2.Item2;
                } else {
                    this.QualifiedName = r_match.getGroups().get(1).getValue();
                    this.UnqualifiedName = r_match.getGroups().get(2).getValue();
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.WebSocketStreamWrapper", {
        inherits: [System.IO.Stream],
        fields: {
            websock: null
        },
        props: {
            CanRead: {
                get: function () {
                    return true;
                }
            },
            CanSeek: {
                get: function () {
                    return false;
                }
            },
            CanWrite: {
                get: function () {
                    return true;
                }
            },
            Length: {
                get: function () {
                    throw new System.NotSupportedException.ctor();
                }
            },
            Position: {
                get: function () {
                    throw new System.NotSupportedException.ctor();
                },
                set: function (value) {
                    throw new System.NotSupportedException.ctor();
                }
            }
        },
        ctors: {
            ctor: function (websocket) {
                this.$initialize();
                System.IO.Stream.ctor.call(this);
                this.websock = websocket;
            }
        },
        methods: {
            Flush: function () {

            },
            DoBeginRead: function (buffer, offset, count) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    buffer2, 
                    r, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        buffer2 = System.Array.init(count, 0, System.Byte);
                                        $task1 = this.websock.receiveAsync(new System.ArraySegment(buffer2, 0, count), Bridge.getDefaultValue(System.Threading.CancellationToken));
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        r = $taskResult1;
                                        if (r.getMessageType() !== "binary") {
                                            throw new RobotRaconteurWeb.IOException("Invalid websocket message type");
                                        }
                                        System.Array.copy(buffer2, 0, buffer, offset, r.getCount());
                                        $tcs.setResult(r.getCount());
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            BeginRead: function (buffer, offset, count, callback, state) {
                return RobotRaconteurWeb.Extensions.Extensions.AsApm$1(System.Int32, this.DoBeginRead(buffer, offset, count), callback, state);
            },
            EndRead: function (asyncResult) {
                var asyncResult1 = asyncResult;
                return Bridge.cast(asyncResult1.getResult(), System.Int32);
            },
            DoBeginWrite: function (buffer, offset, count) {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $task3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    pos, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,12], $step);
                                switch ($step) {
                                    case 0: {
                                        if (count <= 65536) {
                                            $step = 1;
                                            continue;
                                        } else  {
                                            $step = 3;
                                            continue;
                                        }
                                    }
                                    case 1: {
                                        $task1 = this.websock.sendAsync(new System.ArraySegment(buffer, offset, count), "binary", true);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 12;
                                        continue;
                                    }
                                    case 3: {
                                        pos = 0;
                                        
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        if ( pos < count ) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 11;
                                        continue;
                                    }
                                    case 5: {
                                        if ((((count - pos) | 0)) <= 65536) {
                                            $step = 6;
                                            continue;
                                        } else  {
                                            $step = 8;
                                            continue;
                                        }
                                    }
                                    case 6: {
                                        $task2 = this.websock.sendAsync(new System.ArraySegment(buffer, ((offset + pos) | 0), ((count - pos) | 0)), "binary", true);
                                        $step = 7;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 7: {
                                        $task2.getAwaitedResult();
                                        pos = count;
                                        $step = 10;
                                        continue;
                                    }
                                    case 8: {
                                        $task3 = this.websock.sendAsync(new System.ArraySegment(buffer, ((offset + pos) | 0), 65536), "binary", true);
                                        $step = 9;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 9: {
                                        $task3.getAwaitedResult();
                                        pos = (pos + 65536) | 0;
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {
                                        
                                        $step = 4;
                                        continue;
                                    }

                                    case 12: {
                                        $tcs.setResult(count);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            BeginWrite: function (buffer, offset, count, callback, state) {
                return RobotRaconteurWeb.Extensions.Extensions.AsApm$1(System.Int32, this.DoBeginWrite(buffer, offset, count), callback, state);
            },
            EndWrite: function (asyncResult) {
                var noop = Bridge.cast(asyncResult, System.Threading.Tasks.Task$1(System.Int32)).getResult();
            },
            Read: function (buffer, offset, count) {
                throw new System.InvalidOperationException.$ctor1("Invalid for browser");
            },
            Seek: function (offset, origin) {
                throw new System.NotSupportedException.ctor();
            },
            SetLength: function (value) {
                throw new System.NotSupportedException.ctor();
            },
            Write: function (buffer, offset, count) {
                throw new System.InvalidOperationException.$ctor1("Invalid for browser");
            },
            Close: function () {
                RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.websock.closeAsync(1000, "", Bridge.getDefaultValue(System.Threading.CancellationToken)));
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Wire$1", function (T) { return {
        fields: {
            rawelements: false,
            direction: 0
        },
        ctors: {
            init: function () {
                this.rawelements = false;
                this.direction = RobotRaconteurWeb.MemberDefinition_Direction.both;
            },
            ctor: function () {
                this.$initialize();
                if (Bridge.referenceEquals(T, RobotRaconteurWeb.MessageElement)) {
                    this.rawelements = true;
                }
            }
        },
        methods: {
            UnpackPacket: function (me, timespec) {
                var $t, $t1, $t2;
                var s = (RobotRaconteurWeb.MessageElement.FindElement$1(me, "packettime").CastData(RobotRaconteurWeb.MessageElementStructure));
                var seconds = ($t = RobotRaconteurWeb.MessageElement.FindElement$1(s.Elements, "seconds").CastData(System.Array.type(System.Int64)))[System.Array.index(0, $t)];
                var nanoseconds = ($t1 = RobotRaconteurWeb.MessageElement.FindElement$1(s.Elements, "nanoseconds").CastData(System.Array.type(System.Int32)))[System.Array.index(0, $t1)];
                timespec.v = new RobotRaconteurWeb.TimeSpec.$ctor1(seconds, nanoseconds);
                var data;
                if (!this.rawelements) {
                    data = this.UnpackVarType(RobotRaconteurWeb.MessageElement.FindElement$1(me, "packet"));
                } else {
                    data = RobotRaconteurWeb.MessageElement.FindElement$1(me, "packet");
                }

                if (Bridge.is(data, Array)) {
                    if (Bridge.isArray(null, T)) {
                        return Bridge.cast(Bridge.unbox(data, T), T);
                    } else {
                        return ($t2 = Bridge.cast(data, System.Array.type(T)))[System.Array.index(0, $t2)];
                    }
                } else {
                    return Bridge.cast(Bridge.unbox(data, T), T);
                }
            },
            DispatchPacket: function (me, e) {
                var timespec = { };
                var data = this.UnpackPacket(me, timespec);

                e.WirePacketReceived(timespec.v, data);
            },
            PackPacket: function (data, time) {

                var timespec1 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                timespec1.add(new RobotRaconteurWeb.MessageElement.$ctor1("seconds", time.seconds));
                timespec1.add(new RobotRaconteurWeb.MessageElement.$ctor1("nanoseconds", Bridge.box(time.nanoseconds, System.Int32)));
                var s = new RobotRaconteurWeb.MessageElementStructure("RobotRaconteur.TimeSpec", timespec1);


                var elems = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                elems.add(new RobotRaconteurWeb.MessageElement.$ctor1("packettime", s));
                if (!this.rawelements) {
                    var pdata = this.PackVarType(data);
                    elems.add(new RobotRaconteurWeb.MessageElement.$ctor1("packet", pdata));
                } else {
                    var pme = Bridge.cast(data, RobotRaconteurWeb.MessageElement);
                    pme.ElementName = "packet";
                    elems.add(pme);
                }


                return elems;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.Wire$1.WireConnection", function (T) { return {
        $kind: "nested class",
        fields: {
            endpoint: null,
            inval: Bridge.getDefaultValue(T),
            inval_valid: false,
            last_sendtime: null,
            parent: null,
            sendlock: null,
            outval: Bridge.getDefaultValue(T),
            outval_valid: false,
            lasttime_send: null,
            recv_lock: null,
            lasttime_recv: null,
            close_callback: null
        },
        events: {
            WireValueChanged: null
        },
        props: {
            Endpoint: {
                get: function () {
                    return this.endpoint.LocalEndpoint;
                }
            },
            InValue: {
                get: function () {
                    if (!this.inval_valid) {
                        throw new System.Exception("Value not set");
                    }
                    return this.inval;
                }
            },
            OutValue: {
                get: function () {
                    if (!this.outval_valid) {
                        throw new System.Exception("Value not set");
                    }
                    return this.outval;
                },
                set: function (value) {
                    this.sendlock;
                    {
                        var time = RobotRaconteurWeb.TimeSpec.Now;
                        if (RobotRaconteurWeb.TimeSpec.op_Equality(time, this.last_sendtime)) {
                            time.nanoseconds = (time.nanoseconds + 1) | 0;
                        }


                        this.parent.SendWirePacket(value, time, this.endpoint);
                        this.last_sendtime = time;
                        this.outval = value;
                        this.outval_valid = true;
                        this.lasttime_send = RobotRaconteurWeb.TimeSpec.Now;
                    }
                }
            },
            LastValueReceivedTime: {
                get: function () {
                    if (!this.inval_valid) {
                        throw new System.Exception("No value received");
                    }
                    return this.lasttime_recv;
                }
            },
            LastValueSentTime: {
                get: function () {
                    if (!this.outval_valid) {
                        throw new System.Exception("No value sent");
                    }
                    return this.lasttime_send;
                }
            },
            WireCloseCallback: {
                get: function () {
                    return this.close_callback;
                },
                set: function (value) {
                    this.close_callback = value;
                }
            }
        },
        ctors: {
            init: function () {
                this.inval_valid = false;
                this.last_sendtime = new RobotRaconteurWeb.TimeSpec.$ctor1(System.Int64(0), 0);
                this.sendlock = { };
                this.outval_valid = false;
                this.recv_lock = { };
            },
            ctor: function (parent, endpoint) {
                if (endpoint === void 0) { endpoint = null; }

                this.$initialize();
                this.parent = parent;
                this.endpoint = endpoint;
            }
        },
        methods: {
            Close: function () {
                return this.parent.Close(this);
            },
            WirePacketReceived: function (timespec, packet) {
                this.recv_lock;
                {


                    if (RobotRaconteurWeb.TimeSpec.op_Equality(this.lasttime_recv, null) || RobotRaconteurWeb.TimeSpec.op_GreaterThan(timespec, this.lasttime_recv)) {
                        this.lasttime_recv = timespec;
                        this.inval = packet;
                        this.inval_valid = true;

                        try {
                            if (!Bridge.staticEquals(this.WireValueChanged, null)) {
                                this.WireValueChanged(this, packet, timespec);
                            }
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }

                    }
                }
            },
            RemoteClose: function () {
                if (!Bridge.staticEquals(this.close_callback, null)) {
                    try {
                        this.close_callback(this);
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                    ;
                }

                this.Close();
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.WireBroadcaster$1", function (T) { return {
        fields: {
            connected_wires: null,
            connected_wires_lock: null,
            wire: null,
            current_out_value: null
        },
        props: {
            Wire: {
                get: function () {
                    return this.wire;
                }
            },
            OutValue: {
                set: function (value) {
                    var $t, $t1;
                    this.connected_wires_lock;
                    {
                        this.current_out_value = value;
                        var ceps = new (System.Collections.Generic.List$1(RobotRaconteurWeb.WireBroadcaster$1.connected_connection(T))).ctor();
                        $t = Bridge.getEnumerator(this.connected_wires);
                        try {
                            while ($t.moveNext()) {
                                var c = $t.Current;
                                ceps.add(c);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$Dispose();
                            }
                        }

                        $t1 = Bridge.getEnumerator(ceps);
                        try {
                            while ($t1.moveNext()) {
                                var ee = $t1.Current;
                                try {
                                    var c1 = ee.connection;
                                    if (c1 == null) {
                                        this.connected_wires.remove(ee);
                                        continue;
                                    }
                                    c1.OutValue = value;

                                } catch (exp) {
                                    exp = System.Exception.create(exp);
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$Dispose();
                            }
                        }
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.connected_wires = new (System.Collections.Generic.List$1(RobotRaconteurWeb.WireBroadcaster$1.connected_connection(T))).ctor();
                this.connected_wires_lock = { };
                this.current_out_value = Bridge.getDefaultValue(T);
            },
            ctor: function (wire) {
                this.$initialize();
                this.wire = wire;
                wire.WireConnectCallback = Bridge.fn.cacheBind(this, this.ConnectionConnected);
                wire.PeekInValueCallback = Bridge.fn.cacheBind(this, this.ClientPeekInValue);
                wire.PeekOutValueCallback = Bridge.fn.cacheBind(this, this.ClientPeekOutValue);
                wire.PokeOutValueCallback = Bridge.fn.cacheBind(this, this.ClientPokeOutValue);
            }
        },
        methods: {
            ConnectionClosed: function (ep) {
                this.connected_wires_lock;
                {
                    try {
                        this.connected_wires.remove(ep);
                    } catch (e) {
                        e = System.Exception.create(e);
                    }
                }
            },
            ConnectionConnected: function (w, ep) {
                this.connected_wires_lock;
                {
                    var c = new (RobotRaconteurWeb.WireBroadcaster$1.connected_connection(T))(ep);
                    ep.WireCloseCallback = Bridge.fn.bind(this, function (w2) {
                        this.ConnectionClosed(c);
                    });
                    this.connected_wires.add(c);
                }

            },
            ClientPeekInValue: function (c) {
                this.connected_wires_lock;
                {
                    return this.current_out_value;
                }
            },
            ClientPeekOutValue: function (c) {
                throw new RobotRaconteurWeb.ReadOnlyMemberException("Read only wire");
            },
            ClientPokeOutValue: function (v, ts, c) {
                throw new RobotRaconteurWeb.ReadOnlyMemberException("Read only wire");
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.WireBroadcaster$1.connected_connection", function (T) { return {
        $kind: "nested class",
        fields: {
            connection: null
        },
        ctors: {
            ctor: function (connection) {
                this.$initialize();
                this.connection = connection;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.WireUnicastReceiver$1", function (T) { return {
        fields: {
            active_connection: null,
            wire: null,
            in_value: Bridge.getDefaultValue(T),
            in_value_ts: null,
            in_value_valid: false,
            in_value_ep: 0
        },
        events: {
            InValueChanged: null
        },
        props: {
            Wire: {
                get: function () {
                    return this.wire;
                }
            }
        },
        ctors: {
            ctor: function (wire) {
                this.$initialize();
                this.wire = wire;
                wire.WireConnectCallback = Bridge.fn.cacheBind(this, this.ConnectionConnected);
                wire.PeekInValueCallback = Bridge.fn.cacheBind(this, this.ClientPeekInValue);
                wire.PeekOutValueCallback = Bridge.fn.cacheBind(this, this.ClientPeekOutValue);
                wire.PokeOutValueCallback = Bridge.fn.cacheBind(this, this.ClientPokeOutValue);
            }
        },
        methods: {
            ConnectionClosed: function (ep) {
                this;
                {
                    if (Bridge.referenceEquals(this.active_connection, ep)) {
                        this.active_connection = null;
                    }
                }
            },
            ConnectionConnected: function (w, ep) {
                this;
                {
                    if (this.active_connection != null) {
                        try {
                            this.active_connection.connection.Close().continueWith(function (x) { });
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                    }

                    var c = new (RobotRaconteurWeb.WireUnicastReceiver$1.connected_connection(T))(ep);
                    ep.WireCloseCallback = Bridge.fn.bind(this, function (w2) {
                        this.ConnectionClosed(c);
                    });
                    ep.addWireValueChanged(Bridge.fn.bind(this, function (c1, value, time) {
                        this.ClientPokeOutValue(value, time, c1.Endpoint);
                    }));
                    this.active_connection = c;
                }

            },
            GetInValue: function (ts, ep) {
                this;
                {
                    if (!this.in_value_valid) {
                        throw new System.InvalidOperationException.$ctor1("Value not set");
                    }
                    ts.v = this.in_value_ts;
                    ep.v = this.in_value_ep;
                    return this.in_value;
                }
            },
            ClientPeekInValue: function (c) {
                throw new RobotRaconteurWeb.WriteOnlyMemberException("Write only wire");
            },
            ClientPeekOutValue: function (c) {
                this;
                {
                    if (!this.in_value_valid) {
                        throw new System.InvalidOperationException.$ctor1("Value not set");
                    }
                    return this.in_value;
                }
            },
            ClientPokeOutValue: function (v, ts, c) {
                this;
                {
                    this.in_value = v;
                    this.in_value_ts = ts;
                    this.in_value_valid = true;
                    this.in_value_ep = c;
                }

                if (!Bridge.staticEquals(this.InValueChanged, null)) {
                    this.InValueChanged(v, ts, c);
                }
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.WireUnicastReceiver$1.connected_connection", function (T) { return {
        $kind: "nested class",
        fields: {
            connection: null
        },
        ctors: {
            ctor: function (connection) {
                this.$initialize();
                this.connection = connection;
            }
        }
    }; });

    Bridge.define("RobotRaconteurServiceIndex.NodeInfo_stub", {
        inherits: [RobotRaconteurWeb.IStructureStub],
        fields: {
            def: null
        },
        alias: [
            "PackStructure", "RobotRaconteurWeb$IStructureStub$PackStructure",
            "UnpackStructure", "RobotRaconteurWeb$IStructureStub$UnpackStructure"
        ],
        ctors: {
            ctor: function (d) {
                this.$initialize();
                this.def = d;
            }
        },
        methods: {
            PackStructure: function (s1) {
                var m = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                if (s1 == null) {
                    return null;
                }
                var s = Bridge.cast(s1, RobotRaconteurServiceIndex.NodeInfo);
                m.add(new RobotRaconteurWeb.MessageElement.$ctor1("NodeName", s.NodeName));
                m.add(new RobotRaconteurWeb.MessageElement.$ctor1("NodeID", s.NodeID));
                m.add(new RobotRaconteurWeb.MessageElement.$ctor1("ServiceIndexConnectionURL", this.def.PackMapType(System.Int32, System.String, s.ServiceIndexConnectionURL)));
                return new RobotRaconteurWeb.MessageElementStructure("RobotRaconteurServiceIndex.NodeInfo", m);
            },
            UnpackStructure: function (T, m) {
                if (m == null) {
                    return Bridge.getDefaultValue(T);
                }
                var s = new RobotRaconteurServiceIndex.NodeInfo();
                s.NodeName = RobotRaconteurWeb.MessageElement.FindElement$1(m.Elements, "NodeName").CastData(System.String);
                s.NodeID = RobotRaconteurWeb.MessageElement.FindElement$1(m.Elements, "NodeID").CastData(System.Array.type(System.Byte));
                s.ServiceIndexConnectionURL = Bridge.cast(this.def.UnpackMapType(System.Int32, System.String, RobotRaconteurWeb.MessageElement.FindElement$1(m.Elements, "ServiceIndexConnectionURL").Data), System.Collections.Generic.Dictionary$2(System.Int32,System.String));
                var st;
                try {
                    st = Bridge.cast(Bridge.unbox(s, T), T);
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    var e;
                    if (Bridge.is($e1, System.InvalidCastException)) {
                        e = $e1;
                        throw new RobotRaconteurWeb.DataTypeMismatchException("Wrong structuretype");
                    } else {
                        throw $e1;
                    }
                }
                return st;
            }
        }
    });

    Bridge.define("RobotRaconteurServiceIndex.RobotRaconteurServiceIndexFactory", {
        inherits: [RobotRaconteurWeb.ServiceFactory],
        fields: {
            NodeInfo_stubentry: null,
            ServiceInfo_stubentry: null
        },
        ctors: {
            ctor: function (node) {
                if (node === void 0) { node = null; }

                this.$initialize();
                RobotRaconteurWeb.ServiceFactory.ctor.call(this, node);
                this.NodeInfo_stubentry = new RobotRaconteurServiceIndex.NodeInfo_stub(this);
                this.ServiceInfo_stubentry = new RobotRaconteurServiceIndex.ServiceInfo_stub(this);
            }
        },
        methods: {
            DefString: function () {
                var d = "service RobotRaconteurServiceIndex\r\nstruct NodeInfo\r\nfield string NodeName\r\nfield uint8[16] NodeID\r\nfield string{int32} ServiceIndexConnectionURL\r\nend struct\r\nstruct ServiceInfo\r\nfield string Name\r\nfield string RootObjectType\r\nfield string{int32} RootObjectImplements\r\nfield string{int32} ConnectionURL\r\nfield varvalue{string} Attributes\r\nend struct\r\nobject ServiceIndex\r\nfunction ServiceInfo{int32} GetLocalNodeServices()\r\nfunction NodeInfo{int32} GetRoutedNodes()\r\nfunction NodeInfo{int32} GetDetectedNodes()\r\nevent LocalNodeServicesChanged()\r\nend object";
                return d;
            },
            GetServiceName: function () {
                return "RobotRaconteurServiceIndex";
            },
            FindStructureStub: function (objecttype) {
                var objshort = this.RemovePath(objecttype);
                switch (objshort) {
                    case "NodeInfo": 
                        return this.NodeInfo_stubentry;
                    case "ServiceInfo": 
                        return this.ServiceInfo_stubentry;
                }
                throw new RobotRaconteurWeb.DataTypeException("Cannot find appropriate structure stub");
            },
            PackStructure: function (s) {
                if (s == null) {
                    return null;
                }
                var objtype = RobotRaconteurWeb.ServiceDefinitionUtil.FindStructRRType(Bridge.getType(s));
                if (Bridge.referenceEquals(RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(objtype).Item1, "RobotRaconteurServiceIndex")) {
                    var objshort = this.RemovePath(objtype);
                    switch (objshort) {
                        case "NodeInfo": 
                            return this.NodeInfo_stubentry.PackStructure(s);
                        case "ServiceInfo": 
                            return this.ServiceInfo_stubentry.PackStructure(s);
                    }
                } else {
                    return RobotRaconteurWeb.ServiceFactory.prototype.PackStructure.call(this, s);
                }
                throw new System.Exception();
            },
            UnpackStructure: function (T, l) {
                if (l == null) {
                    return Bridge.getDefaultValue(T);
                }
                if (Bridge.referenceEquals(RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(l.Type).Item1, "RobotRaconteurServiceIndex")) {
                    var objshort = this.RemovePath(l.Type);
                    switch (objshort) {
                        case "NodeInfo": 
                            return this.NodeInfo_stubentry.UnpackStructure(T, l);
                        case "ServiceInfo": 
                            return this.ServiceInfo_stubentry.UnpackStructure(T, l);
                    }
                } else {
                    return RobotRaconteurWeb.ServiceFactory.prototype.UnpackStructure.call(this, T, l);
                }
                throw new RobotRaconteurWeb.DataTypeException("Could not unpack structure");
            },
            CreateStub: function (objecttype, path, context) {
                if (Bridge.referenceEquals(RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(objecttype).Item1, "RobotRaconteurServiceIndex")) {
                    var objshort = this.RemovePath(objecttype);
                    switch (objshort) {
                        case "ServiceIndex": 
                            return new RobotRaconteurServiceIndex.ServiceIndex_stub(path, context);
                    }
                } else {
                    return RobotRaconteurWeb.ServiceFactory.prototype.CreateStub.call(this, objecttype, path, context);
                }
                throw new RobotRaconteurWeb.ServiceException("Could not create stub");
            },
            CreateSkel: function (path, obj, context) {
                var objtype = RobotRaconteurWeb.ServiceDefinitionUtil.FindObjectRRType(obj);
                if (Bridge.referenceEquals(RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(objtype).Item1, "RobotRaconteurServiceIndex")) {
                    var sobjtype = this.RemovePath(objtype);
                    switch (sobjtype) {
                        case "ServiceIndex": 
                            return new RobotRaconteurServiceIndex.ServiceIndex_skel(path, Bridge.cast(obj, RobotRaconteurServiceIndex.ServiceIndex), context);
                    }
                } else {
                    return RobotRaconteurWeb.ServiceFactory.prototype.CreateSkel.call(this, path, obj, context);
                }
                throw new RobotRaconteurWeb.ServiceException("Could not create skel");
            },
            FindPodStub: function (objecttype) {
                throw new System.NotImplementedException.ctor();
            },
            FindNamedArrayStub: function (objecttype) {
                throw new System.NotImplementedException.ctor();
            }
        }
    });

    Bridge.define("RobotRaconteurServiceIndex.ServiceIndex_skel", {
        inherits: [RobotRaconteurWeb.ServiceSkel],
        fields: {
            rr_InitPipeServersRun: false
        },
        props: {
            obj: {
                get: function () {
                    return Bridge.cast(this.uncastobj, RobotRaconteurServiceIndex.ServiceIndex);
                }
            }
        },
        ctors: {
            init: function () {
                this.rr_InitPipeServersRun = false;
            },
            ctor: function (p, o, c) {
                this.$initialize();
                RobotRaconteurWeb.ServiceSkel.ctor.call(this, p, o, c);
                this.uncastobj = o;
            }
        },
        methods: {
            CallGetProperty: function (m) {
                var $step = 0,
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ename, 
                    mr, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0], $step);
                                switch ($step) {
                                    case 0: {
                                        ename = m.MemberName;
                                        mr = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PropertyGetRes, ename);
                                        switch (ename) {
                                            default: 
                                                throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CallSetProperty: function (m) {
                var $step = 0,
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ename, 
                    me, 
                    mr, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0], $step);
                                switch ($step) {
                                    case 0: {
                                        ename = m.MemberName;
                                        me = m.FindElement("value");
                                        mr = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PropertySetRes, ename);
                                        switch (ename) {
                                            default: 
                                                throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CallFunction: function (rr_m) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $taskResult3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    rr_ename, 
                    rr_mr, 
                    rr_ret, 
                    rr_ret1, 
                    rr_ret2, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8], $step);
                                switch ($step) {
                                    case 0: {
                                        rr_ename = rr_m.MemberName;
                                        rr_mr = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.FunctionCallRes, rr_ename);
                                        if (rr_ename === "GetLocalNodeServices") {
                                            $step = 1;
                                            continue;
                                        }
                                        else if (rr_ename === "GetRoutedNodes") {
                                            $step = 3;
                                            continue;
                                        }
                                        else if (rr_ename === "GetDetectedNodes") {
                                            $step = 5;
                                            continue;
                                        }
                                        else  {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 8;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = this.obj.RobotRaconteurServiceIndex$ServiceIndex$GetLocalNodeServices(Bridge.getDefaultValue(System.Threading.CancellationToken));
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        rr_ret = $taskResult1;
                                        rr_mr.AddElement(new RobotRaconteurWeb.MessageElement.$ctor1("return", this.RRContext.PackMapType(System.Int32, RobotRaconteurServiceIndex.ServiceInfo, rr_ret)));
                                        $step = 8;
                                        continue;
                                    }
                                    case 3: {
                                        $task2 = this.obj.RobotRaconteurServiceIndex$ServiceIndex$GetRoutedNodes(Bridge.getDefaultValue(System.Threading.CancellationToken));
                                        $step = 4;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        rr_ret1 = $taskResult2;
                                        rr_mr.AddElement(new RobotRaconteurWeb.MessageElement.$ctor1("return", this.RRContext.PackMapType(System.Int32, RobotRaconteurServiceIndex.NodeInfo, rr_ret1)));
                                        $step = 8;
                                        continue;
                                    }
                                    case 5: {
                                        $task3 = this.obj.RobotRaconteurServiceIndex$ServiceIndex$GetDetectedNodes(Bridge.getDefaultValue(System.Threading.CancellationToken));
                                        $step = 6;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        rr_ret2 = $taskResult3;
                                        rr_mr.AddElement(new RobotRaconteurWeb.MessageElement.$ctor1("return", this.RRContext.PackMapType(System.Int32, RobotRaconteurServiceIndex.NodeInfo, rr_ret2)));
                                        $step = 8;
                                        continue;
                                    }
                                    case 7: {
                                        throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                                    }
                                    case 8: {
                                        $tcs.setResult(rr_mr);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ReleaseCastObject: function () { },
            LocalNodeServicesChanged_Handler: function () {
                var rr_mm = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.EventReq, "LocalNodeServicesChanged");
                this.SendEvent(rr_mm);
            },
            RegisterEvents: function (obj1) {
                var obj = Bridge.as(obj1, RobotRaconteurServiceIndex.ServiceIndex);
                obj.RobotRaconteurServiceIndex$ServiceIndex$addLocalNodeServicesChanged(Bridge.fn.cacheBind(this, this.LocalNodeServicesChanged_Handler));
                RobotRaconteurWeb.ServiceSkel.prototype.RegisterEvents.call(this, obj1);

            },
            UnregisterEvents: function (obj1) {
                var obj = Bridge.as(obj1, RobotRaconteurServiceIndex.ServiceIndex);
                obj.RobotRaconteurServiceIndex$ServiceIndex$removeLocalNodeServicesChanged(Bridge.fn.cacheBind(this, this.LocalNodeServicesChanged_Handler));
                RobotRaconteurWeb.ServiceSkel.prototype.UnregisterEvents.call(this, obj1);

            },
            GetSubObj$1: function (name, ind) {
                var $step = 0,
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0], $step);
                                switch ($step) {
                                    case 0: {
                                        switch (name) {
                                            default: 
                                                throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            InitPipeServers: function (o) {
                if (this.rr_InitPipeServersRun) {
                    return;
                }
                this.rr_InitPipeServersRun = true;
                var castobj = Bridge.cast(o, RobotRaconteurServiceIndex.ServiceIndex);
            },
            DispatchPipeMessage: function (m, e) {
                switch (m.MemberName) {
                    default: 
                        throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                }
            },
            DispatchWireMessage: function (m, e) {
                switch (m.MemberName) {
                    default: 
                        throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                }
            },
            InitCallbackServers: function (o) {
                var castobj = Bridge.cast(o, RobotRaconteurServiceIndex.ServiceIndex);
            },
            GetCallbackFunction: function (endpoint, membername) {
                switch (membername) {
                    default: 
                        throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                }
            },
            CallPipeFunction: function (m, e) {
                var $step = 0,
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ename, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0], $step);
                                switch ($step) {
                                    case 0: {
                                        ename = m.MemberName;
                                        switch (ename) {
                                            default: 
                                                throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CallWireFunction: function (m, e) {
                var $step = 0,
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ename, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0], $step);
                                switch ($step) {
                                    case 0: {
                                        ename = m.MemberName;
                                        switch (ename) {
                                            default: 
                                                throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CallMemoryFunction: function (m, e) {
                var $step = 0,
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ename, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0], $step);
                                switch ($step) {
                                    case 0: {
                                        ename = m.MemberName;
                                        switch (ename) {
                                            default: 
                                                throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurServiceIndex.ServiceIndex_stub", {
        inherits: [RobotRaconteurWeb.ServiceStub,RobotRaconteurServiceIndex.ServiceIndex],
        events: {
            LocalNodeServicesChanged: null
        },
        alias: [
            "GetLocalNodeServices", "RobotRaconteurServiceIndex$ServiceIndex$GetLocalNodeServices",
            "GetRoutedNodes", "RobotRaconteurServiceIndex$ServiceIndex$GetRoutedNodes",
            "GetDetectedNodes", "RobotRaconteurServiceIndex$ServiceIndex$GetDetectedNodes",
            "addLocalNodeServicesChanged", "RobotRaconteurServiceIndex$ServiceIndex$addLocalNodeServicesChanged",
            "removeLocalNodeServicesChanged", "RobotRaconteurServiceIndex$ServiceIndex$removeLocalNodeServicesChanged"
        ],
        ctors: {
            ctor: function (path, c) {
                this.$initialize();
                RobotRaconteurWeb.ServiceStub.ctor.call(this, path, c);
            }
        },
        methods: {
            GetLocalNodeServices: function (rr_cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    rr_mm, 
                    rr_mr, 
                    rr_me, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (rr_cancel === void 0) { rr_cancel = new System.Threading.CancellationToken(); }
                                        rr_mm = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.FunctionCallReq, "GetLocalNodeServices");
                                        $task1 = this.ProcessRequest(rr_mm, rr_cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        rr_mr = $taskResult1;
                                        rr_me = rr_mr.FindElement("return");
                                        $tcs.setResult(Bridge.cast(this.RRContext.UnpackMapType(System.Int32, RobotRaconteurServiceIndex.ServiceInfo, rr_me.Data), System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.ServiceInfo)));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetRoutedNodes: function (rr_cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    rr_mm, 
                    rr_mr, 
                    rr_me, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (rr_cancel === void 0) { rr_cancel = new System.Threading.CancellationToken(); }
                                        rr_mm = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.FunctionCallReq, "GetRoutedNodes");
                                        $task1 = this.ProcessRequest(rr_mm, rr_cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        rr_mr = $taskResult1;
                                        rr_me = rr_mr.FindElement("return");
                                        $tcs.setResult(Bridge.cast(this.RRContext.UnpackMapType(System.Int32, RobotRaconteurServiceIndex.NodeInfo, rr_me.Data), System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetDetectedNodes: function (rr_cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    rr_mm, 
                    rr_mr, 
                    rr_me, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (rr_cancel === void 0) { rr_cancel = new System.Threading.CancellationToken(); }
                                        rr_mm = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.FunctionCallReq, "GetDetectedNodes");
                                        $task1 = this.ProcessRequest(rr_mm, rr_cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        rr_mr = $taskResult1;
                                        rr_me = rr_mr.FindElement("return");
                                        $tcs.setResult(Bridge.cast(this.RRContext.UnpackMapType(System.Int32, RobotRaconteurServiceIndex.NodeInfo, rr_me.Data), System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DispatchEvent: function (rr_m) {
                var rr_ename = rr_m.MemberName;
                switch (rr_ename) {
                    case "LocalNodeServicesChanged": 
                        {
                            if (!Bridge.staticEquals(this.LocalNodeServicesChanged, null)) {
                                this.LocalNodeServicesChanged();
                            }
                            break;
                        }
                }
            },
            DispatchPipeMessage: function (m) {
                switch (m.MemberName) {
                    default: 
                        throw new System.Exception();
                }
            },
            CallbackCall: function (rr_m) {
                var $step = 0,
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    rr_ename, 
                    rr_mr, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0], $step);
                                switch ($step) {
                                    case 0: {
                                        rr_ename = rr_m.MemberName;
                                        rr_mr = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.CallbackCallRet, rr_ename);
                                        rr_mr.ServicePath = rr_m.ServicePath;
                                        rr_mr.RequestID = rr_m.RequestID;
                                        switch (rr_ename) {
                                            default: 
                                                throw new RobotRaconteurWeb.MemberNotFoundException("Member not found");
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DispatchWireMessage: function (m) {
                switch (m.MemberName) {
                    default: 
                        throw new System.Exception();
                }
            }
        }
    });

    Bridge.define("RobotRaconteurServiceIndex.ServiceInfo_stub", {
        inherits: [RobotRaconteurWeb.IStructureStub],
        fields: {
            def: null
        },
        alias: [
            "PackStructure", "RobotRaconteurWeb$IStructureStub$PackStructure",
            "UnpackStructure", "RobotRaconteurWeb$IStructureStub$UnpackStructure"
        ],
        ctors: {
            ctor: function (d) {
                this.$initialize();
                this.def = d;
            }
        },
        methods: {
            PackStructure: function (s1) {
                var m = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                if (s1 == null) {
                    return null;
                }
                var s = Bridge.cast(s1, RobotRaconteurServiceIndex.ServiceInfo);
                m.add(new RobotRaconteurWeb.MessageElement.$ctor1("Name", s.Name));
                m.add(new RobotRaconteurWeb.MessageElement.$ctor1("RootObjectType", s.RootObjectType));
                m.add(new RobotRaconteurWeb.MessageElement.$ctor1("RootObjectImplements", this.def.PackMapType(System.Int32, System.String, s.RootObjectImplements)));
                m.add(new RobotRaconteurWeb.MessageElement.$ctor1("ConnectionURL", this.def.PackMapType(System.Int32, System.String, s.ConnectionURL)));
                m.add(new RobotRaconteurWeb.MessageElement.$ctor1("Attributes", this.def.PackMapType(System.String, System.Object, s.Attributes)));
                return new RobotRaconteurWeb.MessageElementStructure("RobotRaconteurServiceIndex.ServiceInfo", m);
            },
            UnpackStructure: function (T, m) {
                if (m == null) {
                    return Bridge.getDefaultValue(T);
                }
                var s = new RobotRaconteurServiceIndex.ServiceInfo();
                s.Name = RobotRaconteurWeb.MessageElement.FindElement$1(m.Elements, "Name").CastData(System.String);
                s.RootObjectType = RobotRaconteurWeb.MessageElement.FindElement$1(m.Elements, "RootObjectType").CastData(System.String);
                s.RootObjectImplements = Bridge.cast(this.def.UnpackMapType(System.Int32, System.String, RobotRaconteurWeb.MessageElement.FindElement$1(m.Elements, "RootObjectImplements").Data), System.Collections.Generic.Dictionary$2(System.Int32,System.String));
                s.ConnectionURL = Bridge.cast(this.def.UnpackMapType(System.Int32, System.String, RobotRaconteurWeb.MessageElement.FindElement$1(m.Elements, "ConnectionURL").Data), System.Collections.Generic.Dictionary$2(System.Int32,System.String));
                s.Attributes = Bridge.cast(this.def.UnpackMapType(System.String, System.Object, RobotRaconteurWeb.MessageElement.FindElement$1(m.Elements, "Attributes").Data), System.Collections.Generic.Dictionary$2(System.String,System.Object));
                var st;
                try {
                    st = Bridge.cast(Bridge.unbox(s, T), T);
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    var e;
                    if (Bridge.is($e1, System.InvalidCastException)) {
                        e = $e1;
                        throw new RobotRaconteurWeb.DataTypeMismatchException("Wrong structuretype");
                    } else {
                        throw $e1;
                    }
                }
                return st;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.AbortOperationException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.AbortOperation, "RobotRaconteur.AbortOperation", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ArrayMemory$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemoryBase],
        fields: {
            memory: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemoryBase.ctor.call(this);

            },
            $ctor1: function (memory) {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemoryBase.ctor.call(this);
                this.memory = memory;
            }
        },
        methods: {
            Attach: function (memory) {
                this.memory = memory;
            },
            GetLength: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return System.Threading.Tasks.Task.fromResult(System.Int64.clipu64(System.Array.getLongLength(this.memory)), System.UInt64);
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                System.Array.copy(this.memory, System.Int64.clip64(memorypos).toNumber(), buffer, System.Int64.clip64(bufferpos).toNumber(), System.Int64.clip64(count).toNumber());
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                System.Array.copy(buffer, System.Int64.clip64(bufferpos).toNumber(), this.memory, System.Int64.clip64(memorypos).toNumber(), System.Int64.clip64(count).toNumber());
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.ArrayMemoryClientImpl$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemoryClientImplBase],
        ctors: {
            ctor: function (membername, stub, direction) {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemoryClientImplBase.ctor.call(this, membername, stub, RobotRaconteurWeb.DataTypeUtil.TypeIDFromType(T), RobotRaconteurWeb.DataTypeUtil.size(RobotRaconteurWeb.DataTypeUtil.TypeIDFromType(T)), direction);
            }
        },
        methods: {
            GetBufferLength: function (buffer) {
                return System.Int64.clipu64(System.Array.getLongLength(Bridge.cast(buffer, System.Array.type(T))));
            },
            PackWriteRequest: function (buffer, bufferpos, count) {
                var buffer1 = Bridge.cast(buffer, System.Array.type(T));
                if (bufferpos.equals(System.UInt64(0)) && System.Array.getLongLength(buffer1).equals(System.Int64.clip64(count))) {
                    return buffer1;
                } else if ((System.Array.getLongLength(buffer1).sub(System.Int64.clip64((bufferpos)))).gte(System.Int64.clip64((count)))) {
                    var data = System.Array.init(count, function (){
                        return Bridge.getDefaultValue(T);
                    }, T);
                    System.Array.copy(buffer1, System.Int64.clip64(bufferpos).toNumber(), data, System.Int64(0).toNumber(), System.Int64.clip64(count).toNumber());
                    return data;
                } else {
                    throw new RobotRaconteurWeb.OutOfRangeException("");
                }
            },
            UnpackReadResult: function (res, buffer, bufferpos, count) {
                var data = Bridge.cast(res, System.Array.type(T));
                var buffer1 = Bridge.cast(buffer, System.Array.type(T));
                System.Array.copy(data, System.Int64(0).toNumber(), buffer1, System.Int64.clip64(bufferpos).toNumber(), System.Int64.clip64(count).toNumber());
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.ArrayMemoryServiceSkel$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemoryServiceSkelBase],
        ctors: {
            ctor: function (membername, skel, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.ArrayMemoryServiceSkelBase.ctor.call(this, membername, skel, RobotRaconteurWeb.DataTypeUtil.TypeIDFromType(T), RobotRaconteurWeb.DataTypeUtil.size(RobotRaconteurWeb.DataTypeUtil.TypeIDFromType(T)), direction);

            }
        },
        methods: {
            DoRead: function (memorypos, bufferpos, count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.ArrayMemory$1(T));
                                        buf1 = Bridge.cast(RobotRaconteurWeb.DataTypeUtil.ArrayFromDataType(this.element_type, System.Int64.clipu32(count)), System.Array.type(T));
                                        $task1 = mem1.Read(memorypos, buf1, System.UInt64(0), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(buf1);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoWrite: function (memorypos, buffer, bufferpos, count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.ArrayMemory$1(T));
                                        buf1 = Bridge.cast(buffer, System.Array.type(T));
                                        $task1 = mem1.Write(memorypos, buf1, System.UInt64(0), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.AsyncStreamTransport", {
        inherits: [RobotRaconteurWeb.ITransportConnection],
        fields: {
            m_LocalEndpoint: 0,
            m_RemoteEndpoint: 0,
            m_RemoteNodeID: null,
            target_nodeid: null,
            target_nodename: null,
            is_server: false,
            node: null,
            parent: null,
            m_Connected: false,
            cancellationToken: null,
            mwrite: null,
            mread: null,
            recbuf: null,
            sendbuf: null,
            swriter: null,
            sreader: null,
            basestream: null,
            m_RequireTls: false,
            m_IsTls: false,
            request_receive_pause: false,
            request_receive_pause_task: null,
            pause_receive_task: null,
            sending: false,
            send_queue: null,
            request_send_pause: false,
            request_send_pause_task: null,
            pause_send_task: null,
            tlastsend: null,
            tlastrec: null,
            tlastrec_mes: null,
            ReceiveTimeout: 0,
            m_HeartbeatPeriod: 0,
            streamop_queue: null,
            streamop_ret: null,
            CheckStreamCapability_ret: null,
            CheckStreamCapability_queue: null
        },
        props: {
            LocalEndpoint: {
                get: function () {
                    return this.m_LocalEndpoint;
                }
            },
            RemoteEndpoint: {
                get: function () {
                    return this.m_RemoteEndpoint;
                }
            },
            RemoteNodeID: {
                get: function () {
                    this;
                    {
                        return this.m_RemoteNodeID;
                    }
                }
            },
            Connected: {
                get: function () {
                    this;
                    {
                        return this.m_Connected;
                    }
                }
            },
            RequireTls: {
                get: function () {
                    return this.m_RequireTls;
                }
            },
            IsTls: {
                get: function () {
                    return this.m_IsTls;
                }
            }
        },
        alias: [
            "LocalEndpoint", "RobotRaconteurWeb$ITransportConnection$LocalEndpoint",
            "RemoteEndpoint", "RobotRaconteurWeb$ITransportConnection$RemoteEndpoint",
            "RemoteNodeID", "RobotRaconteurWeb$ITransportConnection$RemoteNodeID",
            "SendMessage", "RobotRaconteurWeb$ITransportConnection$SendMessage",
            "Close", "RobotRaconteurWeb$ITransportConnection$Close",
            "CheckConnection", "RobotRaconteurWeb$ITransportConnection$CheckConnection"
        ],
        ctors: {
            init: function () {
                this.tlastsend = System.DateTime.getDefaultValue();
                this.tlastrec = System.DateTime.getDefaultValue();
                this.tlastrec_mes = System.DateTime.getDefaultValue();
                this.m_LocalEndpoint = 0;
                this.m_RemoteEndpoint = 0;
                this.m_RemoteNodeID = RobotRaconteurWeb.NodeID.Any;
                this.is_server = false;
                this.m_Connected = false;
                this.cancellationToken = new System.Threading.CancellationTokenSource();
                this.m_RequireTls = false;
                this.m_IsTls = false;
                this.request_receive_pause = false;
                this.sending = false;
                this.send_queue = new (System.Collections.Generic.List$1(System.Tuple$2(System.Threading.Tasks.TaskCompletionSource,RobotRaconteurWeb.Message))).ctor();
                this.request_send_pause = false;
                this.ReceiveTimeout = 2500;
                this.m_HeartbeatPeriod = 5000;
                this.streamop_queue = new (System.Collections.Generic.Queue$1(System.Threading.Tasks.TaskCompletionSource)).ctor();
                this.CheckStreamCapability_queue = new (System.Collections.Generic.Queue$1(System.Threading.Tasks.TaskCompletionSource)).ctor();
            },
            ctor: function (node, parent) {
                this.$initialize();
                this.node = node;
                this.parent = parent;
            }
        },
        methods: {
            ConnectStream: function (s, is_server, target_nodeid, target_nodename, starttls, requiretls, heartbeat_period, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    recvtask, 
                    rid, 
                    noop, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3], $step);
                                switch ($step) {
                                    case 0: {
                                        this.m_HeartbeatPeriod = heartbeat_period;
                                        this.m_RequireTls = requiretls;
                                        this.sendbuf = System.Array.init(100000, 0, System.Byte);
                                        this.mwrite = new System.IO.MemoryStream.$ctor1(this.sendbuf);

                                        this.recbuf = System.Array.init(100000, 0, System.Byte);
                                        this.mread = new System.IO.MemoryStream.$ctor1(this.recbuf);

                                        this.swriter = new RobotRaconteurWeb.ArrayBinaryWriter.ctor(this.mwrite, this.sendbuf, this.sendbuf.length);
                                        this.sreader = new RobotRaconteurWeb.ArrayBinaryReader.ctor(this.mread, this.recbuf, this.recbuf.length);

                                        this.is_server = is_server;
                                        this.target_nodename = target_nodename;
                                        this.target_nodeid = target_nodeid;

                                        if (this.target_nodename == null) {
                                            this.target_nodename = "";
                                        }
                                        if (RobotRaconteurWeb.NodeID.op_Equality(this.target_nodeid, null)) {
                                            this.target_nodeid = RobotRaconteurWeb.NodeID.Any;
                                        }

                                        this.basestream = s;

                                        this.tlastsend = System.DateTime.getUtcNow();
                                        this.tlastrec = System.DateTime.getUtcNow();
                                        this.tlastrec_mes = System.DateTime.getUtcNow();

                                        recvtask = this.DoReceive();

                                        if (!is_server) {
                                            $step = 1;
                                            continue;
                                        } 
                                        $step = 3;
                                        continue;
                                    }
                                    case 1: {
                                        if (starttls) {
                                            throw new System.NotImplementedException.$ctor1("TLS support not implemented");
                                        }

                                        $task1 = this.StreamOp("CreateConnection", { Item1: this.target_nodeid, Item2: this.target_nodename }, cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        rid = Bridge.cast($taskResult1, RobotRaconteurWeb.NodeID);
                                        this;
                                        {
                                            this.m_RemoteNodeID = rid;
                                        }
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        noop = this.DoHeartbeat();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            RequestReceivePause: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    request_pause_task1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        request_pause_task1 = new System.Threading.Tasks.TaskCompletionSource();
                                        this;
                                        {
                                            if (this.request_receive_pause) {
                                                if (this.request_receive_pause_task != null) {
                                                    request_pause_task1 = this.request_receive_pause_task;
                                                } else {
                                                    $tcs.setResult(null);
                                                    return;
                                                }
                                            } else {
                                                this.request_receive_pause = true;
                                                this.request_receive_pause_task = request_pause_task1;
                                            }
                                        }

                                        $task1 = request_pause_task1.task;
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ResumeReceivePause: function () {
                var pause_task1 = null;
                this;
                {
                    this.request_receive_pause = false;
                    pause_task1 = this.pause_receive_task;
                }
                if (pause_task1 != null) {
                    pause_task1.trySetResult(0);
                }

                return System.Threading.Tasks.Task.fromResult(0, System.Int32);

            },
            DoReceive: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $taskResult3, 
                    $task4, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    request_pause_task1, 
                    mempos, 
                    n, 
                    seed, 
                    meslength, 
                    newbuf, 
                    n1, 
                    mes, 
                    noop, 
                    $async_e, 
                    $async_e1, 
                    $async_e2, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([2,3,4,5,6,7,8,9,10,11,12,13,14,16,17,18,19,20,22,23,24,25], $step);
                                switch ($step) {


                                    case 2: {
                                        if ( this.Connected ) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 23;
                                        continue;
                                    }
                                    case 3: {
                                        request_pause_task1 = null;
                                        this;
                                        {
                                            if (this.request_receive_pause) {
                                                this.pause_receive_task = new System.Threading.Tasks.TaskCompletionSource();
                                                request_pause_task1 = this.request_receive_pause_task;
                                                this.request_receive_pause_task = null;
                                            }
                                        }

                                        if (this.pause_receive_task != null && request_pause_task1 != null) {
                                            $step = 4;
                                            continue;
                                        } 
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        request_pause_task1.trySetResult(0);
                                        $task1 = this.pause_receive_task.task;
                                        $step = 5;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        this;
                                        {
                                            this.pause_receive_task = null;
                                        }

                                        mempos = 0;
                                        
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        if ( mempos < 8 ) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 10;
                                        continue;
                                    }
                                    case 8: {
                                        $task2 = RobotRaconteurWeb.Extensions.Extensions.ConfigureAwait(System.Int32, RobotRaconteurWeb.Extensions.Extensions.ReadAsync(this.basestream, this.recbuf, mempos, ((8 - mempos) | 0)), false);
                                        $step = 9;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 9: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        n = $taskResult2;
                                        if (n === 0) {
                                            this.Close();
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        mempos = (mempos + n) | 0;

                                        $step = 7;
                                        continue;
                                    }
                                    case 10: {
                                        seed = System.Text.Encoding.ASCII.GetString$1(this.recbuf, 0, 4);
                                        if (!Bridge.referenceEquals(seed, "RRAC")) {
                                            throw new RobotRaconteurWeb.IOException("Invalid seed");
                                        }

                                        meslength = (System.BitConverter.toUInt32(this.recbuf, 4)) | 0;

                                        if (this.recbuf.length < meslength) {
                                            newbuf = System.Array.init(Bridge.Int.clip32(meslength * 1.2), 0, System.Byte);
                                            RobotRaconteurWeb.Extensions.Buffer.BlockCopy$2(this.recbuf, 0, newbuf, 0, 8);
                                            this.recbuf = newbuf;
                                            this.mread = new System.IO.MemoryStream.$ctor4(this.recbuf, 0, this.recbuf.length, true);
                                            this.sreader = new RobotRaconteurWeb.ArrayBinaryReader.ctor(this.mread, this.recbuf, this.recbuf.length);
                                        }

                                        
                                        $step = 11;
                                        continue;
                                    }
                                    case 11: {
                                        if ( mempos < meslength ) {
                                            $step = 12;
                                            continue;
                                        } 
                                        $step = 14;
                                        continue;
                                    }
                                    case 12: {
                                        $task3 = RobotRaconteurWeb.Extensions.Extensions.ConfigureAwait(System.Int32, RobotRaconteurWeb.Extensions.Extensions.ReadAsync(this.basestream, this.recbuf, mempos, ((meslength - mempos) | 0)), false);
                                        $step = 13;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 13: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        n1 = $taskResult3;
                                        if (n1 === 0) {
                                            this.Close();
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        mempos = (mempos + n1) | 0;

                                        $step = 11;
                                        continue;
                                    }
                                    case 14: {
                                        if (mempos === meslength) {
                                            $step = 15;
                                            continue;
                                        } 
                                        $step = 22;
                                        continue;
                                    }

                                    case 16: {
                                        this.mread.Position = System.Int64(0);
                                        this.sreader.Reset(meslength);
                                        mes = new RobotRaconteurWeb.Message();
                                        mes.Read(this.sreader);

                                        if ((mes.entries.Count === 1) && (mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamOp || mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamOpRet)) {
                                            $step = 17;
                                            continue;
                                        } 
                                        $step = 19;
                                        continue;
                                    }
                                    case 17: {
                                        $task4 = this.StreamOpMessageReceived(mes);
                                        $step = 18;
                                        if ($task4.isCompleted()) {
                                            continue;
                                        }
                                        $task4.continue($asyncBody);
                                        return;
                                    }
                                    case 18: {
                                        $task4.getAwaitedResult();
                                        $step = 2;
                                        continue;
                                    }
                                    case 19: {
                                        noop = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.ProcessMessage(mes));
                                        $step = 21;
                                        continue;
                                    }
                                    case 20: {
                                        this.Close();
                                        $async_e = null;
                                        $step = 21;
                                        continue;
                                    }

                                    case 22: {
                                        
                                        $step = 2;
                                        continue;
                                    }
                                    case 23: {
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        this.Close();
                                        $async_e = null;
                                        $step = 25;
                                        continue;
                                    }
                                    case 25: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 16 && $step <= 19 ) {
                                $step = 20;
                                $asyncBody();
                                return;
                            }
                            if ( $step >= 1 && $step <= 23 ) {
                                $step = 24;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ProcessMessage: function (mes) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $task3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    RemoteNodeID1, 
                    local_ep, 
                    remote_ep, 
                    bad_message, 
                    ret1, 
                    noop, 
                    ret11, 
                    noop1, 
                    ret, 
                    noop2, 
                    $e1, 
                    command, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4,5,6,7,8,9,10], $step);
                                switch ($step) {

                                    case 1: {
                                        this;
                                        {
                                            RemoteNodeID1 = this.m_RemoteNodeID;
                                            local_ep = this.m_LocalEndpoint;
                                            remote_ep = this.m_RemoteEndpoint;
                                        }

                                        if (this.RequireTls && !this.IsTls) {
                                            bad_message = true;
                                            if (mes.entries.Count === 1) {
                                                if (mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamOp && Bridge.referenceEquals(mes.entries.getItem(0).MemberName, "STARTTLS")) {
                                                    bad_message = false;
                                                }
                                            }
                                            if (bad_message) {
                                                this.Close();
                                                $tcs.setResult(null);
                                                return;
                                            }
                                        }

                                        if (this.IsTls) {
                                            if (!RemoteNodeID1.IsAnyNode) {

                                                if (RobotRaconteurWeb.NodeID.op_Inequality(RemoteNodeID1, mes.header.SenderNodeID)) {
                                                    ret1 = this.node.GenerateErrorReturnMessage(mes, RobotRaconteurWeb.MessageErrorType.NodeNotFound, "RobotRaconteurNode.NodeNotFound", "Invalid sender node");
                                                    if (ret1.entries.Count > 0) {
                                                        noop = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage(ret1, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                                                        $tcs.setResult(null);
                                                        return;
                                                    }
                                                }
                                            }

                                            if (local_ep !== 0 && remote_ep !== 0) {
                                                if (local_ep !== mes.header.ReceiverEndpoint || remote_ep !== mes.header.SenderEndpoint) {
                                                    ret11 = this.node.GenerateErrorReturnMessage(mes, RobotRaconteurWeb.MessageErrorType.InvalidEndpoint, "RobotRaconteurNode.InvalidEndpoint", "Invalid sender endpoint");
                                                    if (ret11.entries.Count > 0) {
                                                        noop1 = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage(ret11, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                                                        $tcs.setResult(null);
                                                        return;
                                                    }
                                                }
                                            }
                                        }




                                        $task1 = this.parent.RobotRaconteurWeb$AsyncStreamTransportParent$SpecialRequest(mes);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        if (ret != null) {
                                            try {
                                                if ((mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.ConnectionTest || mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.ConnectionTestRet)) {
                                                    if (mes.entries.getItem(0).Error !== RobotRaconteurWeb.MessageErrorType.None) {
                                                        this.Close();
                                                        $tcs.setResult(null);
                                                        return;
                                                    }
                                                }

                                                if ((ret.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.ConnectClientRet || ret.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.ReconnectClient) && ret.entries.getItem(0).Error === RobotRaconteurWeb.MessageErrorType.None) {
                                                    if (RobotRaconteurWeb.NodeID.op_Equality(ret.header.SenderNodeID, this.node.NodeID)) {

                                                        this.m_RemoteEndpoint = ret.header.ReceiverEndpoint;
                                                        this.m_LocalEndpoint = ret.header.SenderEndpoint;
                                                        this.parent.RobotRaconteurWeb$AsyncStreamTransportParent$AddTransportConnection(ret.header.SenderEndpoint, this);
                                                    } else {
                                                        this.Close();
                                                    }
                                                }

                                                if (mes.entries.getItem(0).EntryType !== RobotRaconteurWeb.MessageEntryType.ConnectionTest && mes.entries.getItem(0).EntryType !== RobotRaconteurWeb.MessageEntryType.ConnectionTestRet) {
                                                    this.tlastrec = System.DateTime.getUtcNow();
                                                }


                                                noop2 = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage(ret, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                                            } catch ($e1) {
                                                $e1 = System.Exception.create($e1);
                                                this.Close();
                                            }

                                            $tcs.setResult(null);
                                            return;
                                        }


                                        this.tlastrec = System.DateTime.getUtcNow();

                                        if ((mes.entries.Count === 1) && (mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamOp || mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamOpRet)) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 5;
                                        continue;
                                    }
                                    case 3: {
                                        $task2 = this.StreamOpMessageReceived(mes);
                                        $step = 4;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $task2.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    case 5: {
                                        if (mes.entries.Count === 1 && (mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamCheckCapability || mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamCheckCapabilityRet)) {
                                            this.CheckStreamCapability_MessageReceived(mes);
                                            $tcs.setResult(null);
                                            return;
                                        }

                                        if (mes.entries.Count === 1) {
                                            if (mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.ConnectClientRet && remote_ep === 0) {
                                                this;
                                                {
                                                    if (this.m_RemoteEndpoint === 0) {
                                                        this.m_RemoteEndpoint = mes.header.SenderEndpoint;
                                                    }
                                                    remote_ep = this.m_RemoteEndpoint;
                                                }
                                            }

                                        }

                                        if (this.IsTls) {
                                            if (local_ep === 0 || remote_ep === 0) {
                                                if (mes.entries.Count !== 1) {
                                                    this.Close();
                                                    $tcs.setResult(null);
                                                    return;
                                                }
                                            }

                                            command = mes.entries.getItem(0).EntryType;
                                            if ((command & 65535) > 500) {
                                                this.Close();
                                                $tcs.setResult(null);
                                                return;
                                            }
                                        }

                                        if (!((mes.entries.Count === 1) && ((mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.ConnectionTest) || (mes.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.ConnectionTestRet)))) {
                                            $step = 6;
                                            continue;
                                        } 
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        this.tlastrec_mes = System.DateTime.getUtcNow();
                                        $task3 = this.ProcessMessage2(mes);
                                        $step = 7;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 7: {
                                        $task3.getAwaitedResult();
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 9: {
                                        this.Close();
                                        $async_e = null;
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 8 ) {
                                $step = 9;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ProcessMessage2: function (m) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4,5], $step);
                                switch ($step) {

                                    case 1: {
                                        RobotRaconteurWeb.Transport.m_CurrentThreadTransportConnectionURL = this.GetConnectionURL();
                                        RobotRaconteurWeb.Transport.m_CurrentThreadTransport = this;
                                        $task1 = this.MessageReceived(m);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        this.Close();
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        RobotRaconteurWeb.Transport.m_CurrentThreadTransportConnectionURL = null;
                                        RobotRaconteurWeb.Transport.m_CurrentThreadTransport = null;

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            if ($step >= 1 && $step <= 3) {
                                $step = 4;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MessageReceived: function (m) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        $task1 = this.parent.RobotRaconteurWeb$AsyncStreamTransportParent$MessageReceived(m);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            RequestSendPause: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    request_pause_task1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3], $step);
                                switch ($step) {
                                    case 0: {
                                        request_pause_task1 = null;

                                        this;
                                        {
                                            if (!this.sending) {
                                                this.sending = true;

                                            } else {
                                                request_pause_task1 = new System.Threading.Tasks.TaskCompletionSource();
                                                if (this.request_send_pause) {
                                                    if (this.request_send_pause_task != null) {
                                                        request_pause_task1 = this.request_send_pause_task;
                                                    } else {
                                                        $tcs.setResult(null);
                                                        return;
                                                    }
                                                } else {
                                                    this.request_send_pause = true;
                                                    this.request_send_pause_task = request_pause_task1;

                                                    if (!this.sending) {
                                                        this.pause_send_task = new System.Threading.Tasks.TaskCompletionSource();

                                                    }

                                                }
                                            }
                                        }

                                        if (request_pause_task1 != null) {
                                            $step = 1;
                                            continue;
                                        } 
                                        $step = 3;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = request_pause_task1.task;
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ResumeSendPause: function () {
                var pause_task1 = null;
                this;
                {
                    this.request_send_pause = false;
                    pause_task1 = this.pause_send_task;

                    if (pause_task1 == null) {
                        if (this.send_queue.Count > 0) {
                            var t = this.send_queue.getItem(0);
                            this.send_queue.removeAt(0);
                            t.Item1.trySetResult(0);
                        } else {
                            this.sending = false;
                        }
                    }

                }

                if (pause_task1 != null) {
                    pause_task1.trySetResult(0);
                }



                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            SendMessage: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $taskResult3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    waiter, 
                    replaced, 
                    remove, 
                    h1, 
                    h2, 
                    mm1, 
                    mm2, 
                    c, 
                    request_pause_task1, 
                    meslength, 
                    e, 
                    $async_e, 
                    next_send, 
                    t, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13], $step);
                                switch ($step) {
                                    case 0: {
                                        waiter = null;

                                        this;
                                        {
                                            if (!this.m_Connected) {
                                                throw new RobotRaconteurWeb.ConnectionException("Transport connection closed");
                                            }
                                            if (this.sending) {
                                                waiter = new System.Threading.Tasks.TaskCompletionSource();
                                                RobotRaconteurWeb.Extensions.Extensions.AttachCancellationToken(System.Int32, waiter, cancel, new System.TimeoutException.$ctor1("Timed out"));

                                                replaced = false;

                                                for (var i = 0; i < this.send_queue.Count; ) {
                                                    remove = false;

                                                    h1 = m.header;
                                                    h2 = this.send_queue.getItem(i).Item2.header;
                                                    if (Bridge.referenceEquals(h1.ReceiverNodeName, h2.ReceiverNodeName) && Bridge.referenceEquals(h1.SenderNodeName, h2.SenderNodeName) && RobotRaconteurWeb.NodeID.op_Equality(h1.ReceiverNodeID, h2.ReceiverNodeID) && RobotRaconteurWeb.NodeID.op_Equality(h1.SenderNodeID, h2.SenderNodeID) && h1.ReceiverEndpoint === h2.ReceiverEndpoint && h1.SenderEndpoint === h2.SenderEndpoint) {
                                                        if (this.send_queue.getItem(i).Item2.entries.Count === m.entries.Count && m.entries.Count === 1) {
                                                            mm1 = this.send_queue.getItem(i).Item2.entries.getItem(0);
                                                            mm2 = m.entries.getItem(0);
                                                            if (mm1.EntryType === RobotRaconteurWeb.MessageEntryType.ConnectionTest && mm2.EntryType === RobotRaconteurWeb.MessageEntryType.ConnectionTest) {
                                                                $tcs.setResult(null);
                                                                return;
                                                            }

                                                            if (mm1.EntryType === RobotRaconteurWeb.MessageEntryType.WirePacket && mm2.EntryType === RobotRaconteurWeb.MessageEntryType.WirePacket) {
                                                                if (Bridge.referenceEquals(mm1.ServicePath, mm2.ServicePath) && Bridge.referenceEquals(mm1.MemberName, mm2.MemberName)) {
                                                                    remove = true;
                                                                }
                                                            }
                                                        }
                                                    }

                                                    if (remove) {

                                                        c = this.send_queue.getItem(i).Item1;

                                                        if (replaced) {
                                                            this.send_queue.removeAt(i);
                                                        } else {
                                                            this.send_queue.setItem(i, { Item1: waiter, Item2: m });
                                                            i = (i + 1) | 0;
                                                        }
                                                        c.trySetResult(1);
                                                    } else {
                                                        i = (i + 1) | 0;
                                                    }
                                                }


                                                if (!replaced) {
                                                    this.send_queue.add({ Item1: waiter, Item2: m });
                                                }
                                            } else {
                                                this.sending = true;
                                            }

                                        }

                                        if (waiter != null) {
                                            $step = 1;
                                            continue;
                                        } 
                                        $step = 5;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = waiter.task;
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        if ($taskResult1 !== 0) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    case 4: {
                                        ;
                                        if (!this.Connected) {
                                            throw new RobotRaconteurWeb.ConnectionException("Transport connection closed");
                                        }
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        request_pause_task1 = null;
                                        this;
                                        {
                                            if (this.request_send_pause) {

                                                this.pause_send_task = new System.Threading.Tasks.TaskCompletionSource();
                                                request_pause_task1 = this.request_send_pause_task;
                                                this.request_send_pause_task = null;
                                            }
                                        }

                                        if (this.pause_send_task != null && request_pause_task1 != null) {
                                            $step = 6;
                                            continue;
                                        } 
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        request_pause_task1.trySetResult(0);
                                        $task2 = this.pause_send_task.task;
                                        $step = 7;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 7: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        this;
                                        {
                                            this.pause_send_task = null;
                                        }

                                        
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        meslength = m.ComputeSize();

                                        if (System.Int64(meslength).gt(System.Int64(this.sendbuf.length))) {
                                            this.sendbuf = System.Array.init(Bridge.Int.clip32(meslength * 1.2), 0, System.Byte);
                                            this.mwrite = new System.IO.MemoryStream.$ctor4(this.sendbuf, 0, this.sendbuf.length, true);
                                            this.swriter = new RobotRaconteurWeb.ArrayBinaryWriter.ctor(this.mwrite, this.sendbuf, this.sendbuf.length);
                                        }

                                        this.mwrite.Position = System.Int64(0);
                                        this.swriter.Reset((meslength | 0));
                                        m.Write(this.swriter);

                                        this.tlastsend = System.DateTime.getUtcNow();
                                        $task3 = RobotRaconteurWeb.Extensions.Extensions.ConfigureAwait(System.Int32, RobotRaconteurWeb.Extensions.Extensions.WriteAsync(this.basestream, this.sendbuf, 0, System.Int64.clip32(this.mwrite.Position), cancel), false);
                                        $step = 10;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 10: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        $step = 12;
                                        continue;
                                    }
                                    case 11: {
                                        this.Close();
                                        throw e;
                                        $async_e = null;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        next_send = null;
                                        this;
                                        {
                                            if (this.send_queue.Count > 0) {
                                                t = this.send_queue.getItem(0);
                                                this.send_queue.removeAt(0);
                                                next_send = t.Item1;
                                            } else {
                                                this.sending = false;
                                            }
                                        }

                                        if (next_send != null) {
                                            next_send.trySetResult(0);
                                        }



                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 13;
                                        continue;
                                    }
                                    case 13: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 9 && $step <= 10 ) {
                                e = $async_e;
                                $step = 11;
                                $asyncBody();
                                return;
                            }
                            if ($step >= 9 && $step <= 11) {
                                $step = 12;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoHeartbeat: function () {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    mm, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([2,3,4,5,6,7,8,9,10], $step);
                                switch ($step) {


                                    case 2: {
                                        if ( this.m_Connected ) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 8;
                                        continue;
                                    }
                                    case 3: {
                                        $task1 = System.Threading.Tasks.Task.delay(500, this.cancellationToken.token);
                                        $step = 4;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $task1.getAwaitedResult();
                                        if ((System.DateTime.subdd(System.DateTime.getUtcNow(), this.tlastsend)).getTotalMilliseconds() > this.m_HeartbeatPeriod) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        m = new RobotRaconteurWeb.Message();
                                        m.header = new RobotRaconteurWeb.MessageHeader();
                                        m.header.SenderNodeID = this.node.NodeID;
                                        mm = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ConnectionTest, "");
                                        m.entries.add(mm);

                                        $task2 = this.SendMessage(m, Bridge.getDefaultValue(System.Threading.CancellationToken));
                                        $step = 6;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $task2.getAwaitedResult();
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        if ((System.DateTime.subdd(this.tlastsend, this.tlastrec)).getTotalMilliseconds() > this.ReceiveTimeout) {
                                            this.Close();
                                        } else if ((System.DateTime.subdd(System.DateTime.getUtcNow(), this.tlastrec_mes)).getTotalMilliseconds() > this.node.TransportInactivityTimeout) {
                                            this.Close();
                                        }

                                        $step = 2;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 9: {
                                        this.Close();
                                        $async_e = null;
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 8 ) {
                                $step = 9;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Close: function () {
                var $t, $t1, $t2, $t3, $t4;
                var r1 = null;
                var r2 = null;

                var q1 = new (System.Collections.Generic.List$1(System.Threading.Tasks.TaskCompletionSource)).ctor();
                var q2 = new (System.Collections.Generic.List$1(System.Threading.Tasks.TaskCompletionSource)).ctor();

                var h1 = null;
                var h2 = null;


                this;
                {
                    if (!this.m_Connected) {
                        return;
                    }
                    this.m_Connected = false;

                    try {
                        this.parent.RobotRaconteurWeb$AsyncStreamTransportParent$RemoveTransportConnection(this);
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }


                    $t = Bridge.getEnumerator(this.send_queue);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            t.Item1.trySetException(new RobotRaconteurWeb.ConnectionException("Transport connection closed"));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    this.send_queue.clear();

                    $t1 = Bridge.getEnumerator(this.streamop_queue);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            q1.add(t1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }

                    this.streamop_queue.Clear();

                    r1 = this.streamop_ret;
                    this.streamop_ret = null;

                    if (this.streamop_ret != null) {
                        this.streamop_ret.trySetException(new RobotRaconteurWeb.ConnectionException("Transport connection closed"));
                        this.streamop_ret = null;
                    }

                    $t2 = Bridge.getEnumerator(this.CheckStreamCapability_queue);
                    try {
                        while ($t2.moveNext()) {
                            var t2 = $t2.Current;
                            q2.add(t2);
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$Dispose();
                        }
                    }

                    this.CheckStreamCapability_queue.Clear();

                    r2 = this.CheckStreamCapability_ret;
                    this.CheckStreamCapability_ret = null;
                }

                if (r1 != null) {
                    r1.trySetException(new RobotRaconteurWeb.ConnectionException("Transport connection closed"));
                }
                if (r2 != null) {
                    r2.trySetException(new RobotRaconteurWeb.ConnectionException("Transport connection closed"));
                }

                $t3 = Bridge.getEnumerator(q1);
                try {
                    while ($t3.moveNext()) {
                        var q = $t3.Current;
                        q.trySetException(new RobotRaconteurWeb.ConnectionException("Transport connection closed"));
                    }
                } finally {
                    if (Bridge.is($t3, System.IDisposable)) {
                        $t3.System$IDisposable$Dispose();
                    }
                }
                $t4 = Bridge.getEnumerator(q2);
                try {
                    while ($t4.moveNext()) {
                        var q3 = $t4.Current;
                        q3.trySetException(new RobotRaconteurWeb.ConnectionException("Transport connection closed"));
                    }
                } finally {
                    if (Bridge.is($t4, System.IDisposable)) {
                        $t4.System$IDisposable$Dispose();
                    }
                }

                if (h1 != null) {
                    h1.trySetCanceled();
                }
                if (h2 != null) {
                    h2.trySetCanceled();
                }

                this.cancellationToken.cancel();

                try {
                    this.basestream.Close();
                } catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }

            },
            CheckConnection: function (endpoint) {
                if (endpoint !== this.LocalEndpoint) {
                    throw new RobotRaconteurWeb.InvalidEndpointException("Incorrect Transportendpoint");
                }

                if (!this.m_Connected) {
                    throw new RobotRaconteurWeb.ConnectionException("Transport not connected");
                }
            },
            PackStreamOpRequest: function (command, args) {
                var mm = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.StreamOp, command);

                if (Bridge.referenceEquals(command, "GetRemoteNodeID")) {

                } else {
                    throw new System.InvalidOperationException.$ctor1("Unknown StreamOp command");
                }

                return System.Threading.Tasks.Task.fromResult(mm, RobotRaconteurWeb.MessageEntry);

            },
            UnpackStreamOpResponse: function (response, header) {
                var command = response.MemberName;
                switch (command) {
                    case "GetRemoteNodeID": 
                        {
                            var n = header.SenderNodeID;
                            return System.Threading.Tasks.Task.fromResult(n, System.Object);
                        }
                    case "CreateConnection": 
                        {
                            this;
                            {

                                if (response.Error !== RobotRaconteurWeb.MessageErrorType.None && response.Error !== RobotRaconteurWeb.MessageErrorType.ProtocolError) {
                                    throw RobotRaconteurWeb.RobotRaconteurExceptionUtil.MessageEntryToException(response);
                                }

                                if (!this.m_RemoteNodeID.IsAnyNode) {
                                    if (RobotRaconteurWeb.NodeID.op_Inequality(header.SenderNodeID, this.m_RemoteNodeID)) {
                                        throw new RobotRaconteurWeb.ConnectionException("Invalid node connection");
                                    }
                                } else {
                                    if (!Bridge.referenceEquals(this.target_nodename, "")) {
                                        if (!Bridge.referenceEquals(this.target_nodename, header.SenderNodeName)) {
                                            throw new RobotRaconteurWeb.ConnectionException("Invalid node connection");
                                        }
                                    }

                                    if (!this.target_nodeid.IsAnyNode) {
                                        if (RobotRaconteurWeb.NodeID.op_Inequality(this.target_nodeid, header.SenderNodeID)) {
                                            throw new RobotRaconteurWeb.ConnectionException("Invalid node connection");
                                        }
                                    }
                                }
                            }

                            var n1 = header.SenderNodeID;
                            return System.Threading.Tasks.Task.fromResult(n1, System.Object);
                        }
                    default: 
                        throw new RobotRaconteurWeb.MemberNotFoundException("Unknown command");
                }

            },
            ProcessStreamOpRequest: function (request, header) {
                var command = request.MemberName;
                var mmret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.StreamOpRet, command);

                try {
                    switch (command) {
                        case "GetRemoteNodeID": 
                            break;
                        case "CreateConnection": 
                            {
                                this;
                                {
                                    if (header.ReceiverNodeID.IsAnyNode && Bridge.referenceEquals(header.ReceiverNodeName, "") || Bridge.referenceEquals(header.ReceiverNodeName, this.node.NodeName)) {
                                        this.m_RemoteNodeID = header.SenderNodeID;
                                        return System.Threading.Tasks.Task.fromResult(mmret, RobotRaconteurWeb.MessageEntry);
                                    }

                                    if (RobotRaconteurWeb.NodeID.op_Equality(header.ReceiverNodeID, this.node.NodeID)) {
                                        if (Bridge.referenceEquals(header.ReceiverNodeName, "") || Bridge.referenceEquals(header.ReceiverNodeName, this.node.NodeName)) {
                                            this.m_RemoteNodeID = header.SenderNodeID;
                                            return System.Threading.Tasks.Task.fromResult(mmret, RobotRaconteurWeb.MessageEntry);
                                        }
                                    }

                                }

                                mmret.Error = RobotRaconteurWeb.MessageErrorType.NodeNotFound;
                                mmret.AddElement$1("errorname", "RobotRaconteur.NodeNotFound");
                                mmret.AddElement$1("errorstring", "Node not found");

                                break;
                            }
                        default: 
                            throw new RobotRaconteurWeb.ProtocolException("Unknown StreamOp Command");
                    }

                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    mmret.Error = RobotRaconteurWeb.MessageErrorType.ProtocolError;
                    mmret.AddElement$1("errorname", "RobotRaconteur.ProtocolError");
                    mmret.AddElement$1("errorstring", "Invalid Stream Operation");
                }

                return System.Threading.Tasks.Task.fromResult(mmret, RobotRaconteurWeb.MessageEntry);

            },
            StreamOp: function (command, args, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $task4, 
                    $taskResult4, 
                    $task5, 
                    $taskResult5, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    t, 
                    m, 
                    a, 
                    mm, 
                    mm1, 
                    streamop_ret1, 
                    $async_e, 
                    t2, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,4,5,6,7,8,9,10,11,12,13], $step);
                                switch ($step) {
                                    case 0: {
                                        if (args === void 0) { args = null; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        t = null;
                                        this;
                                        {
                                            if (!this.m_Connected) {
                                                throw new RobotRaconteurWeb.ConnectionException("Transport connection closed");
                                            }

                                            if (this.streamop_ret == null) {
                                                this.streamop_ret = new System.Threading.Tasks.TaskCompletionSource();
                                                RobotRaconteurWeb.Extensions.Extensions.AttachCancellationToken(RobotRaconteurWeb.Message, this.streamop_ret, cancel, new System.TimeoutException.$ctor1("Timed out"));
                                            } else {
                                                t = new System.Threading.Tasks.TaskCompletionSource();
                                                RobotRaconteurWeb.Extensions.Extensions.AttachCancellationToken(System.Int32, t, cancel, new System.TimeoutException.$ctor1("Timed out"));
                                                this.streamop_queue.Enqueue(t);
                                            }
                                        }

                                        if (t != null) {
                                            $step = 1;
                                            continue;
                                        } 
                                        $step = 3;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = t.task;
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $step = 3;
                                        continue;
                                    }

                                    case 4: {
                                        m = new RobotRaconteurWeb.Message();
                                        m.header = new RobotRaconteurWeb.MessageHeader();
                                        m.header.ReceiverNodeName = "";
                                        m.header.SenderNodeName = this.node.NodeName;
                                        m.header.SenderNodeID = this.node.NodeID;
                                        m.header.ReceiverNodeID = this.RemoteNodeID;


                                        if (Bridge.referenceEquals(command, "CreateConnection")) {
                                            $step = 5;
                                            continue;
                                        } else  {
                                            $step = 6;
                                            continue;
                                        }
                                    }
                                    case 5: {
                                        a = args;
                                        m.header.ReceiverNodeID = a.Item1;
                                        m.header.ReceiverNodeName = a.Item2;
                                        mm = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.StreamOp, command);
                                        m.entries.add(mm);
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        $task2 = this.PackStreamOpRequest(command, args);
                                        $step = 7;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 7: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        mm1 = $taskResult2;
                                        m.entries.add(mm1);
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        $task3 = this.SendMessage(m, cancel);
                                        $step = 9;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 9: {
                                        $task3.getAwaitedResult();
                                        $task4 = RobotRaconteurWeb.Extensions.Extensions.AwaitWithTimeout$1(RobotRaconteurWeb.Message, this.streamop_ret.task, 10000);
                                        $step = 10;
                                        if ($task4.isCompleted()) {
                                            continue;
                                        }
                                        $task4.continue($asyncBody);
                                        return;
                                    }
                                    case 10: {
                                        $taskResult4 = $task4.getAwaitedResult();
                                        streamop_ret1 = $taskResult4;

                                        $task5 = this.UnpackStreamOpResponse(streamop_ret1.entries.getItem(0), streamop_ret1.header);
                                        $step = 11;
                                        if ($task5.isCompleted()) {
                                            continue;
                                        }
                                        $task5.continue($asyncBody);
                                        return;
                                    }
                                    case 11: {
                                        $taskResult5 = $task5.getAwaitedResult();
                                        $returnValue = $taskResult5;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        this;
                                        {
                                            if (this.streamop_queue.Count === 0) {
                                                this.streamop_ret = null;
                                            } else {
                                                this.streamop_ret = new System.Threading.Tasks.TaskCompletionSource();
                                                t2 = this.streamop_queue.Dequeue();
                                                t2.trySetResult(0);
                                            }
                                        }

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 13;
                                        continue;
                                    }
                                    case 13: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 4 && $step <= 11) {
                                $step = 12;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            StreamOpMessageReceived: function (m) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mm, 
                    $e1, 
                    command, 
                    mret, 
                    mmret, 
                    r, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7], $step);
                                switch ($step) {
                                    case 0: {
                                        try {
                                            mm = m.entries.getItem(0);
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        if (mm.EntryType === RobotRaconteurWeb.MessageEntryType.StreamOp) {
                                            $step = 1;
                                            continue;
                                        } else  {
                                            $step = 6;
                                            continue;
                                        }
                                    }
                                    case 1: {
                                        command = mm.MemberName;
                                        mret = new RobotRaconteurWeb.Message();
                                        mret.header = new RobotRaconteurWeb.MessageHeader();
                                        mret.header.SenderNodeName = this.node.NodeName;
                                        mret.header.ReceiverNodeName = m.header.SenderNodeName;
                                        mret.header.SenderNodeID = this.node.NodeID;
                                        mret.header.ReceiverNodeID = m.header.SenderNodeID;
                                        $task1 = this.ProcessStreamOpRequest(mm, m.header);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        mmret = $taskResult1;

                                        if (mmret != null) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 5;
                                        continue;
                                    }
                                    case 3: {
                                        mret.entries.add(mmret);
                                        $task2 = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage(mret, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                                        $step = 4;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $task2.getAwaitedResult();
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 7;
                                        continue;
                                    }
                                    case 6: {
                                        r = null;
                                        this;
                                        {
                                            if (this.streamop_ret == null) {
                                                $tcs.setResult(null);
                                                return;
                                            }
                                            r = this.streamop_ret;
                                        }
                                        r.trySetResult(m);
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CheckStreamCapability: function (name, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $task3, 
                    $taskResult3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    t, 
                    m, 
                    mm, 
                    mret, 
                    $async_e, 
                    t2, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,4,5,6,7,8], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        t = null;
                                        this;
                                        {
                                            if (!this.m_Connected) {
                                                throw new RobotRaconteurWeb.ConnectionException("Transport connection closed");
                                            }

                                            if (this.CheckStreamCapability_ret == null) {
                                                this.CheckStreamCapability_ret = new System.Threading.Tasks.TaskCompletionSource();
                                                RobotRaconteurWeb.Extensions.Extensions.AttachCancellationToken(RobotRaconteurWeb.Message, this.CheckStreamCapability_ret, cancel, new System.TimeoutException.$ctor1("Timed out"));
                                            } else {
                                                t = new System.Threading.Tasks.TaskCompletionSource();
                                                RobotRaconteurWeb.Extensions.Extensions.AttachCancellationToken(System.Int32, t, cancel, new System.TimeoutException.$ctor1("Timed out"));
                                                this.CheckStreamCapability_queue.Enqueue(t);
                                            }
                                        }

                                        if (t != null) {
                                            $step = 1;
                                            continue;
                                        } 
                                        $step = 3;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = t.task;
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $step = 3;
                                        continue;
                                    }

                                    case 4: {
                                        m = new RobotRaconteurWeb.Message();

                                        m.header.SenderNodeID = this.node.NodeID;

                                        m.header.ReceiverNodeID = this.RemoteNodeID;
                                        mm = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.StreamCheckCapability, name);
                                        m.entries.add(mm);

                                        $task2 = this.SendMessage(m, cancel);
                                        $step = 5;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $task2.getAwaitedResult();
                                        $task3 = RobotRaconteurWeb.Extensions.Extensions.AwaitWithTimeout$1(RobotRaconteurWeb.Message, this.CheckStreamCapability_ret.task, ((this.node.RequestTimeout) | 0));
                                        $step = 6;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        mret = $taskResult3;
                                        $returnValue = mret.entries.getItem(0).FindElement("return").CastData(System.UInt32);
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        this;
                                        {
                                            if (this.CheckStreamCapability_queue.Count === 0) {
                                                this.CheckStreamCapability_ret = null;
                                            } else {
                                                this.CheckStreamCapability_ret = new System.Threading.Tasks.TaskCompletionSource();
                                                t2 = this.CheckStreamCapability_queue.Dequeue();
                                                t2.trySetResult(0);
                                            }
                                        }

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 4 && $step <= 6) {
                                $step = 7;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CheckStreamCapability_MessageReceived: function (m) {
                try {
                    if (m.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamCheckCapability) {
                        var ret = new RobotRaconteurWeb.Message();
                        ret.header = new RobotRaconteurWeb.MessageHeader();
                        ret.header.SenderNodeID = this.node.NodeID;
                        ret.header.ReceiverNodeID = m.header.SenderNodeID;
                        var mret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.StreamCheckCapabilityRet, m.entries.getItem(0).MemberName);
                        mret.ServicePath = m.entries.getItem(0).ServicePath;
                        mret.AddElement$1("return", Bridge.box(this.StreamCapabilities(m.entries.getItem(0).MemberName), System.UInt32));
                        ret.entries.add(mret);
                        RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage(ret, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                    } else if (m.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.StreamCheckCapabilityRet) {
                        var r = null;
                        this;
                        {
                            if (this.CheckStreamCapability_ret == null) {
                                return;
                            }
                            r = this.CheckStreamCapability_ret;

                        }
                        r.trySetResult(m);
                    }
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
                ;
            },
            StreamCapabilities: function (name) {
                return 0;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.AuthenticationException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.AuthenticationError, "RobotRaconteur.AuthenticationError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.BrowserWebSocketTransport", {
        inherits: [RobotRaconteurWeb.Transport],
        fields: {
            m_Port: 0,
            transportopen: false,
            transportcancel: null,
            TransportConnections: null,
            DefaultReceiveTimeout: 0,
            DefaultConnectTimeout: 0,
            AcceptWebSockets: false,
            m_HeartbeatPeriod: 0,
            parent_adapter: null
        },
        props: {
            IsServer: {
                get: function () {
                    return true;
                }
            },
            IsClient: {
                get: function () {
                    return true;
                }
            },
            UrlSchemeString: {
                get: function () {
                    return System.Array.init(["tcp", "rr+tcp", "rr+ws", "rr+wss"], System.String);
                }
            },
            HeartbeatPeriod: {
                get: function () {
                    return this.m_HeartbeatPeriod;
                },
                set: function (value) {
                    if (value < 500) {
                        throw new System.InvalidOperationException.ctor();
                    }
                    this.m_HeartbeatPeriod = value;
                }
            }
        },
        ctors: {
            init: function () {
                this.transportopen = false;
                this.transportcancel = new System.Threading.CancellationTokenSource();
                this.TransportConnections = new (System.Collections.Generic.Dictionary$2(System.UInt32,RobotRaconteurWeb.AsyncStreamTransport)).ctor();
                this.m_HeartbeatPeriod = 5000;
            },
            ctor: function (node) {
                if (node === void 0) { node = null; }

                this.$initialize();
                RobotRaconteurWeb.Transport.ctor.call(this, node);
                this.DefaultReceiveTimeout = 15000;
                this.DefaultConnectTimeout = 2500;
                this.parent_adapter = new RobotRaconteurWeb.BrowserWebSocketTransport.AsyncStreamTransportParentImpl(this);

            }
        },
        methods: {
            CreateTransportConnection: function (url, e, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    p, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        p = new RobotRaconteurWeb.BrowserWebSocketClientTransport(this);
                                        p.ReceiveTimeout = this.DefaultReceiveTimeout;
                                        $task1 = p.ConnectTransport(url, e, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(p);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            CloseTransportConnection: function (e, cancel) {
                if (this.TransportConnections.containsKey(e.LocalEndpoint)) {
                    this.TransportConnections.getItem(e.LocalEndpoint).Close();
                }
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            CanConnectService: function (url) {
                var u = RobotRaconteurWeb.TransportUtil.ParseConnectionUrl(url);
                if (System.Array.contains(this.UrlSchemeString, u.scheme, System.String)) {
                    return true;
                }

                return false;
            },
            SendMessage: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        if (RobotRaconteurWeb.NodeID.op_Inequality(m.header.SenderNodeID, this.node.NodeID)) {
                                            throw new RobotRaconteurWeb.NodeNotFoundException("Invalid sender node");
                                        }
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = this.TransportConnections.getItem(m.header.SenderEndpoint).SendMessage(m, cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        throw new RobotRaconteurWeb.ConnectionException("Connection to remote node has been closed");
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                if (Bridge.is($async_e, RobotRaconteurWeb.KeyNotFoundException)) {
                                    $step = 3;
                                    $asyncBody();
                                    return;
                                }
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MessageReceived: function (m) {


                this.node.MessageReceived(m);

            },
            Close: function () {
                var $t, $t1;
                this.transportopen = false;
                this.transportcancel.cancel();

                var cc = ($t = RobotRaconteurWeb.AsyncStreamTransport, System.Linq.Enumerable.from(this.TransportConnections.Values, $t).ToArray($t));

                $t1 = Bridge.getEnumerator(cc);
                try {
                    while ($t1.moveNext()) {
                        var c = $t1.Current;
                        try {
                            c.Close();
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }


                try {

                    this.TransportConnections.clear();
                } catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }

                RobotRaconteurWeb.Transport.prototype.Close.call(this);

                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            CheckConnection: function (endpoint) {
                try {
                    this.TransportConnections.getItem(endpoint).CheckConnection(endpoint);
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    if (Bridge.is($e1, RobotRaconteurWeb.KeyNotFoundException)) {
                        throw new RobotRaconteurWeb.ConnectionException("Transport not connected");
                    } else {
                        throw $e1;
                    }
                }
            },
            RemoveTransportConnection: function (e) {
                this.TransportConnections.remove(e);

                this.FireTransportEventListener(RobotRaconteurWeb.TransportListenerEventType.TransportConnectionClosed, Bridge.box(e, System.UInt32));
            },
            TransportCapability: function (name) {
                return RobotRaconteurWeb.Transport.prototype.TransportCapability.call(this, name);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.BrowserWebSocketTransport.AsyncStreamTransportParentImpl", {
        inherits: [RobotRaconteurWeb.AsyncStreamTransportParent],
        $kind: "nested class",
        fields: {
            parent: null
        },
        alias: [
            "SpecialRequest", "RobotRaconteurWeb$AsyncStreamTransportParent$SpecialRequest",
            "MessageReceived", "RobotRaconteurWeb$AsyncStreamTransportParent$MessageReceived",
            "AddTransportConnection", "RobotRaconteurWeb$AsyncStreamTransportParent$AddTransportConnection",
            "RemoveTransportConnection", "RobotRaconteurWeb$AsyncStreamTransportParent$RemoveTransportConnection"
        ],
        ctors: {
            ctor: function (parent) {
                this.$initialize();
                this.parent = parent;
            }
        },
        methods: {
            SpecialRequest: function (m) {
                return this.parent.SpecialRequest(m);
            },
            MessageReceived: function (m) {
                this.parent.MessageReceived(m);
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            AddTransportConnection: function (endpoint, transport) {
                this.parent;
                {
                    this.parent.TransportConnections.add(endpoint, transport);
                }
            },
            RemoveTransportConnection: function (transport) {
                this.parent;
                {
                    this.parent.TransportConnections.remove(transport.LocalEndpoint);
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.BufferLimitViolationException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.BufferLimitViolation, "RobotRaconteur.BufferLimitViolation", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.CallbackClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.Callback$1(T)],
        fields: {
            function: null
        },
        props: {
            Function: {
                get: function () {
                    return this.function;
                },
                set: function (value) {
                    this.function = value;
                }
            }
        },
        ctors: {
            init: function () {
                this.function = Bridge.getDefaultValue(T);
            },
            ctor: function (name) {
                this.$initialize();
                RobotRaconteurWeb.Callback$1(T).ctor.call(this, name);
            }
        },
        methods: {
            GetClientFunction: function (e) {
                throw new System.InvalidOperationException.$ctor1("Invalid for client side of callback");
            },
            GetClientFunction$1: function (e) {
                throw new System.InvalidOperationException.$ctor1("Invalid for client side of callback");
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.CallbackDefinition", {
        inherits: [RobotRaconteurWeb.MemberDefinition],
        fields: {
            ReturnType: null,
            Parameters: null
        },
        ctors: {
            init: function () {
                this.Parameters = new (System.Collections.Generic.List$1(RobotRaconteurWeb.TypeDefinition)).ctor();
            },
            ctor: function (ServiceEntry) {
                this.$initialize();
                RobotRaconteurWeb.MemberDefinition.ctor.call(this, ServiceEntry);
            }
        },
        methods: {
            toString: function () {
                return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ToStringFormat2("callback", this, this.ReturnType, this.Parameters);
            },
            FromString: function (s) {
                RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat2(s, "callback", this, Bridge.ref(this, "ReturnType"), Bridge.ref(this, "Parameters"));
            },
            Reset: function () {
                RobotRaconteurWeb.MemberDefinition.prototype.Reset.call(this);
                this.Parameters.clear();
                RobotRaconteurWeb.TypeDefinition.op_Inequality(this.ReturnType, null) ? this.ReturnType.Reset() : null;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.CallbackServer$1", function (T) { return {
        inherits: [RobotRaconteurWeb.Callback$1(T)],
        fields: {
            skel: null
        },
        props: {
            Function: {
                get: function () {
                    throw new System.InvalidOperationException.$ctor1("Invalid for server side of callback");
                },
                set: function (value) {
                    throw new System.InvalidOperationException.$ctor1("Invalid for server side of callback");
                }
            }
        },
        ctors: {
            ctor: function (name, skel) {
                this.$initialize();
                RobotRaconteurWeb.Callback$1(T).ctor.call(this, name);
                this.skel = skel;
            }
        },
        methods: {
            GetClientFunction: function (e) {
                return this.GetClientFunction$1(e.LocalEndpoint);
            },
            GetClientFunction$1: function (e) {
                return Bridge.cast(Bridge.unbox(this.skel.GetCallbackFunction(e, this.m_MemberName), T), T);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.ClientContext", {
        inherits: [RobotRaconteurWeb.Endpoint],
        fields: {
            stubs: null,
            m_ServiceDef: null,
            UsePulledServiceTypes: false,
            DynamicServiceFactory_: null,
            rec_wait: null,
            ProcessRequest_checkconnection_current: null,
            rec_loc: null,
            request_number: 0,
            m_ServiceName: null,
            m_Connected: false,
            connecttransport: null,
            connecturl: null,
            Attributes: null,
            cancel_source: null,
            m_UserAuthenticated: false,
            m_AuthenticatedUsername: null,
            LastMessageSentTime: null,
            pulled_service_types: null,
            pulled_service_defs: null
        },
        events: {
            ClientServiceListener: null
        },
        props: {
            ServiceDef: {
                get: function () {
                    return this.m_ServiceDef;
                }
            },
            ServiceName: {
                get: function () {
                    return this.m_ServiceName;
                }
            },
            Connected: {
                get: function () {
                    return this.m_Connected;
                }
            },
            UserAuthenticated: {
                get: function () {
                    return this.m_UserAuthenticated;
                }
            },
            AuthenticatedUsername: {
                get: function () {
                    return this.m_AuthenticatedUsername;
                }
            }
        },
        ctors: {
            init: function () {
                this.LastMessageSentTime = System.DateTime.getDefaultValue();
                this.rec_wait = new (System.Collections.Generic.Dictionary$2(System.UInt32,System.Threading.Tasks.TaskCompletionSource)).ctor();
                this.rec_loc = { };
                this.request_number = 0;
                this.m_Connected = false;
                this.Attributes = new (System.Collections.Generic.Dictionary$2(System.String,System.Object)).ctor();
                this.cancel_source = new System.Threading.CancellationTokenSource();
                this.m_UserAuthenticated = false;
                this.LastMessageSentTime = System.DateTime.getUtcNow();
                this.pulled_service_types = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceFactory)).ctor();
                this.pulled_service_defs = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition)).ctor();
            },
            ctor: function (node) {
                this.$initialize();
                RobotRaconteurWeb.Endpoint.ctor.call(this, node);


                this.stubs = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceStub)).ctor();
                this.DynamicServiceFactory_ = node.DynamicServiceFactory;
                this.UsePulledServiceTypes = this.DynamicServiceFactory_ != null;
            },
            $ctor1: function (service_def, node) {
                this.$initialize();
                RobotRaconteurWeb.Endpoint.ctor.call(this, node);
                this.m_ServiceDef = service_def;

                this.stubs = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ServiceStub)).ctor();
                this.DynamicServiceFactory_ = node.DynamicServiceFactory;
                this.UsePulledServiceTypes = this.DynamicServiceFactory_ != null;
            }
        },
        methods: {
            FindObjRef: function (path, objecttype, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    e, 
                    ret, 
                    objecttype2, 
                    objectdef, 
                    pull, 
                    d, 
                    $t, 
                    d2, 
                    f, 
                    $t1, 
                    f2, 
                    stub, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,6], $step);
                                switch ($step) {
                                    case 0: {
                                        this.stubs;
                                        {
                                            if (System.Linq.Enumerable.from(this.stubs.Keys, System.String).contains(path)) {
                                                $tcs.setResult(this.stubs.getItem(path));
                                                return;

                                            }
                                        }

                                        e = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ObjectTypeName, "");
                                        e.ServicePath = path;
                                        $task1 = this.ProcessRequest(e, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        objecttype2 = ret.FindElement("objecttype").CastData(System.String);

                                        if (Bridge.referenceEquals(objecttype2, "")) {
                                            throw new RobotRaconteurWeb.ObjectNotFoundException("Object type was not returned.");
                                        }

                                        objectdef = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(objecttype2).Item1;

                                        if (this.UsePulledServiceTypes) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 6;
                                        continue;
                                    }
                                    case 2: {
                                        pull = false;
                                        this.pulled_service_types;
                                        {
                                            if (!this.pulled_service_types.containsKey(objectdef)) {
                                                pull = true;
                                            }

                                        }
                                        if (pull) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 5;
                                        continue;
                                    }
                                    case 3: {
                                        $task2 = this.PullServiceDefinitionAndImports(null, cancel);
                                        $step = 4;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        d = $taskResult2;

                                        this.pulled_service_defs;
                                        {
                                            $t = Bridge.getEnumerator(d);
                                            try {
                                                while ($t.moveNext()) {
                                                    d2 = $t.Current;
                                                    if (!this.pulled_service_defs.containsKey(d2.Name)) {
                                                        this.pulled_service_defs.add(d2.Name, d2);
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t, System.IDisposable)) {
                                                    $t.System$IDisposable$Dispose();
                                                }
                                            }
                                        }

                                        f = this.DynamicServiceFactory_.RobotRaconteurWeb$DynamicServiceFactory$CreateServiceFactories(System.Linq.Enumerable.from(d, RobotRaconteurWeb.ServiceDefinition).select(function (x) {
                                            return x.toString();
                                        }).ToArray(System.String), this);
                                        this.pulled_service_defs;
                                        {
                                            $t1 = Bridge.getEnumerator(f);
                                            try {
                                                while ($t1.moveNext()) {
                                                    f2 = $t1.Current;
                                                    if (!this.pulled_service_types.containsKey(f2.GetServiceName())) {
                                                        this.pulled_service_types.add(f2.GetServiceName(), f2);
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$Dispose();
                                                }
                                            }
                                        }
                                        $step = 5;
                                        continue;
                                    }

                                    case 6: {
                                        if (objecttype != null) {
                                            this.VerifyObjectImplements(objecttype2, objecttype);
                                            objecttype2 = objecttype;
                                        }

                                        stub = this.ServiceDef.CreateStub(objecttype2, path, this);

                                        this.stubs;
                                        {
                                            if (!System.Linq.Enumerable.from(this.stubs.Keys, System.String).contains(path)) {
                                                this.stubs.setItem(path, stub);
                                                $tcs.setResult(stub);
                                                return;
                                            } else {
                                                $tcs.setResult(this.stubs.getItem(path));
                                                return;
                                            }
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ProcessRequest: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    request_start, 
                    request_timeout, 
                    rec_source, 
                    t_id, 
                    rec_message, 
                    r, 
                    $async_e, 
                    e, 
                    e2, 
                    e3, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        request_start = System.DateTime.getUtcNow();
                                        request_timeout = this.node.RequestTimeout;

                                        rec_source = new System.Threading.Tasks.TaskCompletionSource();
                                        this.rec_wait;
                                        {
                                            this.request_number = (this.request_number + 1) >>> 0;
                                            m.RequestID = this.request_number;
                                            t_id = this.request_number;
                                            this.rec_wait.add(t_id, rec_source);
                                            if (this.ProcessRequest_checkconnection_current == null) {
                                                this.ProcessRequest_checkconnection_current = this.ProcessRequest_checkconnection();
                                            }
                                        }

                                        rec_message = null;
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        cancel.register(function () {
                                            rec_source.trySetCanceled();
                                        });


                                        r = Bridge.fn.bind(this, function () {
                                            var $step = 0,
                                                $task1, 
                                                $task2, 
                                                $taskResult2, 
                                                $jumpFromFinally, 
                                                $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                                                $returnValue, 
                                                $async_e, 
                                                $asyncBody = Bridge.fn.bind(this, function () {
                                                    try {
                                                        for (;;) {
                                                            $step = System.Array.min([0,1,2], $step);
                                                            switch ($step) {
                                                                case 0: {
                                                                    $task1 = this.SendMessage$1(m, cancel);
                                                                    $step = 1;
                                                                    if ($task1.isCompleted()) {
                                                                        continue;
                                                                    }
                                                                    $task1.continue($asyncBody);
                                                                    return;
                                                                }
                                                                case 1: {
                                                                    $task1.getAwaitedResult();
                                                                    $task2 = rec_source.task;
                                                                    $step = 2;
                                                                    if ($task2.isCompleted()) {
                                                                        continue;
                                                                    }
                                                                    $task2.continue($asyncBody);
                                                                    return;
                                                                }
                                                                case 2: {
                                                                    $taskResult2 = $task2.getAwaitedResult();
                                                                    rec_message = $taskResult2;
                                                                    $tcs.setResult(null);
                                                                    return;
                                                                }
                                                                default: {
                                                                    $tcs.setResult(null);
                                                                    return;
                                                                }
                                                            }
                                                        }
                                                    } catch($async_e1) {
                                                        $async_e = System.Exception.create($async_e1);
                                                        $tcs.setException($async_e);
                                                    }
                                                }, arguments);

                                            $asyncBody();
                                            return $tcs.task;
                                        });

                                        $task1 = RobotRaconteurWeb.Extensions.Extensions.AwaitWithTimeout(r(), ((this.node.RequestTimeout) | 0));
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        this.rec_wait;
                                        {
                                            this.rec_wait.remove(t_id);
                                        }


                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        if (rec_message.RequestID !== t_id) {
                                            throw new System.Exception("This should be impossible!");
                                        }

                                        if (rec_message.Error !== RobotRaconteurWeb.MessageErrorType.None) {
                                            e = RobotRaconteurWeb.RobotRaconteurExceptionUtil.MessageEntryToException(rec_message);
                                            e2 = Bridge.as(e, RobotRaconteurWeb.RobotRaconteurRemoteException);
                                            if (e2 != null) {
                                                e3 = this.ServiceDef.DownCastException(e2);
                                                if (e3 != null) {
                                                    e = e3;
                                                }
                                            }
                                            throw e;
                                        }

                                        $tcs.setResult(rec_message);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 1 && $step <= 2) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ProcessRequest_checkconnection: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $e1, 
                    rec_wait2, 
                    $t, 
                    r, 
                    $t1, 
                    t, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4,5,6,7], $step);
                                switch ($step) {

                                    case 1: {
                                        if ( true ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        this.rec_wait;
                                        {
                                            if (this.rec_wait.Count < 0) {
                                                this.ProcessRequest_checkconnection_current = null;
                                                $tcs.setResult(null);
                                                return;
                                            }
                                        }

                                        try {
                                            this.node.CheckConnection(this.LocalEndpoint);
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                            rec_wait2 = new (System.Collections.Generic.List$1(System.Threading.Tasks.TaskCompletionSource)).ctor();
                                            this.rec_wait;
                                            {
                                                $t = Bridge.getEnumerator(this.rec_wait.Values);
                                                try {
                                                    while ($t.moveNext()) {
                                                        r = $t.Current;
                                                        rec_wait2.add(r);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t, System.IDisposable)) {
                                                        $t.System$IDisposable$Dispose();
                                                    }
                                                }
                                            }

                                            $t1 = Bridge.getEnumerator(rec_wait2);
                                            try {
                                                while ($t1.moveNext()) {
                                                    t = $t1.Current;
                                                    t.trySetException(new RobotRaconteurWeb.ConnectionException("Connection closed"));
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$Dispose();
                                                }
                                            }
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        $task1 = System.Threading.Tasks.Task.delay(500);
                                        $step = 4;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $task1.getAwaitedResult();
                                        $step = 6;
                                        continue;
                                    }
                                    case 5: {
                                        $async_e = null;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 3 && $step <= 4 ) {
                                $step = 5;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SendMessage$1: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mm, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (!this.Connected) {
                                            throw new RobotRaconteurWeb.ConnectionException("Client has been disconnected");
                                        }

                                        mm = new RobotRaconteurWeb.Message();
                                        mm.header = new RobotRaconteurWeb.MessageHeader();

                                        mm.entries.add(m);

                                        this.LastMessageSentTime = System.DateTime.getUtcNow();

                                        $task1 = this.SendMessage(mm, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MessageReceived: function (m) {
                var $t;
                this.LastMessageReceivedTime = System.DateTime.getUtcNow();
                if (m.entries.Count >= 1) {
                    if (m.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.ConnectClientRet) {
                        this.m_RemoteEndpoint = m.header.SenderEndpoint;
                        this.m_RemoteNodeID = m.header.SenderNodeID;
                        this.m_RemoteNodeName = m.header.SenderNodeName;
                    }

                    if (m.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.EndpointCheckCapability) {
                        this.CheckEndpointCapabilityMessage(m);
                        return;
                    }
                }

                $t = Bridge.getEnumerator(m.entries);
                try {
                    while ($t.moveNext()) {
                        var mm = $t.Current;
                        if (mm.Error === RobotRaconteurWeb.MessageErrorType.InvalidEndpoint) {
                            RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.Close());
                            return;
                        }
                        this.MessageEntryReceived(mm);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
            },
            MessageEntryReceived: function (m) {
                var $t;
                {
                    if (m.EntryType === RobotRaconteurWeb.MessageEntryType.EventReq) {
                        var a = null;

                        this.stubs;
                        if (System.Linq.Enumerable.from(this.stubs.Keys, System.String).contains(m.ServicePath)) {
                            var stub;
                            stub = this.stubs.getItem(m.ServicePath);
                            a = (function () {
                                stub.DispatchEvent(m);
                            });

                        }
                        if (!Bridge.staticEquals(a, null)) {
                            RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(System.Threading.Tasks.Task.run(a));
                        }
                    } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PropertyGetRes || m.EntryType === RobotRaconteurWeb.MessageEntryType.PropertySetRes || m.EntryType === RobotRaconteurWeb.MessageEntryType.FunctionCallRes || m.EntryType === RobotRaconteurWeb.MessageEntryType.ObjectTypeNameRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.ConnectClientRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.DisconnectClientRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.GetServiceDescRet || (m.EntryType >= RobotRaconteurWeb.MessageEntryType.PipeConnectReq && m.EntryType <= RobotRaconteurWeb.MessageEntryType.PipeDisconnectRet) || m.EntryType === RobotRaconteurWeb.MessageEntryType.ClientSessionOpRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.WireConnectRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.WireDisconnectRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.MemoryReadRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.MemoryWriteRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.MemoryGetParamRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePeekInValueRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePeekOutValueRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePokeOutValueRet || m.EntryType === RobotRaconteurWeb.MessageEntryType.GeneratorNextRes) {
                        var r = null;
                        this.rec_wait;
                        {
                            var t_id = m.RequestID;
                            if (this.rec_wait.containsKey(t_id)) {
                                r = this.rec_wait.getItem(t_id);
                            }
                        }

                        if (r != null) {
                            r.trySetResult(m);
                        }


                    } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.ServiceClosed) {
                        RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.Close());
                    } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.ClientKeepAliveRet) {
                    } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PipePacket || m.EntryType === RobotRaconteurWeb.MessageEntryType.PipeClosed || m.EntryType === RobotRaconteurWeb.MessageEntryType.PipePacketRet) {
                        var a1 = null;
                        this.stubs;
                        if (System.Linq.Enumerable.from(this.stubs.Keys, System.String).contains(m.ServicePath)) {
                            var stub1;
                            stub1 = this.stubs.getItem(m.ServicePath);
                            a1 = (function () {
                                stub1.DispatchPipeMessage(m);
                            });

                        }
                        if (!Bridge.staticEquals(a1, null)) {
                            RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(System.Threading.Tasks.Task.run(a1));
                        }
                    } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePacket || m.EntryType === RobotRaconteurWeb.MessageEntryType.WireClosed) {
                        var a2 = null;
                        this.stubs;
                        if (System.Linq.Enumerable.from(this.stubs.Keys, System.String).contains(m.ServicePath)) {
                            var stub2;
                            stub2 = this.stubs.getItem(m.ServicePath);
                            a2 = function () {
                                stub2.DispatchWireMessage(m);
                            };

                        }

                        if (!Bridge.staticEquals(a2, null)) {
                            RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(System.Threading.Tasks.Task.run(a2));
                        }
                    } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.ServicePathReleasedReq) {
                        var path = m.ServicePath;
                        var objkeys = System.Linq.Enumerable.from(this.stubs.Keys, System.String).where(function (x) {
                                return (x.length >= path.length) && (Bridge.referenceEquals(x.substr(0, path.length), path));
                            }).ToArray(System.String);

                        $t = Bridge.getEnumerator(objkeys);
                        try {
                            while ($t.moveNext()) {
                                var path1 = $t.Current;
                                try {
                                    this.stubs.getItem(path1).RRReleaseContext();

                                    this.stubs.remove(path1);
                                } catch ($e1) {
                                    $e1 = System.Exception.create($e1);
                                }

                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$Dispose();
                            }
                        }

                    } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.CallbackCallReq) {
                        RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.ProcessCallbackCall(m));
                    } else {
                        throw new RobotRaconteurWeb.ServiceException("Unknown service command");
                    }

                }
            },
            PackStructure: function (s) {
                return this.ServiceDef.PackStructure(s);
            },
            UnpackStructure: function (T, l) {
                return this.ServiceDef.UnpackStructure(T, l);
            },
            PackMapType: function (K, T, o) {
                return this.ServiceDef.PackMapType(K, T, o);
            },
            PackListType: function (T, o) {
                return this.ServiceDef.PackListType(T, o);
            },
            PackMultiDimArray: function (multiDimArray) {
                return this.ServiceDef.PackMultiDimArray(multiDimArray);
            },
            PackVarType: function (p) {
                return this.ServiceDef.PackVarType(p);
            },
            UnpackMapType: function (K, T, o) {
                return this.ServiceDef.UnpackMapType(K, T, o);
            },
            UnpackListType: function (T, o) {
                return this.ServiceDef.UnpackListType(T, o);
            },
            UnpackMultiDimArray: function (o) {
                return this.ServiceDef.UnpackMultiDimArray(o);
            },
            UnpackVarType: function (o) {
                return this.ServiceDef.UnpackVarType(o);
            },
            ConnectService: function (c, url, username, credentials, objecttype, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $taskResult3, 
                    $task4, 
                    $taskResult4, 
                    $task5, 
                    $taskResult5, 
                    $task6, 
                    $taskResult6, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    u, 
                    d, 
                    $t, 
                    d2, 
                    f, 
                    $t1, 
                    f2, 
                    e, 
                    ret, 
                    type, 
                    e2, 
                    stub, 
                    noop, 
                    e1, 
                    $e1, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13], $step);
                                switch ($step) {
                                    case 0: {
                                        if (username === void 0) { username = null; }
                                        if (credentials === void 0) { credentials = null; }
                                        if (objecttype === void 0) { objecttype = null; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }

                                        this.connecturl = url;
                                        this.connecttransport = c;
                                        u = RobotRaconteurWeb.TransportUtil.ParseConnectionUrl(url);

                                        this.m_RemoteNodeID = u.nodeid;

                                        this.m_RemoteNodeName = u.nodename;
                                        this.m_ServiceName = u.service;

                                        /* try
                                        {*/
                                        if (!c.CanConnectService(url)) {
                                            throw new RobotRaconteurWeb.ServiceException("Invalid transport");
                                        }

                                        $task1 = c.CreateTransportConnection(url, this, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        this.TransportConnection = $taskResult1;
                                        this.m_Connected = true;
                                        
                                        $step = 2;
                                        continue;
                                    }
                                    case 2: {
                                        this.transport = c.TransportID;
                                        this.m_RemoteEndpoint = 0;

                                        $task2 = this.PullServiceDefinitionAndImports(null, cancel);
                                        $step = 3;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        d = $taskResult2;

                                        this.pulled_service_defs;
                                        {
                                            $t = Bridge.getEnumerator(d);
                                            try {
                                                while ($t.moveNext()) {
                                                    d2 = $t.Current;
                                                    if (!this.pulled_service_defs.containsKey(d2.Name)) {
                                                        this.pulled_service_defs.add(d2.Name, d2);
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t, System.IDisposable)) {
                                                    $t.System$IDisposable$Dispose();
                                                }
                                            }
                                        }

                                        if (!this.UsePulledServiceTypes) {
                                            this.m_ServiceDef = this.node.GetServiceType(d[System.Array.index(0, d)].Name);
                                        } else {
                                            f = this.DynamicServiceFactory_.RobotRaconteurWeb$DynamicServiceFactory$CreateServiceFactories(System.Linq.Enumerable.from(d, RobotRaconteurWeb.ServiceDefinition).select(function (x) {
                                                return x.toString();
                                            }).ToArray(System.String), this);
                                            this.pulled_service_defs;
                                            {
                                                $t1 = Bridge.getEnumerator(f);
                                                try {
                                                    while ($t1.moveNext()) {
                                                        f2 = $t1.Current;
                                                        if (!this.pulled_service_types.containsKey(f2.GetServiceName())) {
                                                            this.pulled_service_types.add(f2.GetServiceName(), f2);
                                                        }
                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$Dispose();
                                                    }
                                                }
                                            }
                                            this.m_ServiceDef = this.GetPulledServiceType(d[System.Array.index(0, d)].Name);
                                        }

                                        e = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ObjectTypeName, "");
                                        e.ServicePath = this.ServiceName;

                                        $task3 = this.ProcessRequest(e, cancel);
                                        $step = 4;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        ret = $taskResult3;
                                        if (ret.Error !== RobotRaconteurWeb.MessageErrorType.None) {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                        type = ret.FindElement("objecttype").CastData(System.String);
                                        if (Bridge.referenceEquals(type, "")) {
                                            $tcs.setResult(new RobotRaconteurWeb.ObjectNotFoundException("Could not find object type"));
                                            return;
                                        }
                                        ;


                                        if (objecttype != null) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        this.VerifyObjectImplements(type, objecttype);
                                        type = objecttype;
                                        $task4 = this.PullServiceDefinitionAndImports(RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(type).Item2, cancel);
                                        $step = 6;
                                        if ($task4.isCompleted()) {
                                            continue;
                                        }
                                        $task4.continue($asyncBody);
                                        return;
                                    }
                                    case 6: {
                                        $taskResult4 = $task4.getAwaitedResult();
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        e2 = new RobotRaconteurWeb.MessageEntry.ctor();
                                        e2.ServicePath = this.ServiceName;
                                        e2.MemberName = "registerclient";
                                        e2.EntryType = RobotRaconteurWeb.MessageEntryType.ConnectClient;
                                        $task5 = this.ProcessRequest(e2, cancel);
                                        $step = 8;
                                        if ($task5.isCompleted()) {
                                            continue;
                                        }
                                        $task5.continue($asyncBody);
                                        return;
                                    }
                                    case 8: {
                                        $taskResult5 = $task5.getAwaitedResult();
                                        if (username != null) {
                                            $step = 9;
                                            continue;
                                        } 
                                        $step = 11;
                                        continue;
                                    }
                                    case 9: {
                                        $task6 = this.AuthenticateUser(username, credentials, cancel);
                                        $step = 10;
                                        if ($task6.isCompleted()) {
                                            continue;
                                        }
                                        $task6.continue($asyncBody);
                                        return;
                                    }
                                    case 10: {
                                        $taskResult6 = $task6.getAwaitedResult();
                                        $step = 11;
                                        continue;
                                    }
                                    case 11: {
                                        stub = this.ServiceDef.CreateStub(type, this.ServiceName, this);
                                        this.stubs.add(this.ServiceName, stub);
                                        noop = RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(RobotRaconteurWeb.PeriodicTask.Run$1(Bridge.fn.cacheBind(this, this.PeriodicCleanupTask), System.TimeSpan.fromSeconds(5), this.cancel_source.token));

                                        $tcs.setResult(stub);
                                        return;
                                    }
                                    case 12: {
                                        try {
                                            this.TransportConnection.RobotRaconteurWeb$ITransportConnection$Close();
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                        }

                                        this.m_Connected = false;
                                        throw e1;
                                        $async_e = null;
                                        $step = 13;
                                        continue;
                                    }
                                    case 13: {
                                        /* }
                                        catch { 
                                           return null; 
                                        }*/
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 2 && $step <= 11 ) {
                                e1 = $async_e;
                                $step = 12;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Close: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    e, 
                    $async_e, 
                    $e1, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        this.cancel_source.cancel();

                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        e = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.DisconnectClient, "");
                                        e.AddElement$1("servicename", this.ServiceName);
                                        $task1 = this.ProcessRequest(e, cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        this.stubs.clear();
                                        this.m_Connected = false;
                                        this.node.DeleteEndpoint(this);

                                        try {
                                            if (!Bridge.staticEquals(this.ClientServiceListener, null)) {
                                                this.ClientServiceListener(this, RobotRaconteurWeb.ClientServiceListenerEventType.ClientClosed, null);
                                            }
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            VerifyObjectImplements: function (objecttype, implementstype) {
                if (!this.VerifyObjectImplements2(objecttype, implementstype)) {
                    throw new RobotRaconteurWeb.ServiceException("Invalid object type");
                }
                return true;
            },
            VerifyObjectImplements2: function (objecttype, implementstype) {
                var $t;
                this;
                {
                    if (Bridge.referenceEquals(objecttype, implementstype)) {
                        return true;
                    }
                    var s1 = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(objecttype);
                    if (!this.pulled_service_defs.containsKey(s1.Item1)) {
                        return false;
                    }

                    if (!this.pulled_service_defs.containsKey(s1.Item1)) {
                        return false;
                    }

                    var d = this.pulled_service_defs.getItem(s1.Item1);

                    var o = System.Linq.Enumerable.from(d.Objects, System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition)).firstOrDefault(function (x) {
                            return Bridge.referenceEquals(x.value.Name, s1.Item2);
                        }, new (System.Collections.Generic.KeyValuePair$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition))()).value;
                    if (o == null) {
                        return false;
                    }
                    $t = Bridge.getEnumerator(o.Implements);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            var deftype = d.Name;
                            var objtype = "";
                            if (System.Linq.Enumerable.from(e, System.Char).contains(46)) {
                                objtype = e;
                            } else {
                                var s2 = RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(e);
                                deftype = s2.Item1;
                                objtype = s2.Item2;
                            }

                            if (Bridge.referenceEquals(((deftype || "") + "." + (objtype || "")), implementstype)) {
                                return true;
                            }
                            if (this.VerifyObjectImplements2((deftype || "") + "." + (objtype || ""), implementstype)) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    return false;
                }

            },
            SendPipeMessage: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        $task1 = this.SendMessage$1(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SendWireMessage: function (m, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        $task1 = this.SendMessage$1(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            AuthenticateUser: function (username, credentials, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    mcredentials, 
                    ret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientSessionOpReq, "AuthenticateUser");
                                        m.ServicePath = this.ServiceName;
                                        m.AddElement$1("username", username);
                                        if (Bridge.is(credentials, System.Collections.Generic.Dictionary$2(System.String,System.Object))) {
                                            m.AddElement$1("credentials", this.PackMapType(System.String, System.Object, credentials));
                                        } else if (Bridge.is(credentials, RobotRaconteurWeb.MessageElement)) {
                                            mcredentials = Bridge.cast(credentials, RobotRaconteurWeb.MessageElement);
                                            mcredentials.ElementName = "credentials";
                                            m.AddElement(mcredentials);
                                        }
                                        $task1 = this.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        this.m_AuthenticatedUsername = username;
                                        this.m_UserAuthenticated = true;
                                        $tcs.setResult(ret.FindElement("return").CastData(System.String));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            LogoutUser: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (!this.UserAuthenticated) {
                                            throw new RobotRaconteurWeb.AuthenticationException("User is not authenticated");
                                        }

                                        this.m_UserAuthenticated = false;
                                        this.m_AuthenticatedUsername = null;

                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientSessionOpReq, "LogoutUser");
                                        m.ServicePath = this.ServiceName;
                                        m.AddElement$1("username", this.AuthenticatedUsername);
                                        $task1 = this.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        $tcs.setResult(ret.FindElement("return").CastData(System.String));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            RequestObjectLock: function (obj, flags, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    s, 
                    command, 
                    m, 
                    ret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (!(Bridge.is(obj, RobotRaconteurWeb.ServiceStub))) {
                                            throw new System.InvalidOperationException.$ctor1("Can only lock object opened through Robot Raconteur");
                                        }
                                        s = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);

                                        command = "";
                                        if (flags === RobotRaconteurWeb.RobotRaconteurObjectLockFlags.USER_LOCK) {
                                            command = "RequestObjectLock";
                                        } else if (flags === RobotRaconteurWeb.RobotRaconteurObjectLockFlags.CLIENT_LOCK) {
                                            command = "RequestClientObjectLock";
                                        } else {
                                            throw new System.InvalidOperationException.$ctor1("Unknown flags");
                                        }

                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientSessionOpReq, command);
                                        m.ServicePath = s.RRServicePath;

                                        $task1 = this.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        $tcs.setResult(ret.FindElement("return").CastData(System.String));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ReleaseObjectLock: function (obj, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    s, 
                    m, 
                    ret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (!(Bridge.is(obj, RobotRaconteurWeb.ServiceStub))) {
                                            throw new System.InvalidOperationException.$ctor1("Can only unlock object opened through Robot Raconteur");
                                        }
                                        s = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);

                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientSessionOpReq, "ReleaseObjectLock");
                                        m.ServicePath = s.RRServicePath;

                                        $task1 = this.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        $tcs.setResult(ret.FindElement("return").CastData(System.String));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MonitorEnter: function (obj, timeout, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $task3, 
                    $taskResult3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    iserror, 
                    lock_, 
                    s, 
                    keep_trying, 
                    m, 
                    ret, 
                    retcode, 
                    $t, 
                    m1, 
                    ret1, 
                    retcode1, 
                    $async_e, 
                    $e1, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,5,6,7,8,9,11,12], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        iserror = true;
                                        lock_ = null;
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if (!(Bridge.is(obj, RobotRaconteurWeb.ServiceStub))) {
                                            throw new System.InvalidOperationException.$ctor1("Can only unlock object opened through Robot Raconteur");
                                        }
                                        s = Bridge.cast(obj, RobotRaconteurWeb.ServiceStub);
                                        $task1 = s.rr_async_mutex.Lock();
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        lock_ = $taskResult1;

                                        keep_trying = true;
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientSessionOpReq, "MonitorEnter");
                                        m.ServicePath = s.RRServicePath;
                                        m.AddElement$1("timeout", Bridge.box(timeout, System.Int32));

                                        $task2 = this.ProcessRequest(m, cancel);
                                        $step = 3;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        ret = $taskResult2;
                                        retcode = ret.FindElement("return").CastData(System.String);

                                        if (Bridge.referenceEquals(retcode, "OK")) {
                                            iserror = false;
                                            $returnValue = ($t = new RobotRaconteurWeb.RobotRaconteurNode.MonitorLock(), $t.lock_ = lock_, $t.stub = s, $t);
                                            $step = 11;
                                            continue;


                                        }
                                        if (Bridge.referenceEquals(retcode, "Continue")) {
                                            $step = 4;
                                            continue;
                                        } else  {
                                            $step = 9;
                                            continue;
                                        }
                                    }

                                    case 5: {
                                        if ( keep_trying ) {
                                            $step = 6;
                                            continue;
                                        } 
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        m1 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientSessionOpReq, "MonitorContinueEnter");
                                        m1.ServicePath = s.RRServicePath;

                                        $task3 = this.ProcessRequest(m1, cancel);
                                        $step = 7;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 7: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        ret1 = $taskResult3;
                                        retcode1 = ret1.FindElement("return").CastData(System.String);
                                        if (Bridge.referenceEquals(retcode1, "OK")) {
                                            iserror = false;
                                            $returnValue = ($t = new RobotRaconteurWeb.RobotRaconteurNode.MonitorLock(), $t.lock_ = lock_, $t.stub = s, $t);
                                            $step = 11;
                                            continue;
                                        }
                                        if (!Bridge.referenceEquals(retcode1, "Continue")) {
                                            throw new RobotRaconteurWeb.ProtocolException("Unknown return code");
                                        }

                                        $step = 5;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 9: {
                                        throw new RobotRaconteurWeb.ProtocolException("Unknown return code");
                                        $step = 10;
                                        continue;
                                    }

                                    case 11: {
                                        if (iserror) {
                                            if (lock_ != null) {
                                                try {
                                                    lock_.System$IDisposable$Dispose();
                                                } catch ($e1) {
                                                    $e1 = System.Exception.create($e1);
                                                }
                                            }
                                        }

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        throw new RobotRaconteurWeb.ProtocolException("Unknown return code");
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 1 && $step <= 10) {
                                $step = 11;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            MonitorExit: function (lock_, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    retcode, 
                    $async_e, 
                    $e1, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientSessionOpReq, "MonitorExit");
                                        m.ServicePath = lock_.stub.RRServicePath;

                                        $task1 = this.ProcessRequest(m, cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        retcode = ret.FindElement("return").CastData(System.String);
                                        if (!Bridge.referenceEquals(retcode, "OK")) {
                                            throw new RobotRaconteurWeb.ProtocolException("Unknown return code");
                                        }
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        try {
                                            lock_.lock_.System$IDisposable$Dispose();
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                        }

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 1 && $step <= 2) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            PeriodicCleanupTask: function () {
                if ((System.DateTime.subdd(System.DateTime.getUtcNow(), this.LastMessageReceivedTime)).getTotalMilliseconds() > this.node.EndpointInactivityTimeout) {
                    RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.Close());
                }

                if (this.m_RemoteEndpoint !== 0) {
                    if ((System.DateTime.subdd(System.DateTime.getUtcNow(), this.LastMessageSentTime)).getTotalMilliseconds() > 60000) {
                        var m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ClientKeepAliveReq, "");
                        m.ServicePath = this.m_ServiceName;
                        m.RequestID = 0;
                        RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.SendMessage$1(m, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                    }
                }
            },
            CheckServiceCapability: function (name, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    res, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.ServiceCheckCapabilityReq, name);
                                        m.ServicePath = this.m_ServiceName;
                                        $task1 = this.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        res = ret.FindElement("return").CastData(System.UInt32);
                                        $tcs.setResult(res);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ProcessCallbackCall: function (m) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ret, 
                    s, 
                    e, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5], $step);
                                switch ($step) {
                                    case 0: {
                                        ret = null;
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        this.stubs;
                                        {
                                            if (!this.stubs.containsKey(m.ServicePath)) {
                                                throw new RobotRaconteurWeb.ServiceException("Stub not found");
                                            }
                                            s = this.stubs.getItem(m.ServicePath);
                                        }
                                        $task1 = s.CallbackCall(m);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        ret = new RobotRaconteurWeb.MessageEntry.$ctor1(((m.EntryType + 1) | 0), m.MemberName);
                                        ret.ServicePath = m.ServicePath;
                                        ret.RequestID = m.RequestID;
                                        RobotRaconteurWeb.RobotRaconteurExceptionUtil.ExceptionToMessageEntry(e, ret);

                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        $task2 = this.SendMessage$1(ret, Bridge.getDefaultValue(System.Threading.CancellationToken));
                                        $step = 5;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $task2.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                e = $async_e;
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            PullServiceDefinition: function (servicetype, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    e3, 
                    res, 
                    def, 
                    d, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        e3 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.GetServiceDesc, "");
                                        e3.ServicePath = this.m_ServiceName;
                                        if (servicetype != null) {
                                            e3.AddElement$1("ServiceType", servicetype);
                                        }

                                        $task1 = this.ProcessRequest(e3, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        res = $taskResult1;

                                        def = res.FindElement("servicedef").CastData(System.String);
                                        if (Bridge.referenceEquals(def, "")) {
                                            throw new RobotRaconteurWeb.ServiceNotFoundException("Could not find service definition");
                                        }
                                        d = new RobotRaconteurWeb.ServiceDefinition();
                                        d.FromString(def);

                                        if (servicetype == null) {

                                            if (System.Linq.Enumerable.from(res.elements, RobotRaconteurWeb.MessageElement).count(function (x) {
                                                return Bridge.referenceEquals(x.ElementName, "attributes");
                                            }) !== 0) {
                                                this;
                                                {
                                                    this.Attributes = Bridge.cast(this.node.UnpackMapType(System.String, System.Object, res.FindElement("attributes").CastData(RobotRaconteurWeb.MessageElementMap$1(System.String)), null), System.Collections.Generic.Dictionary$2(System.String,System.Object));
                                                }
                                            }
                                        }

                                        $tcs.setResult(d);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            PullServiceDefinitionAndImports: function (servicetype, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    defs, 
                    root, 
                    $t, 
                    i, 
                    defs2, 
                    $t1, 
                    d, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7], $step);
                                switch ($step) {
                                    case 0: {
                                        defs = new (System.Collections.Generic.List$1(RobotRaconteurWeb.ServiceDefinition)).ctor();
                                        $task1 = this.PullServiceDefinition(servicetype, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        root = $taskResult1;
                                        defs.add(root);
                                        if (root.Imports.Count === 0) {
                                            $tcs.setResult(defs.ToArray());
                                            return;
                                        }

                                        $t = Bridge.getEnumerator(root.Imports);
                                        $step = 2;
                                        continue;
                                    }
                                    case 2: {
                                        if ($t.moveNext()) {
                                            i = { v : $t.Current };
                                            $step = 3;
                                            continue;
                                        }
                                        $step = 7;
                                        continue;
                                    }
                                    case 3: {
                                        if (System.Linq.Enumerable.from(defs, RobotRaconteurWeb.ServiceDefinition).count((function ($me, i) {
                                            return function (x) {
                                                return Bridge.referenceEquals(x.Name, i.v);
                                            };
                                        })(this, i)) === 0) {
                                            $step = 4;
                                            continue;
                                        } 
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $task2 = this.PullServiceDefinitionAndImports(i.v, cancel);
                                        $step = 5;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        defs2 = $taskResult2;
                                        $t1 = Bridge.getEnumerator(defs2);
                                        try {
                                            while ($t1.moveNext()) {
                                                d = { v : $t1.Current };
                                                if (System.Linq.Enumerable.from(defs, RobotRaconteurWeb.ServiceDefinition).count((function ($me, d) {
                                                    return function (x) {
                                                        return Bridge.referenceEquals(x.Name, d.v.Name);
                                                    };
                                                })(this, d)) === 0) {
                                                    defs.add(d.v);
                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t1, System.IDisposable)) {
                                                $t1.System$IDisposable$Dispose();
                                            }
                                        }
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 2;
                                        continue;
                                    }
                                    case 7: {
                                        $tcs.setResult(defs.ToArray());
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetPulledServiceType: function (type) {
                var f = { };
                if (!this.TryGetPulledServiceType(type, f)) {
                    throw new RobotRaconteurWeb.ServiceException("Unknown service type");
                }
                return f.v;
            },
            TryGetPulledServiceType: function (type, f) {
                this.pulled_service_types;
                {
                    return this.pulled_service_types.tryGetValue(type, f);
                }
            },
            GetPulledServiceTypes: function () {
                var $t;
                this.pulled_service_types;
                {
                    return ($t = System.String, System.Linq.Enumerable.from(this.pulled_service_types.Keys, $t).ToArray($t));
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ConnectionException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ConnectionError, "RobotRaconteur.ConnectionError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.DataSerializationException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.DataSerializationError, "RobotRaconteur.DataSerializationError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.DataTypeException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.DataTypeError, "RobotRaconteur.DataTypeError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.DataTypeMismatchException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.DataTypeMismatch, "RobotRaconteur.DataTypeMismatch", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.EndpointCommunicationFatalException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.EndpointCommunicationFatalError, "RobotRaconteur.EndpointCommunicationFatalError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.EnumDefinition", {
        inherits: [RobotRaconteurWeb.NamedTypeDefinition],
        fields: {
            Values: null,
            service: null
        },
        props: {
            RRDataType: {
                get: function () {
                    return RobotRaconteurWeb.DataTypes.enum_t;
                }
            }
        },
        ctors: {
            init: function () {
                this.Values = new (System.Collections.Generic.List$1(RobotRaconteurWeb.EnumDefinitionValue)).ctor();
            },
            ctor: function (service) {
                this.$initialize();
                RobotRaconteurWeb.NamedTypeDefinition.ctor.call(this);
                this.service = service;
            }
        },
        methods: {
            toString: function () {
                var $t;
                if (!this.VerifyValues()) {
                    throw new RobotRaconteurWeb.DataTypeException("Invalid enum: " + (this.Name || ""));
                }

                var s = "enum " + (this.Name || "") + "\n";

                var values = new (System.Collections.Generic.List$1(System.String)).ctor();

                $t = Bridge.getEnumerator(this.Values);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        if (e.ImplicitValue) {
                            values.add("    " + (e.Name || ""));
                        } else {
                            if (!e.HexValue) {
                                values.add("    " + (e.Name || "") + " = " + (Bridge.toString(e.Value) || ""));
                            } else {
                                values.add("    " + (e.Name || "") + " = 0x" + (System.Int32.format(e.Value, "x") || ""));
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
                s = (s || "") + ((Bridge.toArray(values).join(",\n")) || "");
                s = (s || "") + "\nend enum\n";
                return s;
            },
            FromString: function (s, startline) {
                var $t;
                this.Reset();

                var s2 = s.trim();
                var lines = System.String.split(s2, System.Array.init([10, 13], System.Char).map(function (i) {{ return String.fromCharCode(i); }}), null, 1);

                if (lines.length < 2) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Invalid enum", (startline | 0));
                }

                var r_start = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*enum[ \\t]+([a-zA-Z]\\w*)[ \\t]*$");
                var r_end = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*end(?:[ \\t]+enum)?[ \\t]*$");


                var r_start_match = r_start.match(System.Linq.Enumerable.from(lines, System.String).first());
                if (!r_start_match.getSuccess()) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error near: " + (System.Linq.Enumerable.from(lines, System.String).first() || ""), (startline | 0));
                }
                this.Name = r_start_match.getGroups().get(1).getValue();

                if (!r_end.isMatch(System.Linq.Enumerable.from(lines, System.String).last())) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error near: " + (System.Linq.Enumerable.from(lines, System.String).last() || ""), System.Int64.clip32(System.Int64(startline).add(System.Int64(lines.length)).sub(System.Int64(1))));
                }

                var values1 = Bridge.toArray(System.Linq.Enumerable.from(lines, System.String).skip(1).take(((lines.length - 2) | 0))).join(" ");
                var values2 = System.String.split(values1, System.Array.init([44], System.Char).map(function (i) {{ return String.fromCharCode(i); }}));

                var r_value = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*([A-Za-z]\\w*)(?:[ \\t]*=[ \\t]*(?:(0x\\d+)|(-?\\d+)))?[ \\t]*$");
                var values3 = new (System.Collections.Generic.List$1(RobotRaconteurWeb.EnumDefinitionValue)).ctor();
                $t = Bridge.getEnumerator(values2);
                try {
                    while ($t.moveNext()) {
                        var l = $t.Current;
                        var r_value_match = r_value.match(l);
                        if (!r_value_match.getSuccess()) {
                            throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Enum value parse error near: " + (System.Linq.Enumerable.from(lines, System.String).first() || ""), System.Int64.clip32(System.Int64(startline).add(System.Int64(lines.length)).sub(System.Int64(1))));
                        }

                        var enum_i = new RobotRaconteurWeb.EnumDefinitionValue();
                        enum_i.Name = r_value_match.getGroups().get(1).getValue();

                        if (r_value_match.getGroups().get(2).getSuccess()) {
                            enum_i.ImplicitValue = false;
                            enum_i.Value = System.Convert.toNumberInBase(System.Text.RegularExpressions.Regex.match(r_value_match.getGroups().get(2).getValue(), "0x([0-9a-fA-F]+)").getGroups().get(1).getValue(), 16, 9);
                            enum_i.HexValue = true;
                        } else if (r_value_match.getGroups().get(3).getSuccess()) {
                            enum_i.ImplicitValue = false;
                            enum_i.Value = System.Int32.parse(r_value_match.getGroups().get(3).getValue());
                            enum_i.HexValue = false;
                        } else {
                            if (this.Values.Count === 1) {
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Enum first value must be specified: " + (System.Linq.Enumerable.from(lines, System.String).first() || ""), System.Int64.clip32(System.Int64(startline).add(System.Int64(lines.length)).sub(System.Int64(1))));
                            }

                            enum_i.ImplicitValue = true;
                            enum_i.Value = ((System.Linq.Enumerable.from(values3, RobotRaconteurWeb.EnumDefinitionValue).last()).Value + 1) | 0;
                            enum_i.HexValue = (System.Linq.Enumerable.from(values3, RobotRaconteurWeb.EnumDefinitionValue).last()).HexValue;
                        }

                        values3.add(enum_i);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }

                this.Values = values3;

                if (!this.VerifyValues()) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Enum names or values not unique: " + (System.Linq.Enumerable.from(lines, System.String).first() || ""), (startline | 0));
                }
            },
            VerifyValues: function () {
                if (this.Values.Count === 1) {
                    return true;
                }


                for (var i = 0; i < ((this.Values.Count - 1) | 0); i = (i + 1) | 0) {
                    var e = this.Values.getItem(i);
                    for (var j = (i + 1) | 0; j < this.Values.Count; j = (j + 1) | 0) {
                        var e2 = this.Values.getItem(j);
                        if (e.Value === e2.Value) {
                            return false;
                        }
                        if (Bridge.referenceEquals(e.Name, e2.Name)) {
                            return false;
                        }
                    }
                }
                return true;
            },
            Reset: function () {
                this.Values.clear();
            },
            ResolveQualifiedName: function () {
                return (this.service.Name || "") + "." + (this.Name || "");
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.EnumeratorGenerator$1", function (T) { return {
        inherits: [RobotRaconteurWeb.Generator2$1(T)],
        fields: {
            aborted: false,
            closed: false,
            enumerator: null
        },
        alias: [
            "Abort", "RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(T) + "$Abort",
            "Close", "RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(T) + "$Close",
            "Next", "RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(T) + "$Next",
            "NextAll", "RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(T) + "$NextAll"
        ],
        ctors: {
            init: function () {
                this.aborted = false;
                this.closed = false;
            },
            ctor: function (enumerable) {
                RobotRaconteurWeb.EnumeratorGenerator$1(T).$ctor1.call(this, Bridge.getEnumerator(enumerable, T));
            },
            $ctor1: function (enumerator) {
                this.$initialize();
                this.enumerator = enumerator;
            }
        },
        methods: {
            Abort: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this;
                {
                    this.aborted = true;
                }
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            Close: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this;
                {
                    this.closed = true;
                }
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            Next: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this;
                {
                    if (this.aborted) {
                        throw new RobotRaconteurWeb.OperationAbortedException("Generator aborted");
                    }
                    if (this.closed) {
                        throw new RobotRaconteurWeb.StopIterationException("");
                    }
                    if (!this.enumerator.System$Collections$IEnumerator$moveNext()) {
                        throw new RobotRaconteurWeb.StopIterationException("");
                    }
                    return System.Threading.Tasks.Task.fromResult(this.enumerator[Bridge.geti(this.enumerator, "System$Collections$Generic$IEnumerator$1$" + Bridge.getTypeAlias(T) + "$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")], T);
                }
            },
            NextAll: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    o, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,2,3,4,5,6,7], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        o = new (System.Collections.Generic.List$1(T)).ctor();
                                        
                                        $step = 1;
                                        continue;
                                    }

                                    case 2: {
                                        if ( true ) {
                                            $step = 3;
                                            continue;
                                        } 
                                        $step = 5;
                                        continue;
                                    }
                                    case 3: {
                                        $task1 = this.Next();
                                        $step = 4;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 4: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        o.add($taskResult1);

                                        $step = 2;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 7;
                                        continue;
                                    }
                                    case 6: {
                                        $async_e = null;
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        $tcs.setResult(o.ToArray());
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 5 ) {
                                if (Bridge.is($async_e, RobotRaconteurWeb.StopIterationException)) {
                                    $step = 6;
                                    $asyncBody();
                                    return;
                                }
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.EventDefinition", {
        inherits: [RobotRaconteurWeb.MemberDefinition],
        fields: {
            Parameters: null
        },
        ctors: {
            init: function () {
                this.Parameters = new (System.Collections.Generic.List$1(RobotRaconteurWeb.TypeDefinition)).ctor();
            },
            ctor: function (ServiceEntry) {
                this.$initialize();
                RobotRaconteurWeb.MemberDefinition.ctor.call(this, ServiceEntry);
            }
        },
        methods: {
            toString: function () {
                return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ToStringFormat3("event", this, this.Parameters);
            },
            FromString: function (s) {
                RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat3(s, "event", this, Bridge.ref(this, "Parameters"));
            },
            Reset: function () {
                RobotRaconteurWeb.MemberDefinition.prototype.Reset.call(this);
                this.Parameters.clear();
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.FunctionDefinition", {
        inherits: [RobotRaconteurWeb.MemberDefinition],
        fields: {
            ReturnType: null,
            Parameters: null
        },
        props: {
            IsGenerator: {
                get: function () {
                    if (this.ReturnType.ContainerType === RobotRaconteurWeb.DataTypes_ContainerTypes.generator) {
                        return true;
                    }

                    if (this.Parameters.Count !== 0 && System.Linq.Enumerable.from(this.Parameters, RobotRaconteurWeb.TypeDefinition).last().ContainerType === RobotRaconteurWeb.DataTypes_ContainerTypes.generator) {
                        return true;
                    }

                    return false;
                }
            }
        },
        ctors: {
            init: function () {
                this.Parameters = new (System.Collections.Generic.List$1(RobotRaconteurWeb.TypeDefinition)).ctor();
            },
            ctor: function (ServiceEntry) {
                this.$initialize();
                RobotRaconteurWeb.MemberDefinition.ctor.call(this, ServiceEntry);
            }
        },
        methods: {
            toString: function () {
                return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ToStringFormat2("function", this, this.ReturnType, this.Parameters);
            },
            FromString: function (s) {
                RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat2(s, "function", this, Bridge.ref(this, "ReturnType"), Bridge.ref(this, "Parameters"));
            },
            Reset: function () {
                RobotRaconteurWeb.MemberDefinition.prototype.Reset.call(this);
                this.Parameters.clear();
                RobotRaconteurWeb.TypeDefinition.op_Inequality(this.ReturnType, null) ? this.ReturnType.Reset() : null;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.Generator1Client$2", function (ReturnType, ParamType) { return {
        inherits: [RobotRaconteurWeb.GeneratorClientBase,RobotRaconteurWeb.Generator1$2(ReturnType,ParamType)],
        alias: [
            "Next", "RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Next",
            "Abort", "RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Abort",
            "Close", "RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Close"
        ],
        ctors: {
            ctor: function (membername, stub, id) {
                this.$initialize();
                RobotRaconteurWeb.GeneratorClientBase.ctor.call(this, membername, stub, id);
            }
        },
        methods: {
            Next: function (param, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    m_ret, 
                    data, 
                    $t, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageElement.$ctor1("param", this.stub.RRContext.PackVarType(param));
                                        $task1 = this.NextBase(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        m_ret = $taskResult1;
                                        data = this.stub.RRContext.UnpackVarType(m_ret);
                                        if (Bridge.is(data, Array)) {
                                            if (Bridge.isArray(null, ReturnType)) {
                                                $tcs.setResult(Bridge.cast(Bridge.unbox(data, ReturnType), ReturnType));
                                                return;
                                            } else {
                                                $tcs.setResult(($t = Bridge.cast(data, System.Array.type(ReturnType)))[System.Array.index(0, $t)]);
                                                return;
                                            }
                                        } else {
                                            $tcs.setResult(Bridge.cast(Bridge.unbox(data, ReturnType), ReturnType));
                                            return;
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.Generator1Server$2", function (ReturnType, ParamType) { return {
        inherits: [RobotRaconteurWeb.GeneratorServerBase],
        fields: {
            generator: null
        },
        ctors: {
            ctor: function (generator, name, id, skel, ep) {
                this.$initialize();
                RobotRaconteurWeb.GeneratorServerBase.ctor.call(this, name, id, skel, ep);
                this.generator = generator;
            }
        },
        methods: {
            CallNext: function (m) {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $task3, 
                    $taskResult3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m_ret, 
                    p, 
                    r, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                                switch ($step) {
                                    case 0: {
                                        m_ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.GeneratorNextRes, m.MemberName);
                                        m_ret.RequestID = m.RequestID;
                                        m_ret.ServicePath = m.ServicePath;
                                        if (m.Error !== RobotRaconteurWeb.MessageErrorType.None) {
                                            $step = 1;
                                            continue;
                                        } else  {
                                            $step = 7;
                                            continue;
                                        }
                                    }
                                    case 1: {
                                        if (m.Error === RobotRaconteurWeb.MessageErrorType.StopIteration) {
                                            $step = 2;
                                            continue;
                                        } else  {
                                            $step = 4;
                                            continue;
                                        }
                                    }
                                    case 2: {
                                        $task1 = this.generator["RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Close"](void 0);
                                        $step = 3;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task1.getAwaitedResult();
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $task2 = this.generator["RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Abort"](void 0);
                                        $step = 5;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $task2.getAwaitedResult();
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        m_ret.AddElement$1("return", Bridge.box(0, System.Int32));
                                        $step = 9;
                                        continue;
                                    }
                                    case 7: {
                                        p = Bridge.cast(Bridge.unbox(this.skel.RRContext.UnpackVarType(m.FindElement("parameter")), ParamType), ParamType);
                                        $task3 = this.generator["RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Next"](p, void 0);
                                        $step = 8;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 8: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        r = $taskResult3;
                                        m_ret.AddElement$1("return", this.skel.RRContext.PackVarType(r));
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        $tcs.setResult(m_ret);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.Generator2Client$1", function (ReturnType) { return {
        inherits: [RobotRaconteurWeb.GeneratorClientBase,RobotRaconteurWeb.Generator2$1(ReturnType)],
        alias: [
            "Next", "RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Next",
            "NextAll", "RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$NextAll",
            "Abort", "RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Abort",
            "Close", "RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Close"
        ],
        ctors: {
            ctor: function (membername, stub, id) {
                this.$initialize();
                RobotRaconteurWeb.GeneratorClientBase.ctor.call(this, membername, stub, id);
            }
        },
        methods: {
            Next: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m_ret, 
                    data, 
                    $t, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        $task1 = this.NextBase(null, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        m_ret = $taskResult1;
                                        data = this.stub.RRContext.UnpackVarType(m_ret);
                                        if (Bridge.is(data, Array)) {
                                            if (Bridge.isArray(null, ReturnType)) {
                                                $tcs.setResult(Bridge.cast(Bridge.unbox(data, ReturnType), ReturnType));
                                                return;
                                            } else {
                                                $tcs.setResult(($t = Bridge.cast(data, System.Array.type(ReturnType)))[System.Array.index(0, $t)]);
                                                return;
                                            }
                                        } else {
                                            $tcs.setResult(Bridge.cast(Bridge.unbox(data, ReturnType), ReturnType));
                                            return;
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            NextAll: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    ret, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        ret = new (System.Collections.Generic.List$1(ReturnType)).ctor();
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = this.Next(cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret.add($taskResult1);
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(ret.ToArray());
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                if (Bridge.is($async_e, RobotRaconteurWeb.StopIterationException)) {
                                    $step = 3;
                                    $asyncBody();
                                    return;
                                }
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.Generator2Server$1", function (ReturnType) { return {
        inherits: [RobotRaconteurWeb.GeneratorServerBase],
        fields: {
            generator: null
        },
        ctors: {
            ctor: function (generator, name, id, skel, ep) {
                this.$initialize();
                RobotRaconteurWeb.GeneratorServerBase.ctor.call(this, name, id, skel, ep);
                this.generator = generator;
            }
        },
        methods: {
            CallNext: function (m) {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $task3, 
                    $taskResult3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m_ret, 
                    r, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                                switch ($step) {
                                    case 0: {
                                        m_ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.GeneratorNextRes, m.MemberName);
                                        m_ret.RequestID = m.RequestID;
                                        m_ret.ServicePath = m.ServicePath;
                                        if (m.Error !== RobotRaconteurWeb.MessageErrorType.None) {
                                            $step = 1;
                                            continue;
                                        } else  {
                                            $step = 7;
                                            continue;
                                        }
                                    }
                                    case 1: {
                                        if (m.Error === RobotRaconteurWeb.MessageErrorType.StopIteration) {
                                            $step = 2;
                                            continue;
                                        } else  {
                                            $step = 4;
                                            continue;
                                        }
                                    }
                                    case 2: {
                                        $task1 = this.generator["RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Close"](void 0);
                                        $step = 3;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task1.getAwaitedResult();
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $task2 = this.generator["RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Abort"](void 0);
                                        $step = 5;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $task2.getAwaitedResult();
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        m_ret.AddElement$1("return", Bridge.box(0, System.Int32));
                                        $step = 9;
                                        continue;
                                    }
                                    case 7: {
                                        $task3 = this.generator["RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Next"](void 0);
                                        $step = 8;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 8: {
                                        $taskResult3 = $task3.getAwaitedResult();
                                        r = $taskResult3;
                                        m_ret.AddElement$1("return", this.skel.RRContext.PackVarType(r));
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        $tcs.setResult(m_ret);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.Generator3Client$1", function (ParamType) { return {
        inherits: [RobotRaconteurWeb.GeneratorClientBase,RobotRaconteurWeb.Generator3$1(ParamType)],
        alias: [
            "Next", "RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Next",
            "Abort", "RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Abort",
            "Close", "RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Close"
        ],
        ctors: {
            ctor: function (membername, stub, id) {
                this.$initialize();
                RobotRaconteurWeb.GeneratorClientBase.ctor.call(this, membername, stub, id);
            }
        },
        methods: {
            Next: function (param, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    m_ret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageElement.$ctor1("param", this.stub.RRContext.PackVarType(param));
                                        $task1 = this.NextBase(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        m_ret = $taskResult1;
                                        this.stub.RRContext.UnpackVarType(m_ret);
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.Generator3Server$1", function (ParamType) { return {
        inherits: [RobotRaconteurWeb.GeneratorServerBase],
        fields: {
            generator: null
        },
        ctors: {
            ctor: function (generator, name, id, skel, ep) {
                this.$initialize();
                RobotRaconteurWeb.GeneratorServerBase.ctor.call(this, name, id, skel, ep);
                this.generator = generator;
            }
        },
        methods: {
            CallNext: function (m) {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $task3, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m_ret, 
                    p, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                                switch ($step) {
                                    case 0: {
                                        m_ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.GeneratorNextRes, m.MemberName);
                                        m_ret.RequestID = m.RequestID;
                                        m_ret.ServicePath = m.ServicePath;
                                        if (m.Error !== RobotRaconteurWeb.MessageErrorType.None) {
                                            $step = 1;
                                            continue;
                                        } else  {
                                            $step = 7;
                                            continue;
                                        }
                                    }
                                    case 1: {
                                        if (m.Error === RobotRaconteurWeb.MessageErrorType.StopIteration) {
                                            $step = 2;
                                            continue;
                                        } else  {
                                            $step = 4;
                                            continue;
                                        }
                                    }
                                    case 2: {
                                        $task1 = this.generator["RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Close"](void 0);
                                        $step = 3;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task1.getAwaitedResult();
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $task2 = this.generator["RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Abort"](void 0);
                                        $step = 5;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 5: {
                                        $task2.getAwaitedResult();
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        m_ret.AddElement$1("return", Bridge.box(0, System.Int32));
                                        $step = 9;
                                        continue;
                                    }
                                    case 7: {
                                        p = Bridge.cast(Bridge.unbox(this.skel.RRContext.UnpackVarType(m.FindElement("parameter")), ParamType), ParamType);
                                        $task3 = this.generator["RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Next"](p, void 0);
                                        $step = 8;
                                        if ($task3.isCompleted()) {
                                            continue;
                                        }
                                        $task3.continue($asyncBody);
                                        return;
                                    }
                                    case 8: {
                                        $task3.getAwaitedResult();
                                        m_ret.AddElement$1("return", Bridge.box(0, System.Int32));
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        $tcs.setResult(m_ret);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.definei("RobotRaconteurWeb.INamedArrayStub$1", function (T) { return {
        inherits: [RobotRaconteurWeb.INamedArrayStub],
        $kind: "interface"
    }; });

    Bridge.define("RobotRaconteurWeb.InternalErrorException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.InternalError, "RobotRaconteur.InternalError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.InvalidEndpointException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.InvalidEndpoint, "RobotRaconteur.InvalidEndpoint", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.IOException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.IOError, "RobotRaconteur.IOError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.KeyNotFoundException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.KeyNotFound, "RobotRaconteur.KeyNotFound", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MemberBusyException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.MemberBusy, "RobotRaconteur.MemberBusy", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MemberFormatMismatchException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.MemberFormatMismatch, "RobotRaconteur.MemberFormatMismatch", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MemberNotFoundException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.MemberNotFound, "RobotRaconteur.MemberNotFound", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MemoryDefinition", {
        inherits: [RobotRaconteurWeb.MemberDefinition],
        fields: {
            Type: null
        },
        props: {
            Direction: {
                get: function () {
                    return RobotRaconteurWeb.MemberDefinition.MemberDefinition_GetDirection(this.Modifiers);
                }
            }
        },
        ctors: {
            ctor: function (ServiceEntry) {
                this.$initialize();
                RobotRaconteurWeb.MemberDefinition.ctor.call(this, ServiceEntry);
            }
        },
        methods: {
            toString: function () {
                return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ToStringFormat1("memory", this, this.Type);
            },
            FromString: function (s) {
                RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat1$1(s, "memory", this, Bridge.ref(this, "Type"));
            },
            Reset: function () {
                RobotRaconteurWeb.MemberDefinition.prototype.Reset.call(this);
                RobotRaconteurWeb.TypeDefinition.op_Inequality(this.Type, null) ? this.Type.Reset() : null;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageElementNotFoundException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.MessageElementNotFound, "RobotRaconteur.MessageElementNotFound", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MessageEntryNotFoundException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.MessageEntryNotFound, "RobotRaconteur.MessageEntryNotFound", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MultiDimArrayMemory$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryBase],
        fields: {
            multimemory: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryBase.ctor.call(this);

            },
            $ctor1: function (memory) {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryBase.ctor.call(this);
                this.multimemory = memory;
            }
        },
        methods: {
            Attach: function (memory) {
                this.multimemory = memory;
            },
            GetDimensions: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return System.Threading.Tasks.Task.fromResult(System.Linq.Enumerable.from(this.multimemory.Dims, System.UInt32).select(function (x) {
                            return System.UInt64(x);
                        }).ToArray(System.UInt64), System.Array.type(System.UInt64));
            },
            GetDimCount: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return System.Threading.Tasks.Task.fromResult(Bridge.Int.clipu64(this.multimemory.Dims.length), System.UInt64);
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this.multimemory.RetrieveSubArray(System.Linq.Enumerable.from(memorypos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), buffer, System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32));
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this.multimemory.AssignSubArray(System.Linq.Enumerable.from(memorypos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), buffer, System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32));
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.MultiDimArrayMemoryClientImpl$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase],
        ctors: {
            ctor: function (membername, stub, direction) {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase.ctor.call(this, membername, stub, RobotRaconteurWeb.DataTypeUtil.TypeIDFromType(T), RobotRaconteurWeb.DataTypeUtil.size(RobotRaconteurWeb.DataTypeUtil.TypeIDFromType(T)), direction);
            }
        },
        methods: {
            PackWriteRequest: function (buffer, bufferpos, count, elem_count) {
                var buffer1 = Bridge.cast((buffer), RobotRaconteurWeb.MultiDimArray);

                var equ = true;
                for (var i = System.Int64(0); i.lt(System.Array.getLongLength(count)); i = i.inc()) {
                    if (bufferpos[System.Array.index(System.Int64.toNumber(i), bufferpos)].ne(System.UInt64(0)) || System.UInt64(buffer1.Dims[System.Array.index(System.Int64.toNumber(i), buffer1.Dims)]).ne(count[System.Array.index(System.Int64.toNumber(i), count)])) {
                        equ = false;
                        break;
                    }
                }

                if (equ) {
                    return this.stub.rr_node.PackMultiDimArray(buffer1);
                } else {
                    var data = new RobotRaconteurWeb.MultiDimArray.$ctor1(System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32), System.Array.init(elem_count, function (){
                        return Bridge.getDefaultValue(T);
                    }, T));

                    buffer1.RetrieveSubArray(System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32), data, System.Array.init(count.length, 0, System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32));
                    return this.stub.rr_node.PackMultiDimArray(data);
                }
            },
            UnpackReadResult: function (res, buffer, bufferpos, count, elem_count) {
                var buffer1 = Bridge.cast(buffer, RobotRaconteurWeb.MultiDimArray);
                var data = this.stub.rr_node.UnpackMultiDimArray(Bridge.cast(res, RobotRaconteurWeb.MessageElementMultiDimArray));

                var data2 = new (RobotRaconteurWeb.MultiDimArrayMemory$1(T)).$ctor1(data);
                data2.Read(System.Array.init(count.length, System.UInt64(0), System.UInt64), buffer1, bufferpos, count);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.MultiDimArrayMemoryServiceSkel$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryServiceSkelBase],
        ctors: {
            ctor: function (membername, skel, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryServiceSkelBase.ctor.call(this, membername, skel, RobotRaconteurWeb.DataTypeUtil.TypeIDFromType(T), RobotRaconteurWeb.DataTypeUtil.size(RobotRaconteurWeb.DataTypeUtil.TypeIDFromType(T)), direction);

            }
        },
        methods: {
            DoRead: function (memorypos, bufferpos, count, elem_count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.MultiDimArrayMemory$1(T));
                                        buf1 = new RobotRaconteurWeb.MultiDimArray.$ctor1(System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                                            return System.Int64.clipu32(x);
                                        }).ToArray(System.UInt32), Bridge.cast(RobotRaconteurWeb.DataTypeUtil.ArrayFromDataType(this.element_type, System.Int64.clipu32(elem_count)), System.Array.type(T)));
                                        $task1 = mem1.Read(memorypos, buf1, System.Array.init(count.length, System.UInt64(0), System.UInt64), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(this.skel.RRContext.PackMultiDimArray(buf1));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoWrite: function (memorypos, buffer, bufferpos, count, elem_count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.MultiDimArrayMemory$1(T));
                                        buf1 = this.skel.RRContext.UnpackMultiDimArray(Bridge.cast(buffer, RobotRaconteurWeb.MessageElementMultiDimArray));
                                        $task1 = mem1.Write(memorypos, buf1, System.Array.init(count.length, System.UInt64(0), System.UInt64), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedArrayMemoryClientImpl$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemoryClientImplBase],
        ctors: {
            ctor: function (membername, stub, element_size, direction) {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemoryClientImplBase.ctor.call(this, membername, stub, RobotRaconteurWeb.DataTypes.namedarray_t, element_size, direction);
            }
        },
        methods: {
            GetBufferLength: function (buffer) {
                return System.Int64.clipu64(System.Array.getLongLength(Bridge.cast(buffer, System.Array.type(T))));
            },
            PackWriteRequest: function (buffer, bufferpos, count) {
                var buffer1 = Bridge.cast(buffer, System.Array.type(T));
                var o = System.Array.init(count, function (){
                    return Bridge.getDefaultValue(T);
                }, T);
                System.Array.copy(buffer1, System.Int64.clip64(bufferpos).toNumber(), o, System.Int64(0).toNumber(), System.Int64.clip64(count).toNumber());
                return this.stub.rr_node.PackNamedArray(T, o, this.stub.RRContext);
            },
            UnpackReadResult: function (res, buffer, bufferpos, count) {
                var data = this.stub.rr_node.UnpackNamedArray(T, Bridge.cast(res, RobotRaconteurWeb.MessageElementNamedArray), this.stub.RRContext);
                var buffer1 = Bridge.cast(buffer, System.Array.type(T));
                System.Array.copy(data, System.Int64(0).toNumber(), buffer1, System.Int64.clip64(bufferpos).toNumber(), System.Int64.clip64(count).toNumber());
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedArrayMemoryServiceSkel$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemoryServiceSkelBase],
        ctors: {
            ctor: function (membername, skel, element_size, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.ArrayMemoryServiceSkelBase.ctor.call(this, membername, skel, RobotRaconteurWeb.DataTypes.namedarray_t, element_size, direction);

            }
        },
        methods: {
            DoRead: function (memorypos, bufferpos, count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.NamedArrayMemory$1(T));
                                        buf1 = System.Array.init(count, function (){
                                            return Bridge.getDefaultValue(T);
                                        }, T);
                                        $task1 = mem1.Read(memorypos, buf1, System.UInt64(0), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(this.skel.rr_node.PackNamedArray(T, buf1, null));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoWrite: function (memorypos, buffer, bufferpos, count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.NamedArrayMemory$1(T));
                                        buf1 = this.skel.rr_node.UnpackNamedArray(T, Bridge.cast(buffer, RobotRaconteurWeb.MessageElementNamedArray), null);
                                        $task1 = mem1.Write(memorypos, buf1, System.UInt64(0), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedMultiDimArrayMemory$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryBase],
        fields: {
            multimemory: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryBase.ctor.call(this);
            },
            $ctor1: function (memory) {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryBase.ctor.call(this);
                this.multimemory = memory;
            }
        },
        methods: {
            Attach: function (memory) {
                this.multimemory = memory;
            },
            GetDimensions: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return System.Threading.Tasks.Task.fromResult(System.Linq.Enumerable.from(this.multimemory.Dims, System.UInt32).select(function (x) {
                            return System.UInt64(x);
                        }).ToArray(System.UInt64), System.Array.type(System.UInt64));
            },
            GetDimCount: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return System.Threading.Tasks.Task.fromResult(Bridge.Int.clipu64(this.multimemory.Dims.length), System.UInt64);
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this.multimemory.RetrieveSubArray(System.Linq.Enumerable.from(memorypos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), buffer, System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32));
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this.multimemory.AssignSubArray(System.Linq.Enumerable.from(memorypos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), buffer, System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32));
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedMultiDimArrayMemoryClientImpl$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase],
        ctors: {
            ctor: function (membername, stub, element_size, direction) {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase.ctor.call(this, membername, stub, RobotRaconteurWeb.DataTypes.namedarray_t, element_size, direction);
            }
        },
        methods: {
            PackWriteRequest: function (buffer, bufferpos, count, elem_count) {
                var buffer1 = Bridge.cast((buffer), RobotRaconteurWeb.NamedMultiDimArray);

                var equ = true;
                for (var i = System.Int64(0); i.lt(System.Array.getLongLength(count)); i = i.inc()) {
                    if (bufferpos[System.Array.index(System.Int64.toNumber(i), bufferpos)].ne(System.UInt64(0)) || System.UInt64(buffer1.Dims[System.Array.index(System.Int64.toNumber(i), buffer1.Dims)]).ne(count[System.Array.index(System.Int64.toNumber(i), count)])) {
                        equ = false;
                        break;
                    }
                }

                if (equ) {
                    return this.stub.rr_node.PackNamedMultiDimArray(T, buffer1, this.stub.RRContext);
                } else {
                    var data = new RobotRaconteurWeb.NamedMultiDimArray.$ctor1(System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32), System.Array.init(elem_count, function (){
                        return Bridge.getDefaultValue(T);
                    }, T));

                    buffer1.RetrieveSubArray(System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32), data, System.Array.init(count.length, 0, System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32));
                    return this.stub.rr_node.PackNamedMultiDimArray(T, data, this.stub.RRContext);
                }
            },
            UnpackReadResult: function (res, buffer, bufferpos, count, elem_count) {
                var buffer1 = Bridge.cast(buffer, RobotRaconteurWeb.NamedMultiDimArray);
                var data = this.stub.rr_node.UnpackNamedMultiDimArray(T, Bridge.cast(res, RobotRaconteurWeb.MessageElementNamedMultiDimArray), this.stub.RRContext);

                var data2 = new (RobotRaconteurWeb.NamedMultiDimArrayMemory$1(T)).$ctor1(data);
                data2.Read(System.Array.init(count.length, System.UInt64(0), System.UInt64), buffer1, bufferpos, count);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedMultiDimArrayMemoryServiceSkel$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryServiceSkelBase],
        ctors: {
            ctor: function (membername, skel, element_size, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryServiceSkelBase.ctor.call(this, membername, skel, RobotRaconteurWeb.DataTypes.namedarray_t, element_size, direction);
            }
        },
        methods: {
            DoRead: function (memorypos, bufferpos, count, elem_count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.NamedMultiDimArrayMemory$1(T));
                                        buf1 = new RobotRaconteurWeb.NamedMultiDimArray.$ctor1(System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                                            return System.Int64.clipu32(x);
                                        }).ToArray(System.UInt32), System.Array.init(elem_count, function (){
                                            return Bridge.getDefaultValue(T);
                                        }, T));
                                        $task1 = mem1.Read(memorypos, buf1, System.Array.init(count.length, System.UInt64(0), System.UInt64), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(this.skel.rr_node.PackNamedMultiDimArray(T, buf1, null));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoWrite: function (memorypos, buffer, bufferpos, count, elem_count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.NamedMultiDimArrayMemory$1(T));
                                        buf1 = this.skel.rr_node.UnpackNamedMultiDimArray(T, Bridge.cast(buffer, RobotRaconteurWeb.MessageElementNamedMultiDimArray), null);
                                        $task1 = mem1.Write(memorypos, buf1, System.Array.init(count.length, System.UInt64(0), System.UInt64), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NodeNotFoundException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.NodeNotFound, "RobotRaconteur.NodeNotFound", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ObjectLockedException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ObjectLockedError, "RobotRaconteur.ObjectLockedError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ObjectNotFoundException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ObjectNotFound, "RobotRaconteur.ObjectNotFound", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ObjRefDefinition", {
        inherits: [RobotRaconteurWeb.MemberDefinition],
        fields: {
            ObjectType: null,
            ArrayType: 0,
            ContainerType: 0
        },
        ctors: {
            ctor: function (ServiceEntry) {
                this.$initialize();
                RobotRaconteurWeb.MemberDefinition.ctor.call(this, ServiceEntry);
            }
        },
        methods: {
            toString: function () {
                var t = new RobotRaconteurWeb.TypeDefinition.$ctor1(this);
                t.Name = this.Name;
                t.TypeString = this.ObjectType;
                t.Type = RobotRaconteurWeb.DataTypes.namedtype_t;

                switch (this.ArrayType) {
                    case RobotRaconteurWeb.DataTypes_ArrayTypes.none: 
                        {
                            switch (this.ContainerType) {
                                case RobotRaconteurWeb.DataTypes_ContainerTypes.none: 
                                    break;
                                case RobotRaconteurWeb.DataTypes_ContainerTypes.map_int32: 
                                case RobotRaconteurWeb.DataTypes_ContainerTypes.map_string: 
                                    t.ContainerType = this.ContainerType;
                                    break;
                                default: 
                                    throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid ObjRefDefinition for objref \"" + (this.Name || "") + "\"");
                            }
                            break;
                        }
                    case RobotRaconteurWeb.DataTypes_ArrayTypes.array: 
                        {
                            if (this.ContainerType !== RobotRaconteurWeb.DataTypes_ContainerTypes.none) {
                                throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid ObjRefDefinition for objref \"" + (this.Name || "") + "\"");
                            }
                            t.ArrayType = this.ArrayType;
                            t.ArrayVarLength = true;
                            t.ArrayLength.add(0);
                            break;
                        }
                    default: 
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid ObjRefDefinition for objref \"" + (this.Name || "") + "\"");
                }

                return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ToStringFormat1("objref", this, t);
            },
            FromString: function (s) {
                var t = { v : new RobotRaconteurWeb.TypeDefinition.ctor() };
                RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat1$1(s, "objref", this, t);

                switch (t.v.ArrayType) {
                    case RobotRaconteurWeb.DataTypes_ArrayTypes.none: 
                        {
                            switch (t.v.ContainerType) {
                                case RobotRaconteurWeb.DataTypes_ContainerTypes.none: 
                                case RobotRaconteurWeb.DataTypes_ContainerTypes.map_int32: 
                                case RobotRaconteurWeb.DataTypes_ContainerTypes.map_string: 
                                    break;
                                default: 
                                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid objref definition \"" + (s || "") + "\"");
                            }
                            break;
                        }
                    case RobotRaconteurWeb.DataTypes_ArrayTypes.array: 
                        {
                            if (this.ContainerType !== RobotRaconteurWeb.DataTypes_ContainerTypes.none) {
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid objref definition \"" + (s || "") + "\"");
                            }
                            if (!t.v.ArrayVarLength) {
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid objref definition \"" + (s || "") + "\"");
                            }
                            if (t.v.ArrayLength.getItem(0) !== 0) {
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid objref definition \"" + (s || "") + "\"");
                            }
                            break;
                        }
                    default: 
                        throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid objref definition \"" + (s || "") + "\"");
                }

                if (!((!System.String.isNullOrEmpty(t.v.TypeString) && t.v.Type === RobotRaconteurWeb.DataTypes.namedtype_t) || (t.v.Type === RobotRaconteurWeb.DataTypes.varobject_t))) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.ctor("Invalid objref definition \"" + (s || "") + "\"");
                }


                if (t.v.Type === RobotRaconteurWeb.DataTypes.namedtype_t) {
                    this.ObjectType = t.v.TypeString;
                } else {
                    this.ObjectType = "varobject";
                }

                this.ArrayType = t.v.ArrayType;
                this.ContainerType = t.v.ContainerType;
            },
            Reset: function () {
                RobotRaconteurWeb.MemberDefinition.prototype.Reset.call(this);
                this.ObjectType = "";
                this.ArrayType = RobotRaconteurWeb.DataTypes_ArrayTypes.none;
                this.ContainerType = RobotRaconteurWeb.DataTypes_ContainerTypes.none;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.OperationAbortedException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.OperationAborted, "RobotRaconteur.OperationAborted", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.OperationFailedException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.OperationFailed, "RobotRaconteur.OperationFailed", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.OutOfRangeException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.OutOfRange, "RobotRaconteur.OutOfRange", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.OutOfSystemResourceException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.OutOfSystemResource, "RobotRaconteur.OutOfSystemResource", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.PermissionDeniedException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.PermissionDenied, "RobotRaconteur.PermissionDenied", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.PipeClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.Pipe$1(T)],
        fields: {
            pipeendpoints: null,
            m_Name: null,
            stub: null,
            connecting: null,
            early_endpoints: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.m_Name;
                }
            },
            PipeConnectCallback: {
                get: function () {
                    throw new System.InvalidOperationException.ctor();
                },
                set: function (value) {
                    throw new System.InvalidOperationException.ctor();
                }
            }
        },
        ctors: {
            init: function () {
                this.pipeendpoints = new (System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurWeb.Pipe$1.PipeEndpoint(T))).ctor();
                this.connecting = new (System.Collections.Generic.List$1(System.Tuple$2(System.Int32,System.Object))).ctor();
                this.early_endpoints = new (System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurWeb.Pipe$1.PipeEndpoint(T))).ctor();
            },
            ctor: function (name, stub) {
                this.$initialize();
                RobotRaconteurWeb.Pipe$1(T).ctor.call(this);
                this.m_Name = name;
                this.stub = stub;
                stub.RRContext.addClientServiceListener(Bridge.fn.cacheBind(this, this.ClientContextListener));
            }
        },
        methods: {
            SendPipePacket: function (data, index, packetnumber, requestack, e, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    me, 
                    m, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (e === void 0) { e = null; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        me = this.PackPacket(data, index, packetnumber, requestack);
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipePacket, this.MemberName);
                                        m.AddElement(me);
                                        $task1 = this.stub.SendPipeMessage(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Connect: function (index, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    connecting_key, 
                    rindex, 
                    m, 
                    ret, 
                    $t, 
                    e, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        connecting_key = { };
                                        this.connecting.add({ Item1: index, Item2: connecting_key });
                                        rindex = -1;
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipeConnectReq, this.MemberName);
                                        m.AddElement$1("index", Bridge.box(index, System.Int32));
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;

                                        rindex = ($t = (ret.FindElement("index").CastData(System.Array.type(System.Int32))))[System.Array.index(0, $t)];

                                        if (this.early_endpoints.containsKey(rindex)) {
                                            e = this.early_endpoints.getItem(rindex);
                                            this.early_endpoints.remove(rindex);
                                        } else {
                                            e = new (RobotRaconteurWeb.Pipe$1.PipeEndpoint(T))(this, rindex);
                                        }
                                        this.pipeendpoints.add(rindex, e);
                                        $returnValue = e;
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        this.connecting.RemoveAll(function (x) {
                                            return Bridge.referenceEquals(x.Item2, connecting_key);
                                        });
                                        if (this.connecting.Count === 0) {
                                            this.early_endpoints.clear();
                                        }

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 1 && $step <= 2) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Close: function (e, ee, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (ee === void 0) { ee = null; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipeDisconnectReq, this.MemberName);
                                        m.AddElement$1("index", Bridge.box(e.Index, System.Int32));
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            PipePacketReceived: function (m, e) {
                var $t, $t1, $t2;
                if (e === void 0) { e = null; }
                if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PipeClosed) {
                    try {

                        var index = ($t = (m.FindElement("index").CastData(System.Array.type(System.Int32))))[System.Array.index(0, $t)];
                        this.pipeendpoints.getItem(index).RemoteClose();
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                    ;
                } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PipePacket) {
                    var ack = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                    $t1 = Bridge.getEnumerator(m.elements);
                    try {
                        while ($t1.moveNext()) {
                            var me = $t1.Current;
                            try {

                                var index1 = { v : System.Int32.parse(me.ElementName) };
                                var pnum = { };

                                var p = null;
                                if (this.pipeendpoints.containsKey(index1.v)) {
                                    p = this.pipeendpoints.getItem(index1.v);
                                } else {
                                    if (this.early_endpoints.containsKey(index1.v)) {
                                        p = this.early_endpoints.getItem(index1.v);
                                    } else if (this.connecting.Count > 0) {
                                        if (System.Linq.Enumerable.from(this.connecting, System.Tuple$2(System.Int32,System.Object)).any((function ($me, index1) {
                                                return function (x) {
                                                    return x.Item1 === -1 || x.Item1 === index1.v;
                                                };
                                            })(this, index1))) {
                                            p = new (RobotRaconteurWeb.Pipe$1.PipeEndpoint(T))(this, index1.v);
                                            this.early_endpoints.add(index1.v, p);
                                        }
                                    }
                                }

                                if (p == null) {
                                    continue;
                                }
                                if (this.DispatchPacket(me, p, pnum)) {
                                    ack.add(new RobotRaconteurWeb.MessageElement.$ctor1(me.ElementName, System.Array.init([pnum.v], System.UInt32)));
                                }
                            } catch ($e2) {
                                $e2 = System.Exception.create($e2);

                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }
                    try {
                        if (ack.Count > 0) {
                            var mack = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipePacketRet, m.MemberName);
                            mack.elements = ack;
                            RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.stub.SendPipeMessage(mack, Bridge.getDefaultValue(System.Threading.CancellationToken)));
                        }
                    } catch ($e3) {
                        $e3 = System.Exception.create($e3);
                    }
                } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PipePacketRet) {
                    try {
                        $t2 = Bridge.getEnumerator(m.elements);
                        try {
                            while ($t2.moveNext()) {
                                var me1 = $t2.Current;
                                var index2 = System.Int32.parse(me1.ElementName);
                                this.DispatchPacketAck(me1, this.pipeendpoints.getItem(index2));
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$Dispose();
                            }
                        }
                    } catch ($e4) {
                        $e4 = System.Exception.create($e4);
                    }
                }
            },
            Shutdown: function () {
                var $t, $t1;
                var endps = ($t = RobotRaconteurWeb.Pipe$1.PipeEndpoint(T), System.Linq.Enumerable.from(this.pipeendpoints.Values, $t).ToArray($t));
                $t1 = Bridge.getEnumerator(endps);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        try {
                            e.RemoteClose();
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }
            },
            DeleteEndpoint: function (e) {
                this.pipeendpoints.remove(e.Index);
            },
            ClientContextListener: function (context, event_, param) {
                if (event_ === RobotRaconteurWeb.ClientServiceListenerEventType.ClientClosed) {
                    this.Shutdown();
                }
            },
            PackVarType: function (o) {
                return this.stub.RRContext.PackVarType(o);
            },
            UnpackVarType: function (o) {
                return this.stub.RRContext.UnpackVarType(o);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PipeDefinition", {
        inherits: [RobotRaconteurWeb.MemberDefinition],
        fields: {
            Type: null
        },
        props: {
            Direction: {
                get: function () {
                    return RobotRaconteurWeb.MemberDefinition.MemberDefinition_GetDirection(this.Modifiers);
                }
            },
            IsUnreliable: {
                get: function () {
                    var $t;
                    if (System.Linq.Enumerable.from(this.Modifiers, System.String).count(function (x) {
                            return Bridge.referenceEquals(x, "unreliable");
                        }) !== 0) {
                        return true;
                    }

                    $t = Bridge.getEnumerator(this.ServiceEntry.Options);
                    try {
                        while ($t.moveNext()) {
                            var o = $t.Current;
                            var r = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*pipe[ \\t]+" + (this.Name || "") + "[ \\t]+unreliable[ \\t]*$");
                            if (r.isMatch(o)) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                    return false;
                }
            }
        },
        ctors: {
            ctor: function (ServiceEntry) {
                this.$initialize();
                RobotRaconteurWeb.MemberDefinition.ctor.call(this, ServiceEntry);
            }
        },
        methods: {
            toString: function () {
                return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ToStringFormat1("pipe", this, this.Type);
            },
            FromString: function (s) {
                RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat1$1(s, "pipe", this, Bridge.ref(this, "Type"));
            },
            Reset: function () {
                RobotRaconteurWeb.MemberDefinition.prototype.Reset.call(this);
                RobotRaconteurWeb.TypeDefinition.op_Inequality(this.Type, null) ? this.Type.Reset() : null;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.PipeServer$1", function (T) { return {
        inherits: [RobotRaconteurWeb.Pipe$1(T)],
        fields: {
            pipeendpoints: null,
            callback: null,
            m_Name: null,
            skel: null,
            pipeendpointlock: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.m_Name;
                }
            },
            PipeConnectCallback: {
                get: function () {
                    return this.callback;
                },
                set: function (value) {
                    this.callback = value;
                }
            }
        },
        ctors: {
            init: function () {
                this.pipeendpoints = new (System.Collections.Generic.Dictionary$2(System.UInt32,System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurWeb.Pipe$1.PipeEndpoint(T)))).ctor();
                this.pipeendpointlock = { };
            },
            ctor: function (name, skel) {
                this.$initialize();
                RobotRaconteurWeb.Pipe$1(T).ctor.call(this);
                this.m_Name = name;
                this.skel = skel;
            }
        },
        methods: {
            SendPipePacket: function (data, index, packetnumber, requestack, e, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    me, 
                    m, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (e === void 0) { e = null; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        if (!this.pipeendpoints.containsKey(e.LocalEndpoint)) {
                                            throw new System.Exception("Pipe has been disconnect");
                                        }
                                        if (!this.pipeendpoints.getItem(e.LocalEndpoint).containsKey(index)) {
                                            throw new System.Exception("Pipe has been disconnected");
                                        }

                                        me = this.PackPacket(data, index, packetnumber, requestack);
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipePacket, this.MemberName);
                                        m.AddElement(me);

                                        $task1 = this.skel.SendPipeMessage(m, e, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Connect: function (endpoint, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                throw new System.InvalidOperationException.ctor();
            },
            Close: function (e, ee, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipeClosed, this.MemberName);
                                        m.AddElement$1("index", Bridge.box(e.Index, System.Int32));
                                        $task1 = this.skel.SendPipeMessage(m, ee, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        this.DeleteEndpoint(e);
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            PipePacketReceived: function (m, e) {
                var $t, $t1;
                if (e === void 0) { e = null; }

                if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PipePacket) {
                    var ack = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                    $t = Bridge.getEnumerator(m.elements);
                    try {
                        while ($t.moveNext()) {
                            var me = $t.Current;
                            try {
                                var index = System.Int32.parse(me.ElementName);
                                var pnum = { };
                                if (this.DispatchPacket(me, this.pipeendpoints.getItem(e.LocalEndpoint).getItem(index), pnum)) {
                                    ack.add(new RobotRaconteurWeb.MessageElement.$ctor1(me.ElementName, System.Array.init([pnum.v], System.UInt32)));
                                }
                            } catch ($e1) {
                                $e1 = System.Exception.create($e1);

                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }

                    try {
                        if (ack.Count > 0) {
                            var mack = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipePacketRet, m.MemberName);
                            mack.elements = ack;
                            RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.skel.SendPipeMessage(mack, e, Bridge.getDefaultValue(System.Threading.CancellationToken)));

                        }
                    } catch ($e2) {
                        $e2 = System.Exception.create($e2);
                    }
                } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.PipePacketRet) {

                    try {
                        $t1 = Bridge.getEnumerator(m.elements);
                        try {
                            while ($t1.moveNext()) {
                                var me1 = $t1.Current;
                                var index1 = System.Int32.parse(me1.ElementName);
                                this.DispatchPacketAck(me1, this.pipeendpoints.getItem(e.LocalEndpoint).getItem(index1));
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$Dispose();
                            }
                        }
                    } catch ($e3) {
                        $e3 = System.Exception.create($e3);
                    }

                }

            },
            PipeCommand: function (m, e) {
                var $t, $t1;
                this.pipeendpointlock;
                {
                    switch (m.EntryType) {
                        case RobotRaconteurWeb.MessageEntryType.PipeConnectReq: 
                            {
                                if (!System.Linq.Enumerable.from(this.pipeendpoints.Keys, System.UInt32).contains(e.LocalEndpoint)) {
                                    this.pipeendpoints.add(e.LocalEndpoint, new (System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurWeb.Pipe$1.PipeEndpoint(T))).ctor());
                                }

                                var ep = this.pipeendpoints.getItem(e.LocalEndpoint);

                                var index = ($t = (m.FindElement("index").CastData(System.Array.type(System.Int32))))[System.Array.index(0, $t)];
                                if (index === -1) {
                                    index = (ep.Count === 0) ? 1 : (((System.Linq.Enumerable.from(ep.Keys, System.Int32).max() + 1) | 0));
                                }

                                if (System.Linq.Enumerable.from(ep.Keys, System.Int32).contains(index)) {
                                    throw new System.Exception("Pipe endpoint index in use");
                                }

                                var p = new (RobotRaconteurWeb.Pipe$1.PipeEndpoint(T))(this, index, e);
                                ep.add(index, p);
                                try {
                                    if (!Bridge.staticEquals(this.callback, null)) {
                                        this.callback(p);
                                    }
                                } catch ($e1) {
                                    $e1 = System.Exception.create($e1);
                                }

                                var ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipeConnectRet, this.MemberName);
                                ret.AddElement$1("index", Bridge.box(index, System.Int32));
                                return System.Threading.Tasks.Task.fromResult(ret, RobotRaconteurWeb.MessageEntry);
                            }
                        case RobotRaconteurWeb.MessageEntryType.PipeDisconnectReq: 
                            {
                                if (!System.Linq.Enumerable.from(this.pipeendpoints.Keys, System.UInt32).contains(e.LocalEndpoint)) {
                                    throw new System.Exception("Invalid pipe");
                                }
                                var ep1 = this.pipeendpoints.getItem(e.LocalEndpoint);

                                var index1 = ($t1 = (m.FindElement("index").CastData(System.Array.type(System.Int32))))[System.Array.index(0, $t1)];
                                if (!System.Linq.Enumerable.from(ep1.Keys, System.Int32).contains(index1)) {
                                    throw new System.Exception("Invalid pipe");
                                }


                                ep1.remove(index1);

                                return System.Threading.Tasks.Task.fromResult(new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.PipeDisconnectReq, this.MemberName), RobotRaconteurWeb.MessageEntry);
                            }
                        default: 
                            throw new System.Exception("Invalid Command");
                    }
                }
            },
            Shutdown: function () {
                var $t, $t1, $t2, $t3;
                this.pipeendpointlock;
                {
                    var endpoints1 = ($t = System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurWeb.Pipe$1.PipeEndpoint(T)), System.Linq.Enumerable.from(this.pipeendpoints.Values, $t).ToArray($t));
                    $t1 = Bridge.getEnumerator(endpoints1);
                    try {
                        while ($t1.moveNext()) {
                            var endpoints2 = $t1.Current;
                            var endpoints3 = ($t2 = RobotRaconteurWeb.Pipe$1.PipeEndpoint(T), System.Linq.Enumerable.from(endpoints2.Values, $t2).ToArray($t2));
                            $t3 = Bridge.getEnumerator(endpoints3);
                            try {
                                while ($t3.moveNext()) {
                                    var endpoint = $t3.Current;
                                    try {
                                        RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(endpoint.Close());
                                    } catch ($e1) {
                                        $e1 = System.Exception.create($e1);
                                    }
                                }
                            } finally {
                                if (Bridge.is($t3, System.IDisposable)) {
                                    $t3.System$IDisposable$Dispose();
                                }
                            }

                            endpoints2.clear();

                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$Dispose();
                        }
                    }

                    this.pipeendpoints.clear();
                }
            },
            DeleteEndpoint: function (e) {
                this.pipeendpointlock;
                {
                    this.pipeendpoints.getItem(e.Endpoint).remove(e.Index);
                }
            },
            PackVarType: function (o) {
                return this.skel.RRContext.PackVarType(o);
            },
            UnpackVarType: function (o) {
                return this.skel.RRContext.UnpackVarType(o);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodArrayMemoryClientImpl$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemoryClientImplBase],
        ctors: {
            ctor: function (membername, stub, element_size, direction) {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemoryClientImplBase.ctor.call(this, membername, stub, RobotRaconteurWeb.DataTypes.pod_t, element_size, direction);
            }
        },
        methods: {
            GetBufferLength: function (buffer) {
                return System.Int64.clipu64(System.Array.getLongLength(Bridge.cast(buffer, System.Array.type(T))));
            },
            PackWriteRequest: function (buffer, bufferpos, count) {
                var buffer1 = Bridge.cast(buffer, System.Array.type(T));
                var o = System.Array.init(count, function (){
                    return Bridge.getDefaultValue(T);
                }, T);
                System.Array.copy(buffer1, System.Int64.clip64(bufferpos).toNumber(), o, System.Int64(0).toNumber(), System.Int64.clip64(count).toNumber());
                return this.stub.rr_node.PackPodArray(T, o, this.stub.RRContext);
            },
            UnpackReadResult: function (res, buffer, bufferpos, count) {
                var data = this.stub.rr_node.UnpackPodArray(T, Bridge.cast(res, RobotRaconteurWeb.MessageElementPodArray), this.stub.RRContext);
                var buffer1 = Bridge.cast(buffer, System.Array.type(T));
                System.Array.copy(data, System.Int64(0).toNumber(), buffer1, System.Int64.clip64(bufferpos).toNumber(), System.Int64.clip64(count).toNumber());
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodArrayMemoryServiceSkel$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemoryServiceSkelBase],
        ctors: {
            ctor: function (membername, skel, element_size, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.ArrayMemoryServiceSkelBase.ctor.call(this, membername, skel, RobotRaconteurWeb.DataTypes.pod_t, element_size, direction);

            }
        },
        methods: {
            DoRead: function (memorypos, bufferpos, count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.PodArrayMemory$1(T));
                                        buf1 = System.Array.init(count, function (){
                                            return Bridge.getDefaultValue(T);
                                        }, T);
                                        $task1 = mem1.Read(memorypos, buf1, System.UInt64(0), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(this.skel.rr_node.PackPodArray(T, buf1, null));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoWrite: function (memorypos, buffer, bufferpos, count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.PodArrayMemory$1(T));
                                        buf1 = this.skel.rr_node.UnpackPodArray(T, Bridge.cast(buffer, RobotRaconteurWeb.MessageElementPodArray), null);
                                        $task1 = mem1.Write(memorypos, buf1, System.UInt64(0), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodMultiDimArrayMemory$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryBase],
        fields: {
            multimemory: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryBase.ctor.call(this);
            },
            $ctor1: function (memory) {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryBase.ctor.call(this);
                this.multimemory = memory;
            }
        },
        methods: {
            Attach: function (memory) {
                this.multimemory = memory;
            },
            GetDimensions: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return System.Threading.Tasks.Task.fromResult(System.Linq.Enumerable.from(this.multimemory.Dims, System.UInt32).select(function (x) {
                            return System.UInt64(x);
                        }).ToArray(System.UInt64), System.Array.type(System.UInt64));
            },
            GetDimCount: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return System.Threading.Tasks.Task.fromResult(Bridge.Int.clipu64(this.multimemory.Dims.length), System.UInt64);
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this.multimemory.RetrieveSubArray(System.Linq.Enumerable.from(memorypos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), buffer, System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32));
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this.multimemory.AssignSubArray(System.Linq.Enumerable.from(memorypos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), buffer, System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                        return System.Int64.clipu32(x);
                    }).ToArray(System.UInt32));
                return System.Threading.Tasks.Task.fromResult(0, System.Int32);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodMultiDimArrayMemoryClientImpl$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase],
        ctors: {
            ctor: function (membername, stub, element_size, direction) {
                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase.ctor.call(this, membername, stub, RobotRaconteurWeb.DataTypes.pod_t, element_size, direction);
            }
        },
        methods: {
            PackWriteRequest: function (buffer, bufferpos, count, elem_count) {
                var buffer1 = Bridge.cast((buffer), RobotRaconteurWeb.PodMultiDimArray);

                var equ = true;
                for (var i = System.Int64(0); i.lt(System.Array.getLongLength(count)); i = i.inc()) {
                    if (bufferpos[System.Array.index(System.Int64.toNumber(i), bufferpos)].ne(System.UInt64(0)) || System.UInt64(buffer1.Dims[System.Array.index(System.Int64.toNumber(i), buffer1.Dims)]).ne(count[System.Array.index(System.Int64.toNumber(i), count)])) {
                        equ = false;
                        break;
                    }
                }

                if (equ) {
                    return this.stub.rr_node.PackPodMultiDimArray(T, buffer1, this.stub.RRContext);
                } else {
                    var data = new RobotRaconteurWeb.PodMultiDimArray.$ctor1(System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32), System.Array.init(elem_count, function (){
                        return Bridge.getDefaultValue(T);
                    }, T));

                    buffer1.RetrieveSubArray(System.Linq.Enumerable.from(bufferpos, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32), data, System.Array.init(count.length, 0, System.UInt32), System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                            return System.Int64.clipu32(x);
                        }).ToArray(System.UInt32));
                    return this.stub.rr_node.PackPodMultiDimArray(T, data, this.stub.RRContext);
                }
            },
            UnpackReadResult: function (res, buffer, bufferpos, count, elem_count) {
                var buffer1 = Bridge.cast(buffer, RobotRaconteurWeb.PodMultiDimArray);
                var data = this.stub.rr_node.UnpackPodMultiDimArray(T, Bridge.cast(res, RobotRaconteurWeb.MessageElementPodMultiDimArray), this.stub.RRContext);

                var data2 = new (RobotRaconteurWeb.PodMultiDimArrayMemory$1(T)).$ctor1(data);
                data2.Read(System.Array.init(count.length, System.UInt64(0), System.UInt64), buffer1, bufferpos, count);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodMultiDimArrayMemoryServiceSkel$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemoryServiceSkelBase],
        ctors: {
            ctor: function (membername, skel, element_size, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemoryServiceSkelBase.ctor.call(this, membername, skel, RobotRaconteurWeb.DataTypes.pod_t, element_size, direction);
            }
        },
        methods: {
            DoRead: function (memorypos, bufferpos, count, elem_count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.PodMultiDimArrayMemory$1(T));
                                        buf1 = new RobotRaconteurWeb.PodMultiDimArray.$ctor1(System.Linq.Enumerable.from(count, System.UInt64).select(function (x) {
                                            return System.Int64.clipu32(x);
                                        }).ToArray(System.UInt32), System.Array.init(elem_count, function (){
                                            return Bridge.getDefaultValue(T);
                                        }, T));
                                        $task1 = mem1.Read(memorypos, buf1, System.Array.init(count.length, System.UInt64(0), System.UInt64), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(this.skel.rr_node.PackPodMultiDimArray(T, buf1, null));
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoWrite: function (memorypos, buffer, bufferpos, count, elem_count, mem) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mem1, 
                    buf1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        mem1 = Bridge.cast(mem, RobotRaconteurWeb.PodMultiDimArrayMemory$1(T));
                                        buf1 = this.skel.rr_node.UnpackPodMultiDimArray(T, Bridge.cast(buffer, RobotRaconteurWeb.MessageElementPodMultiDimArray), null);
                                        $task1 = mem1.Write(memorypos, buf1, System.Array.init(count.length, System.UInt64(0), System.UInt64), count);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodStub$1", function (T) { return {
        inherits: [RobotRaconteurWeb.IPodStub],
        alias: [
            "PackPod", "RobotRaconteurWeb$IPodStub$PackPod",
            "UnpackPod", "RobotRaconteurWeb$IPodStub$UnpackPod"
        ],
        methods: {
            PackPodToArray: function (s2) {
                var mm = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                RobotRaconteurWeb.MessageElementUtil.AddMessageElement$3(mm, RobotRaconteurWeb.MessageElementUtil.NewMessageElement(0, this.PackPod$1(s2)));
                return new RobotRaconteurWeb.MessageElementPodArray(this.TypeName, mm);
            },
            PackPodArray: function (s2) {
                if (s2 == null) {
                    return null;
                }

                var mm = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                for (var i = 0; i < s2.length; i = (i + 1) | 0) {
                    RobotRaconteurWeb.MessageElementUtil.AddMessageElement$3(mm, RobotRaconteurWeb.MessageElementUtil.NewMessageElement(i, this.PackPod$1(Bridge.ref(s2, i))));
                }
                return new RobotRaconteurWeb.MessageElementPodArray(this.TypeName, mm);
            },
            PackPodMultiDimArray: function (s3) {
                if (s3 == null) {
                    return null;
                }
                var l = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                RobotRaconteurWeb.MessageElementUtil.AddMessageElement$5(l, "dims", s3.Dims);
                var s4 = this.PackPodArray(Bridge.cast(s3.pod_array, System.Array.type(T)));
                RobotRaconteurWeb.MessageElementUtil.AddMessageElement$5(l, "array", s4);
                return new RobotRaconteurWeb.MessageElementPodMultiDimArray(this.TypeName, l);
            },
            UnpackPodFromArray: function (s2) {
                if (!Bridge.referenceEquals(s2.Type, this.TypeName)) {
                    throw new RobotRaconteurWeb.DataTypeException("pod type mismatch");
                }
                var cdataElements = s2.Elements;
                if (cdataElements.Count !== 1) {
                    throw new RobotRaconteurWeb.DataTypeException("pod type mismatch");
                }
                var e = cdataElements.getItem(0);
                if (0 !== RobotRaconteurWeb.MessageElementUtil.GetMessageElementNumber(e)) {
                    throw new RobotRaconteurWeb.DataTypeException("Error in list format");
                }
                var md = Bridge.cast(e.Data, RobotRaconteurWeb.MessageElementPod);
                return this.UnpackPod$1(md);

            },
            UnpackPodArray: function (s2) {
                var $t;
                if (!Bridge.referenceEquals(s2.Type, this.TypeName)) {
                    throw new RobotRaconteurWeb.DataTypeException("pod type mismatch");
                }
                var count = 0;
                {
                    var cdataElements = s2.Elements;
                    var o = System.Array.init(cdataElements.Count, function (){
                        return Bridge.getDefaultValue(T);
                    }, T);
                    $t = Bridge.getEnumerator(cdataElements);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (count !== RobotRaconteurWeb.MessageElementUtil.GetMessageElementNumber(e)) {
                                throw new RobotRaconteurWeb.DataTypeException("Error in list format");
                            }
                            o[System.Array.index(count, o)] = this.UnpackPod$1(Bridge.cast(e.Data, RobotRaconteurWeb.MessageElementPod));
                            count = (count + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$Dispose();
                        }
                    }
                    return o;
                }
            },
            UnpackPodMultiDimArray: function (s3) {
                if (!Bridge.referenceEquals(s3.Type, this.TypeName)) {
                    throw new RobotRaconteurWeb.DataTypeException("pod type mismatch");
                }
                var o = new RobotRaconteurWeb.PodMultiDimArray.ctor();
                var marrayElements = s3.Elements;
                {
                    o.Dims = (RobotRaconteurWeb.MessageElementUtil.FindElementAndCast(System.Array.type(System.UInt32), marrayElements, "dims"));
                    var s2 = (RobotRaconteurWeb.MessageElementUtil.FindElementAndCast(RobotRaconteurWeb.MessageElementPodArray, marrayElements, "array"));
                    o.pod_array = this.UnpackPodArray(s2);
                }
                return o;
            },
            PackPod: function (s) {
                if (Bridge.is(s, T)) {
                    var s2 = { v : System.Nullable.getValue(Bridge.cast(Bridge.unbox(s, T), T)) };
                    return this.PackPodToArray(s2);
                }

                var s3 = Bridge.as(s, System.Array.type(T));
                if (s3 != null) {
                    return this.PackPodArray(s3);
                }

                var s4 = Bridge.as(s, RobotRaconteurWeb.PodMultiDimArray);
                if (s4 != null) {
                    return this.PackPodMultiDimArray(s4);
                }

                throw new RobotRaconteurWeb.DataTypeException("Unexpected message element type for PackPod");
            },
            UnpackPod: function (m) {
                /* var m2 = m as MessageElementPod;
                if (m2 != null)
                {

                   return UnpackPod(m2);           
                }*/

                var m3 = Bridge.as(m, RobotRaconteurWeb.MessageElementPodArray);
                if (m3 != null) {
                    return this.UnpackPodArray(m3);
                }

                var m4 = Bridge.as(m, RobotRaconteurWeb.MessageElementPodMultiDimArray);
                if (m4 != null) {
                    return this.UnpackPodMultiDimArray(m4);
                }

                throw new RobotRaconteurWeb.DataTypeException("Unexpected message element type for UnpackPod");
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PropertyDefinition", {
        inherits: [RobotRaconteurWeb.MemberDefinition],
        fields: {
            Type: null
        },
        props: {
            Direction: {
                get: function () {
                    return RobotRaconteurWeb.MemberDefinition.MemberDefinition_GetDirection(this.Modifiers);
                }
            }
        },
        ctors: {
            ctor: function (ServiceEntry) {
                this.$initialize();
                RobotRaconteurWeb.MemberDefinition.ctor.call(this, ServiceEntry);
            }
        },
        methods: {
            toString: function () {
                return this.ToString(false);
            },
            ToString: function (isstruct) {
                var member_type = isstruct ? "field" : "property";
                return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ToStringFormat1(member_type, this, this.Type);
            },
            FromString: function (s) {
                var member_types = new (System.Collections.Generic.List$1(System.String)).ctor();
                member_types.add("property");
                member_types.add("field");
                RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat1(s, member_types, this, Bridge.ref(this, "Type"));
            },
            Reset: function () {
                RobotRaconteurWeb.MemberDefinition.prototype.Reset.call(this);
                RobotRaconteurWeb.TypeDefinition.op_Inequality(this.Type, null) ? this.Type.Reset() : null;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ProtocolException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ProtocolError, "RobotRaconteur.ProtocolError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ReadOnlyMemberException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ReadOnlyMember, "RobotRaconteur.ReadOnlyMember", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RequestTimeoutException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.RequestTimeout, "RobotRaconteur.RequestTimeout", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ResourceNotFoundException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ResourceNotFound, "RobotRaconteur.ResourceNotFound", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurNode.ServiceIndexer", {
        inherits: [RobotRaconteurServiceIndex.ServiceIndex],
        $kind: "nested class",
        fields: {
            node: null
        },
        events: {
            LocalNodeServicesChanged: null
        },
        alias: [
            "GetLocalNodeServices", "RobotRaconteurServiceIndex$ServiceIndex$GetLocalNodeServices",
            "GetRoutedNodes", "RobotRaconteurServiceIndex$ServiceIndex$GetRoutedNodes",
            "GetDetectedNodes", "RobotRaconteurServiceIndex$ServiceIndex$GetDetectedNodes",
            "addLocalNodeServicesChanged", "RobotRaconteurServiceIndex$ServiceIndex$addLocalNodeServicesChanged",
            "removeLocalNodeServicesChanged", "RobotRaconteurServiceIndex$ServiceIndex$removeLocalNodeServicesChanged"
        ],
        ctors: {
            ctor: function (node) {
                this.$initialize();
                this.node = node;
            }
        },
        methods: {
            GetLocalNodeServices: function (cancel) {
                var $t, $t1;
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                if (RobotRaconteurWeb.Transport.CurrentThreadTransportConnectionURL == null) {
                    throw new RobotRaconteurWeb.ServiceException("GetLocalNodeServices must be called through a transport that supports node discovery");
                }

                var o = new (System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.ServiceInfo)).ctor();
                var count = 0;

                var sc;
                this.node.services;
                {
                    sc = ($t = RobotRaconteurWeb.ServerContext, System.Linq.Enumerable.from(this.node.services.Values, $t).ToArray($t));
                }

                $t1 = Bridge.getEnumerator(sc);
                try {
                    while ($t1.moveNext()) {
                        var c = $t1.Current;
                        var s = new RobotRaconteurServiceIndex.ServiceInfo();
                        s.Attributes = c.Attributes;
                        s.Name = c.ServiceName;
                        s.RootObjectType = c.RootObjectType;
                        s.ConnectionURL = new (System.Collections.Generic.Dictionary$2(System.Int32,System.String)).ctor();
                        s.ConnectionURL.add(1, (RobotRaconteurWeb.Transport.CurrentThreadTransportConnectionURL || "") + "?" + (("nodeid=" + (System.String.trim(this.node.NodeID.toString(), System.Array.init([123, 125], System.Char)) || "") + "&service=" + (RobotRaconteurWeb.Extensions.RRUriExtensions.EscapeDataString(s.Name) || "")) || ""));
                        s.RootObjectImplements = new (System.Collections.Generic.Dictionary$2(System.Int32,System.String)).ctor();

                        var $implements = c.ServiceDef.ServiceDef().Objects.getItem(RobotRaconteurWeb.ServiceDefinitionUtil.SplitQualifiedName(c.RootObjectType).Item2).Implements;
                        for (var i = 0; i < $implements.Count; i = (i + 1) | 0) {
                            s.RootObjectImplements.add(i, $implements.getItem(i));
                        }


                        o.add(count, s);
                        count = (count + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }

                return System.Threading.Tasks.Task.fromResult(o, System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.ServiceInfo));
            },
            GetRoutedNodes: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }


                var ret = new (System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)).ctor();


                return System.Threading.Tasks.Task.fromResult(ret, System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo));

            },
            GetDetectedNodes: function (cancel) {
                var $t;
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                this.node.m_DiscoveredNodes;
                {
                    var nodeids = ($t = System.String, System.Linq.Enumerable.from(this.node.m_DiscoveredNodes.Keys, $t).ToArray($t));
                    var len = nodeids.length;

                    var ret = new (System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)).ctor();

                    for (var i = 0; i < len; i = (i + 1) | 0) {
                        var info = this.node.m_DiscoveredNodes.getItem(nodeids[System.Array.index(i, nodeids)]);

                        var ii = new RobotRaconteurServiceIndex.NodeInfo();
                        ii.NodeID = info.NodeID.ToByteArray();
                        ii.NodeName = info.NodeName;

                        var curl = new (System.Collections.Generic.Dictionary$2(System.Int32,System.String)).ctor();
                        for (var j = 0; j < info.URLs.Count; j = (j + 1) | 0) {
                            curl.add(j, info.URLs.getItem(j).URL);
                        }

                        ii.ServiceIndexConnectionURL = curl;
                        ret.add(i, ii);

                    }
                    return System.Threading.Tasks.Task.fromResult(ret, System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo));

                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.RobotRaconteurRemoteException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (error, message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.RemoteError, error, message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServerEndpoint", {
        inherits: [RobotRaconteurWeb.Endpoint],
        statics: {
            fields: {
                m_CurrentEndpoint: null,
                m_CurrentAuthenticatedUser: null
            },
            props: {
                CurrentEndpoint: {
                    get: function () {
                        return RobotRaconteurWeb.ServerEndpoint.m_CurrentEndpoint;
                    }
                },
                CurrentAuthenticatedUser: {
                    get: function () {
                        return RobotRaconteurWeb.ServerEndpoint.m_CurrentAuthenticatedUser;
                    }
                }
            }
        },
        fields: {
            service: null,
            endpoint_authenticated_user: null
        },
        props: {
            AuthenticatedUsername: {
                get: function () {
                    if (this.endpoint_authenticated_user == null) {
                        return null;
                    }

                    return this.endpoint_authenticated_user.Username;
                }
            }
        },
        ctors: {
            ctor: function (service, node) {
                this.$initialize();
                RobotRaconteurWeb.Endpoint.ctor.call(this, node);
                this.service = service;
            }
        },
        methods: {
            MessageReceived: function (m) {
                if (m.entries.Count >= 0) {
                    if (m.entries.getItem(0).EntryType === RobotRaconteurWeb.MessageEntryType.EndpointCheckCapability) {
                        this.CheckEndpointCapabilityMessage(m);
                        return;
                    }
                }

                this.LastMessageReceivedTime = System.DateTime.getUtcNow();
                RobotRaconteurWeb.ServerEndpoint.m_CurrentEndpoint = this;
                RobotRaconteurWeb.ServerEndpoint.m_CurrentAuthenticatedUser = this.endpoint_authenticated_user;
                if (this.endpoint_authenticated_user != null) {
                    this.endpoint_authenticated_user.UpdateLastAccess();
                }
                this.service.MessageReceived(m, this);
                RobotRaconteurWeb.ServerEndpoint.m_CurrentEndpoint = null;
                RobotRaconteurWeb.ServerEndpoint.m_CurrentAuthenticatedUser = null;
            },
            AuthenticateUser: function (username, credentials) {
                var u = this.service.AuthenticateUser(username, credentials);
                this.endpoint_authenticated_user = u;
                RobotRaconteurWeb.ServerEndpoint.m_CurrentAuthenticatedUser = u;
            },
            LogoutUser: function () {
                this.endpoint_authenticated_user = null;
                RobotRaconteurWeb.ServerEndpoint.m_CurrentAuthenticatedUser = null;
            },
            PeriodicCleanupTask: function () {
                if ((System.DateTime.subdd(System.DateTime.getUtcNow(), this.LastMessageReceivedTime)).getTotalMilliseconds() > this.node.EndpointInactivityTimeout) {
                    this.service.RemoveClient(this);
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceDefinitionException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ServiceDefinitionError, "RobotRaconteur.SystemDefinitionError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceEntryDefinition", {
        inherits: [RobotRaconteurWeb.NamedTypeDefinition],
        fields: {
            Members: null,
            EntryType: 0,
            IsStructure: false,
            Implements: null,
            Options: null,
            Constants: null,
            ServiceDefinition: null
        },
        props: {
            RRDataType: {
                get: function () {

                    switch (this.EntryType) {
                        case RobotRaconteurWeb.DataTypes.structure_t: 
                        case RobotRaconteurWeb.DataTypes.pod_t: 
                        case RobotRaconteurWeb.DataTypes.namedarray_t: 
                        case RobotRaconteurWeb.DataTypes.object_t: 
                            break;
                        default: 
                            throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid ServiceEntryDefinition type in " + (this.Name || ""));
                    }

                    return this.EntryType;
                }
            }
        },
        ctors: {
            init: function () {
                this.Members = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.MemberDefinition)).ctor();
                this.IsStructure = true;
                this.Implements = new (System.Collections.Generic.List$1(System.String)).ctor();
                this.Options = new (System.Collections.Generic.List$1(System.String)).ctor();
                this.Constants = new (System.Collections.Generic.Dictionary$2(System.String,RobotRaconteurWeb.ConstantDefinition)).ctor();
            },
            ctor: function (def) {
                this.$initialize();
                RobotRaconteurWeb.NamedTypeDefinition.ctor.call(this);
                this.ServiceDefinition = def;
            }
        },
        methods: {
            UnqualifyTypeWithUsing: function (s) {
                var $t;
                if (!System.Linq.Enumerable.from(s, System.Char).contains(46)) {
                    return s;
                }

                $t = Bridge.getEnumerator(this.ServiceDefinition.Using);
                try {
                    while ($t.moveNext()) {
                        var u = $t.Current;
                        if (Bridge.referenceEquals(u.QualifiedName, s)) {
                            return u.UnqualifiedName;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
                return s;
            },
            QualifyTypeWithUsing: function (s) {
                var $t;
                if (System.Linq.Enumerable.from(s, System.Char).contains(46)) {
                    return s;
                }

                $t = Bridge.getEnumerator(this.ServiceDefinition.Using);
                try {
                    while ($t.moveNext()) {
                        var u = $t.Current;
                        if (Bridge.referenceEquals(u.UnqualifiedName, s)) {
                            return u.QualifiedName;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }
                return s;
            },
            ToWriter: function (o) {
                var $t, $t1, $t2, $t3;
                switch (this.EntryType) {
                    case RobotRaconteurWeb.DataTypes.structure_t: 
                        o.WriteLine$12("struct {0}", this.Name);
                        break;
                    case RobotRaconteurWeb.DataTypes.pod_t: 
                        o.WriteLine$12("pod {0}", this.Name);
                        break;
                    case RobotRaconteurWeb.DataTypes.namedarray_t: 
                        o.WriteLine$12("namedarray {0}", this.Name);
                        break;
                    case RobotRaconteurWeb.DataTypes.object_t: 
                        o.WriteLine$12("object {0}", this.Name);
                        break;
                    default: 
                        throw new RobotRaconteurWeb.ServiceDefinitionException("Invalid ServiceEntryDefinition type in " + (this.Name || ""));
                }

                $t = Bridge.getEnumerator(this.Implements);
                try {
                    while ($t.moveNext()) {
                        var imp = $t.Current;
                        o.WriteLine$12("    implements {0}", this.UnqualifyTypeWithUsing(imp));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$Dispose();
                    }
                }

                $t1 = Bridge.getEnumerator(this.Options);
                try {
                    while ($t1.moveNext()) {
                        var option = $t1.Current;
                        o.WriteLine$12("    option {0}", option);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }

                $t2 = Bridge.getEnumerator(this.Constants);
                try {
                    while ($t2.moveNext()) {
                        var constant = $t2.Current;
                        o.WriteLine$12("    {0}", constant.toString());
                    }
                } finally {
                    if (Bridge.is($t2, System.IDisposable)) {
                        $t2.System$IDisposable$Dispose();
                    }
                }

                $t3 = Bridge.getEnumerator(this.Members.Values);
                try {
                    while ($t3.moveNext()) {
                        var d = $t3.Current;
                        var d1 = Bridge.toString(d);
                        if (this.EntryType !== RobotRaconteurWeb.DataTypes.object_t) {
                            var d2 = new System.Text.RegularExpressions.Regex.ctor("property");
                            d1 = d2.replace(d1, "field", 1);
                        }
                        o.WriteLine$11(d1);
                    }
                } finally {
                    if (Bridge.is($t3, System.IDisposable)) {
                        $t3.System$IDisposable$Dispose();
                    }
                }

                o.WriteLine$11("end");
            },
            toString: function () {
                var w = new System.IO.StringWriter.ctor();
                w.NewLine = "\n";
                this.ToWriter(w);
                return w.toString();
            },
            FromString: function (s) {
                this.FromString$1(s, 0);
            },
            FromString$1: function (s, startline) {
                var w = { v : new (System.Collections.Generic.List$1(System.Exception)).ctor() };
                this.FromString$2(s, startline, w);
            },
            FromString$2: function (s, startline, warnings) {
                var is_ = new System.IO.StringReader(s);
                this.FromStream$2(is_, startline, warnings);
            },
            FromStream: function (s) {
                this.FromStream$1(s, 0);
            },
            FromStream$1: function (s, startline) {
                var w = { v : new (System.Collections.Generic.List$1(System.Exception)).ctor() };
                this.FromStream$2(s, startline, w);
            },
            FromStream$2: function (s, startline, warnings) {
                this.Reset();

                var start_struct_regex = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*struct[ \\t]+(\\w+)[ \\t]*$");
                var start_pod_regex = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*pod[ \\t]+(\\w+)[ \\t]*$");
                var start_namedarray_regex = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*namedarray[ \\t]+(\\w+)[ \\t]*$");
                var start_object_regex = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*object[ \\t]+(\\w+)[ \\t]*$");
                var end_struct_regex = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*end[ \\t]+struct[ \\t]*$");
                var end_pod_regex = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*end[ \\t]+pod[ \\t]*$");
                var end_namedarray_regex = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*end[ \\t]+namedarray[ \\t]*$");
                var end_object_regex = new System.Text.RegularExpressions.Regex.ctor("^[ \\t]*end[ \\t]+object[ \\t]*$");

                var pos = { v : (startline - 1) >>> 0 };
                var l = { v : null };
                if (!RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_GetLine(s, l, pos)) {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Invalid object member", (startline | 0));
                }

                var start_struct_cmatch = start_struct_regex.match(l.v);
                var start_pod_cmatch = start_pod_regex.match(l.v);
                var start_namedarray_cmatch = start_namedarray_regex.match(l.v);
                var start_object_cmatch = start_object_regex.match(l.v);
                if (start_struct_cmatch.getSuccess()) {
                    this.EntryType = RobotRaconteurWeb.DataTypes.structure_t;
                    this.Name = start_struct_cmatch.getGroups().get(1).getValue();
                } else if (start_pod_cmatch.getSuccess()) {
                    this.EntryType = RobotRaconteurWeb.DataTypes.pod_t;
                    this.Name = start_pod_cmatch.getGroups().get(1).getValue();
                } else if (start_namedarray_cmatch.getSuccess()) {
                    this.EntryType = RobotRaconteurWeb.DataTypes.namedarray_t;
                    this.Name = start_namedarray_cmatch.getGroups().get(1).getValue();
                } else if (start_object_cmatch.getSuccess()) {
                    this.EntryType = RobotRaconteurWeb.DataTypes.object_t;
                    this.Name = start_object_cmatch.getGroups().get(1).getValue();
                } else {
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error", (startline | 0));
                }

                try {
                    var r_member = new System.Text.RegularExpressions.Regex.ctor("(?:^[ \\t]*(?:(option)|(implements)|(constant)|(field)|(property)|(function)|(event)|(objref)|(pipe)|(callback)|(wire)|(memory)|(end))[ \\t]+(\\w[^\\s]*(?:[ \\t]+[^\\s]+)*)[ \\t]*$)|(^[ \\t]*$)");

                    while (RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_GetLine(s, l, pos)) {

                        try {

                            var r_member_match = r_member.match(l.v);
                            if (!r_member_match.getSuccess()) {
                                if (Bridge.referenceEquals(l.v.trim(), "end")) {
                                    if (RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_GetLine(s, l, pos)) {
                                        throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error", (pos.v | 0));
                                    }
                                    return;
                                }
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error near: " + (l.v || ""), (pos.v | 0));
                            }

                            var r_member_match_blank = r_member_match.getGroups().get(15);
                            if (r_member_match_blank.getSuccess()) {
                                continue;
                            }

                            var member_key = 1;
                            for (; member_key < 13; member_key = (member_key + 1) | 0) {
                                if (r_member_match.getGroups().get(member_key).getSuccess()) {
                                    break;
                                }
                            }

                            var r_member_match_remaining = r_member_match.getGroups().get(14);

                            if ((this.EntryType !== RobotRaconteurWeb.DataTypes.object_t) && (member_key >= 5 && member_key !== 13)) {
                                throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Structures can only contain fields, constants, and options", (pos.v | 0));
                            }

                            switch (member_key) {
                                case 1: 
                                    {
                                        this.Options.add(r_member_match_remaining.getValue());
                                        warnings.v.add(new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("option keyword is deprecated", (pos.v | 0)));
                                        continue;
                                    }
                                case 2: 
                                    {
                                        if (this.Members.Count !== 0) {
                                            throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Structure implements must come before members", (pos.v | 0));
                                        }
                                        if (this.EntryType !== RobotRaconteurWeb.DataTypes.object_t) {
                                            throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Structures can only contain fields, constants, and options", (pos.v | 0));
                                        }
                                        var implements1 = { v : new (System.Collections.Generic.List$1(System.String)).ctor() };
                                        RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_FromStringTypeFormat(l.v, "implements", implements1);
                                        this.Implements.add(this.QualifyTypeWithUsing(implements1.v.getItem(0)));
                                        continue;
                                    }
                                case 3: 
                                    {
                                        if (this.Members.Count !== 0) {
                                            throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Structure constants must come before members", (pos.v | 0));
                                        }
                                        var constant_def = new RobotRaconteurWeb.ConstantDefinition.$ctor1(this);
                                        constant_def.FromString(l.v);
                                        this.Constants.add(constant_def.Name, constant_def);
                                        continue;
                                    }
                                case 4: 
                                    {
                                        if (this.EntryType === RobotRaconteurWeb.DataTypes.object_t) {
                                            throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Objects cannot contain fields.  Use properties instead.", (pos.v | 0));
                                        }
                                        var m = new RobotRaconteurWeb.PropertyDefinition(this);
                                        m.FromString(l.v);
                                        this.Members.add(m.Name, m);
                                        continue;
                                    }
                                case 5: 
                                    {
                                        var m1 = new RobotRaconteurWeb.PropertyDefinition(this);
                                        m1.FromString(l.v);
                                        this.Members.add(m1.Name, m1);
                                        continue;
                                    }
                                case 6: 
                                    {
                                        var m2 = new RobotRaconteurWeb.FunctionDefinition(this);
                                        m2.FromString(l.v);
                                        this.Members.add(m2.Name, m2);
                                        continue;
                                    }
                                case 7: 
                                    {
                                        var m3 = new RobotRaconteurWeb.EventDefinition(this);
                                        m3.FromString(l.v);
                                        this.Members.add(m3.Name, m3);
                                        continue;
                                    }
                                case 8: 
                                    {
                                        var m4 = new RobotRaconteurWeb.ObjRefDefinition(this);
                                        m4.FromString(l.v);
                                        this.Members.add(m4.Name, m4);
                                        continue;
                                    }
                                case 9: 
                                    {
                                        var m5 = new RobotRaconteurWeb.PipeDefinition(this);
                                        m5.FromString(l.v);
                                        this.Members.add(m5.Name, m5);
                                        continue;
                                    }
                                case 10: 
                                    {
                                        var m6 = new RobotRaconteurWeb.CallbackDefinition(this);
                                        m6.FromString(l.v);
                                        this.Members.add(m6.Name, m6);
                                        continue;
                                    }
                                case 11: 
                                    {
                                        var m7 = new RobotRaconteurWeb.WireDefinition(this);
                                        m7.FromString(l.v);
                                        this.Members.add(m7.Name, m7);
                                        continue;
                                    }
                                case 12: 
                                    {
                                        var m8 = new RobotRaconteurWeb.MemoryDefinition(this);
                                        m8.FromString(l.v);
                                        this.Members.add(m8.Name, m8);
                                        continue;
                                    }
                                case 13: 
                                    {
                                        if (this.EntryType === RobotRaconteurWeb.DataTypes.structure_t) {
                                            if (!end_struct_regex.isMatch(l.v)) {
                                                throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error", (pos.v | 0));
                                            }
                                        } else if (this.EntryType === RobotRaconteurWeb.DataTypes.pod_t) {
                                            if (!end_pod_regex.isMatch(l.v)) {
                                                throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error", (pos.v | 0));
                                            }
                                        } else if (this.EntryType === RobotRaconteurWeb.DataTypes.namedarray_t) {
                                            if (!end_namedarray_regex.isMatch(l.v)) {
                                                throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error", (pos.v | 0));
                                            }
                                        } else {
                                            if (!end_object_regex.isMatch(l.v)) {
                                                throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error", (pos.v | 0));
                                            }
                                        }

                                        if (RobotRaconteurWeb.detail.ServiceDefinitionUtil.ServiceDefinition_GetLine(s, l, pos)) {
                                            throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error", (pos.v | 0));
                                        }
                                        return;
                                    }
                                default: 
                                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error", (pos.v | 0));
                                    break;
                            }
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                            var e;
                            if (Bridge.is($e1, RobotRaconteurWeb.RobotRaconteurParseException)) {
                                e = $e1;
                                throw $e1;
                            } else {
                                throw $e1;
                            }
                        }
                    }
                } catch (exp) {
                    exp = System.Exception.create(exp);
                    throw new RobotRaconteurWeb.RobotRaconteurParseException.$ctor1("Parse error: " + (exp.Message || "") + " near: " + (l.v || ""), (pos.v | 0));
                }
            },
            Reset: function () {
                this.Name = "";
                this.Members.clear();
                this.EntryType = RobotRaconteurWeb.DataTypes.structure_t;
                this.Implements.clear();
                this.Options.clear();
                this.Constants.clear();
            },
            ResolveQualifiedName: function () {
                return (this.ServiceDefinition.Name || "") + "." + (this.Name || "");
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ServiceError, "RobotRaconteur.ServiceError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ServiceNotFoundException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ServiceNotFound, "RobotRaconteur.ServiceNotFound", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.StopIterationException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.StopIteration, "RobotRaconteur.StopIteration", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.SystemResourceException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.SystemResourceError, "RobotRaconteur.SystemResourceError", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.SystemResourcePermissionDeniedException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.SystemResourcePermissionDenied, "RobotRaconteur.SystemResourcePermissionDenied", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.UnknownException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (error, message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.UnknownError, error, message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ValueNotSetException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.ValueNotSet, "RobotRaconteur.ValueNotSet", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.WallRate", {
        inherits: [RobotRaconteurWeb.IRate],
        fields: {
            node: null,
            period: 0,
            start_time: null,
            last_time: null
        },
        alias: ["Sleep", "RobotRaconteurWeb$IRate$Sleep"],
        ctors: {
            init: function () {
                this.start_time = System.DateTime.getDefaultValue();
                this.last_time = System.DateTime.getDefaultValue();
            },
            ctor: function (frequency, node) {
                if (node === void 0) { node = null; }

                this.$initialize();
                if (node == null) {
                    this.node = RobotRaconteurWeb.RobotRaconteurNode.s;
                } else {
                    this.node = node;
                }

                this.period = 1000.0 / frequency;
                this.last_time = node.UtcNow;
                this.start_time = node.UtcNow;
            }
        },
        methods: {
            Sleep: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    p2, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        p2 = System.DateTime.adddt(this.last_time, System.TimeSpan.fromMilliseconds(this.period));
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = System.Threading.Tasks.Task.delay(Bridge.Int.clip32((System.DateTime.subdd(p2, this.node.UtcNow)).getTotalMilliseconds()));
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        $step = 4;
                                        continue;
                                    }
                                    case 3: {
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        this.last_time = p2;
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.WallTimer", {
        inherits: [RobotRaconteurWeb.ITimer],
        fields: {
            start_time: null,
            actual_last_time: null,
            last_time: null,
            oneshot: false,
            node: null,
            handler: null,
            cancel: null,
            Period: 0
        },
        props: {
            IsRunning: {
                get: function () {
                    this;
                    {
                        if (this.cancel == null) {
                            return false;
                        }
                        return !this.cancel.isCancellationRequested;
                    }
                }
            }
        },
        alias: [
            "Start", "RobotRaconteurWeb$ITimer$Start",
            "Stop", "RobotRaconteurWeb$ITimer$Stop",
            "Period", "RobotRaconteurWeb$ITimer$Period",
            "IsRunning", "RobotRaconteurWeb$ITimer$IsRunning"
        ],
        ctors: {
            init: function () {
                this.start_time = System.DateTime.getDefaultValue();
                this.actual_last_time = System.DateTime.getDefaultValue();
                this.last_time = System.DateTime.getDefaultValue();
            },
            ctor: function (period, handler, oneshot, node) {
                if (node === void 0) { node = null; }

                this.$initialize();
                if (node == null) {
                    this.node = RobotRaconteurWeb.RobotRaconteurNode.s;
                } else {
                    this.node = node;
                }

                this.Period = period;
                this.handler = handler;
                this.oneshot = oneshot;
            }
        },
        methods: {
            Start: function () {
                this;
                {
                    if (this.IsRunning) {
                        throw new System.InvalidOperationException.$ctor1("Already running");
                    }
                    this.start_time = this.node.UtcNow;
                    this.last_time = this.start_time;
                    this.actual_last_time = this.last_time;

                    this.cancel = new System.Threading.CancellationTokenSource();
                    if (!this.oneshot) {
                        var noop = RobotRaconteurWeb.PeriodicTask.Run$1(Bridge.fn.cacheBind(this, this.periodic_handler), System.TimeSpan.fromMilliseconds(this.Period), this.cancel.token);
                    } else {
                        RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.RunOne());
                    }

                }
            },
            RunOne: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    e, 
                    $t, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        $task1 = System.Threading.Tasks.Task.delay(this.Period);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        if (!this.cancel.isCancellationRequested) {
                                            this;
                                            {
                                                this.cancel.cancel();
                                                this.cancel = null;
                                                e = ($t = new RobotRaconteurWeb.TimerEvent(), $t.stopped = this.IsRunning, $t.last_expected = this.last_time, $t.last_real = this.actual_last_time, $t.current_expected = System.DateTime.adddt(this.last_time, System.TimeSpan.fromMilliseconds(this.Period)), $t.current_real = this.node.UtcNow, $t);
                                                this.handler(e.$clone());
                                            }
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            periodic_handler: function () {
                var $t;
                var e = new RobotRaconteurWeb.TimerEvent();
                this;
                {
                    e = ($t = new RobotRaconteurWeb.TimerEvent(), $t.stopped = this.IsRunning, $t.last_expected = this.last_time, $t.last_real = this.actual_last_time, $t.current_expected = System.DateTime.adddt(this.last_time, System.TimeSpan.fromMilliseconds(this.Period)), $t.current_real = this.node.UtcNow, $t);

                    this.last_time = e.current_expected;
                    this.actual_last_time = e.last_real;
                }
                this.handler(e.$clone());
            },
            Stop: function () {
                this;
                {
                    if (!this.IsRunning) {
                        throw new System.InvalidOperationException.$ctor1("Not running");
                    }
                    if (this.cancel != null) {
                        this.cancel.cancel();
                    }
                    this.cancel = null;
                }
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.WireClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.Wire$1(T)],
        fields: {
            stub: null,
            connection: null,
            m_MemberName: null,
            connect_lock: null,
            Close_mutex: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.m_MemberName;
                }
            },
            WireConnectCallback: {
                get: function () {
                    throw new System.InvalidOperationException.ctor();
                },
                set: function (value) {
                    throw new System.InvalidOperationException.ctor();
                }
            },
            PeekInValueCallback: {
                get: function () {
                    return (function () {
                        throw new System.InvalidOperationException.$ctor1("Invalid for wire client");
                    })();
                },
                set: function (value) {
                    throw new System.InvalidOperationException.$ctor1("Invalid for wire client");
                }
            },
            PeekOutValueCallback: {
                get: function () {
                    return (function () {
                        throw new System.InvalidOperationException.$ctor1("Invalid for wire client");
                    })();
                },
                set: function (value) {
                    throw new System.InvalidOperationException.$ctor1("Invalid for wire client");
                }
            },
            PokeOutValueCallback: {
                get: function () {
                    return (function () {
                        throw new System.InvalidOperationException.$ctor1("Invalid for wire client");
                    })();
                },
                set: function (value) {
                    throw new System.InvalidOperationException.$ctor1("Invalid for wire client");
                }
            }
        },
        ctors: {
            init: function () {
                this.connect_lock = { };
                this.Close_mutex = new RobotRaconteurWeb.AsyncMutex();
            },
            ctor: function (name, stub) {
                this.$initialize();
                RobotRaconteurWeb.Wire$1(T).ctor.call(this);
                this.m_MemberName = name;
                this.stub = stub;
                stub.RRContext.addClientServiceListener(Bridge.fn.cacheBind(this, this.ClientContextListener));
            }
        },
        methods: {
            Connect: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    ret, 
                    e, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }

                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        this.connect_lock;
                                        {
                                            if (this.connection != null) {
                                                throw new System.InvalidOperationException.$ctor1("Already connected");
                                            }
                                            this.connection = new (RobotRaconteurWeb.Wire$1.WireConnection(T))(this);

                                        }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WireConnectReq, this.MemberName);
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        ret = $taskResult1;


                                        $tcs.setResult(this.connection);
                                        return;
                                    }
                                    case 3: {
                                        this.connection = null;
                                        throw e;
                                        $async_e = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ( $step >= 1 && $step <= 2 ) {
                                e = $async_e;
                                $step = 3;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Close: function (c, e, cancel) {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    mutex, 
                    m, 
                    ret, 
                    $async_e, 
                    $async_e1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5], $step);
                                switch ($step) {
                                    case 0: {
                                        if (e === void 0) { e = null; }
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        mutex = this.Close_mutex.Enter();
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        $task1 = mutex;
                                        $step = 2;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task1.getAwaitedResult();
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WireDisconnectReq, this.MemberName);
                                        $task2 = this.stub.ProcessRequest(m, cancel);
                                        $step = 3;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        ret = $taskResult2;
                                        this.connection = null;
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        this.Close_mutex.Exit(mutex);

                                        if ($jumpFromFinally > -1) {
                                            $step = $jumpFromFinally;
                                            $jumpFromFinally = null;
                                        } else if ($async_e) {
                                            $tcs.setException($async_e);
                                            return;
                                        } else if (Bridge.isDefined($returnValue)) {
                                            $tcs.setResult($returnValue);
                                            return;
                                        }
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            if ($step >= 1 && $step <= 3) {
                                $step = 4;
                                $asyncBody();
                                return;
                            }
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            WirePacketReceived: function (m, e) {
                if (e === void 0) { e = null; }
                if (m.EntryType === RobotRaconteurWeb.MessageEntryType.WireClosed) {
                    try {
                        this.connection.Close();
                        this.connection = null;
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                } else if (m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePacket) {
                    try {
                        if (this.connection == null) {
                            return;
                        }
                        this.DispatchPacket(m.elements, this.connection);
                    } catch ($e2) {
                        $e2 = System.Exception.create($e2);
                    }
                }
            },
            SendWirePacket: function (packet, time, e) {
                if (e === void 0) { e = null; }
                var el = this.PackPacket(packet, time);
                var m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WirePacket, this.MemberName);
                m.elements = el;
                RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.stub.SendWireMessage(m, Bridge.getDefaultValue(System.Threading.CancellationToken)));
            },
            ClientContextListener: function (context, event_, param) {
                if (event_ === RobotRaconteurWeb.ClientServiceListenerEventType.ClientClosed) {
                    this.Shutdown();
                }
            },
            Shutdown: function () {
                try {
                    if (this.connection != null) {
                        this.connection.RemoteClose();
                    }
                } catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            },
            PackVarType: function (o) {
                return this.stub.RRContext.PackVarType(o);
            },
            UnpackVarType: function (o) {
                return this.stub.RRContext.UnpackVarType(o);
            },
            PeekInValue: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    mr, 
                    ts, 
                    data, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WirePeekInValueReq, this.MemberName);
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        mr = $taskResult1;
                                        ts = { };
                                        data = this.UnpackPacket(mr.elements, ts);
                                        $tcs.setResult({ Item1: data, Item2: ts.v });
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            PeekOutValue: function (cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    mr, 
                    ts, 
                    data, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WirePeekOutValueReq, this.MemberName);
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        mr = $taskResult1;
                                        ts = { };
                                        data = this.UnpackPacket(mr.elements, ts);
                                        $tcs.setResult({ Item1: data, Item2: ts.v });
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            PokeOutValue: function (value, cancel) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WirePokeOutValueReq, this.MemberName);
                                        m.elements = this.PackPacket(value, RobotRaconteurWeb.TimeSpec.Now);
                                        $task1 = this.stub.ProcessRequest(m, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.WireDefinition", {
        inherits: [RobotRaconteurWeb.MemberDefinition],
        fields: {
            Type: null
        },
        props: {
            Direction: {
                get: function () {
                    return RobotRaconteurWeb.MemberDefinition.MemberDefinition_GetDirection(this.Modifiers);
                }
            }
        },
        ctors: {
            ctor: function (ServiceEntry) {
                this.$initialize();
                RobotRaconteurWeb.MemberDefinition.ctor.call(this, ServiceEntry);
            }
        },
        methods: {
            toString: function () {
                return RobotRaconteurWeb.MemberDefinition.MemberDefinition_ToStringFormat1("wire", this, this.Type);
            },
            FromString: function (s) {
                RobotRaconteurWeb.MemberDefinition.MemberDefinition_FromStringFormat1$1(s, "wire", this, Bridge.ref(this, "Type"));
            },
            Reset: function () {
                RobotRaconteurWeb.MemberDefinition.prototype.Reset.call(this);
                RobotRaconteurWeb.TypeDefinition.op_Inequality(this.Type, null) ? this.Type.Reset() : null;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.WireServer$1", function (T) { return {
        inherits: [RobotRaconteurWeb.Wire$1(T)],
        fields: {
            m_MemberName: null,
            skel: null,
            connections: null,
            connect_callback: null,
            PeekInValueCallback: null,
            PeekOutValueCallback: null,
            PokeOutValueCallback: null,
            connectionslock: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.m_MemberName;
                }
            },
            WireConnectCallback: {
                get: function () {
                    return this.connect_callback;
                },
                set: function (value) {
                    this.connect_callback = value;
                }
            }
        },
        ctors: {
            init: function () {
                this.connections = new (System.Collections.Generic.Dictionary$2(System.UInt32,RobotRaconteurWeb.Wire$1.WireConnection(T))).ctor();
                this.connectionslock = { };
            },
            ctor: function (name, skel) {
                this.$initialize();
                RobotRaconteurWeb.Wire$1(T).ctor.call(this);
                this.m_MemberName = name;
                this.skel = skel;

            }
        },
        methods: {
            Connect: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                throw new System.InvalidOperationException.$ctor1("Cannot connect from server side");
            },
            WirePacketReceived: function (m, e) {
                if (e === void 0) { e = null; }
                if (m.EntryType === RobotRaconteurWeb.MessageEntryType.WirePacket) {
                    try {
                        this.DispatchPacket(m.elements, this.connections.getItem(e.LocalEndpoint));
                    } catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }

                }
            },
            WireCommand: function (m, e) {
                this.connectionslock;
                {
                    switch (m.EntryType) {
                        case RobotRaconteurWeb.MessageEntryType.WireConnectReq: 
                            {
                                if (!this.connections.containsKey(e.LocalEndpoint)) {
                                    this.connections.add(e.LocalEndpoint, new (RobotRaconteurWeb.Wire$1.WireConnection(T))(this, e));
                                }
                                var con = this.connections.getItem(e.LocalEndpoint);
                                if (!Bridge.staticEquals(this.connect_callback, null)) {
                                    this.connect_callback(this, con);
                                }

                                var ret = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WireConnectRet, this.MemberName);
                                return System.Threading.Tasks.Task.fromResult(ret, RobotRaconteurWeb.MessageEntry);
                            }
                        case RobotRaconteurWeb.MessageEntryType.WireDisconnectReq: 
                            {
                                if (!this.connections.containsKey(e.LocalEndpoint)) {
                                    throw new RobotRaconteurWeb.ServiceException("Invalid wire connection");
                                }
                                this.connections.remove(e.LocalEndpoint);
                                return System.Threading.Tasks.Task.fromResult(new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WireDisconnectRet, this.MemberName), RobotRaconteurWeb.MessageEntry);
                            }
                        case RobotRaconteurWeb.MessageEntryType.WirePeekInValueReq: 
                            {
                                if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.writeonly) {
                                    throw new RobotRaconteurWeb.WriteOnlyMemberException("Write only member");
                                }
                                var value = this.PeekInValueCallback(e.LocalEndpoint);
                                var mr_dat = this.PackPacket(value, RobotRaconteurWeb.TimeSpec.Now);
                                var mr = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WirePeekInValueRet, this.MemberName);
                                mr.elements = mr_dat;
                                return System.Threading.Tasks.Task.fromResult(mr, RobotRaconteurWeb.MessageEntry);
                            }
                        case RobotRaconteurWeb.MessageEntryType.WirePeekOutValueReq: 
                            {
                                if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.readonly_) {
                                    throw new RobotRaconteurWeb.ReadOnlyMemberException("Read only member");
                                }
                                var value1 = this.PeekOutValueCallback(e.LocalEndpoint);
                                var mr_dat1 = this.PackPacket(value1, RobotRaconteurWeb.TimeSpec.Now);
                                var mr1 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WirePeekOutValueRet, this.MemberName);
                                mr1.elements = mr_dat1;
                                return System.Threading.Tasks.Task.fromResult(mr1, RobotRaconteurWeb.MessageEntry);
                            }
                        case RobotRaconteurWeb.MessageEntryType.WirePokeOutValueReq: 
                            {
                                if (this.direction === RobotRaconteurWeb.MemberDefinition_Direction.readonly_) {
                                    throw new RobotRaconteurWeb.ReadOnlyMemberException("Read only member");
                                }
                                var ts = { };
                                var value2 = this.UnpackPacket(m.elements, ts);
                                this.PokeOutValueCallback(value2, ts.v, e.LocalEndpoint);
                                var mr2 = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WirePokeOutValueRet, this.MemberName);
                                return System.Threading.Tasks.Task.fromResult(mr2, RobotRaconteurWeb.MessageEntry);
                            }
                        default: 
                            throw new System.InvalidOperationException.$ctor1("Invalid Command");
                    }
                }
            },
            Close: function (c, ee, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    m, 
                    $e1, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WireClosed, this.MemberName);

                                        $task1 = this.skel.SendWireMessage(m, ee, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        try {
                                            this.connectionslock;
                                            {
                                                if (this.connections.containsKey(c.Endpoint)) {
                                                    this.connections.remove(c.Endpoint);
                                                }
                                            }
                                        } catch ($e1) {
                                            $e1 = System.Exception.create($e1);
                                        }
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SendWirePacket: function (packet, time, e) {
                if (e === void 0) { e = null; }
                if (!this.connections.containsKey(e.LocalEndpoint)) {
                    throw new System.Exception("Wire has been disconnected");
                }
                var el = this.PackPacket(packet, time);
                var m = new RobotRaconteurWeb.MessageEntry.$ctor1(RobotRaconteurWeb.MessageEntryType.WirePacket, this.MemberName);
                m.elements = el;

                RobotRaconteurWeb.Extensions.Extensions.IgnoreResult(this.skel.SendWireMessage(m, e, Bridge.getDefaultValue(System.Threading.CancellationToken)));
            },
            Shutdown: function () {
                var $t, $t1;
                var cons = ($t = RobotRaconteurWeb.Wire$1.WireConnection(T), System.Linq.Enumerable.from(this.connections.Values, $t).ToArray($t));
                $t1 = Bridge.getEnumerator(cons);
                try {
                    while ($t1.moveNext()) {
                        var con = $t1.Current;
                        try {
                            con.RemoteClose();
                        } catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$Dispose();
                    }
                }
            },
            PackVarType: function (o) {
                return this.skel.RRContext.PackVarType(o);
            },
            UnpackVarType: function (o) {
                return this.skel.RRContext.UnpackVarType(o);
            },
            PeekInValue: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                throw new System.InvalidOperationException.$ctor1("Invalid for wire server");
            },
            PeekOutValue: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                throw new System.InvalidOperationException.$ctor1("Invalid for wire server");
            },
            PokeOutValue: function (value, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                throw new System.InvalidOperationException.$ctor1("Invalid for wire server");
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.WriteOnlyMemberException", {
        inherits: [RobotRaconteurWeb.RobotRaconteurException],
        ctors: {
            ctor: function (message) {
                this.$initialize();
                RobotRaconteurWeb.RobotRaconteurException.$ctor1.call(this, RobotRaconteurWeb.MessageErrorType.WriteOnlyMember, "RobotRaconteur.WriteOnlyMember", message);
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.ArrayMemoryClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemory$1(T)],
        fields: {
            impl: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.impl.MemberName;
                }
            },
            Direction: {
                get: function () {
                    return this.impl.Direction;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.ArrayMemory$1(T).ctor.call(this);
                this.impl = new (RobotRaconteurWeb.ArrayMemoryClientImpl$1(T))(membername, stub, direction);
            }
        },
        methods: {
            Attach: function (memory) {
                throw new System.InvalidOperationException.ctor();
            },
            GetLength: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetLength();
            },
            GetMaxTransferSize: function (cancel) {
                return this.impl.GetMaxTransferSize();
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.ReadImpl(memorypos, buffer, bufferpos, count, cancel);
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.WriteImpl(memorypos, buffer, bufferpos, count, cancel);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.BrowserWebSocketClientTransport", {
        inherits: [RobotRaconteurWeb.AsyncStreamTransport],
        fields: {
            websocket: null,
            parenttransport: null,
            LastMessageReceivedTime: null,
            connecturl: null
        },
        ctors: {
            init: function () {
                this.LastMessageReceivedTime = System.DateTime.getDefaultValue();
                this.LastMessageReceivedTime = System.DateTime.getUtcNow();
            },
            ctor: function (c) {
                this.$initialize();
                RobotRaconteurWeb.AsyncStreamTransport.ctor.call(this, c.node, c.parent_adapter);
                this.parenttransport = c;
            }
        },
        methods: {
            ConnectTransport: function (url, e, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    u, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        this.connecturl = url;

                                        u = RobotRaconteurWeb.TransportUtil.ParseConnectionUrl(url);

                                        if (Bridge.referenceEquals(u.host, "")) {
                                            throw new RobotRaconteurWeb.ConnectionException("Invalid connection URL for TCP");
                                        }

                                        $task1 = this.ConnectWebsocketTransport(url, e, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            ConnectWebsocketTransport: function (url, e, cancel) {
                var $step = 0,
                    $task1, 
                    $task2, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    u, 
                    http_scheme, 
                    u2, 
                    target_nodeid, 
                    target_nodename, 
                    socket1, 
                    socket2, 
                    webstream, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1,2], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        u = RobotRaconteurWeb.TransportUtil.ParseConnectionUrl(url);
                                        /* Uri u = new Uri(url);

                                        string ap = Uri.UnescapeDataString(u.AbsolutePath);
                                        if (ap[0] == '/')
                                           ap = ap.Remove(0, 1);

                                        string[] s = ap.Split(new char[] { '/' }, StringSplitOptions.RemoveEmptyEntries);*/

                                        http_scheme = "ws";
                                        if (System.String.endsWith(u.scheme, "wss")) {
                                            http_scheme = "wss";
                                        }

                                        u2 = new System.Uri(RobotRaconteurWeb.Extensions.Extensions.ReplaceFirst(url, (u.scheme || "") + "://", (http_scheme || "") + "://"));


                                        target_nodeid = null;
                                        target_nodename = null;

                                        this.m_LocalEndpoint = e.LocalEndpoint;

                                        this.websocket = null;

                                        socket1 = new System.Net.WebSockets.ClientWebSocket();
                                        socket2 = socket1;
                                        socket2.options.addSubProtocol("robotraconteur.robotraconteur.com");
                                        $task1 = RobotRaconteurWeb.Extensions.Extensions.AwaitWithTimeout(socket1.connectAsync(u2, cancel), this.parenttransport.DefaultConnectTimeout);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        this.websocket = socket1;


                                        this.m_Connected = true;
                                        webstream = new RobotRaconteurWeb.WebSocketStreamWrapper(this.websocket);
                                        $task2 = this.ConnectStream(webstream, false, target_nodeid, target_nodename, false, false, this.parenttransport.HeartbeatPeriod, cancel);
                                        $step = 2;
                                        if ($task2.isCompleted()) {
                                            continue;
                                        }
                                        $task2.continue($asyncBody);
                                        return;
                                    }
                                    case 2: {
                                        $task2.getAwaitedResult();
                                        this.parenttransport.TransportConnections.add(this.LocalEndpoint, this);
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            GetConnectionURL: function () {
                return this.connecturl;
            }
        }
    });

    Bridge.define("RobotRaconteurWeb.MultiDimArrayMemoryClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.MultiDimArrayMemory$1(T)],
        fields: {
            impl: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.impl.MemberName;
                }
            },
            Direction: {
                get: function () {
                    return this.impl.Direction;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.MultiDimArrayMemory$1(T).ctor.call(this);
                this.impl = new (RobotRaconteurWeb.MultiDimArrayMemoryClientImpl$1(T))(membername, stub, direction);
            }
        },
        methods: {
            Attach: function (memory) {
                throw new System.InvalidOperationException.ctor();
            },
            GetDimensions: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetDimensions(cancel);
            },
            GetDimCount: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetDimCount(cancel);
            },
            GetMaxTransferSize: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetMaxTransferSize(cancel);
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        $task1 = this.impl.ReadImpl(memorypos, buffer, bufferpos, count, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        $task1 = this.impl.WriteImpl(memorypos, buffer, bufferpos, count, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedArrayMemory$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemory$1(T)],
        ctors: {
            ctor: function () {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemory$1(T).ctor.call(this);
            },
            $ctor1: function (memory) {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemory$1(T).$ctor1.call(this, memory);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedArrayStub$2", function (T, U) { return {
        inherits: [RobotRaconteurWeb.INamedArrayStub$1(T)],
        alias: [
            "PackNamedArrayStructToArray", "RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedArrayStructToArray",
            "PackNamedArray$1", "RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedArray$1",
            "PackNamedMultiDimArray", "RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedMultiDimArray",
            "UnpackNamedArrayStructFromArray", "RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedArrayStructFromArray",
            "UnpackNamedArray$1", "RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedArray$1",
            "UnpackNamedMultiDimArray", "RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedMultiDimArray",
            "PackNamedArray", "RobotRaconteurWeb$INamedArrayStub$PackNamedArray",
            "UnpackNamedArray", "RobotRaconteurWeb$INamedArrayStub$UnpackNamedArray"
        ],
        methods: {
            PackNamedArrayStructToArray: function (s2) {
                var mm = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                RobotRaconteurWeb.MessageElementUtil.AddMessageElement$3(mm, RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1("array", this.GetNumericArrayFromNamedArrayStruct(s2)));

                return new RobotRaconteurWeb.MessageElementNamedArray(this.TypeName, mm);
            },
            PackNamedArray$1: function (s2) {
                if (s2 == null) {
                    return null;
                }
                var mm = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();
                RobotRaconteurWeb.MessageElementUtil.AddMessageElement$3(mm, RobotRaconteurWeb.MessageElementUtil.NewMessageElement$1("array", this.GetNumericArrayFromNamedArray(s2)));

                return new RobotRaconteurWeb.MessageElementNamedArray(this.TypeName, mm);
            },
            PackNamedArray: function (s) {
                if (Bridge.is(s, T)) {
                    var s2 = { v : System.Nullable.getValue(Bridge.cast(Bridge.unbox(s, T), T)) };
                    return this.PackNamedArrayStructToArray(s2);
                }

                var s3 = Bridge.as(s, System.Array.type(T));
                if (s3 != null) {
                    return this.PackNamedArray$1(s3);
                }

                var s4 = Bridge.as(s, RobotRaconteurWeb.NamedMultiDimArray);
                if (s4 != null) {
                    return this.PackNamedMultiDimArray(s4);
                }

                throw new RobotRaconteurWeb.DataTypeException("Unexpected message element type for PackNamedArray");
            },
            PackNamedMultiDimArray: function (s3) {
                if (s3 == null) {
                    return null;
                }
                var l = new (System.Collections.Generic.List$1(RobotRaconteurWeb.MessageElement)).ctor();

                RobotRaconteurWeb.MessageElementUtil.AddMessageElement$5(l, "dims", s3.Dims);
                RobotRaconteurWeb.MessageElementUtil.AddMessageElement$5(l, "array", this.PackNamedArray$1(Bridge.cast(s3.namedarray_array, System.Array.type(T))));
                return new RobotRaconteurWeb.MessageElementNamedMultiDimArray(this.TypeName, l);
            },
            UnpackNamedArrayStructFromArray: function (s2) {
                if (!Bridge.referenceEquals(s2.Type, this.TypeName)) {
                    throw new RobotRaconteurWeb.DataTypeException("namedarray type mismatch");
                }
                var cdataElements = s2.Elements;
                if (cdataElements.Count !== 1) {
                    throw new RobotRaconteurWeb.DataTypeException("pod type mismatch");
                }
                var a = RobotRaconteurWeb.MessageElementUtil.FindElementAndCast(System.Array.type(U), cdataElements, "array");
                return this.GetNamedArrayStructFromNumericArray(a);
            },
            UnpackNamedArray$1: function (s2) {
                if (!Bridge.referenceEquals(s2.Type, this.TypeName)) {
                    throw new RobotRaconteurWeb.DataTypeException("namedarray type mismatch");
                }
                var cdataElements = s2.Elements;
                if (cdataElements.Count !== 1) {
                    throw new RobotRaconteurWeb.DataTypeException("pod type mismatch");
                }
                var a = RobotRaconteurWeb.MessageElementUtil.FindElementAndCast(System.Array.type(U), cdataElements, "array");
                return this.GetNamedArrayFromNumericArray(a);
            },
            UnpackNamedArray: function (m) {
                /* var m2 = m as MessageElementPod;
                if (m2 != null)
                {

                   return UnpackPod(m2);           
                }*/

                var m3 = Bridge.as(m, RobotRaconteurWeb.MessageElementNamedArray);
                if (m3 != null) {
                    return this.UnpackNamedArray$1(m3);
                }

                var m4 = Bridge.as(m, RobotRaconteurWeb.MessageElementNamedMultiDimArray);
                if (m4 != null) {
                    return this.UnpackNamedMultiDimArray(m4);
                }

                throw new RobotRaconteurWeb.DataTypeException("Unexpected message element type for UnpackNamedArray");
            },
            UnpackNamedMultiDimArray: function (s3) {
                if (!Bridge.referenceEquals(s3.Type, this.TypeName)) {
                    throw new RobotRaconteurWeb.DataTypeException("pod type mismatch");
                }
                var o = new RobotRaconteurWeb.NamedMultiDimArray.ctor();
                var marrayElements = s3.Elements;
                o.Dims = (RobotRaconteurWeb.MessageElementUtil.FindElementAndCast(System.Array.type(System.UInt32), marrayElements, "dims"));
                var s2 = (RobotRaconteurWeb.MessageElementUtil.FindElementAndCast(RobotRaconteurWeb.MessageElementNamedArray, marrayElements, "array"));
                o.namedarray_array = this.UnpackNamedArray$1(s2);
                return o;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedMultiDimArrayMemoryClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.NamedMultiDimArrayMemory$1(T)],
        fields: {
            impl: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.impl.MemberName;
                }
            },
            Direction: {
                get: function () {
                    return this.impl.Direction;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, element_size, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.NamedMultiDimArrayMemory$1(T).ctor.call(this);
                this.impl = new (RobotRaconteurWeb.NamedMultiDimArrayMemoryClientImpl$1(T))(membername, stub, element_size, direction);
            }
        },
        methods: {
            Attach: function (memory) {
                throw new System.InvalidOperationException.ctor();
            },
            GetDimensions: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetDimensions(cancel);
            },
            GetDimCount: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetDimCount(cancel);
            },
            GetMaxTransferSize: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetMaxTransferSize(cancel);
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        $task1 = this.impl.ReadImpl(memorypos, buffer, bufferpos, count, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        $task1 = this.impl.WriteImpl(memorypos, buffer, bufferpos, count, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodArrayMemory$1", function (T) { return {
        inherits: [RobotRaconteurWeb.ArrayMemory$1(T)],
        ctors: {
            ctor: function () {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemory$1(T).ctor.call(this);
            },
            $ctor1: function (memory) {
                this.$initialize();
                RobotRaconteurWeb.ArrayMemory$1(T).$ctor1.call(this, memory);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodMultiDimArrayMemoryClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.PodMultiDimArrayMemory$1(T)],
        fields: {
            impl: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.impl.MemberName;
                }
            },
            Direction: {
                get: function () {
                    return this.impl.Direction;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, element_size, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.PodMultiDimArrayMemory$1(T).ctor.call(this);
                this.impl = new (RobotRaconteurWeb.PodMultiDimArrayMemoryClientImpl$1(T))(membername, stub, element_size, direction);
            }
        },
        methods: {
            Attach: function (memory) {
                throw new System.InvalidOperationException.ctor();
            },
            GetDimensions: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetDimensions(cancel);
            },
            GetDimCount: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetDimCount(cancel);
            },
            GetMaxTransferSize: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetMaxTransferSize(cancel);
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        $task1 = this.impl.ReadImpl(memorypos, buffer, bufferpos, count, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                                        $task1 = this.impl.WriteImpl(memorypos, buffer, bufferpos, count, cancel);
                                        $step = 1;
                                        if ($task1.isCompleted()) {
                                            continue;
                                        }
                                        $task1.continue($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.NamedArrayMemoryClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.NamedArrayMemory$1(T)],
        fields: {
            impl: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.impl.MemberName;
                }
            },
            Direction: {
                get: function () {
                    return this.impl.Direction;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, element_size, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.NamedArrayMemory$1(T).ctor.call(this);
                this.impl = new (RobotRaconteurWeb.NamedArrayMemoryClientImpl$1(T))(membername, stub, element_size, direction);
            }
        },
        methods: {
            Attach: function (memory) {
                throw new System.InvalidOperationException.ctor();
            },
            GetLength: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetLength();
            },
            GetMaxTransferSize: function (cancel) {
                return this.impl.GetMaxTransferSize();
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.ReadImpl(memorypos, buffer, bufferpos, count, cancel);
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.WriteImpl(memorypos, buffer, bufferpos, count, cancel);
            }
        }
    }; });

    Bridge.define("RobotRaconteurWeb.PodArrayMemoryClient$1", function (T) { return {
        inherits: [RobotRaconteurWeb.PodArrayMemory$1(T)],
        fields: {
            impl: null
        },
        props: {
            MemberName: {
                get: function () {
                    return this.impl.MemberName;
                }
            },
            Direction: {
                get: function () {
                    return this.impl.Direction;
                }
            }
        },
        ctors: {
            ctor: function (membername, stub, element_size, direction) {
                if (direction === void 0) { direction = 2; }

                this.$initialize();
                RobotRaconteurWeb.PodArrayMemory$1(T).ctor.call(this);
                this.impl = new (RobotRaconteurWeb.PodArrayMemoryClientImpl$1(T))(membername, stub, element_size, direction);
            }
        },
        methods: {
            Attach: function (memory) {
                throw new System.InvalidOperationException.ctor();
            },
            GetLength: function (cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.GetLength();
            },
            GetMaxTransferSize: function (cancel) {
                return this.impl.GetMaxTransferSize();
            },
            Read: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.ReadImpl(memorypos, buffer, bufferpos, count, cancel);
            },
            Write: function (memorypos, buffer, bufferpos, count, cancel) {
                if (cancel === void 0) { cancel = new System.Threading.CancellationToken(); }
                return this.impl.WriteImpl(memorypos, buffer, bufferpos, count, cancel);
            }
        }
    }; });

    var $m = Bridge.setMetadata,
        $n = ["RobotRaconteurWeb","System","RobotRaconteurServiceIndex","System.Collections.Generic","System.Threading","System.Threading.Tasks","System.Net.WebSockets","System.IO","System.Text.RegularExpressions"];
    $m("RobotRaconteurServiceIndex.RobotRaconteurServiceIndexFactory", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].RobotRaconteurNode],"pi":[{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":0}],"sn":"ctor"},{"ov":true,"a":2,"n":"CreateSkel","t":8,"pi":[{"n":"path","pt":$n[1].String,"ps":0},{"n":"obj","pt":$n[1].Object,"ps":1},{"n":"context","pt":$n[0].ServerContext,"ps":2}],"sn":"CreateSkel","rt":$n[0].ServiceSkel,"p":[$n[1].String,$n[1].Object,$n[0].ServerContext]},{"ov":true,"a":2,"n":"CreateStub","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0},{"n":"path","pt":$n[1].String,"ps":1},{"n":"context","pt":$n[0].ClientContext,"ps":2}],"sn":"CreateStub","rt":$n[0].ServiceStub,"p":[$n[1].String,$n[1].String,$n[0].ClientContext]},{"ov":true,"a":2,"n":"DefString","t":8,"sn":"DefString","rt":$n[1].String},{"ov":true,"a":2,"n":"FindNamedArrayStub","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0}],"sn":"FindNamedArrayStub","rt":$n[0].INamedArrayStub,"p":[$n[1].String]},{"ov":true,"a":2,"n":"FindPodStub","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0}],"sn":"FindPodStub","rt":$n[0].IPodStub,"p":[$n[1].String]},{"ov":true,"a":2,"n":"FindStructureStub","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0}],"sn":"FindStructureStub","rt":$n[0].IStructureStub,"p":[$n[1].String]},{"ov":true,"a":2,"n":"GetServiceName","t":8,"sn":"GetServiceName","rt":$n[1].String},{"ov":true,"a":2,"n":"PackStructure","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"PackStructure","rt":$n[0].MessageElementStructure,"p":[$n[1].Object]},{"ov":true,"a":2,"n":"UnpackStructure","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementStructure,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackStructure","rt":System.Object,"p":[$n[0].MessageElementStructure]},{"a":2,"n":"NodeInfo_stubentry","t":4,"rt":$n[2].NodeInfo_stub,"sn":"NodeInfo_stubentry"},{"a":2,"n":"ServiceInfo_stubentry","t":4,"rt":$n[2].ServiceInfo_stub,"sn":"ServiceInfo_stubentry"}]}; }, $n);
    $m("RobotRaconteurServiceIndex.NodeInfo", function () { return {"att":1048577,"a":2,"at":[new RobotRaconteurWeb.RobotRaconteurServiceStruct("RobotRaconteurServiceIndex.NodeInfo")],"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"NodeID","t":4,"rt":$n[1].Array.type(System.Byte),"sn":"NodeID"},{"a":2,"n":"NodeName","t":4,"rt":$n[1].String,"sn":"NodeName"},{"a":2,"n":"ServiceIndexConnectionURL","t":4,"rt":$n[3].Dictionary$2(System.Int32,System.String),"sn":"ServiceIndexConnectionURL"}]}; }, $n);
    $m("RobotRaconteurServiceIndex.ServiceInfo", function () { return {"att":1048577,"a":2,"at":[new RobotRaconteurWeb.RobotRaconteurServiceStruct("RobotRaconteurServiceIndex.ServiceInfo")],"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"Attributes","t":4,"rt":$n[3].Dictionary$2(System.String,System.Object),"sn":"Attributes"},{"a":2,"n":"ConnectionURL","t":4,"rt":$n[3].Dictionary$2(System.Int32,System.String),"sn":"ConnectionURL"},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":2,"n":"RootObjectImplements","t":4,"rt":$n[3].Dictionary$2(System.Int32,System.String),"sn":"RootObjectImplements"},{"a":2,"n":"RootObjectType","t":4,"rt":$n[1].String,"sn":"RootObjectType"}]}; }, $n);
    $m("RobotRaconteurServiceIndex.ServiceIndex", function () { return {"att":161,"a":2,"at":[new RobotRaconteurWeb.RobotRaconteurServiceObjectInterface("RobotRaconteurServiceIndex.ServiceIndex")],"m":[{"ab":true,"a":2,"n":"GetDetectedNodes","t":8,"pi":[{"n":"rr_cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurServiceIndex$ServiceIndex$GetDetectedNodes","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)),"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"GetLocalNodeServices","t":8,"pi":[{"n":"rr_cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurServiceIndex$ServiceIndex$GetLocalNodeServices","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.ServiceInfo)),"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"GetRoutedNodes","t":8,"pi":[{"n":"rr_cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurServiceIndex$ServiceIndex$GetRoutedNodes","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)),"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"LocalNodeServicesChanged","t":2,"ad":{"ab":true,"a":2,"n":"add_LocalNodeServicesChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"RobotRaconteurServiceIndex$ServiceIndex$addLocalNodeServicesChanged","rt":$n[1].Void,"p":[Function]},"r":{"ab":true,"a":2,"n":"remove_LocalNodeServicesChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"RobotRaconteurServiceIndex$ServiceIndex$removeLocalNodeServicesChanged","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurServiceIndex.NodeInfo_stub", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[2].RobotRaconteurServiceIndexFactory],"pi":[{"n":"d","pt":$n[2].RobotRaconteurServiceIndexFactory,"ps":0}],"sn":"ctor"},{"a":2,"n":"PackStructure","t":8,"pi":[{"n":"s1","pt":$n[1].Object,"ps":0}],"sn":"PackStructure","rt":$n[0].MessageElementStructure,"p":[$n[1].Object]},{"a":2,"n":"UnpackStructure","t":8,"pi":[{"n":"m","pt":$n[0].MessageElementStructure,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackStructure","rt":System.Object,"p":[$n[0].MessageElementStructure]},{"a":1,"n":"def","t":4,"rt":$n[2].RobotRaconteurServiceIndexFactory,"sn":"def"}]}; }, $n);
    $m("RobotRaconteurServiceIndex.ServiceInfo_stub", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[2].RobotRaconteurServiceIndexFactory],"pi":[{"n":"d","pt":$n[2].RobotRaconteurServiceIndexFactory,"ps":0}],"sn":"ctor"},{"a":2,"n":"PackStructure","t":8,"pi":[{"n":"s1","pt":$n[1].Object,"ps":0}],"sn":"PackStructure","rt":$n[0].MessageElementStructure,"p":[$n[1].Object]},{"a":2,"n":"UnpackStructure","t":8,"pi":[{"n":"m","pt":$n[0].MessageElementStructure,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackStructure","rt":System.Object,"p":[$n[0].MessageElementStructure]},{"a":1,"n":"def","t":4,"rt":$n[2].RobotRaconteurServiceIndexFactory,"sn":"def"}]}; }, $n);
    $m("RobotRaconteurServiceIndex.ServiceIndex_stub", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ClientContext],"pi":[{"n":"path","pt":$n[1].String,"ps":0},{"n":"c","pt":$n[0].ClientContext,"ps":1}],"sn":"ctor"},{"ov":true,"a":5,"n":"CallbackCall","t":8,"pi":[{"n":"rr_m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallbackCall","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"ov":true,"a":5,"n":"DispatchEvent","t":8,"pi":[{"n":"rr_m","pt":$n[0].MessageEntry,"ps":0}],"sn":"DispatchEvent","rt":$n[1].Void,"p":[$n[0].MessageEntry]},{"ov":true,"a":5,"n":"DispatchPipeMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"DispatchPipeMessage","rt":$n[1].Void,"p":[$n[0].MessageEntry]},{"ov":true,"a":5,"n":"DispatchWireMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"DispatchWireMessage","rt":$n[1].Void,"p":[$n[0].MessageEntry]},{"a":2,"n":"GetDetectedNodes","t":8,"pi":[{"n":"rr_cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDetectedNodes","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)),"p":[$n[4].CancellationToken]},{"a":2,"n":"GetLocalNodeServices","t":8,"pi":[{"n":"rr_cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetLocalNodeServices","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.ServiceInfo)),"p":[$n[4].CancellationToken]},{"a":2,"n":"GetRoutedNodes","t":8,"pi":[{"n":"rr_cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetRoutedNodes","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)),"p":[$n[4].CancellationToken]},{"a":2,"n":"LocalNodeServicesChanged","t":2,"ad":{"a":2,"n":"add_LocalNodeServicesChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addLocalNodeServicesChanged","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_LocalNodeServicesChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removeLocalNodeServicesChanged","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurServiceIndex.ServiceIndex_skel", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[2].ServiceIndex,$n[0].ServerContext],"pi":[{"n":"p","pt":$n[1].String,"ps":0},{"n":"o","pt":$n[2].ServiceIndex,"ps":1},{"n":"c","pt":$n[0].ServerContext,"ps":2}],"sn":"ctor"},{"ov":true,"a":2,"n":"CallFunction","t":8,"pi":[{"n":"rr_m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"ov":true,"a":2,"n":"CallGetProperty","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallGetProperty","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"ov":true,"a":2,"n":"CallMemoryFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"CallMemoryFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"CallPipeFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"CallPipeFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"CallSetProperty","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallSetProperty","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"ov":true,"a":2,"n":"CallWireFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"CallWireFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"DispatchPipeMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"DispatchPipeMessage","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"DispatchWireMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"DispatchWireMessage","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"GetCallbackFunction","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0},{"n":"membername","pt":$n[1].String,"ps":1}],"sn":"GetCallbackFunction","rt":$n[1].Object,"p":[$n[1].UInt32,$n[1].String]},{"ov":true,"a":2,"n":"GetSubObj","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"ind","pt":$n[1].String,"ps":1}],"sn":"GetSubObj$1","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[1].String]},{"ov":true,"a":2,"n":"InitCallbackServers","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"InitCallbackServers","rt":$n[1].Void,"p":[$n[1].Object]},{"ov":true,"a":2,"n":"InitPipeServers","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"InitPipeServers","rt":$n[1].Void,"p":[$n[1].Object]},{"a":2,"n":"LocalNodeServicesChanged_Handler","t":8,"sn":"LocalNodeServicesChanged_Handler","rt":$n[1].Void},{"ov":true,"a":2,"n":"RegisterEvents","t":8,"pi":[{"n":"obj1","pt":$n[1].Object,"ps":0}],"sn":"RegisterEvents","rt":$n[1].Void,"p":[$n[1].Object]},{"ov":true,"a":2,"n":"ReleaseCastObject","t":8,"sn":"ReleaseCastObject","rt":$n[1].Void},{"ov":true,"a":2,"n":"UnregisterEvents","t":8,"pi":[{"n":"obj1","pt":$n[1].Object,"ps":0}],"sn":"UnregisterEvents","rt":$n[1].Void,"p":[$n[1].Object]},{"a":1,"n":"obj","t":16,"rt":$n[2].ServiceIndex,"g":{"a":1,"n":"get_obj","t":8,"rt":$n[2].ServiceIndex,"fg":"obj"},"fn":"obj"},{"a":1,"n":"rr_InitPipeServersRun","t":4,"rt":$n[1].Boolean,"sn":"rr_InitPipeServersRun","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}}]}; }, $n);
    $m("RobotRaconteurWeb.BrowserWebSocketTransport", function () { return {"nested":[$n[0].BrowserWebSocketTransport.AsyncStreamTransportParentImpl],"att":1048833,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].RobotRaconteurNode],"pi":[{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":0}],"sn":"ctor"},{"ov":true,"a":2,"n":"CanConnectService","t":8,"pi":[{"n":"url","pt":$n[1].String,"ps":0}],"sn":"CanConnectService","rt":$n[1].Boolean,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"ov":true,"a":2,"n":"CheckConnection","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0}],"sn":"CheckConnection","rt":$n[1].Void,"p":[$n[1].UInt32]},{"ov":true,"a":2,"n":"Close","t":8,"sn":"Close","rt":$n[5].Task},{"ov":true,"a":2,"n":"CloseTransportConnection","t":8,"pi":[{"n":"e","pt":$n[0].Endpoint,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"CloseTransportConnection","rt":$n[5].Task,"p":[$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"CreateTransportConnection","t":8,"pi":[{"n":"url","pt":$n[1].String,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"CreateTransportConnection","rt":$n[5].Task$1(RobotRaconteurWeb.ITransportConnection),"p":[$n[1].String,$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":5,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"MessageReceived","rt":$n[1].Void,"p":[$n[0].Message]},{"a":4,"n":"RemoveTransportConnection","t":8,"pi":[{"n":"e","pt":$n[1].UInt32,"ps":0}],"sn":"RemoveTransportConnection","rt":$n[1].Void,"p":[$n[1].UInt32]},{"ov":true,"a":2,"n":"SendMessage","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendMessage","rt":$n[5].Task,"p":[$n[0].Message,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"TransportCapability","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"TransportCapability","rt":$n[1].UInt32,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"AcceptWebSockets","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_AcceptWebSockets","t":8,"rt":$n[1].Boolean,"fg":"AcceptWebSockets","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"s":{"a":2,"n":"set_AcceptWebSockets","t":8,"p":[$n[1].Boolean],"rt":$n[1].Void,"fs":"AcceptWebSockets"},"fn":"AcceptWebSockets"},{"a":2,"n":"DefaultConnectTimeout","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_DefaultConnectTimeout","t":8,"rt":$n[1].Int32,"fg":"DefaultConnectTimeout","box":function ($v) { return Bridge.box($v, System.Int32);}},"s":{"a":2,"n":"set_DefaultConnectTimeout","t":8,"p":[$n[1].Int32],"rt":$n[1].Void,"fs":"DefaultConnectTimeout"},"fn":"DefaultConnectTimeout"},{"a":2,"n":"DefaultReceiveTimeout","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_DefaultReceiveTimeout","t":8,"rt":$n[1].Int32,"fg":"DefaultReceiveTimeout","box":function ($v) { return Bridge.box($v, System.Int32);}},"s":{"a":2,"n":"set_DefaultReceiveTimeout","t":8,"p":[$n[1].Int32],"rt":$n[1].Void,"fs":"DefaultReceiveTimeout"},"fn":"DefaultReceiveTimeout"},{"a":2,"n":"HeartbeatPeriod","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_HeartbeatPeriod","t":8,"rt":$n[1].Int32,"fg":"HeartbeatPeriod","box":function ($v) { return Bridge.box($v, System.Int32);}},"s":{"a":2,"n":"set_HeartbeatPeriod","t":8,"p":[$n[1].Int32],"rt":$n[1].Void,"fs":"HeartbeatPeriod"},"fn":"HeartbeatPeriod"},{"ov":true,"a":2,"n":"IsClient","t":16,"rt":$n[1].Boolean,"g":{"ov":true,"a":2,"n":"get_IsClient","t":8,"rt":$n[1].Boolean,"fg":"IsClient","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsClient"},{"ov":true,"a":2,"n":"IsServer","t":16,"rt":$n[1].Boolean,"g":{"ov":true,"a":2,"n":"get_IsServer","t":8,"rt":$n[1].Boolean,"fg":"IsServer","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsServer"},{"ov":true,"a":2,"n":"UrlSchemeString","t":16,"rt":$n[1].Array.type(System.String),"g":{"ov":true,"a":2,"n":"get_UrlSchemeString","t":8,"rt":$n[1].Array.type(System.String),"fg":"UrlSchemeString"},"fn":"UrlSchemeString"},{"a":4,"n":"TransportConnections","t":4,"rt":$n[3].Dictionary$2(System.UInt32,RobotRaconteurWeb.AsyncStreamTransport),"sn":"TransportConnections"},{"a":1,"n":"m_HeartbeatPeriod","t":4,"rt":$n[1].Int32,"sn":"m_HeartbeatPeriod","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"n":"m_Port","t":4,"rt":$n[1].Int32,"sn":"m_Port","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":4,"n":"parent_adapter","t":4,"rt":$n[0].AsyncStreamTransportParent,"sn":"parent_adapter","ro":true},{"a":1,"n":"transportcancel","t":4,"rt":$n[4].CancellationTokenSource,"sn":"transportcancel"},{"a":1,"n":"transportopen","t":4,"rt":$n[1].Boolean,"sn":"transportopen","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"backing":true,"n":"<AcceptWebSockets>k__BackingField","t":4,"rt":$n[1].Boolean,"sn":"AcceptWebSockets","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"backing":true,"n":"<DefaultConnectTimeout>k__BackingField","t":4,"rt":$n[1].Int32,"sn":"DefaultConnectTimeout","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"backing":true,"n":"<DefaultReceiveTimeout>k__BackingField","t":4,"rt":$n[1].Int32,"sn":"DefaultReceiveTimeout","box":function ($v) { return Bridge.box($v, System.Int32);}}]}; }, $n);
    $m("RobotRaconteurWeb.BrowserWebSocketTransport.AsyncStreamTransportParentImpl", function () { return {"td":$n[0].BrowserWebSocketTransport,"att":1048579,"a":1,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].BrowserWebSocketTransport],"pi":[{"n":"parent","pt":$n[0].BrowserWebSocketTransport,"ps":0}],"sn":"ctor"},{"a":2,"n":"AddTransportConnection","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0},{"n":"transport","pt":$n[0].AsyncStreamTransport,"ps":1}],"sn":"AddTransportConnection","rt":$n[1].Void,"p":[$n[1].UInt32,$n[0].AsyncStreamTransport]},{"a":2,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"MessageReceived","rt":$n[5].Task,"p":[$n[0].Message]},{"a":2,"n":"RemoveTransportConnection","t":8,"pi":[{"n":"transport","pt":$n[0].AsyncStreamTransport,"ps":0}],"sn":"RemoveTransportConnection","rt":$n[1].Void,"p":[$n[0].AsyncStreamTransport]},{"a":2,"n":"SpecialRequest","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"SpecialRequest","rt":$n[5].Task$1(RobotRaconteurWeb.Message),"p":[$n[0].Message]},{"a":1,"n":"parent","t":4,"rt":$n[0].BrowserWebSocketTransport,"sn":"parent"}]}; }, $n);
    $m("RobotRaconteurWeb.BrowserWebSocketClientTransport", function () { return {"att":1048832,"a":4,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].BrowserWebSocketTransport],"pi":[{"n":"c","pt":$n[0].BrowserWebSocketTransport,"ps":0}],"sn":"ctor"},{"a":2,"n":"ConnectTransport","t":8,"pi":[{"n":"url","pt":$n[1].String,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"ConnectTransport","rt":$n[5].Task,"p":[$n[1].String,$n[0].Endpoint,$n[4].CancellationToken]},{"a":1,"n":"ConnectWebsocketTransport","t":8,"pi":[{"n":"url","pt":$n[1].String,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"ConnectWebsocketTransport","rt":$n[5].Task,"p":[$n[1].String,$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"GetConnectionURL","t":8,"sn":"GetConnectionURL","rt":$n[1].String},{"a":1,"n":"LastMessageReceivedTime","t":4,"rt":$n[1].DateTime,"sn":"LastMessageReceivedTime","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"n":"connecturl","t":4,"rt":$n[1].String,"sn":"connecturl"},{"a":1,"n":"parenttransport","t":4,"rt":$n[0].BrowserWebSocketTransport,"sn":"parenttransport"},{"a":1,"n":"websocket","t":4,"rt":$n[6].ClientWebSocket,"sn":"websocket"}]}; }, $n);
    $m("RobotRaconteurWeb.WebSocketStreamWrapper", function () { return {"att":1048576,"a":4,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[6].ClientWebSocket],"pi":[{"n":"websocket","pt":$n[6].ClientWebSocket,"ps":0}],"sn":"ctor"},{"ov":true,"a":2,"n":"BeginRead","t":8,"pi":[{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"offset","pt":$n[1].Int32,"ps":1},{"n":"count","pt":$n[1].Int32,"ps":2},{"n":"callback","pt":Function,"ps":3},{"n":"state","pt":$n[1].Object,"ps":4}],"sn":"BeginRead","rt":$n[1].IAsyncResult,"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32,Function,$n[1].Object]},{"ov":true,"a":2,"n":"BeginWrite","t":8,"pi":[{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"offset","pt":$n[1].Int32,"ps":1},{"n":"count","pt":$n[1].Int32,"ps":2},{"n":"callback","pt":Function,"ps":3},{"n":"state","pt":$n[1].Object,"ps":4}],"sn":"BeginWrite","rt":$n[1].IAsyncResult,"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32,Function,$n[1].Object]},{"ov":true,"a":2,"n":"Close","t":8,"sn":"Close","rt":$n[1].Void},{"a":1,"n":"DoBeginRead","t":8,"pi":[{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"offset","pt":$n[1].Int32,"ps":1},{"n":"count","pt":$n[1].Int32,"ps":2}],"sn":"DoBeginRead","rt":$n[5].Task$1(System.Int32),"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32]},{"a":1,"n":"DoBeginWrite","t":8,"pi":[{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"offset","pt":$n[1].Int32,"ps":1},{"n":"count","pt":$n[1].Int32,"ps":2}],"sn":"DoBeginWrite","rt":$n[5].Task$1(System.Int32),"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32]},{"ov":true,"a":2,"n":"EndRead","t":8,"pi":[{"n":"asyncResult","pt":$n[1].IAsyncResult,"ps":0}],"sn":"EndRead","rt":$n[1].Int32,"p":[$n[1].IAsyncResult],"box":function ($v) { return Bridge.box($v, System.Int32);}},{"ov":true,"a":2,"n":"EndWrite","t":8,"pi":[{"n":"asyncResult","pt":$n[1].IAsyncResult,"ps":0}],"sn":"EndWrite","rt":$n[1].Void,"p":[$n[1].IAsyncResult]},{"ov":true,"a":2,"n":"Flush","t":8,"sn":"Flush","rt":$n[1].Void},{"ov":true,"a":2,"n":"Read","t":8,"pi":[{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"offset","pt":$n[1].Int32,"ps":1},{"n":"count","pt":$n[1].Int32,"ps":2}],"sn":"Read","rt":$n[1].Int32,"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32],"box":function ($v) { return Bridge.box($v, System.Int32);}},{"ov":true,"a":2,"n":"Seek","t":8,"pi":[{"n":"offset","pt":$n[1].Int64,"ps":0},{"n":"origin","pt":$n[7].SeekOrigin,"ps":1}],"sn":"Seek","rt":$n[1].Int64,"p":[$n[1].Int64,$n[7].SeekOrigin]},{"ov":true,"a":2,"n":"SetLength","t":8,"pi":[{"n":"value","pt":$n[1].Int64,"ps":0}],"sn":"SetLength","rt":$n[1].Void,"p":[$n[1].Int64]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"offset","pt":$n[1].Int32,"ps":1},{"n":"count","pt":$n[1].Int32,"ps":2}],"sn":"Write","rt":$n[1].Void,"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32]},{"ov":true,"a":2,"n":"CanRead","t":16,"rt":$n[1].Boolean,"g":{"ov":true,"a":2,"n":"get_CanRead","t":8,"rt":$n[1].Boolean,"fg":"CanRead","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"CanRead"},{"ov":true,"a":2,"n":"CanSeek","t":16,"rt":$n[1].Boolean,"g":{"ov":true,"a":2,"n":"get_CanSeek","t":8,"rt":$n[1].Boolean,"fg":"CanSeek","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"CanSeek"},{"ov":true,"a":2,"n":"CanWrite","t":16,"rt":$n[1].Boolean,"g":{"ov":true,"a":2,"n":"get_CanWrite","t":8,"rt":$n[1].Boolean,"fg":"CanWrite","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"CanWrite"},{"ov":true,"a":2,"n":"Length","t":16,"rt":$n[1].Int64,"g":{"ov":true,"a":2,"n":"get_Length","t":8,"rt":$n[1].Int64,"fg":"Length"},"fn":"Length"},{"ov":true,"a":2,"n":"Position","t":16,"rt":$n[1].Int64,"g":{"ov":true,"a":2,"n":"get_Position","t":8,"rt":$n[1].Int64,"fg":"Position"},"s":{"ov":true,"a":2,"n":"set_Position","t":8,"p":[$n[1].Int64],"rt":$n[1].Void,"fs":"Position"},"fn":"Position"},{"a":1,"n":"websock","t":4,"rt":$n[6].ClientWebSocket,"sn":"websock"}]}; }, $n);
    $m("RobotRaconteurWeb.AsyncMutex", function () { return {"nested":[$n[0].AsyncMutex.LockHandle],"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"CancelAll","t":8,"sn":"CancelAll","rt":$n[1].Void},{"a":2,"n":"Enter","t":8,"sn":"Enter","rt":$n[5].Task},{"a":2,"n":"Exit","t":8,"pi":[{"n":"t","pt":$n[5].Task,"ps":0}],"sn":"Exit","rt":$n[1].Void,"p":[$n[5].Task]},{"a":2,"n":"Lock","t":8,"sn":"Lock","rt":$n[5].Task$1(System.IDisposable)},{"a":2,"n":"LockWithTimeout","t":8,"pi":[{"n":"timeout","pt":$n[1].Int32,"ps":0}],"sn":"LockWithTimeout","rt":$n[5].Task$1(System.IDisposable),"p":[$n[1].Int32]},{"a":1,"n":"current","t":4,"rt":$n[5].Task,"sn":"current"},{"a":1,"n":"waiting_tasks","t":4,"rt":$n[3].Queue$1(System.Threading.Tasks.TaskCompletionSource),"sn":"waiting_tasks"}]}; }, $n);
    $m("RobotRaconteurWeb.AsyncMutex.LockHandle", function () { return {"td":$n[0].AsyncMutex,"att":1048578,"a":2,"m":[{"a":4,"n":".ctor","t":1,"p":[$n[0].AsyncMutex,$n[5].Task],"pi":[{"n":"owner","pt":$n[0].AsyncMutex,"ps":0},{"n":"task","pt":$n[5].Task,"ps":1}],"sn":"ctor"},{"a":2,"n":"Dispose","t":8,"sn":"Dispose","rt":$n[1].Void},{"a":1,"n":"owner","t":4,"rt":$n[0].AsyncMutex,"sn":"owner"},{"a":1,"n":"task","t":4,"rt":$n[5].Task,"sn":"task"}]}; }, $n);
    $m("RobotRaconteurWeb.AsyncStreamTransport", function () { return {"att":1048705,"a":2,"m":[{"a":3,"n":".ctor","t":1,"p":[$n[0].RobotRaconteurNode,$n[0].AsyncStreamTransportParent],"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"parent","pt":$n[0].AsyncStreamTransportParent,"ps":1}],"sn":"ctor"},{"v":true,"a":2,"n":"CheckConnection","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0}],"sn":"CheckConnection","rt":$n[1].Void,"p":[$n[1].UInt32]},{"a":2,"n":"CheckStreamCapability","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"CheckStreamCapability","rt":$n[5].Task$1(System.UInt32),"p":[$n[1].String,$n[4].CancellationToken]},{"a":3,"n":"CheckStreamCapability_MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"CheckStreamCapability_MessageReceived","rt":$n[1].Void,"p":[$n[0].Message]},{"v":true,"a":2,"n":"Close","t":8,"sn":"Close","rt":$n[1].Void},{"a":3,"n":"ConnectStream","t":8,"pi":[{"n":"s","pt":$n[7].Stream,"ps":0},{"n":"is_server","pt":$n[1].Boolean,"ps":1},{"n":"target_nodeid","pt":$n[0].NodeID,"ps":2},{"n":"target_nodename","pt":$n[1].String,"ps":3},{"n":"starttls","pt":$n[1].Boolean,"ps":4},{"n":"requiretls","pt":$n[1].Boolean,"ps":5},{"n":"heartbeat_period","pt":$n[1].Int32,"ps":6},{"n":"cancel","pt":$n[4].CancellationToken,"ps":7}],"sn":"ConnectStream","rt":$n[5].Task,"p":[$n[7].Stream,$n[1].Boolean,$n[0].NodeID,$n[1].String,$n[1].Boolean,$n[1].Boolean,$n[1].Int32,$n[4].CancellationToken]},{"a":1,"n":"DoHeartbeat","t":8,"sn":"DoHeartbeat","rt":$n[5].Task},{"a":3,"n":"DoReceive","t":8,"sn":"DoReceive","rt":$n[5].Task},{"ab":true,"a":2,"n":"GetConnectionURL","t":8,"sn":"GetConnectionURL","rt":$n[1].String},{"v":true,"a":2,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"MessageReceived","rt":$n[5].Task,"p":[$n[0].Message]},{"v":true,"a":3,"n":"PackStreamOpRequest","t":8,"pi":[{"n":"command","pt":$n[1].String,"ps":0},{"n":"args","pt":$n[1].Object,"ps":1}],"sn":"PackStreamOpRequest","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[1].String,$n[1].Object]},{"v":true,"a":3,"n":"ProcessMessage","t":8,"pi":[{"n":"mes","pt":$n[0].Message,"ps":0}],"sn":"ProcessMessage","rt":$n[5].Task,"p":[$n[0].Message]},{"v":true,"a":2,"n":"ProcessMessage2","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"ProcessMessage2","rt":$n[5].Task,"p":[$n[0].Message]},{"v":true,"a":3,"n":"ProcessStreamOpRequest","t":8,"pi":[{"n":"request","pt":$n[0].MessageEntry,"ps":0},{"n":"header","pt":$n[0].MessageHeader,"ps":1}],"sn":"ProcessStreamOpRequest","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].MessageHeader]},{"a":3,"n":"RequestReceivePause","t":8,"sn":"RequestReceivePause","rt":$n[5].Task},{"a":3,"n":"RequestSendPause","t":8,"sn":"RequestSendPause","rt":$n[5].Task},{"a":3,"n":"ResumeReceivePause","t":8,"sn":"ResumeReceivePause","rt":$n[5].Task},{"a":3,"n":"ResumeSendPause","t":8,"sn":"ResumeSendPause","rt":$n[5].Task},{"v":true,"a":2,"n":"SendMessage","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendMessage","rt":$n[5].Task,"p":[$n[0].Message,$n[4].CancellationToken]},{"v":true,"a":2,"n":"StreamCapabilities","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"StreamCapabilities","rt":$n[1].UInt32,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"v":true,"a":3,"n":"StreamOp","t":8,"pi":[{"n":"command","pt":$n[1].String,"ps":0},{"n":"args","dv":null,"o":true,"pt":$n[1].Object,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"StreamOp","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[1].Object,$n[4].CancellationToken]},{"v":true,"a":3,"n":"StreamOpMessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"StreamOpMessageReceived","rt":$n[5].Task,"p":[$n[0].Message]},{"v":true,"a":3,"n":"UnpackStreamOpResponse","t":8,"pi":[{"n":"response","pt":$n[0].MessageEntry,"ps":0},{"n":"header","pt":$n[0].MessageHeader,"ps":1}],"sn":"UnpackStreamOpResponse","rt":$n[5].Task$1(System.Object),"p":[$n[0].MessageEntry,$n[0].MessageHeader]},{"a":2,"n":"Connected","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_Connected","t":8,"rt":$n[1].Boolean,"fg":"Connected","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"Connected"},{"a":2,"n":"IsTls","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsTls","t":8,"rt":$n[1].Boolean,"fg":"IsTls","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsTls"},{"a":2,"n":"LocalEndpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_LocalEndpoint","t":8,"rt":$n[1].UInt32,"fg":"LocalEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"LocalEndpoint"},{"a":2,"n":"RemoteEndpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_RemoteEndpoint","t":8,"rt":$n[1].UInt32,"fg":"RemoteEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"RemoteEndpoint"},{"a":2,"n":"RemoteNodeID","t":16,"rt":$n[0].NodeID,"g":{"a":2,"n":"get_RemoteNodeID","t":8,"rt":$n[0].NodeID,"fg":"RemoteNodeID"},"fn":"RemoteNodeID"},{"a":2,"n":"RequireTls","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_RequireTls","t":8,"rt":$n[1].Boolean,"fg":"RequireTls","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"RequireTls"},{"a":1,"n":"CheckStreamCapability_queue","t":4,"rt":$n[3].Queue$1(System.Threading.Tasks.TaskCompletionSource),"sn":"CheckStreamCapability_queue"},{"a":1,"n":"CheckStreamCapability_ret","t":4,"rt":$n[5].TaskCompletionSource,"sn":"CheckStreamCapability_ret"},{"a":2,"n":"ReceiveTimeout","t":4,"rt":$n[1].Int32,"sn":"ReceiveTimeout","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":3,"n":"basestream","t":4,"rt":$n[7].Stream,"sn":"basestream"},{"a":3,"n":"cancellationToken","t":4,"rt":$n[4].CancellationTokenSource,"sn":"cancellationToken"},{"a":3,"n":"is_server","t":4,"rt":$n[1].Boolean,"sn":"is_server","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"m_Connected","t":4,"rt":$n[1].Boolean,"sn":"m_Connected","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"m_HeartbeatPeriod","t":4,"rt":$n[1].Int32,"sn":"m_HeartbeatPeriod","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":3,"n":"m_IsTls","t":4,"rt":$n[1].Boolean,"sn":"m_IsTls","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"m_LocalEndpoint","t":4,"rt":$n[1].UInt32,"sn":"m_LocalEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":3,"n":"m_RemoteEndpoint","t":4,"rt":$n[1].UInt32,"sn":"m_RemoteEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":3,"n":"m_RemoteNodeID","t":4,"rt":$n[0].NodeID,"sn":"m_RemoteNodeID"},{"a":3,"n":"m_RequireTls","t":4,"rt":$n[1].Boolean,"sn":"m_RequireTls","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"mread","t":4,"rt":$n[7].MemoryStream,"sn":"mread"},{"a":3,"n":"mwrite","t":4,"rt":$n[7].MemoryStream,"sn":"mwrite"},{"a":3,"n":"node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"node","ro":true},{"a":3,"n":"parent","t":4,"rt":$n[0].AsyncStreamTransportParent,"sn":"parent"},{"a":1,"n":"pause_receive_task","t":4,"rt":$n[5].TaskCompletionSource,"sn":"pause_receive_task"},{"a":1,"n":"pause_send_task","t":4,"rt":$n[5].TaskCompletionSource,"sn":"pause_send_task"},{"a":1,"n":"recbuf","t":4,"rt":$n[1].Array.type(System.Byte),"sn":"recbuf"},{"a":1,"n":"request_receive_pause","t":4,"rt":$n[1].Boolean,"sn":"request_receive_pause","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"request_receive_pause_task","t":4,"rt":$n[5].TaskCompletionSource,"sn":"request_receive_pause_task"},{"a":1,"n":"request_send_pause","t":4,"rt":$n[1].Boolean,"sn":"request_send_pause","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"request_send_pause_task","t":4,"rt":$n[5].TaskCompletionSource,"sn":"request_send_pause_task"},{"a":1,"n":"send_queue","t":4,"rt":$n[3].List$1(System.Tuple$2(System.Threading.Tasks.TaskCompletionSource,RobotRaconteurWeb.Message)),"sn":"send_queue"},{"a":1,"n":"sendbuf","t":4,"rt":$n[1].Array.type(System.Byte),"sn":"sendbuf"},{"a":1,"n":"sending","t":4,"rt":$n[1].Boolean,"sn":"sending","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"sreader","t":4,"rt":$n[0].ArrayBinaryReader,"sn":"sreader"},{"a":1,"n":"streamop_queue","t":4,"rt":$n[3].Queue$1(System.Threading.Tasks.TaskCompletionSource),"sn":"streamop_queue"},{"a":1,"n":"streamop_ret","t":4,"rt":$n[5].TaskCompletionSource,"sn":"streamop_ret"},{"a":3,"n":"swriter","t":4,"rt":$n[0].ArrayBinaryWriter,"sn":"swriter"},{"a":3,"n":"target_nodeid","t":4,"rt":$n[0].NodeID,"sn":"target_nodeid"},{"a":3,"n":"target_nodename","t":4,"rt":$n[1].String,"sn":"target_nodename"},{"a":1,"n":"tlastrec","t":4,"rt":$n[1].DateTime,"sn":"tlastrec","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"n":"tlastrec_mes","t":4,"rt":$n[1].DateTime,"sn":"tlastrec_mes","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"n":"tlastsend","t":4,"rt":$n[1].DateTime,"sn":"tlastsend","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}}]}; }, $n);
    $m("RobotRaconteurWeb.AsyncStreamTransportParent", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"AddTransportConnection","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0},{"n":"transport","pt":$n[0].AsyncStreamTransport,"ps":1}],"sn":"RobotRaconteurWeb$AsyncStreamTransportParent$AddTransportConnection","rt":$n[1].Void,"p":[$n[1].UInt32,$n[0].AsyncStreamTransport]},{"ab":true,"a":2,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"RobotRaconteurWeb$AsyncStreamTransportParent$MessageReceived","rt":$n[5].Task,"p":[$n[0].Message]},{"ab":true,"a":2,"n":"RemoveTransportConnection","t":8,"pi":[{"n":"transport","pt":$n[0].AsyncStreamTransport,"ps":0}],"sn":"RobotRaconteurWeb$AsyncStreamTransportParent$RemoveTransportConnection","rt":$n[1].Void,"p":[$n[0].AsyncStreamTransport]},{"ab":true,"a":2,"n":"SpecialRequest","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"RobotRaconteurWeb$AsyncStreamTransportParent$SpecialRequest","rt":$n[5].Task$1(RobotRaconteurWeb.Message),"p":[$n[0].Message]}]}; }, $n);
    $m("RobotRaconteurWeb.Callback$1", function (T) { return {"att":1048705,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"ctor"},{"ab":true,"a":2,"n":"GetClientFunction","t":8,"pi":[{"n":"e","pt":$n[0].Endpoint,"ps":0}],"sn":"GetClientFunction","rt":T,"p":[$n[0].Endpoint]},{"ab":true,"a":2,"n":"GetClientFunction","t":8,"pi":[{"n":"e","pt":$n[1].UInt32,"ps":0}],"sn":"GetClientFunction$1","rt":T,"p":[$n[1].UInt32]},{"ab":true,"a":2,"n":"Function","t":16,"rt":T,"g":{"ab":true,"a":2,"n":"get_Function","t":8,"rt":T,"fg":"Function"},"s":{"ab":true,"a":2,"n":"set_Function","t":8,"p":[T],"rt":$n[1].Void,"fs":"Function"},"fn":"Function"},{"a":3,"n":"m_MemberName","t":4,"rt":$n[1].String,"sn":"m_MemberName"},{"a":1,"backing":true,"n":"<Function>k__BackingField","t":4,"rt":T,"sn":"Function"}]}; }, $n);
    $m("RobotRaconteurWeb.CallbackClient$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"ctor"},{"ov":true,"a":2,"n":"GetClientFunction","t":8,"pi":[{"n":"e","pt":$n[0].Endpoint,"ps":0}],"sn":"GetClientFunction","rt":T,"p":[$n[0].Endpoint]},{"ov":true,"a":2,"n":"GetClientFunction","t":8,"pi":[{"n":"e","pt":$n[1].UInt32,"ps":0}],"sn":"GetClientFunction$1","rt":T,"p":[$n[1].UInt32]},{"ov":true,"a":2,"n":"Function","t":16,"rt":T,"g":{"ov":true,"a":2,"n":"get_Function","t":8,"rt":T,"fg":"Function"},"s":{"ov":true,"a":2,"n":"set_Function","t":8,"p":[T],"rt":$n[1].Void,"fs":"Function"},"fn":"Function"},{"a":1,"n":"function","t":4,"rt":T,"sn":"function"}]}; }, $n);
    $m("RobotRaconteurWeb.CallbackServer$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel],"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1}],"sn":"ctor"},{"ov":true,"a":2,"n":"GetClientFunction","t":8,"pi":[{"n":"e","pt":$n[0].Endpoint,"ps":0}],"sn":"GetClientFunction","rt":T,"p":[$n[0].Endpoint]},{"ov":true,"a":2,"n":"GetClientFunction","t":8,"pi":[{"n":"e","pt":$n[1].UInt32,"ps":0}],"sn":"GetClientFunction$1","rt":T,"p":[$n[1].UInt32]},{"ov":true,"a":2,"n":"Function","t":16,"rt":T,"g":{"ov":true,"a":2,"n":"get_Function","t":8,"rt":T,"fg":"Function"},"s":{"ov":true,"a":2,"n":"set_Function","t":8,"p":[T],"rt":$n[1].Void,"fs":"Function"},"fn":"Function"},{"a":1,"n":"skel","t":4,"rt":$n[0].ServiceSkel,"sn":"skel"}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceStub", function () { return {"att":1048705,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ClientContext],"pi":[{"n":"path","pt":$n[1].String,"ps":0},{"n":"c","pt":$n[0].ClientContext,"ps":1}],"sn":"ctor"},{"v":true,"a":5,"n":"CallbackCall","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallbackCall","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"ab":true,"a":5,"n":"DispatchEvent","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"DispatchEvent","rt":$n[1].Void,"p":[$n[0].MessageEntry]},{"v":true,"a":5,"n":"DispatchPipeMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"DispatchPipeMessage","rt":$n[1].Void,"p":[$n[0].MessageEntry]},{"v":true,"a":5,"n":"DispatchWireMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"DispatchWireMessage","rt":$n[1].Void,"p":[$n[0].MessageEntry]},{"a":2,"n":"FindObjRef","t":8,"pi":[{"n":"n","pt":$n[1].String,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"FindObjRef$1","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"FindObjRef","t":8,"pi":[{"n":"n","pt":$n[1].String,"ps":0},{"n":"i","pt":$n[1].String,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"FindObjRef","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"FindObjRefTyped","t":8,"pi":[{"n":"n","pt":$n[1].String,"ps":0},{"n":"objecttype","pt":$n[1].String,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"FindObjRefTyped$1","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"FindObjRefTyped","t":8,"pi":[{"n":"n","pt":$n[1].String,"ps":0},{"n":"i","pt":$n[1].String,"ps":1},{"n":"objecttype","pt":$n[1].String,"ps":2},{"n":"cancel","pt":$n[4].CancellationToken,"ps":3}],"sn":"FindObjRefTyped","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[1].String,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"ProcessRequest","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"ProcessRequest","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[4].CancellationToken]},{"a":5,"n":"RRReleaseContext","t":8,"sn":"RRReleaseContext","rt":$n[1].Void},{"a":5,"n":"SendPipeMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendPipeMessage","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[4].CancellationToken]},{"a":5,"n":"SendWireMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendWireMessage","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[4].CancellationToken]},{"a":2,"n":"RRContext","t":16,"rt":$n[0].ClientContext,"g":{"a":2,"n":"get_RRContext","t":8,"rt":$n[0].ClientContext,"fg":"RRContext"},"fn":"RRContext"},{"a":5,"n":"RRServicePath","t":4,"rt":$n[1].String,"sn":"RRServicePath","ro":true},{"a":4,"n":"rr_async_mutex","t":4,"rt":$n[0].AsyncMutex,"sn":"rr_async_mutex","ro":true},{"a":5,"n":"rr_context","t":4,"rt":$n[0].ClientContext,"sn":"rr_context"},{"a":1,"n":"rr_context_lock","t":4,"rt":$n[1].Object,"sn":"rr_context_lock"},{"a":5,"n":"rr_node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"rr_node"}]}; }, $n);
    $m("RobotRaconteurWeb.ClientContext", function () { return {"nested":[Function],"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].RobotRaconteurNode],"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0}],"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceFactory,$n[0].RobotRaconteurNode],"pi":[{"n":"service_def","pt":$n[0].ServiceFactory,"ps":0},{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":1}],"sn":"$ctor1"},{"a":2,"n":"AuthenticateUser","t":8,"pi":[{"n":"username","pt":$n[1].String,"ps":0},{"n":"credentials","pt":$n[1].Object,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"AuthenticateUser","rt":$n[5].Task$1(System.String),"p":[$n[1].String,$n[1].Object,$n[4].CancellationToken]},{"a":2,"n":"CheckServiceCapability","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"CheckServiceCapability","rt":$n[5].Task$1(System.UInt32),"p":[$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"Close","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Close","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"a":2,"n":"ConnectService","t":8,"pi":[{"n":"c","pt":$n[0].Transport,"ps":0},{"n":"url","pt":$n[1].String,"ps":1},{"n":"username","dv":null,"o":true,"pt":$n[1].String,"ps":2},{"n":"credentials","dv":null,"o":true,"pt":$n[1].Object,"ps":3},{"n":"objecttype","dv":null,"o":true,"pt":$n[1].String,"ps":4},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":5}],"sn":"ConnectService","rt":$n[5].Task$1(System.Object),"p":[$n[0].Transport,$n[1].String,$n[1].String,$n[1].Object,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"FindObjRef","t":8,"pi":[{"n":"path","pt":$n[1].String,"ps":0},{"n":"objecttype","pt":$n[1].String,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"FindObjRef","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"GetPulledServiceType","t":8,"pi":[{"n":"type","pt":$n[1].String,"ps":0}],"sn":"GetPulledServiceType","rt":$n[0].ServiceFactory,"p":[$n[1].String]},{"a":2,"n":"GetPulledServiceTypes","t":8,"sn":"GetPulledServiceTypes","rt":$n[1].Array.type(System.String)},{"a":2,"n":"LogoutUser","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"LogoutUser","rt":$n[5].Task$1(System.String),"p":[$n[4].CancellationToken]},{"a":3,"n":"MessageEntryReceived","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"MessageEntryReceived","rt":$n[1].Void,"p":[$n[0].MessageEntry]},{"ov":true,"a":2,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"MessageReceived","rt":$n[1].Void,"p":[$n[0].Message]},{"a":2,"n":"MonitorEnter","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"timeout","pt":$n[1].Int32,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"MonitorEnter","rt":$n[5].Task$1(RobotRaconteurWeb.RobotRaconteurNode.MonitorLock),"p":[$n[1].Object,$n[1].Int32,$n[4].CancellationToken]},{"a":2,"n":"MonitorExit","t":8,"pi":[{"n":"lock_","pt":$n[0].RobotRaconteurNode.MonitorLock,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"MonitorExit","rt":$n[5].Task,"p":[$n[0].RobotRaconteurNode.MonitorLock,$n[4].CancellationToken]},{"v":true,"a":2,"n":"PackListType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackListType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackMapType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":2,"tprm":["K","T"],"sn":"PackMapType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackMultiDimArray","t":8,"pi":[{"n":"multiDimArray","pt":$n[0].MultiDimArray,"ps":0}],"sn":"PackMultiDimArray","rt":$n[1].Object,"p":[$n[0].MultiDimArray]},{"a":2,"n":"PackStructure","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"PackStructure","rt":$n[0].MessageElementStructure,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackVarType","t":8,"pi":[{"n":"p","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"a":2,"n":"PeriodicCleanupTask","t":8,"sn":"PeriodicCleanupTask","rt":$n[1].Void},{"a":3,"n":"ProcessCallbackCall","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"ProcessCallbackCall","rt":$n[5].Task,"p":[$n[0].MessageEntry]},{"a":2,"n":"ProcessRequest","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"ProcessRequest","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[4].CancellationToken]},{"a":1,"n":"ProcessRequest_checkconnection","t":8,"sn":"ProcessRequest_checkconnection","rt":$n[5].Task},{"a":3,"n":"PullServiceDefinition","t":8,"pi":[{"n":"servicetype","pt":$n[1].String,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"PullServiceDefinition","rt":$n[5].Task$1(RobotRaconteurWeb.ServiceDefinition),"p":[$n[1].String,$n[4].CancellationToken]},{"a":3,"n":"PullServiceDefinitionAndImports","t":8,"pi":[{"n":"servicetype","pt":$n[1].String,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"PullServiceDefinitionAndImports","rt":$n[5].Task$1(System.Array.type(RobotRaconteurWeb.ServiceDefinition)),"p":[$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"ReleaseObjectLock","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"ReleaseObjectLock","rt":$n[5].Task$1(System.String),"p":[$n[1].Object,$n[4].CancellationToken]},{"a":2,"n":"RequestObjectLock","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"flags","pt":$n[0].RobotRaconteurObjectLockFlags,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"RequestObjectLock","rt":$n[5].Task$1(System.String),"p":[$n[1].Object,$n[0].RobotRaconteurObjectLockFlags,$n[4].CancellationToken]},{"a":2,"n":"SendMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendMessage$1","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[4].CancellationToken]},{"a":2,"n":"SendPipeMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendPipeMessage","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[4].CancellationToken]},{"a":2,"n":"SendWireMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendWireMessage","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[4].CancellationToken]},{"a":2,"n":"TryGetPulledServiceType","t":8,"pi":[{"n":"type","pt":$n[1].String,"ps":0},{"n":"f","out":true,"pt":$n[0].ServiceFactory,"ps":1}],"sn":"TryGetPulledServiceType","rt":$n[1].Boolean,"p":[$n[1].String,$n[0].ServiceFactory],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"v":true,"a":2,"n":"UnpackListType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackListType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"UnpackMapType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":2,"tprm":["K","T"],"sn":"UnpackMapType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"UnpackMultiDimArray","t":8,"pi":[{"n":"o","pt":$n[0].MessageElementMultiDimArray,"ps":0}],"sn":"UnpackMultiDimArray","rt":$n[0].MultiDimArray,"p":[$n[0].MessageElementMultiDimArray]},{"a":2,"n":"UnpackStructure","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementStructure,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackStructure","rt":System.Object,"p":[$n[0].MessageElementStructure]},{"v":true,"a":2,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"a":2,"n":"VerifyObjectImplements","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0},{"n":"implementstype","pt":$n[1].String,"ps":1}],"sn":"VerifyObjectImplements","rt":$n[1].Boolean,"p":[$n[1].String,$n[1].String],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"VerifyObjectImplements2","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0},{"n":"implementstype","pt":$n[1].String,"ps":1}],"sn":"VerifyObjectImplements2","rt":$n[1].Boolean,"p":[$n[1].String,$n[1].String],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"AuthenticatedUsername","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_AuthenticatedUsername","t":8,"rt":$n[1].String,"fg":"AuthenticatedUsername"},"fn":"AuthenticatedUsername"},{"a":2,"n":"Connected","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_Connected","t":8,"rt":$n[1].Boolean,"fg":"Connected","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"Connected"},{"a":2,"n":"ServiceDef","t":16,"rt":$n[0].ServiceFactory,"g":{"a":2,"n":"get_ServiceDef","t":8,"rt":$n[0].ServiceFactory,"fg":"ServiceDef"},"fn":"ServiceDef"},{"a":2,"n":"ServiceName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_ServiceName","t":8,"rt":$n[1].String,"fg":"ServiceName"},"fn":"ServiceName"},{"a":2,"n":"UserAuthenticated","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_UserAuthenticated","t":8,"rt":$n[1].Boolean,"fg":"UserAuthenticated","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"UserAuthenticated"},{"a":2,"n":"Attributes","t":4,"rt":$n[3].Dictionary$2(System.String,System.Object),"sn":"Attributes"},{"a":3,"n":"DynamicServiceFactory_","t":4,"rt":$n[0].DynamicServiceFactory,"sn":"DynamicServiceFactory_","ro":true},{"a":3,"n":"LastMessageSentTime","t":4,"rt":$n[1].DateTime,"sn":"LastMessageSentTime","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"n":"ProcessRequest_checkconnection_current","t":4,"rt":$n[5].Task,"sn":"ProcessRequest_checkconnection_current"},{"a":3,"n":"UsePulledServiceTypes","t":4,"rt":$n[1].Boolean,"sn":"UsePulledServiceTypes","ro":true,"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"cancel_source","t":4,"rt":$n[4].CancellationTokenSource,"sn":"cancel_source"},{"a":1,"n":"connecttransport","t":4,"rt":$n[0].Transport,"sn":"connecttransport"},{"a":1,"n":"connecturl","t":4,"rt":$n[1].String,"sn":"connecturl"},{"a":1,"n":"m_AuthenticatedUsername","t":4,"rt":$n[1].String,"sn":"m_AuthenticatedUsername"},{"a":3,"n":"m_Connected","t":4,"rt":$n[1].Boolean,"sn":"m_Connected","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"m_ServiceDef","t":4,"rt":$n[0].ServiceFactory,"sn":"m_ServiceDef"},{"a":3,"n":"m_ServiceName","t":4,"rt":$n[1].String,"sn":"m_ServiceName"},{"a":1,"n":"m_UserAuthenticated","t":4,"rt":$n[1].Boolean,"sn":"m_UserAuthenticated","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"pulled_service_defs","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"sn":"pulled_service_defs","ro":true},{"a":3,"n":"pulled_service_types","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceFactory),"sn":"pulled_service_types","ro":true},{"a":1,"n":"rec_loc","t":4,"rt":$n[1].Object,"sn":"rec_loc"},{"a":1,"n":"rec_wait","t":4,"rt":$n[3].Dictionary$2(System.UInt32,System.Threading.Tasks.TaskCompletionSource),"sn":"rec_wait"},{"a":1,"n":"request_number","t":4,"rt":$n[1].UInt32,"sn":"request_number","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":5,"n":"stubs","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceStub),"sn":"stubs"},{"a":2,"n":"ClientServiceListener","t":2,"ad":{"a":2,"n":"add_ClientServiceListener","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addClientServiceListener","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_ClientServiceListener","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removeClientServiceListener","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurWeb.ClientServiceListenerEventType", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"ClientClosed","is":true,"t":4,"rt":$n[0].ClientServiceListenerEventType,"sn":"ClientClosed","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.ClientServiceListenerEventType, System.Enum.toStringFn(RobotRaconteurWeb.ClientServiceListenerEventType));}}]}; }, $n);
    $m("RobotRaconteurWeb.Endpoint", function () { return {"att":1048705,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].RobotRaconteurNode],"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0}],"sn":"ctor"},{"v":true,"a":3,"n":"CheckEndpointCapabilityMessage","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"CheckEndpointCapabilityMessage","rt":$n[1].Void,"p":[$n[0].Message]},{"v":true,"a":2,"n":"EndpointCapability","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"EndpointCapability","rt":$n[1].UInt32,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"ab":true,"a":2,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"MessageReceived","rt":$n[1].Void,"p":[$n[0].Message]},{"v":true,"a":2,"n":"SendMessage","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendMessage","rt":$n[5].Task,"p":[$n[0].Message,$n[4].CancellationToken]},{"a":2,"n":"LocalEndpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_LocalEndpoint","t":8,"rt":$n[1].UInt32,"fg":"LocalEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"LocalEndpoint"},{"a":2,"n":"RemoteEndpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_RemoteEndpoint","t":8,"rt":$n[1].UInt32,"fg":"RemoteEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"RemoteEndpoint"},{"a":2,"n":"RemoteNodeID","t":16,"rt":$n[0].NodeID,"g":{"a":2,"n":"get_RemoteNodeID","t":8,"rt":$n[0].NodeID,"fg":"RemoteNodeID"},"fn":"RemoteNodeID"},{"a":2,"n":"RemoteNodeName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_RemoteNodeName","t":8,"rt":$n[1].String,"fg":"RemoteNodeName"},"fn":"RemoteNodeName"},{"a":5,"n":"LastMessageReceivedTime","t":4,"rt":$n[1].DateTime,"sn":"LastMessageReceivedTime","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":3,"n":"MessageNumber","t":4,"rt":$n[1].UInt16,"sn":"MessageNumber","box":function ($v) { return Bridge.box($v, System.UInt16);}},{"a":3,"n":"MessageNumberLock","t":4,"rt":$n[1].Object,"sn":"MessageNumberLock"},{"a":5,"n":"TransportConnection","t":4,"rt":$n[0].ITransportConnection,"sn":"TransportConnection"},{"a":5,"n":"m_LocalEndpoint","t":4,"rt":$n[1].UInt32,"sn":"m_LocalEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":5,"n":"m_RemoteEndpoint","t":4,"rt":$n[1].UInt32,"sn":"m_RemoteEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":5,"n":"m_RemoteNodeID","t":4,"rt":$n[0].NodeID,"sn":"m_RemoteNodeID"},{"a":3,"n":"m_RemoteNodeName","t":4,"rt":$n[1].String,"sn":"m_RemoteNodeName"},{"a":5,"n":"node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"node","ro":true},{"a":5,"n":"transport","t":4,"rt":$n[1].UInt32,"sn":"transport","box":function ($v) { return Bridge.box($v, System.UInt32);}}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[1].Exception],"pi":[{"n":"message","pt":$n[1].String,"ps":0},{"n":"innerexception","pt":$n[1].Exception,"ps":1}],"sn":"$ctor2"},{"a":2,"n":".ctor","t":1,"p":[$n[0].MessageErrorType,$n[1].String,$n[1].String],"pi":[{"n":"ErrorCode","pt":$n[0].MessageErrorType,"ps":0},{"n":"error","pt":$n[1].String,"ps":1},{"n":"message","pt":$n[1].String,"ps":2}],"sn":"$ctor1"},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"Error","t":4,"rt":$n[1].String,"sn":"error"},{"a":2,"n":"ErrorCode","t":4,"rt":$n[0].MessageErrorType,"sn":"errorCode","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}}]}; }, $n);
    $m("RobotRaconteurWeb.ConnectionException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ProtocolException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceNotFoundException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ObjectNotFoundException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.InvalidEndpointException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.EndpointCommunicationFatalException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.NodeNotFoundException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.MemberNotFoundException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.MemberFormatMismatchException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.DataTypeMismatchException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.DataTypeException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.DataSerializationException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageEntryNotFoundException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementNotFoundException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.UnknownException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[1].String],"pi":[{"n":"error","pt":$n[1].String,"ps":0},{"n":"message","pt":$n[1].String,"ps":1}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.OperationFailedException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.InternalErrorException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.SystemResourcePermissionDeniedException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.OutOfSystemResourceException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.SystemResourceException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ResourceNotFoundException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.IOException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.BufferLimitViolationException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceDefinitionException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.OutOfRangeException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.KeyNotFoundException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurRemoteException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[1].String],"pi":[{"n":"error","pt":$n[1].String,"ps":0},{"n":"message","pt":$n[1].String,"ps":1}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.RequestTimeoutException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ReadOnlyMemberException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.WriteOnlyMemberException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.MemberBusyException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ValueNotSetException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.AuthenticationException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.ObjectLockedException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.PermissionDeniedException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.AbortOperationException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.OperationAbortedException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.StopIterationException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"message","pt":$n[1].String,"ps":0}],"sn":"ctor"}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurExceptionUtil", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"ExceptionToMessageEntry","is":true,"t":8,"pi":[{"n":"exception","pt":$n[1].Exception,"ps":0},{"n":"entry","pt":$n[0].MessageEntry,"ps":1}],"sn":"ExceptionToMessageEntry","rt":$n[1].Void,"p":[$n[1].Exception,$n[0].MessageEntry]},{"a":2,"n":"MessageEntryToException","is":true,"t":8,"pi":[{"n":"entry","pt":$n[0].MessageEntry,"ps":0}],"sn":"MessageEntryToException","rt":$n[1].Exception,"p":[$n[0].MessageEntry]}]}; }, $n);
    $m("RobotRaconteurWeb.Generator1$2", function (ReturnType, ParamType) { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"Abort","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Abort","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Close","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Close","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Next","t":8,"pi":[{"n":"param","pt":ParamType,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"RobotRaconteurWeb$Generator1$2$" + Bridge.getTypeAlias(ReturnType) + "$" + Bridge.getTypeAlias(ParamType) + "$Next","rt":$n[5].Task$1(ReturnType),"p":[ParamType,$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.Generator2$1", function (ReturnType) { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"Abort","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Abort","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Close","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Close","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Next","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$Next","rt":$n[5].Task$1(ReturnType),"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"NextAll","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurWeb$Generator2$1$" + Bridge.getTypeAlias(ReturnType) + "$NextAll","rt":$n[5].Task$1(System.Array.type(ReturnType)),"p":[$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.Generator3$1", function (ParamType) { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"Abort","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Abort","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Close","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Close","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Next","t":8,"pi":[{"n":"param","pt":ParamType,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"RobotRaconteurWeb$Generator3$1$" + Bridge.getTypeAlias(ParamType) + "$Next","rt":$n[5].Task,"p":[ParamType,$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.GeneratorClientBase", function () { return {"att":1048705,"a":2,"m":[{"a":3,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].Int32],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"id","pt":$n[1].Int32,"ps":2}],"sn":"ctor"},{"a":2,"n":"Abort","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Abort","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"a":2,"n":"Close","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Close","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"a":2,"n":"NextBase","t":8,"pi":[{"n":"v","pt":$n[0].MessageElement,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"NextBase","rt":$n[5].Task$1(RobotRaconteurWeb.MessageElement),"p":[$n[0].MessageElement,$n[4].CancellationToken]},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":4,"n":"id","t":4,"rt":$n[1].Int32,"sn":"id","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":3,"n":"membername","t":4,"rt":$n[1].String,"sn":"membername"},{"a":3,"n":"stub","t":4,"rt":$n[0].ServiceStub,"sn":"stub"}]}; }, $n);
    $m("RobotRaconteurWeb.Generator1Client$2", function (ReturnType, ParamType) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].Int32],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"id","pt":$n[1].Int32,"ps":2}],"sn":"ctor"},{"a":2,"n":"Next","t":8,"pi":[{"n":"param","pt":ParamType,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"Next","rt":$n[5].Task$1(ReturnType),"p":[ParamType,$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.Generator2Client$1", function (ReturnType) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].Int32],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"id","pt":$n[1].Int32,"ps":2}],"sn":"ctor"},{"a":2,"n":"Next","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Next","rt":$n[5].Task$1(ReturnType),"p":[$n[4].CancellationToken]},{"a":2,"n":"NextAll","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"NextAll","rt":$n[5].Task$1(System.Array.type(ReturnType)),"p":[$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.Generator3Client$1", function (ParamType) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].Int32],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"id","pt":$n[1].Int32,"ps":2}],"sn":"ctor"},{"a":2,"n":"Next","t":8,"pi":[{"n":"param","pt":ParamType,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"Next","rt":$n[5].Task,"p":[ParamType,$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.GeneratorServerBase", function () { return {"att":1048705,"a":2,"m":[{"a":3,"n":".ctor","t":1,"p":[$n[1].String,$n[1].Int32,$n[0].ServiceSkel,$n[0].ServerEndpoint],"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"index","pt":$n[1].Int32,"ps":1},{"n":"skel","pt":$n[0].ServiceSkel,"ps":2},{"n":"ep","pt":$n[0].ServerEndpoint,"ps":3}],"sn":"ctor"},{"ab":true,"a":2,"n":"CallNext","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallNext","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"a":2,"n":"Endpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_Endpoint","t":8,"rt":$n[1].UInt32,"fg":"Endpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"Endpoint"},{"a":3,"n":"ep","t":4,"rt":$n[0].ServerEndpoint,"sn":"ep"},{"a":3,"n":"index","t":4,"rt":$n[1].Int32,"sn":"index","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":5,"n":"last_access_time","t":4,"rt":$n[1].DateTime,"sn":"last_access_time","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":3,"n":"name","t":4,"rt":$n[1].String,"sn":"name"},{"a":3,"n":"skel","t":4,"rt":$n[0].ServiceSkel,"sn":"skel"}]}; }, $n);
    $m("RobotRaconteurWeb.Generator1Server$2", function (ReturnType, ParamType) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Generator1$2(ReturnType,ParamType),$n[1].String,$n[1].Int32,$n[0].ServiceSkel,$n[0].ServerEndpoint],"pi":[{"n":"generator","pt":$n[0].Generator1$2(ReturnType,ParamType),"ps":0},{"n":"name","pt":$n[1].String,"ps":1},{"n":"id","pt":$n[1].Int32,"ps":2},{"n":"skel","pt":$n[0].ServiceSkel,"ps":3},{"n":"ep","pt":$n[0].ServerEndpoint,"ps":4}],"sn":"ctor"},{"ov":true,"a":2,"n":"CallNext","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallNext","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"a":3,"n":"generator","t":4,"rt":$n[0].Generator1$2(ReturnType,ParamType),"sn":"generator"}]}; }, $n);
    $m("RobotRaconteurWeb.Generator2Server$1", function (ReturnType) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Generator2$1(ReturnType),$n[1].String,$n[1].Int32,$n[0].ServiceSkel,$n[0].ServerEndpoint],"pi":[{"n":"generator","pt":$n[0].Generator2$1(ReturnType),"ps":0},{"n":"name","pt":$n[1].String,"ps":1},{"n":"id","pt":$n[1].Int32,"ps":2},{"n":"skel","pt":$n[0].ServiceSkel,"ps":3},{"n":"ep","pt":$n[0].ServerEndpoint,"ps":4}],"sn":"ctor"},{"ov":true,"a":2,"n":"CallNext","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallNext","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"a":3,"n":"generator","t":4,"rt":$n[0].Generator2$1(ReturnType),"sn":"generator"}]}; }, $n);
    $m("RobotRaconteurWeb.Generator3Server$1", function (ParamType) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Generator3$1(ParamType),$n[1].String,$n[1].Int32,$n[0].ServiceSkel,$n[0].ServerEndpoint],"pi":[{"n":"generator","pt":$n[0].Generator3$1(ParamType),"ps":0},{"n":"name","pt":$n[1].String,"ps":1},{"n":"id","pt":$n[1].Int32,"ps":2},{"n":"skel","pt":$n[0].ServiceSkel,"ps":3},{"n":"ep","pt":$n[0].ServerEndpoint,"ps":4}],"sn":"ctor"},{"ov":true,"a":2,"n":"CallNext","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallNext","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"a":3,"n":"generator","t":4,"rt":$n[0].Generator3$1(ParamType),"sn":"generator"}]}; }, $n);
    $m("RobotRaconteurWeb.EnumeratorGenerator$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[3].IEnumerable$1(T)],"pi":[{"n":"enumerable","pt":$n[3].IEnumerable$1(T),"ps":0}],"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[3].IEnumerator$1(T)],"pi":[{"n":"enumerator","pt":$n[3].IEnumerator$1(T),"ps":0}],"sn":"$ctor1"},{"a":2,"n":"Abort","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Abort","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"a":2,"n":"Close","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Close","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"a":2,"n":"Next","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Next","rt":$n[5].Task$1(T),"p":[$n[4].CancellationToken]},{"a":2,"n":"NextAll","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"NextAll","rt":$n[5].Task$1(System.Array.type(T)),"p":[$n[4].CancellationToken]},{"a":1,"n":"aborted","t":4,"rt":$n[1].Boolean,"sn":"aborted","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"closed","t":4,"rt":$n[1].Boolean,"sn":"closed","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"enumerator","t":4,"rt":$n[3].IEnumerator$1(T),"sn":"enumerator"}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayBinaryWriter", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[7].Stream,$n[1].Int32],"pi":[{"n":"s","pt":$n[7].Stream,"ps":0},{"n":"length","pt":$n[1].Int32,"ps":1}],"sn":"$ctor1"},{"a":2,"n":".ctor","t":1,"p":[$n[7].MemoryStream,$n[1].Array.type(System.Byte),$n[1].Int32],"pi":[{"n":"s","pt":$n[7].MemoryStream,"ps":0},{"n":"membuf1","pt":$n[1].Array.type(System.Byte),"ps":1},{"n":"length","pt":$n[1].Int32,"ps":2}],"sn":"ctor"},{"a":2,"n":"GetStringByteCount8","is":true,"t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"GetStringByteCount8","rt":$n[1].Int32,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"PopLimit","t":8,"sn":"PopLimit","rt":$n[1].Void},{"a":2,"n":"PushAbsoluteLimit","t":8,"pi":[{"n":"limit","pt":$n[1].UInt32,"ps":0}],"sn":"PushAbsoluteLimit","rt":$n[1].Void,"p":[$n[1].UInt32]},{"a":2,"n":"PushRelativeLimit","t":8,"pi":[{"n":"limit","pt":$n[1].UInt32,"ps":0}],"sn":"PushRelativeLimit","rt":$n[1].Void,"p":[$n[1].UInt32]},{"a":2,"n":"Reset","t":8,"pi":[{"n":"length","pt":$n[1].Int32,"ps":0}],"sn":"Reset","rt":$n[1].Void,"p":[$n[1].Int32]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].Byte,"ps":0}],"sn":"Write$1","rt":$n[1].Void,"p":[$n[1].Byte]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].Double,"ps":0}],"sn":"Write$8","rt":$n[1].Void,"p":[$n[1].Double]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].Int16,"ps":0}],"sn":"Write$9","rt":$n[1].Void,"p":[$n[1].Int16]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].Int32,"ps":0}],"sn":"Write$10","rt":$n[1].Void,"p":[$n[1].Int32]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].Int64,"ps":0}],"sn":"Write$11","rt":$n[1].Void,"p":[$n[1].Int64]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].SByte,"ps":0}],"sn":"Write$12","rt":$n[1].Void,"p":[$n[1].SByte]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].Single,"ps":0}],"sn":"Write$13","rt":$n[1].Void,"p":[$n[1].Single]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].UInt16,"ps":0}],"sn":"Write$15","rt":$n[1].Void,"p":[$n[1].UInt16]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].UInt32,"ps":0}],"sn":"Write$16","rt":$n[1].Void,"p":[$n[1].UInt32]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"value","pt":$n[1].UInt64,"ps":0}],"sn":"Write$17","rt":$n[1].Void,"p":[$n[1].UInt64]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"index","pt":$n[1].Int32,"ps":1},{"n":"count","pt":$n[1].Int32,"ps":2}],"sn":"Write$3","rt":$n[1].Void,"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32]},{"a":2,"n":"WriteArray","t":8,"pi":[{"n":"a","pt":Array,"ps":0}],"sn":"WriteArray","rt":$n[1].Void,"p":[Array]},{"a":2,"n":"WriteNumber","t":8,"pi":[{"n":"n","pt":$n[1].Object,"ps":0},{"n":"t","pt":$n[0].DataTypes,"ps":1}],"sn":"WriteNumber","rt":$n[1].Void,"p":[$n[1].Object,$n[0].DataTypes]},{"a":2,"n":"WriteString8","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"WriteString8","rt":$n[1].Void,"p":[$n[1].String]},{"a":2,"n":"CurrentLimit","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_CurrentLimit","t":8,"rt":$n[1].UInt32,"fg":"CurrentLimit","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"CurrentLimit"},{"a":2,"n":"DistanceFromLimit","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_DistanceFromLimit","t":8,"rt":$n[1].Int32,"fg":"DistanceFromLimit","box":function ($v) { return Bridge.box($v, System.Int32);}},"fn":"DistanceFromLimit"},{"a":2,"n":"Position","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_Position","t":8,"rt":$n[1].UInt32,"fg":"Position","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"Position"},{"a":1,"n":"abuffer","t":4,"rt":$n[1].Array.type(System.Byte),"sn":"abuffer"},{"a":1,"n":"bufsize","is":true,"t":4,"rt":$n[1].Int32,"sn":"bufsize","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"n":"limits","t":4,"rt":$n[3].Stack$1(System.UInt32),"sn":"limits"},{"a":3,"n":"m_Position","t":4,"rt":$n[1].UInt32,"sn":"m_Position","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"n":"membuf","t":4,"rt":$n[1].Array.type(System.Byte),"sn":"membuf"},{"a":1,"n":"memstream","t":4,"rt":$n[1].Boolean,"sn":"memstream","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"s_memstream","t":4,"rt":$n[7].MemoryStream,"sn":"s_memstream"}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayBinaryReader", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[7].Stream,$n[1].Int32],"pi":[{"n":"s","pt":$n[7].Stream,"ps":0},{"n":"length","pt":$n[1].Int32,"ps":1}],"sn":"$ctor1"},{"a":2,"n":".ctor","t":1,"p":[$n[7].MemoryStream,$n[1].Array.type(System.Byte),$n[1].Int32],"pi":[{"n":"s","pt":$n[7].MemoryStream,"ps":0},{"n":"membuf1","pt":$n[1].Array.type(System.Byte),"ps":1},{"n":"length","pt":$n[1].Int32,"ps":2}],"sn":"ctor"},{"a":2,"n":"PopLimit","t":8,"sn":"PopLimit","rt":$n[1].Void},{"a":2,"n":"PushAbsoluteLimit","t":8,"pi":[{"n":"limit","pt":$n[1].UInt32,"ps":0}],"sn":"PushAbsoluteLimit","rt":$n[1].Void,"p":[$n[1].UInt32]},{"a":2,"n":"PushRelativeLimit","t":8,"pi":[{"n":"limit","pt":$n[1].UInt32,"ps":0}],"sn":"PushRelativeLimit","rt":$n[1].Void,"p":[$n[1].UInt32]},{"ov":true,"a":2,"n":"Read","t":8,"sn":"Read","rt":$n[1].Int32,"box":function ($v) { return Bridge.box($v, System.Int32);}},{"ov":true,"a":2,"n":"Read","t":8,"pi":[{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"index","pt":$n[1].Int32,"ps":1},{"n":"count","pt":$n[1].Int32,"ps":2}],"sn":"Read$1","rt":$n[1].Int32,"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32],"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"ReadArray","t":8,"pi":[{"n":"a","pt":Array,"ps":0}],"sn":"ReadArray","rt":$n[1].Void,"p":[Array]},{"ov":true,"a":2,"n":"ReadByte","t":8,"sn":"ReadByte","rt":$n[1].Byte,"box":function ($v) { return Bridge.box($v, System.Byte);}},{"ov":true,"a":2,"n":"ReadDouble","t":8,"sn":"ReadDouble","rt":$n[1].Double,"box":function ($v) { return Bridge.box($v, System.Double, System.Double.format, System.Double.getHashCode);}},{"ov":true,"a":2,"n":"ReadInt16","t":8,"sn":"ReadInt16","rt":$n[1].Int16,"box":function ($v) { return Bridge.box($v, System.Int16);}},{"ov":true,"a":2,"n":"ReadInt32","t":8,"sn":"ReadInt32","rt":$n[1].Int32,"box":function ($v) { return Bridge.box($v, System.Int32);}},{"ov":true,"a":2,"n":"ReadInt64","t":8,"sn":"ReadInt64","rt":$n[1].Int64},{"a":2,"n":"ReadNumber","t":8,"pi":[{"n":"t","pt":$n[0].DataTypes,"ps":0}],"sn":"ReadNumber","rt":$n[1].Object,"p":[$n[0].DataTypes]},{"ov":true,"a":2,"n":"ReadSByte","t":8,"sn":"ReadSByte","rt":$n[1].SByte,"box":function ($v) { return Bridge.box($v, System.SByte);}},{"ov":true,"a":2,"n":"ReadSingle","t":8,"sn":"ReadSingle","rt":$n[1].Single,"box":function ($v) { return Bridge.box($v, System.Single, System.Single.format, System.Single.getHashCode);}},{"a":2,"n":"ReadString8","t":8,"pi":[{"n":"l","pt":$n[1].UInt32,"ps":0}],"sn":"ReadString8","rt":$n[1].String,"p":[$n[1].UInt32]},{"ov":true,"a":2,"n":"ReadUInt16","t":8,"sn":"ReadUInt16","rt":$n[1].UInt16,"box":function ($v) { return Bridge.box($v, System.UInt16);}},{"ov":true,"a":2,"n":"ReadUInt32","t":8,"sn":"ReadUInt32","rt":$n[1].UInt32,"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"ov":true,"a":2,"n":"ReadUInt64","t":8,"sn":"ReadUInt64","rt":$n[1].UInt64},{"a":2,"n":"Reset","t":8,"pi":[{"n":"length","pt":$n[1].Int32,"ps":0}],"sn":"Reset","rt":$n[1].Void,"p":[$n[1].Int32]},{"a":2,"n":"CurrentLimit","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_CurrentLimit","t":8,"rt":$n[1].UInt32,"fg":"CurrentLimit","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"CurrentLimit"},{"a":2,"n":"DistanceFromLimit","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_DistanceFromLimit","t":8,"rt":$n[1].Int32,"fg":"DistanceFromLimit","box":function ($v) { return Bridge.box($v, System.Int32);}},"fn":"DistanceFromLimit"},{"a":2,"n":"Position","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_Position","t":8,"rt":$n[1].UInt32,"fg":"Position","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"Position"},{"a":1,"n":"abuffer","t":4,"rt":$n[1].Array.type(System.Byte),"sn":"abuffer"},{"a":1,"n":"bufsize","is":true,"t":4,"rt":$n[1].Int32,"sn":"bufsize","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"n":"limits","t":4,"rt":$n[3].Stack$1(System.UInt32),"sn":"limits"},{"a":3,"n":"m_Position","t":4,"rt":$n[1].UInt32,"sn":"m_Position","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"n":"membuf","t":4,"rt":$n[1].Array.type(System.Byte),"sn":"membuf"},{"a":1,"n":"memstream","t":4,"rt":$n[1].Boolean,"sn":"memstream","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"s_memstream","t":4,"rt":$n[7].MemoryStream,"sn":"s_memstream"}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayMemoryBase", function () { return {"att":1048705,"a":2,"m":[{"a":3,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"ab":true,"a":2,"n":"GetLength","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetLength","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayMemory$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[System.Array.type(T)],"pi":[{"n":"memory","pt":System.Array.type(T),"ps":0}],"sn":"$ctor1"},{"v":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":System.Array.type(T),"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[System.Array.type(T)]},{"ov":true,"a":2,"n":"GetLength","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetLength","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"v":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":System.Array.type(T),"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].UInt64,System.Array.type(T),$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"v":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":System.Array.type(T),"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].UInt64,System.Array.type(T),$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"a":1,"n":"memory","t":4,"rt":System.Array.type(T),"sn":"memory"}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArrayMemoryBase", function () { return {"att":1048705,"a":2,"m":[{"a":3,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"ab":true,"a":2,"n":"GetDimCount","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimCount","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"GetDimensions","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimensions","rt":$n[5].Task$1(System.Array.type(System.UInt64)),"p":[$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArrayMemory$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[0].MultiDimArray],"pi":[{"n":"memory","pt":$n[0].MultiDimArray,"ps":0}],"sn":"$ctor1"},{"v":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":$n[0].MultiDimArray,"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[$n[0].MultiDimArray]},{"ov":true,"a":2,"n":"GetDimCount","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimCount","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"GetDimensions","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimensions","rt":$n[5].Task$1(System.Array.type(System.UInt64)),"p":[$n[4].CancellationToken]},{"v":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].MultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].MultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"v":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].MultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].MultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"a":1,"n":"multimemory","t":4,"rt":$n[0].MultiDimArray,"sn":"multimemory"}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayMemoryServiceSkelBase", function () { return {"att":1048705,"a":2,"m":[{"a":3,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[0].DataTypes,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"element_type","pt":$n[0].DataTypes,"ps":2},{"n":"element_size","pt":$n[1].UInt32,"ps":3},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":4}],"sn":"ctor"},{"v":true,"a":2,"n":"CallMemoryFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":2}],"sn":"CallMemoryFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint,$n[0].ArrayMemoryBase]},{"ab":true,"a":3,"n":"DoRead","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"bufferpos","pt":$n[1].UInt64,"ps":1},{"n":"count","pt":$n[1].UInt64,"ps":2},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":3}],"sn":"DoRead","rt":$n[5].Task$1(System.Object),"p":[$n[1].UInt64,$n[1].UInt64,$n[1].UInt64,$n[0].ArrayMemoryBase]},{"ab":true,"a":3,"n":"DoWrite","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":4}],"sn":"DoWrite","rt":$n[5].Task,"p":[$n[1].UInt64,$n[1].Object,$n[1].UInt64,$n[1].UInt64,$n[0].ArrayMemoryBase]},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":3,"n":"direction","t":4,"rt":$n[0].MemberDefinition_Direction,"sn":"direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},{"a":3,"n":"element_size","t":4,"rt":$n[1].UInt32,"sn":"element_size","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":3,"n":"element_type","t":4,"rt":$n[0].DataTypes,"sn":"element_type","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":3,"n":"m_MemberName","t":4,"rt":$n[1].String,"sn":"m_MemberName"},{"a":3,"n":"skel","t":4,"rt":$n[0].ServiceSkel,"sn":"skel"}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayMemoryServiceSkel$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":2}],"sn":"ctor"},{"ov":true,"a":3,"n":"DoRead","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"bufferpos","pt":$n[1].UInt64,"ps":1},{"n":"count","pt":$n[1].UInt64,"ps":2},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":3}],"sn":"DoRead","rt":$n[5].Task$1(System.Object),"p":[$n[1].UInt64,$n[1].UInt64,$n[1].UInt64,$n[0].ArrayMemoryBase]},{"ov":true,"a":3,"n":"DoWrite","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":4}],"sn":"DoWrite","rt":$n[5].Task,"p":[$n[1].UInt64,$n[1].Object,$n[1].UInt64,$n[1].UInt64,$n[0].ArrayMemoryBase]}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArrayMemoryServiceSkelBase", function () { return {"att":1048705,"a":2,"m":[{"a":3,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[0].DataTypes,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"element_type","pt":$n[0].DataTypes,"ps":2},{"n":"element_size","pt":$n[1].UInt32,"ps":3},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":4}],"sn":"ctor"},{"v":true,"a":2,"n":"CallMemoryFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":2}],"sn":"CallMemoryFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint,$n[0].MultiDimArrayMemoryBase]},{"ab":true,"a":3,"n":"DoRead","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"elem_count","pt":$n[1].UInt64,"ps":3},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":4}],"sn":"DoRead","rt":$n[5].Task$1(System.Object),"p":[$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[0].MultiDimArrayMemoryBase]},{"ab":true,"a":3,"n":"DoWrite","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"elem_count","pt":$n[1].UInt64,"ps":4},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":5}],"sn":"DoWrite","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[0].MultiDimArrayMemoryBase]},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":3,"n":"direction","t":4,"rt":$n[0].MemberDefinition_Direction,"sn":"direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},{"a":3,"n":"element_size","t":4,"rt":$n[1].UInt32,"sn":"element_size","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":3,"n":"element_type","t":4,"rt":$n[0].DataTypes,"sn":"element_type","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":3,"n":"m_MemberName","t":4,"rt":$n[1].String,"sn":"m_MemberName"},{"a":3,"n":"skel","t":4,"rt":$n[0].ServiceSkel,"sn":"skel"}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArrayMemoryServiceSkel$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":2}],"sn":"ctor"},{"ov":true,"a":3,"n":"DoRead","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"elem_count","pt":$n[1].UInt64,"ps":3},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":4}],"sn":"DoRead","rt":$n[5].Task$1(System.Object),"p":[$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[0].MultiDimArrayMemoryBase]},{"ov":true,"a":3,"n":"DoWrite","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"elem_count","pt":$n[1].UInt64,"ps":4},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":5}],"sn":"DoWrite","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[0].MultiDimArrayMemoryBase]}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayMemoryClientImplBase", function () { return {"att":1048705,"a":2,"m":[{"a":3,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[0].DataTypes,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_type","pt":$n[0].DataTypes,"ps":2},{"n":"element_size","pt":$n[1].UInt32,"ps":3},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":4}],"sn":"ctor"},{"ab":true,"a":3,"n":"GetBufferLength","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0}],"sn":"GetBufferLength","rt":$n[1].UInt64,"p":[$n[1].Object]},{"v":true,"a":2,"n":"GetLength","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetLength","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"a":2,"n":"GetMaxTransferSize","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetMaxTransferSize","rt":$n[5].Task$1(System.UInt32),"p":[$n[4].CancellationToken]},{"ab":true,"a":3,"n":"PackWriteRequest","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0},{"n":"bufferpos","pt":$n[1].UInt64,"ps":1},{"n":"count","pt":$n[1].UInt64,"ps":2}],"sn":"PackWriteRequest","rt":$n[1].Object,"p":[$n[1].Object,$n[1].UInt64,$n[1].UInt64]},{"a":2,"n":"ReadImpl","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"ReadImpl","rt":$n[5].Task,"p":[$n[1].UInt64,$n[1].Object,$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"ab":true,"a":3,"n":"UnpackReadResult","t":8,"pi":[{"n":"res","pt":$n[1].Object,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3}],"sn":"UnpackReadResult","rt":$n[1].Void,"p":[$n[1].Object,$n[1].Object,$n[1].UInt64,$n[1].UInt64]},{"a":2,"n":"WriteImpl","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"WriteImpl","rt":$n[5].Task,"p":[$n[1].UInt64,$n[1].Object,$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":3,"n":"direction","t":4,"rt":$n[0].MemberDefinition_Direction,"sn":"direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},{"a":3,"n":"element_size","t":4,"rt":$n[1].UInt32,"sn":"element_size","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":3,"n":"element_type","t":4,"rt":$n[0].DataTypes,"sn":"element_type","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":3,"n":"m_MemberName","t":4,"rt":$n[1].String,"sn":"m_MemberName"},{"a":3,"n":"max_size_read","t":4,"rt":$n[1].Boolean,"sn":"max_size_read","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"remote_max_size","t":4,"rt":$n[1].UInt32,"sn":"remote_max_size","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":3,"n":"stub","t":4,"rt":$n[0].ServiceStub,"sn":"stub"}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayMemoryClientImpl$1", function (T) { return {"att":1048576,"a":4,"m":[{"a":4,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":2}],"sn":"ctor"},{"ov":true,"a":3,"n":"GetBufferLength","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0}],"sn":"GetBufferLength","rt":$n[1].UInt64,"p":[$n[1].Object]},{"ov":true,"a":3,"n":"PackWriteRequest","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0},{"n":"bufferpos","pt":$n[1].UInt64,"ps":1},{"n":"count","pt":$n[1].UInt64,"ps":2}],"sn":"PackWriteRequest","rt":$n[1].Object,"p":[$n[1].Object,$n[1].UInt64,$n[1].UInt64]},{"ov":true,"a":3,"n":"UnpackReadResult","t":8,"pi":[{"n":"res","pt":$n[1].Object,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3}],"sn":"UnpackReadResult","rt":$n[1].Void,"p":[$n[1].Object,$n[1].Object,$n[1].UInt64,$n[1].UInt64]}]}; }, $n);
    $m("RobotRaconteurWeb.ArrayMemoryClient$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":2}],"sn":"ctor"},{"ov":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":System.Array.type(T),"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[System.Array.type(T)]},{"ov":true,"a":2,"n":"GetLength","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetLength","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"a":1,"n":"GetMaxTransferSize","t":8,"pi":[{"n":"cancel","pt":$n[4].CancellationToken,"ps":0}],"sn":"GetMaxTransferSize","rt":$n[5].Task$1(System.UInt32),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":System.Array.type(T),"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].UInt64,System.Array.type(T),$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":System.Array.type(T),"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].UInt64,System.Array.type(T),$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":1,"n":"impl","t":4,"rt":$n[0].ArrayMemoryClientImpl$1(T),"sn":"impl"}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArrayMemoryClientImplBase", function () { return {"att":1048704,"a":4,"m":[{"a":3,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[0].DataTypes,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_type","pt":$n[0].DataTypes,"ps":2},{"n":"element_size","pt":$n[1].UInt32,"ps":3},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":4}],"sn":"ctor"},{"a":1,"n":"CalculateMatrixBlocks","is":true,"t":8,"pi":[{"n":"element_size","pt":$n[1].UInt32,"ps":0},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"max_elems","pt":$n[1].UInt64,"ps":2},{"n":"split_dim","out":true,"pt":$n[1].Int32,"ps":3},{"n":"split_dim_block","out":true,"pt":$n[1].UInt64,"ps":4},{"n":"split_elem_count","out":true,"pt":$n[1].UInt64,"ps":5},{"n":"splits_count","out":true,"pt":$n[1].Int32,"ps":6},{"n":"split_remainder","out":true,"pt":$n[1].Int32,"ps":7},{"n":"block_count","out":true,"pt":$n[1].Array.type(System.UInt64),"ps":8},{"n":"block_count_edge","out":true,"pt":$n[1].Array.type(System.UInt64),"ps":9}],"sn":"CalculateMatrixBlocks","rt":$n[1].Void,"p":[$n[1].UInt32,$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[1].Int32,$n[1].UInt64,$n[1].UInt64,$n[1].Int32,$n[1].Int32,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64)]},{"v":true,"a":2,"n":"GetDimCount","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimCount","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"v":true,"a":2,"n":"GetDimensions","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimensions","rt":$n[5].Task$1(System.Array.type(System.UInt64)),"p":[$n[4].CancellationToken]},{"a":2,"n":"GetMaxTransferSize","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetMaxTransferSize","rt":$n[5].Task$1(System.UInt32),"p":[$n[4].CancellationToken]},{"ab":true,"a":3,"n":"PackWriteRequest","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"elem_count","pt":$n[1].UInt64,"ps":3}],"sn":"PackWriteRequest","rt":$n[1].Object,"p":[$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64]},{"a":2,"n":"ReadImpl","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"ReadImpl","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"ab":true,"a":3,"n":"UnpackReadResult","t":8,"pi":[{"n":"res","pt":$n[1].Object,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"elem_count","pt":$n[1].UInt64,"ps":4}],"sn":"UnpackReadResult","rt":$n[1].Void,"p":[$n[1].Object,$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64]},{"a":2,"n":"WriteImpl","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"WriteImpl","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":3,"n":"direction","t":4,"rt":$n[0].MemberDefinition_Direction,"sn":"direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},{"a":3,"n":"element_size","t":4,"rt":$n[1].UInt32,"sn":"element_size","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":3,"n":"element_type","t":4,"rt":$n[0].DataTypes,"sn":"element_type","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":3,"n":"m_MemberName","t":4,"rt":$n[1].String,"sn":"m_MemberName"},{"a":3,"n":"max_size_read","t":4,"rt":$n[1].Boolean,"sn":"max_size_read","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"remote_max_size","t":4,"rt":$n[1].UInt32,"sn":"remote_max_size","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":3,"n":"stub","t":4,"rt":$n[0].ServiceStub,"sn":"stub"}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArrayMemoryClientImpl$1", function (T) { return {"att":1048576,"a":4,"m":[{"a":4,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":2}],"sn":"ctor"},{"ov":true,"a":3,"n":"PackWriteRequest","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"elem_count","pt":$n[1].UInt64,"ps":3}],"sn":"PackWriteRequest","rt":$n[1].Object,"p":[$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64]},{"ov":true,"a":3,"n":"UnpackReadResult","t":8,"pi":[{"n":"res","pt":$n[1].Object,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"elem_count","pt":$n[1].UInt64,"ps":4}],"sn":"UnpackReadResult","rt":$n[1].Void,"p":[$n[1].Object,$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64]}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArrayMemoryClient$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":2}],"sn":"ctor"},{"ov":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":$n[0].MultiDimArray,"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[$n[0].MultiDimArray]},{"ov":true,"a":2,"n":"GetDimCount","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimCount","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"GetDimensions","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimensions","rt":$n[5].Task$1(System.Array.type(System.UInt64)),"p":[$n[4].CancellationToken]},{"a":1,"n":"GetMaxTransferSize","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetMaxTransferSize","rt":$n[5].Task$1(System.UInt32),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].MultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].MultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].MultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].MultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":1,"n":"impl","t":4,"rt":$n[0].MultiDimArrayMemoryClientImpl$1(T),"sn":"impl"}]}; }, $n);
    $m("RobotRaconteurWeb.PodArrayMemory$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[System.Array.type(T)],"pi":[{"n":"memory","pt":System.Array.type(T),"ps":0}],"sn":"$ctor1"}]}; }, $n);
    $m("RobotRaconteurWeb.PodArrayMemoryClientImpl$1", function (T) { return {"att":1048576,"a":4,"m":[{"a":4,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":3,"n":"GetBufferLength","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0}],"sn":"GetBufferLength","rt":$n[1].UInt64,"p":[$n[1].Object]},{"ov":true,"a":3,"n":"PackWriteRequest","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0},{"n":"bufferpos","pt":$n[1].UInt64,"ps":1},{"n":"count","pt":$n[1].UInt64,"ps":2}],"sn":"PackWriteRequest","rt":$n[1].Object,"p":[$n[1].Object,$n[1].UInt64,$n[1].UInt64]},{"ov":true,"a":3,"n":"UnpackReadResult","t":8,"pi":[{"n":"res","pt":$n[1].Object,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3}],"sn":"UnpackReadResult","rt":$n[1].Void,"p":[$n[1].Object,$n[1].Object,$n[1].UInt64,$n[1].UInt64]}]}; }, $n);
    $m("RobotRaconteurWeb.PodArrayMemoryClient$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":System.Array.type(T),"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[System.Array.type(T)]},{"ov":true,"a":2,"n":"GetLength","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetLength","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"a":1,"n":"GetMaxTransferSize","t":8,"pi":[{"n":"cancel","pt":$n[4].CancellationToken,"ps":0}],"sn":"GetMaxTransferSize","rt":$n[5].Task$1(System.UInt32),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":System.Array.type(T),"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].UInt64,System.Array.type(T),$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":System.Array.type(T),"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].UInt64,System.Array.type(T),$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":1,"n":"impl","t":4,"rt":$n[0].PodArrayMemoryClientImpl$1(T),"sn":"impl"}]}; }, $n);
    $m("RobotRaconteurWeb.PodMultiDimArrayMemory$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[0].PodMultiDimArray],"pi":[{"n":"memory","pt":$n[0].PodMultiDimArray,"ps":0}],"sn":"$ctor1"},{"v":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":$n[0].PodMultiDimArray,"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[$n[0].PodMultiDimArray]},{"ov":true,"a":2,"n":"GetDimCount","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimCount","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"GetDimensions","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimensions","rt":$n[5].Task$1(System.Array.type(System.UInt64)),"p":[$n[4].CancellationToken]},{"v":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].PodMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].PodMultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"v":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].PodMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].PodMultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"a":1,"n":"multimemory","t":4,"rt":$n[0].PodMultiDimArray,"sn":"multimemory"}]}; }, $n);
    $m("RobotRaconteurWeb.PodMultiDimArrayMemoryClientImpl$1", function (T) { return {"att":1048576,"a":4,"m":[{"a":4,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":3,"n":"PackWriteRequest","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"elem_count","pt":$n[1].UInt64,"ps":3}],"sn":"PackWriteRequest","rt":$n[1].Object,"p":[$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64]},{"ov":true,"a":3,"n":"UnpackReadResult","t":8,"pi":[{"n":"res","pt":$n[1].Object,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"elem_count","pt":$n[1].UInt64,"ps":4}],"sn":"UnpackReadResult","rt":$n[1].Void,"p":[$n[1].Object,$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64]}]}; }, $n);
    $m("RobotRaconteurWeb.PodMultiDimArrayMemoryClient$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":$n[0].PodMultiDimArray,"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[$n[0].PodMultiDimArray]},{"ov":true,"a":2,"n":"GetDimCount","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimCount","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"GetDimensions","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimensions","rt":$n[5].Task$1(System.Array.type(System.UInt64)),"p":[$n[4].CancellationToken]},{"a":1,"n":"GetMaxTransferSize","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetMaxTransferSize","rt":$n[5].Task$1(System.UInt32),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].PodMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].PodMultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].PodMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].PodMultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":1,"n":"impl","t":4,"rt":$n[0].PodMultiDimArrayMemoryClientImpl$1(T),"sn":"impl"}]}; }, $n);
    $m("RobotRaconteurWeb.PodArrayMemoryServiceSkel$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":3,"n":"DoRead","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"bufferpos","pt":$n[1].UInt64,"ps":1},{"n":"count","pt":$n[1].UInt64,"ps":2},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":3}],"sn":"DoRead","rt":$n[5].Task$1(System.Object),"p":[$n[1].UInt64,$n[1].UInt64,$n[1].UInt64,$n[0].ArrayMemoryBase]},{"ov":true,"a":3,"n":"DoWrite","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":4}],"sn":"DoWrite","rt":$n[5].Task,"p":[$n[1].UInt64,$n[1].Object,$n[1].UInt64,$n[1].UInt64,$n[0].ArrayMemoryBase]}]}; }, $n);
    $m("RobotRaconteurWeb.PodMultiDimArrayMemoryServiceSkel$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":3,"n":"DoRead","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"elem_count","pt":$n[1].UInt64,"ps":3},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":4}],"sn":"DoRead","rt":$n[5].Task$1(System.Object),"p":[$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[0].MultiDimArrayMemoryBase]},{"ov":true,"a":3,"n":"DoWrite","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"elem_count","pt":$n[1].UInt64,"ps":4},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":5}],"sn":"DoWrite","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[0].MultiDimArrayMemoryBase]}]}; }, $n);
    $m("RobotRaconteurWeb.NamedArrayMemory$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[System.Array.type(T)],"pi":[{"n":"memory","pt":System.Array.type(T),"ps":0}],"sn":"$ctor1"}]}; }, $n);
    $m("RobotRaconteurWeb.NamedArrayMemoryClientImpl$1", function (T) { return {"att":1048576,"a":4,"m":[{"a":4,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":3,"n":"GetBufferLength","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0}],"sn":"GetBufferLength","rt":$n[1].UInt64,"p":[$n[1].Object]},{"ov":true,"a":3,"n":"PackWriteRequest","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0},{"n":"bufferpos","pt":$n[1].UInt64,"ps":1},{"n":"count","pt":$n[1].UInt64,"ps":2}],"sn":"PackWriteRequest","rt":$n[1].Object,"p":[$n[1].Object,$n[1].UInt64,$n[1].UInt64]},{"ov":true,"a":3,"n":"UnpackReadResult","t":8,"pi":[{"n":"res","pt":$n[1].Object,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3}],"sn":"UnpackReadResult","rt":$n[1].Void,"p":[$n[1].Object,$n[1].Object,$n[1].UInt64,$n[1].UInt64]}]}; }, $n);
    $m("RobotRaconteurWeb.NamedArrayMemoryClient$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":System.Array.type(T),"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[System.Array.type(T)]},{"ov":true,"a":2,"n":"GetLength","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetLength","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"a":1,"n":"GetMaxTransferSize","t":8,"pi":[{"n":"cancel","pt":$n[4].CancellationToken,"ps":0}],"sn":"GetMaxTransferSize","rt":$n[5].Task$1(System.UInt32),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":System.Array.type(T),"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].UInt64,System.Array.type(T),$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":System.Array.type(T),"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].UInt64,System.Array.type(T),$n[1].UInt64,$n[1].UInt64,$n[4].CancellationToken]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":1,"n":"impl","t":4,"rt":$n[0].NamedArrayMemoryClientImpl$1(T),"sn":"impl"}]}; }, $n);
    $m("RobotRaconteurWeb.NamedMultiDimArrayMemory$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[0].NamedMultiDimArray],"pi":[{"n":"memory","pt":$n[0].NamedMultiDimArray,"ps":0}],"sn":"$ctor1"},{"v":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":$n[0].NamedMultiDimArray,"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[$n[0].NamedMultiDimArray]},{"ov":true,"a":2,"n":"GetDimCount","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimCount","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"GetDimensions","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimensions","rt":$n[5].Task$1(System.Array.type(System.UInt64)),"p":[$n[4].CancellationToken]},{"v":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].NamedMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].NamedMultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"v":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].NamedMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].NamedMultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"a":1,"n":"multimemory","t":4,"rt":$n[0].NamedMultiDimArray,"sn":"multimemory"}]}; }, $n);
    $m("RobotRaconteurWeb.NamedMultiDimArrayMemoryClientImpl$1", function (T) { return {"att":1048576,"a":4,"m":[{"a":4,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":3,"n":"PackWriteRequest","t":8,"pi":[{"n":"buffer","pt":$n[1].Object,"ps":0},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"elem_count","pt":$n[1].UInt64,"ps":3}],"sn":"PackWriteRequest","rt":$n[1].Object,"p":[$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64]},{"ov":true,"a":3,"n":"UnpackReadResult","t":8,"pi":[{"n":"res","pt":$n[1].Object,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"elem_count","pt":$n[1].UInt64,"ps":4}],"sn":"UnpackReadResult","rt":$n[1].Void,"p":[$n[1].Object,$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64]}]}; }, $n);
    $m("RobotRaconteurWeb.NamedMultiDimArrayMemoryClient$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":2,"n":"Attach","t":8,"pi":[{"n":"memory","pt":$n[0].NamedMultiDimArray,"ps":0}],"sn":"Attach","rt":$n[1].Void,"p":[$n[0].NamedMultiDimArray]},{"ov":true,"a":2,"n":"GetDimCount","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimCount","rt":$n[5].Task$1(System.UInt64),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"GetDimensions","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDimensions","rt":$n[5].Task$1(System.Array.type(System.UInt64)),"p":[$n[4].CancellationToken]},{"a":1,"n":"GetMaxTransferSize","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetMaxTransferSize","rt":$n[5].Task$1(System.UInt32),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Read","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].NamedMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Read","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].NamedMultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Write","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[0].NamedMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"Write","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[0].NamedMultiDimArray,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[4].CancellationToken]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"a":1,"n":"impl","t":4,"rt":$n[0].NamedMultiDimArrayMemoryClientImpl$1(T),"sn":"impl"}]}; }, $n);
    $m("RobotRaconteurWeb.NamedArrayMemoryServiceSkel$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":3,"n":"DoRead","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"bufferpos","pt":$n[1].UInt64,"ps":1},{"n":"count","pt":$n[1].UInt64,"ps":2},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":3}],"sn":"DoRead","rt":$n[5].Task$1(System.Object),"p":[$n[1].UInt64,$n[1].UInt64,$n[1].UInt64,$n[0].ArrayMemoryBase]},{"ov":true,"a":3,"n":"DoWrite","t":8,"pi":[{"n":"memorypos","pt":$n[1].UInt64,"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].UInt64,"ps":2},{"n":"count","pt":$n[1].UInt64,"ps":3},{"n":"mem","pt":$n[0].ArrayMemoryBase,"ps":4}],"sn":"DoWrite","rt":$n[5].Task,"p":[$n[1].UInt64,$n[1].Object,$n[1].UInt64,$n[1].UInt64,$n[0].ArrayMemoryBase]}]}; }, $n);
    $m("RobotRaconteurWeb.NamedMultiDimArrayMemoryServiceSkel$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[1].UInt32,$n[0].MemberDefinition_Direction],"pi":[{"n":"membername","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"element_size","pt":$n[1].UInt32,"ps":2},{"n":"direction","dv":2,"o":true,"pt":$n[0].MemberDefinition_Direction,"ps":3}],"sn":"ctor"},{"ov":true,"a":3,"n":"DoRead","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":1},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"elem_count","pt":$n[1].UInt64,"ps":3},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":4}],"sn":"DoRead","rt":$n[5].Task$1(System.Object),"p":[$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[0].MultiDimArrayMemoryBase]},{"ov":true,"a":3,"n":"DoWrite","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt64),"ps":0},{"n":"buffer","pt":$n[1].Object,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt64),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt64),"ps":3},{"n":"elem_count","pt":$n[1].UInt64,"ps":4},{"n":"mem","pt":$n[0].MultiDimArrayMemoryBase,"ps":5}],"sn":"DoWrite","rt":$n[5].Task,"p":[$n[1].Array.type(System.UInt64),$n[1].Object,$n[1].Array.type(System.UInt64),$n[1].Array.type(System.UInt64),$n[1].UInt64,$n[0].MultiDimArrayMemoryBase]}]}; }, $n);
    $m("RobotRaconteurWeb.DataTypes", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"bool_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"bool_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"cdouble_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"cdouble_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"csingle_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"csingle_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"dictionary_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"dictionary_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"double_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"double_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"enum_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"enum_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"int16_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"int16_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"int32_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"int32_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"int64_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"int64_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"int8_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"int8_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"list_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"list_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"multidimarray_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"multidimarray_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"namedarray_array_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"namedarray_array_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"namedarray_multidimarray_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"namedarray_multidimarray_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"namedarray_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"namedarray_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"namedtype_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"namedtype_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"object_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"object_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"pod_array_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"pod_array_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"pod_multidimarray_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"pod_multidimarray_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"pod_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"pod_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"single_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"single_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"string_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"string_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"structure_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"structure_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"uint16_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"uint16_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"uint32_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"uint32_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"uint64_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"uint64_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"uint8_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"uint8_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"varobject_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"varobject_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"varvalue_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"varvalue_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"vector_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"vector_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"void_t","is":true,"t":4,"rt":$n[0].DataTypes,"sn":"void_t","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}}]}; }, $n);
    $m("RobotRaconteurWeb.DataTypes_ArrayTypes", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"array","is":true,"t":4,"rt":$n[0].DataTypes_ArrayTypes,"sn":"array","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ArrayTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ArrayTypes));}},{"a":2,"n":"multidimarray","is":true,"t":4,"rt":$n[0].DataTypes_ArrayTypes,"sn":"multidimarray","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ArrayTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ArrayTypes));}},{"a":2,"n":"none","is":true,"t":4,"rt":$n[0].DataTypes_ArrayTypes,"sn":"none","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ArrayTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ArrayTypes));}}]}; }, $n);
    $m("RobotRaconteurWeb.DataTypes_ContainerTypes", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"generator","is":true,"t":4,"rt":$n[0].DataTypes_ContainerTypes,"sn":"generator","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ContainerTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ContainerTypes));}},{"a":2,"n":"list","is":true,"t":4,"rt":$n[0].DataTypes_ContainerTypes,"sn":"list","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ContainerTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ContainerTypes));}},{"a":2,"n":"map_int32","is":true,"t":4,"rt":$n[0].DataTypes_ContainerTypes,"sn":"map_int32","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ContainerTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ContainerTypes));}},{"a":2,"n":"map_string","is":true,"t":4,"rt":$n[0].DataTypes_ContainerTypes,"sn":"map_string","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ContainerTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ContainerTypes));}},{"a":2,"n":"none","is":true,"t":4,"rt":$n[0].DataTypes_ContainerTypes,"sn":"none","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ContainerTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ContainerTypes));}}]}; }, $n);
    $m("RobotRaconteurWeb.MessageEntryType", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"CallbackCallReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"CallbackCallReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"CallbackCallRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"CallbackCallRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ClientKeepAliveReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ClientKeepAliveReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ClientKeepAliveRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ClientKeepAliveRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ClientSessionOpReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ClientSessionOpReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ClientSessionOpRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ClientSessionOpRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ConnectClient","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ConnectClient","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ConnectClientCombined","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ConnectClientCombined","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ConnectClientCombinedRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ConnectClientCombinedRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ConnectClientRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ConnectClientRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ConnectionTest","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ConnectionTest","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ConnectionTestRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ConnectionTestRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"DisconnectClient","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"DisconnectClient","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"DisconnectClientRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"DisconnectClientRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"EndpointCheckCapability","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"EndpointCheckCapability","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"EndpointCheckCapabilityRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"EndpointCheckCapabilityRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"EventReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"EventReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"EventRes","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"EventRes","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"FunctionCallReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"FunctionCallReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"FunctionCallRes","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"FunctionCallRes","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"GeneratorNextReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"GeneratorNextReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"GeneratorNextRes","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"GeneratorNextRes","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"GetNodeInfo","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"GetNodeInfo","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"GetNodeInfoRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"GetNodeInfoRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"GetServiceAttributes","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"GetServiceAttributes","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"GetServiceAttributesRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"GetServiceAttributesRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"GetServiceDesc","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"GetServiceDesc","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"GetServiceDescRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"GetServiceDescRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"MemoryGetParam","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"MemoryGetParam","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"MemoryGetParamRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"MemoryGetParamRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"MemoryRead","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"MemoryRead","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"MemoryReadRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"MemoryReadRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"MemoryWrite","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"MemoryWrite","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"MemoryWriteRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"MemoryWriteRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"NodeCheckCapability","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"NodeCheckCapability","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"NodeCheckCapabilityRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"NodeCheckCapabilityRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"Null","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"Null","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ObjectTypeName","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ObjectTypeName","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ObjectTypeNameRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ObjectTypeNameRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PipeClosed","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PipeClosed","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PipeClosedRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PipeClosedRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PipeConnectReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PipeConnectReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PipeConnectRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PipeConnectRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PipeDisconnectReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PipeDisconnectReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PipeDisconnectRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PipeDisconnectRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PipePacket","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PipePacket","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PipePacketRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PipePacketRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PropertyGetReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PropertyGetReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PropertyGetRes","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PropertyGetRes","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PropertySetReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PropertySetReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"PropertySetRes","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"PropertySetRes","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ReconnectClient","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ReconnectClient","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ReconnectClientRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ReconnectClientRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ServiceCheckCapabilityReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ServiceCheckCapabilityReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ServiceCheckCapabilityRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ServiceCheckCapabilityRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ServiceClosed","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ServiceClosed","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ServiceClosedRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ServiceClosedRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ServicePathReleasedReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ServicePathReleasedReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"ServicePathReleasedRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"ServicePathReleasedRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"StreamCheckCapability","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"StreamCheckCapability","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"StreamCheckCapabilityRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"StreamCheckCapabilityRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"StreamOp","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"StreamOp","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"StreamOpRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"StreamOpRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"StringTableOp","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"StringTableOp","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"StringTableOpRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"StringTableOpRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireClosed","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireClosed","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireClosedRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireClosedRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireConnectReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireConnectReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireConnectRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireConnectRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireDisconnectReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireDisconnectReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireDisconnectRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireDisconnectRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WirePacket","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WirePacket","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WirePacketRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WirePacketRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WirePeekInValueReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WirePeekInValueReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WirePeekInValueRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WirePeekInValueRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WirePeekOutValueReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WirePeekOutValueReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WirePeekOutValueRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WirePeekOutValueRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WirePokeOutValueReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WirePokeOutValueReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WirePokeOutValueRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WirePokeOutValueRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireTransportEvent","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireTransportEvent","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireTransportEventRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireTransportEventRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireTransportOpReq","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireTransportOpReq","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"WireTransportOpRet","is":true,"t":4,"rt":$n[0].MessageEntryType,"sn":"WireTransportOpRet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}}]}; }, $n);
    $m("RobotRaconteurWeb.MessageErrorType", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"AbortOperation","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"AbortOperation","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"AuthenticationError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"AuthenticationError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"BufferLimitViolation","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"BufferLimitViolation","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ConnectionError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ConnectionError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"DataSerializationError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"DataSerializationError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"DataTypeError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"DataTypeError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"DataTypeMismatch","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"DataTypeMismatch","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"EndpointCommunicationFatalError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"EndpointCommunicationFatalError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"IOError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"IOError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"InternalError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"InternalError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"InvalidArgument","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"InvalidArgument","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"InvalidEndpoint","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"InvalidEndpoint","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"InvalidOperation","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"InvalidOperation","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"KeyNotFound","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"KeyNotFound","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"MemberBusy","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"MemberBusy","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"MemberFormatMismatch","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"MemberFormatMismatch","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"MemberNotFound","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"MemberNotFound","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"MessageElementNotFound","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"MessageElementNotFound","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"MessageEntryNotFound","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"MessageEntryNotFound","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"NodeNotFound","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"NodeNotFound","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"None","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"None","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"NotImplementedError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"NotImplementedError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"NullValue","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"NullValue","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ObjectLockedError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ObjectLockedError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ObjectNotFound","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ObjectNotFound","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"OperationAborted","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"OperationAborted","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"OperationFailed","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"OperationFailed","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"OutOfRange","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"OutOfRange","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"OutOfSystemResource","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"OutOfSystemResource","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"PermissionDenied","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"PermissionDenied","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ProtocolError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ProtocolError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ReadOnlyMember","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ReadOnlyMember","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"RemoteError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"RemoteError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"RequestTimeout","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"RequestTimeout","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ResourceNotFound","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ResourceNotFound","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ServiceDefinitionError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ServiceDefinitionError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ServiceError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ServiceError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ServiceNotFound","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ServiceNotFound","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"StopIteration","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"StopIteration","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"SystemResourceError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"SystemResourceError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"SystemResourcePermissionDenied","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"SystemResourcePermissionDenied","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"UnknownError","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"UnknownError","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"ValueNotSet","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"ValueNotSet","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"WriteOnlyMember","is":true,"t":4,"rt":$n[0].MessageErrorType,"sn":"WriteOnlyMember","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}}]}; }, $n);
    $m("RobotRaconteurWeb.CDouble", function () { return {"att":1048841,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].Double,$n[1].Double],"pi":[{"n":"real","pt":$n[1].Double,"ps":0},{"n":"imag","pt":$n[1].Double,"ps":1}],"sn":"$ctor1"},{"ov":true,"a":2,"n":"Equals","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0}],"sn":"equals","rt":$n[1].Boolean,"p":[$n[1].Object],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"ov":true,"a":2,"n":"GetHashCode","t":8,"sn":"getHashCode","rt":$n[1].Int32,"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"op_Equality","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].CDouble,"ps":0},{"n":"b","pt":$n[0].CDouble,"ps":1}],"sn":"op_Equality","rt":$n[1].Boolean,"p":[$n[0].CDouble,$n[0].CDouble],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Inequality","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].CDouble,"ps":0},{"n":"b","pt":$n[0].CDouble,"ps":1}],"sn":"op_Inequality","rt":$n[1].Boolean,"p":[$n[0].CDouble,$n[0].CDouble],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"Imag","t":4,"rt":$n[1].Double,"sn":"Imag","box":function ($v) { return Bridge.box($v, System.Double, System.Double.format, System.Double.getHashCode);}},{"a":2,"n":"Real","t":4,"rt":$n[1].Double,"sn":"Real","box":function ($v) { return Bridge.box($v, System.Double, System.Double.format, System.Double.getHashCode);}}]}; }, $n);
    $m("RobotRaconteurWeb.CSingle", function () { return {"att":1048841,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].Single,$n[1].Single],"pi":[{"n":"real","pt":$n[1].Single,"ps":0},{"n":"imag","pt":$n[1].Single,"ps":1}],"sn":"$ctor1"},{"ov":true,"a":2,"n":"Equals","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0}],"sn":"equals","rt":$n[1].Boolean,"p":[$n[1].Object],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"ov":true,"a":2,"n":"GetHashCode","t":8,"sn":"getHashCode","rt":$n[1].Int32,"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"op_Equality","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].CSingle,"ps":0},{"n":"b","pt":$n[0].CSingle,"ps":1}],"sn":"op_Equality","rt":$n[1].Boolean,"p":[$n[0].CSingle,$n[0].CSingle],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Inequality","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].CSingle,"ps":0},{"n":"b","pt":$n[0].CSingle,"ps":1}],"sn":"op_Inequality","rt":$n[1].Boolean,"p":[$n[0].CSingle,$n[0].CSingle],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"Imag","t":4,"rt":$n[1].Single,"sn":"Imag","box":function ($v) { return Bridge.box($v, System.Single, System.Single.format, System.Single.getHashCode);}},{"a":2,"n":"Real","t":4,"rt":$n[1].Single,"sn":"Real","box":function ($v) { return Bridge.box($v, System.Single, System.Single.format, System.Single.getHashCode);}}]}; }, $n);
    $m("RobotRaconteurWeb.DataTypeUtil", function () { return {"att":1048961,"a":2,"s":true,"m":[{"a":2,"n":"ArrayFromDataType","is":true,"t":8,"pi":[{"n":"t","pt":$n[0].DataTypes,"ps":0},{"n":"length","pt":$n[1].UInt32,"ps":1}],"sn":"ArrayFromDataType","rt":Array,"p":[$n[0].DataTypes,$n[1].UInt32]},{"a":2,"n":"ArrayFromScalar","is":true,"t":8,"pi":[{"n":"inv","pt":$n[1].Object,"ps":0}],"sn":"ArrayFromScalar","rt":$n[1].Object,"p":[$n[1].Object]},{"a":2,"n":"IsNumber","is":true,"t":8,"pi":[{"n":"t","pt":$n[0].DataTypes,"ps":0}],"sn":"IsNumber","rt":$n[1].Boolean,"p":[$n[0].DataTypes],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"TypeIDFromString","is":true,"t":8,"pi":[{"n":"stype","pt":$n[1].String,"ps":0}],"sn":"TypeIDFromString","rt":$n[0].DataTypes,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"TypeIDFromString_known","is":true,"t":8,"pi":[{"n":"stype","pt":$n[1].String,"ps":0}],"sn":"TypeIDFromString_known","rt":$n[1].Boolean,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"TypeIDFromType","is":true,"t":8,"pi":[{"n":"stype","pt":$n[1].Type,"ps":0}],"sn":"TypeIDFromType","rt":$n[0].DataTypes,"p":[$n[1].Type],"box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].MultiDimArray,"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"sn":"VerifyArrayLength$1","rt":$n[0].MultiDimArray,"p":[$n[0].MultiDimArray,$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].NamedMultiDimArray,"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"sn":"VerifyArrayLength$2","rt":$n[0].NamedMultiDimArray,"p":[$n[0].NamedMultiDimArray,$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].PodMultiDimArray,"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"sn":"VerifyArrayLength$3","rt":$n[0].PodMultiDimArray,"p":[$n[0].PodMultiDimArray,$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[3].Dictionary$2(System.Object,System.Array.type(System.Object)),"ps":0},{"n":"len","pt":$n[1].Int32,"ps":1},{"n":"varlength","pt":$n[1].Boolean,"ps":2}],"tpc":2,"tprm":["K","T"],"sn":"VerifyArrayLength$4","rt":$n[3].Dictionary$2(System.Object,System.Array.type(System.Object)),"p":[$n[3].Dictionary$2(System.Object,System.Array.type(System.Object)),$n[1].Int32,$n[1].Boolean]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.MultiDimArray),"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"tpc":1,"tprm":["K"],"sn":"VerifyArrayLength$5","rt":$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.MultiDimArray),"p":[$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.MultiDimArray),$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.PodMultiDimArray),"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"tpc":1,"tprm":["K"],"sn":"VerifyArrayLength$7","rt":$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.PodMultiDimArray),"p":[$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.PodMultiDimArray),$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.NamedMultiDimArray),"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"tpc":1,"tprm":["K"],"sn":"VerifyArrayLength$6","rt":$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.NamedMultiDimArray),"p":[$n[3].Dictionary$2(System.Object,RobotRaconteurWeb.NamedMultiDimArray),$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[3].List$1(System.Array.type(System.Object)),"ps":0},{"n":"len","pt":$n[1].Int32,"ps":1},{"n":"varlength","pt":$n[1].Boolean,"ps":2}],"tpc":1,"tprm":["T"],"sn":"VerifyArrayLength$8","rt":$n[3].List$1(System.Array.type(System.Object)),"p":[$n[3].List$1(System.Array.type(System.Object)),$n[1].Int32,$n[1].Boolean]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[3].List$1(RobotRaconteurWeb.MultiDimArray),"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"sn":"VerifyArrayLength$9","rt":$n[3].List$1(RobotRaconteurWeb.MultiDimArray),"p":[$n[3].List$1(RobotRaconteurWeb.MultiDimArray),$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[3].List$1(RobotRaconteurWeb.PodMultiDimArray),"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"sn":"VerifyArrayLength$11","rt":$n[3].List$1(RobotRaconteurWeb.PodMultiDimArray),"p":[$n[3].List$1(RobotRaconteurWeb.PodMultiDimArray),$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":$n[3].List$1(RobotRaconteurWeb.NamedMultiDimArray),"ps":0},{"n":"n_elems","pt":$n[1].Int32,"ps":1},{"n":"len","pt":$n[1].Array.type(System.UInt32),"ps":2}],"sn":"VerifyArrayLength$10","rt":$n[3].List$1(RobotRaconteurWeb.NamedMultiDimArray),"p":[$n[3].List$1(RobotRaconteurWeb.NamedMultiDimArray),$n[1].Int32,$n[1].Array.type(System.UInt32)]},{"a":2,"n":"VerifyArrayLength","is":true,"t":8,"pi":[{"n":"a","pt":System.Array.type(System.Object),"ps":0},{"n":"len","pt":$n[1].Int32,"ps":1},{"n":"varlength","pt":$n[1].Boolean,"ps":2}],"tpc":1,"tprm":["T"],"sn":"VerifyArrayLength","rt":System.Array.type(System.Object),"p":[System.Array.type(System.Object),$n[1].Int32,$n[1].Boolean]},{"a":2,"n":"size","is":true,"t":8,"pi":[{"n":"type","pt":$n[0].DataTypes,"ps":0}],"sn":"size","rt":$n[1].UInt32,"p":[$n[0].DataTypes],"box":function ($v) { return Bridge.box($v, System.UInt32);}}]}; }, $n);
    $m("RobotRaconteurWeb.Message", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"AddEntry","t":8,"pi":[{"n":"t","pt":$n[0].MessageEntryType,"ps":0},{"n":"name","pt":$n[1].String,"ps":1}],"sn":"AddEntry","rt":$n[0].MessageEntry,"p":[$n[0].MessageEntryType,$n[1].String]},{"a":2,"n":"ComputeSize","t":8,"sn":"ComputeSize","rt":$n[1].UInt32,"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"FindEntry","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"FindEntry","rt":$n[0].MessageEntry,"p":[$n[1].String]},{"a":2,"n":"Read","t":8,"pi":[{"n":"r","pt":$n[0].ArrayBinaryReader,"ps":0}],"sn":"Read","rt":$n[1].Void,"p":[$n[0].ArrayBinaryReader]},{"a":2,"n":"Write","t":8,"pi":[{"n":"w","pt":$n[0].ArrayBinaryWriter,"ps":0}],"sn":"Write","rt":$n[1].Void,"p":[$n[0].ArrayBinaryWriter]},{"a":2,"n":"entries","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageEntry),"sn":"entries"},{"a":2,"n":"header","t":4,"rt":$n[0].MessageHeader,"sn":"header"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageHeader", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"ComputeSize","t":8,"sn":"ComputeSize","rt":$n[1].UInt16,"box":function ($v) { return Bridge.box($v, System.UInt16);}},{"a":2,"n":"Read","t":8,"pi":[{"n":"r","pt":$n[0].ArrayBinaryReader,"ps":0}],"sn":"Read","rt":$n[1].Void,"p":[$n[0].ArrayBinaryReader]},{"a":2,"n":"UpdateHeader","t":8,"pi":[{"n":"message_size","pt":$n[1].UInt32,"ps":0},{"n":"entry_count","pt":$n[1].UInt16,"ps":1}],"sn":"UpdateHeader","rt":$n[1].Void,"p":[$n[1].UInt32,$n[1].UInt16]},{"a":2,"n":"Write","t":8,"pi":[{"n":"w","pt":$n[0].ArrayBinaryWriter,"ps":0}],"sn":"Write","rt":$n[1].Void,"p":[$n[0].ArrayBinaryWriter]},{"a":2,"n":"EntryCount","t":4,"rt":$n[1].UInt16,"sn":"EntryCount","box":function ($v) { return Bridge.box($v, System.UInt16);}},{"a":2,"n":"HeaderLength","t":4,"rt":$n[1].UInt16,"sn":"HeaderLength","box":function ($v) { return Bridge.box($v, System.UInt16);}},{"a":2,"n":"MessageID","t":4,"rt":$n[1].UInt16,"sn":"MessageID","box":function ($v) { return Bridge.box($v, System.UInt16);}},{"a":2,"n":"MessageResID","t":4,"rt":$n[1].UInt16,"sn":"MessageResID","box":function ($v) { return Bridge.box($v, System.UInt16);}},{"a":2,"n":"MessageSize","t":4,"rt":$n[1].UInt32,"sn":"MessageSize","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"MetaData","t":4,"rt":$n[1].String,"sn":"MetaData"},{"a":2,"n":"ReceiverEndpoint","t":4,"rt":$n[1].UInt32,"sn":"ReceiverEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"ReceiverNodeID","t":4,"rt":$n[0].NodeID,"sn":"ReceiverNodeID"},{"a":2,"n":"ReceiverNodeName","t":4,"rt":$n[1].String,"sn":"ReceiverNodeName"},{"a":2,"n":"SenderEndpoint","t":4,"rt":$n[1].UInt32,"sn":"SenderEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"SenderNodeID","t":4,"rt":$n[0].NodeID,"sn":"SenderNodeID"},{"a":2,"n":"SenderNodeName","t":4,"rt":$n[1].String,"sn":"SenderNodeName"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageEntry", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[0].MessageEntryType,$n[1].String],"pi":[{"n":"t","pt":$n[0].MessageEntryType,"ps":0},{"n":"n","pt":$n[1].String,"ps":1}],"sn":"$ctor1"},{"a":2,"n":"AddElement","t":8,"pi":[{"n":"m","pt":$n[0].MessageElement,"ps":0}],"sn":"AddElement","rt":$n[0].MessageElement,"p":[$n[0].MessageElement]},{"a":2,"n":"AddElement","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"data","pt":$n[1].Object,"ps":1}],"sn":"AddElement$1","rt":$n[0].MessageElement,"p":[$n[1].String,$n[1].Object]},{"a":2,"n":"ComputeSize","t":8,"sn":"ComputeSize","rt":$n[1].UInt32,"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"FindElement","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"FindElement","rt":$n[0].MessageElement,"p":[$n[1].String]},{"a":2,"n":"Read","t":8,"pi":[{"n":"r","pt":$n[0].ArrayBinaryReader,"ps":0}],"sn":"Read","rt":$n[1].Void,"p":[$n[0].ArrayBinaryReader]},{"a":2,"n":"TryFindElement","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"m","out":true,"pt":$n[0].MessageElement,"ps":1}],"sn":"TryFindElement","rt":$n[1].Boolean,"p":[$n[1].String,$n[0].MessageElement],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"Write","t":8,"pi":[{"n":"w","pt":$n[0].ArrayBinaryWriter,"ps":0}],"sn":"Write","rt":$n[1].Void,"p":[$n[0].ArrayBinaryWriter]},{"a":2,"n":"EntrySize","t":4,"rt":$n[1].UInt32,"sn":"EntrySize","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"EntryType","t":4,"rt":$n[0].MessageEntryType,"sn":"EntryType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageEntryType, System.Enum.toStringFn(RobotRaconteurWeb.MessageEntryType));}},{"a":2,"n":"Error","t":4,"rt":$n[0].MessageErrorType,"sn":"Error","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MessageErrorType, System.Enum.toStringFn(RobotRaconteurWeb.MessageErrorType));}},{"a":2,"n":"MemberName","t":4,"rt":$n[1].String,"sn":"MemberName"},{"a":2,"n":"MetaData","t":4,"rt":$n[1].String,"sn":"MetaData"},{"a":2,"n":"RequestID","t":4,"rt":$n[1].UInt32,"sn":"RequestID","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"ServicePath","t":4,"rt":$n[1].String,"sn":"ServicePath"},{"a":2,"n":"elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"elements"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElement", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[1].Object],"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"datin","pt":$n[1].Object,"ps":1}],"sn":"$ctor1"},{"a":2,"n":"CastData","t":8,"tpc":1,"tprm":["T"],"sn":"CastData","rt":System.Object},{"a":2,"n":"CastData","is":true,"t":8,"pi":[{"n":"Data","pt":$n[1].Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"CastData","rt":System.Object,"p":[$n[1].Object]},{"a":2,"n":"ComputeSize","t":8,"sn":"ComputeSize","rt":$n[1].UInt32,"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"FindElement","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"name","pt":$n[1].String,"ps":1}],"sn":"FindElement","rt":$n[0].MessageElement,"p":[$n[0].MessageEntry,$n[1].String]},{"a":2,"n":"FindElement","is":true,"t":8,"pi":[{"n":"m","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0},{"n":"name","pt":$n[1].String,"ps":1}],"sn":"FindElement$1","rt":$n[0].MessageElement,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement),$n[1].String]},{"a":2,"n":"Read","t":8,"pi":[{"n":"r","pt":$n[0].ArrayBinaryReader,"ps":0}],"sn":"Read","rt":$n[1].Void,"p":[$n[0].ArrayBinaryReader]},{"a":2,"n":"UpdateData","t":8,"sn":"UpdateData","rt":$n[1].Void},{"a":2,"n":"Write","t":8,"pi":[{"n":"w","pt":$n[0].ArrayBinaryWriter,"ps":0}],"sn":"Write","rt":$n[1].Void,"p":[$n[0].ArrayBinaryWriter]},{"a":2,"n":"Data","t":16,"rt":$n[1].Object,"g":{"a":2,"n":"get_Data","t":8,"rt":$n[1].Object,"fg":"Data"},"s":{"a":2,"n":"set_Data","t":8,"p":[$n[1].Object],"rt":$n[1].Void,"fs":"Data"},"fn":"Data"},{"a":2,"n":"DataCount","t":4,"rt":$n[1].UInt32,"sn":"DataCount","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"ElementName","t":4,"rt":$n[1].String,"sn":"ElementName"},{"a":2,"n":"ElementSize","t":4,"rt":$n[1].UInt32,"sn":"ElementSize","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"ElementType","t":4,"rt":$n[0].DataTypes,"sn":"ElementType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"ElementTypeName","t":4,"rt":$n[1].String,"sn":"ElementTypeName"},{"a":2,"n":"MetaData","t":4,"rt":$n[1].String,"sn":"MetaData"},{"a":1,"n":"dat","t":4,"rt":$n[1].Object,"sn":"dat"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementStructure", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"type_","pt":$n[1].String,"ps":0},{"n":"elements_","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":1}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"},{"a":2,"n":"Type","t":4,"rt":$n[1].String,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementMap$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"e","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementList", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"e","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementMultiDimArray", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"e","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementPod", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"e","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementPodArray", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"type","pt":$n[1].String,"ps":0},{"n":"e","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":1}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"},{"a":2,"n":"Type","t":4,"rt":$n[1].String,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementPodMultiDimArray", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"type","pt":$n[1].String,"ps":0},{"n":"e","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":1}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"},{"a":2,"n":"Type","t":4,"rt":$n[1].String,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementNamedArray", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"type","pt":$n[1].String,"ps":0},{"n":"e","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":1}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"},{"a":2,"n":"Type","t":4,"rt":$n[1].String,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementNamedMultiDimArray", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[3].List$1(RobotRaconteurWeb.MessageElement)],"pi":[{"n":"type","pt":$n[1].String,"ps":0},{"n":"e","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":1}],"sn":"ctor"},{"a":2,"n":"Elements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"sn":"Elements"},{"a":2,"n":"Type","t":4,"rt":$n[1].String,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.MessageElementUtil", function () { return {"att":1048961,"a":2,"s":true,"m":[{"a":2,"n":"AddMessageElement","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"mm","pt":$n[0].MessageElement,"ps":1}],"sn":"AddMessageElement","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].MessageElement]},{"a":2,"n":"AddMessageElement","is":true,"t":8,"pi":[{"n":"vct","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0},{"n":"m","pt":$n[0].MessageElement,"ps":1}],"sn":"AddMessageElement$3","rt":$n[1].Void,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement),$n[0].MessageElement]},{"a":2,"n":"AddMessageElement","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"i","pt":$n[1].Int32,"ps":1},{"n":"data","pt":$n[1].Object,"ps":2}],"sn":"AddMessageElement$1","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[1].Int32,$n[1].Object]},{"a":2,"n":"AddMessageElement","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"name","pt":$n[1].String,"ps":1},{"n":"data","pt":$n[1].Object,"ps":2}],"sn":"AddMessageElement$2","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[1].String,$n[1].Object]},{"a":2,"n":"AddMessageElement","is":true,"t":8,"pi":[{"n":"vct","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0},{"n":"i","pt":$n[1].Int32,"ps":1},{"n":"data","pt":$n[1].Object,"ps":2}],"sn":"AddMessageElement$4","rt":$n[1].Void,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement),$n[1].Int32,$n[1].Object]},{"a":2,"n":"AddMessageElement","is":true,"t":8,"pi":[{"n":"vct","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0},{"n":"name","pt":$n[1].String,"ps":1},{"n":"data","pt":$n[1].Object,"ps":2}],"sn":"AddMessageElement$5","rt":$n[1].Void,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement),$n[1].String,$n[1].Object]},{"a":2,"n":"CastData","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageElement,"ps":0}],"tpc":1,"tprm":["T"],"sn":"CastData","rt":System.Object,"p":[$n[0].MessageElement]},{"a":2,"n":"FindElement","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"name","pt":$n[1].String,"ps":1}],"sn":"FindElement","rt":$n[0].MessageElement,"p":[$n[0].MessageEntry,$n[1].String]},{"a":2,"n":"FindElement","is":true,"t":8,"pi":[{"n":"elems","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0},{"n":"name","pt":$n[1].String,"ps":1}],"sn":"FindElement$1","rt":$n[0].MessageElement,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement),$n[1].String]},{"a":2,"n":"FindElementAndCast","is":true,"t":8,"pi":[{"n":"elems","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0},{"n":"name","pt":$n[1].String,"ps":1}],"tpc":1,"tprm":["T"],"sn":"FindElementAndCast","rt":System.Object,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement),$n[1].String]},{"a":2,"n":"GetMessageElementDataTypeString","is":true,"t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"GetMessageElementDataTypeString","rt":$n[1].String,"p":[$n[1].Object]},{"a":2,"n":"GetMessageElementNumber","is":true,"t":8,"pi":[{"n":"e","pt":$n[0].MessageElement,"ps":0}],"sn":"GetMessageElementNumber","rt":$n[1].Int32,"p":[$n[0].MessageElement],"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"NewMessageElement","is":true,"t":8,"pi":[{"n":"i","pt":$n[1].Int32,"ps":0},{"n":"data","pt":$n[1].Object,"ps":1}],"sn":"NewMessageElement","rt":$n[0].MessageElement,"p":[$n[1].Int32,$n[1].Object]},{"a":2,"n":"NewMessageElement","is":true,"t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"data","pt":$n[1].Object,"ps":1}],"sn":"NewMessageElement$1","rt":$n[0].MessageElement,"p":[$n[1].String,$n[1].Object]},{"a":2,"n":"PackArray","is":true,"t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"val","pt":System.Array.type(System.Object),"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackArray","rt":$n[0].MessageElement,"p":[$n[1].String,System.Array.type(System.Object)]},{"a":2,"n":"PackEnum","is":true,"t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"val","pt":System.Object,"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackEnum","rt":$n[0].MessageElement,"p":[$n[1].String,System.Object]},{"a":2,"n":"PackListType","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","pt":$n[3].List$1(System.Object),"ps":3}],"tpc":1,"tprm":["T"],"sn":"PackListType","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,$n[3].List$1(System.Object)]},{"a":2,"n":"PackMapType","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","pt":$n[3].Dictionary$2(System.Object,System.Object),"ps":3}],"tpc":2,"tprm":["K","T"],"sn":"PackMapType","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,$n[3].Dictionary$2(System.Object,System.Object)]},{"a":2,"n":"PackMultiDimArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"name","pt":$n[1].String,"ps":1},{"n":"val","pt":$n[0].MultiDimArray,"ps":2}],"sn":"PackMultiDimArray","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[1].String,$n[0].MultiDimArray]},{"a":2,"n":"PackNamedArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","pt":System.Array.type(System.Object),"ps":3}],"tpc":1,"tprm":["T"],"sn":"PackNamedArray","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,System.Array.type(System.Object)]},{"a":2,"n":"PackNamedArrayToArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","ref":true,"pt":System.Object,"ps":3}],"tpc":1,"tprm":["T"],"sn":"PackNamedArrayToArray","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,System.Object]},{"a":2,"n":"PackNamedMultiDimArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","pt":$n[0].NamedMultiDimArray,"ps":3}],"tpc":1,"tprm":["T"],"sn":"PackNamedMultiDimArray","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,$n[0].NamedMultiDimArray]},{"a":2,"n":"PackPodArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","pt":System.Array.type(System.Object),"ps":3}],"tpc":1,"tprm":["T"],"sn":"PackPodArray","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,System.Array.type(System.Object)]},{"a":2,"n":"PackPodMultiDimArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","pt":$n[0].PodMultiDimArray,"ps":3}],"tpc":1,"tprm":["T"],"sn":"PackPodMultiDimArray","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,$n[0].PodMultiDimArray]},{"a":2,"n":"PackPodToArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","ref":true,"pt":System.Object,"ps":3}],"tpc":1,"tprm":["T"],"sn":"PackPodToArray","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,System.Object]},{"a":2,"n":"PackScalar","is":true,"t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"val","pt":System.Object,"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackScalar","rt":$n[0].MessageElement,"p":[$n[1].String,System.Object]},{"a":2,"n":"PackString","is":true,"t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"val","pt":$n[1].String,"ps":1}],"sn":"PackString","rt":$n[0].MessageElement,"p":[$n[1].String,$n[1].String]},{"a":2,"n":"PackStructure","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","pt":$n[1].Object,"ps":3}],"sn":"PackStructure","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,$n[1].Object]},{"a":2,"n":"PackVarType","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"name","pt":$n[1].String,"ps":2},{"n":"val","pt":$n[1].Object,"ps":3}],"sn":"PackVarType","rt":$n[0].MessageElement,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[1].String,$n[1].Object]},{"a":2,"n":"UnpackArray","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageElement,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackArray","rt":System.Array.type(System.Object),"p":[$n[0].MessageElement]},{"a":2,"n":"UnpackEnum","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageElement,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackEnum","rt":System.Object,"p":[$n[0].MessageElement]},{"a":2,"n":"UnpackList","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackList","rt":$n[3].List$1(System.Object),"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackMap","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":2,"tprm":["K","T"],"sn":"UnpackMap","rt":$n[3].Dictionary$2(System.Object,System.Object),"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackMultiDimArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"m","pt":$n[0].MessageElement,"ps":1}],"sn":"UnpackMultiDimArray","rt":$n[0].MultiDimArray,"p":[$n[0].RobotRaconteurNode,$n[0].MessageElement]},{"a":2,"n":"UnpackNamedArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedArray","rt":System.Array.type(System.Object),"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackNamedArrayFromArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedArrayFromArray","rt":System.Object,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackNamedMultiDimArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedMultiDimArray","rt":$n[0].NamedMultiDimArray,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackPodArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackPodArray","rt":System.Array.type(System.Object),"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackPodFromArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackPodFromArray","rt":System.Object,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackPodMultiDimArray","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackPodMultiDimArray","rt":$n[0].PodMultiDimArray,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackScalar","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageElement,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackScalar","rt":System.Object,"p":[$n[0].MessageElement]},{"a":2,"n":"UnpackString","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackString","rt":$n[1].String,"p":[$n[0].MessageElement]},{"a":2,"n":"UnpackStructure","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackStructure","rt":System.Object,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]},{"a":2,"n":"UnpackVarType","is":true,"t":8,"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"client","pt":$n[0].ClientContext,"ps":1},{"n":"m","pt":$n[0].MessageElement,"ps":2}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext,$n[0].MessageElement]}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArray_CalculateCopyIndicesIter", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"BeginIter","is":true,"t":8,"pi":[{"n":"mema_dims","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"mema_pos","pt":$n[1].Array.type(System.UInt32),"ps":1},{"n":"memb_dims","pt":$n[1].Array.type(System.UInt32),"ps":2},{"n":"memb_pos","pt":$n[1].Array.type(System.UInt32),"ps":3},{"n":"count","pt":$n[1].Array.type(System.UInt32),"ps":4}],"sn":"BeginIter","rt":$n[0].MultiDimArray_CalculateCopyIndicesIter,"p":[$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32)]},{"a":2,"n":"Next","t":8,"pi":[{"n":"indexa","out":true,"pt":$n[1].UInt32,"ps":0},{"n":"indexb","out":true,"pt":$n[1].UInt32,"ps":1},{"n":"len","out":true,"pt":$n[1].UInt32,"ps":2}],"sn":"Next","rt":$n[1].Boolean,"p":[$n[1].UInt32,$n[1].UInt32,$n[1].UInt32],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"count","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"count"},{"a":1,"n":"current_count","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"current_count"},{"a":1,"n":"done","t":4,"rt":$n[1].Boolean,"sn":"done","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"mema_dims","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"mema_dims"},{"a":1,"n":"mema_pos","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"mema_pos"},{"a":1,"n":"memb_dims","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"memb_dims"},{"a":1,"n":"memb_pos","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"memb_pos"},{"a":1,"n":"stridea","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"stridea"},{"a":1,"n":"strideb","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"strideb"}]}; }, $n);
    $m("RobotRaconteurWeb.MultiDimArray", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].Array.type(System.UInt32),Array],"pi":[{"n":"Dims","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"Array_","pt":Array,"ps":1}],"sn":"$ctor1"},{"v":true,"a":2,"n":"AssignSubArray","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"buffer","pt":$n[0].MultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt32),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt32),"ps":3}],"sn":"AssignSubArray","rt":$n[1].Void,"p":[$n[1].Array.type(System.UInt32),$n[0].MultiDimArray,$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32)]},{"v":true,"a":2,"n":"RetrieveSubArray","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"buffer","pt":$n[0].MultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt32),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt32),"ps":3}],"sn":"RetrieveSubArray","rt":$n[1].Void,"p":[$n[1].Array.type(System.UInt32),$n[0].MultiDimArray,$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32)]},{"a":2,"n":"Array_","t":4,"rt":Array,"sn":"Array_"},{"a":2,"n":"Dims","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"Dims"}]}; }, $n);
    $m("RobotRaconteurWeb.PodMultiDimArray", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].Array.type(System.UInt32),Array],"pi":[{"n":"dims","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"array","pt":Array,"ps":1}],"sn":"$ctor1"},{"v":true,"a":2,"n":"AssignSubArray","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"buffer","pt":$n[0].PodMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt32),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt32),"ps":3}],"sn":"AssignSubArray","rt":$n[1].Void,"p":[$n[1].Array.type(System.UInt32),$n[0].PodMultiDimArray,$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32)]},{"v":true,"a":2,"n":"RetrieveSubArray","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"buffer","pt":$n[0].PodMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt32),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt32),"ps":3}],"sn":"RetrieveSubArray","rt":$n[1].Void,"p":[$n[1].Array.type(System.UInt32),$n[0].PodMultiDimArray,$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32)]},{"a":2,"n":"Dims","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"Dims"},{"a":2,"n":"pod_array","t":4,"rt":Array,"sn":"pod_array"}]}; }, $n);
    $m("RobotRaconteurWeb.NamedMultiDimArray", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].Array.type(System.UInt32),Array],"pi":[{"n":"dims","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"array","pt":Array,"ps":1}],"sn":"$ctor1"},{"v":true,"a":2,"n":"AssignSubArray","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"buffer","pt":$n[0].NamedMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt32),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt32),"ps":3}],"sn":"AssignSubArray","rt":$n[1].Void,"p":[$n[1].Array.type(System.UInt32),$n[0].NamedMultiDimArray,$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32)]},{"v":true,"a":2,"n":"RetrieveSubArray","t":8,"pi":[{"n":"memorypos","pt":$n[1].Array.type(System.UInt32),"ps":0},{"n":"buffer","pt":$n[0].NamedMultiDimArray,"ps":1},{"n":"bufferpos","pt":$n[1].Array.type(System.UInt32),"ps":2},{"n":"count","pt":$n[1].Array.type(System.UInt32),"ps":3}],"sn":"RetrieveSubArray","rt":$n[1].Void,"p":[$n[1].Array.type(System.UInt32),$n[0].NamedMultiDimArray,$n[1].Array.type(System.UInt32),$n[1].Array.type(System.UInt32)]},{"a":2,"n":"Dims","t":4,"rt":$n[1].Array.type(System.UInt32),"sn":"Dims"},{"a":2,"n":"namedarray_array","t":4,"rt":Array,"sn":"namedarray_array"}]}; }, $n);
    $m("RobotRaconteurWeb.NodeID", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].Array.type(System.Byte)],"pi":[{"n":"id","pt":$n[1].Array.type(System.Byte),"ps":0}],"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"id","pt":$n[1].String,"ps":0}],"sn":"$ctor1"},{"ov":true,"a":2,"n":"Equals","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0}],"sn":"equals","rt":$n[1].Boolean,"p":[$n[1].Object],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"ov":true,"a":2,"n":"GetHashCode","t":8,"sn":"getHashCode","rt":$n[1].Int32,"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"NewUniqueID","is":true,"t":8,"sn":"NewUniqueID","rt":$n[0].NodeID},{"a":2,"n":"ToByteArray","t":8,"sn":"ToByteArray","rt":$n[1].Array.type(System.Byte)},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"TryParse","is":true,"t":8,"pi":[{"n":"stringid","pt":$n[1].String,"ps":0},{"n":"nodeid","out":true,"pt":$n[0].NodeID,"ps":1}],"sn":"TryParse","rt":$n[1].Boolean,"p":[$n[1].String,$n[0].NodeID],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"TryParse","is":true,"t":8,"pi":[{"n":"stringid","pt":$n[1].String,"ps":0},{"n":"bytes","out":true,"pt":$n[1].Array.type(System.Byte),"ps":1}],"sn":"TryParse$1","rt":$n[1].Boolean,"p":[$n[1].String,$n[1].Array.type(System.Byte)],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Equality","is":true,"t":8,"pi":[{"n":"id1","pt":$n[0].NodeID,"ps":0},{"n":"id2","pt":$n[0].NodeID,"ps":1}],"sn":"op_Equality","rt":$n[1].Boolean,"p":[$n[0].NodeID,$n[0].NodeID],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Explicit","is":true,"t":8,"pi":[{"n":"i","pt":$n[0].NodeID,"ps":0}],"sn":"op_Explicit","rt":$n[1].Array.type(System.Byte),"p":[$n[0].NodeID]},{"a":2,"n":"op_Inequality","is":true,"t":8,"pi":[{"n":"id1","pt":$n[0].NodeID,"ps":0},{"n":"id2","pt":$n[0].NodeID,"ps":1}],"sn":"op_Inequality","rt":$n[1].Boolean,"p":[$n[0].NodeID,$n[0].NodeID],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"Any","is":true,"t":16,"rt":$n[0].NodeID,"g":{"a":2,"n":"get_Any","t":8,"rt":$n[0].NodeID,"fg":"Any","is":true},"fn":"Any"},{"a":2,"n":"IsAnyNode","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsAnyNode","t":8,"rt":$n[1].Boolean,"fg":"IsAnyNode","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsAnyNode"},{"a":1,"n":"id","t":4,"rt":$n[1].Array.type(System.Byte),"sn":"id"}]}; }, $n);
    $m("RobotRaconteurWeb.PeriodicTask", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"Run","is":true,"t":8,"pi":[{"n":"action","pt":Function,"ps":0},{"n":"period","pt":$n[1].TimeSpan,"ps":1}],"sn":"Run","rt":$n[5].Task,"p":[Function,$n[1].TimeSpan]},{"a":2,"n":"Run","is":true,"t":8,"pi":[{"n":"action","pt":Function,"ps":0},{"n":"period","pt":$n[1].TimeSpan,"ps":1},{"n":"cancellationToken","pt":$n[4].CancellationToken,"ps":2}],"sn":"Run$1","rt":$n[5].Task,"p":[Function,$n[1].TimeSpan,$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.Pipe$1", function (T) { return {"nested":[$n[0].Pipe$1.PipeEndpoint,Function,Function,Function,Function],"att":1048705,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"ab":true,"a":3,"n":"Close","t":8,"pi":[{"n":"e","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0},{"n":"ee","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"Close","rt":$n[5].Task,"p":[$n[0].Pipe$1.PipeEndpoint(T),$n[0].Endpoint,$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Connect","t":8,"pi":[{"n":"index","pt":$n[1].Int32,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"Connect","rt":$n[5].Task$1(RobotRaconteurWeb.Pipe$1.PipeEndpoint(T)),"p":[$n[1].Int32,$n[4].CancellationToken]},{"ab":true,"a":3,"n":"DeleteEndpoint","t":8,"pi":[{"n":"e","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0}],"sn":"DeleteEndpoint","rt":$n[1].Void,"p":[$n[0].Pipe$1.PipeEndpoint(T)]},{"a":3,"n":"DispatchPacket","t":8,"pi":[{"n":"me","pt":$n[0].MessageElement,"ps":0},{"n":"e","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":1},{"n":"packetnumber","out":true,"pt":$n[1].UInt32,"ps":2}],"sn":"DispatchPacket","rt":$n[1].Boolean,"p":[$n[0].MessageElement,$n[0].Pipe$1.PipeEndpoint(T),$n[1].UInt32],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"DispatchPacketAck","t":8,"pi":[{"n":"me","pt":$n[0].MessageElement,"ps":0},{"n":"e","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":1}],"sn":"DispatchPacketAck","rt":$n[1].Void,"p":[$n[0].MessageElement,$n[0].Pipe$1.PipeEndpoint(T)]},{"a":3,"n":"PackPacket","t":8,"pi":[{"n":"data","pt":T,"ps":0},{"n":"index","pt":$n[1].Int32,"ps":1},{"n":"packetnumber","pt":$n[1].UInt32,"ps":2},{"n":"requestack","pt":$n[1].Boolean,"ps":3}],"sn":"PackPacket","rt":$n[0].MessageElement,"p":[T,$n[1].Int32,$n[1].UInt32,$n[1].Boolean]},{"ab":true,"a":3,"n":"PackVarType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"ab":true,"a":2,"n":"PipePacketReceived","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1}],"sn":"PipePacketReceived","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ab":true,"a":3,"n":"SendPipePacket","t":8,"pi":[{"n":"packet","pt":T,"ps":0},{"n":"index","pt":$n[1].Int32,"ps":1},{"n":"packetnumber","pt":$n[1].UInt32,"ps":2},{"n":"requestack","pt":$n[1].Boolean,"ps":3},{"n":"endpoint","pt":$n[0].Endpoint,"ps":4},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":5}],"sn":"SendPipePacket","rt":$n[5].Task,"p":[T,$n[1].Int32,$n[1].UInt32,$n[1].Boolean,$n[0].Endpoint,$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Shutdown","t":8,"sn":"Shutdown","rt":$n[1].Void},{"ab":true,"a":3,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"ab":true,"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"ab":true,"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"ab":true,"a":2,"n":"PipeConnectCallback","t":16,"rt":Function,"g":{"ab":true,"a":2,"n":"get_PipeConnectCallback","t":8,"rt":Function,"fg":"PipeConnectCallback"},"s":{"ab":true,"a":2,"n":"set_PipeConnectCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PipeConnectCallback"},"fn":"PipeConnectCallback"},{"a":2,"n":"ANY_INDEX","is":true,"t":4,"rt":$n[1].Int32,"sn":"ANY_INDEX","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"n":"rawelements","t":4,"rt":$n[1].Boolean,"sn":"rawelements","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"backing":true,"n":"<MemberName>k__BackingField","t":4,"rt":$n[1].String,"sn":"MemberName"},{"a":1,"backing":true,"n":"<PipeConnectCallback>k__BackingField","t":4,"rt":Function,"sn":"PipeConnectCallback"}]}; }, $n);
    $m("RobotRaconteurWeb.Pipe$1.PipeEndpoint", function (T) { return {"td":$n[0].Pipe$1(T),"att":1048578,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Pipe$1(T),$n[1].Int32,$n[0].Endpoint],"pi":[{"n":"parent","pt":$n[0].Pipe$1(T),"ps":0},{"n":"index","pt":$n[1].Int32,"ps":1},{"n":"endpoint","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":2}],"sn":"ctor"},{"a":2,"n":"Close","t":8,"sn":"Close","rt":$n[5].Task},{"a":2,"n":"PeekNextPacket","t":8,"sn":"PeekNextPacket","rt":T},{"a":4,"n":"PipePacketAckReceived","t":8,"pi":[{"n":"packetnum","pt":$n[1].UInt32,"ps":0}],"sn":"PipePacketAckReceived","rt":$n[1].Void,"p":[$n[1].UInt32]},{"a":5,"n":"PipePacketReceived","t":8,"pi":[{"n":"packet","pt":T,"ps":0},{"n":"packetnum","pt":$n[1].UInt32,"ps":1}],"sn":"PipePacketReceived","rt":$n[1].Void,"p":[T,$n[1].UInt32]},{"a":2,"n":"ReceivePacket","t":8,"sn":"ReceivePacket","rt":T},{"a":4,"n":"RemoteClose","t":8,"sn":"RemoteClose","rt":$n[1].Void},{"a":2,"n":"SendPacket","t":8,"pi":[{"n":"packet","pt":T,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"SendPacket","rt":$n[5].Task$1(System.UInt32),"p":[T,$n[4].CancellationToken]},{"a":1,"n":"increment_packet_number","t":8,"pi":[{"n":"packetnum","pt":$n[1].UInt32,"ps":0}],"sn":"increment_packet_number","rt":$n[1].UInt32,"p":[$n[1].UInt32],"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"Available","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_Available","t":8,"rt":$n[1].Int32,"fg":"Available","box":function ($v) { return Bridge.box($v, System.Int32);}},"fn":"Available"},{"a":2,"n":"Endpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_Endpoint","t":8,"rt":$n[1].UInt32,"fg":"Endpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"Endpoint"},{"a":2,"n":"Index","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_Index","t":8,"rt":$n[1].Int32,"fg":"Index","box":function ($v) { return Bridge.box($v, System.Int32);}},"fn":"Index"},{"a":2,"n":"PipeCloseCallback","t":16,"rt":Function,"g":{"a":2,"n":"get_PipeCloseCallback","t":8,"rt":Function,"fg":"PipeCloseCallback"},"s":{"a":2,"n":"set_PipeCloseCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PipeCloseCallback"},"fn":"PipeCloseCallback"},{"a":2,"n":"RequestPacketAck","t":4,"rt":$n[1].Boolean,"sn":"RequestPacketAck","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"close_callback","t":4,"rt":Function,"sn":"close_callback"},{"a":1,"n":"endpoint","t":4,"rt":$n[0].Endpoint,"sn":"endpoint"},{"a":1,"n":"index","t":4,"rt":$n[1].Int32,"sn":"index","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"n":"out_of_order_packets","t":4,"rt":$n[3].Dictionary$2(System.UInt32,T),"sn":"out_of_order_packets"},{"a":1,"n":"parent","t":4,"rt":$n[0].Pipe$1(T),"sn":"parent"},{"a":1,"n":"recv_lock","t":4,"rt":$n[1].Object,"sn":"recv_lock"},{"a":1,"n":"recv_packet_number","t":4,"rt":$n[1].UInt32,"sn":"recv_packet_number","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"n":"recv_packets","t":4,"rt":$n[3].Queue$1(T),"sn":"recv_packets"},{"a":1,"n":"send_mutex","t":4,"rt":$n[0].AsyncMutex,"sn":"send_mutex"},{"a":1,"n":"send_packet_number","t":4,"rt":$n[1].UInt32,"sn":"send_packet_number","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"PacketAckReceivedEvent","t":2,"ad":{"a":2,"n":"add_PacketAckReceivedEvent","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addPacketAckReceivedEvent","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_PacketAckReceivedEvent","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removePacketAckReceivedEvent","rt":$n[1].Void,"p":[Function]}},{"a":2,"n":"PacketReceivedEvent","t":2,"ad":{"a":2,"n":"add_PacketReceivedEvent","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addPacketReceivedEvent","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_PacketReceivedEvent","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removePacketReceivedEvent","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurWeb.PipeClient$1", function (T) { return {"att":1048833,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub],"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1}],"sn":"ctor"},{"a":4,"n":"ClientContextListener","t":8,"pi":[{"n":"context","pt":$n[0].ClientContext,"ps":0},{"n":"event_","pt":$n[0].ClientServiceListenerEventType,"ps":1},{"n":"param","pt":$n[1].Object,"ps":2}],"sn":"ClientContextListener","rt":$n[1].Void,"p":[$n[0].ClientContext,$n[0].ClientServiceListenerEventType,$n[1].Object]},{"ov":true,"a":3,"n":"Close","t":8,"pi":[{"n":"e","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0},{"n":"ee","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"Close","rt":$n[5].Task,"p":[$n[0].Pipe$1.PipeEndpoint(T),$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Connect","t":8,"pi":[{"n":"index","pt":$n[1].Int32,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"Connect","rt":$n[5].Task$1(RobotRaconteurWeb.Pipe$1.PipeEndpoint(T)),"p":[$n[1].Int32,$n[4].CancellationToken]},{"ov":true,"a":3,"n":"DeleteEndpoint","t":8,"pi":[{"n":"e","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0}],"sn":"DeleteEndpoint","rt":$n[1].Void,"p":[$n[0].Pipe$1.PipeEndpoint(T)]},{"ov":true,"a":3,"n":"PackVarType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"ov":true,"a":2,"n":"PipePacketReceived","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1}],"sn":"PipePacketReceived","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":3,"n":"SendPipePacket","t":8,"pi":[{"n":"data","pt":T,"ps":0},{"n":"index","pt":$n[1].Int32,"ps":1},{"n":"packetnumber","pt":$n[1].UInt32,"ps":2},{"n":"requestack","pt":$n[1].Boolean,"ps":3},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":4},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":5}],"sn":"SendPipePacket","rt":$n[5].Task,"p":[T,$n[1].Int32,$n[1].UInt32,$n[1].Boolean,$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Shutdown","t":8,"sn":"Shutdown","rt":$n[1].Void},{"ov":true,"a":3,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"ov":true,"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"ov":true,"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"ov":true,"a":2,"n":"PipeConnectCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_PipeConnectCallback","t":8,"rt":Function,"fg":"PipeConnectCallback"},"s":{"ov":true,"a":2,"n":"set_PipeConnectCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PipeConnectCallback"},"fn":"PipeConnectCallback"},{"a":1,"n":"connecting","t":4,"rt":$n[3].List$1(System.Tuple$2(System.Int32,System.Object)),"sn":"connecting"},{"a":1,"n":"early_endpoints","t":4,"rt":$n[3].Dictionary$2(System.Int32,RobotRaconteurWeb.Pipe$1.PipeEndpoint(T)),"sn":"early_endpoints"},{"a":1,"n":"m_Name","t":4,"rt":$n[1].String,"sn":"m_Name"},{"a":1,"n":"pipeendpoints","t":4,"rt":$n[3].Dictionary$2(System.Int32,RobotRaconteurWeb.Pipe$1.PipeEndpoint(T)),"sn":"pipeendpoints"},{"a":1,"n":"stub","t":4,"rt":$n[0].ServiceStub,"sn":"stub"}]}; }, $n);
    $m("RobotRaconteurWeb.PipeServer$1", function (T) { return {"att":1048833,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel],"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1}],"sn":"ctor"},{"ov":true,"a":3,"n":"Close","t":8,"pi":[{"n":"e","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0},{"n":"ee","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"Close","rt":$n[5].Task,"p":[$n[0].Pipe$1.PipeEndpoint(T),$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Connect","t":8,"pi":[{"n":"endpoint","pt":$n[1].Int32,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"Connect","rt":$n[5].Task$1(RobotRaconteurWeb.Pipe$1.PipeEndpoint(T)),"p":[$n[1].Int32,$n[4].CancellationToken]},{"ov":true,"a":3,"n":"DeleteEndpoint","t":8,"pi":[{"n":"e","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0}],"sn":"DeleteEndpoint","rt":$n[1].Void,"p":[$n[0].Pipe$1.PipeEndpoint(T)]},{"ov":true,"a":3,"n":"PackVarType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"a":2,"n":"PipeCommand","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"PipeCommand","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"PipePacketReceived","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1}],"sn":"PipePacketReceived","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":3,"n":"SendPipePacket","t":8,"pi":[{"n":"data","pt":T,"ps":0},{"n":"index","pt":$n[1].Int32,"ps":1},{"n":"packetnumber","pt":$n[1].UInt32,"ps":2},{"n":"requestack","pt":$n[1].Boolean,"ps":3},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":4},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":5}],"sn":"SendPipePacket","rt":$n[5].Task,"p":[T,$n[1].Int32,$n[1].UInt32,$n[1].Boolean,$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Shutdown","t":8,"sn":"Shutdown","rt":$n[1].Void},{"ov":true,"a":3,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"ov":true,"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"ov":true,"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"ov":true,"a":2,"n":"PipeConnectCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_PipeConnectCallback","t":8,"rt":Function,"fg":"PipeConnectCallback"},"s":{"ov":true,"a":2,"n":"set_PipeConnectCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PipeConnectCallback"},"fn":"PipeConnectCallback"},{"a":1,"n":"callback","t":4,"rt":Function,"sn":"callback"},{"a":1,"n":"m_Name","t":4,"rt":$n[1].String,"sn":"m_Name"},{"a":1,"n":"pipeendpointlock","t":4,"rt":$n[1].Object,"sn":"pipeendpointlock"},{"a":1,"n":"pipeendpoints","t":4,"rt":$n[3].Dictionary$2(System.UInt32,System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurWeb.Pipe$1.PipeEndpoint(T))),"sn":"pipeendpoints"},{"a":1,"n":"skel","t":4,"rt":$n[0].ServiceSkel,"sn":"skel"}]}; }, $n);
    $m("RobotRaconteurWeb.PipeBroadcaster$1", function (T) { return {"nested":[$n[0].PipeBroadcaster$1.connected_endpoint],"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Pipe$1(T),$n[1].Int32],"pi":[{"n":"pipe","pt":$n[0].Pipe$1(T),"ps":0},{"n":"maximum_backlog","dv":-1,"o":true,"pt":$n[1].Int32,"ps":1}],"sn":"ctor"},{"a":2,"n":"AsyncSendPacket","t":8,"pi":[{"n":"packet","pt":T,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"AsyncSendPacket","rt":$n[5].Task,"p":[T,$n[4].CancellationToken]},{"a":3,"n":"EndpointClosed","t":8,"pi":[{"n":"ep","pt":$n[0].PipeBroadcaster$1.connected_endpoint(T),"ps":0}],"sn":"EndpointClosed","rt":$n[1].Void,"p":[$n[0].PipeBroadcaster$1.connected_endpoint(T)]},{"a":3,"n":"EndpointConnected","t":8,"pi":[{"n":"ep","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0}],"sn":"EndpointConnected","rt":$n[1].Void,"p":[$n[0].Pipe$1.PipeEndpoint(T)]},{"a":3,"n":"PacketAckReceived","t":8,"pi":[{"n":"ep","pt":$n[0].PipeBroadcaster$1.connected_endpoint(T),"ps":0},{"n":"pnum","pt":$n[1].UInt32,"ps":1}],"sn":"PacketAckReceived","rt":$n[1].Void,"p":[$n[0].PipeBroadcaster$1.connected_endpoint(T),$n[1].UInt32]},{"a":3,"n":"PacketReceived","t":8,"pi":[{"n":"ep","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0}],"sn":"PacketReceived","rt":$n[1].Void,"p":[$n[0].Pipe$1.PipeEndpoint(T)]},{"a":2,"n":"Pipe","t":16,"rt":$n[0].Pipe$1(T),"g":{"a":2,"n":"get_Pipe","t":8,"rt":$n[0].Pipe$1(T),"fg":"Pipe"},"fn":"Pipe"},{"a":3,"n":"endpoints","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.PipeBroadcaster$1.connected_endpoint(T)),"sn":"endpoints"},{"a":3,"n":"maximum_backlog","t":4,"rt":$n[1].Int32,"sn":"maximum_backlog","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":3,"n":"pipe","t":4,"rt":$n[0].Pipe$1(T),"sn":"pipe"}]}; }, $n);
    $m("RobotRaconteurWeb.PipeBroadcaster$1.connected_endpoint", function (T) { return {"td":$n[0].PipeBroadcaster$1(T),"att":1048580,"a":3,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Pipe$1.PipeEndpoint(T)],"pi":[{"n":"ep","pt":$n[0].Pipe$1.PipeEndpoint(T),"ps":0}],"sn":"ctor"},{"a":2,"n":"active_sends","t":4,"rt":$n[3].List$1(System.Object),"sn":"active_sends"},{"a":2,"n":"backlog","t":4,"rt":$n[3].List$1(System.UInt32),"sn":"backlog"},{"a":2,"n":"ep","t":4,"rt":$n[0].Pipe$1.PipeEndpoint(T),"sn":"ep"},{"a":2,"n":"forward_backlog","t":4,"rt":$n[3].List$1(System.UInt32),"sn":"forward_backlog"},{"a":2,"n":"sending","t":4,"rt":$n[1].Boolean,"sn":"sending","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurNode", function () { return {"nested":[$n[0].RobotRaconteurNode.ServiceIndexer,$n[0].RobotRaconteurNode.MonitorLock],"att":1048577,"a":2,"m":[{"a":1,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"CheckConnection","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0}],"sn":"CheckConnection","rt":$n[1].Void,"p":[$n[1].UInt32]},{"a":3,"n":"CleanDiscoveredNodes","t":8,"sn":"CleanDiscoveredNodes","rt":$n[1].Void},{"a":2,"n":"CloseService","t":8,"pi":[{"n":"sname","pt":$n[1].String,"ps":0}],"sn":"CloseService","rt":$n[1].Void,"p":[$n[1].String]},{"a":2,"n":"ConnectService","t":8,"pi":[{"n":"url","pt":$n[1].String,"ps":0},{"n":"username","dv":null,"o":true,"pt":$n[1].String,"ps":1},{"n":"credentials","dv":null,"o":true,"pt":$n[1].Object,"ps":2},{"n":"listener","dv":null,"o":true,"pt":Function,"ps":3},{"n":"objecttype","dv":null,"o":true,"pt":$n[1].String,"ps":4},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":5}],"sn":"ConnectService","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[1].String,$n[1].Object,Function,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"ConnectService","t":8,"pi":[{"n":"urls","pt":$n[1].Array.type(System.String),"ps":0},{"n":"username","dv":null,"o":true,"pt":$n[1].String,"ps":1},{"n":"credentials","dv":null,"o":true,"pt":$n[1].Object,"ps":2},{"n":"listener","dv":null,"o":true,"pt":Function,"ps":3},{"n":"objecttype","dv":null,"o":true,"pt":$n[1].String,"ps":4},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":5}],"sn":"ConnectService$1","rt":$n[5].Task$1(System.Object),"p":[$n[1].Array.type(System.String),$n[1].String,$n[1].Object,Function,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"CreateRate","t":8,"pi":[{"n":"period","pt":$n[1].Double,"ps":0}],"sn":"CreateRate","rt":$n[0].IRate,"p":[$n[1].Double]},{"a":2,"n":"CreateTimer","t":8,"pi":[{"n":"period","pt":$n[1].Int32,"ps":0},{"n":"handler","pt":Function,"ps":1},{"n":"oneshot","dv":false,"o":true,"pt":$n[1].Boolean,"ps":2}],"sn":"CreateTimer","rt":$n[0].ITimer,"p":[$n[1].Int32,Function,$n[1].Boolean]},{"a":2,"n":"DeleteEndpoint","t":8,"pi":[{"n":"e","pt":$n[0].Endpoint,"ps":0}],"sn":"DeleteEndpoint","rt":$n[1].Void,"p":[$n[0].Endpoint]},{"a":2,"n":"DisconnectService","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"DisconnectService","rt":$n[5].Task,"p":[$n[1].Object,$n[4].CancellationToken]},{"a":1,"n":"DoFindServiceByType","t":8,"pi":[{"n":"urls","pt":$n[1].Array.type(System.String),"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"DoFindServiceByType","rt":$n[5].Task$1(System.Tuple$3(System.Array.type(System.Byte),System.String,System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.ServiceInfo))),"p":[$n[1].Array.type(System.String),$n[4].CancellationToken]},{"a":2,"n":"FindNodeByID","t":8,"pi":[{"n":"id","pt":$n[0].NodeID,"ps":0},{"n":"schemes","pt":$n[1].Array.type(System.String),"ps":1}],"sn":"FindNodeByID","rt":$n[5].Task$1(System.Array.type(RobotRaconteurWeb.NodeInfo2)),"p":[$n[0].NodeID,$n[1].Array.type(System.String)]},{"a":2,"n":"FindNodeByID","t":8,"pi":[{"n":"id","pt":$n[0].NodeID,"ps":0},{"n":"schemes","pt":$n[1].Array.type(System.String),"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"FindNodeByID$1","rt":$n[5].Task$1(System.Array.type(RobotRaconteurWeb.NodeInfo2)),"p":[$n[0].NodeID,$n[1].Array.type(System.String),$n[4].CancellationToken]},{"a":2,"n":"FindNodeByName","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"schemes","pt":$n[1].Array.type(System.String),"ps":1}],"sn":"FindNodeByName","rt":$n[5].Task$1(System.Array.type(RobotRaconteurWeb.NodeInfo2)),"p":[$n[1].String,$n[1].Array.type(System.String)]},{"a":2,"n":"FindNodeByName","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"schemes","pt":$n[1].Array.type(System.String),"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"FindNodeByName$1","rt":$n[5].Task$1(System.Array.type(RobotRaconteurWeb.NodeInfo2)),"p":[$n[1].String,$n[1].Array.type(System.String),$n[4].CancellationToken]},{"a":2,"n":"FindObjRefTyped","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"objref","pt":$n[1].String,"ps":1},{"n":"objecttype","pt":$n[1].String,"ps":2},{"n":"cancel","pt":$n[4].CancellationToken,"ps":3}],"sn":"FindObjRefTyped$1","rt":$n[5].Task$1(System.Object),"p":[$n[1].Object,$n[1].String,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"FindObjRefTyped","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"objref","pt":$n[1].String,"ps":1},{"n":"index","pt":$n[1].String,"ps":2},{"n":"objecttype","pt":$n[1].String,"ps":3},{"n":"cancel","pt":$n[4].CancellationToken,"ps":4}],"sn":"FindObjRefTyped","rt":$n[5].Task$1(System.Object),"p":[$n[1].Object,$n[1].String,$n[1].String,$n[1].String,$n[4].CancellationToken]},{"a":2,"n":"FindServiceByType","t":8,"pi":[{"n":"servicetype","pt":$n[1].String,"ps":0},{"n":"transportschemes","pt":$n[1].Array.type(System.String),"ps":1}],"sn":"FindServiceByType","rt":$n[5].Task$1(System.Array.type(RobotRaconteurWeb.ServiceInfo2)),"p":[$n[1].String,$n[1].Array.type(System.String)]},{"a":2,"n":"FindServiceByType","t":8,"pi":[{"n":"servicetype","pt":$n[1].String,"ps":0},{"n":"transportschemes","pt":$n[1].Array.type(System.String),"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"FindServiceByType$1","rt":$n[5].Task$1(System.Array.type(RobotRaconteurWeb.ServiceInfo2)),"p":[$n[1].String,$n[1].Array.type(System.String),$n[4].CancellationToken]},{"a":2,"n":"GenerateErrorReturnMessage","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"err","pt":$n[0].MessageErrorType,"ps":1},{"n":"errname","pt":$n[1].String,"ps":2},{"n":"errdesc","pt":$n[1].String,"ps":3}],"sn":"GenerateErrorReturnMessage","rt":$n[0].Message,"p":[$n[0].Message,$n[0].MessageErrorType,$n[1].String,$n[1].String]},{"a":2,"n":"GetRandomString","t":8,"pi":[{"n":"count","pt":$n[1].Int32,"ps":0}],"sn":"GetRandomString","rt":$n[1].String,"p":[$n[1].Int32]},{"a":2,"n":"GetService","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"GetService","rt":$n[0].ServerContext,"p":[$n[1].String]},{"a":2,"n":"GetServiceAttributes","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0}],"sn":"GetServiceAttributes","rt":$n[3].Dictionary$2(System.String,System.Object),"p":[$n[1].Object]},{"a":1,"n":"GetServiceFactoryForType","t":8,"pi":[{"n":"type","pt":$n[1].String,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"GetServiceFactoryForType","rt":$n[0].ServiceFactory,"p":[$n[1].String,$n[0].ClientContext]},{"a":1,"n":"GetServiceFactoryForType","t":8,"pi":[{"n":"type","pt":$n[1].Type,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"GetServiceFactoryForType$1","rt":$n[0].ServiceFactory,"p":[$n[1].Type,$n[0].ClientContext]},{"a":2,"n":"GetServiceType","t":8,"pi":[{"n":"servicetype","pt":$n[1].String,"ps":0}],"sn":"GetServiceType","rt":$n[0].ServiceFactory,"p":[$n[1].String]},{"a":2,"n":"GetServiceTypes","t":8,"sn":"GetServiceTypes","rt":$n[1].Array.type(System.String)},{"a":2,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"MessageReceived","rt":$n[1].Void,"p":[$n[0].Message]},{"a":2,"n":"MonitorEnter","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"timeout","dv":-1,"o":true,"pt":$n[1].Int32,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"MonitorEnter","rt":$n[5].Task$1(RobotRaconteurWeb.RobotRaconteurNode.MonitorLock),"p":[$n[1].Object,$n[1].Int32,$n[4].CancellationToken]},{"a":2,"n":"MonitorExit","t":8,"pi":[{"n":"lock_","pt":$n[0].RobotRaconteurNode.MonitorLock,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"MonitorExit","rt":$n[5].Task,"p":[$n[0].RobotRaconteurNode.MonitorLock,$n[4].CancellationToken]},{"a":2,"n":"NodeAnnouncePacketReceived","t":8,"pi":[{"n":"packet","pt":$n[1].String,"ps":0}],"sn":"NodeAnnouncePacketReceived","rt":$n[1].Void,"p":[$n[1].String]},{"a":1,"n":"NodeDetected","t":8,"pi":[{"n":"n","pt":$n[0].NodeDiscoveryInfo,"ps":0}],"sn":"NodeDetected","rt":$n[1].Void,"p":[$n[0].NodeDiscoveryInfo]},{"a":1,"n":"PackContainerValue","t":8,"pi":[{"n":"num","pt":$n[1].Int32,"ps":0},{"n":"data","ref":true,"pt":System.Object,"ps":1},{"n":"context","pt":$n[0].ClientContext,"ps":2}],"tpc":1,"tprm":["T"],"sn":"PackContainerValue","rt":$n[0].MessageElement,"p":[$n[1].Int32,System.Object,$n[0].ClientContext]},{"a":1,"n":"PackContainerValue","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"data","ref":true,"pt":System.Object,"ps":1},{"n":"context","pt":$n[0].ClientContext,"ps":2}],"tpc":1,"tprm":["T"],"sn":"PackContainerValue$1","rt":$n[0].MessageElement,"p":[$n[1].String,System.Object,$n[0].ClientContext]},{"a":2,"n":"PackListType","t":8,"pi":[{"n":"data","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["Tvalue"],"sn":"PackListType","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"PackMapType","t":8,"pi":[{"n":"data","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":2,"tprm":["Tkey","Tvalue"],"sn":"PackMapType","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"PackMultiDimArray","t":8,"pi":[{"n":"array","pt":$n[0].MultiDimArray,"ps":0}],"sn":"PackMultiDimArray","rt":$n[0].MessageElementMultiDimArray,"p":[$n[0].MultiDimArray]},{"a":2,"n":"PackNamedArray","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"PackNamedArray$1","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"PackNamedArray","t":8,"pi":[{"n":"s","pt":System.Array.type(System.Object),"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackNamedArray","rt":$n[0].MessageElementNamedArray,"p":[System.Array.type(System.Object),$n[0].ClientContext]},{"a":2,"n":"PackNamedArrayToArray","t":8,"pi":[{"n":"s","ref":true,"pt":System.Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackNamedArrayToArray","rt":$n[0].MessageElementNamedArray,"p":[System.Object,$n[0].ClientContext]},{"a":2,"n":"PackNamedMultiDimArray","t":8,"pi":[{"n":"s","pt":$n[0].NamedMultiDimArray,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackNamedMultiDimArray","rt":$n[0].MessageElementNamedMultiDimArray,"p":[$n[0].NamedMultiDimArray,$n[0].ClientContext]},{"a":2,"n":"PackPod","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"PackPod","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"PackPodArray","t":8,"pi":[{"n":"s","pt":System.Array.type(System.Object),"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackPodArray","rt":$n[0].MessageElementPodArray,"p":[System.Array.type(System.Object),$n[0].ClientContext]},{"a":2,"n":"PackPodMultiDimArray","t":8,"pi":[{"n":"s","pt":$n[0].PodMultiDimArray,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackPodMultiDimArray","rt":$n[0].MessageElementPodMultiDimArray,"p":[$n[0].PodMultiDimArray,$n[0].ClientContext]},{"a":2,"n":"PackPodToArray","t":8,"pi":[{"n":"s","ref":true,"pt":System.Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"PackPodToArray","rt":$n[0].MessageElementPodArray,"p":[System.Object,$n[0].ClientContext]},{"a":2,"n":"PackStructure","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"PackStructure","rt":$n[0].MessageElementStructure,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"PackVarType","t":8,"pi":[{"n":"data","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"RegisterDynamicServiceFactory","t":8,"pi":[{"n":"f","pt":$n[0].DynamicServiceFactory,"ps":0}],"sn":"RegisterDynamicServiceFactory","rt":$n[1].Void,"p":[$n[0].DynamicServiceFactory]},{"a":2,"n":"RegisterEndpoint","t":8,"pi":[{"n":"e","pt":$n[0].Endpoint,"ps":0}],"sn":"RegisterEndpoint","rt":$n[1].UInt32,"p":[$n[0].Endpoint],"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"RegisterService","t":8,"pi":[{"n":"c","pt":$n[0].ServerContext,"ps":0}],"sn":"RegisterService","rt":$n[0].ServerContext,"p":[$n[0].ServerContext]},{"a":2,"n":"RegisterService","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"servicetype","pt":$n[1].String,"ps":1},{"n":"obj","pt":$n[1].Object,"ps":2},{"n":"securitypolicy","dv":null,"o":true,"pt":$n[0].ServiceSecurityPolicy,"ps":3}],"sn":"RegisterService$1","rt":$n[0].ServerContext,"p":[$n[1].String,$n[1].String,$n[1].Object,$n[0].ServiceSecurityPolicy]},{"a":2,"n":"RegisterServiceType","t":8,"pi":[{"n":"f","pt":$n[0].ServiceFactory,"ps":0}],"sn":"RegisterServiceType","rt":$n[1].Void,"p":[$n[0].ServiceFactory]},{"a":2,"n":"RegisterTransport","t":8,"pi":[{"n":"c","pt":$n[0].Transport,"ps":0}],"sn":"RegisterTransport","rt":$n[1].UInt32,"p":[$n[0].Transport],"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"ReleaseObjectLock","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"ReleaseObjectLock","rt":$n[5].Task$1(System.String),"p":[$n[1].Object,$n[4].CancellationToken]},{"a":2,"n":"RequestObjectLock","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0},{"n":"flags","pt":$n[0].RobotRaconteurObjectLockFlags,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"RequestObjectLock","rt":$n[5].Task$1(System.String),"p":[$n[1].Object,$n[0].RobotRaconteurObjectLockFlags,$n[4].CancellationToken]},{"a":2,"n":"SelectRemoteNodeURL","is":true,"t":8,"pi":[{"n":"urls","pt":$n[1].Array.type(System.String),"ps":0}],"sn":"SelectRemoteNodeURL","rt":$n[1].String,"p":[$n[1].Array.type(System.String)]},{"a":2,"n":"SendMessage","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendMessage","rt":$n[5].Task,"p":[$n[0].Message,$n[4].CancellationToken]},{"a":2,"n":"Shutdown","t":8,"sn":"Shutdown","rt":$n[1].Void},{"a":2,"n":"SpecialRequest","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"transportid","pt":$n[1].UInt32,"ps":1}],"sn":"SpecialRequest","rt":$n[5].Task$1(RobotRaconteurWeb.Message),"p":[$n[0].Message,$n[1].UInt32]},{"a":2,"n":"TryGetServiceType","t":8,"pi":[{"n":"servicetype","pt":$n[1].String,"ps":0},{"n":"f","out":true,"pt":$n[0].ServiceFactory,"ps":1}],"sn":"TryGetServiceType","rt":$n[1].Boolean,"p":[$n[1].String,$n[0].ServiceFactory],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"UnpackContainerValue","t":8,"pi":[{"n":"e","pt":$n[0].MessageElement,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"UnpackContainerValue","rt":System.Object,"p":[$n[0].MessageElement,$n[0].ClientContext]},{"a":1,"n":"UnpackContainerValue","t":8,"pi":[{"n":"e","pt":$n[0].MessageElement,"ps":0},{"n":"num","out":true,"pt":$n[1].Int32,"ps":1},{"n":"context","pt":$n[0].ClientContext,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackContainerValue$2","rt":System.Object,"p":[$n[0].MessageElement,$n[1].Int32,$n[0].ClientContext]},{"a":1,"n":"UnpackContainerValue","t":8,"pi":[{"n":"e","pt":$n[0].MessageElement,"ps":0},{"n":"name","out":true,"pt":$n[1].String,"ps":1},{"n":"context","pt":$n[0].ClientContext,"ps":2}],"tpc":1,"tprm":["T"],"sn":"UnpackContainerValue$1","rt":System.Object,"p":[$n[0].MessageElement,$n[1].String,$n[0].ClientContext]},{"a":2,"n":"UnpackListType","t":8,"pi":[{"n":"data","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["Tvalue"],"sn":"UnpackListType","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"UnpackMapType","t":8,"pi":[{"n":"data","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":2,"tprm":["Tkey","Tvalue"],"sn":"UnpackMapType","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"UnpackMultiDimArray","t":8,"pi":[{"n":"marray","pt":$n[0].MessageElementMultiDimArray,"ps":0}],"sn":"UnpackMultiDimArray","rt":$n[0].MultiDimArray,"p":[$n[0].MessageElementMultiDimArray]},{"a":2,"n":"UnpackNamedArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementNamedArray,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedArray","rt":System.Array.type(System.Object),"p":[$n[0].MessageElementNamedArray,$n[0].ClientContext]},{"a":2,"n":"UnpackNamedArray","t":8,"pi":[{"n":"l","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"UnpackNamedArray$1","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"UnpackNamedArrayFromArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementNamedArray,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedArrayFromArray","rt":System.Object,"p":[$n[0].MessageElementNamedArray,$n[0].ClientContext]},{"a":2,"n":"UnpackNamedMultiDimArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementNamedMultiDimArray,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedMultiDimArray","rt":$n[0].NamedMultiDimArray,"p":[$n[0].MessageElementNamedMultiDimArray,$n[0].ClientContext]},{"a":2,"n":"UnpackPod","t":8,"pi":[{"n":"l","pt":$n[1].Object,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"UnpackPod","rt":$n[1].Object,"p":[$n[1].Object,$n[0].ClientContext]},{"a":2,"n":"UnpackPodArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementPodArray,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"UnpackPodArray","rt":System.Array.type(System.Object),"p":[$n[0].MessageElementPodArray,$n[0].ClientContext]},{"a":2,"n":"UnpackPodFromArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementPodArray,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"UnpackPodFromArray","rt":System.Object,"p":[$n[0].MessageElementPodArray,$n[0].ClientContext]},{"a":2,"n":"UnpackPodMultiDimArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementPodMultiDimArray,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"UnpackPodMultiDimArray","rt":$n[0].PodMultiDimArray,"p":[$n[0].MessageElementPodMultiDimArray,$n[0].ClientContext]},{"a":2,"n":"UnpackStructure","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementStructure,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"tpc":1,"tprm":["T"],"sn":"UnpackStructure","rt":System.Object,"p":[$n[0].MessageElementStructure,$n[0].ClientContext]},{"a":2,"n":"UnpackVarType","t":8,"pi":[{"n":"me","pt":$n[0].MessageElement,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement,$n[0].ClientContext]},{"a":1,"n":"UpdateDetectedNodes","t":8,"pi":[{"n":"cancel","pt":$n[4].CancellationToken,"ps":0}],"sn":"UpdateDetectedNodes","rt":$n[5].Task,"p":[$n[4].CancellationToken]},{"a":2,"n":"UpdateServiceStateNonce","t":8,"sn":"UpdateServiceStateNonce","rt":$n[1].Void},{"a":2,"n":"DiscoveredNodes","t":16,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.NodeDiscoveryInfo),"g":{"a":2,"n":"get_DiscoveredNodes","t":8,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.NodeDiscoveryInfo),"fg":"DiscoveredNodes"},"fn":"DiscoveredNodes"},{"a":2,"n":"DynamicServiceFactory","t":16,"rt":$n[0].DynamicServiceFactory,"g":{"a":2,"n":"get_DynamicServiceFactory","t":8,"rt":$n[0].DynamicServiceFactory,"fg":"DynamicServiceFactory"},"fn":"DynamicServiceFactory"},{"a":2,"n":"NodeID","t":16,"rt":$n[0].NodeID,"g":{"a":2,"n":"get_NodeID","t":8,"rt":$n[0].NodeID,"fg":"NodeID"},"s":{"a":2,"n":"set_NodeID","t":8,"p":[$n[0].NodeID],"rt":$n[1].Void,"fs":"NodeID"},"fn":"NodeID"},{"a":2,"n":"NodeName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_NodeName","t":8,"rt":$n[1].String,"fg":"NodeName"},"s":{"a":2,"n":"set_NodeName","t":8,"p":[$n[1].String],"rt":$n[1].Void,"fs":"NodeName"},"fn":"NodeName"},{"a":2,"n":"ServiceStateNonce","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_ServiceStateNonce","t":8,"rt":$n[1].String,"fg":"ServiceStateNonce"},"fn":"ServiceStateNonce"},{"a":2,"n":"UtcNow","t":16,"rt":$n[1].DateTime,"g":{"a":2,"n":"get_UtcNow","t":8,"rt":$n[1].DateTime,"fg":"UtcNow","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},"fn":"UtcNow"},{"a":2,"n":"s","is":true,"t":16,"rt":$n[0].RobotRaconteurNode,"g":{"a":2,"n":"get_s","t":8,"rt":$n[0].RobotRaconteurNode,"fg":"s","is":true},"fn":"s"},{"a":2,"n":"EndpointInactivityTimeout","t":4,"rt":$n[1].UInt32,"sn":"EndpointInactivityTimeout","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"MemoryMaxTransferSize","t":4,"rt":$n[1].UInt32,"sn":"MemoryMaxTransferSize","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"RequestTimeout","t":4,"rt":$n[1].UInt32,"sn":"RequestTimeout","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"TransportInactivityTimeout","t":4,"rt":$n[1].UInt32,"sn":"TransportInactivityTimeout","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"Version","is":true,"t":4,"rt":$n[1].String,"sn":"Version"},{"a":2,"n":"browser_transport","t":4,"rt":$n[0].BrowserWebSocketTransport,"sn":"browser_transport","ro":true},{"a":1,"n":"cleandiscoverednodes_task","t":4,"rt":$n[5].Task,"sn":"cleandiscoverednodes_task"},{"a":4,"n":"dynamic_factory","t":4,"rt":$n[0].DynamicServiceFactory,"sn":"dynamic_factory"},{"a":4,"n":"endpoints","t":4,"rt":$n[3].Dictionary$2(System.UInt32,RobotRaconteurWeb.Endpoint),"sn":"endpoints"},{"a":1,"n":"m_DiscoveredNodes","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.NodeDiscoveryInfo),"sn":"m_DiscoveredNodes"},{"a":1,"n":"m_NodeID","t":4,"rt":$n[0].NodeID,"sn":"m_NodeID"},{"a":1,"n":"m_NodeName","t":4,"rt":$n[1].String,"sn":"m_NodeName"},{"a":4,"n":"service_factories","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceFactory),"sn":"service_factories"},{"a":3,"n":"service_state_nonce","t":4,"rt":$n[1].String,"sn":"service_state_nonce"},{"a":1,"n":"serviceindexer","t":4,"rt":$n[0].RobotRaconteurNode.ServiceIndexer,"sn":"serviceindexer"},{"a":4,"n":"services","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServerContext),"sn":"services"},{"a":1,"n":"shutdown_token","t":4,"rt":$n[4].CancellationTokenSource,"sn":"shutdown_token"},{"a":1,"n":"sp","is":true,"t":4,"rt":$n[0].RobotRaconteurNode,"sn":"sp"},{"a":1,"n":"transport_count","t":4,"rt":$n[1].UInt32,"sn":"transport_count","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":4,"n":"transports","t":4,"rt":$n[3].Dictionary$2(System.UInt32,RobotRaconteurWeb.Transport),"sn":"transports"}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurNode.ServiceIndexer", function () { return {"td":$n[0].RobotRaconteurNode,"att":1048579,"a":1,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].RobotRaconteurNode],"pi":[{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":0}],"sn":"ctor"},{"a":2,"n":"GetDetectedNodes","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDetectedNodes","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)),"p":[$n[4].CancellationToken]},{"a":2,"n":"GetLocalNodeServices","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetLocalNodeServices","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.ServiceInfo)),"p":[$n[4].CancellationToken]},{"a":2,"n":"GetRoutedNodes","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"GetRoutedNodes","rt":$n[5].Task$1(System.Collections.Generic.Dictionary$2(System.Int32,RobotRaconteurServiceIndex.NodeInfo)),"p":[$n[4].CancellationToken]},{"a":3,"n":"node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"node","ro":true},{"a":2,"n":"LocalNodeServicesChanged","t":2,"ad":{"a":2,"n":"add_LocalNodeServicesChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addLocalNodeServicesChanged","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_LocalNodeServicesChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removeLocalNodeServicesChanged","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurNode.MonitorLock", function () { return {"td":$n[0].RobotRaconteurNode,"att":1048578,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":4,"n":"lock_","t":4,"rt":$n[1].IDisposable,"sn":"lock_"},{"a":4,"n":"stub","t":4,"rt":$n[0].ServiceStub,"sn":"stub"}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceInfo2", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[2].ServiceInfo,$n[2].NodeInfo],"pi":[{"n":"info","pt":$n[2].ServiceInfo,"ps":0},{"n":"ninfo","pt":$n[2].NodeInfo,"ps":1}],"sn":"$ctor1"},{"a":2,"n":"Attributes","t":4,"rt":$n[3].Dictionary$2(System.String,System.Object),"sn":"Attributes"},{"a":2,"n":"ConnectionURL","t":4,"rt":$n[1].Array.type(System.String),"sn":"ConnectionURL"},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":2,"n":"NodeID","t":4,"rt":$n[0].NodeID,"sn":"NodeID"},{"a":2,"n":"NodeName","t":4,"rt":$n[1].String,"sn":"NodeName"},{"a":2,"n":"RootObjectImplements","t":4,"rt":$n[1].Array.type(System.String),"sn":"RootObjectImplements"},{"a":2,"n":"RootObjectType","t":4,"rt":$n[1].String,"sn":"RootObjectType"}]}; }, $n);
    $m("RobotRaconteurWeb.NodeInfo2", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"ConnectionURL","t":4,"rt":$n[1].Array.type(System.String),"sn":"ConnectionURL"},{"a":2,"n":"NodeID","t":4,"rt":$n[0].NodeID,"sn":"NodeID"},{"a":2,"n":"NodeName","t":4,"rt":$n[1].String,"sn":"NodeName"}]}; }, $n);
    $m("RobotRaconteurWeb.TimeSpec", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].Int64,$n[1].Int32],"pi":[{"n":"seconds","pt":$n[1].Int64,"ps":0},{"n":"nanoseconds","pt":$n[1].Int32,"ps":1}],"sn":"$ctor1"},{"ov":true,"a":2,"n":"Equals","t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0}],"sn":"equals","rt":$n[1].Boolean,"p":[$n[1].Object],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"ov":true,"a":2,"n":"GetHashCode","t":8,"sn":"getHashCode","rt":$n[1].Int32,"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"n":"QueryPerformanceCounter","is":true,"t":8,"pi":[{"n":"lpPerformanceCount","out":true,"pt":$n[1].Int64,"ps":0}],"sn":"QueryPerformanceCounter","rt":$n[1].Boolean,"p":[$n[1].Int64],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"QueryPerformanceFrequency","is":true,"t":8,"pi":[{"n":"lpFrequency","out":true,"pt":$n[1].Int64,"ps":0}],"sn":"QueryPerformanceFrequency","rt":$n[1].Boolean,"p":[$n[1].Int64],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"cleanup_nanosecs","t":8,"sn":"cleanup_nanosecs","rt":$n[1].Void},{"a":2,"n":"op_Addition","is":true,"t":8,"pi":[{"n":"t1","pt":$n[0].TimeSpec,"ps":0},{"n":"t2","pt":$n[0].TimeSpec,"ps":1}],"sn":"op_Addition","rt":$n[0].TimeSpec,"p":[$n[0].TimeSpec,$n[0].TimeSpec]},{"a":2,"n":"op_Equality","is":true,"t":8,"pi":[{"n":"t1","pt":$n[0].TimeSpec,"ps":0},{"n":"t2","pt":$n[0].TimeSpec,"ps":1}],"sn":"op_Equality","rt":$n[1].Boolean,"p":[$n[0].TimeSpec,$n[0].TimeSpec],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_GreaterThan","is":true,"t":8,"pi":[{"n":"t1","pt":$n[0].TimeSpec,"ps":0},{"n":"t2","pt":$n[0].TimeSpec,"ps":1}],"sn":"op_GreaterThan","rt":$n[1].Boolean,"p":[$n[0].TimeSpec,$n[0].TimeSpec],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_GreaterThanOrEqual","is":true,"t":8,"pi":[{"n":"t1","pt":$n[0].TimeSpec,"ps":0},{"n":"t2","pt":$n[0].TimeSpec,"ps":1}],"sn":"op_GreaterThanOrEqual","rt":$n[1].Boolean,"p":[$n[0].TimeSpec,$n[0].TimeSpec],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Inequality","is":true,"t":8,"pi":[{"n":"t1","pt":$n[0].TimeSpec,"ps":0},{"n":"t2","pt":$n[0].TimeSpec,"ps":1}],"sn":"op_Inequality","rt":$n[1].Boolean,"p":[$n[0].TimeSpec,$n[0].TimeSpec],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_LessThan","is":true,"t":8,"pi":[{"n":"t1","pt":$n[0].TimeSpec,"ps":0},{"n":"t2","pt":$n[0].TimeSpec,"ps":1}],"sn":"op_LessThan","rt":$n[1].Boolean,"p":[$n[0].TimeSpec,$n[0].TimeSpec],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_LessThanOrEqual","is":true,"t":8,"pi":[{"n":"t1","pt":$n[0].TimeSpec,"ps":0},{"n":"t2","pt":$n[0].TimeSpec,"ps":1}],"sn":"op_LessThanOrEqual","rt":$n[1].Boolean,"p":[$n[0].TimeSpec,$n[0].TimeSpec],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Subtraction","is":true,"t":8,"pi":[{"n":"t1","pt":$n[0].TimeSpec,"ps":0},{"n":"t2","pt":$n[0].TimeSpec,"ps":1}],"sn":"op_Subtraction","rt":$n[0].TimeSpec,"p":[$n[0].TimeSpec,$n[0].TimeSpec]},{"a":1,"n":"start","t":8,"sn":"start","rt":$n[1].Void},{"a":1,"n":"timespec_now","t":8,"sn":"timespec_now","rt":$n[1].Void},{"a":2,"n":"Now","is":true,"t":16,"rt":$n[0].TimeSpec,"g":{"a":2,"n":"get_Now","t":8,"rt":$n[0].TimeSpec,"fg":"Now","is":true},"fn":"Now"},{"a":1,"n":"iswindows","is":true,"t":4,"rt":$n[1].Boolean,"sn":"iswindows","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"nanoseconds","t":4,"rt":$n[1].Int32,"sn":"nanoseconds","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"seconds","t":4,"rt":$n[1].Int64,"sn":"seconds"},{"a":1,"n":"start_lock","is":true,"t":4,"rt":$n[1].Object,"sn":"start_lock"},{"a":1,"n":"start_nanoseconds","is":true,"t":4,"rt":$n[1].Int32,"sn":"start_nanoseconds","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"n":"start_seconds","is":true,"t":4,"rt":$n[1].Int64,"sn":"start_seconds"},{"a":1,"n":"start_ticks","is":true,"t":4,"rt":$n[1].Int64,"sn":"start_ticks"},{"a":1,"n":"start_time","is":true,"t":4,"rt":$n[1].DateTime,"sn":"start_time","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"n":"started","is":true,"t":4,"rt":$n[1].Boolean,"sn":"started","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"ticks_per_second","is":true,"t":4,"rt":$n[1].Int64,"sn":"ticks_per_second"}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurObjectLockFlags", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"CLIENT_LOCK","is":true,"t":4,"rt":$n[0].RobotRaconteurObjectLockFlags,"sn":"CLIENT_LOCK","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.RobotRaconteurObjectLockFlags, System.Enum.toStringFn(RobotRaconteurWeb.RobotRaconteurObjectLockFlags));}},{"a":2,"n":"USER_LOCK","is":true,"t":4,"rt":$n[0].RobotRaconteurObjectLockFlags,"sn":"USER_LOCK","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.RobotRaconteurObjectLockFlags, System.Enum.toStringFn(RobotRaconteurWeb.RobotRaconteurObjectLockFlags));}}]}; }, $n);
    $m("RobotRaconteurWeb.NodeDiscoveryInfo", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"NodeID","t":4,"rt":$n[0].NodeID,"sn":"NodeID"},{"a":2,"n":"NodeName","t":4,"rt":$n[1].String,"sn":"NodeName"},{"a":2,"n":"URLs","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.NodeDiscoveryInfoURL),"sn":"URLs"}]}; }, $n);
    $m("RobotRaconteurWeb.NodeDiscoveryInfoURL", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"LastAnnounceTime","t":4,"rt":$n[1].DateTime,"sn":"LastAnnounceTime","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":2,"n":"URL","t":4,"rt":$n[1].String,"sn":"URL"}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceSecurityPolicy", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[0].UserAuthenticator,$n[3].Dictionary$2(System.String,System.String)],"pi":[{"n":"Authenticator","pt":$n[0].UserAuthenticator,"ps":0},{"n":"Policies","pt":$n[3].Dictionary$2(System.String,System.String),"ps":1}],"sn":"$ctor1"},{"a":2,"n":"Authenticator","t":4,"rt":$n[0].UserAuthenticator,"sn":"Authenticator"},{"a":2,"n":"Policies","t":4,"rt":$n[3].Dictionary$2(System.String,System.String),"sn":"Policies"}]}; }, $n);
    $m("RobotRaconteurWeb.AuthenticatedUser", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[1].Array.type(System.String)],"pi":[{"n":"username","pt":$n[1].String,"ps":0},{"n":"privileges","pt":$n[1].Array.type(System.String),"ps":1}],"sn":"ctor"},{"a":2,"n":"UpdateLastAccess","t":8,"sn":"UpdateLastAccess","rt":$n[1].Void},{"a":2,"n":"LastAccessTime","t":16,"rt":$n[1].DateTime,"g":{"a":2,"n":"get_LastAccessTime","t":8,"rt":$n[1].DateTime,"fg":"LastAccessTime","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},"fn":"LastAccessTime"},{"a":2,"n":"LoginTime","t":16,"rt":$n[1].DateTime,"g":{"a":2,"n":"get_LoginTime","t":8,"rt":$n[1].DateTime,"fg":"LoginTime","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},"fn":"LoginTime"},{"a":2,"n":"Privileges","t":16,"rt":$n[1].Array.type(System.String),"g":{"a":2,"n":"get_Privileges","t":8,"rt":$n[1].Array.type(System.String),"fg":"Privileges"},"fn":"Privileges"},{"a":2,"n":"Username","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_Username","t":8,"rt":$n[1].String,"fg":"Username"},"fn":"Username"},{"a":1,"n":"m_LastAccessTime","t":4,"rt":$n[1].DateTime,"sn":"m_LastAccessTime","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"n":"m_LoginTime","t":4,"rt":$n[1].DateTime,"sn":"m_LoginTime","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"n":"m_Privileges","t":4,"rt":$n[1].Array.type(System.String),"sn":"m_Privileges"},{"a":1,"n":"m_Username","t":4,"rt":$n[1].String,"sn":"m_Username"}]}; }, $n);
    $m("RobotRaconteurWeb.UserAuthenticator", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"AuthenticateUser","t":8,"pi":[{"n":"username","pt":$n[1].String,"ps":0},{"n":"credentials","pt":$n[3].Dictionary$2(System.String,System.Object),"ps":1}],"sn":"RobotRaconteurWeb$UserAuthenticator$AuthenticateUser","rt":$n[0].AuthenticatedUser,"p":[$n[1].String,$n[3].Dictionary$2(System.String,System.Object)]}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceSkel", function () { return {"att":1048705,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[1].Object,$n[0].ServerContext],"pi":[{"n":"s","pt":$n[1].String,"ps":0},{"n":"o","pt":$n[1].Object,"ps":1},{"n":"c","pt":$n[0].ServerContext,"ps":2}],"sn":"ctor"},{"ab":true,"a":2,"n":"CallFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"v":true,"a":2,"n":"CallGeneratorNext","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"ep","pt":$n[0].Endpoint,"ps":1}],"sn":"CallGeneratorNext","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ab":true,"a":2,"n":"CallGetProperty","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallGetProperty","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"v":true,"a":2,"n":"CallMemoryFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"CallMemoryFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"v":true,"a":2,"n":"CallPipeFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"CallPipeFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ab":true,"a":2,"n":"CallSetProperty","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"CallSetProperty","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry]},{"v":true,"a":2,"n":"CallWireFunction","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"CallWireFunction","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"v":true,"a":2,"n":"DispatchPipeMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"DispatchPipeMessage","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"v":true,"a":2,"n":"DispatchWireMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"DispatchWireMessage","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"v":true,"a":2,"n":"GetCallbackFunction","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0},{"n":"membername","pt":$n[1].String,"ps":1}],"sn":"GetCallbackFunction","rt":$n[1].Object,"p":[$n[1].UInt32,$n[1].String]},{"a":3,"n":"GetNewGeneratorIndex","t":8,"sn":"GetNewGeneratorIndex","rt":$n[1].Int32,"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"GetSubObj","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"GetSubObj","rt":$n[5].Task$1(System.Object),"p":[$n[1].String]},{"ab":true,"a":2,"n":"GetSubObj","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"ind","pt":$n[1].String,"ps":1}],"sn":"GetSubObj$1","rt":$n[5].Task$1(System.Object),"p":[$n[1].String,$n[1].String]},{"v":true,"a":2,"n":"InitCallbackServers","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"InitCallbackServers","rt":$n[1].Void,"p":[$n[1].Object]},{"v":true,"a":2,"n":"InitPipeServers","t":8,"pi":[{"n":"obj1","pt":$n[1].Object,"ps":0}],"sn":"InitPipeServers","rt":$n[1].Void,"p":[$n[1].Object]},{"a":2,"n":"ObjRefChanged","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"ObjRefChanged","rt":$n[1].Void,"p":[$n[1].String]},{"v":true,"a":2,"n":"RegisterEvents","t":8,"pi":[{"n":"obj1","pt":$n[1].Object,"ps":0}],"sn":"RegisterEvents","rt":$n[1].Void,"p":[$n[1].Object]},{"ab":true,"a":2,"n":"ReleaseCastObject","t":8,"sn":"ReleaseCastObject","rt":$n[1].Void},{"a":2,"n":"ReleaseObject","t":8,"sn":"ReleaseObject","rt":$n[1].Void},{"a":2,"n":"SendEvent","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"SendEvent","rt":$n[1].Void,"p":[$n[0].MessageEntry]},{"a":2,"n":"SendPipeMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"SendPipeMessage","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[0].Endpoint,$n[4].CancellationToken]},{"a":2,"n":"SendWireMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"SendWireMessage","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[0].Endpoint,$n[4].CancellationToken]},{"v":true,"a":2,"n":"UnregisterEvents","t":8,"pi":[{"n":"obj1","pt":$n[1].Object,"ps":0}],"sn":"UnregisterEvents","rt":$n[1].Void,"p":[$n[1].Object]},{"a":2,"n":"IsLocked","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsLocked","t":8,"rt":$n[1].Boolean,"fg":"IsLocked","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsLocked"},{"a":2,"n":"IsMonitorLocked","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsMonitorLocked","t":8,"rt":$n[1].Boolean,"fg":"IsMonitorLocked","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsMonitorLocked"},{"a":2,"n":"RRContext","t":16,"rt":$n[0].ServerContext,"g":{"a":2,"n":"get_RRContext","t":8,"rt":$n[0].ServerContext,"fg":"RRContext"},"fn":"RRContext"},{"a":2,"n":"ServicePath","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_ServicePath","t":8,"rt":$n[1].String,"fg":"ServicePath"},"fn":"ServicePath"},{"a":2,"n":"UncastObject","t":16,"rt":$n[1].Object,"g":{"a":2,"n":"get_UncastObject","t":8,"rt":$n[1].Object,"fg":"UncastObject"},"fn":"UncastObject"},{"a":3,"n":"generators","t":4,"rt":$n[3].Dictionary$2(System.Int32,RobotRaconteurWeb.GeneratorServerBase),"sn":"generators"},{"a":3,"n":"m_ServicePath","t":4,"rt":$n[1].String,"sn":"m_ServicePath"},{"a":3,"n":"m_context","t":4,"rt":$n[0].ServerContext,"sn":"m_context"},{"a":4,"n":"monitorlock","t":4,"rt":$n[0].ServerContext.MonitorObjectSkel,"sn":"monitorlock"},{"a":4,"n":"monitorlocks","t":4,"rt":$n[3].Dictionary$2(System.UInt32,RobotRaconteurWeb.ServerContext.MonitorObjectSkel),"sn":"monitorlocks"},{"a":4,"n":"objectlock","t":4,"rt":$n[0].ServerContext.ObjectLock,"sn":"objectlock"},{"a":5,"n":"rr_context","t":4,"rt":$n[0].ClientContext,"sn":"rr_context","ro":true},{"a":5,"n":"rr_node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"rr_node"},{"a":5,"n":"uncastobj","t":4,"rt":$n[1].Object,"sn":"uncastobj"}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceSkelDynamic", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"GetObjectType","t":8,"sn":"RobotRaconteurWeb$ServiceSkelDynamic$GetObjectType","rt":$n[1].String}]}; }, $n);
    $m("RobotRaconteurWeb.ServerContext", function () { return {"nested":[$n[0].ServerContext.ObjectLock,Function,$n[0].ServerContext.MonitorObjectSkel],"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceFactory,$n[0].RobotRaconteurNode],"pi":[{"n":"f","pt":$n[0].ServiceFactory,"ps":0},{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":1}],"sn":"ctor"},{"v":true,"a":2,"n":"AddClient","t":8,"pi":[{"n":"cendpoint","pt":$n[0].ServerEndpoint,"ps":0}],"sn":"AddClient","rt":$n[1].Void,"p":[$n[0].ServerEndpoint]},{"a":2,"n":"AuthenticateUser","t":8,"pi":[{"n":"username","pt":$n[1].String,"ps":0},{"n":"credentials","pt":$n[3].Dictionary$2(System.String,System.Object),"ps":1}],"sn":"AuthenticateUser","rt":$n[0].AuthenticatedUser,"p":[$n[1].String,$n[3].Dictionary$2(System.String,System.Object)]},{"a":3,"n":"CheckServiceCapability","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"c","pt":$n[0].ServerEndpoint,"ps":1}],"sn":"CheckServiceCapability","rt":$n[0].MessageEntry,"p":[$n[0].MessageEntry,$n[0].ServerEndpoint]},{"a":1,"n":"ClientLockOp","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"ret","pt":$n[0].MessageEntry,"ps":1}],"sn":"ClientLockOp","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[0].MessageEntry]},{"a":1,"n":"ClientSessionOp","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].ServerEndpoint,"ps":1}],"sn":"ClientSessionOp","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].ServerEndpoint]},{"v":true,"a":2,"n":"Close","t":8,"sn":"Close","rt":$n[1].Void},{"v":true,"a":2,"n":"GetObjectSkel","t":8,"pi":[{"n":"servicepath","pt":$n[1].String,"ps":0}],"sn":"GetObjectSkel","rt":$n[5].Task$1(RobotRaconteurWeb.ServiceSkel),"p":[$n[1].String]},{"a":1,"n":"GetObjectSkel2","t":8,"pi":[{"n":"ppath1","pt":$n[1].String,"ps":0},{"n":"objname","pt":$n[1].String,"ps":1},{"n":"skel","pt":$n[0].ServiceSkel,"ps":2}],"sn":"GetObjectSkel2","rt":$n[5].Task$1(RobotRaconteurWeb.ServiceSkel),"p":[$n[1].String,$n[1].String,$n[0].ServiceSkel]},{"v":true,"a":2,"n":"GetObjectType","t":8,"pi":[{"n":"servicepath","pt":$n[1].String,"ps":0}],"sn":"GetObjectType","rt":$n[5].Task$1(System.String),"p":[$n[1].String]},{"v":true,"a":2,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"e","pt":$n[0].ServerEndpoint,"ps":1}],"sn":"MessageReceived","rt":$n[1].Void,"p":[$n[0].Message,$n[0].ServerEndpoint]},{"v":true,"a":2,"n":"MessageReceived2","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"e","pt":$n[0].ServerEndpoint,"ps":1}],"sn":"MessageReceived2","rt":$n[5].Task,"p":[$n[0].Message,$n[0].ServerEndpoint]},{"v":true,"a":2,"n":"PackListType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackListType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackMapType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":2,"tprm":["K","T"],"sn":"PackMapType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackMultiDimArray","t":8,"pi":[{"n":"multiDimArray","pt":$n[0].MultiDimArray,"ps":0}],"sn":"PackMultiDimArray","rt":$n[1].Object,"p":[$n[0].MultiDimArray]},{"v":true,"a":2,"n":"PackStructure","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"PackStructure","rt":$n[0].MessageElementStructure,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackVarType","t":8,"pi":[{"n":"p","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PeriodicCleanupTask","t":8,"sn":"PeriodicCleanupTask","rt":$n[1].Void},{"a":2,"n":"ProcessCallbackRequest","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"endpointid","pt":$n[1].UInt32,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"ProcessCallbackRequest","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[1].UInt32,$n[4].CancellationToken]},{"a":1,"n":"ProcessCallbackRequest_checkconnection","t":8,"sn":"ProcessCallbackRequest_checkconnection","rt":$n[5].Task},{"v":true,"a":2,"n":"ProcessMessageEntry","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"c","pt":$n[0].ServerEndpoint,"ps":1}],"sn":"ProcessMessageEntry","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].ServerEndpoint]},{"a":2,"n":"ReleaseServicePath","t":8,"pi":[{"n":"path","pt":$n[1].String,"ps":0}],"sn":"ReleaseServicePath","rt":$n[1].Void,"p":[$n[1].String]},{"a":2,"n":"ReleaseServicePath","t":8,"pi":[{"n":"path","pt":$n[1].String,"ps":0},{"n":"endpoints","pt":$n[3].List$1(System.UInt32),"ps":1}],"sn":"ReleaseServicePath$1","rt":$n[1].Void,"p":[$n[1].String,$n[3].List$1(System.UInt32)]},{"v":true,"a":2,"n":"RemoveClient","t":8,"pi":[{"n":"cendpoint","pt":$n[0].ServerEndpoint,"ps":0}],"sn":"RemoveClient","rt":$n[1].Void,"p":[$n[0].ServerEndpoint]},{"v":true,"a":2,"n":"ReplaceObject","t":8,"pi":[{"n":"path","pt":$n[1].String,"ps":0}],"sn":"ReplaceObject","rt":$n[1].Void,"p":[$n[1].String]},{"v":true,"a":2,"n":"SendEvent","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0}],"sn":"SendEvent","rt":$n[5].Task,"p":[$n[0].MessageEntry]},{"v":true,"a":2,"n":"SendMessage","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"SendMessage","rt":$n[5].Task,"p":[$n[0].MessageEntry,$n[0].Endpoint,$n[4].CancellationToken]},{"v":true,"a":2,"n":"SetBaseObject","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"o","pt":$n[1].Object,"ps":1},{"n":"policy","dv":null,"o":true,"pt":$n[0].ServiceSecurityPolicy,"ps":2}],"sn":"SetBaseObject","rt":$n[1].Void,"p":[$n[1].String,$n[1].Object,$n[0].ServiceSecurityPolicy]},{"a":3,"n":"SetSecurityPolicy","t":8,"pi":[{"n":"policy","pt":$n[0].ServiceSecurityPolicy,"ps":0}],"sn":"SetSecurityPolicy","rt":$n[1].Void,"p":[$n[0].ServiceSecurityPolicy]},{"v":true,"a":2,"n":"UnpackListType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackListType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"UnpackMapType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":2,"tprm":["K","T"],"sn":"UnpackMapType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"UnpackMultiDimArray","t":8,"pi":[{"n":"o","pt":$n[0].MessageElementMultiDimArray,"ps":0}],"sn":"UnpackMultiDimArray","rt":$n[0].MultiDimArray,"p":[$n[0].MessageElementMultiDimArray]},{"v":true,"a":2,"n":"UnpackStructure","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementStructure,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackStructure","rt":System.Object,"p":[$n[0].MessageElementStructure]},{"v":true,"a":2,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"a":3,"n":"check_lock","t":8,"pi":[{"n":"skel","pt":$n[0].ServiceSkel,"ps":0}],"sn":"check_lock","rt":$n[1].Void,"p":[$n[0].ServiceSkel]},{"a":3,"n":"check_monitor_lock","t":8,"pi":[{"n":"skel","pt":$n[0].ServiceSkel,"ps":0}],"sn":"check_monitor_lock","rt":$n[1].Void,"p":[$n[0].ServiceSkel]},{"a":2,"n":"CurrentServerContext","is":true,"t":16,"rt":$n[0].ServerContext,"g":{"a":2,"n":"get_CurrentServerContext","t":8,"rt":$n[0].ServerContext,"fg":"CurrentServerContext","is":true},"fn":"CurrentServerContext"},{"a":2,"n":"CurrentServicePath","is":true,"t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_CurrentServicePath","t":8,"rt":$n[1].String,"fg":"CurrentServicePath","is":true},"fn":"CurrentServicePath"},{"a":2,"n":"RootObjectType","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_RootObjectType","t":8,"rt":$n[1].String,"fg":"RootObjectType"},"fn":"RootObjectType"},{"a":2,"n":"ServiceDef","t":16,"rt":$n[0].ServiceFactory,"g":{"a":2,"n":"get_ServiceDef","t":8,"rt":$n[0].ServiceFactory,"fg":"ServiceDef"},"fn":"ServiceDef"},{"a":2,"n":"ServiceName","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_ServiceName","t":8,"rt":$n[1].String,"fg":"ServiceName"},"fn":"ServiceName"},{"a":1,"n":"AllowObjectLock","t":4,"rt":$n[1].Boolean,"sn":"AllowObjectLock","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"Attributes","t":4,"rt":$n[3].Dictionary$2(System.String,System.Object),"sn":"Attributes"},{"a":1,"n":"ClientLockOp_lockobj","t":4,"rt":$n[1].Object,"sn":"ClientLockOp_lockobj"},{"a":1,"n":"ProcessCallbackRequest_checkconnection_current","t":4,"rt":$n[5].Task,"sn":"ProcessCallbackRequest_checkconnection_current"},{"a":1,"n":"RequireValidUser","t":4,"rt":$n[1].Boolean,"sn":"RequireValidUser","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"active_object_locks","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServerContext.ObjectLock),"sn":"active_object_locks"},{"a":1,"n":"base_object_set","t":4,"rt":$n[1].Boolean,"sn":"base_object_set","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"cancel_source","t":4,"rt":$n[4].CancellationTokenSource,"sn":"cancel_source"},{"a":3,"n":"client_endpoints","t":4,"rt":$n[3].Dictionary$2(System.UInt32,RobotRaconteurWeb.ServerEndpoint),"sn":"client_endpoints"},{"a":1,"n":"get_sub_obj_tasks","t":4,"rt":$n[3].Dictionary$2(System.String,System.Threading.Tasks.Task$1(RobotRaconteurWeb.ServiceSkel)),"sn":"get_sub_obj_tasks","ro":true},{"a":1,"n":"m_CurrentServerContext","is":true,"t":4,"rt":$n[0].ServerContext,"sn":"m_CurrentServerContext"},{"a":1,"n":"m_CurrentServicePath","is":true,"t":4,"rt":$n[1].String,"sn":"m_CurrentServicePath"},{"a":3,"n":"m_RootObjectType","t":4,"rt":$n[1].String,"sn":"m_RootObjectType"},{"a":3,"n":"m_ServiceDef","t":4,"rt":$n[0].ServiceFactory,"sn":"m_ServiceDef"},{"a":3,"n":"m_ServiceName","t":4,"rt":$n[1].String,"sn":"m_ServiceName"},{"a":5,"n":"node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"node","ro":true},{"a":1,"n":"rec_sync","t":4,"rt":$n[1].Object,"sn":"rec_sync"},{"a":1,"n":"rec_wait","t":4,"rt":$n[3].Dictionary$2(System.UInt32,System.Tuple$2(System.Threading.Tasks.TaskCompletionSource,RobotRaconteurWeb.ServerEndpoint)),"sn":"rec_wait"},{"a":1,"n":"request_number","t":4,"rt":$n[1].UInt32,"sn":"request_number","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"n":"security_policies","t":4,"rt":$n[3].Dictionary$2(System.String,System.String),"sn":"security_policies"},{"a":3,"n":"skels","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceSkel),"sn":"skels"},{"a":1,"n":"user_authenticator","t":4,"rt":$n[0].UserAuthenticator,"sn":"user_authenticator"},{"a":2,"n":"ServerServiceListener","t":2,"ad":{"a":2,"n":"add_ServerServiceListener","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addServerServiceListener","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_ServerServiceListener","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removeServerServiceListener","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurWeb.ServerContext.ObjectLock", function () { return {"td":$n[0].ServerContext,"att":1048578,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel,$n[1].UInt32],"pi":[{"n":"username","pt":$n[1].String,"ps":0},{"n":"root_skel","pt":$n[0].ServiceSkel,"ps":1},{"n":"endpoint","dv":0,"o":true,"pt":$n[1].UInt32,"ps":2}],"sn":"ctor"},{"a":2,"n":"AddSkel","t":8,"pi":[{"n":"skel","pt":$n[0].ServiceSkel,"ps":0}],"sn":"AddSkel","rt":$n[1].Void,"p":[$n[0].ServiceSkel]},{"a":2,"n":"ReleaseLock","t":8,"sn":"ReleaseLock","rt":$n[1].Void},{"a":2,"n":"ReleaseSkel","t":8,"pi":[{"n":"skel","pt":$n[0].ServiceSkel,"ps":0}],"sn":"ReleaseSkel","rt":$n[1].Void,"p":[$n[0].ServiceSkel]},{"a":2,"n":"Endpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_Endpoint","t":8,"rt":$n[1].UInt32,"fg":"Endpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"Endpoint"},{"a":2,"n":"IsLocked","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsLocked","t":8,"rt":$n[1].Boolean,"fg":"IsLocked","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsLocked"},{"a":2,"n":"RootServicePath","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_RootServicePath","t":8,"rt":$n[1].String,"fg":"RootServicePath"},"fn":"RootServicePath"},{"a":2,"n":"Username","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_Username","t":8,"rt":$n[1].String,"fg":"Username"},"fn":"Username"},{"a":1,"n":"m_Endpoint","t":4,"rt":$n[1].UInt32,"sn":"m_Endpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"n":"m_Locked","t":4,"rt":$n[1].Boolean,"sn":"m_Locked","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"m_RootServicePath","t":4,"rt":$n[1].String,"sn":"m_RootServicePath"},{"a":1,"n":"m_RootSkel","t":4,"rt":$n[0].ServiceSkel,"sn":"m_RootSkel"},{"a":1,"n":"m_Username","t":4,"rt":$n[1].String,"sn":"m_Username"},{"a":1,"n":"skels","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.ServiceSkel),"sn":"skels"}]}; }, $n);
    $m("RobotRaconteurWeb.ServerContext.MonitorObjectSkel", function () { return {"td":$n[0].ServerContext,"att":1048578,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceSkel],"pi":[{"n":"skel","pt":$n[0].ServiceSkel,"ps":0}],"sn":"ctor"},{"a":2,"n":"MonitorContinueEnter","t":8,"pi":[{"n":"localendpoint","pt":$n[1].UInt32,"ps":0}],"sn":"MonitorContinueEnter","rt":$n[5].Task$1(System.String),"p":[$n[1].UInt32]},{"a":2,"n":"MonitorEnter","t":8,"pi":[{"n":"local_endpoint","pt":$n[1].UInt32,"ps":0},{"n":"timeout","pt":$n[1].Int32,"ps":1}],"sn":"MonitorEnter","rt":$n[5].Task$1(System.String),"p":[$n[1].UInt32,$n[1].Int32]},{"a":2,"n":"MonitorExit","t":8,"pi":[{"n":"local_endpoint","pt":$n[1].UInt32,"ps":0}],"sn":"MonitorExit","rt":$n[5].Task$1(System.String),"p":[$n[1].UInt32]},{"a":2,"n":"MonitorRefresh","t":8,"pi":[{"n":"localendpoint","pt":$n[1].UInt32,"ps":0}],"sn":"MonitorRefresh","rt":$n[5].Task,"p":[$n[1].UInt32]},{"a":1,"n":"thread_func","t":8,"sn":"thread_func","rt":$n[5].Task},{"a":2,"n":"IsLocked","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsLocked","t":8,"rt":$n[1].Boolean,"fg":"IsLocked","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsLocked"},{"a":2,"n":"LocalEndpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_LocalEndpoint","t":8,"rt":$n[1].UInt32,"fg":"LocalEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"LocalEndpoint"},{"a":1,"n":"last_refreshed","t":4,"rt":$n[1].DateTime,"sn":"last_refreshed","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"n":"local_endpoint","t":4,"rt":$n[1].UInt32,"sn":"local_endpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"n":"maintain_lock","t":4,"rt":$n[1].Boolean,"sn":"maintain_lock","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"monitor_acquire_exception","t":4,"rt":$n[1].Exception,"sn":"monitor_acquire_exception"},{"a":1,"n":"monitor_acquired","t":4,"rt":$n[1].Boolean,"sn":"monitor_acquired","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"monitor_thread_event","t":4,"rt":$n[5].TaskCompletionSource,"sn":"monitor_thread_event"},{"a":1,"n":"obj","t":4,"rt":$n[0].IRobotRaconteurMonitorObject,"sn":"obj"},{"a":1,"n":"skel","t":4,"rt":$n[0].ServiceSkel,"sn":"skel"},{"a":1,"n":"timeout","t":4,"rt":$n[1].Int32,"sn":"timeout","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"n":"wait_event","t":4,"rt":$n[5].TaskCompletionSource,"sn":"wait_event"},{"a":1,"n":"wait_thread","t":4,"rt":$n[5].Task,"sn":"wait_thread"}]}; }, $n);
    $m("RobotRaconteurWeb.ServerServiceListenerEventType", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"ClientConnected","is":true,"t":4,"rt":$n[0].ServerServiceListenerEventType,"sn":"ClientConnected","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.ServerServiceListenerEventType, System.Enum.toStringFn(RobotRaconteurWeb.ServerServiceListenerEventType));}},{"a":2,"n":"ClientDisconnected","is":true,"t":4,"rt":$n[0].ServerServiceListenerEventType,"sn":"ClientDisconnected","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.ServerServiceListenerEventType, System.Enum.toStringFn(RobotRaconteurWeb.ServerServiceListenerEventType));}},{"a":2,"n":"ServiceClosed","is":true,"t":4,"rt":$n[0].ServerServiceListenerEventType,"sn":"ServiceClosed","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.ServerServiceListenerEventType, System.Enum.toStringFn(RobotRaconteurWeb.ServerServiceListenerEventType));}}]}; }, $n);
    $m("RobotRaconteurWeb.ServerEndpoint", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServerContext,$n[0].RobotRaconteurNode],"pi":[{"n":"service","pt":$n[0].ServerContext,"ps":0},{"n":"node","pt":$n[0].RobotRaconteurNode,"ps":1}],"sn":"ctor"},{"a":2,"n":"AuthenticateUser","t":8,"pi":[{"n":"username","pt":$n[1].String,"ps":0},{"n":"credentials","pt":$n[3].Dictionary$2(System.String,System.Object),"ps":1}],"sn":"AuthenticateUser","rt":$n[1].Void,"p":[$n[1].String,$n[3].Dictionary$2(System.String,System.Object)]},{"a":2,"n":"LogoutUser","t":8,"sn":"LogoutUser","rt":$n[1].Void},{"ov":true,"a":2,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"MessageReceived","rt":$n[1].Void,"p":[$n[0].Message]},{"a":2,"n":"PeriodicCleanupTask","t":8,"sn":"PeriodicCleanupTask","rt":$n[1].Void},{"a":2,"n":"AuthenticatedUsername","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_AuthenticatedUsername","t":8,"rt":$n[1].String,"fg":"AuthenticatedUsername"},"fn":"AuthenticatedUsername"},{"a":2,"n":"CurrentAuthenticatedUser","is":true,"t":16,"rt":$n[0].AuthenticatedUser,"g":{"a":2,"n":"get_CurrentAuthenticatedUser","t":8,"rt":$n[0].AuthenticatedUser,"fg":"CurrentAuthenticatedUser","is":true},"fn":"CurrentAuthenticatedUser"},{"a":2,"n":"CurrentEndpoint","is":true,"t":16,"rt":$n[0].ServerEndpoint,"g":{"a":2,"n":"get_CurrentEndpoint","t":8,"rt":$n[0].ServerEndpoint,"fg":"CurrentEndpoint","is":true},"fn":"CurrentEndpoint"},{"a":1,"n":"endpoint_authenticated_user","t":4,"rt":$n[0].AuthenticatedUser,"sn":"endpoint_authenticated_user"},{"a":1,"n":"m_CurrentAuthenticatedUser","is":true,"t":4,"rt":$n[0].AuthenticatedUser,"sn":"m_CurrentAuthenticatedUser"},{"a":1,"n":"m_CurrentEndpoint","is":true,"t":4,"rt":$n[0].ServerEndpoint,"sn":"m_CurrentEndpoint"},{"a":5,"n":"service","t":4,"rt":$n[0].ServerContext,"sn":"service","ro":true}]}; }, $n);
    $m("RobotRaconteurWeb.IRobotRaconteurServiceObject", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"RobotRaconteurObjRefChanged","t":2,"ad":{"ab":true,"a":2,"n":"add_RobotRaconteurObjRefChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"RobotRaconteurWeb$IRobotRaconteurServiceObject$addRobotRaconteurObjRefChanged","rt":$n[1].Void,"p":[Function]},"r":{"ab":true,"a":2,"n":"remove_RobotRaconteurObjRefChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"RobotRaconteurWeb$IRobotRaconteurServiceObject$removeRobotRaconteurObjRefChanged","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurServiceObjectInterface", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"rrtype","pt":$n[1].String,"ps":0}],"sn":"ctor"},{"a":2,"n":"RRType","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_RRType","t":8,"rt":$n[1].String,"fg":"RRType"},"fn":"RRType"},{"a":1,"n":"rrtype","t":4,"rt":$n[1].String,"sn":"rrtype"}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurServiceStruct", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"rrtype","pt":$n[1].String,"ps":0}],"sn":"ctor"},{"a":2,"n":"RRType","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_RRType","t":8,"rt":$n[1].String,"fg":"RRType"},"fn":"RRType"},{"a":1,"n":"rrtype","t":4,"rt":$n[1].String,"sn":"rrtype"}]}; }, $n);
    $m("RobotRaconteurWeb.IRobotRaconteurMonitorObject", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"RobotRaconteurMonitorEnter","t":8,"sn":"RobotRaconteurWeb$IRobotRaconteurMonitorObject$RobotRaconteurMonitorEnter","rt":$n[5].Task$1(System.IDisposable)},{"ab":true,"a":2,"n":"RobotRaconteurMonitorEnter","t":8,"pi":[{"n":"timeout","pt":$n[1].Int32,"ps":0}],"sn":"RobotRaconteurWeb$IRobotRaconteurMonitorObject$RobotRaconteurMonitorEnter$1","rt":$n[5].Task$1(System.IDisposable),"p":[$n[1].Int32]}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurVersion", function () { return {"att":1048841,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"v","pt":$n[1].String,"ps":0}],"sn":"$ctor1"},{"a":2,"n":".ctor","t":1,"p":[$n[1].UInt32,$n[1].UInt32,$n[1].UInt32,$n[1].UInt32],"pi":[{"n":"major","pt":$n[1].UInt32,"ps":0},{"n":"minor","pt":$n[1].UInt32,"ps":1},{"n":"patch","dv":0,"o":true,"pt":$n[1].UInt32,"ps":2},{"n":"tweak","dv":0,"o":true,"pt":$n[1].UInt32,"ps":3}],"sn":"$ctor2"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"v","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"op_Equality","is":true,"t":8,"pi":[{"n":"v1","pt":$n[0].RobotRaconteurVersion,"ps":0},{"n":"v2","pt":$n[0].RobotRaconteurVersion,"ps":1}],"sn":"op_Equality","rt":$n[1].Boolean,"p":[$n[0].RobotRaconteurVersion,$n[0].RobotRaconteurVersion],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Explicit","is":true,"t":8,"pi":[{"n":"v1","pt":$n[0].RobotRaconteurVersion,"ps":0}],"sn":"op_Explicit","rt":$n[1].Boolean,"p":[$n[0].RobotRaconteurVersion],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_GreaterThan","is":true,"t":8,"pi":[{"n":"v1","pt":$n[0].RobotRaconteurVersion,"ps":0},{"n":"v2","pt":$n[0].RobotRaconteurVersion,"ps":1}],"sn":"op_GreaterThan","rt":$n[1].Boolean,"p":[$n[0].RobotRaconteurVersion,$n[0].RobotRaconteurVersion],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_GreaterThanOrEqual","is":true,"t":8,"pi":[{"n":"v1","pt":$n[0].RobotRaconteurVersion,"ps":0},{"n":"v2","pt":$n[0].RobotRaconteurVersion,"ps":1}],"sn":"op_GreaterThanOrEqual","rt":$n[1].Boolean,"p":[$n[0].RobotRaconteurVersion,$n[0].RobotRaconteurVersion],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Inequality","is":true,"t":8,"pi":[{"n":"v1","pt":$n[0].RobotRaconteurVersion,"ps":0},{"n":"v2","pt":$n[0].RobotRaconteurVersion,"ps":1}],"sn":"op_Inequality","rt":$n[1].Boolean,"p":[$n[0].RobotRaconteurVersion,$n[0].RobotRaconteurVersion],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_LessThan","is":true,"t":8,"pi":[{"n":"v1","pt":$n[0].RobotRaconteurVersion,"ps":0},{"n":"v2","pt":$n[0].RobotRaconteurVersion,"ps":1}],"sn":"op_LessThan","rt":$n[1].Boolean,"p":[$n[0].RobotRaconteurVersion,$n[0].RobotRaconteurVersion],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_LessThanOrEqual","is":true,"t":8,"pi":[{"n":"v1","pt":$n[0].RobotRaconteurVersion,"ps":0},{"n":"v2","pt":$n[0].RobotRaconteurVersion,"ps":1}],"sn":"op_LessThanOrEqual","rt":$n[1].Boolean,"p":[$n[0].RobotRaconteurVersion,$n[0].RobotRaconteurVersion],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"major","t":4,"rt":$n[1].UInt32,"sn":"major","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"minor","t":4,"rt":$n[1].UInt32,"sn":"minor","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"patch","t":4,"rt":$n[1].UInt32,"sn":"patch","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"tweak","t":4,"rt":$n[1].UInt32,"sn":"tweak","box":function ($v) { return Bridge.box($v, System.UInt32);}}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"CheckVersion","t":8,"pi":[{"n":"ver","dv":null,"o":true,"pt":$n[0].RobotRaconteurVersion,"ps":0}],"sn":"CheckVersion","rt":$n[1].Void,"p":[$n[0].RobotRaconteurVersion]},{"a":2,"n":"FromReader","t":8,"pi":[{"n":"is_","pt":$n[7].TextReader,"ps":0}],"sn":"FromReader","rt":$n[1].Void,"p":[$n[7].TextReader]},{"a":2,"n":"FromReader","t":8,"pi":[{"n":"is_","pt":$n[7].TextReader,"ps":0},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":1}],"sn":"FromReader$1","rt":$n[1].Void,"p":[$n[7].TextReader,$n[3].List$1(System.Exception)]},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":1}],"sn":"FromString$1","rt":$n[1].Void,"p":[$n[1].String,$n[3].List$1(System.Exception)]},{"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"ToWriter","t":8,"pi":[{"n":"o","pt":$n[7].TextWriter,"ps":0}],"sn":"ToWriter","rt":$n[1].Void,"p":[$n[7].TextWriter]},{"a":2,"n":"Constants","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ConstantDefinition),"sn":"Constants"},{"a":2,"n":"Enums","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.EnumDefinition),"sn":"Enums"},{"a":2,"n":"Exceptions","t":4,"rt":$n[3].List$1(System.String),"sn":"Exceptions"},{"a":2,"n":"Imports","t":4,"rt":$n[3].List$1(System.String),"sn":"Imports"},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":2,"n":"NamedArrays","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition),"sn":"NamedArrays"},{"a":2,"n":"Objects","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition),"sn":"Objects"},{"a":2,"n":"Options","t":4,"rt":$n[3].List$1(System.String),"sn":"Options"},{"a":2,"n":"Pods","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition),"sn":"Pods"},{"a":2,"n":"StdVer","t":4,"rt":$n[0].RobotRaconteurVersion,"sn":"StdVer"},{"a":2,"n":"Structures","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceEntryDefinition),"sn":"Structures"},{"a":2,"n":"Using","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.UsingDefinition),"sn":"Using"}]}; }, $n);
    $m("RobotRaconteurWeb.NamedTypeDefinition", function () { return {"att":1048705,"a":2,"m":[{"a":3,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"ab":true,"a":2,"n":"ResolveQualifiedName","t":8,"sn":"ResolveQualifiedName","rt":$n[1].String},{"ab":true,"a":2,"n":"RRDataType","t":16,"rt":$n[0].DataTypes,"g":{"ab":true,"a":2,"n":"get_RRDataType","t":8,"rt":$n[0].DataTypes,"fg":"RRDataType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},"fn":"RRDataType"},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":1,"backing":true,"n":"<RRDataType>k__BackingField","t":4,"rt":$n[0].DataTypes,"sn":"RRDataType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceEntryDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceDefinition],"pi":[{"n":"def","pt":$n[0].ServiceDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromStream","t":8,"pi":[{"n":"s","pt":$n[7].TextReader,"ps":0}],"sn":"FromStream","rt":$n[1].Void,"p":[$n[7].TextReader]},{"a":2,"n":"FromStream","t":8,"pi":[{"n":"s","pt":$n[7].TextReader,"ps":0},{"n":"startline","pt":$n[1].UInt32,"ps":1}],"sn":"FromStream$1","rt":$n[1].Void,"p":[$n[7].TextReader,$n[1].UInt32]},{"a":2,"n":"FromStream","t":8,"pi":[{"n":"s","pt":$n[7].TextReader,"ps":0},{"n":"startline","pt":$n[1].UInt32,"ps":1},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":2}],"sn":"FromStream$2","rt":$n[1].Void,"p":[$n[7].TextReader,$n[1].UInt32,$n[3].List$1(System.Exception)]},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0},{"n":"startline","pt":$n[1].UInt32,"ps":1}],"sn":"FromString$1","rt":$n[1].Void,"p":[$n[1].String,$n[1].UInt32]},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0},{"n":"startline","pt":$n[1].UInt32,"ps":1},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":2}],"sn":"FromString$2","rt":$n[1].Void,"p":[$n[1].String,$n[1].UInt32,$n[3].List$1(System.Exception)]},{"a":4,"n":"QualifyTypeWithUsing","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"QualifyTypeWithUsing","rt":$n[1].String,"p":[$n[1].String]},{"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ResolveQualifiedName","t":8,"sn":"ResolveQualifiedName","rt":$n[1].String},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"ToWriter","t":8,"pi":[{"n":"o","pt":$n[7].TextWriter,"ps":0}],"sn":"ToWriter","rt":$n[1].Void,"p":[$n[7].TextWriter]},{"a":4,"n":"UnqualifyTypeWithUsing","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"UnqualifyTypeWithUsing","rt":$n[1].String,"p":[$n[1].String]},{"ov":true,"a":2,"n":"RRDataType","t":16,"rt":$n[0].DataTypes,"g":{"ov":true,"a":2,"n":"get_RRDataType","t":8,"rt":$n[0].DataTypes,"fg":"RRDataType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},"fn":"RRDataType"},{"a":2,"n":"Constants","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ConstantDefinition),"sn":"Constants"},{"a":2,"n":"EntryType","t":4,"rt":$n[0].DataTypes,"sn":"EntryType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"Implements","t":4,"rt":$n[3].List$1(System.String),"sn":"Implements"},{"a":2,"n":"IsStructure","t":4,"rt":$n[1].Boolean,"sn":"IsStructure","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"Members","t":4,"rt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.MemberDefinition),"sn":"Members"},{"a":2,"n":"Options","t":4,"rt":$n[3].List$1(System.String),"sn":"Options"},{"a":2,"n":"ServiceDefinition","t":4,"rt":$n[0].ServiceDefinition,"sn":"ServiceDefinition"}]}; }, $n);
    $m("RobotRaconteurWeb.MemberDefinition_Direction", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"both","is":true,"t":4,"rt":$n[0].MemberDefinition_Direction,"sn":"both","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},{"a":2,"n":"readonly_","is":true,"t":4,"rt":$n[0].MemberDefinition_Direction,"sn":"readonly_","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},{"a":2,"n":"writeonly","is":true,"t":4,"rt":$n[0].MemberDefinition_Direction,"sn":"writeonly","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}}]}; }, $n);
    $m("RobotRaconteurWeb.MemberDefinition", function () { return {"nested":[$n[0].MemberDefinition.MemberDefiniton_ParseResults],"att":1048705,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":4,"n":"MemberDefinition_FromStringFormat1","is":true,"t":8,"pi":[{"n":"s1","pt":$n[1].String,"ps":0},{"n":"member_types","pt":$n[3].List$1(System.String),"ps":1},{"n":"def","pt":$n[0].MemberDefinition,"ps":2},{"n":"type","ref":true,"pt":$n[0].TypeDefinition,"ps":3}],"sn":"MemberDefinition_FromStringFormat1","rt":$n[1].Void,"p":[$n[1].String,$n[3].List$1(System.String),$n[0].MemberDefinition,$n[0].TypeDefinition]},{"a":4,"n":"MemberDefinition_FromStringFormat1","is":true,"t":8,"pi":[{"n":"s1","pt":$n[1].String,"ps":0},{"n":"member_type","pt":$n[1].String,"ps":1},{"n":"def","pt":$n[0].MemberDefinition,"ps":2},{"n":"type","ref":true,"pt":$n[0].TypeDefinition,"ps":3}],"sn":"MemberDefinition_FromStringFormat1$1","rt":$n[1].Void,"p":[$n[1].String,$n[1].String,$n[0].MemberDefinition,$n[0].TypeDefinition]},{"a":4,"n":"MemberDefinition_FromStringFormat2","is":true,"t":8,"pi":[{"n":"s1","pt":$n[1].String,"ps":0},{"n":"member_type","pt":$n[1].String,"ps":1},{"n":"def","pt":$n[0].MemberDefinition,"ps":2},{"n":"return_type","ref":true,"pt":$n[0].TypeDefinition,"ps":3},{"n":"params_","ref":true,"pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":4}],"sn":"MemberDefinition_FromStringFormat2","rt":$n[1].Void,"p":[$n[1].String,$n[1].String,$n[0].MemberDefinition,$n[0].TypeDefinition,$n[3].List$1(RobotRaconteurWeb.TypeDefinition)]},{"a":4,"n":"MemberDefinition_FromStringFormat3","is":true,"t":8,"pi":[{"n":"s1","pt":$n[1].String,"ps":0},{"n":"member_type","pt":$n[1].String,"ps":1},{"n":"def","pt":$n[0].MemberDefinition,"ps":2},{"n":"params_","ref":true,"pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":3}],"sn":"MemberDefinition_FromStringFormat3","rt":$n[1].Void,"p":[$n[1].String,$n[1].String,$n[0].MemberDefinition,$n[3].List$1(RobotRaconteurWeb.TypeDefinition)]},{"a":4,"n":"MemberDefinition_FromStringFormat_common","is":true,"t":8,"pi":[{"n":"parse_res","ref":true,"pt":$n[0].MemberDefinition.MemberDefiniton_ParseResults,"ps":0},{"n":"s1","pt":$n[1].String,"ps":1},{"n":"member_types","pt":$n[3].List$1(System.String),"ps":2},{"n":"def","pt":$n[0].MemberDefinition,"ps":3}],"sn":"MemberDefinition_FromStringFormat_common","rt":$n[1].Void,"p":[$n[0].MemberDefinition.MemberDefiniton_ParseResults,$n[1].String,$n[3].List$1(System.String),$n[0].MemberDefinition]},{"a":4,"n":"MemberDefinition_GetDirection","is":true,"t":8,"pi":[{"n":"modifiers","pt":$n[3].List$1(System.String),"ps":0}],"sn":"MemberDefinition_GetDirection","rt":$n[0].MemberDefinition_Direction,"p":[$n[3].List$1(System.String)],"box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},{"a":4,"n":"MemberDefinition_ModifiersToString","is":true,"t":8,"pi":[{"n":"modifiers","pt":$n[3].List$1(System.String),"ps":0}],"sn":"MemberDefinition_ModifiersToString","rt":$n[1].String,"p":[$n[3].List$1(System.String)]},{"a":4,"n":"MemberDefinition_ParamatersFromStrings","is":true,"t":8,"pi":[{"n":"s","pt":$n[3].List$1(System.String),"ps":0},{"n":"params_","ref":true,"pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":1},{"n":"def","pt":$n[0].MemberDefinition,"ps":2}],"sn":"MemberDefinition_ParamatersFromStrings","rt":$n[1].Void,"p":[$n[3].List$1(System.String),$n[3].List$1(RobotRaconteurWeb.TypeDefinition),$n[0].MemberDefinition]},{"a":4,"n":"MemberDefinition_ParametersToString","is":true,"t":8,"pi":[{"n":"params_","pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":0}],"sn":"MemberDefinition_ParametersToString","rt":$n[1].String,"p":[$n[3].List$1(RobotRaconteurWeb.TypeDefinition)]},{"a":4,"n":"MemberDefinition_ParseCommaList","is":true,"t":8,"pi":[{"n":"r","pt":$n[8].Regex,"ps":0},{"n":"s","pt":$n[1].String,"ps":1},{"n":"res","ref":true,"pt":$n[3].List$1(System.String),"ps":2}],"sn":"MemberDefinition_ParseCommaList","rt":$n[1].Boolean,"p":[$n[8].Regex,$n[1].String,$n[3].List$1(System.String)],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"MemberDefinition_ParseFormat_common","is":true,"t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0},{"n":"res","out":true,"pt":$n[0].MemberDefinition.MemberDefiniton_ParseResults,"ps":1}],"sn":"MemberDefinition_ParseFormat_common","rt":$n[1].Boolean,"p":[$n[1].String,$n[0].MemberDefinition.MemberDefiniton_ParseResults],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"MemberDefinition_ParseModifiers","is":true,"t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0},{"n":"res","ref":true,"pt":$n[3].List$1(System.String),"ps":1}],"sn":"MemberDefinition_ParseModifiers","rt":$n[1].Boolean,"p":[$n[1].String,$n[3].List$1(System.String)],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"MemberDefinition_ParseParameters","is":true,"t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0},{"n":"res","ref":true,"pt":$n[3].List$1(System.String),"ps":1}],"sn":"MemberDefinition_ParseParameters","rt":$n[1].Boolean,"p":[$n[1].String,$n[3].List$1(System.String)],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"MemberDefinition_ToStringFormat1","is":true,"t":8,"pi":[{"n":"member_type","pt":$n[1].String,"ps":0},{"n":"def","pt":$n[0].MemberDefinition,"ps":1},{"n":"data_type","pt":$n[0].TypeDefinition,"ps":2}],"sn":"MemberDefinition_ToStringFormat1","rt":$n[1].String,"p":[$n[1].String,$n[0].MemberDefinition,$n[0].TypeDefinition]},{"a":4,"n":"MemberDefinition_ToStringFormat2","is":true,"t":8,"pi":[{"n":"member_type","pt":$n[1].String,"ps":0},{"n":"def","pt":$n[0].MemberDefinition,"ps":1},{"n":"return_type","pt":$n[0].TypeDefinition,"ps":2},{"n":"params_","pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":3}],"sn":"MemberDefinition_ToStringFormat2","rt":$n[1].String,"p":[$n[1].String,$n[0].MemberDefinition,$n[0].TypeDefinition,$n[3].List$1(RobotRaconteurWeb.TypeDefinition)]},{"a":4,"n":"MemberDefinition_ToStringFormat3","is":true,"t":8,"pi":[{"n":"member_type","pt":$n[1].String,"ps":0},{"n":"def","pt":$n[0].MemberDefinition,"ps":1},{"n":"params_","pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":2}],"sn":"MemberDefinition_ToStringFormat3","rt":$n[1].String,"p":[$n[1].String,$n[0].MemberDefinition,$n[3].List$1(RobotRaconteurWeb.TypeDefinition)]},{"v":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"a":2,"n":"Modifiers","t":4,"rt":$n[3].List$1(System.String),"sn":"Modifiers"},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":2,"n":"ServiceEntry","t":4,"rt":$n[0].ServiceEntryDefinition,"sn":"ServiceEntry"}]}; }, $n);
    $m("RobotRaconteurWeb.MemberDefinition.MemberDefiniton_ParseResults", function () { return {"td":$n[0].MemberDefinition,"att":1048581,"a":4,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"DataType","t":4,"rt":$n[1].String,"sn":"DataType"},{"a":2,"n":"MemberType","t":4,"rt":$n[1].String,"sn":"MemberType"},{"a":2,"n":"Modifiers","t":4,"rt":$n[3].List$1(System.String),"sn":"Modifiers"},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":2,"n":"Parameters","t":4,"rt":$n[3].List$1(System.String),"sn":"Parameters"}]}; }, $n);
    $m("RobotRaconteurWeb.PropertyDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"ToString","t":8,"pi":[{"n":"isstruct","pt":$n[1].Boolean,"ps":0}],"sn":"ToString","rt":$n[1].String,"p":[$n[1].Boolean]},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"Type","t":4,"rt":$n[0].TypeDefinition,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.FunctionDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"IsGenerator","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsGenerator","t":8,"rt":$n[1].Boolean,"fg":"IsGenerator","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsGenerator"},{"a":2,"n":"Parameters","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"sn":"Parameters"},{"a":2,"n":"ReturnType","t":4,"rt":$n[0].TypeDefinition,"sn":"ReturnType"}]}; }, $n);
    $m("RobotRaconteurWeb.EventDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"Parameters","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"sn":"Parameters"}]}; }, $n);
    $m("RobotRaconteurWeb.ObjRefDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"ArrayType","t":4,"rt":$n[0].DataTypes_ArrayTypes,"sn":"ArrayType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ArrayTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ArrayTypes));}},{"a":2,"n":"ContainerType","t":4,"rt":$n[0].DataTypes_ContainerTypes,"sn":"ContainerType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ContainerTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ContainerTypes));}},{"a":2,"n":"ObjectType","t":4,"rt":$n[1].String,"sn":"ObjectType"}]}; }, $n);
    $m("RobotRaconteurWeb.PipeDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"IsUnreliable","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsUnreliable","t":8,"rt":$n[1].Boolean,"fg":"IsUnreliable","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsUnreliable"},{"a":2,"n":"Type","t":4,"rt":$n[0].TypeDefinition,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.CallbackDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"Parameters","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"sn":"Parameters"},{"a":2,"n":"ReturnType","t":4,"rt":$n[0].TypeDefinition,"sn":"ReturnType"}]}; }, $n);
    $m("RobotRaconteurWeb.WireDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"Type","t":4,"rt":$n[0].TypeDefinition,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.MemoryDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"ServiceEntry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"Direction","t":16,"rt":$n[0].MemberDefinition_Direction,"g":{"a":2,"n":"get_Direction","t":8,"rt":$n[0].MemberDefinition_Direction,"fg":"Direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},"fn":"Direction"},{"a":2,"n":"Type","t":4,"rt":$n[0].TypeDefinition,"sn":"Type"}]}; }, $n);
    $m("RobotRaconteurWeb.TypeDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[0].MemberDefinition],"pi":[{"n":"member","pt":$n[0].MemberDefinition,"ps":0}],"sn":"$ctor1"},{"a":2,"n":"Clone","t":8,"sn":"Clone","rt":$n[0].TypeDefinition},{"a":2,"n":"CopyTo","t":8,"pi":[{"n":"def","ref":true,"pt":$n[0].TypeDefinition,"ps":0}],"sn":"CopyTo","rt":$n[1].Void,"p":[$n[0].TypeDefinition]},{"a":2,"n":"DataTypeFromString","is":true,"t":8,"pi":[{"n":"d","pt":$n[1].String,"ps":0}],"sn":"DataTypeFromString","rt":$n[0].DataTypes,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"ov":true,"a":2,"n":"Equals","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"equals","rt":$n[1].Boolean,"p":[$n[1].Object],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"a":2,"n":"QualifyTypeStringWithUsing","t":8,"sn":"QualifyTypeStringWithUsing","rt":$n[1].Void},{"a":2,"n":"RemoveArray","t":8,"sn":"RemoveArray","rt":$n[1].Void},{"a":2,"n":"RemoveContainers","t":8,"sn":"RemoveContainers","rt":$n[1].Void},{"a":2,"n":"Rename","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"Rename","rt":$n[1].Void,"p":[$n[1].String]},{"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"a":2,"n":"ResolveNamedType","t":8,"pi":[{"n":"imported_defs","dv":null,"o":true,"pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":0},{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":1},{"n":"client","dv":null,"o":true,"pt":$n[1].Object,"ps":2}],"sn":"ResolveNamedType","rt":$n[0].NamedTypeDefinition,"p":[$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[0].RobotRaconteurNode,$n[1].Object]},{"a":2,"n":"StringFromDataType","is":true,"t":8,"pi":[{"n":"d","pt":$n[0].DataTypes,"ps":0}],"sn":"StringFromDataType","rt":$n[1].String,"p":[$n[0].DataTypes]},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":4,"n":"TypeDefinition_GetServiceUsingDefinition","is":true,"t":8,"pi":[{"n":"def","pt":$n[0].TypeDefinition,"ps":0}],"sn":"TypeDefinition_GetServiceUsingDefinition","rt":$n[3].List$1(RobotRaconteurWeb.UsingDefinition),"p":[$n[0].TypeDefinition]},{"a":2,"n":"UnqualifyTypeStringWithUsing","t":8,"sn":"UnqualifyTypeStringWithUsing","rt":$n[1].Void},{"a":2,"n":"op_Equality","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].TypeDefinition,"ps":0},{"n":"b","pt":$n[0].TypeDefinition,"ps":1}],"sn":"op_Equality","rt":$n[1].Boolean,"p":[$n[0].TypeDefinition,$n[0].TypeDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"op_Inequality","is":true,"t":8,"pi":[{"n":"a","pt":$n[0].TypeDefinition,"ps":0},{"n":"b","pt":$n[0].TypeDefinition,"ps":1}],"sn":"op_Inequality","rt":$n[1].Boolean,"p":[$n[0].TypeDefinition,$n[0].TypeDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"ArrayLength","t":4,"rt":$n[3].List$1(System.Int32),"sn":"ArrayLength"},{"a":2,"n":"ArrayType","t":4,"rt":$n[0].DataTypes_ArrayTypes,"sn":"ArrayType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ArrayTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ArrayTypes));}},{"a":2,"n":"ArrayVarLength","t":4,"rt":$n[1].Boolean,"sn":"ArrayVarLength","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"ContainerType","t":4,"rt":$n[0].DataTypes_ContainerTypes,"sn":"ContainerType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes_ContainerTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes_ContainerTypes));}},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":4,"n":"ResolveNamedType_cache","t":4,"rt":$n[0].NamedTypeDefinition,"sn":"ResolveNamedType_cache"},{"a":2,"n":"Type","t":4,"rt":$n[0].DataTypes,"sn":"Type","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},{"a":2,"n":"TypeString","t":4,"rt":$n[1].String,"sn":"TypeString"},{"a":2,"n":"member","t":4,"rt":$n[0].MemberDefinition,"sn":"member"}]}; }, $n);
    $m("RobotRaconteurWeb.UsingDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceDefinition],"pi":[{"n":"service","pt":$n[0].ServiceDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"QualifiedName","t":4,"rt":$n[1].String,"sn":"QualifiedName"},{"a":2,"n":"UnqualifiedName","t":4,"rt":$n[1].String,"sn":"UnqualifiedName"},{"a":2,"n":"service","t":4,"rt":$n[0].ServiceDefinition,"sn":"service"}]}; }, $n);
    $m("RobotRaconteurWeb.ConstantDefinition_StructField", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"ConstantRefName","t":4,"rt":$n[1].String,"sn":"ConstantRefName"},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"}]}; }, $n);
    $m("RobotRaconteurWeb.ConstantDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceDefinition],"pi":[{"n":"service","pt":$n[0].ServiceDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceEntryDefinition],"pi":[{"n":"service_entry","pt":$n[0].ServiceEntryDefinition,"ps":0}],"sn":"$ctor1"},{"a":1,"n":"ConstantDefinition_CheckScalar","is":true,"t":8,"pi":[{"n":"t","pt":$n[0].DataTypes,"ps":0},{"n":"val","pt":$n[1].String,"ps":1}],"sn":"ConstantDefinition_CheckScalar","rt":$n[1].Boolean,"p":[$n[0].DataTypes,$n[1].String],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"n":"ConstantDefinition_EscapeString_Formatter","is":true,"t":8,"pi":[{"n":"match","pt":$n[8].Match,"ps":0}],"sn":"ConstantDefinition_EscapeString_Formatter","rt":$n[1].String,"p":[$n[8].Match]},{"a":1,"n":"ConstantDefinition_UnescapeString_Formatter","is":true,"t":8,"pi":[{"n":"match","pt":$n[8].Match,"ps":0}],"sn":"ConstantDefinition_UnescapeString_Formatter","rt":$n[1].String,"p":[$n[8].Match]},{"a":2,"n":"EscapeString","is":true,"t":8,"pi":[{"n":"in_","pt":$n[1].String,"ps":0}],"sn":"EscapeString","rt":$n[1].String,"p":[$n[1].String]},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String]},{"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"UnescapeString","is":true,"t":8,"pi":[{"n":"in_","pt":$n[1].String,"ps":0}],"sn":"UnescapeString","rt":$n[1].String,"p":[$n[1].String]},{"a":2,"n":"ValueToArray","t":8,"tpc":1,"tprm":["T"],"sn":"ValueToArray","rt":System.Array.type(System.Object)},{"a":2,"n":"ValueToScalar","t":8,"tpc":1,"tprm":["T"],"sn":"ValueToScalar","rt":System.Object},{"a":2,"n":"ValueToString","t":8,"sn":"ValueToString","rt":$n[1].String},{"a":2,"n":"ValueToStructFields","t":8,"sn":"ValueToStructFields","rt":$n[3].List$1(RobotRaconteurWeb.ConstantDefinition_StructField)},{"a":2,"n":"VerifyTypeAndValue","t":8,"pi":[{"n":"t","pt":$n[0].TypeDefinition,"ps":0},{"n":"value","pt":$n[1].String,"ps":1}],"sn":"VerifyTypeAndValue","rt":$n[1].Boolean,"p":[$n[0].TypeDefinition,$n[1].String],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"VerifyValue","t":8,"sn":"VerifyValue","rt":$n[1].Boolean,"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":2,"n":"Type","t":4,"rt":$n[0].TypeDefinition,"sn":"Type"},{"a":2,"n":"Value","t":4,"rt":$n[1].String,"sn":"Value"},{"a":2,"n":"service","t":4,"rt":$n[0].ServiceDefinition,"sn":"service"},{"a":2,"n":"service_entry","t":4,"rt":$n[0].ServiceEntryDefinition,"sn":"service_entry"}]}; }, $n);
    $m("RobotRaconteurWeb.EnumDefinition", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].ServiceDefinition],"pi":[{"n":"service","pt":$n[0].ServiceDefinition,"ps":0}],"sn":"ctor"},{"a":2,"n":"FromString","t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0},{"n":"startline","pt":$n[1].UInt32,"ps":1}],"sn":"FromString","rt":$n[1].Void,"p":[$n[1].String,$n[1].UInt32]},{"a":2,"n":"Reset","t":8,"sn":"Reset","rt":$n[1].Void},{"ov":true,"a":2,"n":"ResolveQualifiedName","t":8,"sn":"ResolveQualifiedName","rt":$n[1].String},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"VerifyValues","t":8,"sn":"VerifyValues","rt":$n[1].Boolean,"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"ov":true,"a":2,"n":"RRDataType","t":16,"rt":$n[0].DataTypes,"g":{"ov":true,"a":2,"n":"get_RRDataType","t":8,"rt":$n[0].DataTypes,"fg":"RRDataType","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.DataTypes, System.Enum.toStringFn(RobotRaconteurWeb.DataTypes));}},"fn":"RRDataType"},{"a":2,"n":"Values","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.EnumDefinitionValue),"sn":"Values"},{"a":2,"n":"service","t":4,"rt":$n[0].ServiceDefinition,"sn":"service"}]}; }, $n);
    $m("RobotRaconteurWeb.EnumDefinitionValue", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"HexValue","t":4,"rt":$n[1].Boolean,"sn":"HexValue","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"ImplicitValue","t":4,"rt":$n[1].Boolean,"sn":"ImplicitValue","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"Name","t":4,"rt":$n[1].String,"sn":"Name"},{"a":2,"n":"Value","t":4,"rt":$n[1].Int32,"sn":"Value","box":function ($v) { return Bridge.box($v, System.Int32);}}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurParseException", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"e","pt":$n[1].String,"ps":0}],"sn":"ctor"},{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[1].Int32],"pi":[{"n":"e","pt":$n[1].String,"ps":0},{"n":"line","pt":$n[1].Int32,"ps":1}],"sn":"$ctor1"},{"ov":true,"a":2,"n":"ToString","t":8,"sn":"toString","rt":$n[1].String},{"a":2,"n":"LineNumber","t":4,"rt":$n[1].Int32,"sn":"lineNumber","box":function ($v) { return Bridge.box($v, System.Int32);}}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceDefinitionUtil", function () { return {"nested":[$n[0].ServiceDefinitionUtil.rrimplements,$n[0].ServiceDefinitionUtil.rrimports],"att":1048961,"a":2,"s":true,"m":[{"a":4,"n":"CompareConstantDefinition","is":true,"t":8,"pi":[{"n":"service1","pt":$n[0].ServiceDefinition,"ps":0},{"n":"d1","pt":$n[0].ConstantDefinition,"ps":1},{"n":"service2","pt":$n[0].ServiceDefinition,"ps":2},{"n":"d2","pt":$n[0].ConstantDefinition,"ps":3}],"sn":"CompareConstantDefinition","rt":$n[1].Boolean,"p":[$n[0].ServiceDefinition,$n[0].ConstantDefinition,$n[0].ServiceDefinition,$n[0].ConstantDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"CompareEnumDefinition","is":true,"t":8,"pi":[{"n":"enum1","pt":$n[0].EnumDefinition,"ps":0},{"n":"enum2","pt":$n[0].EnumDefinition,"ps":1}],"sn":"CompareEnumDefinition","rt":$n[1].Boolean,"p":[$n[0].EnumDefinition,$n[0].EnumDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"CompareMember","is":true,"t":8,"pi":[{"n":"m1","pt":$n[0].MemberDefinition,"ps":0},{"n":"m2","pt":$n[0].MemberDefinition,"ps":1}],"sn":"CompareMember","rt":$n[1].Boolean,"p":[$n[0].MemberDefinition,$n[0].MemberDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"CompareServiceDefinitions","is":true,"t":8,"pi":[{"n":"service1","pt":$n[0].ServiceDefinition,"ps":0},{"n":"service2","pt":$n[0].ServiceDefinition,"ps":1}],"sn":"CompareServiceDefinitions","rt":$n[1].Boolean,"p":[$n[0].ServiceDefinition,$n[0].ServiceDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"CompareServiceEntryDefinition","is":true,"t":8,"pi":[{"n":"service1","pt":$n[0].ServiceDefinition,"ps":0},{"n":"d1","pt":$n[0].ServiceEntryDefinition,"ps":1},{"n":"service2","pt":$n[0].ServiceDefinition,"ps":2},{"n":"d2","pt":$n[0].ServiceEntryDefinition,"ps":3}],"sn":"CompareServiceEntryDefinition","rt":$n[1].Boolean,"p":[$n[0].ServiceDefinition,$n[0].ServiceEntryDefinition,$n[0].ServiceDefinition,$n[0].ServiceEntryDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"CompareTypeDefinition","is":true,"t":8,"pi":[{"n":"d1","pt":$n[0].ServiceDefinition,"ps":0},{"n":"t1","pt":$n[0].TypeDefinition,"ps":1},{"n":"d2","pt":$n[0].ServiceDefinition,"ps":2},{"n":"t2","pt":$n[0].TypeDefinition,"ps":3}],"sn":"CompareTypeDefinition","rt":$n[1].Boolean,"p":[$n[0].ServiceDefinition,$n[0].TypeDefinition,$n[0].ServiceDefinition,$n[0].TypeDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"CompareTypeDefinitions","is":true,"t":8,"pi":[{"n":"d1","pt":$n[0].ServiceDefinition,"ps":0},{"n":"t1","pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":1},{"n":"d2","pt":$n[0].ServiceDefinition,"ps":2},{"n":"t2","pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":3}],"sn":"CompareTypeDefinitions","rt":$n[1].Boolean,"p":[$n[0].ServiceDefinition,$n[3].List$1(RobotRaconteurWeb.TypeDefinition),$n[0].ServiceDefinition,$n[3].List$1(RobotRaconteurWeb.TypeDefinition)],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"CompareUsingDefinition","is":true,"t":8,"pi":[{"n":"u1","pt":$n[0].UsingDefinition,"ps":0},{"n":"u2","pt":$n[0].UsingDefinition,"ps":1}],"sn":"CompareUsingDefinition","rt":$n[1].Boolean,"p":[$n[0].UsingDefinition,$n[0].UsingDefinition],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":2,"n":"EstimatePodPackedElementSize","is":true,"t":8,"pi":[{"n":"def","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"other_defs","dv":null,"o":true,"pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":1},{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":2},{"n":"client","dv":null,"o":true,"pt":$n[1].Object,"ps":3}],"sn":"EstimatePodPackedElementSize","rt":$n[1].Int32,"p":[$n[0].ServiceEntryDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[0].RobotRaconteurNode,$n[1].Object],"box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"FindObjectRRType","is":true,"t":8,"pi":[{"n":"obj","pt":$n[1].Object,"ps":0}],"sn":"FindObjectRRType","rt":$n[1].String,"p":[$n[1].Object]},{"a":2,"n":"FindParentInterface","is":true,"t":8,"pi":[{"n":"objtype","pt":$n[1].Type,"ps":0}],"sn":"FindParentInterface","rt":$n[1].Type,"p":[$n[1].Type]},{"a":2,"n":"FindStructRRType","is":true,"t":8,"pi":[{"n":"s","pt":$n[1].Type,"ps":0}],"sn":"FindStructRRType","rt":$n[1].String,"p":[$n[1].Type]},{"a":2,"n":"GetNamedArrayElementTypeAndCount","is":true,"t":8,"pi":[{"n":"def","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"other_defs","dv":null,"o":true,"pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":1},{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":2},{"n":"client","dv":null,"o":true,"pt":$n[1].Object,"ps":3},{"n":"n","dv":null,"o":true,"pt":$n[3].HashSet$1(System.String),"ps":4}],"sn":"GetNamedArrayElementTypeAndCount","rt":$n[1].Tuple$2(RobotRaconteurWeb.DataTypes,System.Int32),"p":[$n[0].ServiceEntryDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[0].RobotRaconteurNode,$n[1].Object,$n[3].HashSet$1(System.String)]},{"a":4,"n":"GetServiceNames","is":true,"t":8,"pi":[{"n":"def","pt":$n[0].ServiceDefinition,"ps":0}],"sn":"GetServiceNames","rt":$n[3].List$1(System.String),"p":[$n[0].ServiceDefinition]},{"a":4,"n":"SplitParameterString","is":true,"t":8,"pi":[{"n":"str","pt":$n[1].String,"ps":0}],"sn":"SplitParameterString","rt":$n[1].Array.type(System.String),"p":[$n[1].String]},{"a":2,"n":"SplitQualifiedName","is":true,"t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"SplitQualifiedName","rt":$n[1].Tuple$2(System.String,System.String),"p":[$n[1].String]},{"a":4,"n":"VerifyConstant","is":true,"t":8,"pi":[{"n":"constant","pt":$n[1].String,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1}],"sn":"VerifyConstant$1","rt":$n[1].String,"p":[$n[1].String,$n[0].ServiceDefinition]},{"a":4,"n":"VerifyConstant","is":true,"t":8,"pi":[{"n":"c","pt":$n[0].ConstantDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"constants","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ConstantDefinition),"ps":2}],"sn":"VerifyConstant","rt":$n[1].String,"p":[$n[0].ConstantDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ConstantDefinition)]},{"a":4,"n":"VerifyConstantStruct","is":true,"t":8,"pi":[{"n":"c","pt":$n[0].ConstantDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"constants","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ConstantDefinition),"ps":2},{"n":"parent_types","pt":$n[3].List$1(System.String),"ps":3}],"sn":"VerifyConstantStruct","rt":$n[1].Void,"p":[$n[0].ConstantDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ConstantDefinition),$n[3].List$1(System.String)]},{"a":4,"n":"VerifyEnum","is":true,"t":8,"pi":[{"n":"e","pt":$n[0].EnumDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1}],"sn":"VerifyEnum","rt":$n[1].Void,"p":[$n[0].EnumDefinition,$n[0].ServiceDefinition]},{"a":4,"n":"VerifyImports","is":true,"t":8,"pi":[{"n":"def","pt":$n[0].ServiceDefinition,"ps":0},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":1}],"sn":"VerifyImports","rt":$n[1].Void,"p":[$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition)]},{"a":4,"n":"VerifyMember","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MemberDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":3}],"sn":"VerifyMember","rt":$n[1].String,"p":[$n[0].MemberDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[3].List$1(System.Exception)]},{"a":4,"n":"VerifyModifiers","is":true,"t":8,"pi":[{"n":"m","pt":$n[0].MemberDefinition,"ps":0},{"n":"readwrite","pt":$n[1].Boolean,"ps":1},{"n":"unreliable","pt":$n[1].Boolean,"ps":2},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":3}],"sn":"VerifyModifiers","rt":$n[1].Void,"p":[$n[0].MemberDefinition,$n[1].Boolean,$n[1].Boolean,$n[3].List$1(System.Exception)]},{"a":4,"n":"VerifyName","is":true,"t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"allowdot","dv":false,"o":true,"pt":$n[1].Boolean,"ps":2},{"n":"ignorereserved","dv":false,"o":true,"pt":$n[1].Boolean,"ps":3}],"sn":"VerifyName","rt":$n[1].Void,"p":[$n[1].String,$n[0].ServiceDefinition,$n[1].Boolean,$n[1].Boolean]},{"a":4,"n":"VerifyNamedArray","is":true,"t":8,"pi":[{"n":"strut","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":3}],"sn":"VerifyNamedArray","rt":$n[1].Void,"p":[$n[0].ServiceEntryDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[3].List$1(System.Exception)]},{"a":4,"n":"VerifyObject","is":true,"t":8,"pi":[{"n":"obj","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":3}],"sn":"VerifyObject","rt":$n[1].Void,"p":[$n[0].ServiceEntryDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[3].List$1(System.Exception)]},{"a":4,"n":"VerifyParameters","is":true,"t":8,"pi":[{"n":"p","pt":$n[3].List$1(RobotRaconteurWeb.TypeDefinition),"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2}],"sn":"VerifyParameters","rt":$n[1].Void,"p":[$n[3].List$1(RobotRaconteurWeb.TypeDefinition),$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition)]},{"a":4,"n":"VerifyPod","is":true,"t":8,"pi":[{"n":"strut","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":3}],"sn":"VerifyPod","rt":$n[1].Void,"p":[$n[0].ServiceEntryDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[3].List$1(System.Exception)]},{"a":4,"n":"VerifyReturnType","is":true,"t":8,"pi":[{"n":"t","pt":$n[0].TypeDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2}],"sn":"VerifyReturnType","rt":$n[1].Void,"p":[$n[0].TypeDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition)]},{"a":2,"n":"VerifyServiceDefinitions","is":true,"t":8,"pi":[{"n":"def","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":0}],"sn":"VerifyServiceDefinitions","rt":$n[1].Void,"p":[$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition)]},{"a":2,"n":"VerifyServiceDefinitions","is":true,"t":8,"pi":[{"n":"def","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":0},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":1}],"sn":"VerifyServiceDefinitions$1","rt":$n[1].Void,"p":[$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[3].List$1(System.Exception)]},{"a":4,"n":"VerifyStructure","is":true,"t":8,"pi":[{"n":"strut","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":3}],"sn":"VerifyStructure","rt":$n[1].Void,"p":[$n[0].ServiceEntryDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[3].List$1(System.Exception)]},{"a":4,"n":"VerifyStructure_check_recursion","is":true,"t":8,"pi":[{"n":"strut","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"names","ref":true,"pt":$n[3].HashSet$1(System.String),"ps":1},{"n":"entry_type","pt":$n[0].DataTypes,"ps":2}],"sn":"VerifyStructure_check_recursion","rt":$n[1].Void,"p":[$n[0].ServiceEntryDefinition,$n[3].HashSet$1(System.String),$n[0].DataTypes]},{"a":4,"n":"VerifyStructure_common","is":true,"t":8,"pi":[{"n":"strut","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2},{"n":"warnings","ref":true,"pt":$n[3].List$1(System.Exception),"ps":3},{"n":"entry_type","pt":$n[0].DataTypes,"ps":4}],"sn":"VerifyStructure_common","rt":$n[1].Void,"p":[$n[0].ServiceEntryDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[3].List$1(System.Exception),$n[0].DataTypes]},{"a":4,"n":"VerifyType","is":true,"t":8,"pi":[{"n":"t","pt":$n[0].TypeDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2}],"sn":"VerifyType","rt":$n[1].Void,"p":[$n[0].TypeDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition)]},{"a":4,"n":"VerifyUsing","is":true,"t":8,"pi":[{"n":"e","pt":$n[0].UsingDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"importeddefs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2}],"sn":"VerifyUsing","rt":$n[1].Void,"p":[$n[0].UsingDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition)]},{"a":4,"n":"VerifyVersionSupport","is":true,"t":8,"pi":[{"n":"def","pt":$n[0].ServiceDefinition,"ps":0},{"n":"major","pt":$n[1].UInt32,"ps":1},{"n":"minor","pt":$n[1].UInt32,"ps":2},{"n":"msg","pt":$n[1].String,"ps":3}],"sn":"VerifyVersionSupport","rt":$n[1].Void,"p":[$n[0].ServiceDefinition,$n[1].UInt32,$n[1].UInt32,$n[1].String]},{"a":4,"n":"get_implements","is":true,"t":8,"pi":[{"n":"obj","pt":$n[0].ServiceEntryDefinition,"ps":0},{"n":"def","pt":$n[0].ServiceDefinition,"ps":1},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":2},{"n":"rootobj","dv":"","o":true,"pt":$n[1].String,"ps":3}],"sn":"get_implements","rt":$n[0].ServiceDefinitionUtil.rrimplements,"p":[$n[0].ServiceEntryDefinition,$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[1].String]},{"a":4,"n":"get_imports","is":true,"t":8,"pi":[{"n":"def","pt":$n[0].ServiceDefinition,"ps":0},{"n":"defs","pt":$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),"ps":1},{"n":"rootdef","dv":null,"o":true,"pt":$n[0].ServiceDefinition,"ps":2}],"sn":"get_imports","rt":$n[0].ServiceDefinitionUtil.rrimports,"p":[$n[0].ServiceDefinition,$n[3].Dictionary$2(System.String,RobotRaconteurWeb.ServiceDefinition),$n[0].ServiceDefinition]}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceDefinitionUtil.rrimplements", function () { return {"td":$n[0].ServiceDefinitionUtil,"att":1048581,"a":4,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"implements","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.ServiceDefinitionUtil.rrimplements),"sn":"implements"},{"a":2,"n":"name","t":4,"rt":$n[1].String,"sn":"name"},{"a":2,"n":"obj","t":4,"rt":$n[0].ServiceEntryDefinition,"sn":"obj"}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceDefinitionUtil.rrimports", function () { return {"td":$n[0].ServiceDefinitionUtil,"att":1048581,"a":4,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"def","t":4,"rt":$n[0].ServiceDefinition,"sn":"def"},{"a":2,"n":"imported","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.ServiceDefinitionUtil.rrimports),"sn":"imported"}]}; }, $n);
    $m("RobotRaconteurWeb.DynamicServiceFactory", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"CreateServiceFactories","t":8,"pi":[{"n":"def","pt":$n[1].Array.type(System.String),"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"RobotRaconteurWeb$DynamicServiceFactory$CreateServiceFactories","rt":System.Array.type(RobotRaconteurWeb.ServiceFactory),"p":[$n[1].Array.type(System.String),$n[0].ClientContext]},{"ab":true,"a":2,"n":"CreateServiceFactory","t":8,"pi":[{"n":"def","pt":$n[1].String,"ps":0},{"n":"context","pt":$n[0].ClientContext,"ps":1}],"sn":"RobotRaconteurWeb$DynamicServiceFactory$CreateServiceFactory","rt":$n[0].ServiceFactory,"p":[$n[1].String,$n[0].ClientContext]}]}; }, $n);
    $m("RobotRaconteurWeb.ServiceFactory", function () { return {"att":1048705,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].RobotRaconteurNode,$n[0].ClientContext],"pi":[{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":0},{"n":"context","dv":null,"o":true,"pt":$n[0].ClientContext,"ps":1}],"sn":"ctor"},{"a":2,"n":"CompareNamespace","t":8,"pi":[{"n":"qualified_typename","pt":$n[1].String,"ps":0},{"n":"typename","out":true,"pt":$n[1].String,"ps":1}],"sn":"CompareNamespace","rt":$n[1].Boolean,"p":[$n[1].String,$n[1].String],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"v":true,"a":2,"n":"CreateSkel","t":8,"pi":[{"n":"path","pt":$n[1].String,"ps":0},{"n":"obj","pt":$n[1].Object,"ps":1},{"n":"context","pt":$n[0].ServerContext,"ps":2}],"sn":"CreateSkel","rt":$n[0].ServiceSkel,"p":[$n[1].String,$n[1].Object,$n[0].ServerContext]},{"v":true,"a":2,"n":"CreateStub","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0},{"n":"path","pt":$n[1].String,"ps":1},{"n":"context","pt":$n[0].ClientContext,"ps":2}],"sn":"CreateStub","rt":$n[0].ServiceStub,"p":[$n[1].String,$n[1].String,$n[0].ClientContext]},{"ab":true,"a":2,"n":"DefString","t":8,"sn":"DefString","rt":$n[1].String},{"v":true,"a":2,"n":"DownCastException","t":8,"pi":[{"n":"exp","pt":$n[0].RobotRaconteurException,"ps":0}],"sn":"DownCastException","rt":$n[0].RobotRaconteurException,"p":[$n[0].RobotRaconteurException]},{"ab":true,"a":2,"n":"FindNamedArrayStub","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0}],"sn":"FindNamedArrayStub","rt":$n[0].INamedArrayStub,"p":[$n[1].String]},{"ab":true,"a":2,"n":"FindPodStub","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0}],"sn":"FindPodStub","rt":$n[0].IPodStub,"p":[$n[1].String]},{"ab":true,"a":2,"n":"FindStructureStub","t":8,"pi":[{"n":"objecttype","pt":$n[1].String,"ps":0}],"sn":"FindStructureStub","rt":$n[0].IStructureStub,"p":[$n[1].String]},{"ab":true,"a":2,"n":"GetServiceName","t":8,"sn":"GetServiceName","rt":$n[1].String},{"v":true,"a":2,"n":"PackListType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackListType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackMapType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":2,"tprm":["K","T"],"sn":"PackMapType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackMultiDimArray","t":8,"pi":[{"n":"multiDimArray","pt":$n[0].MultiDimArray,"ps":0}],"sn":"PackMultiDimArray","rt":$n[1].Object,"p":[$n[0].MultiDimArray]},{"a":2,"n":"PackNamedArray","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"PackNamedArray$1","rt":$n[1].Object,"p":[$n[1].Object]},{"a":2,"n":"PackNamedArray","t":8,"pi":[{"n":"s","pt":System.Array.type(System.Object),"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackNamedArray","rt":$n[0].MessageElementNamedArray,"p":[System.Array.type(System.Object)]},{"a":2,"n":"PackNamedArrayToArray","t":8,"pi":[{"n":"s","ref":true,"pt":System.Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackNamedArrayToArray","rt":$n[0].MessageElementNamedArray,"p":[System.Object]},{"a":2,"n":"PackNamedMultiDimArray","t":8,"pi":[{"n":"s","pt":$n[0].NamedMultiDimArray,"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackNamedMultiDimArray","rt":$n[0].MessageElementNamedMultiDimArray,"p":[$n[0].NamedMultiDimArray]},{"a":2,"n":"PackPod","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"PackPod","rt":$n[1].Object,"p":[$n[1].Object]},{"a":2,"n":"PackPodArray","t":8,"pi":[{"n":"s","pt":System.Array.type(System.Object),"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackPodArray","rt":$n[0].MessageElementPodArray,"p":[System.Array.type(System.Object)]},{"a":2,"n":"PackPodMultiDimArray","t":8,"pi":[{"n":"s","pt":$n[0].PodMultiDimArray,"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackPodMultiDimArray","rt":$n[0].MessageElementPodMultiDimArray,"p":[$n[0].PodMultiDimArray]},{"a":2,"n":"PackPodToArray","t":8,"pi":[{"n":"s","ref":true,"pt":System.Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"PackPodToArray","rt":$n[0].MessageElementPodArray,"p":[System.Object]},{"v":true,"a":2,"n":"PackStructure","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"PackStructure","rt":$n[0].MessageElementStructure,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackVarType","t":8,"pi":[{"n":"p","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"a":2,"n":"RemovePath","t":8,"pi":[{"n":"path","pt":$n[1].String,"ps":0}],"sn":"RemovePath","rt":$n[1].String,"p":[$n[1].String]},{"a":2,"n":"ServiceDef","t":8,"sn":"ServiceDef","rt":$n[0].ServiceDefinition},{"v":true,"a":2,"n":"UnpackListType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackListType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"UnpackMapType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"tpc":2,"tprm":["K","T"],"sn":"UnpackMapType","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"UnpackMultiDimArray","t":8,"pi":[{"n":"o","pt":$n[0].MessageElementMultiDimArray,"ps":0}],"sn":"UnpackMultiDimArray","rt":$n[0].MultiDimArray,"p":[$n[0].MessageElementMultiDimArray]},{"a":2,"n":"UnpackNamedArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementNamedArray,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedArray","rt":System.Array.type(System.Object),"p":[$n[0].MessageElementNamedArray]},{"a":2,"n":"UnpackNamedArray","t":8,"pi":[{"n":"m","pt":$n[1].Object,"ps":0}],"sn":"UnpackNamedArray$1","rt":$n[1].Object,"p":[$n[1].Object]},{"a":2,"n":"UnpackNamedArrayFromArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementNamedArray,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedArrayFromArray","rt":System.Object,"p":[$n[0].MessageElementNamedArray]},{"a":2,"n":"UnpackNamedMultiDimArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementNamedMultiDimArray,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackNamedMultiDimArray","rt":$n[0].NamedMultiDimArray,"p":[$n[0].MessageElementNamedMultiDimArray]},{"a":2,"n":"UnpackPod","t":8,"pi":[{"n":"m","pt":$n[1].Object,"ps":0}],"sn":"UnpackPod","rt":$n[1].Object,"p":[$n[1].Object]},{"a":2,"n":"UnpackPodArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementPodArray,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackPodArray","rt":System.Array.type(System.Object),"p":[$n[0].MessageElementPodArray]},{"a":2,"n":"UnpackPodFromArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementPodArray,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackPodFromArray","rt":System.Object,"p":[$n[0].MessageElementPodArray]},{"a":2,"n":"UnpackPodMultiDimArray","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementPodMultiDimArray,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackPodMultiDimArray","rt":$n[0].PodMultiDimArray,"p":[$n[0].MessageElementPodMultiDimArray]},{"v":true,"a":2,"n":"UnpackStructure","t":8,"pi":[{"n":"l","pt":$n[0].MessageElementStructure,"ps":0}],"tpc":1,"tprm":["T"],"sn":"UnpackStructure","rt":System.Object,"p":[$n[0].MessageElementStructure]},{"v":true,"a":2,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"a":3,"n":"context","t":4,"rt":$n[0].ClientContext,"sn":"context","ro":true},{"a":3,"n":"node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"node","ro":true},{"a":1,"n":"sdef","t":4,"rt":$n[0].ServiceDefinition,"sn":"sdef"}]}; }, $n);
    $m("RobotRaconteurWeb.IStructureStub", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"PackStructure","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"RobotRaconteurWeb$IStructureStub$PackStructure","rt":$n[0].MessageElementStructure,"p":[$n[1].Object]},{"ab":true,"a":2,"n":"UnpackStructure","t":8,"pi":[{"n":"m","pt":$n[0].MessageElementStructure,"ps":0}],"tpc":1,"tprm":["T"],"sn":"RobotRaconteurWeb$IStructureStub$UnpackStructure","rt":System.Object,"p":[$n[0].MessageElementStructure]}]}; }, $n);
    $m("RobotRaconteurWeb.IPodStub", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"PackPod","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"RobotRaconteurWeb$IPodStub$PackPod","rt":$n[1].Object,"p":[$n[1].Object]},{"ab":true,"a":2,"n":"UnpackPod","t":8,"pi":[{"n":"m","pt":$n[1].Object,"ps":0}],"sn":"RobotRaconteurWeb$IPodStub$UnpackPod","rt":$n[1].Object,"p":[$n[1].Object]}]}; }, $n);
    $m("RobotRaconteurWeb.PodStub$1", function (T) { return {"att":1048705,"a":2,"m":[{"a":3,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"v":true,"a":2,"n":"PackPod","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"PackPod","rt":$n[1].Object,"p":[$n[1].Object]},{"ab":true,"a":2,"n":"PackPod","t":8,"pi":[{"n":"s","ref":true,"pt":T,"ps":0}],"sn":"PackPod$1","rt":$n[0].MessageElementPod,"p":[T]},{"v":true,"a":2,"n":"PackPodArray","t":8,"pi":[{"n":"s2","pt":System.Array.type(T),"ps":0}],"sn":"PackPodArray","rt":$n[0].MessageElementPodArray,"p":[System.Array.type(T)]},{"v":true,"a":2,"n":"PackPodMultiDimArray","t":8,"pi":[{"n":"s3","pt":$n[0].PodMultiDimArray,"ps":0}],"sn":"PackPodMultiDimArray","rt":$n[0].MessageElementPodMultiDimArray,"p":[$n[0].PodMultiDimArray]},{"v":true,"a":2,"n":"PackPodToArray","t":8,"pi":[{"n":"s2","ref":true,"pt":T,"ps":0}],"sn":"PackPodToArray","rt":$n[0].MessageElementPodArray,"p":[T]},{"ab":true,"a":2,"n":"UnpackPod","t":8,"pi":[{"n":"m","pt":$n[0].MessageElementPod,"ps":0}],"sn":"UnpackPod$1","rt":T,"p":[$n[0].MessageElementPod]},{"v":true,"a":2,"n":"UnpackPod","t":8,"pi":[{"n":"m","pt":$n[1].Object,"ps":0}],"sn":"UnpackPod","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"UnpackPodArray","t":8,"pi":[{"n":"s2","pt":$n[0].MessageElementPodArray,"ps":0}],"sn":"UnpackPodArray","rt":System.Array.type(T),"p":[$n[0].MessageElementPodArray]},{"v":true,"a":2,"n":"UnpackPodFromArray","t":8,"pi":[{"n":"s2","pt":$n[0].MessageElementPodArray,"ps":0}],"sn":"UnpackPodFromArray","rt":T,"p":[$n[0].MessageElementPodArray]},{"v":true,"a":2,"n":"UnpackPodMultiDimArray","t":8,"pi":[{"n":"s3","pt":$n[0].MessageElementPodMultiDimArray,"ps":0}],"sn":"UnpackPodMultiDimArray","rt":$n[0].PodMultiDimArray,"p":[$n[0].MessageElementPodMultiDimArray]},{"ab":true,"a":2,"n":"TypeName","t":16,"rt":$n[1].String,"g":{"ab":true,"a":2,"n":"get_TypeName","t":8,"rt":$n[1].String,"fg":"TypeName"},"fn":"TypeName"},{"a":1,"backing":true,"n":"<TypeName>k__BackingField","t":4,"rt":$n[1].String,"sn":"TypeName"}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurServicePod", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String],"pi":[{"n":"rr_type","pt":$n[1].String,"ps":0}],"sn":"ctor"},{"a":2,"n":"RRType","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_RRType","t":8,"rt":$n[1].String,"fg":"RRType"},"fn":"RRType"},{"a":1,"backing":true,"n":"<RRType>k__BackingField","t":4,"rt":$n[1].String,"sn":"RRType"}]}; }, $n);
    $m("RobotRaconteurWeb.RobotRaconteurNamedArrayElementTypeAndCount", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[1].Type,$n[1].Int32],"pi":[{"n":"rr_type","pt":$n[1].String,"ps":0},{"n":"element_type","pt":$n[1].Type,"ps":1},{"n":"element_array_count","pt":$n[1].Int32,"ps":2}],"sn":"ctor"},{"a":2,"n":"ElementArrayCount","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_ElementArrayCount","t":8,"rt":$n[1].Int32,"fg":"ElementArrayCount","box":function ($v) { return Bridge.box($v, System.Int32);}},"fn":"ElementArrayCount"},{"a":2,"n":"ElementArrayType","t":16,"rt":$n[1].Type,"g":{"a":2,"n":"get_ElementArrayType","t":8,"rt":$n[1].Type,"fg":"ElementArrayType"},"fn":"ElementArrayType"},{"a":2,"n":"RRType","t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_RRType","t":8,"rt":$n[1].String,"fg":"RRType"},"fn":"RRType"},{"a":1,"backing":true,"n":"<ElementArrayCount>k__BackingField","t":4,"rt":$n[1].Int32,"sn":"ElementArrayCount","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":1,"backing":true,"n":"<ElementArrayType>k__BackingField","t":4,"rt":$n[1].Type,"sn":"ElementArrayType"},{"a":1,"backing":true,"n":"<RRType>k__BackingField","t":4,"rt":$n[1].String,"sn":"RRType"}]}; }, $n);
    $m("RobotRaconteurWeb.INamedArrayStub", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"PackNamedArray","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"RobotRaconteurWeb$INamedArrayStub$PackNamedArray","rt":$n[1].Object,"p":[$n[1].Object]},{"ab":true,"a":2,"n":"UnpackNamedArray","t":8,"pi":[{"n":"m","pt":$n[1].Object,"ps":0}],"sn":"RobotRaconteurWeb$INamedArrayStub$UnpackNamedArray","rt":$n[1].Object,"p":[$n[1].Object]}]}; }, $n);
    $m("RobotRaconteurWeb.INamedArrayStub$1", function (T) { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"PackNamedArray","t":8,"pi":[{"n":"s2","pt":System.Array.type(T),"ps":0}],"sn":"RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedArray$1","rt":$n[0].MessageElementNamedArray,"p":[System.Array.type(T)]},{"ab":true,"a":2,"n":"PackNamedArrayStructToArray","t":8,"pi":[{"n":"s2","ref":true,"pt":T,"ps":0}],"sn":"RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedArrayStructToArray","rt":$n[0].MessageElementNamedArray,"p":[T]},{"ab":true,"a":2,"n":"PackNamedMultiDimArray","t":8,"pi":[{"n":"s3","pt":$n[0].NamedMultiDimArray,"ps":0}],"sn":"RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$PackNamedMultiDimArray","rt":$n[0].MessageElementNamedMultiDimArray,"p":[$n[0].NamedMultiDimArray]},{"ab":true,"a":2,"n":"UnpackNamedArray","t":8,"pi":[{"n":"s2","pt":$n[0].MessageElementNamedArray,"ps":0}],"sn":"RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedArray$1","rt":System.Array.type(T),"p":[$n[0].MessageElementNamedArray]},{"ab":true,"a":2,"n":"UnpackNamedArrayStructFromArray","t":8,"pi":[{"n":"s2","pt":$n[0].MessageElementNamedArray,"ps":0}],"sn":"RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedArrayStructFromArray","rt":T,"p":[$n[0].MessageElementNamedArray]},{"ab":true,"a":2,"n":"UnpackNamedMultiDimArray","t":8,"pi":[{"n":"s3","pt":$n[0].MessageElementNamedMultiDimArray,"ps":0}],"sn":"RobotRaconteurWeb$INamedArrayStub$1$" + Bridge.getTypeAlias(T) + "$UnpackNamedMultiDimArray","rt":$n[0].NamedMultiDimArray,"p":[$n[0].MessageElementNamedMultiDimArray]}]}; }, $n);
    $m("RobotRaconteurWeb.NamedArrayStub$2", function (T, U) { return {"att":1048705,"a":2,"m":[{"a":3,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"ab":true,"a":2,"n":"GetNamedArrayFromNumericArray","t":8,"pi":[{"n":"m","pt":System.Array.type(U),"ps":0}],"sn":"GetNamedArrayFromNumericArray","rt":System.Array.type(T),"p":[System.Array.type(U)]},{"ab":true,"a":2,"n":"GetNamedArrayStructFromNumericArray","t":8,"pi":[{"n":"m","pt":System.Array.type(U),"ps":0}],"sn":"GetNamedArrayStructFromNumericArray","rt":T,"p":[System.Array.type(U)]},{"ab":true,"a":2,"n":"GetNumericArrayFromNamedArray","t":8,"pi":[{"n":"s","pt":System.Array.type(T),"ps":0}],"sn":"GetNumericArrayFromNamedArray","rt":System.Array.type(U),"p":[System.Array.type(T)]},{"ab":true,"a":2,"n":"GetNumericArrayFromNamedArrayStruct","t":8,"pi":[{"n":"s","ref":true,"pt":T,"ps":0}],"sn":"GetNumericArrayFromNamedArrayStruct","rt":System.Array.type(U),"p":[T]},{"v":true,"a":2,"n":"PackNamedArray","t":8,"pi":[{"n":"s","pt":$n[1].Object,"ps":0}],"sn":"PackNamedArray","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"PackNamedArray","t":8,"pi":[{"n":"s2","pt":System.Array.type(T),"ps":0}],"sn":"PackNamedArray$1","rt":$n[0].MessageElementNamedArray,"p":[System.Array.type(T)]},{"v":true,"a":2,"n":"PackNamedArrayStructToArray","t":8,"pi":[{"n":"s2","ref":true,"pt":T,"ps":0}],"sn":"PackNamedArrayStructToArray","rt":$n[0].MessageElementNamedArray,"p":[T]},{"v":true,"a":2,"n":"PackNamedMultiDimArray","t":8,"pi":[{"n":"s3","pt":$n[0].NamedMultiDimArray,"ps":0}],"sn":"PackNamedMultiDimArray","rt":$n[0].MessageElementNamedMultiDimArray,"p":[$n[0].NamedMultiDimArray]},{"v":true,"a":2,"n":"UnpackNamedArray","t":8,"pi":[{"n":"s2","pt":$n[0].MessageElementNamedArray,"ps":0}],"sn":"UnpackNamedArray$1","rt":System.Array.type(T),"p":[$n[0].MessageElementNamedArray]},{"v":true,"a":2,"n":"UnpackNamedArray","t":8,"pi":[{"n":"m","pt":$n[1].Object,"ps":0}],"sn":"UnpackNamedArray","rt":$n[1].Object,"p":[$n[1].Object]},{"v":true,"a":2,"n":"UnpackNamedArrayStructFromArray","t":8,"pi":[{"n":"s2","pt":$n[0].MessageElementNamedArray,"ps":0}],"sn":"UnpackNamedArrayStructFromArray","rt":T,"p":[$n[0].MessageElementNamedArray]},{"v":true,"a":2,"n":"UnpackNamedMultiDimArray","t":8,"pi":[{"n":"s3","pt":$n[0].MessageElementNamedMultiDimArray,"ps":0}],"sn":"UnpackNamedMultiDimArray","rt":$n[0].NamedMultiDimArray,"p":[$n[0].MessageElementNamedMultiDimArray]},{"ab":true,"a":2,"n":"TypeName","t":16,"rt":$n[1].String,"g":{"ab":true,"a":2,"n":"get_TypeName","t":8,"rt":$n[1].String,"fg":"TypeName"},"fn":"TypeName"},{"a":1,"backing":true,"n":"<TypeName>k__BackingField","t":4,"rt":$n[1].String,"sn":"TypeName"}]}; }, $n);
    $m("RobotRaconteurWeb.ITimer", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"Start","t":8,"sn":"RobotRaconteurWeb$ITimer$Start","rt":$n[1].Void},{"ab":true,"a":2,"n":"Stop","t":8,"sn":"RobotRaconteurWeb$ITimer$Stop","rt":$n[1].Void},{"ab":true,"a":2,"n":"IsRunning","t":16,"rt":$n[1].Boolean,"g":{"ab":true,"a":2,"n":"get_IsRunning","t":8,"rt":$n[1].Boolean,"fg":"RobotRaconteurWeb$ITimer$IsRunning","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"RobotRaconteurWeb$ITimer$IsRunning"},{"ab":true,"a":2,"n":"Period","t":16,"rt":$n[1].Int32,"g":{"ab":true,"a":2,"n":"get_Period","t":8,"rt":$n[1].Int32,"fg":"RobotRaconteurWeb$ITimer$Period","box":function ($v) { return Bridge.box($v, System.Int32);}},"s":{"ab":true,"a":2,"n":"set_Period","t":8,"p":[$n[1].Int32],"rt":$n[1].Void,"fs":"RobotRaconteurWeb$ITimer$Period"},"fn":"RobotRaconteurWeb$ITimer$Period"},{"a":1,"backing":true,"n":"<IsRunning>k__BackingField","t":4,"rt":$n[1].Boolean,"sn":"RobotRaconteurWeb$ITimer$IsRunning","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"backing":true,"n":"<Period>k__BackingField","t":4,"rt":$n[1].Int32,"sn":"RobotRaconteurWeb$ITimer$Period","box":function ($v) { return Bridge.box($v, System.Int32);}}]}; }, $n);
    $m("RobotRaconteurWeb.IRate", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"Sleep","t":8,"sn":"RobotRaconteurWeb$IRate$Sleep","rt":$n[5].Task}]}; }, $n);
    $m("RobotRaconteurWeb.TimerEvent", function () { return {"att":1048841,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"current_expected","t":4,"rt":$n[1].DateTime,"sn":"current_expected","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":2,"n":"current_real","t":4,"rt":$n[1].DateTime,"sn":"current_real","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":2,"n":"last_expected","t":4,"rt":$n[1].DateTime,"sn":"last_expected","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":2,"n":"last_real","t":4,"rt":$n[1].DateTime,"sn":"last_real","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":2,"n":"stopped","t":4,"rt":$n[1].Boolean,"sn":"stopped","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}}]}; }, $n);
    $m("RobotRaconteurWeb.WallTimer", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].Int32,Function,$n[1].Boolean,$n[0].RobotRaconteurNode],"pi":[{"n":"period","pt":$n[1].Int32,"ps":0},{"n":"handler","pt":Function,"ps":1},{"n":"oneshot","pt":$n[1].Boolean,"ps":2},{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":3}],"sn":"ctor"},{"a":1,"n":"RunOne","t":8,"sn":"RunOne","rt":$n[5].Task},{"a":2,"n":"Start","t":8,"sn":"Start","rt":$n[1].Void},{"a":2,"n":"Stop","t":8,"sn":"Stop","rt":$n[1].Void},{"a":1,"n":"periodic_handler","t":8,"sn":"periodic_handler","rt":$n[1].Void},{"a":2,"n":"IsRunning","t":16,"rt":$n[1].Boolean,"g":{"a":2,"n":"get_IsRunning","t":8,"rt":$n[1].Boolean,"fg":"IsRunning","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsRunning"},{"a":2,"n":"Period","t":16,"rt":$n[1].Int32,"g":{"a":2,"n":"get_Period","t":8,"rt":$n[1].Int32,"fg":"Period","box":function ($v) { return Bridge.box($v, System.Int32);}},"s":{"a":2,"n":"set_Period","t":8,"p":[$n[1].Int32],"rt":$n[1].Void,"fs":"Period"},"fn":"Period"},{"a":3,"n":"actual_last_time","t":4,"rt":$n[1].DateTime,"sn":"actual_last_time","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":3,"n":"cancel","t":4,"rt":$n[4].CancellationTokenSource,"sn":"cancel"},{"a":3,"n":"handler","t":4,"rt":Function,"sn":"handler"},{"a":3,"n":"last_time","t":4,"rt":$n[1].DateTime,"sn":"last_time","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":3,"n":"node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"node"},{"a":3,"n":"oneshot","t":4,"rt":$n[1].Boolean,"sn":"oneshot","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"start_time","t":4,"rt":$n[1].DateTime,"sn":"start_time","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":1,"backing":true,"n":"<Period>k__BackingField","t":4,"rt":$n[1].Int32,"sn":"Period","box":function ($v) { return Bridge.box($v, System.Int32);}}]}; }, $n);
    $m("RobotRaconteurWeb.WallRate", function () { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].Double,$n[0].RobotRaconteurNode],"pi":[{"n":"frequency","pt":$n[1].Double,"ps":0},{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":1}],"sn":"ctor"},{"a":2,"n":"Sleep","t":8,"sn":"Sleep","rt":$n[5].Task},{"a":3,"n":"last_time","t":4,"rt":$n[1].DateTime,"sn":"last_time","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}},{"a":3,"n":"node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"node"},{"a":3,"n":"period","t":4,"rt":$n[1].Double,"sn":"period","box":function ($v) { return Bridge.box($v, System.Double, System.Double.format, System.Double.getHashCode);}},{"a":3,"n":"start_time","t":4,"rt":$n[1].DateTime,"sn":"start_time","box":function ($v) { return Bridge.box($v, System.DateTime, System.DateTime.format);}}]}; }, $n);
    $m("RobotRaconteurWeb.ITransportConnection", function () { return {"att":161,"a":2,"m":[{"ab":true,"a":2,"n":"CheckConnection","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0}],"sn":"RobotRaconteurWeb$ITransportConnection$CheckConnection","rt":$n[1].Void,"p":[$n[1].UInt32]},{"ab":true,"a":2,"n":"Close","t":8,"sn":"RobotRaconteurWeb$ITransportConnection$Close","rt":$n[1].Void},{"ab":true,"a":2,"n":"SendMessage","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"RobotRaconteurWeb$ITransportConnection$SendMessage","rt":$n[5].Task,"p":[$n[0].Message,$n[4].CancellationToken]},{"ab":true,"a":2,"n":"LocalEndpoint","t":16,"rt":$n[1].UInt32,"g":{"ab":true,"a":2,"n":"get_LocalEndpoint","t":8,"rt":$n[1].UInt32,"fg":"RobotRaconteurWeb$ITransportConnection$LocalEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"RobotRaconteurWeb$ITransportConnection$LocalEndpoint"},{"ab":true,"a":2,"n":"RemoteEndpoint","t":16,"rt":$n[1].UInt32,"g":{"ab":true,"a":2,"n":"get_RemoteEndpoint","t":8,"rt":$n[1].UInt32,"fg":"RobotRaconteurWeb$ITransportConnection$RemoteEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"RobotRaconteurWeb$ITransportConnection$RemoteEndpoint"},{"ab":true,"a":2,"n":"RemoteNodeID","t":16,"rt":$n[0].NodeID,"g":{"ab":true,"a":2,"n":"get_RemoteNodeID","t":8,"rt":$n[0].NodeID,"fg":"RobotRaconteurWeb$ITransportConnection$RemoteNodeID"},"fn":"RobotRaconteurWeb$ITransportConnection$RemoteNodeID"},{"a":1,"backing":true,"n":"<LocalEndpoint>k__BackingField","t":4,"rt":$n[1].UInt32,"sn":"RobotRaconteurWeb$ITransportConnection$LocalEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"backing":true,"n":"<RemoteEndpoint>k__BackingField","t":4,"rt":$n[1].UInt32,"sn":"RobotRaconteurWeb$ITransportConnection$RemoteEndpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"backing":true,"n":"<RemoteNodeID>k__BackingField","t":4,"rt":$n[0].NodeID,"sn":"RobotRaconteurWeb$ITransportConnection$RemoteNodeID"}]}; }, $n);
    $m("RobotRaconteurWeb.Transport", function () { return {"nested":[Function],"att":1048705,"a":2,"m":[{"a":3,"n":".ctor","t":1,"p":[$n[0].RobotRaconteurNode],"pi":[{"n":"node","dv":null,"o":true,"pt":$n[0].RobotRaconteurNode,"ps":0}],"sn":"ctor"},{"ab":true,"a":2,"n":"CanConnectService","t":8,"pi":[{"n":"url","pt":$n[1].String,"ps":0}],"sn":"CanConnectService","rt":$n[1].Boolean,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"v":true,"a":2,"n":"CheckConnection","t":8,"pi":[{"n":"endpoint","pt":$n[1].UInt32,"ps":0}],"sn":"CheckConnection","rt":$n[1].Void,"p":[$n[1].UInt32]},{"v":true,"a":2,"n":"Close","t":8,"sn":"Close","rt":$n[5].Task},{"ab":true,"a":2,"n":"CloseTransportConnection","t":8,"pi":[{"n":"e","pt":$n[0].Endpoint,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"CloseTransportConnection","rt":$n[5].Task,"p":[$n[0].Endpoint,$n[4].CancellationToken]},{"ab":true,"a":2,"n":"CreateTransportConnection","t":8,"pi":[{"n":"url","pt":$n[1].String,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","pt":$n[4].CancellationToken,"ps":2}],"sn":"CreateTransportConnection","rt":$n[5].Task$1(RobotRaconteurWeb.ITransportConnection),"p":[$n[1].String,$n[0].Endpoint,$n[4].CancellationToken]},{"a":3,"n":"FireTransportEventListener","t":8,"pi":[{"n":"ev","pt":$n[0].TransportListenerEventType,"ps":0},{"n":"parameter","pt":$n[1].Object,"ps":1}],"sn":"FireTransportEventListener","rt":$n[1].Void,"p":[$n[0].TransportListenerEventType,$n[1].Object]},{"v":true,"a":2,"n":"GetDetectedNodes","t":8,"pi":[{"n":"token","pt":$n[4].CancellationToken,"ps":0}],"sn":"GetDetectedNodes","rt":$n[5].Task$1(System.Collections.Generic.List$1(RobotRaconteurWeb.NodeDiscoveryInfo)),"p":[$n[4].CancellationToken]},{"v":true,"a":2,"n":"LocalNodeServicesChanged","t":8,"sn":"LocalNodeServicesChanged","rt":$n[1].Void},{"v":true,"a":5,"n":"MessageReceived","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"MessageReceived","rt":$n[1].Void,"p":[$n[0].Message]},{"v":true,"a":2,"n":"SendDiscoveryRequest","t":8,"sn":"SendDiscoveryRequest","rt":$n[1].Void},{"v":true,"a":2,"n":"SendMessage","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1}],"sn":"SendMessage","rt":$n[5].Task,"p":[$n[0].Message,$n[4].CancellationToken]},{"a":5,"n":"SpecialRequest","t":8,"pi":[{"n":"m","pt":$n[0].Message,"ps":0}],"sn":"SpecialRequest","rt":$n[5].Task$1(RobotRaconteurWeb.Message),"p":[$n[0].Message]},{"v":true,"a":2,"n":"TransportCapability","t":8,"pi":[{"n":"name","pt":$n[1].String,"ps":0}],"sn":"TransportCapability","rt":$n[1].UInt32,"p":[$n[1].String],"box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":2,"n":"CurrentThreadTransport","is":true,"t":16,"rt":$n[0].ITransportConnection,"g":{"a":2,"n":"get_CurrentThreadTransport","t":8,"rt":$n[0].ITransportConnection,"fg":"CurrentThreadTransport","is":true},"fn":"CurrentThreadTransport"},{"a":2,"n":"CurrentThreadTransportConnectionURL","is":true,"t":16,"rt":$n[1].String,"g":{"a":2,"n":"get_CurrentThreadTransportConnectionURL","t":8,"rt":$n[1].String,"fg":"CurrentThreadTransportConnectionURL","is":true},"fn":"CurrentThreadTransportConnectionURL"},{"ab":true,"a":2,"n":"IsClient","t":16,"rt":$n[1].Boolean,"g":{"ab":true,"a":2,"n":"get_IsClient","t":8,"rt":$n[1].Boolean,"fg":"IsClient","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsClient"},{"ab":true,"a":2,"n":"IsServer","t":16,"rt":$n[1].Boolean,"g":{"ab":true,"a":2,"n":"get_IsServer","t":8,"rt":$n[1].Boolean,"fg":"IsServer","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},"fn":"IsServer"},{"ab":true,"a":2,"n":"UrlSchemeString","t":16,"rt":$n[1].Array.type(System.String),"g":{"ab":true,"a":2,"n":"get_UrlSchemeString","t":8,"rt":$n[1].Array.type(System.String),"fg":"UrlSchemeString"},"fn":"UrlSchemeString"},{"a":5,"n":"TransportID","t":4,"rt":$n[1].UInt32,"sn":"TransportID","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":5,"n":"m_CurrentThreadTransport","is":true,"t":4,"rt":$n[0].ITransportConnection,"sn":"m_CurrentThreadTransport"},{"a":5,"n":"m_CurrentThreadTransportConnectionURL","is":true,"t":4,"rt":$n[1].String,"sn":"m_CurrentThreadTransportConnectionURL"},{"a":5,"n":"node","t":4,"rt":$n[0].RobotRaconteurNode,"sn":"node","ro":true},{"a":2,"n":"MessageReceivedEvent","t":2,"ad":{"a":2,"n":"add_MessageReceivedEvent","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addMessageReceivedEvent","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_MessageReceivedEvent","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removeMessageReceivedEvent","rt":$n[1].Void,"p":[Function]}},{"a":2,"n":"TransportListeners","t":2,"ad":{"a":2,"n":"add_TransportListeners","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addTransportListeners","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_TransportListeners","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removeTransportListeners","rt":$n[1].Void,"p":[Function]}},{"a":1,"backing":true,"n":"<IsClient>k__BackingField","t":4,"rt":$n[1].Boolean,"sn":"IsClient","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"backing":true,"n":"<IsServer>k__BackingField","t":4,"rt":$n[1].Boolean,"sn":"IsServer","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"backing":true,"n":"<UrlSchemeString>k__BackingField","t":4,"rt":$n[1].Array.type(System.String),"sn":"UrlSchemeString"}]}; }, $n);
    $m("RobotRaconteurWeb.TransportListenerEventType", function () { return {"att":257,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"TransportClosed","is":true,"t":4,"rt":$n[0].TransportListenerEventType,"sn":"TransportClosed","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.TransportListenerEventType, System.Enum.toStringFn(RobotRaconteurWeb.TransportListenerEventType));}},{"a":2,"n":"TransportConnectionClosed","is":true,"t":4,"rt":$n[0].TransportListenerEventType,"sn":"TransportConnectionClosed","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.TransportListenerEventType, System.Enum.toStringFn(RobotRaconteurWeb.TransportListenerEventType));}}]}; }, $n);
    $m("RobotRaconteurWeb.ParseConnectionUrlResult", function () { return {"att":1048577,"a":2,"m":[{"a":2,"isSynthetic":true,"n":".ctor","t":1,"sn":"ctor"},{"a":2,"n":"host","t":4,"rt":$n[1].String,"sn":"host"},{"a":2,"n":"nodeid","t":4,"rt":$n[0].NodeID,"sn":"nodeid"},{"a":2,"n":"nodename","t":4,"rt":$n[1].String,"sn":"nodename"},{"a":2,"n":"path","t":4,"rt":$n[1].String,"sn":"path"},{"a":2,"n":"port","t":4,"rt":$n[1].Int32,"sn":"port","box":function ($v) { return Bridge.box($v, System.Int32);}},{"a":2,"n":"scheme","t":4,"rt":$n[1].String,"sn":"scheme"},{"a":2,"n":"service","t":4,"rt":$n[1].String,"sn":"service"}]}; }, $n);
    $m("RobotRaconteurWeb.TransportUtil", function () { return {"att":1048961,"a":2,"s":true,"m":[{"a":2,"n":"ParseConnectionUrl","is":true,"t":8,"pi":[{"n":"url","pt":$n[1].String,"ps":0}],"sn":"ParseConnectionUrl","rt":$n[0].ParseConnectionUrlResult,"p":[$n[1].String]}]}; }, $n);
    $m("RobotRaconteurWeb.Wire$1", function (T) { return {"nested":[$n[0].Wire$1.WireConnection,Function,Function,Function],"att":1048705,"a":2,"m":[{"a":2,"n":".ctor","t":1,"sn":"ctor"},{"ab":true,"a":3,"n":"Close","t":8,"pi":[{"n":"c","pt":$n[0].Wire$1.WireConnection(T),"ps":0},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"Close","rt":$n[5].Task,"p":[$n[0].Wire$1.WireConnection(T),$n[0].Endpoint,$n[4].CancellationToken]},{"ab":true,"a":2,"n":"Connect","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Connect","rt":$n[5].Task$1(RobotRaconteurWeb.Wire$1.WireConnection(T)),"p":[$n[4].CancellationToken]},{"a":3,"n":"DispatchPacket","t":8,"pi":[{"n":"me","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0},{"n":"e","pt":$n[0].Wire$1.WireConnection(T),"ps":1}],"sn":"DispatchPacket","rt":$n[1].Void,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement),$n[0].Wire$1.WireConnection(T)]},{"a":3,"n":"PackPacket","t":8,"pi":[{"n":"data","pt":T,"ps":0},{"n":"time","pt":$n[0].TimeSpec,"ps":1}],"sn":"PackPacket","rt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"p":[T,$n[0].TimeSpec]},{"ab":true,"a":3,"n":"PackVarType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"ab":true,"a":2,"n":"PeekInValue","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"PeekInValue","rt":$n[5].Task$1(System.Tuple$2(T,RobotRaconteurWeb.TimeSpec)),"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"PeekOutValue","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"PeekOutValue","rt":$n[5].Task$1(System.Tuple$2(T,RobotRaconteurWeb.TimeSpec)),"p":[$n[4].CancellationToken]},{"ab":true,"a":2,"n":"PokeOutValue","t":8,"pi":[{"n":"value","pt":T,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"PokeOutValue","rt":$n[5].Task,"p":[T,$n[4].CancellationToken]},{"ab":true,"a":2,"n":"SendWirePacket","t":8,"pi":[{"n":"packet","pt":T,"ps":0},{"n":"time","pt":$n[0].TimeSpec,"ps":1},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":2}],"sn":"SendWirePacket","rt":$n[1].Void,"p":[T,$n[0].TimeSpec,$n[0].Endpoint]},{"ab":true,"a":2,"n":"Shutdown","t":8,"sn":"Shutdown","rt":$n[1].Void},{"a":3,"n":"UnpackPacket","t":8,"pi":[{"n":"me","pt":$n[3].List$1(RobotRaconteurWeb.MessageElement),"ps":0},{"n":"timespec","out":true,"pt":$n[0].TimeSpec,"ps":1}],"sn":"UnpackPacket","rt":T,"p":[$n[3].List$1(RobotRaconteurWeb.MessageElement),$n[0].TimeSpec]},{"ab":true,"a":3,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"ab":true,"a":2,"n":"WirePacketReceived","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1}],"sn":"WirePacketReceived","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ab":true,"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"ab":true,"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"ab":true,"a":2,"n":"PeekInValueCallback","t":16,"rt":Function,"g":{"ab":true,"a":2,"n":"get_PeekInValueCallback","t":8,"rt":Function,"fg":"PeekInValueCallback"},"s":{"ab":true,"a":2,"n":"set_PeekInValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PeekInValueCallback"},"fn":"PeekInValueCallback"},{"ab":true,"a":2,"n":"PeekOutValueCallback","t":16,"rt":Function,"g":{"ab":true,"a":2,"n":"get_PeekOutValueCallback","t":8,"rt":Function,"fg":"PeekOutValueCallback"},"s":{"ab":true,"a":2,"n":"set_PeekOutValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PeekOutValueCallback"},"fn":"PeekOutValueCallback"},{"ab":true,"a":2,"n":"PokeOutValueCallback","t":16,"rt":Function,"g":{"ab":true,"a":2,"n":"get_PokeOutValueCallback","t":8,"rt":Function,"fg":"PokeOutValueCallback"},"s":{"ab":true,"a":2,"n":"set_PokeOutValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PokeOutValueCallback"},"fn":"PokeOutValueCallback"},{"ab":true,"a":2,"n":"WireConnectCallback","t":16,"rt":Function,"g":{"ab":true,"a":2,"n":"get_WireConnectCallback","t":8,"rt":Function,"fg":"WireConnectCallback"},"s":{"ab":true,"a":2,"n":"set_WireConnectCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"WireConnectCallback"},"fn":"WireConnectCallback"},{"a":3,"n":"direction","t":4,"rt":$n[0].MemberDefinition_Direction,"sn":"direction","box":function ($v) { return Bridge.box($v, RobotRaconteurWeb.MemberDefinition_Direction, System.Enum.toStringFn(RobotRaconteurWeb.MemberDefinition_Direction));}},{"a":1,"n":"rawelements","t":4,"rt":$n[1].Boolean,"sn":"rawelements","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":1,"backing":true,"n":"<MemberName>k__BackingField","t":4,"rt":$n[1].String,"sn":"MemberName"},{"a":1,"backing":true,"n":"<PeekInValueCallback>k__BackingField","t":4,"rt":Function,"sn":"PeekInValueCallback"},{"a":1,"backing":true,"n":"<PeekOutValueCallback>k__BackingField","t":4,"rt":Function,"sn":"PeekOutValueCallback"},{"a":1,"backing":true,"n":"<PokeOutValueCallback>k__BackingField","t":4,"rt":Function,"sn":"PokeOutValueCallback"},{"a":1,"backing":true,"n":"<WireConnectCallback>k__BackingField","t":4,"rt":Function,"sn":"WireConnectCallback"}]}; }, $n);
    $m("RobotRaconteurWeb.Wire$1.WireConnection", function (T) { return {"td":$n[0].Wire$1(T),"att":1048578,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Wire$1(T),$n[0].Endpoint],"pi":[{"n":"parent","pt":$n[0].Wire$1(T),"ps":0},{"n":"endpoint","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1}],"sn":"ctor"},{"v":true,"a":2,"n":"Close","t":8,"sn":"Close","rt":$n[5].Task},{"v":true,"a":5,"n":"RemoteClose","t":8,"sn":"RemoteClose","rt":$n[1].Void},{"v":true,"a":5,"n":"WirePacketReceived","t":8,"pi":[{"n":"timespec","pt":$n[0].TimeSpec,"ps":0},{"n":"packet","pt":T,"ps":1}],"sn":"WirePacketReceived","rt":$n[1].Void,"p":[$n[0].TimeSpec,T]},{"a":2,"n":"Endpoint","t":16,"rt":$n[1].UInt32,"g":{"a":2,"n":"get_Endpoint","t":8,"rt":$n[1].UInt32,"fg":"Endpoint","box":function ($v) { return Bridge.box($v, System.UInt32);}},"fn":"Endpoint"},{"v":true,"a":2,"n":"InValue","t":16,"rt":T,"g":{"v":true,"a":2,"n":"get_InValue","t":8,"rt":T,"fg":"InValue"},"fn":"InValue"},{"v":true,"a":2,"n":"LastValueReceivedTime","t":16,"rt":$n[0].TimeSpec,"g":{"v":true,"a":2,"n":"get_LastValueReceivedTime","t":8,"rt":$n[0].TimeSpec,"fg":"LastValueReceivedTime"},"fn":"LastValueReceivedTime"},{"v":true,"a":2,"n":"LastValueSentTime","t":16,"rt":$n[0].TimeSpec,"g":{"v":true,"a":2,"n":"get_LastValueSentTime","t":8,"rt":$n[0].TimeSpec,"fg":"LastValueSentTime"},"fn":"LastValueSentTime"},{"v":true,"a":2,"n":"OutValue","t":16,"rt":T,"g":{"v":true,"a":2,"n":"get_OutValue","t":8,"rt":T,"fg":"OutValue"},"s":{"v":true,"a":2,"n":"set_OutValue","t":8,"p":[T],"rt":$n[1].Void,"fs":"OutValue"},"fn":"OutValue"},{"a":2,"n":"WireCloseCallback","t":16,"rt":Function,"g":{"a":2,"n":"get_WireCloseCallback","t":8,"rt":Function,"fg":"WireCloseCallback"},"s":{"a":2,"n":"set_WireCloseCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"WireCloseCallback"},"fn":"WireCloseCallback"},{"a":1,"n":"close_callback","t":4,"rt":Function,"sn":"close_callback"},{"a":3,"n":"endpoint","t":4,"rt":$n[0].Endpoint,"sn":"endpoint"},{"a":3,"n":"inval","t":4,"rt":T,"sn":"inval"},{"a":3,"n":"inval_valid","t":4,"rt":$n[1].Boolean,"sn":"inval_valid","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"last_sendtime","t":4,"rt":$n[0].TimeSpec,"sn":"last_sendtime"},{"a":1,"n":"lasttime_recv","t":4,"rt":$n[0].TimeSpec,"sn":"lasttime_recv"},{"a":3,"n":"lasttime_send","t":4,"rt":$n[0].TimeSpec,"sn":"lasttime_send"},{"a":3,"n":"outval","t":4,"rt":T,"sn":"outval"},{"a":3,"n":"outval_valid","t":4,"rt":$n[1].Boolean,"sn":"outval_valid","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"parent","t":4,"rt":$n[0].Wire$1(T),"sn":"parent"},{"a":1,"n":"recv_lock","t":4,"rt":$n[1].Object,"sn":"recv_lock"},{"a":3,"n":"sendlock","t":4,"rt":$n[1].Object,"sn":"sendlock"},{"a":2,"n":"WireValueChanged","t":2,"ad":{"a":2,"n":"add_WireValueChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addWireValueChanged","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_WireValueChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removeWireValueChanged","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurWeb.WireClient$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceStub],"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"stub","pt":$n[0].ServiceStub,"ps":1}],"sn":"ctor"},{"v":true,"a":3,"n":"ClientContextListener","t":8,"pi":[{"n":"context","pt":$n[0].ClientContext,"ps":0},{"n":"event_","pt":$n[0].ClientServiceListenerEventType,"ps":1},{"n":"param","pt":$n[1].Object,"ps":2}],"sn":"ClientContextListener","rt":$n[1].Void,"p":[$n[0].ClientContext,$n[0].ClientServiceListenerEventType,$n[1].Object]},{"ov":true,"a":3,"n":"Close","t":8,"pi":[{"n":"c","pt":$n[0].Wire$1.WireConnection(T),"ps":0},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"Close","rt":$n[5].Task,"p":[$n[0].Wire$1.WireConnection(T),$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Connect","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Connect","rt":$n[5].Task$1(RobotRaconteurWeb.Wire$1.WireConnection(T)),"p":[$n[4].CancellationToken]},{"ov":true,"a":3,"n":"PackVarType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"ov":true,"a":2,"n":"PeekInValue","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"PeekInValue","rt":$n[5].Task$1(System.Tuple$2(T,RobotRaconteurWeb.TimeSpec)),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"PeekOutValue","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"PeekOutValue","rt":$n[5].Task$1(System.Tuple$2(T,RobotRaconteurWeb.TimeSpec)),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"PokeOutValue","t":8,"pi":[{"n":"value","pt":T,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"PokeOutValue","rt":$n[5].Task,"p":[T,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"SendWirePacket","t":8,"pi":[{"n":"packet","pt":T,"ps":0},{"n":"time","pt":$n[0].TimeSpec,"ps":1},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":2}],"sn":"SendWirePacket","rt":$n[1].Void,"p":[T,$n[0].TimeSpec,$n[0].Endpoint]},{"ov":true,"a":2,"n":"Shutdown","t":8,"sn":"Shutdown","rt":$n[1].Void},{"ov":true,"a":3,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"ov":true,"a":2,"n":"WirePacketReceived","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1}],"sn":"WirePacketReceived","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"ov":true,"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"ov":true,"a":2,"n":"PeekInValueCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_PeekInValueCallback","t":8,"rt":Function,"fg":"PeekInValueCallback"},"s":{"ov":true,"a":2,"n":"set_PeekInValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PeekInValueCallback"},"fn":"PeekInValueCallback"},{"ov":true,"a":2,"n":"PeekOutValueCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_PeekOutValueCallback","t":8,"rt":Function,"fg":"PeekOutValueCallback"},"s":{"ov":true,"a":2,"n":"set_PeekOutValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PeekOutValueCallback"},"fn":"PeekOutValueCallback"},{"ov":true,"a":2,"n":"PokeOutValueCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_PokeOutValueCallback","t":8,"rt":Function,"fg":"PokeOutValueCallback"},"s":{"ov":true,"a":2,"n":"set_PokeOutValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PokeOutValueCallback"},"fn":"PokeOutValueCallback"},{"ov":true,"a":2,"n":"WireConnectCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_WireConnectCallback","t":8,"rt":Function,"fg":"WireConnectCallback"},"s":{"ov":true,"a":2,"n":"set_WireConnectCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"WireConnectCallback"},"fn":"WireConnectCallback"},{"a":1,"n":"Close_mutex","t":4,"rt":$n[0].AsyncMutex,"sn":"Close_mutex"},{"a":5,"n":"connect_lock","t":4,"rt":$n[1].Object,"sn":"connect_lock"},{"a":5,"n":"connection","t":4,"rt":$n[0].Wire$1.WireConnection(T),"sn":"connection"},{"a":3,"n":"m_MemberName","t":4,"rt":$n[1].String,"sn":"m_MemberName"},{"a":5,"n":"stub","t":4,"rt":$n[0].ServiceStub,"sn":"stub"}]}; }, $n);
    $m("RobotRaconteurWeb.WireServer$1", function (T) { return {"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[1].String,$n[0].ServiceSkel],"pi":[{"n":"name","pt":$n[1].String,"ps":0},{"n":"skel","pt":$n[0].ServiceSkel,"ps":1}],"sn":"ctor"},{"ov":true,"a":3,"n":"Close","t":8,"pi":[{"n":"c","pt":$n[0].Wire$1.WireConnection(T),"ps":0},{"n":"ee","pt":$n[0].Endpoint,"ps":1},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":2}],"sn":"Close","rt":$n[5].Task,"p":[$n[0].Wire$1.WireConnection(T),$n[0].Endpoint,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"Connect","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"Connect","rt":$n[5].Task$1(RobotRaconteurWeb.Wire$1.WireConnection(T)),"p":[$n[4].CancellationToken]},{"ov":true,"a":3,"n":"PackVarType","t":8,"pi":[{"n":"o","pt":$n[1].Object,"ps":0}],"sn":"PackVarType","rt":$n[1].Object,"p":[$n[1].Object]},{"ov":true,"a":2,"n":"PeekInValue","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"PeekInValue","rt":$n[5].Task$1(System.Tuple$2(T,RobotRaconteurWeb.TimeSpec)),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"PeekOutValue","t":8,"pi":[{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":0}],"sn":"PeekOutValue","rt":$n[5].Task$1(System.Tuple$2(T,RobotRaconteurWeb.TimeSpec)),"p":[$n[4].CancellationToken]},{"ov":true,"a":2,"n":"PokeOutValue","t":8,"pi":[{"n":"value","pt":T,"ps":0},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":1}],"sn":"PokeOutValue","rt":$n[5].Task,"p":[T,$n[4].CancellationToken]},{"ov":true,"a":2,"n":"SendWirePacket","t":8,"pi":[{"n":"packet","pt":T,"ps":0},{"n":"time","pt":$n[0].TimeSpec,"ps":1},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":2}],"sn":"SendWirePacket","rt":$n[1].Void,"p":[T,$n[0].TimeSpec,$n[0].Endpoint]},{"ov":true,"a":2,"n":"Shutdown","t":8,"sn":"Shutdown","rt":$n[1].Void},{"ov":true,"a":3,"n":"UnpackVarType","t":8,"pi":[{"n":"o","pt":$n[0].MessageElement,"ps":0}],"sn":"UnpackVarType","rt":$n[1].Object,"p":[$n[0].MessageElement]},{"a":2,"n":"WireCommand","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","pt":$n[0].Endpoint,"ps":1}],"sn":"WireCommand","rt":$n[5].Task$1(RobotRaconteurWeb.MessageEntry),"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"WirePacketReceived","t":8,"pi":[{"n":"m","pt":$n[0].MessageEntry,"ps":0},{"n":"e","dv":null,"o":true,"pt":$n[0].Endpoint,"ps":1}],"sn":"WirePacketReceived","rt":$n[1].Void,"p":[$n[0].MessageEntry,$n[0].Endpoint]},{"ov":true,"a":2,"n":"MemberName","t":16,"rt":$n[1].String,"g":{"ov":true,"a":2,"n":"get_MemberName","t":8,"rt":$n[1].String,"fg":"MemberName"},"fn":"MemberName"},{"ov":true,"a":2,"n":"PeekInValueCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_PeekInValueCallback","t":8,"rt":Function,"fg":"PeekInValueCallback"},"s":{"ov":true,"a":2,"n":"set_PeekInValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PeekInValueCallback"},"fn":"PeekInValueCallback"},{"ov":true,"a":2,"n":"PeekOutValueCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_PeekOutValueCallback","t":8,"rt":Function,"fg":"PeekOutValueCallback"},"s":{"ov":true,"a":2,"n":"set_PeekOutValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PeekOutValueCallback"},"fn":"PeekOutValueCallback"},{"ov":true,"a":2,"n":"PokeOutValueCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_PokeOutValueCallback","t":8,"rt":Function,"fg":"PokeOutValueCallback"},"s":{"ov":true,"a":2,"n":"set_PokeOutValueCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"PokeOutValueCallback"},"fn":"PokeOutValueCallback"},{"ov":true,"a":2,"n":"WireConnectCallback","t":16,"rt":Function,"g":{"ov":true,"a":2,"n":"get_WireConnectCallback","t":8,"rt":Function,"fg":"WireConnectCallback"},"s":{"ov":true,"a":2,"n":"set_WireConnectCallback","t":8,"p":[Function],"rt":$n[1].Void,"fs":"WireConnectCallback"},"fn":"WireConnectCallback"},{"a":1,"n":"connect_callback","t":4,"rt":Function,"sn":"connect_callback"},{"a":1,"n":"connections","t":4,"rt":$n[3].Dictionary$2(System.UInt32,RobotRaconteurWeb.Wire$1.WireConnection(T)),"sn":"connections"},{"a":1,"n":"connectionslock","t":4,"rt":$n[1].Object,"sn":"connectionslock"},{"a":3,"n":"m_MemberName","t":4,"rt":$n[1].String,"sn":"m_MemberName"},{"a":3,"n":"skel","t":4,"rt":$n[0].ServiceSkel,"sn":"skel"},{"a":1,"backing":true,"n":"<PeekInValueCallback>k__BackingField","t":4,"rt":Function,"sn":"PeekInValueCallback"},{"a":1,"backing":true,"n":"<PeekOutValueCallback>k__BackingField","t":4,"rt":Function,"sn":"PeekOutValueCallback"},{"a":1,"backing":true,"n":"<PokeOutValueCallback>k__BackingField","t":4,"rt":Function,"sn":"PokeOutValueCallback"}]}; }, $n);
    $m("RobotRaconteurWeb.WireBroadcaster$1", function (T) { return {"nested":[$n[0].WireBroadcaster$1.connected_connection],"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Wire$1(T)],"pi":[{"n":"wire","pt":$n[0].Wire$1(T),"ps":0}],"sn":"ctor"},{"a":3,"n":"ClientPeekInValue","t":8,"pi":[{"n":"c","pt":$n[1].UInt32,"ps":0}],"sn":"ClientPeekInValue","rt":T,"p":[$n[1].UInt32]},{"a":3,"n":"ClientPeekOutValue","t":8,"pi":[{"n":"c","pt":$n[1].UInt32,"ps":0}],"sn":"ClientPeekOutValue","rt":T,"p":[$n[1].UInt32]},{"a":3,"n":"ClientPokeOutValue","t":8,"pi":[{"n":"v","pt":T,"ps":0},{"n":"ts","pt":$n[0].TimeSpec,"ps":1},{"n":"c","pt":$n[1].UInt32,"ps":2}],"sn":"ClientPokeOutValue","rt":$n[1].Void,"p":[T,$n[0].TimeSpec,$n[1].UInt32]},{"a":3,"n":"ConnectionClosed","t":8,"pi":[{"n":"ep","pt":$n[0].WireBroadcaster$1.connected_connection(T),"ps":0}],"sn":"ConnectionClosed","rt":$n[1].Void,"p":[$n[0].WireBroadcaster$1.connected_connection(T)]},{"a":3,"n":"ConnectionConnected","t":8,"pi":[{"n":"w","pt":$n[0].Wire$1(T),"ps":0},{"n":"ep","pt":$n[0].Wire$1.WireConnection(T),"ps":1}],"sn":"ConnectionConnected","rt":$n[1].Void,"p":[$n[0].Wire$1(T),$n[0].Wire$1.WireConnection(T)]},{"a":2,"n":"OutValue","t":16,"rt":T,"s":{"a":2,"n":"set_OutValue","t":8,"p":[T],"rt":$n[1].Void,"fs":"OutValue"},"fn":"OutValue"},{"a":2,"n":"Wire","t":16,"rt":$n[0].Wire$1(T),"g":{"a":2,"n":"get_Wire","t":8,"rt":$n[0].Wire$1(T),"fg":"Wire"},"fn":"Wire"},{"a":3,"n":"connected_wires","t":4,"rt":$n[3].List$1(RobotRaconteurWeb.WireBroadcaster$1.connected_connection(T)),"sn":"connected_wires"},{"a":3,"n":"connected_wires_lock","t":4,"rt":$n[1].Object,"sn":"connected_wires_lock"},{"a":3,"n":"current_out_value","t":4,"rt":T,"sn":"current_out_value"},{"a":3,"n":"wire","t":4,"rt":$n[0].Wire$1(T),"sn":"wire"}]}; }, $n);
    $m("RobotRaconteurWeb.WireBroadcaster$1.connected_connection", function (T) { return {"td":$n[0].WireBroadcaster$1(T),"att":1048580,"a":3,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Wire$1.WireConnection(T)],"pi":[{"n":"connection","pt":$n[0].Wire$1.WireConnection(T),"ps":0}],"sn":"ctor"},{"a":2,"n":"connection","t":4,"rt":$n[0].Wire$1.WireConnection(T),"sn":"connection"}]}; }, $n);
    $m("RobotRaconteurWeb.WireUnicastReceiver$1", function (T) { return {"nested":[$n[0].WireUnicastReceiver$1.connected_connection],"att":1048577,"a":2,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Wire$1(T)],"pi":[{"n":"wire","pt":$n[0].Wire$1(T),"ps":0}],"sn":"ctor"},{"a":3,"n":"ClientPeekInValue","t":8,"pi":[{"n":"c","pt":$n[1].UInt32,"ps":0}],"sn":"ClientPeekInValue","rt":T,"p":[$n[1].UInt32]},{"a":3,"n":"ClientPeekOutValue","t":8,"pi":[{"n":"c","pt":$n[1].UInt32,"ps":0}],"sn":"ClientPeekOutValue","rt":T,"p":[$n[1].UInt32]},{"a":3,"n":"ClientPokeOutValue","t":8,"pi":[{"n":"v","pt":T,"ps":0},{"n":"ts","pt":$n[0].TimeSpec,"ps":1},{"n":"c","pt":$n[1].UInt32,"ps":2}],"sn":"ClientPokeOutValue","rt":$n[1].Void,"p":[T,$n[0].TimeSpec,$n[1].UInt32]},{"a":3,"n":"ConnectionClosed","t":8,"pi":[{"n":"ep","pt":$n[0].WireUnicastReceiver$1.connected_connection(T),"ps":0}],"sn":"ConnectionClosed","rt":$n[1].Void,"p":[$n[0].WireUnicastReceiver$1.connected_connection(T)]},{"a":3,"n":"ConnectionConnected","t":8,"pi":[{"n":"w","pt":$n[0].Wire$1(T),"ps":0},{"n":"ep","pt":$n[0].Wire$1.WireConnection(T),"ps":1}],"sn":"ConnectionConnected","rt":$n[1].Void,"p":[$n[0].Wire$1(T),$n[0].Wire$1.WireConnection(T)]},{"a":2,"n":"GetInValue","t":8,"pi":[{"n":"ts","out":true,"pt":$n[0].TimeSpec,"ps":0},{"n":"ep","out":true,"pt":$n[1].UInt32,"ps":1}],"sn":"GetInValue","rt":T,"p":[$n[0].TimeSpec,$n[1].UInt32]},{"a":2,"n":"Wire","t":16,"rt":$n[0].Wire$1(T),"g":{"a":2,"n":"get_Wire","t":8,"rt":$n[0].Wire$1(T),"fg":"Wire"},"fn":"Wire"},{"a":1,"n":"active_connection","t":4,"rt":$n[0].WireUnicastReceiver$1.connected_connection(T),"sn":"active_connection"},{"a":1,"n":"in_value","t":4,"rt":T,"sn":"in_value"},{"a":1,"n":"in_value_ep","t":4,"rt":$n[1].UInt32,"sn":"in_value_ep","box":function ($v) { return Bridge.box($v, System.UInt32);}},{"a":1,"n":"in_value_ts","t":4,"rt":$n[0].TimeSpec,"sn":"in_value_ts"},{"a":1,"n":"in_value_valid","t":4,"rt":$n[1].Boolean,"sn":"in_value_valid","box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":3,"n":"wire","t":4,"rt":$n[0].Wire$1(T),"sn":"wire"},{"a":2,"n":"InValueChanged","t":2,"ad":{"a":2,"n":"add_InValueChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"addInValueChanged","rt":$n[1].Void,"p":[Function]},"r":{"a":2,"n":"remove_InValueChanged","t":8,"pi":[{"n":"value","pt":Function,"ps":0}],"sn":"removeInValueChanged","rt":$n[1].Void,"p":[Function]}}]}; }, $n);
    $m("RobotRaconteurWeb.WireUnicastReceiver$1.connected_connection", function (T) { return {"td":$n[0].WireUnicastReceiver$1(T),"att":1048580,"a":3,"m":[{"a":2,"n":".ctor","t":1,"p":[$n[0].Wire$1.WireConnection(T)],"pi":[{"n":"connection","pt":$n[0].Wire$1.WireConnection(T),"ps":0}],"sn":"ctor"},{"a":2,"n":"connection","t":4,"rt":$n[0].Wire$1.WireConnection(T),"sn":"connection"}]}; }, $n);
    $m("RobotRaconteurWeb.detail.ServiceDefinitionUtil", function () { return {"att":1048960,"a":4,"s":true,"m":[{"a":4,"n":"ServiceDefinition_FindBlock","is":true,"t":8,"pi":[{"n":"current_line","pt":$n[1].String,"ps":0},{"n":"is_","pt":$n[7].TextReader,"ps":1},{"n":"os","pt":$n[7].TextWriter,"ps":2},{"n":"pos","ref":true,"pt":$n[1].UInt32,"ps":3},{"n":"init_pos","ref":true,"pt":$n[1].UInt32,"ps":4}],"sn":"ServiceDefinition_FindBlock","rt":$n[1].Void,"p":[$n[1].String,$n[7].TextReader,$n[7].TextWriter,$n[1].UInt32,$n[1].UInt32]},{"a":4,"n":"ServiceDefinition_FromStringFormat_common","is":true,"t":8,"pi":[{"n":"r","pt":$n[8].Regex,"ps":0},{"n":"l","pt":$n[1].String,"ps":1},{"n":"keyword","pt":$n[1].String,"ps":2},{"n":"vec","ref":true,"pt":$n[3].List$1(System.String),"ps":3}],"sn":"ServiceDefinition_FromStringFormat_common","rt":$n[1].Void,"p":[$n[8].Regex,$n[1].String,$n[1].String,$n[3].List$1(System.String)]},{"a":4,"n":"ServiceDefinition_FromStringImportFormat","is":true,"t":8,"pi":[{"n":"l","pt":$n[1].String,"ps":0},{"n":"keyword","pt":$n[1].String,"ps":1},{"n":"vec","ref":true,"pt":$n[3].List$1(System.String),"ps":2}],"sn":"ServiceDefinition_FromStringImportFormat","rt":$n[1].Void,"p":[$n[1].String,$n[1].String,$n[3].List$1(System.String)]},{"a":4,"n":"ServiceDefinition_FromStringTypeFormat","is":true,"t":8,"pi":[{"n":"l","pt":$n[1].String,"ps":0},{"n":"keyword","pt":$n[1].String,"ps":1},{"n":"vec","ref":true,"pt":$n[3].List$1(System.String),"ps":2}],"sn":"ServiceDefinition_FromStringTypeFormat","rt":$n[1].Void,"p":[$n[1].String,$n[1].String,$n[3].List$1(System.String)]},{"a":4,"n":"ServiceDefinition_GetLine","is":true,"t":8,"pi":[{"n":"is_","pt":$n[7].TextReader,"ps":0},{"n":"l","ref":true,"pt":$n[1].String,"ps":1},{"n":"pos","ref":true,"pt":$n[1].UInt32,"ps":2}],"sn":"ServiceDefinition_GetLine","rt":$n[1].Boolean,"p":[$n[7].TextReader,$n[1].String,$n[1].UInt32],"box":function ($v) { return Bridge.box($v, System.Boolean, System.Boolean.toString);}},{"a":4,"n":"RR_FLOAT_REGEX","is":true,"t":4,"rt":$n[1].String,"sn":"RR_FLOAT_REGEX"},{"a":4,"n":"RR_INT_REGEX","is":true,"t":4,"rt":$n[1].String,"sn":"RR_INT_REGEX"},{"a":4,"n":"RR_NAME_REGEX","is":true,"t":4,"rt":$n[1].String,"sn":"RR_NAME_REGEX"},{"a":4,"n":"RR_QUALIFIED_TYPE_REGEX","is":true,"t":4,"rt":$n[1].String,"sn":"RR_QUALIFIED_TYPE_REGEX"},{"a":4,"n":"RR_TYPE2_REGEX","is":true,"t":4,"rt":$n[1].String,"sn":"RR_TYPE2_REGEX"},{"a":4,"n":"RR_TYPE_REGEX","is":true,"t":4,"rt":$n[1].String,"sn":"RR_TYPE_REGEX"}]}; }, $n);
    $m("RobotRaconteurWeb.Extensions.Extensions", function () { return {"att":1048961,"a":2,"s":true,"m":[{"a":2,"n":"AsApm","is":true,"t":8,"pi":[{"n":"task","pt":$n[5].Task,"ps":0},{"n":"callback","pt":Function,"ps":1},{"n":"state","pt":$n[1].Object,"ps":2}],"sn":"AsApm","rt":$n[1].IAsyncResult,"p":[$n[5].Task,Function,$n[1].Object]},{"a":2,"n":"AsApm","is":true,"t":8,"pi":[{"n":"task","pt":$n[5].Task$1(System.Object),"ps":0},{"n":"callback","pt":Function,"ps":1},{"n":"state","pt":$n[1].Object,"ps":2}],"tpc":1,"tprm":["T"],"sn":"AsApm$1","rt":$n[1].IAsyncResult,"p":[$n[5].Task$1(System.Object),Function,$n[1].Object]},{"a":2,"n":"AttachCancellationToken","is":true,"t":8,"pi":[{"n":"source","pt":$n[5].TaskCompletionSource,"ps":0},{"n":"cancel","pt":$n[4].CancellationToken,"ps":1},{"n":"e","dv":null,"o":true,"pt":$n[1].Exception,"ps":2}],"tpc":1,"tprm":["T"],"sn":"AttachCancellationToken","rt":$n[1].Void,"p":[$n[5].TaskCompletionSource,$n[4].CancellationToken,$n[1].Exception]},{"a":2,"n":"AwaitWithTimeout","is":true,"t":8,"pi":[{"n":"task","pt":$n[5].Task,"ps":0},{"n":"timeout","pt":$n[1].Int32,"ps":1}],"sn":"AwaitWithTimeout","rt":$n[5].Task,"p":[$n[5].Task,$n[1].Int32]},{"a":2,"n":"AwaitWithTimeout","is":true,"t":8,"pi":[{"n":"task","pt":$n[5].Task$1(System.Object),"ps":0},{"n":"timeout","pt":$n[1].Int32,"ps":1}],"tpc":1,"tprm":["T"],"sn":"AwaitWithTimeout$1","rt":$n[5].Task$1(System.Object),"p":[$n[5].Task$1(System.Object),$n[1].Int32]},{"a":2,"n":"ConfigureAwait","is":true,"t":8,"pi":[{"n":"t","pt":$n[5].Task$1(System.Object),"ps":0},{"n":"v","pt":$n[1].Boolean,"ps":1}],"tpc":1,"tprm":["T"],"sn":"ConfigureAwait","rt":$n[5].Task$1(System.Object),"p":[$n[5].Task$1(System.Object),$n[1].Boolean]},{"a":2,"n":"IgnoreResult","is":true,"t":8,"pi":[{"n":"t","pt":$n[5].Task,"ps":0}],"sn":"IgnoreResult","rt":$n[5].Task,"p":[$n[5].Task]},{"a":2,"n":"IgnoreResult","is":true,"t":8,"pi":[{"n":"t","pt":$n[5].Task$1(System.Object),"ps":0}],"tpc":1,"tprm":["T"],"sn":"IgnoreResult$1","rt":$n[5].Task,"p":[$n[5].Task$1(System.Object)]},{"a":2,"n":"ReadAsync","is":true,"t":8,"pi":[{"n":"stream","pt":$n[7].Stream,"ps":0},{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":1},{"n":"offset","pt":$n[1].Int32,"ps":2},{"n":"count","pt":$n[1].Int32,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"ReadAsync","rt":$n[5].Task$1(System.Int32),"p":[$n[7].Stream,$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32,$n[4].CancellationToken]},{"a":2,"n":"ReplaceFirst","is":true,"t":8,"pi":[{"n":"text","pt":$n[1].String,"ps":0},{"n":"search","pt":$n[1].String,"ps":1},{"n":"replace","pt":$n[1].String,"ps":2}],"sn":"ReplaceFirst","rt":$n[1].String,"p":[$n[1].String,$n[1].String,$n[1].String]},{"a":2,"n":"WriteAsync","is":true,"t":8,"pi":[{"n":"stream","pt":$n[7].Stream,"ps":0},{"n":"buffer","pt":$n[1].Array.type(System.Byte),"ps":1},{"n":"offset","pt":$n[1].Int32,"ps":2},{"n":"count","pt":$n[1].Int32,"ps":3},{"n":"cancel","dv":null,"o":true,"pt":$n[4].CancellationToken,"ps":4}],"sn":"WriteAsync","rt":$n[5].Task$1(System.Int32),"p":[$n[7].Stream,$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32,$n[4].CancellationToken]}]}; }, $n);
    $m("RobotRaconteurWeb.Extensions.RRUriExtensions", function () { return {"att":1048961,"a":2,"s":true,"m":[{"a":2,"n":"EscapeDataString","is":true,"t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"EscapeDataString","rt":$n[1].String,"p":[$n[1].String]},{"a":2,"n":"UnescapeDataString","is":true,"t":8,"pi":[{"n":"s","pt":$n[1].String,"ps":0}],"sn":"UnescapeDataString","rt":$n[1].String,"p":[$n[1].String]}]}; }, $n);
    $m("RobotRaconteurWeb.Extensions.Buffer", function () { return {"att":1048961,"a":2,"s":true,"m":[{"a":4,"n":"BlockCopy","is":true,"t":8,"pi":[{"n":"a","pt":Array,"ps":0},{"n":"v","pt":$n[1].Int32,"ps":1},{"n":"membuf","pt":$n[1].Array.type(System.Byte),"ps":2},{"n":"position","pt":$n[1].Int32,"ps":3},{"n":"bl","pt":$n[1].Int32,"ps":4}],"sn":"BlockCopy","rt":$n[1].Void,"p":[Array,$n[1].Int32,$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32]},{"a":4,"n":"BlockCopy","is":true,"t":8,"pi":[{"n":"membuf","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"position","pt":$n[1].Int32,"ps":1},{"n":"a","pt":Array,"ps":2},{"n":"v","pt":$n[1].Int32,"ps":3},{"n":"bl","pt":$n[1].Int32,"ps":4}],"sn":"BlockCopy$1","rt":$n[1].Void,"p":[$n[1].Array.type(System.Byte),$n[1].Int32,Array,$n[1].Int32,$n[1].Int32]},{"a":4,"n":"BlockCopy","is":true,"t":8,"pi":[{"n":"recbuf","pt":$n[1].Array.type(System.Byte),"ps":0},{"n":"v1","pt":$n[1].Int32,"ps":1},{"n":"newbuf","pt":$n[1].Array.type(System.Byte),"ps":2},{"n":"v2","pt":$n[1].Int32,"ps":3},{"n":"v3","pt":$n[1].Int32,"ps":4}],"sn":"BlockCopy$2","rt":$n[1].Void,"p":[$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Array.type(System.Byte),$n[1].Int32,$n[1].Int32]},{"a":4,"n":"ByteLength","is":true,"t":8,"pi":[{"n":"a","pt":Array,"ps":0}],"sn":"ByteLength","rt":$n[1].Int32,"p":[Array],"box":function ($v) { return Bridge.box($v, System.Int32);}}]}; }, $n);
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJSb2JvdFJhY29udGV1ckJyaWRnZS5qcyIsCiAgInNvdXJjZVJvb3QiOiAiIiwKICAic291cmNlcyI6IFsiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvU2VydmljZUZhY3RvcnkuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9TZXJ2aWNlLmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvQ2xpZW50LmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvRXJyb3IuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9JT1V0aWxzLmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvTWVtb3J5TWVtYmVyLmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvQXN5bmNNdXRleC5jcyIsIi4uL1JvYm90UmFjb250ZXVyV2ViU2hhcmVkU291cmNlL1NlY3VyaXR5LmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvVHJhbnNwb3J0LmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvQ2FsbGJhY2tNZW1iZXIuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9TZXJ2aWNlRGVmaW5pdGlvbi5jcyIsIi4uL1JvYm90UmFjb250ZXVyV2ViU2hhcmVkU291cmNlL01lc3NhZ2UuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9FbmRwb2ludC5jcyIsIi4uL1JvYm90UmFjb250ZXVyV2ViU2hhcmVkU291cmNlL0V4dGVuc2lvbnMuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9HZW5lcmF0b3IuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9NdWx0aURpbUFycmF5LmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvUm9ib3RSYWNvbnRldXIuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9Ob2RlSUQuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9QZXJpb2RpY1Rhc2suY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9QaXBlTWVtYmVyLmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvU2VydmljZVN0cnVjdHVyZS5jcyIsIkJyb3dzZXJXZWJTb2NrZXRUcmFuc3BvcnQuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9XaXJlTWVtYmVyLmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXhfc3R1YnNrZWwuY3MiLCIuLi9Sb2JvdFJhY29udGV1cldlYlNoYXJlZFNvdXJjZS9Sb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5jcyIsIi4uL1JvYm90UmFjb250ZXVyV2ViU2hhcmVkU291cmNlL0FzeW5jU3RyZWFtVHJhbnNwb3J0LmNzIiwiLi4vUm9ib3RSYWNvbnRldXJXZWJTaGFyZWRTb3VyY2UvVGltZXIuY3MiXSwKICAibmFtZXMiOiBbIiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0JBa0N5Q0E7Ozs7OzRCQUlYQSxNQUFnQ0E7Ozs7O2dCQUVsREEsSUFBSUEsUUFBUUE7b0JBRVJBLFlBQVlBOztvQkFJWkEsWUFBWUE7OztnQkFHaEJBLGVBQWVBOzs7OztnQkFLZkEsSUFBSUEsYUFBUUE7b0JBRVJBLFlBQU9BLElBQUlBO29CQUNYQSxxQkFBZ0JBOztnQkFFcEJBLE9BQU9BOztrQ0FHY0E7Z0JBRXJCQSxPQUFPQSwyREFBeUNBOzt3Q0FHdkJBLG9CQUEyQkE7Z0JBRXBEQSxRQUFRQSwyREFBeUNBO2dCQUNqREEsYUFBV0E7Z0JBQ1hBLE9BQU9BLGdDQUFXQTs7cUNBSytCQTtnQkFFakRBO2dCQUNBQSxJQUFJQSxz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QUFPQTs7Ozs7NEJBSXFCQSxZQUFtQkEsTUFBa0JBLGNBQW1CQTs7Ozs7Z0JBRWhGQSxZQUFPQSxLQUFJQSxpREFBNEJBLFlBQVlBLE1BQU1BLGNBQWNBOzs7OzhCQUcvQ0E7Z0JBRXhCQSxNQUFNQSxJQUFJQTs7aUNBR3dCQTs7Z0JBRWxDQSxPQUFPQTs7MENBRzJCQTtnQkFFbENBLE9BQU9BOzs0QkFHZUEsV0FBaUJBLFFBQVlBLFdBQWlCQSxPQUFhQTs7Z0JBRWpGQSxPQUFPQSxtQkFBY0EsV0FBV0EsUUFBUUEsV0FBV0EsT0FBT0E7OzZCQUduQ0EsV0FBaUJBLFFBQVlBLFdBQWlCQSxPQUFhQTs7Z0JBRWxGQSxPQUFPQSxvQkFBZUEsV0FBV0EsUUFBUUEsV0FBV0EsT0FBT0EiLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gQ29weXJpZ2h0IDIwMTEtMjAxOSBXYXNvbiBUZWNobm9sb2d5LCBMTENcclxuLy9cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy9cclxuLy8gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbi8vXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRleHQuUmVndWxhckV4cHJlc3Npb25zO1xyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnM7XHJcblxyXG5uYW1lc3BhY2UgUm9ib3RSYWNvbnRldXJXZWJcclxue1xyXG4gICAgcHVibGljIGludGVyZmFjZSBEeW5hbWljU2VydmljZUZhY3RvcnlcclxuICAgIHtcclxuICAgICAgICBTZXJ2aWNlRmFjdG9yeSBDcmVhdGVTZXJ2aWNlRmFjdG9yeShzdHJpbmcgZGVmLCBDbGllbnRDb250ZXh0IGNvbnRleHQpO1xyXG4gICAgICAgIFNlcnZpY2VGYWN0b3J5W10gQ3JlYXRlU2VydmljZUZhY3RvcmllcyhzdHJpbmdbXSBkZWYsIENsaWVudENvbnRleHQgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFNlcnZpY2VGYWN0b3J5XHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBTZXJ2aWNlRGVmaW5pdGlvbiBzZGVmID0gbnVsbDtcclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgUm9ib3RSYWNvbnRldXJOb2RlIG5vZGU7XHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IENsaWVudENvbnRleHQgY29udGV4dDtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcnZpY2VGYWN0b3J5KFJvYm90UmFjb250ZXVyTm9kZSBub2RlID0gbnVsbCwgQ2xpZW50Q29udGV4dCBjb250ZXh0ID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChub2RlICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUgPSBSb2JvdFJhY29udGV1ck5vZGUucztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlRGVmaW5pdGlvbiBTZXJ2aWNlRGVmKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzZGVmID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNkZWYgPSBuZXcgU2VydmljZURlZmluaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHNkZWYuRnJvbVN0cmluZyhEZWZTdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNkZWY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlbW92ZVBhdGgoc3RyaW5nIHBhdGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZmluaXRpb25VdGlsLlNwbGl0UXVhbGlmaWVkTmFtZShwYXRoKS5JdGVtMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbXBhcmVOYW1lc3BhY2Uoc3RyaW5nIHF1YWxpZmllZF90eXBlbmFtZSwgb3V0IHN0cmluZyB0eXBlbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzID0gU2VydmljZURlZmluaXRpb25VdGlsLlNwbGl0UXVhbGlmaWVkTmFtZShxdWFsaWZpZWRfdHlwZW5hbWUpO1xyXG4gICAgICAgICAgICB0eXBlbmFtZSA9IHMuSXRlbTI7XHJcbiAgICAgICAgICAgIHJldHVybiBzLkl0ZW0xID09IEdldFNlcnZpY2VOYW1lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3Qgc3RyaW5nIERlZlN0cmluZygpO1xyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSBQYWNrU3RydWN0dXJlKG9iamVjdCBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIHR5cGVuYW1lO1xyXG4gICAgICAgICAgICBpZiAoQ29tcGFyZU5hbWVzcGFjZShTZXJ2aWNlRGVmaW5pdGlvblV0aWwuRmluZFN0cnVjdFJSVHlwZShzLkdldFR5cGUoKSksIG91dCB0eXBlbmFtZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBGaW5kU3RydWN0dXJlU3R1Yih0eXBlbmFtZSkuUGFja1N0cnVjdHVyZShzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLlBhY2tTdHJ1Y3R1cmUocywgY29udGV4dCk7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFQgVW5wYWNrU3RydWN0dXJlPFQ+KE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgdHlwZW5hbWU7XHJcbiAgICAgICAgICAgIGlmIChDb21wYXJlTmFtZXNwYWNlKGwuVHlwZSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChUKUZpbmRTdHJ1Y3R1cmVTdHViKHR5cGVuYW1lKS5VbnBhY2tTdHJ1Y3R1cmU8VD4obCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5VbnBhY2tTdHJ1Y3R1cmU8VD4obCxjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IElTdHJ1Y3R1cmVTdHViIEZpbmRTdHJ1Y3R1cmVTdHViKHN0cmluZyBvYmplY3R0eXBlKTtcclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgSVBvZFN0dWIgRmluZFBvZFN0dWIoc3RyaW5nIG9iamVjdHR5cGUpO1xyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBJTmFtZWRBcnJheVN0dWIgRmluZE5hbWVkQXJyYXlTdHViKHN0cmluZyBvYmplY3R0eXBlKTtcclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgU2VydmljZVN0dWIgQ3JlYXRlU3R1YihzdHJpbmcgb2JqZWN0dHlwZSwgc3RyaW5nIHBhdGgsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyBleHRkZWYgPSBTZXJ2aWNlRGVmaW5pdGlvblV0aWwuU3BsaXRRdWFsaWZpZWROYW1lKG9iamVjdHR5cGUpLkl0ZW0xO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZGVmID09IHRoaXMuR2V0U2VydmljZU5hbWUoKSkgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIHNlcnZpY2UgZmFjdG9yeSByZXF1ZXN0XCIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZXh0ID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLkdldFNlcnZpY2VUeXBlKGV4dGRlZikuQ3JlYXRlU3R1YihvYmplY3R0eXBlLCBwYXRoLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuR2V0UHVsbGVkU2VydmljZVR5cGUoZXh0ZGVmKS5DcmVhdGVTdHViKG9iamVjdHR5cGUsIHBhdGgsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnRQb2RBcnJheSBQYWNrUG9kVG9BcnJheTxUPihyZWYgVCBzKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgdHlwZW5hbWU7XHJcbiAgICAgICAgICAgIGlmIChDb21wYXJlTmFtZXNwYWNlKFNlcnZpY2VEZWZpbml0aW9uVXRpbC5GaW5kU3RydWN0UlJUeXBlKHMuR2V0VHlwZSgpKSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoUG9kU3R1YjxUPilGaW5kUG9kU3R1Yih0eXBlbmFtZSkpLlBhY2tQb2RUb0FycmF5KHJlZiBzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLlBhY2tQb2RUb0FycmF5PFQ+KHJlZiBzLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFQgVW5wYWNrUG9kRnJvbUFycmF5PFQ+KE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkgbCkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIHR5cGVuYW1lO1xyXG4gICAgICAgICAgICBpZiAoQ29tcGFyZU5hbWVzcGFjZShsLlR5cGUsIG91dCB0eXBlbmFtZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoKFBvZFN0dWI8VD4pRmluZFBvZFN0dWIodHlwZW5hbWUpKS5VbnBhY2tQb2RGcm9tQXJyYXkobCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5VbnBhY2tQb2RGcm9tQXJyYXk8VD4obCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRWxlbWVudFBvZEFycmF5IFBhY2tQb2RBcnJheTxUPihUW10gcykgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIHR5cGVuYW1lO1xyXG4gICAgICAgICAgICBpZiAoQ29tcGFyZU5hbWVzcGFjZShTZXJ2aWNlRGVmaW5pdGlvblV0aWwuRmluZFN0cnVjdFJSVHlwZShzLkdldFR5cGUoKS5HZXRFbGVtZW50VHlwZSgpKSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoUG9kU3R1YjxUPilGaW5kUG9kU3R1Yih0eXBlbmFtZSkpLlBhY2tQb2RBcnJheShzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLlBhY2tQb2RBcnJheTxUPihzLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRbXSBVbnBhY2tQb2RBcnJheTxUPihNZXNzYWdlRWxlbWVudFBvZEFycmF5IGwpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyB0eXBlbmFtZTtcclxuICAgICAgICAgICAgaWYgKENvbXBhcmVOYW1lc3BhY2UobC5UeXBlLCBvdXQgdHlwZW5hbWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKChQb2RTdHViPFQ+KUZpbmRQb2RTdHViKHR5cGVuYW1lKSkuVW5wYWNrUG9kQXJyYXkobCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5VbnBhY2tQb2RBcnJheTxUPihsLGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnRQb2RNdWx0aURpbUFycmF5IFBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KFBvZE11bHRpRGltQXJyYXkgcykgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIHR5cGVuYW1lO1xyXG4gICAgICAgICAgICBpZiAoQ29tcGFyZU5hbWVzcGFjZShTZXJ2aWNlRGVmaW5pdGlvblV0aWwuRmluZFN0cnVjdFJSVHlwZShzLnBvZF9hcnJheS5HZXRUeXBlKCkuR2V0RWxlbWVudFR5cGUoKSksIG91dCB0eXBlbmFtZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoKFBvZFN0dWI8VD4pRmluZFBvZFN0dWIodHlwZW5hbWUpKS5QYWNrUG9kTXVsdGlEaW1BcnJheShzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLlBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KHMsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUG9kTXVsdGlEaW1BcnJheSBVbnBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KE1lc3NhZ2VFbGVtZW50UG9kTXVsdGlEaW1BcnJheSBsKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgdHlwZW5hbWU7XHJcbiAgICAgICAgICAgIGlmIChDb21wYXJlTmFtZXNwYWNlKGwuVHlwZSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoUG9kU3R1YjxUPilGaW5kUG9kU3R1Yih0eXBlbmFtZSkpLlVucGFja1BvZE11bHRpRGltQXJyYXkobCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5VbnBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KGwsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFBhY2tQb2Qob2JqZWN0IHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUeXBlIHQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgczEgPSBzIGFzIFBvZE11bHRpRGltQXJyYXk7XHJcbiAgICAgICAgICAgIGlmIChzMSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0ID0gczEucG9kX2FycmF5LkdldFR5cGUoKS5HZXRFbGVtZW50VHlwZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMyID0gcyBhcyBBcnJheTtcclxuICAgICAgICAgICAgICAgIGlmIChzMiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHQgPSBzMi5HZXRUeXBlKCkuR2V0RWxlbWVudFR5cGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0ID0gcy5HZXRUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgdHlwZW5hbWU7XHJcbiAgICAgICAgICAgIGlmIChDb21wYXJlTmFtZXNwYWNlKFNlcnZpY2VEZWZpbml0aW9uVXRpbC5GaW5kU3RydWN0UlJUeXBlKHQpLCBvdXQgdHlwZW5hbWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmluZFBvZFN0dWIodHlwZW5hbWUpLlBhY2tQb2Qocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5QYWNrUG9kKHMsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFVucGFja1BvZChvYmplY3QgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyB0eXBlbmFtZTtcclxuICAgICAgICAgICAgaWYgKENvbXBhcmVOYW1lc3BhY2UoTWVzc2FnZUVsZW1lbnRVdGlsLkdldE1lc3NhZ2VFbGVtZW50RGF0YVR5cGVTdHJpbmcobSksIG91dCB0eXBlbmFtZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBGaW5kUG9kU3R1Yih0eXBlbmFtZSkuVW5wYWNrUG9kKG0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuVW5wYWNrUG9kKG0sY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vbmFtZWRhcnJheVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IFBhY2tOYW1lZEFycmF5VG9BcnJheTxUPihyZWYgVCBzKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgdHlwZW5hbWU7XHJcbiAgICAgICAgICAgIGlmIChDb21wYXJlTmFtZXNwYWNlKFNlcnZpY2VEZWZpbml0aW9uVXRpbC5GaW5kU3RydWN0UlJUeXBlKHMuR2V0VHlwZSgpKSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoSU5hbWVkQXJyYXlTdHViPFQ+KUZpbmROYW1lZEFycmF5U3R1Yih0eXBlbmFtZSkpLlBhY2tOYW1lZEFycmF5U3RydWN0VG9BcnJheShyZWYgcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5QYWNrTmFtZWRBcnJheVRvQXJyYXk8VD4ocmVmIHMsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVCBVbnBhY2tOYW1lZEFycmF5RnJvbUFycmF5PFQ+KE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSBsKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgdHlwZW5hbWU7XHJcbiAgICAgICAgICAgIGlmIChDb21wYXJlTmFtZXNwYWNlKGwuVHlwZSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoSU5hbWVkQXJyYXlTdHViPFQ+KUZpbmROYW1lZEFycmF5U3R1Yih0eXBlbmFtZSkpLlVucGFja05hbWVkQXJyYXlTdHJ1Y3RGcm9tQXJyYXkobCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5VbnBhY2tOYW1lZEFycmF5RnJvbUFycmF5PFQ+KGwsY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRWxlbWVudE5hbWVkQXJyYXkgUGFja05hbWVkQXJyYXk8VD4oVFtdIHMpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyB0eXBlbmFtZTtcclxuICAgICAgICAgICAgaWYgKENvbXBhcmVOYW1lc3BhY2UoU2VydmljZURlZmluaXRpb25VdGlsLkZpbmRTdHJ1Y3RSUlR5cGUocy5HZXRUeXBlKCkuR2V0RWxlbWVudFR5cGUoKSksIG91dCB0eXBlbmFtZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoKElOYW1lZEFycmF5U3R1YjxUPilGaW5kTmFtZWRBcnJheVN0dWIodHlwZW5hbWUpKS5QYWNrTmFtZWRBcnJheShzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLlBhY2tOYW1lZEFycmF5PFQ+KHMsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVFtdIFVucGFja05hbWVkQXJyYXk8VD4oTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IGwpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyB0eXBlbmFtZTtcclxuICAgICAgICAgICAgaWYgKENvbXBhcmVOYW1lc3BhY2UobC5UeXBlLCBvdXQgdHlwZW5hbWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKChJTmFtZWRBcnJheVN0dWI8VD4pRmluZE5hbWVkQXJyYXlTdHViKHR5cGVuYW1lKSkuVW5wYWNrTmFtZWRBcnJheShsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLlVucGFja05hbWVkQXJyYXk8VD4obCxjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5IFBhY2tOYW1lZE11bHRpRGltQXJyYXk8VD4oTmFtZWRNdWx0aURpbUFycmF5IHMpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyB0eXBlbmFtZTtcclxuICAgICAgICAgICAgaWYgKENvbXBhcmVOYW1lc3BhY2UoU2VydmljZURlZmluaXRpb25VdGlsLkZpbmRTdHJ1Y3RSUlR5cGUocy5uYW1lZGFycmF5X2FycmF5LkdldFR5cGUoKS5HZXRFbGVtZW50VHlwZSgpKSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoSU5hbWVkQXJyYXlTdHViPFQ+KUZpbmROYW1lZEFycmF5U3R1Yih0eXBlbmFtZSkpLlBhY2tOYW1lZE11bHRpRGltQXJyYXkocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5QYWNrTmFtZWRNdWx0aURpbUFycmF5PFQ+KHMsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTmFtZWRNdWx0aURpbUFycmF5IFVucGFja05hbWVkTXVsdGlEaW1BcnJheTxUPihNZXNzYWdlRWxlbWVudE5hbWVkTXVsdGlEaW1BcnJheSBsKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgdHlwZW5hbWU7XHJcbiAgICAgICAgICAgIGlmIChDb21wYXJlTmFtZXNwYWNlKGwuVHlwZSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoSU5hbWVkQXJyYXlTdHViPFQ+KUZpbmROYW1lZEFycmF5U3R1Yih0eXBlbmFtZSkpLlVucGFja05hbWVkTXVsdGlEaW1BcnJheShsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLlVucGFja05hbWVkTXVsdGlEaW1BcnJheTxUPihsLGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFBhY2tOYW1lZEFycmF5KG9iamVjdCBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVHlwZSB0O1xyXG5cclxuICAgICAgICAgICAgdmFyIHMxID0gcyBhcyBOYW1lZE11bHRpRGltQXJyYXk7XHJcbiAgICAgICAgICAgIGlmIChzMSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0ID0gczEubmFtZWRhcnJheV9hcnJheS5HZXRUeXBlKCkuR2V0RWxlbWVudFR5cGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzMiA9IHMgYXMgQXJyYXk7XHJcbiAgICAgICAgICAgICAgICBpZiAoczIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0ID0gczIuR2V0VHlwZSgpLkdldEVsZW1lbnRUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdCA9IHMuR2V0VHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgc3RyaW5nIHR5cGVuYW1lO1xyXG4gICAgICAgICAgICBpZiAoQ29tcGFyZU5hbWVzcGFjZShTZXJ2aWNlRGVmaW5pdGlvblV0aWwuRmluZFN0cnVjdFJSVHlwZSh0KSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZpbmROYW1lZEFycmF5U3R1Yih0eXBlbmFtZSkuUGFja05hbWVkQXJyYXkocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5QYWNrTmFtZWRBcnJheShzLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBVbnBhY2tOYW1lZEFycmF5KG9iamVjdCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIHR5cGVuYW1lO1xyXG4gICAgICAgICAgICBpZiAoQ29tcGFyZU5hbWVzcGFjZShNZXNzYWdlRWxlbWVudFV0aWwuR2V0TWVzc2FnZUVsZW1lbnREYXRhVHlwZVN0cmluZyhtKSwgb3V0IHR5cGVuYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZpbmROYW1lZEFycmF5U3R1Yih0eXBlbmFtZSkuVW5wYWNrTmFtZWRBcnJheShtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLlVucGFja05hbWVkQXJyYXkobSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFNlcnZpY2VTa2VsIENyZWF0ZVNrZWwoc3RyaW5nIHBhdGgsIG9iamVjdCBvYmosIFNlcnZlckNvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyBvYmplY3R0eXBlID0gU2VydmljZURlZmluaXRpb25VdGlsLkZpbmRPYmplY3RSUlR5cGUob2JqKTtcclxuICAgICAgICAgICAgc3RyaW5nIGV4dGRlZiA9IFNlcnZpY2VEZWZpbml0aW9uVXRpbC5TcGxpdFF1YWxpZmllZE5hbWUob2JqZWN0dHlwZSkuSXRlbTE7XHJcbiAgICAgICAgICAgIGlmIChleHRkZWYgPT0gdGhpcy5HZXRTZXJ2aWNlTmFtZSgpKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgc2VydmljZSBmYWN0b3J5IHJlcXVlc3RcIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbm9kZS5HZXRTZXJ2aWNlVHlwZShleHRkZWYpLkNyZWF0ZVNrZWwocGF0aCwgb2JqLCBjb250ZXh0KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3Qgc3RyaW5nIEdldFNlcnZpY2VOYW1lKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFJvYm90UmFjb250ZXVyRXhjZXB0aW9uIERvd25DYXN0RXhjZXB0aW9uKFJvYm90UmFjb250ZXVyRXhjZXB0aW9uIGV4cClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWV4cC5FcnJvci5Db250YWlucyhcIi5cIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBTZXJ2aWNlRmFjdG9yeSBmID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IFNlcnZpY2VEZWZpbml0aW9uVXRpbC5TcGxpdFF1YWxpZmllZE5hbWUoZXhwLkVycm9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGV4dC5UcnlHZXRQdWxsZWRTZXJ2aWNlVHlwZShzLkl0ZW0xLCBvdXQgZikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbm9kZS5UcnlHZXRTZXJ2aWNlVHlwZShzLkl0ZW0xLCBvdXQgZikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGY9PW51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZi5Eb3duQ2FzdEV4Y2VwdGlvbihleHApOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFBhY2tNYXBUeXBlPEssIFQ+KG9iamVjdCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuUGFja01hcFR5cGU8SywgVD4obywgY29udGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgUGFja0xpc3RUeXBlPFQ+KG9iamVjdCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuUGFja0xpc3RUeXBlPFQ+KG8sIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFBhY2tNdWx0aURpbUFycmF5KE11bHRpRGltQXJyYXkgbXVsdGlEaW1BcnJheSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLlBhY2tNdWx0aURpbUFycmF5KG11bHRpRGltQXJyYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFBhY2tWYXJUeXBlKG9iamVjdCBwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuUGFja1ZhclR5cGUocCwgY29udGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgVW5wYWNrTWFwVHlwZTxLLCBUPihvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLlVucGFja01hcFR5cGU8SywgVD4obywgY29udGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgVW5wYWNrTGlzdFR5cGU8VD4ob2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZS5VbnBhY2tMaXN0VHlwZTxUPihvLCBjb250ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIE11bHRpRGltQXJyYXkgVW5wYWNrTXVsdGlEaW1BcnJheShNZXNzYWdlRWxlbWVudE11bHRpRGltQXJyYXkgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLlVucGFja011bHRpRGltQXJyYXkobyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgVW5wYWNrVmFyVHlwZShNZXNzYWdlRWxlbWVudCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuVW5wYWNrVmFyVHlwZShvLCBjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufSIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBSb2JvdFJhY29udGV1cldlYi5FeHRlbnNpb25zO1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbntcclxuXHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFNlcnZpY2VTa2VsXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlU2tlbChzdHJpbmcgcyxPYmplY3QgbyxTZXJ2ZXJDb250ZXh0IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtX1NlcnZpY2VQYXRoID0gcztcclxuICAgICAgICAgICAgbV9jb250ZXh0ID0gYztcclxuICAgICAgICAgICAgdW5jYXN0b2JqID0gbyA7XHJcbiAgICAgICAgICAgIGlmIChvID09IG51bGwpIHRocm93IG5ldyBOdWxsUmVmZXJlbmNlRXhjZXB0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICBycl9ub2RlID0gYy5ub2RlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgUmVnaXN0ZXJFdmVudHMobyk7XHJcbiAgICAgICAgICAgIEluaXRQaXBlU2VydmVycyhvKTtcclxuICAgICAgICAgICAgSW5pdENhbGxiYWNrU2VydmVycyhvKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBSb2JvdFJhY29udGV1ck5vZGUgcnJfbm9kZTtcclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgcmVhZG9ubHkgQ2xpZW50Q29udGV4dCBycl9jb250ZXh0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBJbml0Q2FsbGJhY2tTZXJ2ZXJzKG9iamVjdCBvKVxyXG4gICAgICAgIHsgfVxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTZXJ2aWNlUGF0aCB7IGdldCB7IHJldHVybiBtX1NlcnZpY2VQYXRoOyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgc3RyaW5nIG1fU2VydmljZVBhdGg7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2ZXJDb250ZXh0IFJSQ29udGV4dCB7IGdldCB7IHJldHVybiBtX2NvbnRleHQ7IH0gfVxyXG4gICAgICAgIHByb3RlY3RlZCBTZXJ2ZXJDb250ZXh0IG1fY29udGV4dDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIG9iamVjdCB1bmNhc3RvYmo7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgVW5jYXN0T2JqZWN0IHsgZ2V0IHsgcmV0dXJuIHVuY2FzdG9iajsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBUYXNrPE1lc3NhZ2VFbnRyeT4gQ2FsbEdldFByb3BlcnR5KE1lc3NhZ2VFbnRyeSBtKTtcclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBUYXNrPE1lc3NhZ2VFbnRyeT4gQ2FsbFNldFByb3BlcnR5KE1lc3NhZ2VFbnRyeSBtKTtcclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsRnVuY3Rpb24oTWVzc2FnZUVudHJ5IG0pO1xyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgVGFzazxvYmplY3Q+IEdldFN1Yk9iaihzdHJpbmcgbmFtZSwgc3RyaW5nIGluZCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUYXNrPG9iamVjdD4gR2V0U3ViT2JqKHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nW10gczEgPSBuYW1lLlNwbGl0KG5ldyBjaGFyW10geyAnWycgfSk7XHJcbiAgICAgICAgICAgIGlmIChzMS5MZW5ndGggPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldFN1Yk9iaihuYW1lLCBcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmluZyBpbmQ9IFJSVXJpRXh0ZW5zaW9ucy5VbmVzY2FwZURhdGFTdHJpbmcoIHMxWzFdLlJlcGxhY2UoXCJdXCIsXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldFN1Yk9iaihzMVswXSwgaW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBSZWdpc3RlckV2ZW50cyhPYmplY3Qgb2JqMSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKG9iajEgaXMgSVJvYm90UmFjb250ZXVyU2VydmljZU9iamVjdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSVJvYm90UmFjb250ZXVyU2VydmljZU9iamVjdCBvYmoyID0gKElSb2JvdFJhY29udGV1clNlcnZpY2VPYmplY3Qpb2JqMTtcclxuICAgICAgICAgICAgICAgIG9iajIuUm9ib3RSYWNvbnRldXJPYmpSZWZDaGFuZ2VkICs9IE9ialJlZkNoYW5nZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgVW5yZWdpc3RlckV2ZW50cyhPYmplY3Qgb2JqMSkge1xyXG4gICAgICAgICAgICBpZiAob2JqMSBpcyBJUm9ib3RSYWNvbnRldXJTZXJ2aWNlT2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBJUm9ib3RSYWNvbnRldXJTZXJ2aWNlT2JqZWN0IG9iajIgPSAoSVJvYm90UmFjb250ZXVyU2VydmljZU9iamVjdClvYmoxO1xyXG4gICAgICAgICAgICAgICAgb2JqMi5Sb2JvdFJhY29udGV1ck9ialJlZkNoYW5nZWQgLT0gT2JqUmVmQ2hhbmdlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBJbml0UGlwZVNlcnZlcnMoT2JqZWN0IG9iajEpIHsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBPYmpSZWZDaGFuZ2VkKHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIHBhdGggPSBTZXJ2aWNlUGF0aCArIFwiLlwiICsgbmFtZTtcclxuICAgICAgICAgICAgUlJDb250ZXh0LlJlcGxhY2VPYmplY3QocGF0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZW5kRXZlbnQoTWVzc2FnZUVudHJ5IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtLlNlcnZpY2VQYXRoID0gU2VydmljZVBhdGg7XHJcbiAgICAgICAgICAgIFJSQ29udGV4dC5TZW5kRXZlbnQobSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZWxlYXNlT2JqZWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVucmVnaXN0ZXJFdmVudHModW5jYXN0b2JqKTtcclxuICAgICAgICAgICAgdW5jYXN0b2JqID0gbnVsbDtcclxuICAgICAgICAgICAgbV9jb250ZXh0ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCB2b2lkIFJlbGVhc2VDYXN0T2JqZWN0KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIFNlbmRQaXBlTWVzc2FnZShNZXNzYWdlRW50cnkgbSwgRW5kcG9pbnQgZSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbS5TZXJ2aWNlUGF0aCA9IFNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICBhd2FpdCBSUkNvbnRleHQuU2VuZE1lc3NhZ2UobSwgZSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIFNlbmRXaXJlTWVzc2FnZShNZXNzYWdlRW50cnkgbSwgRW5kcG9pbnQgZSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbS5TZXJ2aWNlUGF0aCA9IFNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICBhd2FpdCBSUkNvbnRleHQuU2VuZE1lc3NhZ2UobSwgZSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgRGlzcGF0Y2hQaXBlTWVzc2FnZShNZXNzYWdlRW50cnkgbSwgRW5kcG9pbnQgZSkgeyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgRGlzcGF0Y2hXaXJlTWVzc2FnZShNZXNzYWdlRW50cnkgbSwgRW5kcG9pbnQgZSkgeyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsUGlwZUZ1bmN0aW9uKE1lc3NhZ2VFbnRyeSBtLCBFbmRwb2ludCBlKSB7IHRocm93IG5ldyBNZW1iZXJOb3RGb3VuZEV4Y2VwdGlvbihcIlBpcGUgXCIgKyBtLk1lbWJlck5hbWUgKyBcIiBub3QgZm91bmRcIik7IH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgVGFzazxNZXNzYWdlRW50cnk+IENhbGxXaXJlRnVuY3Rpb24oTWVzc2FnZUVudHJ5IG0sIEVuZHBvaW50IGUpIHsgdGhyb3cgbmV3IE1lbWJlck5vdEZvdW5kRXhjZXB0aW9uKFwiV2lyZSBcIiArIG0uTWVtYmVyTmFtZSArIFwiIG5vdCBmb3VuZFwiKTsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgR2V0Q2FsbGJhY2tGdW5jdGlvbih1aW50IGVuZHBvaW50LCBzdHJpbmcgbWVtYmVybmFtZSkgeyB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJDYWxsYmFjayBcIiArIG1lbWJlcm5hbWUgKyBcIiBub3QgZm91bmRcIik7IH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgVGFzazxNZXNzYWdlRW50cnk+IENhbGxNZW1vcnlGdW5jdGlvbihNZXNzYWdlRW50cnkgbSwgRW5kcG9pbnQgZSkgeyB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJNZW1vcnkgXCIgKyBtLk1lbWJlck5hbWUgKyBcIiBub3QgZm91bmRcIik7IH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgU2VydmVyQ29udGV4dC5PYmplY3RMb2NrIG9iamVjdGxvY2s7XHJcblxyXG4gICAgICAgIGludGVybmFsIFNlcnZlckNvbnRleHQuTW9uaXRvck9iamVjdFNrZWwgbW9uaXRvcmxvY2s7XHJcblxyXG4gICAgICAgIGludGVybmFsIERpY3Rpb25hcnk8dWludCwgU2VydmVyQ29udGV4dC5Nb25pdG9yT2JqZWN0U2tlbD4gbW9uaXRvcmxvY2tzID0gbmV3IERpY3Rpb25hcnk8dWludCwgU2VydmVyQ29udGV4dC5Nb25pdG9yT2JqZWN0U2tlbD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNMb2NrZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0bG9jayA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0bG9jay5Jc0xvY2tlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNNb25pdG9yTG9ja2VkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vbml0b3Jsb2NrID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtb25pdG9ybG9jay5Jc0xvY2tlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIERpY3Rpb25hcnk8aW50LCBHZW5lcmF0b3JTZXJ2ZXJCYXNlPiBnZW5lcmF0b3JzID0gbmV3IERpY3Rpb25hcnk8aW50LCBHZW5lcmF0b3JTZXJ2ZXJCYXNlPigpO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaW50IEdldE5ld0dlbmVyYXRvckluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBpbmRleDtcclxuICAgICAgICAgICAgUmFuZG9tIHIgPSBuZXcgUmFuZG9tKCk7XHJcbiAgICAgICAgICAgIGRvXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gci5OZXh0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2hpbGUgKGdlbmVyYXRvcnMuQ29udGFpbnNLZXkoaW5kZXgpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgYXN5bmMgVGFzazxNZXNzYWdlRW50cnk+IENhbGxHZW5lcmF0b3JOZXh0KE1lc3NhZ2VFbnRyeSBtLCBFbmRwb2ludCBlcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBpbmRleCA9IG0uRmluZEVsZW1lbnQoXCJpbmRleFwiKS5DYXN0RGF0YTxpbnRbXT4oKVswXTtcclxuICAgICAgICAgICAgR2VuZXJhdG9yU2VydmVyQmFzZSBnZW47XHJcbiAgICAgICAgICAgIGxvY2soZ2VuZXJhdG9ycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIWdlbmVyYXRvcnMuVHJ5R2V0VmFsdWUoaW5kZXgsIG91dCBnZW4pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBnZW5lcmF0b3JcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBnZW4ubGFzdF9hY2Nlc3NfdGltZSA9IERhdGVUaW1lLlV0Y05vdzsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChnZW4uRW5kcG9pbnQgIT0gZXAuTG9jYWxFbmRwb2ludClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIGdlbmVyYXRvclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZ2VuLkNhbGxOZXh0KG0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW50ZXJmYWNlIFNlcnZpY2VTa2VsRHluYW1pY1xyXG4gICAge1xyXG4gICAgICAgIHN0cmluZyBHZXRPYmplY3RUeXBlKCk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICAgICAgXHJcbiAgICBwdWJsaWMgY2xhc3MgU2VydmVyQ29udGV4dCBcclxuICAge1xyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PHN0cmluZywgb2JqZWN0PiBBdHRyaWJ1dGVzID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBvYmplY3Q+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlRmFjdG9yeSBTZXJ2aWNlRGVmIHsgZ2V0IHsgcmV0dXJuIG1fU2VydmljZURlZjsgfSB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvdGVjdGVkIFNlcnZpY2VGYWN0b3J5IG1fU2VydmljZURlZjtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTZXJ2aWNlTmFtZSB7IGdldCB7IHJldHVybiBtX1NlcnZpY2VOYW1lOyB9IH1cclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgc3RyaW5nIG1fU2VydmljZU5hbWU7XHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VTa2VsPiBza2VscyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZVNrZWw+KCk7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBEaWN0aW9uYXJ5PHVpbnQsIFNlcnZlckVuZHBvaW50PiBjbGllbnRfZW5kcG9pbnRzID0gbmV3IERpY3Rpb25hcnk8dWludCwgU2VydmVyRW5kcG9pbnQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUm9vdE9iamVjdFR5cGUgeyBnZXQgeyByZXR1cm4gbV9Sb290T2JqZWN0VHlwZTsgfSB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzdHJpbmcgbV9Sb290T2JqZWN0VHlwZT0gXCJcIjtcclxuICAgICAgIFxyXG4gICAgICBcclxuXHJcbiAgICAgICBcclxuXHJcbiAgICAgICAgLypwdWJsaWMgTWVzc2FnZSBTZW5kUmVxdWVzdChNZXNzYWdlIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9Ki9cclxuXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCByZWFkb25seSBSb2JvdFJhY29udGV1ck5vZGUgbm9kZTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIENhbmNlbGxhdGlvblRva2VuU291cmNlIGNhbmNlbF9zb3VyY2UgPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKTsgICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgU2VydmVyQ29udGV4dChTZXJ2aWNlRmFjdG9yeSBmLCBSb2JvdFJhY29udGV1ck5vZGUgbm9kZT1udWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbV9TZXJ2aWNlRGVmID0gZjtcclxuICAgICAgICAgICAgaWYgKG5vZGUgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IFJvYm90UmFjb250ZXVyTm9kZS5zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbm9vcD1QZXJpb2RpY1Rhc2suUnVuKChBY3Rpb24pUGVyaW9kaWNDbGVhbnVwVGFzaywgVGltZVNwYW4uRnJvbVNlY29uZHMoNSksIGNhbmNlbF9zb3VyY2UuVG9rZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgVGFzayBTZW5kRXZlbnQoTWVzc2FnZUVudHJ5IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIE1lc3NhZ2UgbW0gPSBuZXcgTWVzc2FnZSgpO1xyXG5cclxuICAgICAgICAgICAgU2VydmVyRW5kcG9pbnRbXSBjYztcclxuICAgICAgICAgICAgbG9jayAoY2xpZW50X2VuZHBvaW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8U2VydmVyRW5kcG9pbnQ+KGNsaWVudF9lbmRwb2ludHMuVmFsdWVzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKFNlcnZlckVuZHBvaW50IGMgaW4gY2MpXHJcbiAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChSZXF1aXJlVmFsaWRVc2VyKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoYy5BdXRoZW50aWNhdGVkVXNlcm5hbWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuQ2hlY2tDb25uZWN0aW9uKGMuTG9jYWxFbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNlbmRNZXNzYWdlKG0sIGMsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5Db250aW51ZVdpdGgoKEFjdGlvbjxUYXNrPikoZGVsZWdhdGUoVGFzayB0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQuRXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUhPW51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZW1vdmVDbGllbnQoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3ZlQ2xpZW50KGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDxpbnQ+KDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyB2aXJ0dWFsIFRhc2sgU2VuZE1lc3NhZ2UoTWVzc2FnZUVudHJ5IG0sIEVuZHBvaW50IGUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgLy9tLlNlcnZpY2VQYXRoID0gU2VydmljZU5hbWU7XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlIG1tID0gbmV3IE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgbW0uaGVhZGVyID0gbmV3IE1lc3NhZ2VIZWFkZXIoKTtcclxuICAgICAgICAgICAgLy9tbS5oZWFkZXIuUmVjZWl2ZXJFbmRwb2ludCA9IFJlbW90ZUVuZHBvaW50O1xyXG4gICAgICAgICAgICBtbS5lbnRyaWVzLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IGUuU2VuZE1lc3NhZ2UobW0sIGNhbmNlbCk7XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb2JqZWN0IHJlY19zeW5jID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgYm9vbCBiYXNlX29iamVjdF9zZXQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgU2V0U2VjdXJpdHlQb2xpY3koU2VydmljZVNlY3VyaXR5UG9saWN5IHBvbGljeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzZXJfYXV0aGVudGljYXRvciA9IHBvbGljeS5BdXRoZW50aWNhdG9yO1xyXG4gICAgICAgICAgICBzZWN1cml0eV9wb2xpY2llcyA9IHBvbGljeS5Qb2xpY2llcztcclxuXHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPHN0cmluZz4oc2VjdXJpdHlfcG9saWNpZXMuS2V5cyxcInJlcXVpcmV2YWxpZHVzZXJcIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWN1cml0eV9wb2xpY2llc1tcInJlcXVpcmV2YWxpZHVzZXJcIl0uVG9Mb3dlcigpID09IFwidHJ1ZVwiKSBSZXF1aXJlVmFsaWRVc2VyID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8c3RyaW5nPihzZWN1cml0eV9wb2xpY2llcy5LZXlzLFwiYWxsb3dvYmplY3Rsb2NrXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VjdXJpdHlfcG9saWNpZXNbXCJhbGxvd29iamVjdGxvY2tcIl0uVG9Mb3dlcigpID09IFwidHJ1ZVwiKSBBbGxvd09iamVjdExvY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIFNldEJhc2VPYmplY3Qoc3RyaW5nIG5hbWUsIG9iamVjdCBvLCBTZXJ2aWNlU2VjdXJpdHlQb2xpY3kgcG9saWN5PW51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYmFzZV9vYmplY3Rfc2V0KSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkJhc2Ugb2JqZWN0IGFscmVhZHkgc2V0XCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBvbGljeSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTZXRTZWN1cml0eVBvbGljeShwb2xpY3kpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtX1NlcnZpY2VOYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgU2VydmljZVNrZWwgcyA9IFNlcnZpY2VEZWYuQ3JlYXRlU2tlbChuYW1lLCBvLCB0aGlzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1fUm9vdE9iamVjdFR5cGUgPSBzLkdldFR5cGUoKS5Ub1N0cmluZygpLlJlcGxhY2UoXCJfc2tlbFwiLCBcIlwiKTtcclxuICAgICAgICAgICAgYmFzZV9vYmplY3Rfc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgbG9jayAoc2tlbHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNrZWxzW25hbWVdID0gcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlYWRvbmx5IERpY3Rpb25hcnk8c3RyaW5nLCBUYXNrPFNlcnZpY2VTa2VsPj4gZ2V0X3N1Yl9vYmpfdGFza3MgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFRhc2s8U2VydmljZVNrZWw+PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBhc3luYyBUYXNrPFNlcnZpY2VTa2VsPiBHZXRPYmplY3RTa2VsKHN0cmluZyBzZXJ2aWNlcGF0aClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAvL29iamVjdCBvYmogPSBudWxsO1xyXG4gICAgICAgICAgICBzdHJpbmdbXSBwID0gc2VydmljZXBhdGguU3BsaXQobmV3IGNoYXJbXSB7ICcuJyB9KTtcclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBwcGF0aCA9IHBbMF07XHJcblxyXG4gICAgICAgICAgICBTZXJ2aWNlU2tlbCBza2VsO1xyXG4gICAgICAgICAgICBsb2NrIChza2VscylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2tlbCA9IHNrZWxzW3BwYXRoXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL29iaiA9IHNrZWwudW5jYXN0b2JqO1xyXG5cclxuICAgICAgICAgICAgU2VydmljZVNrZWwgc2tlbDEgPSBza2VsO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBwLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RyaW5nIHBwYXRoMSA9IHBwYXRoO1xyXG4gICAgICAgICAgICAgICAgcHBhdGggPSBTdHJpbmcuSm9pbihcIi5cIiwgbmV3IHN0cmluZ1tdIHsgcHBhdGgsIHBbaV0gfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2tlbDEgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgbG9jayAoc2tlbHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8c3RyaW5nPihza2Vscy5LZXlzLHBwYXRoKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZWwxID0gc2tlbHNbcHBhdGhdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc2tlbDEgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRhc2s8U2VydmljZVNrZWw+IHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKGdldF9zdWJfb2JqX3Rhc2tzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0X3N1Yl9vYmpfdGFza3MuQ29udGFpbnNLZXkocHBhdGgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBnZXRfc3ViX29ial90YXNrc1twcGF0aF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IEdldE9iamVjdFNrZWwyKHBwYXRoMSwgcFtpXSwgc2tlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3N1Yl9vYmpfdGFza3MuQWRkKHBwYXRoLCB0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZWwxID0gYXdhaXQgdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxseVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jayAoZ2V0X3N1Yl9vYmpfdGFza3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRfc3ViX29ial90YXNrcy5Db250YWluc0tleShwcGF0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3N1Yl9vYmpfdGFza3MuUmVtb3ZlKHBwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBza2VsID0gc2tlbDE7XHJcbiAgICAgICAgICAgIH0gICAgICBcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBza2VsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXN5bmMgVGFzazxTZXJ2aWNlU2tlbD4gR2V0T2JqZWN0U2tlbDIoc3RyaW5nIHBwYXRoMSwgc3RyaW5nIG9iam5hbWUsIFNlcnZpY2VTa2VsIHNrZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtX0N1cnJlbnRTZXJ2aWNlUGF0aCA9IHBwYXRoMTtcclxuICAgICAgICAgICAgbV9DdXJyZW50U2VydmVyQ29udGV4dCA9IHRoaXM7XHJcbiAgICAgICAgICAgIG9iamVjdCBvYmoxID0gYXdhaXQgc2tlbC5HZXRTdWJPYmoob2JqbmFtZSk7XHJcbiAgICAgICAgICAgIG1fQ3VycmVudFNlcnZpY2VQYXRoID0gbnVsbDtcclxuICAgICAgICAgICAgbV9DdXJyZW50U2VydmVyQ29udGV4dCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHBhdGggPSBTdHJpbmcuSm9pbihcIi5cIiwgbmV3IHN0cmluZ1tdIHsgcHBhdGgxLCBvYmpuYW1lfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2tlbDEgPSBTZXJ2aWNlRGVmLkNyZWF0ZVNrZWwocHBhdGgsIG9iajEsIHRoaXMpO1xyXG4gICAgICAgICAgICBpZiAoc2tlbC5vYmplY3Rsb2NrICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNrZWwub2JqZWN0bG9jay5BZGRTa2VsKHNrZWwxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBza2Vsc1twcGF0aF0gPSBza2VsMTtcclxuICAgICAgICAgICAgcmV0dXJuIHNrZWwxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBSZXBsYWNlT2JqZWN0KHN0cmluZyBwYXRoKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIFJlbGVhc2VTZXJ2aWNlUGF0aChwYXRoKTtcclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgYXN5bmMgVGFzazxzdHJpbmc+IEdldE9iamVjdFR5cGUoc3RyaW5nIHNlcnZpY2VwYXRoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFNlcnZpY2VTa2VsIHMgPSBhd2FpdCBHZXRPYmplY3RTa2VsKHNlcnZpY2VwYXRoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzIGlzIFNlcnZpY2VTa2VsRHluYW1pYylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoU2VydmljZVNrZWxEeW5hbWljKXMpLkdldE9iamVjdFR5cGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUmVnZXguUmVwbGFjZShzLkdldFR5cGUoKS5Ub1N0cmluZygpLCBcIl9za2VsXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBTZXJ2ZXJDb250ZXh0IEN1cnJlbnRTZXJ2ZXJDb250ZXh0IHtnZXQge3JldHVybiBtX0N1cnJlbnRTZXJ2ZXJDb250ZXh0O319XHJcbiAgICAgICAgW1RocmVhZFN0YXRpYygpXVxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNlcnZlckNvbnRleHQgbV9DdXJyZW50U2VydmVyQ29udGV4dDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgQ3VycmVudFNlcnZpY2VQYXRoIHtnZXQge3JldHVybiBtX0N1cnJlbnRTZXJ2aWNlUGF0aDt9fVxyXG4gICAgICAgIFtUaHJlYWRTdGF0aWMoKV1cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzdHJpbmcgbV9DdXJyZW50U2VydmljZVBhdGg7XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBhc3luYyBUYXNrPE1lc3NhZ2VFbnRyeT4gUHJvY2Vzc01lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnkgbSwgU2VydmVyRW5kcG9pbnQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vbG9jayAocmVjX3N5bmMpXHJcbiAgICAgICAgICAgIC8ve1xyXG5cclxuICAgICAgICAgICAgYm9vbCBub3JldHVybiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IHJldCA9IG51bGw7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlNlcnZpY2VQYXRoUmVsZWFzZWRSZXQpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQ2xpZW50U2Vzc2lvbk9wIG1ldGhvZHNcclxuICAgICAgICAgICAgICAgICAgICBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5DbGllbnRTZXNzaW9uT3BSZXEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgQ2xpZW50U2Vzc2lvbk9wKG0sIGMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLkNsaWVudEtlZXBBbGl2ZVJlcSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5DbGllbnRLZWVwQWxpdmVSZXQsIG0uTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5SZXF1ZXN0SUQgPSBtLlJlcXVlc3RJRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LlNlcnZpY2VQYXRoID0gbS5TZXJ2aWNlUGF0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlNlcnZpY2VDaGVja0NhcGFiaWxpdHlSZXEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBDaGVja1NlcnZpY2VDYXBhYmlsaXR5KG0sIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoUmVxdWlyZVZhbGlkVXNlcilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTZXJ2ZXJFbmRwb2ludC5DdXJyZW50QXV0aGVudGljYXRlZFVzZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkV4Y2VwdGlvbihcIlVzZXIgbXVzdCBhdXRoZW50aWNhdGUgYmVmb3JlIGFjY2Vzc2luZyB0aGlzIHNlcnZpY2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5QaXBlUGFja2V0IHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuUGlwZVBhY2tldFJldClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChhd2FpdCBHZXRPYmplY3RTa2VsKG0uU2VydmljZVBhdGgpKS5EaXNwYXRjaFBpcGVNZXNzYWdlKG0sIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JldHVybiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5XaXJlUGFja2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGF3YWl0IEdldE9iamVjdFNrZWwobS5TZXJ2aWNlUGF0aCkpLkRpc3BhdGNoV2lyZU1lc3NhZ2UobSwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcmV0dXJuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbV9DdXJyZW50U2VydmljZVBhdGg9bS5TZXJ2aWNlUGF0aDtcclxuICAgICAgICAgICAgICAgICAgICBtX0N1cnJlbnRTZXJ2ZXJDb250ZXh0PXRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vT2JqZWN0IG1lbWJlciBtZXRob2RzXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlByb3BlcnR5R2V0UmVxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VydmljZVNrZWwgc2tlbD1hd2FpdCBHZXRPYmplY3RTa2VsKG0uU2VydmljZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja19sb2NrKHNrZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBhd2FpdCBza2VsLkNhbGxHZXRQcm9wZXJ0eShtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlByb3BlcnR5U2V0UmVxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VydmljZVNrZWwgc2tlbCA9IGF3YWl0IEdldE9iamVjdFNrZWwobS5TZXJ2aWNlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX2xvY2soc2tlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IGF3YWl0IHNrZWwuQ2FsbFNldFByb3BlcnR5KG0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuRnVuY3Rpb25DYWxsUmVxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VydmljZVNrZWwgc2tlbCA9IGF3YWl0IEdldE9iamVjdFNrZWwobS5TZXJ2aWNlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX2xvY2soc2tlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IGF3YWl0IHNrZWwuQ2FsbEZ1bmN0aW9uKG0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuUGlwZUNvbm5lY3RSZXEgfHwgbS5FbnRyeVR5cGU9PU1lc3NhZ2VFbnRyeVR5cGUuUGlwZURpc2Nvbm5lY3RSZXEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlU2tlbCBza2VsID0gYXdhaXQgR2V0T2JqZWN0U2tlbChtLlNlcnZpY2VQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tfbG9jayhza2VsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gYXdhaXQgc2tlbC5DYWxsUGlwZUZ1bmN0aW9uKG0sYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5XaXJlQ29ubmVjdFJlcSB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLldpcmVEaXNjb25uZWN0UmVxIHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBlZWtJblZhbHVlUmVxIHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBlZWtPdXRWYWx1ZVJlcSB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLldpcmVQb2tlT3V0VmFsdWVSZXEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlU2tlbCBza2VsID0gYXdhaXQgR2V0T2JqZWN0U2tlbChtLlNlcnZpY2VQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tfbG9jayhza2VsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gYXdhaXQgc2tlbC5DYWxsV2lyZUZ1bmN0aW9uKG0sIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLk1lbW9yeVdyaXRlIHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5UmVhZCB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLk1lbW9yeUdldFBhcmFtKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VydmljZVNrZWwgc2tlbCA9IGF3YWl0IEdldE9iamVjdFNrZWwobS5TZXJ2aWNlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX2xvY2soc2tlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldD1hd2FpdCBza2VsLkNhbGxNZW1vcnlGdW5jdGlvbihtLCBjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuQ2FsbGJhY2tDYWxsUmV0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29uc29sZS5Xcml0ZUxpbmUoXCJHb3QgXCIgKyBtLlRyYW5zYWN0aW9uSUQgKyBcIiBcIiArIG0uRW50cnlUeXBlICsgXCIgXCIgKyBtLk1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxNZXNzYWdlRW50cnk+IHIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NrIChyZWNfd2FpdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCB0X2lkID0gbS5SZXF1ZXN0SUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjX3dhaXQuQ29udGFpbnNLZXkodF9pZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHJlY193YWl0W3RfaWRdLkl0ZW0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAociAhPSBudWxsKSByLlRyeVNldFJlc3VsdChtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9yZXR1cm4gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLkdlbmVyYXRvck5leHRSZXEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNrZWwgPSBhd2FpdCBHZXRPYmplY3RTa2VsKG0uU2VydmljZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrX2xvY2soc2tlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gYXdhaXQgc2tlbC5DYWxsR2VuZXJhdG9yTmV4dChtLCBjKTtcclxuICAgICAgICAgICAgICAgICAgICBub3JldHVybiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShtLkVudHJ5VHlwZSsxLCBtLk1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvYm90UmFjb250ZXVyRXhjZXB0aW9uVXRpbC5FeGNlcHRpb25Ub01lc3NhZ2VFbnRyeShlLCByZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBtX0N1cnJlbnRTZXJ2aWNlUGF0aD1udWxsO1xyXG4gICAgICAgICAgICAgICAgbV9DdXJyZW50U2VydmVyQ29udGV4dD1udWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXQgPT0gbnVsbCAmJiAhbm9yZXR1cm4gJiYgKGludCltLkVudHJ5VHlwZSAlMiA9PTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShtLkVudHJ5VHlwZSsxLCBtLk1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldC5FcnJvciA9IE1lc3NhZ2VFcnJvclR5cGUuUHJvdG9jb2xFcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICByZXQuQWRkRWxlbWVudChcImVycm9ybmFtZVwiLCBcIlJvYm90UmFjb250ZXVyLlByb3RvY29sRXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJlcnJvcnN0cmluZ1wiLCBcIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFub3JldHVybilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXQuU2VydmljZVBhdGggPSBtLlNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldC5SZXF1ZXN0SUQgPSBtLlJlcXVlc3RJRDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBDbG9zZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYW5jZWxfc291cmNlLkNhbmNlbCgpO1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IGUgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuU2VydmljZUNsb3NlZCwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICBTZW5kRXZlbnQoZSkuSWdub3JlUmVzdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB9O1xyXG5cclxuICAgICAgICAgICAgU2VydmVyRW5kcG9pbnRbXSBlZWEgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8U2VydmVyRW5kcG9pbnQ+KGNsaWVudF9lbmRwb2ludHMuVmFsdWVzKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKFNlcnZlckVuZHBvaW50IGVlIGluIGVlYSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5EZWxldGVFbmRwb2ludChlZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNsaWVudF9lbmRwb2ludHMuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKFNlcnZpY2VTa2VsIHMgaW4gc2tlbHMuVmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzLlJlbGVhc2VPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXIodGhpcywgU2VydmVyU2VydmljZUxpc3RlbmVyRXZlbnRUeXBlLlNlcnZpY2VDbG9zZWQsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIE1lc3NhZ2VSZWNlaXZlZChNZXNzYWdlIG0sIFNlcnZlckVuZHBvaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlUmVjZWl2ZWQyKG0sIGUpLklnbm9yZVJlc3VsdCgpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIGFzeW5jIFRhc2sgTWVzc2FnZVJlY2VpdmVkMihNZXNzYWdlIG0sIFNlcnZlckVuZHBvaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlIG1yZXQgPSBuZXcgTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICBtcmV0LmhlYWRlciA9IG5ldyBNZXNzYWdlSGVhZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRW50cnkgbW0gaW4gbS5lbnRyaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobW0uRXJyb3IgPT0gTWVzc2FnZUVycm9yVHlwZS5JbnZhbGlkRW5kcG9pbnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5SZW1vdmVDbGllbnQoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtbXJldD1hd2FpdCBQcm9jZXNzTWVzc2FnZUVudHJ5KG1tLGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1tcmV0IT1udWxsKVxyXG4gICAgICAgICAgICAgICAgbXJldC5lbnRyaWVzLkFkZChtbXJldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1yZXQuZW50cmllcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIGF3YWl0IGUuU2VuZE1lc3NhZ2UobXJldCxkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIEFkZENsaWVudChTZXJ2ZXJFbmRwb2ludCBjZW5kcG9pbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChjbGllbnRfZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbGllbnRfZW5kcG9pbnRzLkFkZChjZW5kcG9pbnQuTG9jYWxFbmRwb2ludCwgY2VuZHBvaW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXIodGhpcywgU2VydmVyU2VydmljZUxpc3RlbmVyRXZlbnRUeXBlLkNsaWVudENvbm5lY3RlZCwgY2VuZHBvaW50LkxvY2FsRW5kcG9pbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgUmVtb3ZlQ2xpZW50KFNlcnZlckVuZHBvaW50IGNlbmRwb2ludClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAvL1RPRE86IHBvc3NpYmxlIGRlYWRsb2NrXHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgY3VzZXJuYW1lPWNlbmRwb2ludC5BdXRoZW50aWNhdGVkVXNlcm5hbWU7XHJcbiAgICAgICAgICAgIHVpbnQgY2U9Y2VuZHBvaW50LkxvY2FsRW5kcG9pbnQ7XHJcblxyXG4gICAgICAgICAgICBsb2NrIChjbGllbnRfZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbGllbnRfZW5kcG9pbnRzLlJlbW92ZShjZW5kcG9pbnQuTG9jYWxFbmRwb2ludCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZS5EZWxldGVFbmRwb2ludChjZW5kcG9pbnQpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGxvY2sgKENsaWVudExvY2tPcF9sb2Nrb2JqKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBLZXlWYWx1ZVBhaXI8c3RyaW5nLCBPYmplY3RMb2NrPltdIG9vID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PEtleVZhbHVlUGFpcjxzdHJpbmcsU2VydmVyQ29udGV4dC5PYmplY3RMb2NrPj4oYWN0aXZlX29iamVjdF9sb2Nrcyk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChLZXlWYWx1ZVBhaXI8c3RyaW5nLCBPYmplY3RMb2NrPiBvIGluIG9vKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uVmFsdWUuVXNlcm5hbWUgPT0gY3VzZXJuYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5WYWx1ZS5FbmRwb2ludCA9PSBjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLlZhbHVlLlJlbGVhc2VMb2NrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlX29iamVjdF9sb2Nrcy5SZW1vdmUoby5LZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKGNsaWVudF9lbmRwb2ludHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PEtleVZhbHVlUGFpcjx1aW50LFNlcnZlckVuZHBvaW50Pj4oY2xpZW50X2VuZHBvaW50cywoRnVuYzxLZXlWYWx1ZVBhaXI8dWludCxTZXJ2ZXJFbmRwb2ludD4sYm9vbD4pKHggPT4geC5WYWx1ZS5BdXRoZW50aWNhdGVkVXNlcm5hbWUgPT0gY3VzZXJuYW1lKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uVmFsdWUuUmVsZWFzZUxvY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9vYmplY3RfbG9ja3MuUmVtb3ZlKG8uS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXIodGhpcywgU2VydmVyU2VydmljZUxpc3RlbmVyRXZlbnRUeXBlLkNsaWVudERpc2Nvbm5lY3RlZCwgY2VuZHBvaW50LkxvY2FsRW5kcG9pbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgTWVzc2FnZUVsZW1lbnRTdHJ1Y3R1cmUgUGFja1N0cnVjdHVyZShPYmplY3QgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlRGVmLlBhY2tTdHJ1Y3R1cmUocyk7IDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFQgVW5wYWNrU3RydWN0dXJlPFQ+KE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5VbnBhY2tTdHJ1Y3R1cmU8VD4obCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgUGFja01hcFR5cGU8SywgVD4ob2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5QYWNrTWFwVHlwZTxLLCBUPihvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBQYWNrTGlzdFR5cGU8VD4ob2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5QYWNrTGlzdFR5cGU8VD4obyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgUGFja011bHRpRGltQXJyYXkoTXVsdGlEaW1BcnJheSBtdWx0aURpbUFycmF5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2VEZWYuUGFja011bHRpRGltQXJyYXkobXVsdGlEaW1BcnJheSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgUGFja1ZhclR5cGUob2JqZWN0IHApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5QYWNrVmFyVHlwZShwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBVbnBhY2tNYXBUeXBlPEssIFQ+KG9iamVjdCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2VEZWYuVW5wYWNrTWFwVHlwZTxLLCBUPihvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBVbnBhY2tMaXN0VHlwZTxUPihvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlRGVmLlVucGFja0xpc3RUeXBlPFQ+KG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgTXVsdGlEaW1BcnJheSBVbnBhY2tNdWx0aURpbUFycmF5KE1lc3NhZ2VFbGVtZW50TXVsdGlEaW1BcnJheSBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2VEZWYuVW5wYWNrTXVsdGlEaW1BcnJheShvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBVbnBhY2tWYXJUeXBlKE1lc3NhZ2VFbGVtZW50IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5VbnBhY2tWYXJUeXBlKG8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBVc2VyQXV0aGVudGljYXRvciB1c2VyX2F1dGhlbnRpY2F0b3I7XHJcbiAgICAgICAgcHJpdmF0ZSBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPiBzZWN1cml0eV9wb2xpY2llcztcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIFJlcXVpcmVWYWxpZFVzZXI9ZmFsc2U7XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIEFsbG93T2JqZWN0TG9jaz1mYWxzZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBUYXNrPE1lc3NhZ2VFbnRyeT4gQ2xpZW50U2Vzc2lvbk9wKE1lc3NhZ2VFbnRyeSBtLCBTZXJ2ZXJFbmRwb2ludCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHVzZXJfYXV0aGVudGljYXRvciA9PSBudWxsICYmICFtLk1lbWJlck5hbWUuU3RhcnRzV2l0aChcIk1vbml0b3JcIikpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiVXNlciBhdXRoZW50aWNhdGlvbiBub3QgYWN0aXZhdGVkIGZvciB0aGlzIHNlcnZpY2VcIik7XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLkNsaWVudFNlc3Npb25PcFJldCwgbS5NZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgcmV0LlJlcXVlc3RJRCA9IG0uUmVxdWVzdElEO1xyXG4gICAgICAgICAgICByZXQuU2VydmljZVBhdGggPSBtLlNlcnZpY2VQYXRoO1xyXG5cclxuICAgICAgICAgICAgc3RyaW5nIGNvbW1hbmQgPSBtLk1lbWJlck5hbWU7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoY29tbWFuZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkF1dGhlbnRpY2F0ZVVzZXJcIjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyB1c2VybmFtZSA9IG0uRmluZEVsZW1lbnQoXCJ1c2VybmFtZVwiKS5DYXN0RGF0YTxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8c3RyaW5nLCBvYmplY3Q+IGNyZWRlbnRpYWxzID0gKERpY3Rpb25hcnk8c3RyaW5nLG9iamVjdD4pVW5wYWNrTWFwVHlwZTxzdHJpbmcsIG9iamVjdD4obS5GaW5kRWxlbWVudChcImNyZWRlbnRpYWxzXCIpLkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLkF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIGNyZWRlbnRpYWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgXCJPS1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiTG9nb3V0VXNlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5Mb2dvdXRVc2VyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5BZGRFbGVtZW50KFwicmV0dXJuXCIsXCJPS1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJlcXVlc3RPYmplY3RMb2NrXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUmVsZWFzZU9iamVjdExvY2tcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSZXF1ZXN0Q2xpZW50T2JqZWN0TG9ja1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJlbGVhc2VDbGllbnRPYmplY3RMb2NrXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiTW9uaXRvckVudGVyXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiTW9uaXRvckNvbnRpbnVlRW50ZXJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJNb25pdG9yRXhpdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IENsaWVudExvY2tPcChtLCByZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm90b2NvbEV4Y2VwdGlvbihcIkludmFsaWQgQ2xpZW50U2Vzc2lvbk9wIGNvbW1hbmRcIik7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvY29sRXhjZXB0aW9uKFwiRXJyb3IgZXZhbHVhdGluZyBDbGllbnRTZXNzaW9uT3AgY29tbWFuZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBdXRoZW50aWNhdGVkVXNlciBBdXRoZW50aWNhdGVVc2VyKHN0cmluZyB1c2VybmFtZSwgRGljdGlvbmFyeTxzdHJpbmcsIG9iamVjdD4gY3JlZGVudGlhbHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlcl9hdXRoZW50aWNhdG9yLkF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIGNyZWRlbnRpYWxzKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvYmplY3QgQ2xpZW50TG9ja09wX2xvY2tvYmogPSBuZXcgb2JqZWN0KCk7XHJcblxyXG4gICAgICAgIHByaXZhdGUgYXN5bmMgVGFzayBDbGllbnRMb2NrT3AoTWVzc2FnZUVudHJ5IG0sIE1lc3NhZ2VFbnRyeSByZXQpXHJcbiAgICAgICAge1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChtLlNlcnZpY2VQYXRoICE9IFNlcnZpY2VOYW1lKSB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiT25seSBsb2NraW5nIG9mIHJvb3Qgb2JqZWN0IGN1cnJlbnRseSBzdXBwb3J0ZWRcIik7XHJcblxyXG4gICAgICAgICAgICBzdHJpbmdbXSBwcml2ID0gbnVsbDtcclxuICAgICAgICAgICAgc3RyaW5nIHVzZXJuYW1lID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCFtLk1lbWJlck5hbWUuU3RhcnRzV2l0aChcIk1vbml0b3JcIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChTZXJ2ZXJFbmRwb2ludC5DdXJyZW50QXV0aGVudGljYXRlZFVzZXIgPT0gbnVsbCkgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uKFwiVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWQgdG8gbG9jayBvYmplY3RcIik7XHJcbiAgICAgICAgICAgICAgICBwcml2ID0gU2VydmVyRW5kcG9pbnQuQ3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyLlByaXZpbGVnZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShTeXN0ZW0uQXJyYXlFeHRlbnNpb25zLkNvbnRhaW5zPHN0cmluZz4ocHJpdixcIm9iamVjdGxvY2tcIikgfHwgU3lzdGVtLkFycmF5RXh0ZW5zaW9ucy5Db250YWluczxzdHJpbmc+KHByaXYsXCJvYmplY3Rsb2Nrb3ZlcnJpZGVcIikpKSB0aHJvdyBuZXcgT2JqZWN0TG9ja2VkRXhjZXB0aW9uKFwiVXNlciBkb2VzIG5vdCBoYXZlIG9iamVjdCBsb2NraW5nIHByaXZpbGVnZXNcIik7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZSA9IFNlcnZlckVuZHBvaW50LkN1cnJlbnRBdXRoZW50aWNhdGVkVXNlci5Vc2VybmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLlJlcXVpcmVWYWxpZFVzZXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFNlcnZlckVuZHBvaW50LkN1cnJlbnRBdXRoZW50aWNhdGVkVXNlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uKFwiVXNlciBpcyBub3QgYXV0aGVudGljYXRlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgc3RyaW5nIHNlcnZpY2VwYXRoID0gbS5TZXJ2aWNlUGF0aDtcclxuXHJcbiAgICAgICAgICAgIFNlcnZpY2VTa2VsIHNrZWwgPSBhd2FpdCBHZXRPYmplY3RTa2VsKHNlcnZpY2VwYXRoKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAobS5NZW1iZXJOYW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUmVxdWVzdE9iamVjdExvY2tcIjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKENsaWVudExvY2tPcF9sb2Nrb2JqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tlbC5Jc0xvY2tlZCkgdGhyb3cgbmV3IE9iamVjdExvY2tlZEV4Y2VwdGlvbihcIk9iamVjdCBhbHJlYWR5IGxvY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEtleVZhbHVlUGFpcjxzdHJpbmcsIFNlcnZpY2VTa2VsPltdIHNza2VscyA9IChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPEtleVZhbHVlUGFpcjxzdHJpbmcsU2VydmljZVNrZWw+Pihza2VscywoRnVuYzxLZXlWYWx1ZVBhaXI8c3RyaW5nLFNlcnZpY2VTa2VsPixib29sPikoeCA9PiB4LktleS5TdGFydHNXaXRoKHNlcnZpY2VwYXRoKSkpLlRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8S2V5VmFsdWVQYWlyPHN0cmluZyxTZXJ2aWNlU2tlbD4+KHNza2VscywoRnVuYzxLZXlWYWx1ZVBhaXI8c3RyaW5nLFNlcnZpY2VTa2VsPixib29sPikoeCA9PiB4LlZhbHVlLklzTG9ja2VkKSkpIHRocm93IG5ldyBPYmplY3RMb2NrZWRFeGNlcHRpb24oXCJPYmplY3QgYWxyZWFkeSBsb2NrZWRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0TG9jayBvID0gbmV3IE9iamVjdExvY2soU2VydmVyRW5kcG9pbnQuQ3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyLlVzZXJuYW1lLCBza2VsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKEtleVZhbHVlUGFpcjxzdHJpbmcsIFNlcnZpY2VTa2VsPiBzIGluIHNza2VscylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkFkZFNrZWwocy5WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVfb2JqZWN0X2xvY2tzLkFkZChvLlJvb3RTZXJ2aWNlUGF0aCwgbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuQWRkRWxlbWVudChcInJldHVyblwiLCBcIk9LXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUmVxdWVzdENsaWVudE9iamVjdExvY2tcIjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKENsaWVudExvY2tPcF9sb2Nrb2JqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tlbC5Jc0xvY2tlZCkgdGhyb3cgbmV3IE9iamVjdExvY2tlZEV4Y2VwdGlvbihcIk9iamVjdCBhbHJlYWR5IGxvY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEtleVZhbHVlUGFpcjxzdHJpbmcsIFNlcnZpY2VTa2VsPltdIHNza2VscyA9IChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPEtleVZhbHVlUGFpcjxzdHJpbmcsU2VydmljZVNrZWw+Pihza2VscywoRnVuYzxLZXlWYWx1ZVBhaXI8c3RyaW5nLFNlcnZpY2VTa2VsPixib29sPikoeCA9PiB4LktleS5TdGFydHNXaXRoKHNlcnZpY2VwYXRoKSkpLlRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8S2V5VmFsdWVQYWlyPHN0cmluZyxTZXJ2aWNlU2tlbD4+KHNza2VscywoRnVuYzxLZXlWYWx1ZVBhaXI8c3RyaW5nLFNlcnZpY2VTa2VsPixib29sPikoeCA9PiB4LlZhbHVlLklzTG9ja2VkKSkpIHRocm93IG5ldyBPYmplY3RMb2NrZWRFeGNlcHRpb24oXCJPYmplY3QgYWxyZWFkeSBsb2NrZWRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0TG9jayBvID0gbmV3IE9iamVjdExvY2soU2VydmVyRW5kcG9pbnQuQ3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyLlVzZXJuYW1lLCBza2VsLCBTZXJ2ZXJFbmRwb2ludC5DdXJyZW50RW5kcG9pbnQuTG9jYWxFbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChLZXlWYWx1ZVBhaXI8c3RyaW5nLCBTZXJ2aWNlU2tlbD4gcyBpbiBzc2tlbHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5WYWx1ZS5vYmplY3Rsb2NrID0gbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9vYmplY3RfbG9ja3MuQWRkKG8uUm9vdFNlcnZpY2VQYXRoLCBvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5BZGRFbGVtZW50KFwicmV0dXJuXCIsIFwiT0tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUmVsZWFzZU9iamVjdExvY2tcIjpcclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChDbGllbnRMb2NrT3BfbG9ja29iailcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2tlbC5Jc0xvY2tlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tlbC5vYmplY3Rsb2NrLlJvb3RTZXJ2aWNlUGF0aCAhPSBzZXJ2aWNlcGF0aCkgdGhyb3cgbmV3IE9iamVjdExvY2tlZEV4Y2VwdGlvbihcIkNhbm5vdCByZWxlYXNlIGluaGVyaXRlZCBsb2NrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlcm5hbWUgIT0gc2tlbC5vYmplY3Rsb2NrLlVzZXJuYW1lICYmICFTeXN0ZW0uQXJyYXlFeHRlbnNpb25zLkNvbnRhaW5zPHN0cmluZz4ocHJpdixcIm9iamVjdGxvY2tvdmVycmlkZVwiKSkgdGhyb3cgbmV3IE9iamVjdExvY2tlZEV4Y2VwdGlvbihcIlNlcnZpY2UgbG9ja2VkIGJ5IHVzZXIgXCIgKyBza2VsLm9iamVjdGxvY2suVXNlcm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tlbC5vYmplY3Rsb2NrLkVuZHBvaW50ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTZXJ2ZXJFbmRwb2ludC5DdXJyZW50RW5kcG9pbnQuTG9jYWxFbmRwb2ludCAhPSBza2VsLm9iamVjdGxvY2suRW5kcG9pbnQgJiYgIVN5c3RlbS5BcnJheUV4dGVuc2lvbnMuQ29udGFpbnM8c3RyaW5nPihwcml2LFwib2JqZWN0bG9ja292ZXJyaWRlXCIpKSBpZiAodXNlcm5hbWUgIT0gc2tlbC5vYmplY3Rsb2NrLlVzZXJuYW1lICYmICFTeXN0ZW0uQXJyYXlFeHRlbnNpb25zLkNvbnRhaW5zPHN0cmluZz4ocHJpdixcIm9iamVjdGxvY2tvdmVycmlkZVwiKSkgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlNlcnZpY2UgbG9ja2VkIGJ5IG90aGVyIHNlc3Npb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9vYmplY3RfbG9ja3MuUmVtb3ZlKHNrZWwuU2VydmljZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2VsLm9iamVjdGxvY2suUmVsZWFzZUxvY2soKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5BZGRFbGVtZW50KFwicmV0dXJuXCIsIFwiT0tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIk1vbml0b3JFbnRlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IHRpbWVvdXQ9MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW9uaXRvck9iamVjdFNrZWwgcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jayAoQ2xpZW50TG9ja09wX2xvY2tvYmopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2VsLm1vbml0b3Jsb2Nrcy5Db250YWluc0tleShTZXJ2ZXJFbmRwb2ludC5DdXJyZW50RW5kcG9pbnQuTG9jYWxFbmRwb2ludCkpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiQWxyZWFkeSBhY3F1aXJpbmcgb3IgYWNxdWlyZWQgbW9uaXRvciBsb2NrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG5ldyBNb25pdG9yT2JqZWN0U2tlbChza2VsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBtLkZpbmRFbGVtZW50KFwidGltZW91dFwiKS5DYXN0RGF0YTxpbnRbXT4oKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgcmV0Y29kZSA9IGF3YWl0IHMuTW9uaXRvckVudGVyKFNlcnZlckVuZHBvaW50LkN1cnJlbnRFbmRwb2ludC5Mb2NhbEVuZHBvaW50LCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgcmV0Y29kZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiTW9uaXRvckNvbnRpbnVlRW50ZXJcIjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vbml0b3JPYmplY3RTa2VsIHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKENsaWVudExvY2tPcF9sb2Nrb2JqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNrZWwubW9uaXRvcmxvY2tzLkNvbnRhaW5zS2V5KFNlcnZlckVuZHBvaW50LkN1cnJlbnRFbmRwb2ludC5Mb2NhbEVuZHBvaW50KSkgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3QgYWNxdWlyaW5nIG1vbml0b3IgbG9ja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBza2VsLm1vbml0b3Jsb2Nrc1tTZXJ2ZXJFbmRwb2ludC5DdXJyZW50RW5kcG9pbnQuTG9jYWxFbmRwb2ludF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHJldGNvZGUgPSBhd2FpdCBzLk1vbml0b3JDb250aW51ZUVudGVyKFNlcnZlckVuZHBvaW50LkN1cnJlbnRFbmRwb2ludC5Mb2NhbEVuZHBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgcmV0Y29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiTW9uaXRvckV4aXRcIjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKENsaWVudExvY2tPcF9sb2Nrb2JqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tlbC5tb25pdG9ybG9jay5Mb2NhbEVuZHBvaW50ICE9IChTZXJ2ZXJFbmRwb2ludC5DdXJyZW50RW5kcG9pbnQuTG9jYWxFbmRwb2ludCkpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IG1vbml0b3IgbG9ja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyByZXRjb2RlID0gYXdhaXQgc2tlbC5tb25pdG9ybG9jay5Nb25pdG9yRXhpdChTZXJ2ZXJFbmRwb2ludC5DdXJyZW50RW5kcG9pbnQuTG9jYWxFbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5BZGRFbGVtZW50KFwicmV0dXJuXCIsIHJldGNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIkludmFsaWQgY29tbWFuZFwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgY2hlY2tfbG9jayhTZXJ2aWNlU2tlbCBza2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2hlY2tfbW9uaXRvcl9sb2NrKHNrZWwpO1xyXG4gICAgICAgICAgICBpZiAoc2tlbC5Jc0xvY2tlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNrZWwub2JqZWN0bG9jay5Vc2VybmFtZSA9PSBTZXJ2ZXJFbmRwb2ludC5DdXJyZW50QXV0aGVudGljYXRlZFVzZXIuVXNlcm5hbWUgJiYgc2tlbC5vYmplY3Rsb2NrLkVuZHBvaW50ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNrZWwub2JqZWN0bG9jay5Vc2VybmFtZSA9PSBTZXJ2ZXJFbmRwb2ludC5DdXJyZW50QXV0aGVudGljYXRlZFVzZXIuVXNlcm5hbWUgJiYgc2tlbC5vYmplY3Rsb2NrLkVuZHBvaW50ID09IFNlcnZlckVuZHBvaW50LkN1cnJlbnRFbmRwb2ludC5Mb2NhbEVuZHBvaW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RMb2NrZWRFeGNlcHRpb24oXCJPYmplY3QgbG9ja2VkIGJ5IFwiICsgc2tlbC5vYmplY3Rsb2NrLlVzZXJuYW1lKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIGNoZWNrX21vbml0b3JfbG9jayhTZXJ2aWNlU2tlbCBza2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNrZWwuSXNNb25pdG9yTG9ja2VkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2tlbC5tb25pdG9ybG9jay5Mb2NhbEVuZHBvaW50ID09IFNlcnZlckVuZHBvaW50LkN1cnJlbnRFbmRwb2ludC5Mb2NhbEVuZHBvaW50KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNrZWwubW9uaXRvcmxvY2suTW9uaXRvclJlZnJlc2goU2VydmVyRW5kcG9pbnQuQ3VycmVudEVuZHBvaW50LkxvY2FsRW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJPYmplY3QgaXMgY3VycmVudGx5IG1vbml0b3IgbG9ja2VkLiBVc2UgTW9uaXRvckVudGVyIHRvIG9idGFpbiBtb25pdG9yIGxvY2tcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIERpY3Rpb25hcnk8c3RyaW5nLCBPYmplY3RMb2NrPiBhY3RpdmVfb2JqZWN0X2xvY2tzID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBPYmplY3RMb2NrPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgT2JqZWN0TG9ja1xyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGJvb2wgbV9Mb2NrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBzdHJpbmcgbV9Vc2VybmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgIExpc3Q8U2VydmljZVNrZWw+IHNrZWxzID0gbmV3IExpc3Q8U2VydmljZVNrZWw+KCk7XHJcbiAgICAgICAgICAgIFNlcnZpY2VTa2VsIG1fUm9vdFNrZWw7XHJcbiAgICAgICAgICAgIHVpbnQgbV9FbmRwb2ludCA9IDA7XHJcblxyXG5cclxuICAgICAgICAgICAgc3RyaW5nIG1fUm9vdFNlcnZpY2VQYXRoID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBPYmplY3RMb2NrKHN0cmluZyB1c2VybmFtZSwgU2VydmljZVNrZWwgcm9vdF9za2VsLCB1aW50IGVuZHBvaW50PTApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKHNrZWxzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1fTG9ja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBtX1Jvb3RTa2VsID0gcm9vdF9za2VsO1xyXG4gICAgICAgICAgICAgICAgICAgIG1fVXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBtX1Jvb3RTZXJ2aWNlUGF0aCA9IHJvb3Rfc2tlbC5TZXJ2aWNlUGF0aDtcclxuICAgICAgICAgICAgICAgICAgICBtX0VuZHBvaW50ID0gZW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdHJpbmcgVXNlcm5hbWUgeyBnZXQgeyByZXR1cm4gbV9Vc2VybmFtZTsgfSB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIElzTG9ja2VkIHsgZ2V0IHsgcmV0dXJuIG1fTG9ja2VkOyB9IH1cclxuICAgICAgICAgICAgcHVibGljIHN0cmluZyBSb290U2VydmljZVBhdGggeyBnZXQgeyByZXR1cm4gbV9Sb290U2VydmljZVBhdGg7IH0gfVxyXG4gICAgICAgICAgICBwdWJsaWMgdWludCBFbmRwb2ludCB7IGdldCB7IHJldHVybiBtX0VuZHBvaW50OyB9IH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIEFkZFNrZWwoU2VydmljZVNrZWwgc2tlbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoc2tlbHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tlbC5vYmplY3Rsb2NrID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgc3AgPSBza2VsLlNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcCA9PSBtX1Jvb3RTZXJ2aWNlUGF0aClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5SZWZlcmVuY2VFcXVhbHMoc2tlbCwgbV9Sb290U2tlbCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobV9Sb290U2tlbCAhPSBudWxsKSBtX1Jvb3RTa2VsLm9iamVjdGxvY2sgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtX1Jvb3RTa2VsID0gc2tlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc2tlbHMuQWRkKHNrZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgUmVsZWFzZVNrZWwoU2VydmljZVNrZWwgc2tlbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoc2tlbHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2VsLm9iamVjdGxvY2sgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHNwID0gc2tlbC5TZXJ2aWNlUGF0aDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3AgPT0gbV9Sb290U2VydmljZVBhdGgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1fUm9vdFNrZWwgIT0gbnVsbCkgbV9Sb290U2tlbC5vYmplY3Rsb2NrID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbV9Sb290U2tlbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNrZWxzLlJlbW92ZShza2VsKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgUmVsZWFzZUxvY2soKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChza2VscylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtX0xvY2tlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1fUm9vdFNrZWwub2JqZWN0bG9jayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChTZXJ2aWNlU2tlbCBzIGluIHNrZWxzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMub2JqZWN0bG9jaz1udWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHt9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2tlbHMuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIFBlcmlvZGljQ2xlYW51cFRhc2soKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoY2xpZW50X2VuZHBvaW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gY2xpZW50X2VuZHBvaW50cy5WYWx1ZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5QZXJpb2RpY0NsZWFudXBUYXNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBNZXNzYWdlRW50cnkgQ2hlY2tTZXJ2aWNlQ2FwYWJpbGl0eShNZXNzYWdlRW50cnkgbSwgU2VydmVyRW5kcG9pbnQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSByZXQgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuU2VydmljZUNoZWNrQ2FwYWJpbGl0eVJldCwgbS5NZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgcmV0LlNlcnZpY2VQYXRoID0gbS5TZXJ2aWNlUGF0aDtcclxuICAgICAgICAgICAgcmV0LlJlcXVlc3RJRCA9IG0uUmVxdWVzdElEO1xyXG4gICAgICAgICAgICByZXQuQWRkRWxlbWVudChcInJldHVyblwiLCAodWludCkwKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXJEZWxlZ2F0ZShTZXJ2ZXJDb250ZXh0IHNlcnZpY2UsIFNlcnZlclNlcnZpY2VMaXN0ZW5lckV2ZW50VHlwZSBldiwgb2JqZWN0IHBhcmFtZXRlcik7XHJcblxyXG4gICAgICAgIHB1YmxpYyBldmVudCBTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXJEZWxlZ2F0ZSBTZXJ2ZXJTZXJ2aWNlTGlzdGVuZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbGVhc2VTZXJ2aWNlUGF0aChzdHJpbmcgcGF0aClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBpZiAocGF0aCA9PSBTZXJ2aWNlTmFtZSkgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJSb290IG9iamVjdCBjYW5ub3QgYmUgcmVsZWFzZWRcIik7XHJcblxyXG4gICAgICAgICAgICBsb2NrIChza2VscylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nW10gb2Jqa2V5cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8c3RyaW5nPihza2Vscy5LZXlzLChGdW5jPHN0cmluZyxib29sPikoeCA9PiB4LlN0YXJ0c1dpdGgocGF0aCkpKS5Ub0FycmF5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxzdHJpbmc+KG9iamtleXMpID09IDApIHRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKFwiVW5rbm93biBzZXJ2aWNlIHBhdGhcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHBhdGgxIGluIG9iamtleXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VydmljZVNrZWwgcyA9IHNrZWxzW3BhdGgxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuSXNMb2NrZWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NrIChDbGllbnRMb2NrT3BfbG9ja29iailcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMub2JqZWN0bG9jay5Sb290U2VydmljZVBhdGggPT0gcGF0aDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlX29iamVjdF9sb2Nrcy5SZW1vdmUocy5vYmplY3Rsb2NrLlVzZXJuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm9iamVjdGxvY2suUmVsZWFzZUxvY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm9iamVjdGxvY2suUmVsZWFzZVNrZWwocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHMuUmVsZWFzZU9iamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMuUmVsZWFzZUNhc3RPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBza2Vscy5SZW1vdmUocGF0aDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuU2VydmljZVBhdGhSZWxlYXNlZFJlcSwgXCJcIik7XHJcbiAgICAgICAgICAgIG0uU2VydmljZVBhdGggPSBwYXRoO1xyXG5cclxuICAgICAgICAgICAgU2VuZEV2ZW50KG0pO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZWxlYXNlU2VydmljZVBhdGgoc3RyaW5nIHBhdGgsIExpc3Q8dWludD4gZW5kcG9pbnRzKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXRoID09IFNlcnZpY2VOYW1lKSB0aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihcIlJvb3Qgb2JqZWN0IGNhbm5vdCBiZSByZWxlYXNlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKHNrZWxzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHJpbmdbXSBvYmprZXlzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxzdHJpbmc+KHNrZWxzLktleXMsKEZ1bmM8c3RyaW5nLGJvb2w+KSh4ID0+IHguU3RhcnRzV2l0aChwYXRoKSkpLlRvQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PHN0cmluZz4ob2Jqa2V5cykgPT0gMCkgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJVbmtub3duIHNlcnZpY2UgcGF0aFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcgcGF0aDEgaW4gb2Jqa2V5cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlU2tlbCBzID0gc2tlbHNbcGF0aDFdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocy5Jc0xvY2tlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKENsaWVudExvY2tPcF9sb2Nrb2JqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5vYmplY3Rsb2NrLlJvb3RTZXJ2aWNlUGF0aCA9PSBwYXRoMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVfb2JqZWN0X2xvY2tzLlJlbW92ZShzLm9iamVjdGxvY2suVXNlcm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMub2JqZWN0bG9jay5SZWxlYXNlTG9jaygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm9iamVjdGxvY2suUmVsZWFzZVNrZWwocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHMuUmVsZWFzZU9iamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMuUmVsZWFzZUNhc3RPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBza2Vscy5SZW1vdmUocGF0aDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuU2VydmljZVBhdGhSZWxlYXNlZFJlcSwgXCJcIik7XHJcbiAgICAgICAgICAgIG0uU2VydmljZVBhdGggPSBwYXRoO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNjID0gbmV3IExpc3Q8U2VydmVyRW5kcG9pbnQ+KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsb2NrIChjbGllbnRfZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBlbmRwb2ludHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudF9lbmRwb2ludHMuQ29udGFpbnNLZXkoZSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5BZGQoY2xpZW50X2VuZHBvaW50c1tlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gY2MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChSZXF1aXJlVmFsaWRVc2VyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoYy5BdXRoZW50aWNhdGVkVXNlcm5hbWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLkNoZWNrQ29ubmVjdGlvbihjLkxvY2FsRW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFNlbmRNZXNzYWdlKG0sIGMsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5Db250aW51ZVdpdGgoKEFjdGlvbjxUYXNrPikoZGVsZWdhdGUoVGFzayB0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LkV4Y2VwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3ZlQ2xpZW50KGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZW1vdmVDbGllbnQoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgeyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByaXZhdGUgRGljdGlvbmFyeTx1aW50LCBUdXBsZTxUYXNrQ29tcGxldGlvblNvdXJjZTxNZXNzYWdlRW50cnk+LCBTZXJ2ZXJFbmRwb2ludD4+IHJlY193YWl0ID0gbmV3IERpY3Rpb25hcnk8dWludCwgVHVwbGU8VGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZUVudHJ5PiwgU2VydmVyRW5kcG9pbnQ+PigpO1xyXG4gICAgICAgIHVpbnQgcmVxdWVzdF9udW1iZXIgPSAwO1xyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxNZXNzYWdlRW50cnk+IFByb2Nlc3NDYWxsYmFja1JlcXVlc3QoTWVzc2FnZUVudHJ5IG0sIHVpbnQgZW5kcG9pbnRpZCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIFNlcnZlckVuZHBvaW50IGUgPSBjbGllbnRfZW5kcG9pbnRzW2VuZHBvaW50aWRdO1xyXG5cclxuICAgICAgICAgICAgRGF0ZVRpbWUgcmVxdWVzdF9zdGFydCA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICAgICAgdWludCByZXF1ZXN0X3RpbWVvdXQgPSBub2RlLlJlcXVlc3RUaW1lb3V0O1xyXG5cclxuICAgICAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZUVudHJ5PiByZWNfc291cmNlID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2VFbnRyeT4oKTtcclxuICAgICAgICAgICAgdWludCB0X2lkO1xyXG4gICAgICAgICAgICBsb2NrIChyZWNfd2FpdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF9udW1iZXIrKztcclxuICAgICAgICAgICAgICAgIG0uUmVxdWVzdElEID0gcmVxdWVzdF9udW1iZXI7XHJcbiAgICAgICAgICAgICAgICB0X2lkID0gcmVxdWVzdF9udW1iZXI7XHJcbiAgICAgICAgICAgICAgICByZWNfd2FpdC5BZGQodF9pZCwgVHVwbGUuQ3JlYXRlPFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2VFbnRyeT4sU2VydmVyRW5kcG9pbnQ+KHJlY19zb3VyY2UsZSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFByb2Nlc3NDYWxsYmFja1JlcXVlc3RfY2hlY2tjb25uZWN0aW9uX2N1cnJlbnQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBQcm9jZXNzQ2FsbGJhY2tSZXF1ZXN0X2NoZWNrY29ubmVjdGlvbl9jdXJyZW50ID0gUHJvY2Vzc0NhbGxiYWNrUmVxdWVzdF9jaGVja2Nvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IHJlY19tZXNzYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhbmNlbC5SZWdpc3RlcigoQWN0aW9uKShkZWxlZ2F0ZSgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjX3NvdXJjZS5UcnlTZXRDYW5jZWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBGdW5jPFRhc2s+IHIgPSBhc3luYyBkZWxlZ2F0ZSgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgU2VuZE1lc3NhZ2UobSwgZSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgICAgICAgICByZWNfbWVzc2FnZSA9IGF3YWl0IHJlY19zb3VyY2UuVGFzaztcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgcigpLkF3YWl0V2l0aFRpbWVvdXQoKGludClub2RlLlJlcXVlc3RUaW1lb3V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKHJlY193YWl0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY193YWl0LlJlbW92ZSh0X2lkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWNfbWVzc2FnZS5SZXF1ZXN0SUQgIT0gdF9pZClcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGlzIHNob3VsZCBiZSBpbXBvc3NpYmxlIVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWNfbWVzc2FnZS5FcnJvciAhPSBNZXNzYWdlRXJyb3JUeXBlLk5vbmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEV4Y2VwdGlvbiBlMSA9IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uVXRpbC5NZXNzYWdlRW50cnlUb0V4Y2VwdGlvbihyZWNfbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBSb2JvdFJhY29udGV1clJlbW90ZUV4Y2VwdGlvbiBlMiA9IGUxIGFzIFJvYm90UmFjb250ZXVyUmVtb3RlRXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKGUyICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBFeGNlcHRpb24gZTMgPSBTZXJ2aWNlRGVmLkRvd25DYXN0RXhjZXB0aW9uKGUyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZTMgIT0gbnVsbCkgZTEgPSBlMztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRocm93IGUxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVjX21lc3NhZ2U7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVGFzayBQcm9jZXNzQ2FsbGJhY2tSZXF1ZXN0X2NoZWNrY29ubmVjdGlvbl9jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIGFzeW5jIFRhc2sgUHJvY2Vzc0NhbGxiYWNrUmVxdWVzdF9jaGVja2Nvbm5lY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAocmVjX3dhaXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWNfd2FpdC5Db3VudCA8IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJvY2Vzc0NhbGxiYWNrUmVxdWVzdF9jaGVja2Nvbm5lY3Rpb25fY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PFR1cGxlPFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2VFbnRyeT4sU2VydmVyRW5kcG9pbnQ+PihyZWNfd2FpdC5WYWx1ZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLkNoZWNrQ29ubmVjdGlvbihjLkl0ZW0yLkxvY2FsRW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVjX3dhaXQyID0gbmV3IExpc3Q8VGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZUVudHJ5Pj4oKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChyZWNfd2FpdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciByIGluIHJlY193YWl0LlZhbHVlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuSXRlbTIuTG9jYWxFbmRwb2ludCA9PSBjLkl0ZW0yLkxvY2FsRW5kcG9pbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjX3dhaXQyLkFkZChyLkl0ZW0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gcmVjX3dhaXQyKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdC5UcnlTZXRFeGNlcHRpb24obmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJDb25uZWN0aW9uIGNsb3NlZFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheSg1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgTW9uaXRvck9iamVjdFNrZWxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRhc2sgd2FpdF90aHJlYWQ7XHJcbiAgICAgICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gd2FpdF9ldmVudDtcclxuICAgICAgICAgICAgSVJvYm90UmFjb250ZXVyTW9uaXRvck9iamVjdCBvYmo7XHJcbiAgICAgICAgICAgIHVpbnQgbG9jYWxfZW5kcG9pbnQgPSAwO1xyXG4gICAgICAgICAgICBpbnQgdGltZW91dCA9IDA7XHJcbiAgICAgICAgICAgIEV4Y2VwdGlvbiBtb25pdG9yX2FjcXVpcmVfZXhjZXB0aW9uPW51bGw7XHJcbiAgICAgICAgICAgIGJvb2wgbW9uaXRvcl9hY3F1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+IG1vbml0b3JfdGhyZWFkX2V2ZW50O1xyXG4gICAgICAgICAgICBib29sIG1haW50YWluX2xvY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgU2VydmljZVNrZWwgc2tlbDtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB1aW50IExvY2FsRW5kcG9pbnQgeyBnZXQgeyByZXR1cm4gbG9jYWxfZW5kcG9pbnQ7IH0gfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGJvb2wgSXNMb2NrZWQgeyBnZXQgeyByZXR1cm4gbW9uaXRvcl9hY3F1aXJlZDsgfSB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgTW9uaXRvck9iamVjdFNrZWwoU2VydmljZVNrZWwgc2tlbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0IG9iaiA9IHNrZWwuVW5jYXN0T2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCEob2JqIGlzIElSb2JvdFJhY29udGV1ck1vbml0b3JPYmplY3QpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiT2JqZWN0IGlzIG5vdCBtb25pdG9yIGxvY2thYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub2JqID0gKElSb2JvdFJhY29udGV1ck1vbml0b3JPYmplY3Qpb2JqO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5za2VsID0gc2tlbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8c3RyaW5nPiBNb25pdG9yRW50ZXIodWludCBsb2NhbF9lbmRwb2ludCwgaW50IHRpbWVvdXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsX2VuZHBvaW50ID0gbG9jYWxfZW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICB3YWl0X2V2ZW50ID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPGludD4oKTtcclxuICAgICAgICAgICAgICAgIG1vbml0b3JfdGhyZWFkX2V2ZW50ID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPGludD4oKTtcclxuICAgICAgICAgICAgICAgIG1haW50YWluX2xvY2sgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdF9yZWZyZXNoZWQgPSBEYXRlVGltZS5VdGNOb3c7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbG9jayAoc2tlbC5tb25pdG9ybG9ja3MpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tlbC5tb25pdG9ybG9ja3MuQWRkKGxvY2FsX2VuZHBvaW50LCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB3YWl0X3RocmVhZCA9IHRocmVhZF9mdW5jKCkuSWdub3JlUmVzdWx0KCk7ICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnMuRXh0ZW5zaW9ucy5Bd2FpdFdpdGhUaW1lb3V0PGludD4od2FpdF9ldmVudC5UYXNrLDUwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1vbml0b3JfYWNxdWlyZV9leGNlcHRpb24gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYWludGFpbl9sb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbW9uaXRvcl9hY3F1aXJlX2V4Y2VwdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1vbml0b3JfYWNxdWlyZWQgPyAgXCJPS1wiIDogXCJDb250aW51ZVwiICk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGF0ZVRpbWUgbGFzdF9yZWZyZXNoZWQgPSBEYXRlVGltZS5VdGNOb3c7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxzdHJpbmc+IE1vbml0b3JDb250aW51ZUVudGVyKHVpbnQgbG9jYWxlbmRwb2ludClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0X3JlZnJlc2hlZCA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobW9uaXRvcl9hY3F1aXJlZCkgcmV0dXJuIFwiT0tcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobW9uaXRvcl9hY3F1aXJlX2V4Y2VwdGlvbiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1haW50YWluX2xvY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBtb25pdG9yX2FjcXVpcmVfZXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vd2FpdF9ldmVudC5XYWl0T25lKDUwMDApO1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLkF3YWl0V2l0aFRpbWVvdXQ8aW50Pih3YWl0X2V2ZW50LlRhc2ssNTAwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobW9uaXRvcl9hY3F1aXJlX2V4Y2VwdGlvbiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1haW50YWluX2xvY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBtb25pdG9yX2FjcXVpcmVfZXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAobW9uaXRvcl9hY3F1aXJlZCA/IFwiT0tcIiA6IFwiQ29udGludWVcIiApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgVGFzayBNb25pdG9yUmVmcmVzaCh1aW50IGxvY2FsZW5kcG9pbnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdF9yZWZyZXNoZWQgPSBEYXRlVGltZS5VdGNOb3c7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBUYXNrPHN0cmluZz4gTW9uaXRvckV4aXQodWludCBsb2NhbF9lbmRwb2ludClcclxuICAgICAgICAgICAgeyAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICBtYWludGFpbl9sb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBtb25pdG9yX3RocmVhZF9ldmVudC5UcnlTZXRSZXN1bHQoMCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8c3RyaW5nPihcIk9LXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwcml2YXRlIGFzeW5jIFRhc2sgdGhyZWFkX2Z1bmMoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIElEaXNwb3NhYmxlIGw9bnVsbDtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGw9YXdhaXQgb2JqLlJvYm90UmFjb250ZXVyTW9uaXRvckVudGVyKHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbml0b3JfYWNxdWlyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNrZWwubW9uaXRvcmxvY2sgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbml0b3JfYWNxdWlyZV9leGNlcHRpb24gPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHdhaXRfZXZlbnQuVHJ5U2V0UmVzdWx0KDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChza2VsLm1vbml0b3Jsb2NrcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZWwubW9uaXRvcmxvY2tzLlJlbW92ZShsb2NhbF9lbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FpdF9ldmVudC5UcnlTZXRSZXN1bHQoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChtYWludGFpbl9sb2NrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnMuRXh0ZW5zaW9ucy5Bd2FpdFdpdGhUaW1lb3V0PGludD4obW9uaXRvcl90aHJlYWRfZXZlbnQuVGFzaywzMDAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZVRpbWUuVXRjTm93ID4gbGFzdF9yZWZyZXNoZWQuQWRkU2Vjb25kcygzMCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW50YWluX2xvY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgICAgIGZpbmFsbHlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChza2VsLm1vbml0b3Jsb2NrcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZWwubW9uaXRvcmxvY2tzLlJlbW92ZShsb2NhbF9lbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGwuRGlzcG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vb2JqLlJvYm90UmFjb250ZXVyTW9uaXRvckV4aXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBtb25pdG9yX2FjcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FpdF9ldmVudC5UcnlTZXRSZXN1bHQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9ICAgICBcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIFNlcnZlclNlcnZpY2VMaXN0ZW5lckV2ZW50VHlwZVxyXG4gICAge1xyXG4gICAgICAgIFNlcnZpY2VDbG9zZWQgPSAxLFxyXG4gICAgICAgIENsaWVudENvbm5lY3RlZCxcclxuICAgICAgICBDbGllbnREaXNjb25uZWN0ZWRcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJ2ZXJFbmRwb2ludCA6IEVuZHBvaW50XHJcbiAgICB7XHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIHJlYWRvbmx5IFNlcnZlckNvbnRleHQgc2VydmljZTtcclxuXHJcbiAgICAgICAgW1RocmVhZFN0YXRpY11cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBTZXJ2ZXJFbmRwb2ludCBtX0N1cnJlbnRFbmRwb2ludDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBTZXJ2ZXJFbmRwb2ludCBDdXJyZW50RW5kcG9pbnQgeyBnZXQgeyByZXR1cm4gbV9DdXJyZW50RW5kcG9pbnQ7IH0gfVxyXG5cclxuICAgICAgICBbVGhyZWFkU3RhdGljXVxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEF1dGhlbnRpY2F0ZWRVc2VyIG1fQ3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEF1dGhlbnRpY2F0ZWRVc2VyIEN1cnJlbnRBdXRoZW50aWNhdGVkVXNlciB7IGdldCB7IHJldHVybiBtX0N1cnJlbnRBdXRoZW50aWNhdGVkVXNlcjsgfSB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgQXV0aGVudGljYXRlZFVzZXIgZW5kcG9pbnRfYXV0aGVudGljYXRlZF91c2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIFNlcnZlckVuZHBvaW50KFNlcnZlckNvbnRleHQgc2VydmljZSwgUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUpXHJcbiAgICAgICAgICAgIDogYmFzZShub2RlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEF1dGhlbnRpY2F0ZWRVc2VybmFtZSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kcG9pbnRfYXV0aGVudGljYXRlZF91c2VyID09IG51bGwpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBlbmRwb2ludF9hdXRoZW50aWNhdGVkX3VzZXIuVXNlcm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBNZXNzYWdlUmVjZWl2ZWQoTWVzc2FnZSBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG0uZW50cmllcy5Db3VudCA+PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobS5lbnRyaWVzWzBdLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLkVuZHBvaW50Q2hlY2tDYXBhYmlsaXR5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENoZWNrRW5kcG9pbnRDYXBhYmlsaXR5TWVzc2FnZShtKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIExhc3RNZXNzYWdlUmVjZWl2ZWRUaW1lID0gRGF0ZVRpbWUuVXRjTm93O1xyXG4gICAgICAgICAgICBtX0N1cnJlbnRFbmRwb2ludCA9IHRoaXM7XHJcbiAgICAgICAgICAgIG1fQ3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyID0gZW5kcG9pbnRfYXV0aGVudGljYXRlZF91c2VyO1xyXG4gICAgICAgICAgICBpZiAoZW5kcG9pbnRfYXV0aGVudGljYXRlZF91c2VyIT1udWxsKSBlbmRwb2ludF9hdXRoZW50aWNhdGVkX3VzZXIuVXBkYXRlTGFzdEFjY2VzcygpO1xyXG4gICAgICAgICAgICBzZXJ2aWNlLk1lc3NhZ2VSZWNlaXZlZChtLCB0aGlzKTtcclxuICAgICAgICAgICAgbV9DdXJyZW50RW5kcG9pbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBtX0N1cnJlbnRBdXRoZW50aWNhdGVkVXNlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBdXRoZW50aWNhdGVVc2VyKHN0cmluZyB1c2VybmFtZSwgRGljdGlvbmFyeTxzdHJpbmcsIG9iamVjdD4gY3JlZGVudGlhbHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBdXRoZW50aWNhdGVkVXNlciB1PXNlcnZpY2UuQXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgY3JlZGVudGlhbHMpO1xyXG4gICAgICAgICAgICBlbmRwb2ludF9hdXRoZW50aWNhdGVkX3VzZXIgPSB1O1xyXG4gICAgICAgICAgICBtX0N1cnJlbnRBdXRoZW50aWNhdGVkVXNlciA9IHU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBMb2dvdXRVc2VyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVuZHBvaW50X2F1dGhlbnRpY2F0ZWRfdXNlciA9IG51bGw7XHJcbiAgICAgICAgICAgIG1fQ3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgXHJcbiAgICAgICAgcHVibGljIHZvaWQgUGVyaW9kaWNDbGVhbnVwVGFzaygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKERhdGVUaW1lLlV0Y05vdyAtIExhc3RNZXNzYWdlUmVjZWl2ZWRUaW1lKS5Ub3RhbE1pbGxpc2Vjb25kcyA+IG5vZGUuRW5kcG9pbnRJbmFjdGl2aXR5VGltZW91dClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VydmljZS5SZW1vdmVDbGllbnQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBSb2JvdFJhY29udGV1ck9ialJlZkNoYW5nZWRFdmVudChzdHJpbmcgb2JqcmVmKTtcclxuXHJcbiAgICBwdWJsaWMgaW50ZXJmYWNlIElSb2JvdFJhY29udGV1clNlcnZpY2VPYmplY3RcclxuICAgIHtcclxuICAgICAgICBldmVudCBSb2JvdFJhY29udGV1ck9ialJlZkNoYW5nZWRFdmVudCBSb2JvdFJhY29udGV1ck9ialJlZkNoYW5nZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFJvYm90UmFjb250ZXVyU2VydmljZU9iamVjdEludGVyZmFjZSA6IEF0dHJpYnV0ZVxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIHJydHlwZTtcclxuICAgICAgICBwdWJsaWMgUm9ib3RSYWNvbnRldXJTZXJ2aWNlT2JqZWN0SW50ZXJmYWNlKHN0cmluZyBycnR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnJydHlwZSA9IHJydHlwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUlJUeXBlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJydHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFJvYm90UmFjb250ZXVyU2VydmljZVN0cnVjdCA6IEF0dHJpYnV0ZVxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIHJydHlwZTtcclxuICAgICAgICBwdWJsaWMgUm9ib3RSYWNvbnRldXJTZXJ2aWNlU3RydWN0KHN0cmluZyBycnR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnJydHlwZSA9IHJydHlwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUlJUeXBlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJydHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGludGVyZmFjZSBJUm9ib3RSYWNvbnRldXJNb25pdG9yT2JqZWN0XHJcbiAgICB7XHJcbiAgICAgICAgVGFzazxJRGlzcG9zYWJsZT4gUm9ib3RSYWNvbnRldXJNb25pdG9yRW50ZXIoKTtcclxuXHJcbiAgICAgICAgVGFzazxJRGlzcG9zYWJsZT4gUm9ib3RSYWNvbnRldXJNb25pdG9yRW50ZXIoaW50IHRpbWVvdXQpO1xyXG5cclxuICAgIH1cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgMjAxMS0yMDE5IFdhc29uIFRlY2hub2xvZ3ksIExMQ1xyXG4vL1xyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4vL1xyXG4vLyAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuLy9cclxuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucztcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgU2VydmljZVN0dWJcclxuICAgIHtcclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlU3R1YihzdHJpbmcgcGF0aCwgQ2xpZW50Q29udGV4dCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcnJfY29udGV4dCA9IGM7XHJcbiAgICAgICAgICAgIHJyX25vZGUgPSBjLm5vZGU7XHJcbiAgICAgICAgICAgIFJSU2VydmljZVBhdGggPSBwYXRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIHJlYWRvbmx5IHN0cmluZyBSUlNlcnZpY2VQYXRoO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgQ2xpZW50Q29udGV4dCBycl9jb250ZXh0O1xyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBSb2JvdFJhY29udGV1ck5vZGUgcnJfbm9kZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvYmplY3QgcnJfY29udGV4dF9sb2NrID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgQ2xpZW50Q29udGV4dCBSUkNvbnRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChycl9jb250ZXh0X2xvY2spXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJyX2NvbnRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCB2b2lkIFJSUmVsZWFzZUNvbnRleHQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAocnJfY29udGV4dF9sb2NrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBycl9jb250ZXh0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8TWVzc2FnZUVudHJ5PiBQcm9jZXNzUmVxdWVzdChNZXNzYWdlRW50cnkgbSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFJSQ29udGV4dCA9PSBudWxsKSB0aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihcIlJlZmVyZW5jZSBoYXMgYmVlbiByZWxlYXNlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIG0uU2VydmljZVBhdGggPSBSUlNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgUlJDb250ZXh0LlByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgYWJzdHJhY3Qgdm9pZCBEaXNwYXRjaEV2ZW50KE1lc3NhZ2VFbnRyeSBtKTtcclxuXHJcbiAgICAgICAgcHVibGljIFRhc2s8b2JqZWN0PiBGaW5kT2JqUmVmKHN0cmluZyBuLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUlJDb250ZXh0ID09IG51bGwpIHRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKFwiUmVmZXJlbmNlIGhhcyBiZWVuIHJlbGVhc2VkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gUlJDb250ZXh0LkZpbmRPYmpSZWYoUlJTZXJ2aWNlUGF0aCArIFwiLlwiICsgbiwgbnVsbCwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUYXNrPG9iamVjdD4gRmluZE9ialJlZihzdHJpbmcgbiwgc3RyaW5nIGksIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChSUkNvbnRleHQgPT0gbnVsbCkgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJSZWZlcmVuY2UgaGFzIGJlZW4gcmVsZWFzZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBSUkNvbnRleHQuRmluZE9ialJlZihSUlNlcnZpY2VQYXRoICsgXCIuXCIgKyBuICsgXCJbXCIgKyBSUlVyaUV4dGVuc2lvbnMuRXNjYXBlRGF0YVN0cmluZyhpLlRvU3RyaW5nKCkpLlJlcGxhY2UoXCIuXCIsIFwiJTJlXCIpICsgXCJdXCIsIG51bGwsIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGFzazxvYmplY3Q+IEZpbmRPYmpSZWZUeXBlZChzdHJpbmcgbiwgc3RyaW5nIG9iamVjdHR5cGUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChSUkNvbnRleHQgPT0gbnVsbCkgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJSZWZlcmVuY2UgaGFzIGJlZW4gcmVsZWFzZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBSUkNvbnRleHQuRmluZE9ialJlZihSUlNlcnZpY2VQYXRoICsgXCIuXCIgKyBuLCBvYmplY3R0eXBlLCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRhc2s8b2JqZWN0PiBGaW5kT2JqUmVmVHlwZWQoc3RyaW5nIG4sIHN0cmluZyBpLCBzdHJpbmcgb2JqZWN0dHlwZSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFJSQ29udGV4dCA9PSBudWxsKSB0aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihcIlJlZmVyZW5jZSBoYXMgYmVlbiByZWxlYXNlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIFJSQ29udGV4dC5GaW5kT2JqUmVmKFJSU2VydmljZVBhdGggKyBcIi5cIiArIG4gKyBcIltcIiArIFJSVXJpRXh0ZW5zaW9ucy5Fc2NhcGVEYXRhU3RyaW5nKGkuVG9TdHJpbmcoKSkuUmVwbGFjZShcIi5cIiwgXCIlMmVcIikgKyBcIl1cIiwgb2JqZWN0dHlwZSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBhc3luYyBUYXNrIFNlbmRQaXBlTWVzc2FnZShNZXNzYWdlRW50cnkgbSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFJSQ29udGV4dCA9PSBudWxsKSB0aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihcIlJlZmVyZW5jZSBoYXMgYmVlbiByZWxlYXNlZFwiKTtcclxuICAgICAgICAgICAgbS5TZXJ2aWNlUGF0aCA9IFJSU2VydmljZVBhdGg7XHJcbiAgICAgICAgICAgIGF3YWl0IFJSQ29udGV4dC5TZW5kUGlwZU1lc3NhZ2UobSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBhc3luYyBUYXNrIFNlbmRXaXJlTWVzc2FnZShNZXNzYWdlRW50cnkgbSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFJSQ29udGV4dCA9PSBudWxsKSB0aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihcIlJlZmVyZW5jZSBoYXMgYmVlbiByZWxlYXNlZFwiKTtcclxuICAgICAgICAgICAgbS5TZXJ2aWNlUGF0aCA9IFJSU2VydmljZVBhdGg7XHJcbiAgICAgICAgICAgIGF3YWl0IFJSQ29udGV4dC5TZW5kV2lyZU1lc3NhZ2UobSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCB2aXJ0dWFsIHZvaWQgRGlzcGF0Y2hQaXBlTWVzc2FnZShNZXNzYWdlRW50cnkgbSkgeyB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCB2aXJ0dWFsIHZvaWQgRGlzcGF0Y2hXaXJlTWVzc2FnZShNZXNzYWdlRW50cnkgbSkgeyB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCB2aXJ0dWFsIFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsYmFja0NhbGwoTWVzc2FnZUVudHJ5IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJNZW1iZXIgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgcmVhZG9ubHkgQXN5bmNNdXRleCBycl9hc3luY19tdXRleCA9IG5ldyBBc3luY011dGV4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIENsaWVudENvbnRleHQgOiBFbmRwb2ludFxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZVN0dWI+IHN0dWJzO1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIHB1YmxpYyBkZWxlZ2F0ZSB2b2lkIEV2ZW50RGlzcGF0Y2hNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5IGUpO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgU2VydmljZUZhY3RvcnkgbV9TZXJ2aWNlRGVmO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VydmljZUZhY3RvcnkgU2VydmljZURlZiB7IGdldCB7IHJldHVybiBtX1NlcnZpY2VEZWY7IH0gfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgYm9vbCBVc2VQdWxsZWRTZXJ2aWNlVHlwZXM7XHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IER5bmFtaWNTZXJ2aWNlRmFjdG9yeSBEeW5hbWljU2VydmljZUZhY3RvcnlfO1xyXG5cclxuICAgICAgICBwdWJsaWMgQ2xpZW50Q29udGV4dChSb2JvdFJhY29udGV1ck5vZGUgbm9kZSkgOiBiYXNlKG5vZGUpXHJcbiAgICAgICAge1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vcmVjX2V2ZW50ID0gbmV3IEF1dG9SZXNldEV2ZW50KGZhbHNlKTtcclxuICAgICAgICAgICAgc3R1YnMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VTdHViPigpO1xyXG4gICAgICAgICAgICBEeW5hbWljU2VydmljZUZhY3RvcnlfID0gbm9kZS5EeW5hbWljU2VydmljZUZhY3Rvcnk7XHJcbiAgICAgICAgICAgIFVzZVB1bGxlZFNlcnZpY2VUeXBlcyA9IER5bmFtaWNTZXJ2aWNlRmFjdG9yeV8gIT0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDbGllbnRDb250ZXh0KFNlcnZpY2VGYWN0b3J5IHNlcnZpY2VfZGVmLCBSb2JvdFJhY29udGV1ck5vZGUgbm9kZSkgOiBiYXNlKG5vZGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtX1NlcnZpY2VEZWYgPSBzZXJ2aWNlX2RlZjtcclxuXHJcbiAgICAgICAgICAgIC8vcmVjX2V2ZW50ID0gbmV3IEF1dG9SZXNldEV2ZW50KGZhbHNlKTtcclxuICAgICAgICAgICAgc3R1YnMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VTdHViPigpO1xyXG4gICAgICAgICAgICBEeW5hbWljU2VydmljZUZhY3RvcnlfID0gbm9kZS5EeW5hbWljU2VydmljZUZhY3Rvcnk7XHJcbiAgICAgICAgICAgIFVzZVB1bGxlZFNlcnZpY2VUeXBlcyA9IER5bmFtaWNTZXJ2aWNlRmFjdG9yeV8gIT0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPG9iamVjdD4gRmluZE9ialJlZihzdHJpbmcgcGF0aCwgc3RyaW5nIG9iamVjdHR5cGUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHN0dWJzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxzdHJpbmc+KHN0dWJzLktleXMscGF0aCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0dWJzW3BhdGhdO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IGUgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuT2JqZWN0VHlwZU5hbWUsIFwiXCIpO1xyXG4gICAgICAgICAgICAvL01lc3NhZ2VFbGVtZW50IG0gPSBlLkFkZEVsZW1lbnQoXCJPYmplY3RQYXRoXCIsIHBhdGgpO1xyXG4gICAgICAgICAgICBlLlNlcnZpY2VQYXRoID0gcGF0aDtcclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IHJldCA9IGF3YWl0IFByb2Nlc3NSZXF1ZXN0KGUsIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHN0cmluZyBvYmplY3R0eXBlMiA9IHJldC5GaW5kRWxlbWVudChcIm9iamVjdHR5cGVcIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9iamVjdHR5cGUyID09IFwiXCIpIHRocm93IG5ldyBPYmplY3ROb3RGb3VuZEV4Y2VwdGlvbihcIk9iamVjdCB0eXBlIHdhcyBub3QgcmV0dXJuZWQuXCIpO1xyXG5cclxuICAgICAgICAgICAgc3RyaW5nIG9iamVjdGRlZiA9IFNlcnZpY2VEZWZpbml0aW9uVXRpbC5TcGxpdFF1YWxpZmllZE5hbWUob2JqZWN0dHlwZTIpLkl0ZW0xO1xyXG5cclxuICAgICAgICAgICAgaWYgKFVzZVB1bGxlZFNlcnZpY2VUeXBlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9vbCBwdWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChwdWxsZWRfc2VydmljZV90eXBlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXB1bGxlZF9zZXJ2aWNlX3R5cGVzLkNvbnRhaW5zS2V5KG9iamVjdGRlZikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHB1bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VydmljZURlZmluaXRpb25bXSBkID0gYXdhaXQgUHVsbFNlcnZpY2VEZWZpbml0aW9uQW5kSW1wb3J0cyhudWxsLCBjYW5jZWw6IGNhbmNlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKHB1bGxlZF9zZXJ2aWNlX2RlZnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZDIgaW4gZClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwdWxsZWRfc2VydmljZV9kZWZzLkNvbnRhaW5zS2V5KGQyLk5hbWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bGxlZF9zZXJ2aWNlX2RlZnMuQWRkKGQyLk5hbWUsIGQyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBEeW5hbWljU2VydmljZUZhY3RvcnlfLkNyZWF0ZVNlcnZpY2VGYWN0b3JpZXMoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8U2VydmljZURlZmluaXRpb24sc3RyaW5nPihkLChGdW5jPFNlcnZpY2VEZWZpbml0aW9uLHN0cmluZz4pKHggPT4geC5Ub1N0cmluZygpKSkuVG9BcnJheSgpLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChwdWxsZWRfc2VydmljZV9kZWZzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGYyIGluIGYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHVsbGVkX3NlcnZpY2VfdHlwZXMuQ29udGFpbnNLZXkoZjIuR2V0U2VydmljZU5hbWUoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVsbGVkX3NlcnZpY2VfdHlwZXMuQWRkKGYyLkdldFNlcnZpY2VOYW1lKCksIGYyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9iamVjdHR5cGUgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5T2JqZWN0SW1wbGVtZW50cyhvYmplY3R0eXBlMiwgb2JqZWN0dHlwZSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3R0eXBlMiA9IG9iamVjdHR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzdHViID0gU2VydmljZURlZi5DcmVhdGVTdHViKG9iamVjdHR5cGUyLCBwYXRoLCB0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKHN0dWJzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8c3RyaW5nPihzdHVicy5LZXlzLHBhdGgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0dWJzW3BhdGhdID0gc3R1YjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3R1YjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3R1YnNbcGF0aF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIERpY3Rpb25hcnk8dWludCwgVGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZUVudHJ5Pj4gcmVjX3dhaXQgPSBuZXcgRGljdGlvbmFyeTx1aW50LCBUYXNrQ29tcGxldGlvblNvdXJjZTxNZXNzYWdlRW50cnk+PigpO1xyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8TWVzc2FnZUVudHJ5PiBQcm9jZXNzUmVxdWVzdChNZXNzYWdlRW50cnkgbSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGF0ZVRpbWUgcmVxdWVzdF9zdGFydCA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICAgICAgdWludCByZXF1ZXN0X3RpbWVvdXQgPSBub2RlLlJlcXVlc3RUaW1lb3V0O1xyXG5cclxuICAgICAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZUVudHJ5PiByZWNfc291cmNlID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2VFbnRyeT4oKTtcclxuICAgICAgICAgICAgdWludCB0X2lkO1xyXG4gICAgICAgICAgICBsb2NrIChyZWNfd2FpdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF9udW1iZXIrKztcclxuICAgICAgICAgICAgICAgIG0uUmVxdWVzdElEID0gcmVxdWVzdF9udW1iZXI7XHJcbiAgICAgICAgICAgICAgICB0X2lkID0gcmVxdWVzdF9udW1iZXI7XHJcbiAgICAgICAgICAgICAgICByZWNfd2FpdC5BZGQodF9pZCwgcmVjX3NvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoUHJvY2Vzc1JlcXVlc3RfY2hlY2tjb25uZWN0aW9uX2N1cnJlbnQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBQcm9jZXNzUmVxdWVzdF9jaGVja2Nvbm5lY3Rpb25fY3VycmVudCA9IFByb2Nlc3NSZXF1ZXN0X2NoZWNrY29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgcmVjX21lc3NhZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FuY2VsLlJlZ2lzdGVyKChBY3Rpb24pKGRlbGVnYXRlICgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjX3NvdXJjZS5UcnlTZXRDYW5jZWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBGdW5jPFRhc2s+IHIgPSBhc3luYyBkZWxlZ2F0ZSAoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFNlbmRNZXNzYWdlKG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjX21lc3NhZ2UgPSBhd2FpdCByZWNfc291cmNlLlRhc2s7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHIoKS5Bd2FpdFdpdGhUaW1lb3V0KChpbnQpbm9kZS5SZXF1ZXN0VGltZW91dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChyZWNfd2FpdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZWNfd2FpdC5SZW1vdmUodF9pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVjX21lc3NhZ2UuUmVxdWVzdElEICE9IHRfaWQpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhpcyBzaG91bGQgYmUgaW1wb3NzaWJsZSFcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVjX21lc3NhZ2UuRXJyb3IgIT0gTWVzc2FnZUVycm9yVHlwZS5Ob25lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFeGNlcHRpb24gZSA9IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uVXRpbC5NZXNzYWdlRW50cnlUb0V4Y2VwdGlvbihyZWNfbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBSb2JvdFJhY29udGV1clJlbW90ZUV4Y2VwdGlvbiBlMiA9IGUgYXMgUm9ib3RSYWNvbnRldXJSZW1vdGVFeGNlcHRpb247XHJcbiAgICAgICAgICAgICAgICBpZiAoZTIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBFeGNlcHRpb24gZTMgPSBTZXJ2aWNlRGVmLkRvd25DYXN0RXhjZXB0aW9uKGUyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZTMgIT0gbnVsbCkgZSA9IGUzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlY19tZXNzYWdlO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgVGFzayBQcm9jZXNzUmVxdWVzdF9jaGVja2Nvbm5lY3Rpb25fY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBUYXNrIFByb2Nlc3NSZXF1ZXN0X2NoZWNrY29ubmVjdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAocmVjX3dhaXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY193YWl0LkNvdW50IDwgMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb2Nlc3NSZXF1ZXN0X2NoZWNrY29ubmVjdGlvbl9jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLkNoZWNrQ29ubmVjdGlvbih0aGlzLkxvY2FsRW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVjX3dhaXQyID0gbmV3IExpc3Q8VGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZUVudHJ5Pj4oKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChyZWNfd2FpdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciByIGluIHJlY193YWl0LlZhbHVlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjX3dhaXQyLkFkZChyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gcmVjX3dhaXQyKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdC5UcnlTZXRFeGNlcHRpb24obmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJDb25uZWN0aW9uIGNsb3NlZFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFRhc2suRGVsYXkoNTAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgU2VuZE1lc3NhZ2UoTWVzc2FnZUVudHJ5IG0sIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vbS5TZXJ2aWNlTmFtZSA9IFNlcnZpY2VOYW1lO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFDb25uZWN0ZWQpIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiQ2xpZW50IGhhcyBiZWVuIGRpc2Nvbm5lY3RlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIE1lc3NhZ2UgbW0gPSBuZXcgTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICBtbS5oZWFkZXIgPSBuZXcgTWVzc2FnZUhlYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgbW0uZW50cmllcy5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICBMYXN0TWVzc2FnZVNlbnRUaW1lID0gRGF0ZVRpbWUuVXRjTm93O1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgU2VuZE1lc3NhZ2UobW0sIGNhbmNlbCk7XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb2JqZWN0IHJlY19sb2MgPSBuZXcgb2JqZWN0KCk7XHJcblxyXG4gICAgICAgIHByaXZhdGUgdWludCByZXF1ZXN0X251bWJlciA9IDA7XHJcbiAgICAgICAgLy9wcml2YXRlIEF1dG9SZXNldEV2ZW50IHJlY19ldmVudDtcclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgTWVzc2FnZVJlY2VpdmVkKE1lc3NhZ2UgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExhc3RNZXNzYWdlUmVjZWl2ZWRUaW1lID0gRGF0ZVRpbWUuVXRjTm93O1xyXG4gICAgICAgICAgICBpZiAobS5lbnRyaWVzLkNvdW50ID49IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtLmVudHJpZXNbMF0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuQ29ubmVjdENsaWVudFJldClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtX1JlbW90ZUVuZHBvaW50ID0gbS5oZWFkZXIuU2VuZGVyRW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbV9SZW1vdGVOb2RlSUQgPSBtLmhlYWRlci5TZW5kZXJOb2RlSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbV9SZW1vdGVOb2RlTmFtZSA9IG0uaGVhZGVyLlNlbmRlck5vZGVOYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtLmVudHJpZXNbMF0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuRW5kcG9pbnRDaGVja0NhcGFiaWxpdHkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2hlY2tFbmRwb2ludENhcGFiaWxpdHlNZXNzYWdlKG0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVudHJ5IG1tIGluIG0uZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1tLkVycm9yID09IE1lc3NhZ2VFcnJvclR5cGUuSW52YWxpZEVuZHBvaW50KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENsb3NlKCkuSWdub3JlUmVzdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5UmVjZWl2ZWQobW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBNZXNzYWdlRW50cnlSZWNlaXZlZChNZXNzYWdlRW50cnkgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vbG9jayAocmVjX2xvYylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuRXZlbnRSZXEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQWN0aW9uIGEgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChzdHVicylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8c3RyaW5nPihzdHVicy5LZXlzLG0uU2VydmljZVBhdGgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlU3R1YiBzdHViO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1YiA9IHN0dWJzW20uU2VydmljZVBhdGhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IChkZWxlZ2F0ZSAoKSB7IHN0dWIuRGlzcGF0Y2hFdmVudChtKTsgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zdHViLkRpc3BhdGNoRXZlbnQobSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGFzay5SdW4oKEFjdGlvbilhKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlByb3BlcnR5R2V0UmVzIHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuUHJvcGVydHlTZXRSZXMgfHwgbS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5GdW5jdGlvbkNhbGxSZXMgfHwgbS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5PYmplY3RUeXBlTmFtZVJldCB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLkNvbm5lY3RDbGllbnRSZXQgfHwgbS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5EaXNjb25uZWN0Q2xpZW50UmV0IHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuR2V0U2VydmljZURlc2NSZXQgfHwgKG0uRW50cnlUeXBlID49IE1lc3NhZ2VFbnRyeVR5cGUuUGlwZUNvbm5lY3RSZXEgJiYgbS5FbnRyeVR5cGUgPD0gTWVzc2FnZUVudHJ5VHlwZS5QaXBlRGlzY29ubmVjdFJldCkgfHwgbS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5DbGllbnRTZXNzaW9uT3BSZXQgfHwgbS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5XaXJlQ29ubmVjdFJldCB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLldpcmVEaXNjb25uZWN0UmV0IHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5UmVhZFJldCB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLk1lbW9yeVdyaXRlUmV0IHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5R2V0UGFyYW1SZXQgfHwgbS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5XaXJlUGVla0luVmFsdWVSZXQgfHwgbS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5XaXJlUGVla091dFZhbHVlUmV0IHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBva2VPdXRWYWx1ZVJldCB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLkdlbmVyYXRvck5leHRSZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uc29sZS5Xcml0ZUxpbmUoXCJHb3QgXCIgKyBtLlRyYW5zYWN0aW9uSUQgKyBcIiBcIiArIG0uRW50cnlUeXBlICsgXCIgXCIgKyBtLk1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2VFbnRyeT4gciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jayAocmVjX3dhaXQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1aW50IHRfaWQgPSBtLlJlcXVlc3RJRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlY193YWl0LkNvbnRhaW5zS2V5KHRfaWQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gcmVjX3dhaXRbdF9pZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyICE9IG51bGwpIHIuVHJ5U2V0UmVzdWx0KG0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlNlcnZpY2VDbG9zZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2UoKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuQ2xpZW50S2VlcEFsaXZlUmV0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5QaXBlUGFja2V0IHx8IG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuUGlwZUNsb3NlZCB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlBpcGVQYWNrZXRSZXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQWN0aW9uIGEgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKHN0dWJzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxzdHJpbmc+KHN0dWJzLktleXMsbS5TZXJ2aWNlUGF0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlcnZpY2VTdHViIHN0dWI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHViID0gc3R1YnNbbS5TZXJ2aWNlUGF0aF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gKGRlbGVnYXRlICgpIHsgc3R1Yi5EaXNwYXRjaFBpcGVNZXNzYWdlKG0pOyB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3N0dWIuRGlzcGF0Y2hFdmVudChtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBUYXNrLlJ1bigoQWN0aW9uKWEpLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBhY2tldCB8fCBtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLldpcmVDbG9zZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQWN0aW9uIGEgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKHN0dWJzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxzdHJpbmc+KHN0dWJzLktleXMsbS5TZXJ2aWNlUGF0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlcnZpY2VTdHViIHN0dWI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHViID0gc3R1YnNbbS5TZXJ2aWNlUGF0aF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZGVsZWdhdGUgKCkgeyBzdHViLkRpc3BhdGNoV2lyZU1lc3NhZ2UobSk7IH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zdHViLkRpc3BhdGNoRXZlbnQobSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRhc2suUnVuKChBY3Rpb24pYSkuSWdub3JlUmVzdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5TZXJ2aWNlUGF0aFJlbGVhc2VkUmVxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBwYXRoID0gbS5TZXJ2aWNlUGF0aDtcclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmdbXSBvYmprZXlzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxzdHJpbmc+KHN0dWJzLktleXMsKEZ1bmM8c3RyaW5nLGJvb2w+KSh4ID0+ICh4Lkxlbmd0aCA+PSBwYXRoLkxlbmd0aCkgJiYgKHguU3Vic3RyaW5nKDAsIHBhdGguTGVuZ3RoKSA9PSBwYXRoKSkpLlRvQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2lmIChvYmprZXlzLkNvdW50KCkgPT0gMCkgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJVbmtub3duIHNlcnZpY2UgcGF0aFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHBhdGgxIGluIG9iamtleXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1YnNbcGF0aDFdLlJSUmVsZWFzZUNvbnRleHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHVicy5SZW1vdmUocGF0aDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5DYWxsYmFja0NhbGxSZXEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJvY2Vzc0NhbGxiYWNrQ2FsbChtKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihcIlVua25vd24gc2VydmljZSBjb21tYW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIFBhY2tTdHJ1Y3R1cmUoT2JqZWN0IHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5QYWNrU3RydWN0dXJlKHMpOyA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVCBVbnBhY2tTdHJ1Y3R1cmU8VD4oTWVzc2FnZUVsZW1lbnRTdHJ1Y3R1cmUgbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlRGVmLlVucGFja1N0cnVjdHVyZTxUPihsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBQYWNrTWFwVHlwZTxLLCBUPihvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlRGVmLlBhY2tNYXBUeXBlPEssIFQ+KG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFBhY2tMaXN0VHlwZTxUPihvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlRGVmLlBhY2tMaXN0VHlwZTxUPihvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBQYWNrTXVsdGlEaW1BcnJheShNdWx0aURpbUFycmF5IG11bHRpRGltQXJyYXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5QYWNrTXVsdGlEaW1BcnJheShtdWx0aURpbUFycmF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBQYWNrVmFyVHlwZShvYmplY3QgcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlRGVmLlBhY2tWYXJUeXBlKHApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFVucGFja01hcFR5cGU8SywgVD4ob2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5VbnBhY2tNYXBUeXBlPEssIFQ+KG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFVucGFja0xpc3RUeXBlPFQ+KG9iamVjdCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2VEZWYuVW5wYWNrTGlzdFR5cGU8VD4obyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBNdWx0aURpbUFycmF5IFVucGFja011bHRpRGltQXJyYXkoTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmljZURlZi5VbnBhY2tNdWx0aURpbUFycmF5KG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFVucGFja1ZhclR5cGUoTWVzc2FnZUVsZW1lbnQgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlRGVmLlVucGFja1ZhclR5cGUobyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RyaW5nIG1fU2VydmljZU5hbWU7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTZXJ2aWNlTmFtZSB7IGdldCB7IHJldHVybiBtX1NlcnZpY2VOYW1lOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29ubmVjdGVkIHsgZ2V0IHsgcmV0dXJuIG1fQ29ubmVjdGVkOyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgYm9vbCBtX0Nvbm5lY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwcml2YXRlIFRyYW5zcG9ydCBjb25uZWN0dHJhbnNwb3J0O1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIGNvbm5lY3R1cmw7XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgRGljdGlvbmFyeTxzdHJpbmcsIG9iamVjdD4gQXR0cmlidXRlcyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgb2JqZWN0PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxvYmplY3Q+IENvbm5lY3RTZXJ2aWNlKFRyYW5zcG9ydCBjLCBzdHJpbmcgdXJsLCBzdHJpbmcgdXNlcm5hbWUgPSBudWxsLCBvYmplY3QgY3JlZGVudGlhbHMgPSBudWxsLCBzdHJpbmcgb2JqZWN0dHlwZSA9IG51bGwsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdHVybCA9IHVybDtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0dHJhbnNwb3J0ID0gYztcclxuICAgICAgICAgICAgdmFyIHUgPSBUcmFuc3BvcnRVdGlsLlBhcnNlQ29ubmVjdGlvblVybCh1cmwpO1xyXG5cclxuICAgICAgICAgICAgbV9SZW1vdGVOb2RlSUQgPSB1Lm5vZGVpZDtcclxuXHJcbiAgICAgICAgICAgIG1fUmVtb3RlTm9kZU5hbWUgPSB1Lm5vZGVuYW1lO1xyXG4gICAgICAgICAgICBtX1NlcnZpY2VOYW1lID0gdS5zZXJ2aWNlO1xyXG5cclxuICAgICAgICAgICAgLy9Qcm9ncmFtTmFtZSA9IFByb2dyYW1OYW1lMTtcclxuICAgICAgICAgICAgLyogdHJ5XHJcbiAgICAgICAgICAgICB7Ki9cclxuICAgICAgICAgICAgLy9pZiAoUm9ib3RSYWNvbnRldXJTZXJ2aWNlLnMudHJhbnNwb3J0c1tjXSA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCFjLkNhbkNvbm5lY3RTZXJ2aWNlKHVybCkpIHRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKFwiSW52YWxpZCB0cmFuc3BvcnRcIik7XHJcblxyXG4gICAgICAgICAgICBUcmFuc3BvcnRDb25uZWN0aW9uID0gYXdhaXQgYy5DcmVhdGVUcmFuc3BvcnRDb25uZWN0aW9uKHVybCwgdGhpcywgY2FuY2VsKTtcclxuICAgICAgICAgICAgbV9Db25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0ID0gYy5UcmFuc3BvcnRJRDtcclxuICAgICAgICAgICAgICAgIG1fUmVtb3RlRW5kcG9pbnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIFNlcnZpY2VEZWZpbml0aW9uW10gZCA9IGF3YWl0IFB1bGxTZXJ2aWNlRGVmaW5pdGlvbkFuZEltcG9ydHMobnVsbCwgY2FuY2VsOiBjYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvY2sgKHB1bGxlZF9zZXJ2aWNlX2RlZnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGQyIGluIGQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXB1bGxlZF9zZXJ2aWNlX2RlZnMuQ29udGFpbnNLZXkoZDIuTmFtZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bGxlZF9zZXJ2aWNlX2RlZnMuQWRkKGQyLk5hbWUsIGQyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIVVzZVB1bGxlZFNlcnZpY2VUeXBlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtX1NlcnZpY2VEZWYgPSBub2RlLkdldFNlcnZpY2VUeXBlKGRbMF0uTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBEeW5hbWljU2VydmljZUZhY3RvcnlfLkNyZWF0ZVNlcnZpY2VGYWN0b3JpZXMoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8U2VydmljZURlZmluaXRpb24sc3RyaW5nPihkLChGdW5jPFNlcnZpY2VEZWZpbml0aW9uLHN0cmluZz4pKHggPT4geC5Ub1N0cmluZygpKSkuVG9BcnJheSgpLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChwdWxsZWRfc2VydmljZV9kZWZzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGYyIGluIGYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHVsbGVkX3NlcnZpY2VfdHlwZXMuQ29udGFpbnNLZXkoZjIuR2V0U2VydmljZU5hbWUoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVsbGVkX3NlcnZpY2VfdHlwZXMuQWRkKGYyLkdldFNlcnZpY2VOYW1lKCksIGYyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtX1NlcnZpY2VEZWYgPSBHZXRQdWxsZWRTZXJ2aWNlVHlwZShkWzBdLk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBlID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLk9iamVjdFR5cGVOYW1lLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIC8vZS5BZGRFbGVtZW50KFwic2VydmljZXBhdGhcIiwgU2VydmljZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgZS5TZXJ2aWNlUGF0aCA9IFNlcnZpY2VOYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSByZXQgPSBhd2FpdCBQcm9jZXNzUmVxdWVzdChlLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJldC5FcnJvciAhPSBNZXNzYWdlRXJyb3JUeXBlLk5vbmUpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nIHR5cGUgPSByZXQuRmluZEVsZW1lbnQoXCJvYmplY3R0eXBlXCIpLkNhc3REYXRhPHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09IFwiXCIpIHJldHVybiBuZXcgT2JqZWN0Tm90Rm91bmRFeGNlcHRpb24oXCJDb3VsZCBub3QgZmluZCBvYmplY3QgdHlwZVwiKTsgO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0dHlwZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeU9iamVjdEltcGxlbWVudHModHlwZSwgb2JqZWN0dHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IG9iamVjdHR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHVsbFNlcnZpY2VEZWZpbml0aW9uQW5kSW1wb3J0cyhTZXJ2aWNlRGVmaW5pdGlvblV0aWwuU3BsaXRRdWFsaWZpZWROYW1lKHR5cGUpLkl0ZW0yLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRW50cnkgZTIgPSBuZXcgTWVzc2FnZUVudHJ5KCk7XHJcbiAgICAgICAgICAgICAgICBlMi5TZXJ2aWNlUGF0aCA9IFNlcnZpY2VOYW1lO1xyXG4gICAgICAgICAgICAgICAgZTIuTWVtYmVyTmFtZSA9IFwicmVnaXN0ZXJjbGllbnRcIjtcclxuICAgICAgICAgICAgICAgIGUyLkVudHJ5VHlwZSA9IE1lc3NhZ2VFbnRyeVR5cGUuQ29ubmVjdENsaWVudDtcclxuICAgICAgICAgICAgICAgIGF3YWl0IFByb2Nlc3NSZXF1ZXN0KGUyLCBjYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh1c2VybmFtZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IEF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIGNyZWRlbnRpYWxzLCBjYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIFNlcnZpY2VTdHViIHN0dWIgPSBTZXJ2aWNlRGVmLkNyZWF0ZVN0dWIodHlwZSwgU2VydmljZU5hbWUsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgc3R1YnMuQWRkKFNlcnZpY2VOYW1lLCBzdHViKTtcclxuICAgICAgICAgICAgICAgIFRhc2sgbm9vcCA9IFBlcmlvZGljVGFzay5SdW4oKEFjdGlvbilQZXJpb2RpY0NsZWFudXBUYXNrLCBUaW1lU3Bhbi5Gcm9tU2Vjb25kcyg1KSwgY2FuY2VsX3NvdXJjZS5Ub2tlbikuSWdub3JlUmVzdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0dWI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNwb3J0Q29ubmVjdGlvbi5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcblxyXG4gICAgICAgICAgICAgICAgbV9Db25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvKn1cclxuICAgICAgICAgICAgY2F0Y2ggeyBcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyBcclxuICAgICAgICAgICAgfSovXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgY2FuY2VsX3NvdXJjZSA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIENsb3NlKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2FuY2VsX3NvdXJjZS5DYW5jZWwoKTtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRW50cnkgZSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5EaXNjb25uZWN0Q2xpZW50LCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIGUuQWRkRWxlbWVudChcInNlcnZpY2VuYW1lXCIsIFNlcnZpY2VOYW1lKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IFByb2Nlc3NSZXF1ZXN0KGUsIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgc3R1YnMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgbV9Db25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgbm9kZS5EZWxldGVFbmRwb2ludCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQ2xpZW50U2VydmljZUxpc3RlbmVyICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50U2VydmljZUxpc3RlbmVyKHRoaXMsIENsaWVudFNlcnZpY2VMaXN0ZW5lckV2ZW50VHlwZS5DbGllbnRDbG9zZWQsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFZlcmlmeU9iamVjdEltcGxlbWVudHMoc3RyaW5nIG9iamVjdHR5cGUsIHN0cmluZyBpbXBsZW1lbnRzdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghVmVyaWZ5T2JqZWN0SW1wbGVtZW50czIob2JqZWN0dHlwZSwgaW1wbGVtZW50c3R5cGUpKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJJbnZhbGlkIG9iamVjdCB0eXBlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBib29sIFZlcmlmeU9iamVjdEltcGxlbWVudHMyKHN0cmluZyBvYmplY3R0eXBlLCBzdHJpbmcgaW1wbGVtZW50c3R5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0dHlwZSA9PSBpbXBsZW1lbnRzdHlwZSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgczEgPSBTZXJ2aWNlRGVmaW5pdGlvblV0aWwuU3BsaXRRdWFsaWZpZWROYW1lKG9iamVjdHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwdWxsZWRfc2VydmljZV9kZWZzLkNvbnRhaW5zS2V5KHMxLkl0ZW0xKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1RPRE86IGhhbmRsZSB0aGlzIGJldHRlcj9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFwdWxsZWRfc2VydmljZV9kZWZzLkNvbnRhaW5zS2V5KHMxLkl0ZW0xKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkID0gcHVsbGVkX3NlcnZpY2VfZGVmc1tzMS5JdGVtMV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG8gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PEtleVZhbHVlUGFpcjxzdHJpbmcsU2VydmljZUVudHJ5RGVmaW5pdGlvbj4+KGQuT2JqZWN0cywoRnVuYzxLZXlWYWx1ZVBhaXI8c3RyaW5nLFNlcnZpY2VFbnRyeURlZmluaXRpb24+LGJvb2w+KSh4ID0+IHguVmFsdWUuTmFtZSA9PSBzMS5JdGVtMikpLlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG8gPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gby5JbXBsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZ0eXBlID0gZC5OYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmp0eXBlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxjaGFyPihlLCcuJykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmp0eXBlID0gZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMyID0gU2VydmljZURlZmluaXRpb25VdGlsLlNwbGl0UXVhbGlmaWVkTmFtZShlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmdHlwZSA9IHMyLkl0ZW0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmp0eXBlID0gczIuSXRlbTI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGRlZnR5cGUgKyBcIi5cIiArIG9ianR5cGUpID09IGltcGxlbWVudHN0eXBlKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoVmVyaWZ5T2JqZWN0SW1wbGVtZW50czIoZGVmdHlwZSArIFwiLlwiICsgb2JqdHlwZSwgaW1wbGVtZW50c3R5cGUpKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgU2VuZFBpcGVNZXNzYWdlKE1lc3NhZ2VFbnRyeSBtLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL20uRW50cnlUeXBlPSBNZXNzYWdlRW50cnlUeXBlLlBpcGVQYWNrZXQ7XHJcbiAgICAgICAgICAgIGF3YWl0IFNlbmRNZXNzYWdlKG0sIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgU2VuZFdpcmVNZXNzYWdlKE1lc3NhZ2VFbnRyeSBtLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL20uRW50cnlUeXBlPSBNZXNzYWdlRW50cnlUeXBlLlBpcGVQYWNrZXQ7XHJcbiAgICAgICAgICAgIGF3YWl0IFNlbmRNZXNzYWdlKG0sIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgbV9Vc2VyQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBVc2VyQXV0aGVudGljYXRlZCB7IGdldCB7IHJldHVybiBtX1VzZXJBdXRoZW50aWNhdGVkOyB9IH1cclxuICAgICAgICBwcml2YXRlIHN0cmluZyBtX0F1dGhlbnRpY2F0ZWRVc2VybmFtZTtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEF1dGhlbnRpY2F0ZWRVc2VybmFtZSB7IGdldCB7IHJldHVybiBtX0F1dGhlbnRpY2F0ZWRVc2VybmFtZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPHN0cmluZz4gQXV0aGVudGljYXRlVXNlcihzdHJpbmcgdXNlcm5hbWUsIG9iamVjdCBjcmVkZW50aWFscywgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5DbGllbnRTZXNzaW9uT3BSZXEsIFwiQXV0aGVudGljYXRlVXNlclwiKTtcclxuICAgICAgICAgICAgbS5TZXJ2aWNlUGF0aCA9IFNlcnZpY2VOYW1lO1xyXG4gICAgICAgICAgICBtLkFkZEVsZW1lbnQoXCJ1c2VybmFtZVwiLCB1c2VybmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChjcmVkZW50aWFscyBpcyBEaWN0aW9uYXJ5PHN0cmluZywgb2JqZWN0PilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbS5BZGRFbGVtZW50KFwiY3JlZGVudGlhbHNcIiwgUGFja01hcFR5cGU8c3RyaW5nLCBvYmplY3Q+KGNyZWRlbnRpYWxzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY3JlZGVudGlhbHMgaXMgTWVzc2FnZUVsZW1lbnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50IG1jcmVkZW50aWFscyA9IChNZXNzYWdlRWxlbWVudCljcmVkZW50aWFscztcclxuICAgICAgICAgICAgICAgIG1jcmVkZW50aWFscy5FbGVtZW50TmFtZSA9IFwiY3JlZGVudGlhbHNcIjtcclxuICAgICAgICAgICAgICAgIG0uQWRkRWxlbWVudChtY3JlZGVudGlhbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSByZXQgPSBhd2FpdCBQcm9jZXNzUmVxdWVzdChtLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICBtX0F1dGhlbnRpY2F0ZWRVc2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgICAgICAgICBtX1VzZXJBdXRoZW50aWNhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHJldC5GaW5kRWxlbWVudChcInJldHVyblwiKS5DYXN0RGF0YTxzdHJpbmc+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxzdHJpbmc+IExvZ291dFVzZXIoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIVVzZXJBdXRoZW50aWNhdGVkKSB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FeGNlcHRpb24oXCJVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXCIpO1xyXG5cclxuICAgICAgICAgICAgbV9Vc2VyQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBtX0F1dGhlbnRpY2F0ZWRVc2VybmFtZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5DbGllbnRTZXNzaW9uT3BSZXEsIFwiTG9nb3V0VXNlclwiKTtcclxuICAgICAgICAgICAgbS5TZXJ2aWNlUGF0aCA9IFNlcnZpY2VOYW1lO1xyXG4gICAgICAgICAgICBtLkFkZEVsZW1lbnQoXCJ1c2VybmFtZVwiLCBBdXRoZW50aWNhdGVkVXNlcm5hbWUpO1xyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgcmV0ID0gYXdhaXQgUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJldC5GaW5kRWxlbWVudChcInJldHVyblwiKS5DYXN0RGF0YTxzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8c3RyaW5nPiBSZXF1ZXN0T2JqZWN0TG9jayhvYmplY3Qgb2JqLCBSb2JvdFJhY29udGV1ck9iamVjdExvY2tGbGFncyBmbGFncywgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgU2VydmljZVN0dWIpKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkNhbiBvbmx5IGxvY2sgb2JqZWN0IG9wZW5lZCB0aHJvdWdoIFJvYm90IFJhY29udGV1clwiKTtcclxuICAgICAgICAgICAgU2VydmljZVN0dWIgcyA9IChTZXJ2aWNlU3R1YilvYmo7XHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgY29tbWFuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGlmIChmbGFncyA9PSBSb2JvdFJhY29udGV1ck9iamVjdExvY2tGbGFncy5VU0VSX0xPQ0spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmQgPSBcIlJlcXVlc3RPYmplY3RMb2NrXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZmxhZ3MgPT0gUm9ib3RSYWNvbnRldXJPYmplY3RMb2NrRmxhZ3MuQ0xJRU5UX0xPQ0spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmQgPSBcIlJlcXVlc3RDbGllbnRPYmplY3RMb2NrXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIlVua25vd24gZmxhZ3NcIik7XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5DbGllbnRTZXNzaW9uT3BSZXEsIGNvbW1hbmQpO1xyXG4gICAgICAgICAgICBtLlNlcnZpY2VQYXRoID0gcy5SUlNlcnZpY2VQYXRoO1xyXG5cclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IHJldCA9IGF3YWl0IFByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQuRmluZEVsZW1lbnQoXCJyZXR1cm5cIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxzdHJpbmc+IFJlbGVhc2VPYmplY3RMb2NrKG9iamVjdCBvYmosIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCEob2JqIGlzIFNlcnZpY2VTdHViKSkgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJDYW4gb25seSB1bmxvY2sgb2JqZWN0IG9wZW5lZCB0aHJvdWdoIFJvYm90IFJhY29udGV1clwiKTtcclxuICAgICAgICAgICAgU2VydmljZVN0dWIgcyA9IChTZXJ2aWNlU3R1YilvYmo7XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5DbGllbnRTZXNzaW9uT3BSZXEsIFwiUmVsZWFzZU9iamVjdExvY2tcIik7XHJcbiAgICAgICAgICAgIG0uU2VydmljZVBhdGggPSBzLlJSU2VydmljZVBhdGg7XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgcmV0ID0gYXdhaXQgUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJldC5GaW5kRWxlbWVudChcInJldHVyblwiKS5DYXN0RGF0YTxzdHJpbmc+KCk7XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxSb2JvdFJhY29udGV1ck5vZGUuTW9uaXRvckxvY2s+IE1vbml0b3JFbnRlcihvYmplY3Qgb2JqLCBpbnQgdGltZW91dCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBib29sIGlzZXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICBJRGlzcG9zYWJsZSBsb2NrXyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCEob2JqIGlzIFNlcnZpY2VTdHViKSkgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJDYW4gb25seSB1bmxvY2sgb2JqZWN0IG9wZW5lZCB0aHJvdWdoIFJvYm90IFJhY29udGV1clwiKTtcclxuICAgICAgICAgICAgICAgIFNlcnZpY2VTdHViIHMgPSAoU2VydmljZVN0dWIpb2JqO1xyXG4gICAgICAgICAgICAgICAgbG9ja18gPSBhd2FpdCBzLnJyX2FzeW5jX211dGV4LkxvY2soKTtcclxuXHJcbiAgICAgICAgICAgICAgICBib29sIGtlZXBfdHJ5aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLkNsaWVudFNlc3Npb25PcFJlcSwgXCJNb25pdG9yRW50ZXJcIik7XHJcbiAgICAgICAgICAgICAgICBtLlNlcnZpY2VQYXRoID0gcy5SUlNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICAgICAgbS5BZGRFbGVtZW50KFwidGltZW91dFwiLCB0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRW50cnkgcmV0ID0gYXdhaXQgUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgICAgIHN0cmluZyByZXRjb2RlID0gcmV0LkZpbmRFbGVtZW50KFwicmV0dXJuXCIpLkNhc3REYXRhPHN0cmluZz4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmV0Y29kZSA9PSBcIk9LXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNlcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUm9ib3RSYWNvbnRldXJOb2RlLk1vbml0b3JMb2NrXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NrXyA9IGxvY2tfLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHViID0gc1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChyZXRjb2RlID09IFwiQ29udGludWVcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoa2VlcF90cnlpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRW50cnkgbTEgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuQ2xpZW50U2Vzc2lvbk9wUmVxLCBcIk1vbml0b3JDb250aW51ZUVudGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtMS5TZXJ2aWNlUGF0aCA9IHMuUlJTZXJ2aWNlUGF0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSByZXQxID0gYXdhaXQgUHJvY2Vzc1JlcXVlc3QobTEsIGNhbmNlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyByZXRjb2RlMSA9IHJldDEuRmluZEVsZW1lbnQoXCJyZXR1cm5cIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0Y29kZTEgPT0gXCJPS1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJvYm90UmFjb250ZXVyTm9kZS5Nb25pdG9yTG9ja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2tfID0gbG9ja18sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1YiA9IHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldGNvZGUxICE9IFwiQ29udGludWVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvY29sRXhjZXB0aW9uKFwiVW5rbm93biByZXR1cm4gY29kZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9jb2xFeGNlcHRpb24oXCJVbmtub3duIHJldHVybiBjb2RlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc2Vycm9yKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NrXyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2tfLkRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9Nb25pdG9yLkV4aXQob2JqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvY29sRXhjZXB0aW9uKFwiVW5rbm93biByZXR1cm4gY29kZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIE1vbml0b3JFeGl0KFJvYm90UmFjb250ZXVyTm9kZS5Nb25pdG9yTG9jayBsb2NrXywgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuQ2xpZW50U2Vzc2lvbk9wUmVxLCBcIk1vbml0b3JFeGl0XCIpO1xyXG4gICAgICAgICAgICAgICAgbS5TZXJ2aWNlUGF0aCA9IGxvY2tfLnN0dWIuUlJTZXJ2aWNlUGF0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRW50cnkgcmV0ID0gYXdhaXQgUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgICAgIHN0cmluZyByZXRjb2RlID0gcmV0LkZpbmRFbGVtZW50KFwicmV0dXJuXCIpLkNhc3REYXRhPHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXRjb2RlICE9IFwiT0tcIikgdGhyb3cgbmV3IFByb3RvY29sRXhjZXB0aW9uKFwiVW5rbm93biByZXR1cm4gY29kZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2tfLmxvY2tfLkRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBEYXRlVGltZSBMYXN0TWVzc2FnZVNlbnRUaW1lID0gRGF0ZVRpbWUuVXRjTm93O1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQZXJpb2RpY0NsZWFudXBUYXNrKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgoRGF0ZVRpbWUuVXRjTm93IC0gTGFzdE1lc3NhZ2VSZWNlaXZlZFRpbWUpLlRvdGFsTWlsbGlzZWNvbmRzID4gbm9kZS5FbmRwb2ludEluYWN0aXZpdHlUaW1lb3V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDbG9zZSgpLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobV9SZW1vdGVFbmRwb2ludCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKERhdGVUaW1lLlV0Y05vdyAtIExhc3RNZXNzYWdlU2VudFRpbWUpLlRvdGFsTWlsbGlzZWNvbmRzID4gNjAwMDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuQ2xpZW50S2VlcEFsaXZlUmVxLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtLlNlcnZpY2VQYXRoID0gbV9TZXJ2aWNlTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBtLlJlcXVlc3RJRCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VuZE1lc3NhZ2UobSwgZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazx1aW50PiBDaGVja1NlcnZpY2VDYXBhYmlsaXR5KHN0cmluZyBuYW1lLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLlNlcnZpY2VDaGVja0NhcGFiaWxpdHlSZXEsIG5hbWUpO1xyXG4gICAgICAgICAgICBtLlNlcnZpY2VQYXRoID0gbV9TZXJ2aWNlTmFtZTtcclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IHJldCA9IGF3YWl0IFByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHVpbnQgcmVzID0gcmV0LkZpbmRFbGVtZW50KFwicmV0dXJuXCIpLkNhc3REYXRhPHVpbnQ+KCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBDbGllbnRTZXJ2aWNlTGlzdGVuZXJEZWxlZ2F0ZShDbGllbnRDb250ZXh0IGNsaWVudCwgQ2xpZW50U2VydmljZUxpc3RlbmVyRXZlbnRUeXBlIGV2LCBvYmplY3QgcGFyYW1ldGVyKTtcclxuXHJcbiAgICAgICAgcHVibGljIGV2ZW50IENsaWVudFNlcnZpY2VMaXN0ZW5lckRlbGVnYXRlIENsaWVudFNlcnZpY2VMaXN0ZW5lcjtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFzeW5jIFRhc2sgUHJvY2Vzc0NhbGxiYWNrQ2FsbChNZXNzYWdlRW50cnkgbSlcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgcmV0ID0gbnVsbDtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNlcnZpY2VTdHViIHM7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChzdHVicylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0dWJzLkNvbnRhaW5zS2V5KG0uU2VydmljZVBhdGgpKSB0aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihcIlN0dWIgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMgPSBzdHVic1ttLlNlcnZpY2VQYXRoXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldCA9IGF3YWl0IHMuQ2FsbGJhY2tDYWxsKG0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShtLkVudHJ5VHlwZSArIDEsIG0uTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICByZXQuU2VydmljZVBhdGggPSBtLlNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICAgICAgcmV0LlJlcXVlc3RJRCA9IG0uUmVxdWVzdElEO1xyXG4gICAgICAgICAgICAgICAgUm9ib3RSYWNvbnRldXJFeGNlcHRpb25VdGlsLkV4Y2VwdGlvblRvTWVzc2FnZUVudHJ5KGUsIHJldCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBTZW5kTWVzc2FnZShyZXQsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYXN5bmMgVGFzazxTZXJ2aWNlRGVmaW5pdGlvbj4gUHVsbFNlcnZpY2VEZWZpbml0aW9uKHN0cmluZyBzZXJ2aWNldHlwZSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGUzID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLkdldFNlcnZpY2VEZXNjLCBcIlwiKTtcclxuICAgICAgICAgICAgZTMuU2VydmljZVBhdGggPSBtX1NlcnZpY2VOYW1lO1xyXG4gICAgICAgICAgICBpZiAoc2VydmljZXR5cGUgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZTMuQWRkRWxlbWVudChcIlNlcnZpY2VUeXBlXCIsIHNlcnZpY2V0eXBlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHJlcyA9IGF3YWl0IFByb2Nlc3NSZXF1ZXN0KGUzLCBjYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRlZiA9IHJlcy5GaW5kRWxlbWVudChcInNlcnZpY2VkZWZcIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICBpZiAoZGVmID09IFwiXCIpIHRocm93IG5ldyBTZXJ2aWNlTm90Rm91bmRFeGNlcHRpb24oXCJDb3VsZCBub3QgZmluZCBzZXJ2aWNlIGRlZmluaXRpb25cIik7XHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IFNlcnZpY2VEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgICAgIGQuRnJvbVN0cmluZyhkZWYpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlcnZpY2V0eXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxNZXNzYWdlRWxlbWVudD4ocmVzLmVsZW1lbnRzLChGdW5jPE1lc3NhZ2VFbGVtZW50LGJvb2w+KSh4ID0+IHguRWxlbWVudE5hbWUgPT0gXCJhdHRyaWJ1dGVzXCIpKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVzID0gKERpY3Rpb25hcnk8c3RyaW5nLCBvYmplY3Q+KW5vZGUuVW5wYWNrTWFwVHlwZTxzdHJpbmcsIG9iamVjdD4ocmVzLkZpbmRFbGVtZW50KFwiYXR0cmlidXRlc1wiKS5DYXN0RGF0YTxNZXNzYWdlRWxlbWVudE1hcDxzdHJpbmc+PigpLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFzeW5jIFRhc2s8U2VydmljZURlZmluaXRpb25bXT4gUHVsbFNlcnZpY2VEZWZpbml0aW9uQW5kSW1wb3J0cyhzdHJpbmcgc2VydmljZXR5cGUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkZWZzID0gbmV3IExpc3Q8U2VydmljZURlZmluaXRpb24+KCk7XHJcbiAgICAgICAgICAgIHZhciByb290ID0gYXdhaXQgUHVsbFNlcnZpY2VEZWZpbml0aW9uKHNlcnZpY2V0eXBlLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICBkZWZzLkFkZChyb290KTtcclxuICAgICAgICAgICAgaWYgKHJvb3QuSW1wb3J0cy5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmcy5Ub0FycmF5KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHJvb3QuSW1wb3J0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8U2VydmljZURlZmluaXRpb24+KGRlZnMsKEZ1bmM8U2VydmljZURlZmluaXRpb24sYm9vbD4pKHggPT4geC5OYW1lID09IGkpKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZzMiA9IGF3YWl0IFB1bGxTZXJ2aWNlRGVmaW5pdGlvbkFuZEltcG9ydHMoaSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZCBpbiBkZWZzMilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PFNlcnZpY2VEZWZpbml0aW9uPihkZWZzLChGdW5jPFNlcnZpY2VEZWZpbml0aW9uLGJvb2w+KSh4ID0+IHguTmFtZSA9PSBkLk5hbWUpKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZzLkFkZChkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRlZnMuVG9BcnJheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRmFjdG9yeT4gcHVsbGVkX3NlcnZpY2VfdHlwZXMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VGYWN0b3J5PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VydmljZUZhY3RvcnkgR2V0UHVsbGVkU2VydmljZVR5cGUoc3RyaW5nIHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTZXJ2aWNlRmFjdG9yeSBmO1xyXG4gICAgICAgICAgICBpZiAoIVRyeUdldFB1bGxlZFNlcnZpY2VUeXBlKHR5cGUsIG91dCBmKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJVbmtub3duIHNlcnZpY2UgdHlwZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFRyeUdldFB1bGxlZFNlcnZpY2VUeXBlKHN0cmluZyB0eXBlLCBvdXQgU2VydmljZUZhY3RvcnkgZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHB1bGxlZF9zZXJ2aWNlX3R5cGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHVsbGVkX3NlcnZpY2VfdHlwZXMuVHJ5R2V0VmFsdWUodHlwZSwgb3V0IGYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nW10gR2V0UHVsbGVkU2VydmljZVR5cGVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHB1bGxlZF9zZXJ2aWNlX3R5cGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PHN0cmluZz4ocHVsbGVkX3NlcnZpY2VfdHlwZXMuS2V5cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZURlZmluaXRpb24+IHB1bGxlZF9zZXJ2aWNlX2RlZnMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VEZWZpbml0aW9uPigpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGVudW0gQ2xpZW50U2VydmljZUxpc3RlbmVyRXZlbnRUeXBlXHJcbiAgICB7XHJcbiAgICAgICAgQ2xpZW50Q2xvc2VkID0gMVxyXG4gICAgfVxyXG5cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgMjAxMS0yMDE5IFdhc29uIFRlY2hub2xvZ3ksIExMQ1xyXG4vL1xyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4vL1xyXG4vLyAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuLy9cclxuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBSb2JvdFJhY29udGV1ckV4Y2VwdGlvbiA6IEV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBSb2JvdFJhY29udGV1ckV4Y2VwdGlvbigpXHJcbiAgICAgICAgICAgIDogYmFzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFJvYm90UmFjb250ZXVyRXhjZXB0aW9uKE1lc3NhZ2VFcnJvclR5cGUgRXJyb3JDb2RlLCBzdHJpbmcgZXJyb3IsIHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UobWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgICAgIHRoaXMuRXJyb3JDb2RlID0gRXJyb3JDb2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFJvYm90UmFjb250ZXVyRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlLCBFeGNlcHRpb24gaW5uZXJleGNlcHRpb24pXHJcbiAgICAgICAgICAgIDogYmFzZShtZXNzYWdlLCBpbm5lcmV4Y2VwdGlvbilcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFcnJvclR5cGUgRXJyb3JDb2RlID0gTWVzc2FnZUVycm9yVHlwZS5Ob25lO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEVycm9yID0gXCJcIjtcclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJSb2JvdFJhY29udGV1ckV4Y2VwdGlvbjogXCIgKyBFcnJvciArIFwiOiBcIiArIE1lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBDb25uZWN0aW9uRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgQ29ubmVjdGlvbkV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuQ29ubmVjdGlvbkVycm9yLCBcIlJvYm90UmFjb250ZXVyLkNvbm5lY3Rpb25FcnJvclwiLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgUHJvdG9jb2xFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBQcm90b2NvbEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuUHJvdG9jb2xFcnJvciwgXCJSb2JvdFJhY29udGV1ci5Qcm90b2NvbEVycm9yXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJ2aWNlTm90Rm91bmRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlTm90Rm91bmRFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLlNlcnZpY2VOb3RGb3VuZCwgXCJSb2JvdFJhY29udGV1ci5TZXJ2aWNlTm90Rm91bmRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIE9iamVjdE5vdEZvdW5kRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgT2JqZWN0Tm90Rm91bmRFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLk9iamVjdE5vdEZvdW5kLCBcIlJvYm90UmFjb250ZXVyLk9iamVjdE5vdEZvdW5kXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBJbnZhbGlkRW5kcG9pbnRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBJbnZhbGlkRW5kcG9pbnRFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLkludmFsaWRFbmRwb2ludCwgXCJSb2JvdFJhY29udGV1ci5JbnZhbGlkRW5kcG9pbnRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIEVuZHBvaW50Q29tbXVuaWNhdGlvbkZhdGFsRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRW5kcG9pbnRDb21tdW5pY2F0aW9uRmF0YWxFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLkVuZHBvaW50Q29tbXVuaWNhdGlvbkZhdGFsRXJyb3IsIFwiUm9ib3RSYWNvbnRldXIuRW5kcG9pbnRDb21tdW5pY2F0aW9uRmF0YWxFcnJvclwiLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgTm9kZU5vdEZvdW5kRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTm9kZU5vdEZvdW5kRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5Ob2RlTm90Rm91bmQsIFwiUm9ib3RSYWNvbnRldXIuTm9kZU5vdEZvdW5kXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJ2aWNlRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgU2VydmljZUV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuU2VydmljZUVycm9yLCBcIlJvYm90UmFjb250ZXVyLlNlcnZpY2VFcnJvclwiLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBNZW1iZXJOb3RGb3VuZEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuTWVtYmVyTm90Rm91bmQsIFwiUm9ib3RSYWNvbnRldXIuTWVtYmVyTm90Rm91bmRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIE1lbWJlckZvcm1hdE1pc21hdGNoRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTWVtYmVyRm9ybWF0TWlzbWF0Y2hFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLk1lbWJlckZvcm1hdE1pc21hdGNoLCBcIlJvYm90UmFjb250ZXVyLk1lbWJlckZvcm1hdE1pc21hdGNoXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhVHlwZU1pc21hdGNoRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRGF0YVR5cGVNaXNtYXRjaEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuRGF0YVR5cGVNaXNtYXRjaCwgXCJSb2JvdFJhY29udGV1ci5EYXRhVHlwZU1pc21hdGNoXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhVHlwZUV4Y2VwdGlvbiA6IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIERhdGFUeXBlRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5EYXRhVHlwZUVycm9yLCBcIlJvYm90UmFjb250ZXVyLkRhdGFUeXBlRXJyb3JcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIERhdGFTZXJpYWxpemF0aW9uRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRGF0YVNlcmlhbGl6YXRpb25FeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLkRhdGFTZXJpYWxpemF0aW9uRXJyb3IsIFwiUm9ib3RSYWNvbnRldXIuRGF0YVNlcmlhbGl6YXRpb25FcnJvclwiLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgTWVzc2FnZUVudHJ5Tm90Rm91bmRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRW50cnlOb3RGb3VuZEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuTWVzc2FnZUVudHJ5Tm90Rm91bmQsIFwiUm9ib3RSYWNvbnRldXIuTWVzc2FnZUVudHJ5Tm90Rm91bmRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIE1lc3NhZ2VFbGVtZW50Tm90Rm91bmRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRWxlbWVudE5vdEZvdW5kRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5NZXNzYWdlRWxlbWVudE5vdEZvdW5kLCBcIlJvYm90UmFjb250ZXVyLk1lc3NhZ2VFbGVtZW50Tm90Rm91bmRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIFVua25vd25FeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBVbmtub3duRXhjZXB0aW9uKHN0cmluZyBlcnJvciwgc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLlVua25vd25FcnJvciwgZXJyb3IsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBPcGVyYXRpb25GYWlsZWRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBPcGVyYXRpb25GYWlsZWRFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLk9wZXJhdGlvbkZhaWxlZCwgXCJSb2JvdFJhY29udGV1ci5PcGVyYXRpb25GYWlsZWRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIEludGVybmFsRXJyb3JFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBJbnRlcm5hbEVycm9yRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5JbnRlcm5hbEVycm9yLCBcIlJvYm90UmFjb250ZXVyLkludGVybmFsRXJyb3JcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIFN5c3RlbVJlc291cmNlUGVybWlzc2lvbkRlbmllZEV4Y2VwdGlvbiA6IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFN5c3RlbVJlc291cmNlUGVybWlzc2lvbkRlbmllZEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuU3lzdGVtUmVzb3VyY2VQZXJtaXNzaW9uRGVuaWVkLCBcIlJvYm90UmFjb250ZXVyLlN5c3RlbVJlc291cmNlUGVybWlzc2lvbkRlbmllZFwiLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgT3V0T2ZTeXN0ZW1SZXNvdXJjZUV4Y2VwdGlvbiA6IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIE91dE9mU3lzdGVtUmVzb3VyY2VFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLk91dE9mU3lzdGVtUmVzb3VyY2UsIFwiUm9ib3RSYWNvbnRldXIuT3V0T2ZTeXN0ZW1SZXNvdXJjZVwiLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgU3lzdGVtUmVzb3VyY2VFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTeXN0ZW1SZXNvdXJjZUV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuU3lzdGVtUmVzb3VyY2VFcnJvciwgXCJSb2JvdFJhY29udGV1ci5TeXN0ZW1SZXNvdXJjZUVycm9yXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBSZXNvdXJjZU5vdEZvdW5kRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgUmVzb3VyY2VOb3RGb3VuZEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuUmVzb3VyY2VOb3RGb3VuZCwgXCJSb2JvdFJhY29udGV1ci5SZXNvdXJjZU5vdEZvdW5kXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBJT0V4Y2VwdGlvbiA6IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIElPRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5JT0Vycm9yLCBcIlJvYm90UmFjb250ZXVyLklPRXJyb3JcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIEJ1ZmZlckxpbWl0VmlvbGF0aW9uRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgQnVmZmVyTGltaXRWaW9sYXRpb25FeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLkJ1ZmZlckxpbWl0VmlvbGF0aW9uLCBcIlJvYm90UmFjb250ZXVyLkJ1ZmZlckxpbWl0VmlvbGF0aW9uXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbiA6IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5TZXJ2aWNlRGVmaW5pdGlvbkVycm9yLCBcIlJvYm90UmFjb250ZXVyLlN5c3RlbURlZmluaXRpb25FcnJvclwiLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgT3V0T2ZSYW5nZUV4Y2VwdGlvbiA6IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIE91dE9mUmFuZ2VFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLk91dE9mUmFuZ2UsIFwiUm9ib3RSYWNvbnRldXIuT3V0T2ZSYW5nZVwiLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgS2V5Tm90Rm91bmRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBLZXlOb3RGb3VuZEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuS2V5Tm90Rm91bmQsIFwiUm9ib3RSYWNvbnRldXIuS2V5Tm90Rm91bmRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIFJvYm90UmFjb250ZXVyUmVtb3RlRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgUm9ib3RSYWNvbnRldXJSZW1vdGVFeGNlcHRpb24oc3RyaW5nIGVycm9yLCBzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuUmVtb3RlRXJyb3IsIGVycm9yLCBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgUmVxdWVzdFRpbWVvdXRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBSZXF1ZXN0VGltZW91dEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuUmVxdWVzdFRpbWVvdXQsIFwiUm9ib3RSYWNvbnRldXIuUmVxdWVzdFRpbWVvdXRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIFJlYWRPbmx5TWVtYmVyRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgUmVhZE9ubHlNZW1iZXJFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLlJlYWRPbmx5TWVtYmVyLCBcIlJvYm90UmFjb250ZXVyLlJlYWRPbmx5TWVtYmVyXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBXcml0ZU9ubHlNZW1iZXJFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBXcml0ZU9ubHlNZW1iZXJFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLldyaXRlT25seU1lbWJlciwgXCJSb2JvdFJhY29udGV1ci5Xcml0ZU9ubHlNZW1iZXJcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIE1lbWJlckJ1c3lFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBNZW1iZXJCdXN5RXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5NZW1iZXJCdXN5LCBcIlJvYm90UmFjb250ZXVyLk1lbWJlckJ1c3lcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIFZhbHVlTm90U2V0RXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVmFsdWVOb3RTZXRFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLlZhbHVlTm90U2V0LCBcIlJvYm90UmFjb250ZXVyLlZhbHVlTm90U2V0XCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBBdXRoZW50aWNhdGlvbkV4Y2VwdGlvbiA6IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5BdXRoZW50aWNhdGlvbkVycm9yLCBcIlJvYm90UmFjb250ZXVyLkF1dGhlbnRpY2F0aW9uRXJyb3JcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIE9iamVjdExvY2tlZEV4Y2VwdGlvbiA6IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIE9iamVjdExvY2tlZEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuT2JqZWN0TG9ja2VkRXJyb3IsIFwiUm9ib3RSYWNvbnRldXIuT2JqZWN0TG9ja2VkRXJyb3JcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIFBlcm1pc3Npb25EZW5pZWRFeGNlcHRpb24gOiBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBQZXJtaXNzaW9uRGVuaWVkRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKVxyXG4gICAgICAgICAgICA6IGJhc2UoTWVzc2FnZUVycm9yVHlwZS5QZXJtaXNzaW9uRGVuaWVkLCBcIlJvYm90UmFjb250ZXVyLlBlcm1pc3Npb25EZW5pZWRcIiwgbWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIEFib3J0T3BlcmF0aW9uRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgQWJvcnRPcGVyYXRpb25FeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIDogYmFzZShNZXNzYWdlRXJyb3JUeXBlLkFib3J0T3BlcmF0aW9uLCBcIlJvYm90UmFjb250ZXVyLkFib3J0T3BlcmF0aW9uXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBPcGVyYXRpb25BYm9ydGVkRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgT3BlcmF0aW9uQWJvcnRlZEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuT3BlcmF0aW9uQWJvcnRlZCwgXCJSb2JvdFJhY29udGV1ci5PcGVyYXRpb25BYm9ydGVkXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBTdG9wSXRlcmF0aW9uRXhjZXB0aW9uIDogUm9ib3RSYWNvbnRldXJFeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgU3RvcEl0ZXJhdGlvbkV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSlcclxuICAgICAgICAgICAgOiBiYXNlKE1lc3NhZ2VFcnJvclR5cGUuU3RvcEl0ZXJhdGlvbiwgXCJSb2JvdFJhY29udGV1ci5TdG9wSXRlcmF0aW9uXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgUm9ib3RSYWNvbnRldXJFeGNlcHRpb25VdGlsXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEV4Y2VwdGlvblRvTWVzc2FnZUVudHJ5KEV4Y2VwdGlvbiBleGNlcHRpb24sIE1lc3NhZ2VFbnRyeSBlbnRyeSlcclxuICAgICAgICB7XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbiBpcyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeS5FcnJvciA9IE1lc3NhZ2VFcnJvclR5cGUuSW52YWxpZE9wZXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIGVudHJ5LkFkZEVsZW1lbnQoXCJlcnJvcm5hbWVcIiwgXCJSb2JvdFJhY29udGV1ci5JbnZhbGlkT3BlcmF0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgZW50cnkuQWRkRWxlbWVudChcImVycm9yc3RyaW5nXCIsIGV4Y2VwdGlvbi5NZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbiBpcyBBcmd1bWVudEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnkuRXJyb3IgPSBNZXNzYWdlRXJyb3JUeXBlLkludmFsaWRBcmd1bWVudDtcclxuICAgICAgICAgICAgICAgIGVudHJ5LkFkZEVsZW1lbnQoXCJlcnJvcm5hbWVcIiwgXCJSb2JvdFJhY29udGV1ci5JbnZhbGlkQXJndW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICBlbnRyeS5BZGRFbGVtZW50KFwiZXJyb3JzdHJpbmdcIiwgZXhjZXB0aW9uLk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZXhjZXB0aW9uIGlzIE51bGxSZWZlcmVuY2VFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LkVycm9yID0gTWVzc2FnZUVycm9yVHlwZS5OdWxsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBlbnRyeS5BZGRFbGVtZW50KFwiZXJyb3JuYW1lXCIsIFwiUm9ib3RSYWNvbnRldXIuTnVsbFZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgZW50cnkuQWRkRWxlbWVudChcImVycm9yc3RyaW5nXCIsIGV4Y2VwdGlvbi5NZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbiBpcyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnkuRXJyb3IgPSBNZXNzYWdlRXJyb3JUeXBlLk5vdEltcGxlbWVudGVkRXJyb3I7XHJcbiAgICAgICAgICAgICAgICBlbnRyeS5BZGRFbGVtZW50KFwiZXJyb3JuYW1lXCIsIFwiUm9ib3RSYWNvbnRldXIuTm90SW1wbGVtZW50ZWRFcnJvclwiKTtcclxuICAgICAgICAgICAgICAgIGVudHJ5LkFkZEVsZW1lbnQoXCJlcnJvcnN0cmluZ1wiLCBleGNlcHRpb24uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoZXhjZXB0aW9uIGlzIFJvYm90UmFjb250ZXVyRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSb2JvdFJhY29udGV1ckV4Y2VwdGlvbiByID0gKFJvYm90UmFjb250ZXVyRXhjZXB0aW9uKWV4Y2VwdGlvbjtcclxuICAgICAgICAgICAgICAgIGVudHJ5LkVycm9yID0gci5FcnJvckNvZGU7XHJcbiAgICAgICAgICAgICAgICBlbnRyeS5BZGRFbGVtZW50KFwiZXJyb3JuYW1lXCIsIHIuRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgZW50cnkuQWRkRWxlbWVudChcImVycm9yc3RyaW5nXCIsIHIuTWVzc2FnZSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnkuRXJyb3IgPSBNZXNzYWdlRXJyb3JUeXBlLlJlbW90ZUVycm9yO1xyXG4gICAgICAgICAgICAgICAgZW50cnkuQWRkRWxlbWVudChcImVycm9ybmFtZVwiLCBleGNlcHRpb24uR2V0VHlwZSgpLlRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgZW50cnkuQWRkRWxlbWVudChcImVycm9yc3RyaW5nXCIsIGV4Y2VwdGlvbi5NZXNzYWdlKTtcclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBFeGNlcHRpb24gTWVzc2FnZUVudHJ5VG9FeGNlcHRpb24oTWVzc2FnZUVudHJ5IGVudHJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVycm9yX2NvZGUgPSBlbnRyeS5FcnJvcjtcclxuICAgICAgICAgICAgdmFyIGVycm9ybmFtZSA9IGVudHJ5LkZpbmRFbGVtZW50KFwiZXJyb3JuYW1lXCIpLkNhc3REYXRhPHN0cmluZz4oKTtcclxuICAgICAgICAgICAgdmFyIGVycm9yc3RyaW5nID0gZW50cnkuRmluZEVsZW1lbnQoXCJlcnJvcnN0cmluZ1wiKS5DYXN0RGF0YTxzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yX2NvZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5SZW1vdGVFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICBSb2JvdFJhY29udGV1ckV4Y2VwdGlvbiBlMSA9IG5ldyBSb2JvdFJhY29udGV1clJlbW90ZUV4Y2VwdGlvbihlcnJvcm5hbWUsIGVycm9yc3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTE7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLkNvbm5lY3Rpb25FcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5Qcm90b2NvbEVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvdG9jb2xFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5TZXJ2aWNlTm90Rm91bmQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXJ2aWNlTm90Rm91bmRFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5PYmplY3ROb3RGb3VuZDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9iamVjdE5vdEZvdW5kRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuSW52YWxpZEVuZHBvaW50OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZEVuZHBvaW50RXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuRW5kcG9pbnRDb21tdW5pY2F0aW9uRmF0YWxFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVuZHBvaW50Q29tbXVuaWNhdGlvbkZhdGFsRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuTm9kZU5vdEZvdW5kOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTm9kZU5vdEZvdW5kRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuU2VydmljZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2VydmljZUV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLk1lbWJlck5vdEZvdW5kOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5NZW1iZXJGb3JtYXRNaXNtYXRjaDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1lbWJlckZvcm1hdE1pc21hdGNoRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuRGF0YVR5cGVNaXNtYXRjaDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFUeXBlTWlzbWF0Y2hFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5EYXRhVHlwZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YVR5cGVFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5EYXRhU2VyaWFsaXphdGlvbkVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YVNlcmlhbGl6YXRpb25FeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5NZXNzYWdlRW50cnlOb3RGb3VuZDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VFbnRyeU5vdEZvdW5kRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuTWVzc2FnZUVsZW1lbnROb3RGb3VuZDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VFbGVtZW50Tm90Rm91bmRFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5Vbmtub3duRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVbmtub3duRXhjZXB0aW9uKGVycm9ybmFtZSwgZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5JbnZhbGlkT3BlcmF0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLkludmFsaWRBcmd1bWVudDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFyZ3VtZW50RXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuT3BlcmF0aW9uRmFpbGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT3BlcmF0aW9uRmFpbGVkRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuTnVsbFZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTnVsbFJlZmVyZW5jZUV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLkludGVybmFsRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlcm5hbEVycm9yRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuU3lzdGVtUmVzb3VyY2VQZXJtaXNzaW9uRGVuaWVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU3lzdGVtUmVzb3VyY2VQZXJtaXNzaW9uRGVuaWVkRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuT3V0T2ZTeXN0ZW1SZXNvdXJjZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE91dE9mU3lzdGVtUmVzb3VyY2VFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5TeXN0ZW1SZXNvdXJjZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU3lzdGVtUmVzb3VyY2VFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5SZXNvdXJjZU5vdEZvdW5kOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VOb3RGb3VuZEV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLklPRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJT0V4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLkJ1ZmZlckxpbWl0VmlvbGF0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyTGltaXRWaW9sYXRpb25FeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5TZXJ2aWNlRGVmaW5pdGlvbkVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5PdXRPZlJhbmdlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT3V0T2ZSYW5nZUV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLktleU5vdEZvdW5kOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgS2V5Tm90Rm91bmRFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5SZXF1ZXN0VGltZW91dDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlcXVlc3RUaW1lb3V0RXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuUmVhZE9ubHlNZW1iZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkT25seU1lbWJlckV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLldyaXRlT25seU1lbWJlcjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFdyaXRlT25seU1lbWJlckV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLk5vdEltcGxlbWVudGVkRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLk1lbWJlckJ1c3k6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNZW1iZXJCdXN5RXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuVmFsdWVOb3RTZXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZU5vdFNldEV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLkF1dGhlbnRpY2F0aW9uRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdXRoZW50aWNhdGlvbkV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRXJyb3JUeXBlLk9iamVjdExvY2tlZEVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0TG9ja2VkRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuUGVybWlzc2lvbkRlbmllZDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBlcm1pc3Npb25EZW5pZWRFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5BYm9ydE9wZXJhdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFib3J0T3BlcmF0aW9uRXhjZXB0aW9uKGVycm9yc3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFcnJvclR5cGUuT3BlcmF0aW9uQWJvcnRlZDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9wZXJhdGlvbkFib3J0ZWRFeGNlcHRpb24oZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVycm9yVHlwZS5TdG9wSXRlcmF0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU3RvcEl0ZXJhdGlvbkV4Y2VwdGlvbihlcnJvcnN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uKGVycm9yX2NvZGUsIGVycm9ybmFtZSwgZXJyb3JzdHJpbmcpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IDIwMTEtMjAxOSBXYXNvbiBUZWNobm9sb2d5LCBMTENcclxuLy9cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy9cclxuLy8gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbi8vXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnM7XHJcblxyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBcnJheUJpbmFyeVdyaXRlciA6IEJpbmFyeVdyaXRlclxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGludCBidWZzaXplPTYwMDAwO1xyXG4gICAgICAgIHByaXZhdGUgYnl0ZVtdIGFidWZmZXIgPSBuZXcgYnl0ZVtidWZzaXplXTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIG1lbXN0cmVhbT1mYWxzZTtcclxuICAgICAgICBwcml2YXRlIE1lbW9yeVN0cmVhbSBzX21lbXN0cmVhbTtcclxuICAgICAgICBwcml2YXRlIGJ5dGVbXSBtZW1idWY7XHJcblxyXG4gICAgICAgIHB1YmxpYyAgQXJyYXlCaW5hcnlXcml0ZXIoU3RyZWFtIHMsIGludCBsZW5ndGgpIDogYmFzZShzKSB7XHJcblxyXG4gICAgICAgICAgICBsaW1pdHMuUHVzaCgodWludClsZW5ndGgpO1xyXG4gICAgICAgICAgICAgIG1lbXN0cmVhbSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFycmF5QmluYXJ5V3JpdGVyKE1lbW9yeVN0cmVhbSBzLCBieXRlW10gbWVtYnVmMSwgaW50IGxlbmd0aCkgOiBiYXNlKHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzX21lbXN0cmVhbSA9IHM7XHJcbiAgICAgICAgICAgIG1lbXN0cmVhbSA9IHRydWU7XHJcbiAgICAgICAgICAgIG1lbWJ1ZiA9IG1lbWJ1ZjE7XHJcbiAgICAgICAgICAgIGxpbWl0cy5QdXNoKCh1aW50KWxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBXcml0ZUFycmF5KEFycmF5IGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEuTGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSBpcyBDRG91YmxlW10pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAoQ0RvdWJsZVtdKWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhMiA9IG5ldyBkb3VibGVbYTEuTGVuZ3RoKjJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpPTA7IGk8YTEuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEyW2kgKiAyXSA9IGExW2ldLlJlYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMltpICogMisxXSA9IGExW2ldLkltYWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGVBcnJheShhMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhIGlzIENTaW5nbGVbXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhMSA9IChDU2luZ2xlW10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEyID0gbmV3IGZsb2F0W2ExLkxlbmd0aCoyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhMS5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYTJbaSAqIDJdID0gYTFbaV0uUmVhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEyW2kgKiAyICsgMV0gPSBhMVtpXS5JbWFnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlQXJyYXkoYTIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnQgbCA9IGEuTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBibCA9IEJ1ZmZlci5CeXRlTGVuZ3RoKGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmwgKyBQb3NpdGlvbiA+IEN1cnJlbnRMaW1pdCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTWVzc2FnZSB3cml0ZSBlcnJvclwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbXN0cmVhbSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtX1Bvc2l0aW9uICs9ICh1aW50KWJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2J5dGVbXSBiID0gc19tZW1zdHJlYW0uR2V0QnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZmZlci5CbG9ja0NvcHkoYSwgMCwgbWVtYnVmLCAoaW50KXNfbWVtc3RyZWFtLlBvc2l0aW9uLCBibCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNfbWVtc3RyZWFtLlBvc2l0aW9uID0gc19tZW1zdHJlYW0uUG9zaXRpb24gKyBibDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLkdldFR5cGUoKS5HZXRFbGVtZW50VHlwZSgpLlRvU3RyaW5nKCkgPT0gXCJieXRlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlKChieXRlW10pYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBuID0gYmwgLyBidWZzaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IG5tID0gYmwgJSBidWZzaXplO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZmZlci5CbG9ja0NvcHkoYSwgaSAqIGJ1ZnNpemUsIGFidWZmZXIsIDAsIGJ1ZnNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlKGFidWZmZXIsIDAsIGJ1ZnNpemUpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnVmZmVyLkJsb2NrQ29weShhLCAobikgKiBidWZzaXplLCBhYnVmZmVyLCAwLCBubSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUoYWJ1ZmZlciwgMCwgbm0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtX1Bvc2l0aW9uICs9ICh1aW50KWJsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldFN0cmluZ0J5dGVDb3VudDgoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVVRGOEVuY29kaW5nLlVURjguR2V0Qnl0ZUNvdW50KHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgV3JpdGVTdHJpbmc4KFN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGJ5dGVbXSBiPVVURjhFbmNvZGluZy5VVEY4LkdldEJ5dGVzKHMpO1xyXG4gICAgICAgICAgICBpZiAoYi5MZW5ndGggKyBQb3NpdGlvbiA+IEN1cnJlbnRMaW1pdCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTWVzc2FnZSB3cml0ZSBlcnJvclwiKTtcclxuICAgICAgICAgICAgV3JpdGUoYik7XHJcbiAgICAgICAgICAgIG1fUG9zaXRpb24gKz0gKHVpbnQpYi5MZW5ndGg7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICBcclxuICAgICAgICBwdWJsaWMgdm9pZCBXcml0ZU51bWJlcihPYmplY3QgbiwgRGF0YVR5cGVzIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHQpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5kb3VibGVfdDpcclxuICAgICAgICAgICAgICAgICAgICBXcml0ZSgoZG91YmxlKW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnNpbmdsZV90OlxyXG4gICAgICAgICAgICAgICAgICAgIFdyaXRlKChmbG9hdCluKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQ4X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgV3JpdGUoKHNieXRlKW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnVpbnQ4X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgV3JpdGUoKGJ5dGUpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50MTZfdDpcclxuICAgICAgICAgICAgICAgICAgICBXcml0ZSgoc2hvcnQpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDE2X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgV3JpdGUoKHVzaG9ydCluKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQzMl90OlxyXG4gICAgICAgICAgICAgICAgICAgIFdyaXRlKChpbnQpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDMyX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgV3JpdGUoKHVpbnQpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50NjRfdDpcclxuICAgICAgICAgICAgICAgICAgICBXcml0ZSgobG9uZyluKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50NjRfdDpcclxuICAgICAgICAgICAgICAgICAgICBXcml0ZSgodWxvbmcpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJVbmtub3duIGRhdGEgdHlwZSB0byB3cml0ZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFdyaXRlKGJ5dGVbXSBidWZmZXIsIGludCBpbmRleCwgaW50IGNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGNvdW50ICsgUG9zaXRpb24gPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2Ugd3JpdGUgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIGJhc2UuV3JpdGUoYnVmZmVyLCBpbmRleCwgY291bnQpO1xyXG4gICAgICAgICAgICAvL21fUG9zaXRpb24gKz0gKHVpbnQpY291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBXcml0ZShkb3VibGUgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoOCArIFBvc2l0aW9uID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHdyaXRlIGVycm9yXCIpO1xyXG4gICAgICAgICAgICBiYXNlLldyaXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSA4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgV3JpdGUoZmxvYXQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoNCArIFBvc2l0aW9uID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHdyaXRlIGVycm9yXCIpO1xyXG4gICAgICAgICAgICBiYXNlLldyaXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSA0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgV3JpdGUoYnl0ZSB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgxICsgUG9zaXRpb24gPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2Ugd3JpdGUgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIGJhc2UuV3JpdGUodmFsdWUpO1xyXG4gICAgICAgICAgICBtX1Bvc2l0aW9uICs9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBXcml0ZShzYnl0ZSB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgxICsgUG9zaXRpb24gPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2Ugd3JpdGUgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIGJhc2UuV3JpdGUodmFsdWUpO1xyXG4gICAgICAgICAgICBtX1Bvc2l0aW9uICs9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBXcml0ZShzaG9ydCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgyICsgUG9zaXRpb24gPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2Ugd3JpdGUgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIGJhc2UuV3JpdGUodmFsdWUpO1xyXG4gICAgICAgICAgICBtX1Bvc2l0aW9uICs9IDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBXcml0ZSh1c2hvcnQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoMiArIFBvc2l0aW9uID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHdyaXRlIGVycm9yXCIpO1xyXG4gICAgICAgICAgICBiYXNlLldyaXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgV3JpdGUoaW50IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKDQgKyBQb3NpdGlvbiA+IEN1cnJlbnRMaW1pdCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTWVzc2FnZSB3cml0ZSBlcnJvclwiKTtcclxuICAgICAgICAgICAgYmFzZS5Xcml0ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIG1fUG9zaXRpb24gKz0gNDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFdyaXRlKHVpbnQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoNCArIFBvc2l0aW9uID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHdyaXRlIGVycm9yXCIpO1xyXG4gICAgICAgICAgICBiYXNlLldyaXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSA0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgV3JpdGUobG9uZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICg4ICsgUG9zaXRpb24gPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2Ugd3JpdGUgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIGJhc2UuV3JpdGUodmFsdWUpO1xyXG4gICAgICAgICAgICBtX1Bvc2l0aW9uICs9IDg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBXcml0ZSh1bG9uZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICg4ICsgUG9zaXRpb24gPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2Ugd3JpdGUgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIGJhc2UuV3JpdGUodmFsdWUpO1xyXG4gICAgICAgICAgICBtX1Bvc2l0aW9uICs9IDg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTdGFjazx1aW50PiBsaW1pdHMgPSBuZXcgU3RhY2s8dWludD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHVpbnQgQ3VycmVudExpbWl0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbWl0cy5QZWVrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB1aW50IG1fUG9zaXRpb24gPSAwO1xyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBQb3NpdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtX1Bvc2l0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQdXNoUmVsYXRpdmVMaW1pdCh1aW50IGxpbWl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFBvc2l0aW9uICsgbGltaXQgPiBDdXJyZW50TGltaXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkVycm9yIHJlYWRpbmcgbWVzc2FnZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGltaXRzLlB1c2goUG9zaXRpb24gKyBsaW1pdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQdXNoQWJzb2x1dGVMaW1pdCh1aW50IGxpbWl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGxpbWl0ID4gQ3VycmVudExpbWl0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJFcnJvciByZWFkaW5nIG1lc3NhZ2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxpbWl0cy5QdXNoKGxpbWl0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFBvcExpbWl0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxpbWl0cy5Qb3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGlzdGFuY2VGcm9tTGltaXRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGludClDdXJyZW50TGltaXQgLSAoaW50KW1fUG9zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlc2V0KGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsaW1pdHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgbGltaXRzLlB1c2goKHVpbnQpbGVuZ3RoKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyA8c3VtbWFyeT5cclxuICAgIHB1YmxpYyBjbGFzcyBBcnJheUJpbmFyeVJlYWRlciA6IEJpbmFyeVJlYWRlclxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGludCBidWZzaXplID0gNjAwMDA7XHJcbiAgICAgICAgcHJpdmF0ZSBieXRlW10gYWJ1ZmZlciA9IG5ldyBieXRlW2J1ZnNpemVdO1xyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgbWVtc3RyZWFtID0gZmFsc2U7XHJcbiAgICAgICAgcHJpdmF0ZSBNZW1vcnlTdHJlYW0gc19tZW1zdHJlYW07XHJcblxyXG4gICAgICAgIHByaXZhdGUgYnl0ZVtdIG1lbWJ1ZjtcclxuXHJcbiAgICAgICAgcHVibGljICBBcnJheUJpbmFyeVJlYWRlcihTdHJlYW0gcywgaW50IGxlbmd0aCkgOiBiYXNlKHMpIHtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgbWVtc3RyZWFtID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgbGltaXRzLlB1c2goKHVpbnQpbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBcnJheUJpbmFyeVJlYWRlcihNZW1vcnlTdHJlYW0gcywgYnl0ZVtdIG1lbWJ1ZjEsIGludCBsZW5ndGgpIDogYmFzZShzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc19tZW1zdHJlYW0gPSBzO1xyXG4gICAgICAgICAgICBtZW1zdHJlYW0gPSB0cnVlO1xyXG4gICAgICAgICAgICBtZW1idWYgPSBtZW1idWYxO1xyXG4gICAgICAgICAgICBsaW1pdHMuUHVzaCgodWludClsZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVhZEFycmF5KEFycmF5IGEpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChhICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChhLkxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEgaXMgQ0RvdWJsZVtdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGExID0gKENEb3VibGVbXSlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTIgPSBuZXcgZG91YmxlW2ExLkxlbmd0aCoyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhZEFycmF5KGEyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhMS5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYTFbaV0gPSBuZXcgQ0RvdWJsZShhMltpICogMl0sIGEyW2kgKiAyKzFdKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEgaXMgQ1NpbmdsZVtdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGExID0gKENTaW5nbGVbXSlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTIgPSBuZXcgZmxvYXRbYTEuTGVuZ3RoKjJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFkQXJyYXkoYTIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGExLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMVtpXSA9IG5ldyBDU2luZ2xlKGEyW2kgKiAyXSwgYTJbaSAqIDIgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGwgPSBhLkxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgYmwgPSBCdWZmZXIuQnl0ZUxlbmd0aChhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbXN0cmVhbSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIGJsID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHJlYWQgZXJyb3JcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2J5dGVbXSBiID0gc19tZW1zdHJlYW0uR2V0QnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZmZlci5CbG9ja0NvcHkobWVtYnVmLCAoaW50KXNfbWVtc3RyZWFtLlBvc2l0aW9uLCBhLCAwLCBibCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNfbWVtc3RyZWFtLlBvc2l0aW9uID0gc19tZW1zdHJlYW0uUG9zaXRpb24gKyBibDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1fUG9zaXRpb24gKz0gKHVpbnQpYmw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIGJsID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHJlYWQgZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLkdldFR5cGUoKS5HZXRFbGVtZW50VHlwZSgpLlRvU3RyaW5nKCkgPT0gXCJieXRlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWQoKGJ5dGVbXSlhLCAwLCBhLkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgbiA9IGJsIC8gYnVmc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBubSA9IGJsICUgYnVmc2l6ZTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWQoYWJ1ZmZlciwgMCwgYnVmc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnVmZmVyLkJsb2NrQ29weShhYnVmZmVyLCAwLCBhLCBpICogYnVmc2l6ZSwgYnVmc2l6ZSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5tID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkKGFidWZmZXIsIDAsIG5tKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdWZmZXIuQmxvY2tDb3B5KGFidWZmZXIsIDAsIGEsIChuKSAqIGJ1ZnNpemUsIG5tKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSAodWludClibDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3RyaW5nIFJlYWRTdHJpbmc4KHVpbnQgbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGVbXSBiID0gbmV3IGJ5dGVbbF07XHJcbiAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIGIuTGVuZ3RoID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHJlYWQgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIGludCBuPVJlYWQoYiwwLGIuTGVuZ3RoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICBzdHJpbmcgcz1VVEY4RW5jb2RpbmcuVVRGOC5HZXRTdHJpbmcoYik7XHJcbiAgICAgICAgICAgICBpZiAocy5Db250YWlucyhcIlxcMFwiKSlcclxuICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShcIm51bGxcIik7XHJcbiAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSAodWludCliLkxlbmd0aDtcclxuICAgICAgICAgICAgIHJldHVybiBzO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBPYmplY3QgUmVhZE51bWJlcihEYXRhVHlwZXMgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2l0Y2ggKHQpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5kb3VibGVfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZERvdWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuc2luZ2xlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlYWRTaW5nbGUoKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDhfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZFNCeXRlKCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50OF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWFkQnl0ZSgpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50MTZfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZEludDE2KCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MTZfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZFVJbnQxNigpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50MzJfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZEludDMyKCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MzJfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZFVJbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50NjRfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZEludDY0KCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50NjRfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhZFVJbnQ2NCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJVbmtub3duIGRhdGEgdHlwZSB0byByZWFkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBSZWFkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIDEgPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2UgcmVhZCBlcnJvclwiKTtcclxuICAgICAgICAgICAgdmFyIGk9IGJhc2UuUmVhZCgpO1xyXG4gICAgICAgICAgICAvL21fUG9zaXRpb24gKz0gMTtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IFJlYWQoYnl0ZVtdIGJ1ZmZlciwgaW50IGluZGV4LCBpbnQgY291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUG9zaXRpb24gKyBjb3VudCA+IEN1cnJlbnRMaW1pdCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTWVzc2FnZSByZWFkIGVycm9yXCIpO1xyXG4gICAgICAgICAgICB2YXIgaT1iYXNlLlJlYWQoYnVmZmVyLCBpbmRleCwgY291bnQpO1xyXG4gICAgICAgICAgICAvL21fUG9zaXRpb24gKz0gKHVpbnQpaTtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgZG91YmxlIFJlYWREb3VibGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFBvc2l0aW9uICsgOCA+IEN1cnJlbnRMaW1pdCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTWVzc2FnZSByZWFkIGVycm9yXCIpO1xyXG4gICAgICAgICAgICB2YXIgaSA9IGJhc2UuUmVhZERvdWJsZSgpO1xyXG4gICAgICAgICAgICBtX1Bvc2l0aW9uICs9IDg7XHJcbiAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGZsb2F0IFJlYWRTaW5nbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFBvc2l0aW9uICsgNCA+IEN1cnJlbnRMaW1pdCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTWVzc2FnZSByZWFkIGVycm9yXCIpO1xyXG4gICAgICAgICAgICB2YXIgaT0gYmFzZS5SZWFkU2luZ2xlKCk7XHJcbiAgICAgICAgICAgIG1fUG9zaXRpb24gKz0gNDtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc2J5dGUgUmVhZFNCeXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIDEgPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2UgcmVhZCBlcnJvclwiKTtcclxuICAgICAgICAgICAgdmFyIGk9YmFzZS5SZWFkU0J5dGUoKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSAxO1xyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBieXRlIFJlYWRCeXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIDEgPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2UgcmVhZCBlcnJvclwiKTtcclxuICAgICAgICAgICAgdmFyIGk9IGJhc2UuUmVhZEJ5dGUoKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSAxO1xyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzaG9ydCBSZWFkSW50MTYoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFBvc2l0aW9uICsgMiA+IEN1cnJlbnRMaW1pdCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTWVzc2FnZSByZWFkIGVycm9yXCIpO1xyXG4gICAgICAgICAgICB2YXIgaT0gYmFzZS5SZWFkSW50MTYoKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSAyO1xyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB1c2hvcnQgUmVhZFVJbnQxNigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUG9zaXRpb24gKyAyID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHJlYWQgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIHZhciBpPSBiYXNlLlJlYWRVSW50MTYoKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSAyO1xyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgUmVhZEludDMyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIDQgPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2UgcmVhZCBlcnJvclwiKTtcclxuICAgICAgICAgICAgdmFyIGk9IGJhc2UuUmVhZEludDMyKCk7XHJcbiAgICAgICAgICAgIG1fUG9zaXRpb24gKz0gNDtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdWludCBSZWFkVUludDMyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIDQgPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2UgcmVhZCBlcnJvclwiKTtcclxuICAgICAgICAgICAgdmFyIGk9IGJhc2UuUmVhZFVJbnQzMigpO1xyXG4gICAgICAgICAgICBtX1Bvc2l0aW9uICs9IDQ7XHJcbiAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGxvbmcgUmVhZEludDY0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQb3NpdGlvbiArIDggPiBDdXJyZW50TGltaXQpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2UgcmVhZCBlcnJvclwiKTtcclxuICAgICAgICAgICAgdmFyIGk9IGJhc2UuUmVhZEludDY0KCk7XHJcbiAgICAgICAgICAgIG1fUG9zaXRpb24gKz0gODtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdWxvbmcgUmVhZFVJbnQ2NCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUG9zaXRpb24gKyA4ID4gQ3VycmVudExpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHJlYWQgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIHZhciBpPSBiYXNlLlJlYWRVSW50NjQoKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiArPSA4O1xyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFN0YWNrPHVpbnQ+IGxpbWl0cyA9IG5ldyBTdGFjazx1aW50PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBDdXJyZW50TGltaXRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGltaXRzLlBlZWsoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHVpbnQgbV9Qb3NpdGlvbj0wO1xyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBQb3NpdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtX1Bvc2l0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQdXNoUmVsYXRpdmVMaW1pdCh1aW50IGxpbWl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFBvc2l0aW9uICsgbGltaXQgPiBDdXJyZW50TGltaXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkVycm9yIHJlYWRpbmcgbWVzc2FnZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGltaXRzLlB1c2goUG9zaXRpb24gKyBsaW1pdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQdXNoQWJzb2x1dGVMaW1pdCh1aW50IGxpbWl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGxpbWl0ID4gQ3VycmVudExpbWl0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJFcnJvciByZWFkaW5nIG1lc3NhZ2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxpbWl0cy5QdXNoKGxpbWl0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFBvcExpbWl0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxpbWl0cy5Qb3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGlzdGFuY2VGcm9tTGltaXRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGludClDdXJyZW50TGltaXQgLSAoaW50KW1fUG9zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlc2V0KGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsaW1pdHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgbGltaXRzLlB1c2goKHVpbnQpbGVuZ3RoKTtcclxuICAgICAgICAgICAgbV9Qb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbntcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQXJyYXlNZW1vcnlCYXNlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFRhc2s8dWxvbmc+IEdldExlbmd0aChDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBjbGFzcyBBcnJheU1lbW9yeTxUPiA6IEFycmF5TWVtb3J5QmFzZVxyXG4gICAge1xyXG5cclxuICAgICAgICBwcml2YXRlIFRbXSBtZW1vcnk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBBcnJheU1lbW9yeSgpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBcnJheU1lbW9yeShUW10gbWVtb3J5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tZW1vcnkgPSBtZW1vcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIEF0dGFjaChUW10gbWVtb3J5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tZW1vcnkgPSBtZW1vcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVGFzazx1bG9uZz4gR2V0TGVuZ3RoKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8dWxvbmc+KCh1bG9uZyltZW1vcnkuTG9uZ0xlbmd0aCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBUYXNrIFJlYWQodWxvbmcgbWVtb3J5cG9zLCBUW10gYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWw9ZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcnJheS5Db3B5KG1lbW9yeSwgKGxvbmcpbWVtb3J5cG9zLCBidWZmZXIsIChsb25nKWJ1ZmZlcnBvcywgKGxvbmcpY291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBUYXNrIFdyaXRlKHVsb25nIG1lbW9yeXBvcywgVFtdIGJ1ZmZlciwgdWxvbmcgYnVmZmVycG9zLCB1bG9uZyBjb3VudCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcnJheS5Db3B5KGJ1ZmZlciwgKGxvbmcpYnVmZmVycG9zLCBtZW1vcnksIChsb25nKW1lbW9yeXBvcywgKGxvbmcpY291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBNdWx0aURpbUFycmF5TWVtb3J5QmFzZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBUYXNrPHVsb25nW10+IEdldERpbWVuc2lvbnMoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgVGFzazx1bG9uZz4gR2V0RGltQ291bnQoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpOyAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE11bHRpRGltQXJyYXlNZW1vcnk8VD4gOiBNdWx0aURpbUFycmF5TWVtb3J5QmFzZVxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgTXVsdGlEaW1BcnJheSBtdWx0aW1lbW9yeTtcclxuXHJcbiAgICAgICAgcHVibGljIE11bHRpRGltQXJyYXlNZW1vcnkoKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTXVsdGlEaW1BcnJheU1lbW9yeShNdWx0aURpbUFycmF5IG1lbW9yeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG11bHRpbWVtb3J5ID0gbWVtb3J5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBBdHRhY2goTXVsdGlEaW1BcnJheSBtZW1vcnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm11bHRpbWVtb3J5ID0gbWVtb3J5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVGFzazx1bG9uZ1tdPiBHZXREaW1lbnNpb25zKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDx1bG9uZ1tdPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1aW50LHVsb25nPihtdWx0aW1lbW9yeS5EaW1zLChGdW5jPHVpbnQsdWxvbmc+KSh4ID0+ICh1bG9uZyl4KSkuVG9BcnJheSgpKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrPHVsb25nPiBHZXREaW1Db3VudChDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8dWxvbmc+KCh1bG9uZyltdWx0aW1lbW9yeS5EaW1zLkxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFRhc2sgUmVhZCh1bG9uZ1tdIG1lbW9yeXBvcywgTXVsdGlEaW1BcnJheSBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG11bHRpbWVtb3J5LlJldHJpZXZlU3ViQXJyYXkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4obWVtb3J5cG9zLChGdW5jPHVsb25nLHVpbnQ+KSh4PT4odWludCl4KSkuVG9BcnJheSgpLCBidWZmZXIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KGJ1ZmZlcnBvcywoRnVuYzx1bG9uZyx1aW50PikoeD0+KHVpbnQpeCkpLlRvQXJyYXkoKSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHg9Pih1aW50KXgpKS5Ub0FycmF5KCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBUYXNrIFdyaXRlKHVsb25nW10gbWVtb3J5cG9zLCBNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbXVsdGltZW1vcnkuQXNzaWduU3ViQXJyYXkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4obWVtb3J5cG9zLChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCksIGJ1ZmZlciwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oYnVmZmVycG9zLChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCksIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KGNvdW50LChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBcnJheU1lbW9yeVNlcnZpY2VTa2VsQmFzZVxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBzdHJpbmcgbV9NZW1iZXJOYW1lO1xyXG4gICAgICAgIHByb3RlY3RlZCBTZXJ2aWNlU2tlbCBza2VsOyAgICAgICAgXHJcbiAgICAgICAgcHJvdGVjdGVkIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbjtcclxuICAgICAgICBwcm90ZWN0ZWQgRGF0YVR5cGVzIGVsZW1lbnRfdHlwZTtcclxuICAgICAgICBwcm90ZWN0ZWQgdWludCBlbGVtZW50X3NpemU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTWVtYmVyTmFtZSB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbV9NZW1iZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgXHJcbn0gICAgICAgIHByb3RlY3RlZCBBcnJheU1lbW9yeVNlcnZpY2VTa2VsQmFzZShzdHJpbmcgbWVtYmVybmFtZSwgU2VydmljZVNrZWwgc2tlbCwgRGF0YVR5cGVzIGVsZW1lbnRfdHlwZSwgdWludCBlbGVtZW50X3NpemUsIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubV9NZW1iZXJOYW1lID0gbWVtYmVybmFtZTtcclxuICAgICAgICAgICAgdGhpcy5za2VsID0gc2tlbDsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudF90eXBlID0gZWxlbWVudF90eXBlO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRfc2l6ZSA9IGVsZW1lbnRfc2l6ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIGFzeW5jIFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsTWVtb3J5RnVuY3Rpb24oTWVzc2FnZUVudHJ5IG0sIEVuZHBvaW50IGUsIEFycmF5TWVtb3J5QmFzZSBtZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG0uRW50cnlUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5UmVhZDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24ud3JpdGVvbmx5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVPbmx5TWVtYmVyRXhjZXB0aW9uKFwiV3JpdGUgb25seSBtZW1iZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsb25nIG1lbW9yeXBvcyA9IG0uRmluZEVsZW1lbnQoXCJtZW1vcnlwb3NcIikuQ2FzdERhdGE8dWxvbmdbXT4oKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWxvbmcgY291bnQgPSBtLkZpbmRFbGVtZW50KFwiY291bnRcIikuQ2FzdERhdGE8dWxvbmdbXT4oKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBhd2FpdCBEb1JlYWQobWVtb3J5cG9zLCAwLCBjb3VudCwgbWVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5NZW1vcnlSZWFkUmV0LCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJtZW1vcnlwb3NcIiwgbWVtb3J5cG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJjb3VudFwiLCBjb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5BZGRFbGVtZW50KFwiZGF0YVwiLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRW50cnlUeXBlLk1lbW9yeVdyaXRlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5yZWFkb25seV8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWFkT25seU1lbWJlckV4Y2VwdGlvbihcIlJlYWQgb25seSBtZW1iZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsb25nIG1lbW9yeXBvcyA9IG0uRmluZEVsZW1lbnQoXCJtZW1vcnlwb3NcIikuQ2FzdERhdGE8dWxvbmdbXT4oKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWxvbmcgY291bnQgPSBtLkZpbmRFbGVtZW50KFwiY291bnRcIikuQ2FzdERhdGE8dWxvbmdbXT4oKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBtLkZpbmRFbGVtZW50KFwiZGF0YVwiKS5EYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBEb1dyaXRlKG1lbW9yeXBvcywgZGF0YSwgMCwgY291bnQsIG1lbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5UmVhZFJldCwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5BZGRFbGVtZW50KFwibWVtb3J5cG9zXCIsIG1lbW9yeXBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5BZGRFbGVtZW50KFwiY291bnRcIiwgY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVudHJ5VHlwZS5NZW1vcnlHZXRQYXJhbTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG0uRmluZEVsZW1lbnQoXCJwYXJhbWV0ZXJcIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW0gPT0gXCJMZW5ndGhcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5NZW1vcnlHZXRQYXJhbVJldCwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gYXdhaXQgbWVtLkdldExlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgbGVuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcmFtID09IFwiTWF4VHJhbnNmZXJTaXplXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5R2V0UGFyYW1SZXQsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE1heFRyYW5zZmVyU2l6ZSA9IHNrZWwucnJfbm9kZS5NZW1vcnlNYXhUcmFuc2ZlclNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuQWRkRWxlbWVudChcInJldHVyblwiLCBNYXhUcmFuc2ZlclNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIlVua25vd24gcGFyYW1ldGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9jb2xFeGNlcHRpb24oXCJJbnZhbGlkIGNvbW1hbmRcIik7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgVGFzazxvYmplY3Q+IERvUmVhZCh1bG9uZyBtZW1vcnlwb3MsIHVsb25nIGJ1ZmZlcnBvcywgdWxvbmcgY291bnQsIEFycmF5TWVtb3J5QmFzZSBtZW0pO1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBUYXNrIERvV3JpdGUodWxvbmcgbWVtb3J5cG9zLCBvYmplY3QgYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBBcnJheU1lbW9yeUJhc2UgbWVtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgQXJyYXlNZW1vcnlTZXJ2aWNlU2tlbDxUPiA6IEFycmF5TWVtb3J5U2VydmljZVNrZWxCYXNlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEFycmF5TWVtb3J5U2VydmljZVNrZWwoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTa2VsIHNrZWwsIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbiA9IE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uLmJvdGgpXHJcblx0XHRcdDogYmFzZShtZW1iZXJuYW1lLCBza2VsLCBEYXRhVHlwZVV0aWwuVHlwZUlERnJvbVR5cGUodHlwZW9mKFQpKSwgRGF0YVR5cGVVdGlsLnNpemUoRGF0YVR5cGVVdGlsLlR5cGVJREZyb21UeXBlKHR5cGVvZihUKSkpLCBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBhc3luYyBUYXNrPG9iamVjdD4gRG9SZWFkKHVsb25nIG1lbW9yeXBvcywgdWxvbmcgYnVmZmVycG9zLCB1bG9uZyBjb3VudCwgQXJyYXlNZW1vcnlCYXNlIG1lbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZW0xID0gKEFycmF5TWVtb3J5PFQ+KW1lbTtcclxuICAgICAgICAgICAgdmFyIGJ1ZjEgPSAoVFtdKURhdGFUeXBlVXRpbC5BcnJheUZyb21EYXRhVHlwZShlbGVtZW50X3R5cGUsICh1aW50KWNvdW50KTtcclxuICAgICAgICAgICAgYXdhaXQgbWVtMS5SZWFkKG1lbW9yeXBvcywgYnVmMSwgMCwgY291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gYnVmMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBhc3luYyBUYXNrIERvV3JpdGUodWxvbmcgbWVtb3J5cG9zLCBvYmplY3QgYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBBcnJheU1lbW9yeUJhc2UgbWVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lbTEgPSAoQXJyYXlNZW1vcnk8VD4pbWVtO1xyXG4gICAgICAgICAgICB2YXIgYnVmMSA9IChUW10pYnVmZmVyO1xyXG4gICAgICAgICAgICBhd2FpdCBtZW0xLldyaXRlKG1lbW9yeXBvcywgYnVmMSwgMCwgY291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgTXVsdGlEaW1BcnJheU1lbW9yeVNlcnZpY2VTa2VsQmFzZVxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBzdHJpbmcgbV9NZW1iZXJOYW1lO1xyXG4gICAgICAgIHByb3RlY3RlZCBTZXJ2aWNlU2tlbCBza2VsO1xyXG4gICAgICAgIHByb3RlY3RlZCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb247XHJcbiAgICAgICAgcHJvdGVjdGVkIERhdGFUeXBlcyBlbGVtZW50X3R5cGU7XHJcbiAgICAgICAgcHJvdGVjdGVkIHVpbnQgZWxlbWVudF9zaXplO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1lbWJlck5hbWUge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG1fTWVtYmVyTmFtZTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHJvdGVjdGVkIE11bHRpRGltQXJyYXlNZW1vcnlTZXJ2aWNlU2tlbEJhc2Uoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTa2VsIHNrZWwsIERhdGFUeXBlcyBlbGVtZW50X3R5cGUsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1fTWVtYmVyTmFtZSA9IG1lbWJlcm5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2tlbCA9IHNrZWw7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRfdHlwZSA9IGVsZW1lbnRfdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50X3NpemUgPSBlbGVtZW50X3NpemU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBhc3luYyBUYXNrPE1lc3NhZ2VFbnRyeT4gQ2FsbE1lbW9yeUZ1bmN0aW9uKE1lc3NhZ2VFbnRyeSBtLCBFbmRwb2ludCBlLCBNdWx0aURpbUFycmF5TWVtb3J5QmFzZSBtZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG0uRW50cnlUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5UmVhZDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24ud3JpdGVvbmx5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVPbmx5TWVtYmVyRXhjZXB0aW9uKFwiV3JpdGUgb25seSBtZW1iZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsb25nW10gbWVtb3J5cG9zID0gbS5GaW5kRWxlbWVudChcIm1lbW9yeXBvc1wiKS5DYXN0RGF0YTx1bG9uZ1tdPigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bG9uZ1tdIGNvdW50ID0gbS5GaW5kRWxlbWVudChcImNvdW50XCIpLkNhc3REYXRhPHVsb25nW10+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsb25nIGVsZW1fY291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTx1bG9uZyx1bG9uZz4oY291bnQsKHVsb25nKTEsIChGdW5jPHVsb25nLHVsb25nLHVsb25nPikoKHgsIHkpID0+IHggKiB5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gYXdhaXQgRG9SZWFkKG1lbW9yeXBvcywgbmV3IHVsb25nW2NvdW50Lkxlbmd0aF0sIGNvdW50LCBlbGVtX2NvdW50LCBtZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLk1lbW9yeVJlYWRSZXQsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuQWRkRWxlbWVudChcIm1lbW9yeXBvc1wiLCBtZW1vcnlwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuQWRkRWxlbWVudChcImNvdW50XCIsIGNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJkYXRhXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5V3JpdGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uLnJlYWRvbmx5XylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlYWRPbmx5TWVtYmVyRXhjZXB0aW9uKFwiUmVhZCBvbmx5IG1lbWJlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdWxvbmdbXSBtZW1vcnlwb3MgPSBtLkZpbmRFbGVtZW50KFwibWVtb3J5cG9zXCIpLkNhc3REYXRhPHVsb25nW10+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsb25nW10gY291bnQgPSBtLkZpbmRFbGVtZW50KFwiY291bnRcIikuQ2FzdERhdGE8dWxvbmdbXT4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWxvbmcgZWxlbV9jb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPHVsb25nLHVsb25nPihjb3VudCwodWxvbmcpMSwgKEZ1bmM8dWxvbmcsdWxvbmcsdWxvbmc+KSgoeCwgeSkgPT4geCAqIHkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBtLkZpbmRFbGVtZW50KFwiZGF0YVwiKS5EYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBEb1dyaXRlKG1lbW9yeXBvcywgZGF0YSwgbmV3IHVsb25nW2NvdW50Lkxlbmd0aF0sIGNvdW50LCBlbGVtX2NvdW50LCBtZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLk1lbW9yeVJlYWRSZXQsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuQWRkRWxlbWVudChcIm1lbW9yeXBvc1wiLCBtZW1vcnlwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuQWRkRWxlbWVudChcImNvdW50XCIsIGNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5R2V0UGFyYW06XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBtLkZpbmRFbGVtZW50KFwicGFyYW1ldGVyXCIpLkNhc3REYXRhPHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtID09IFwiRGltZW5zaW9uc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLk1lbW9yeUdldFBhcmFtUmV0LCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gYXdhaXQgbWVtLkdldERpbWVuc2lvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5BZGRFbGVtZW50KFwicmV0dXJuXCIsIGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtID09IFwiRGltQ291bnRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5NZW1vcnlHZXRQYXJhbVJldCwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGF3YWl0IG1lbS5HZXREaW1Db3VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJhbSA9PSBcIk1heFRyYW5zZmVyU2l6ZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLk1lbW9yeUdldFBhcmFtUmV0LCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBNYXhUcmFuc2ZlclNpemUgPSBza2VsLnJyX25vZGUuTWVtb3J5TWF4VHJhbnNmZXJTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgTWF4VHJhbnNmZXJTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJVbmtub3duIHBhcmFtZXRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvY29sRXhjZXB0aW9uKFwiSW52YWxpZCBjb21tYW5kXCIpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IFRhc2s8b2JqZWN0PiBEb1JlYWQodWxvbmdbXSBtZW1vcnlwb3MsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCB1bG9uZyBlbGVtX2NvdW50LCBNdWx0aURpbUFycmF5TWVtb3J5QmFzZSBtZW0pO1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBUYXNrIERvV3JpdGUodWxvbmdbXSBtZW1vcnlwb3MsIG9iamVjdCBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCB1bG9uZyBlbGVtX2NvdW50LCBNdWx0aURpbUFycmF5TWVtb3J5QmFzZSBtZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBNdWx0aURpbUFycmF5TWVtb3J5U2VydmljZVNrZWw8VD4gOiBNdWx0aURpbUFycmF5TWVtb3J5U2VydmljZVNrZWxCYXNlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIE11bHRpRGltQXJyYXlNZW1vcnlTZXJ2aWNlU2tlbChzdHJpbmcgbWVtYmVybmFtZSwgU2VydmljZVNrZWwgc2tlbCwgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gZGlyZWN0aW9uPU1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uLmJvdGgpXHJcbiAgICAgICAgICAgIDogYmFzZShtZW1iZXJuYW1lLCBza2VsLCBEYXRhVHlwZVV0aWwuVHlwZUlERnJvbVR5cGUodHlwZW9mKFQpKSwgRGF0YVR5cGVVdGlsLnNpemUoRGF0YVR5cGVVdGlsLlR5cGVJREZyb21UeXBlKHR5cGVvZihUKSkpLCBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBhc3luYyBUYXNrPG9iamVjdD4gRG9SZWFkKHVsb25nW10gbWVtb3J5cG9zLCB1bG9uZ1tdIGJ1ZmZlcnBvcywgdWxvbmdbXSBjb3VudCwgdWxvbmcgZWxlbV9jb3VudCwgTXVsdGlEaW1BcnJheU1lbW9yeUJhc2UgbWVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lbTEgPSAoTXVsdGlEaW1BcnJheU1lbW9yeTxUPiltZW07XHJcbiAgICAgICAgICAgIHZhciBidWYxID0gbmV3IE11bHRpRGltQXJyYXkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHg9Pih1aW50KXgpKS5Ub0FycmF5KCksIChUW10pRGF0YVR5cGVVdGlsLkFycmF5RnJvbURhdGFUeXBlKGVsZW1lbnRfdHlwZSwgKHVpbnQpZWxlbV9jb3VudCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBtZW0xLlJlYWQobWVtb3J5cG9zLCBidWYxLCBuZXcgdWxvbmdbY291bnQuTGVuZ3RoXSwgY291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2tlbC5SUkNvbnRleHQuUGFja011bHRpRGltQXJyYXkoYnVmMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXN5bmMgVGFzayBEb1dyaXRlKHVsb25nW10gbWVtb3J5cG9zLCBvYmplY3QgYnVmZmVyLCB1bG9uZ1tdIGJ1ZmZlcnBvcywgdWxvbmdbXSBjb3VudCwgdWxvbmcgZWxlbV9jb3VudCwgTXVsdGlEaW1BcnJheU1lbW9yeUJhc2UgbWVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lbTEgPSAoTXVsdGlEaW1BcnJheU1lbW9yeTxUPiltZW07XHJcbiAgICAgICAgICAgIHZhciBidWYxID0gc2tlbC5SUkNvbnRleHQuVW5wYWNrTXVsdGlEaW1BcnJheSgoTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5KWJ1ZmZlcik7XHJcbiAgICAgICAgICAgIGF3YWl0IG1lbTEuV3JpdGUobWVtb3J5cG9zLCBidWYxLCBuZXcgdWxvbmdbY291bnQuTGVuZ3RoXSwgY291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQXJyYXlNZW1vcnlDbGllbnRJbXBsQmFzZVxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBzdHJpbmcgbV9NZW1iZXJOYW1lO1xyXG4gICAgICAgIHByb3RlY3RlZCBTZXJ2aWNlU3R1YiBzdHViO1xyXG4gICAgICAgIHByb3RlY3RlZCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb247XHJcbiAgICAgICAgcHJvdGVjdGVkIERhdGFUeXBlcyBlbGVtZW50X3R5cGU7XHJcbiAgICAgICAgcHJvdGVjdGVkIHVpbnQgZWxlbWVudF9zaXplO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1lbWJlck5hbWUge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG1fTWVtYmVyTmFtZTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHJvdGVjdGVkIEFycmF5TWVtb3J5Q2xpZW50SW1wbEJhc2Uoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIERhdGFUeXBlcyBlbGVtZW50X3R5cGUsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnN0dWIgPSBzdHViOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtX01lbWJlck5hbWUgPSBtZW1iZXJuYW1lO1xyXG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50X3R5cGUgPSBlbGVtZW50X3R5cGU7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudF9zaXplID0gZWxlbWVudF9zaXplO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgYXN5bmMgVGFzazx1bG9uZz4gR2V0TGVuZ3RoKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5R2V0UGFyYW0sIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICBtLkFkZEVsZW1lbnQoXCJwYXJhbWV0ZXJcIiwgXCJMZW5ndGhcIik7XHJcbiAgICAgICAgICAgIHZhciByZXQgPSBhd2FpdCBzdHViLlByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQuRmluZEVsZW1lbnQoXCJyZXR1cm5cIikuQ2FzdERhdGE8dWxvbmdbXT4oKVswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBEaXJlY3Rpb24ge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHJvdGVjdGVkIGJvb2wgbWF4X3NpemVfcmVhZDtcclxuICAgICAgICBwcm90ZWN0ZWQgdWludCByZW1vdGVfbWF4X3NpemU7XHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8dWludD4gR2V0TWF4VHJhbnNmZXJTaXplKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCBteV9tYXhfc2l6ZSA9IHN0dWIucnJfbm9kZS5NZW1vcnlNYXhUcmFuc2ZlclNpemU7XHJcbiAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYXhfc2l6ZV9yZWFkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdGVfbWF4X3NpemUgPiBteV9tYXhfc2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG15X21heF9zaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbW90ZV9tYXhfc2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5R2V0UGFyYW0sIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICBtLkFkZEVsZW1lbnQoXCJwYXJhbWV0ZXJcIiwgXCJNYXhUcmFuc2ZlclNpemVcIik7XHJcbiAgICAgICAgICAgIHZhciByZXQgPSBhd2FpdCBzdHViLlByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHZhciByZW1vdGVfbWF4X3NpemUxID0gcmV0LkZpbmRFbGVtZW50KFwicmV0dXJuXCIpLkNhc3REYXRhPHVpbnRbXT4oKVswXTtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtYXhfc2l6ZV9yZWFkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZV9tYXhfc2l6ZSA9IHJlbW90ZV9tYXhfc2l6ZTE7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4X3NpemVfcmVhZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbW90ZV9tYXhfc2l6ZSA+IG15X21heF9zaXplKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBteV9tYXhfc2l6ZTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3RlX21heF9zaXplO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBSZWFkSW1wbCh1bG9uZyBtZW1vcnlwb3MsIG9iamVjdCBidWZmZXIsIHVsb25nIGJ1ZmZlcnBvcywgdWxvbmcgY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbD1kZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24ud3JpdGVvbmx5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVPbmx5TWVtYmVyRXhjZXB0aW9uKFwiV3JpdGUgb25seSBtZW1iZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHVpbnQgbWF4X3RyYW5zZmVyX3NpemUgPSBhd2FpdCBHZXRNYXhUcmFuc2ZlclNpemUoY2FuY2VsKTtcclxuICAgICAgICAgICAgdWludCBtYXhfZWxlbXMgPSAobWF4X3RyYW5zZmVyX3NpemUpIC8gZWxlbWVudF9zaXplO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvdW50IDw9IG1heF9lbGVtcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9UcmFuc2ZlciBhbGwgZGF0YSBpbiBvbmUgYmxvY2tcclxuICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLk1lbW9yeVJlYWQsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgZS5BZGRFbGVtZW50KFwibWVtb3J5cG9zXCIsIG1lbW9yeXBvcyk7XHJcbiAgICAgICAgICAgICAgICBlLkFkZEVsZW1lbnQoXCJjb3VudFwiLCBjb3VudCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gYXdhaXQgc3R1Yi5Qcm9jZXNzUmVxdWVzdChlLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICAgICAgVW5wYWNrUmVhZFJlc3VsdChyZXQuRmluZEVsZW1lbnQoXCJkYXRhXCIpLkRhdGEsIGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyBibG9ja3MgPSBjb3VudCAvIG1heF9lbGVtcztcclxuICAgICAgICAgICAgICAgIHVsb25nIGJsb2NrcmVtID0gY291bnQgJSBtYXhfZWxlbXM7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh1bG9uZyBpID0gMDsgaSA8IGJsb2NrczsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVsb25nIGJ1ZmZlcnBvc19pID0gYnVmZmVycG9zICsgbWF4X2VsZW1zICogaTtcclxuICAgICAgICAgICAgICAgICAgICB1bG9uZyBtZW1vcnlwb3NfaSA9IG1lbW9yeXBvcyArIG1heF9lbGVtcyAqIGk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFJlYWRJbXBsKG1lbW9yeXBvc19pLCBidWZmZXIsIGJ1ZmZlcnBvc19pLCBtYXhfZWxlbXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2tyZW0gPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVsb25nIGJ1ZmZlcnBvc19pID0gYnVmZmVycG9zICsgbWF4X2VsZW1zICogYmxvY2tzO1xyXG4gICAgICAgICAgICAgICAgICAgIHVsb25nIG1lbW9yeXBvc19pID0gbWVtb3J5cG9zICsgbWF4X2VsZW1zICogYmxvY2tzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBSZWFkSW1wbChtZW1vcnlwb3NfaSwgYnVmZmVyLCBidWZmZXJwb3NfaSwgYmxvY2tyZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIFdyaXRlSW1wbCh1bG9uZyBtZW1vcnlwb3MsIG9iamVjdCBidWZmZXIsIHVsb25nIGJ1ZmZlcnBvcywgdWxvbmcgY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5yZWFkb25seV8pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWFkT25seU1lbWJlckV4Y2VwdGlvbihcIlJlYWQgb25seSBtZW1iZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHVsb25nIG1heF90cmFuc2Zlcl9zaXplID0gYXdhaXQgR2V0TWF4VHJhbnNmZXJTaXplKGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHVsb25nIG1heF9lbGVtcyA9IG1heF90cmFuc2Zlcl9zaXplIC8gZWxlbWVudF9zaXplO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvdW50IDw9IG1heF9lbGVtcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9UcmFuc2ZlciBhbGwgZGF0YSBpbiBvbmUgYmxvY2tcclxuICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLk1lbW9yeVdyaXRlLCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgIGUuQWRkRWxlbWVudChcIm1lbW9yeXBvc1wiLCBtZW1vcnlwb3MpO1xyXG4gICAgICAgICAgICAgICAgZS5BZGRFbGVtZW50KFwiY291bnRcIiwgY291bnQpO1xyXG4gICAgICAgICAgICAgICAgZS5BZGRFbGVtZW50KFwiZGF0YVwiLCBQYWNrV3JpdGVSZXF1ZXN0KGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByZXQgPSBzdHViLlByb2Nlc3NSZXF1ZXN0KGUsIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoR2V0QnVmZmVyTGVuZ3RoKGJ1ZmZlcikgLSBidWZmZXJwb3MgPCBjb3VudClcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT3V0T2ZSYW5nZUV4Y2VwdGlvbihcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB1bG9uZyBibG9ja3MgPSBjb3VudCAvIG1heF9lbGVtcztcclxuICAgICAgICAgICAgICAgIHVsb25nIGJsb2NrcmVtID0gY291bnQgJSBtYXhfZWxlbXM7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh1bG9uZyBpID0gMDsgaSA8IGJsb2NrczsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVsb25nIGJ1ZmZlcnBvc19pID0gYnVmZmVycG9zICsgbWF4X2VsZW1zICogaTtcclxuICAgICAgICAgICAgICAgICAgICB1bG9uZyBtZW1vcnlwb3NfaSA9IG1lbW9yeXBvcyArIG1heF9lbGVtcyAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgV3JpdGVJbXBsKG1lbW9yeXBvc19pLCBidWZmZXIsIGJ1ZmZlcnBvc19pLCBtYXhfZWxlbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChibG9ja3JlbSA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdWxvbmcgYnVmZmVycG9zX2kgPSBidWZmZXJwb3MgKyBtYXhfZWxlbXMgKiBibG9ja3M7XHJcbiAgICAgICAgICAgICAgICAgICAgdWxvbmcgbWVtb3J5cG9zX2kgPSBtZW1vcnlwb3MgKyBtYXhfZWxlbXMgKiBibG9ja3M7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgV3JpdGVJbXBsKG1lbW9yeXBvc19pLCBidWZmZXIsIGJ1ZmZlcnBvc19pLCBibG9ja3JlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBVbnBhY2tSZWFkUmVzdWx0KG9iamVjdCByZXMsIG9iamVjdCBidWZmZXIsIHVsb25nIGJ1ZmZlcnBvcywgdWxvbmcgY291bnQpO1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBvYmplY3QgUGFja1dyaXRlUmVxdWVzdChvYmplY3QgYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50KTtcclxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgdWxvbmcgR2V0QnVmZmVyTGVuZ3RoKG9iamVjdCBidWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVybmFsIGNsYXNzIEFycmF5TWVtb3J5Q2xpZW50SW1wbDxUPiA6IEFycmF5TWVtb3J5Q2xpZW50SW1wbEJhc2VcclxuICAgIHtcclxuICAgICAgICBpbnRlcm5hbCBBcnJheU1lbW9yeUNsaWVudEltcGwoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbikgXHJcbiAgICAgICAgICAgIDogYmFzZShtZW1iZXJuYW1lLCBzdHViLCBEYXRhVHlwZVV0aWwuVHlwZUlERnJvbVR5cGUodHlwZW9mKFQpKSwgRGF0YVR5cGVVdGlsLnNpemUoRGF0YVR5cGVVdGlsLlR5cGVJREZyb21UeXBlKHR5cGVvZihUKSkpLCBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHVsb25nIEdldEJ1ZmZlckxlbmd0aChvYmplY3QgYnVmZmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICh1bG9uZykoKFRbXSlidWZmZXIpLkxvbmdMZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgb2JqZWN0IFBhY2tXcml0ZVJlcXVlc3Qob2JqZWN0IGJ1ZmZlciwgdWxvbmcgYnVmZmVycG9zLCB1bG9uZyBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBidWZmZXIxID0gKFRbXSlidWZmZXI7XHJcbiAgICAgICAgICAgIGlmIChidWZmZXJwb3MgPT0gMCAmJiBidWZmZXIxLkxvbmdMZW5ndGggPT0gKGxvbmcpY291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBidWZmZXIxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKChidWZmZXIxLkxvbmdMZW5ndGggLSAobG9uZykoYnVmZmVycG9zKSkgPj0gKGxvbmcpKGNvdW50KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgVFtjb3VudF07XHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGJ1ZmZlcjEsIChsb25nKWJ1ZmZlcnBvcywgZGF0YSwgMCwgKGxvbmcpY291bnQpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE91dE9mUmFuZ2VFeGNlcHRpb24oXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFVucGFja1JlYWRSZXN1bHQob2JqZWN0IHJlcywgb2JqZWN0IGJ1ZmZlciwgdWxvbmcgYnVmZmVycG9zLCB1bG9uZyBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gKFRbXSlyZXM7XHJcbiAgICAgICAgICAgIHZhciBidWZmZXIxID0gKFRbXSlidWZmZXI7XHJcbiAgICAgICAgICAgIEFycmF5LkNvcHkoZGF0YSwgMCwgYnVmZmVyMSwgKGxvbmcpYnVmZmVycG9zLCAobG9uZyljb3VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBBcnJheU1lbW9yeUNsaWVudDxUPiA6IEFycmF5TWVtb3J5PFQ+XHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBBcnJheU1lbW9yeUNsaWVudEltcGw8VD4gaW1wbDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBNZW1iZXJOYW1lIHtcclxuICAgIGdldFxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBpbXBsLk1lbWJlck5hbWU7XHJcbiAgICB9XHJcbiAgICBcclxufSAgICAgICAgcHVibGljIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIERpcmVjdGlvbiB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gaW1wbC5EaXJlY3Rpb247XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG4gICAgICAgIHB1YmxpYyBBcnJheU1lbW9yeUNsaWVudChzdHJpbmcgbWVtYmVybmFtZSwgU2VydmljZVN0dWIgc3R1YiwgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gZGlyZWN0aW9uID0gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24uYm90aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGltcGwgPSBuZXcgQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+KG1lbWJlcm5hbWUsIHN0dWIsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBBdHRhY2goVFtdIG1lbW9yeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVGFzazx1bG9uZz4gR2V0TGVuZ3RoKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGltcGwuR2V0TGVuZ3RoKCk7ICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSBUYXNrPHVpbnQ+IEdldE1heFRyYW5zZmVyU2l6ZShDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaW1wbC5HZXRNYXhUcmFuc2ZlclNpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrIFJlYWQodWxvbmcgbWVtb3J5cG9zLCBUW10gYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWw9ZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaW1wbC5SZWFkSW1wbChtZW1vcnlwb3MsIGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrIFdyaXRlKHVsb25nIG1lbW9yeXBvcywgVFtdIGJ1ZmZlciwgdWxvbmcgYnVmZmVycG9zLCB1bG9uZyBjb3VudCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaW1wbC5Xcml0ZUltcGwobWVtb3J5cG9zLCBidWZmZXIsIGJ1ZmZlcnBvcywgY291bnQsIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpbnRlcm5hbCBhYnN0cmFjdCBjbGFzcyBNdWx0aURpbUFycmF5TWVtb3J5Q2xpZW50SW1wbEJhc2VcclxuICAgIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0cmluZyBtX01lbWJlck5hbWU7XHJcbiAgICAgICAgcHJvdGVjdGVkIFNlcnZpY2VTdHViIHN0dWI7XHJcbiAgICAgICAgcHJvdGVjdGVkIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbjtcclxuICAgICAgICBwcm90ZWN0ZWQgRGF0YVR5cGVzIGVsZW1lbnRfdHlwZTtcclxuICAgICAgICBwcm90ZWN0ZWQgdWludCBlbGVtZW50X3NpemU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTWVtYmVyTmFtZSB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbV9NZW1iZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgXHJcbn0gICAgICAgIHB1YmxpYyBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBEaXJlY3Rpb24ge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHJvdGVjdGVkIE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnRJbXBsQmFzZShzdHJpbmcgbWVtYmVybmFtZSwgU2VydmljZVN0dWIgc3R1YiwgRGF0YVR5cGVzIGVsZW1lbnRfdHlwZSwgdWludCBlbGVtZW50X3NpemUsIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R1YiA9IHN0dWI7XHJcbiAgICAgICAgICAgIG1fTWVtYmVyTmFtZSA9IG1lbWJlcm5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRfdHlwZSA9IGVsZW1lbnRfdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50X3NpemUgPSBlbGVtZW50X3NpemU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBhc3luYyBUYXNrPHVsb25nPiBHZXREaW1Db3VudChDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWw9ZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5NZW1vcnlHZXRQYXJhbSwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgIG0uQWRkRWxlbWVudChcInBhcmFtZXRlclwiLCBcIkRpbUNvdW50XCIpO1xyXG4gICAgICAgICAgICB2YXIgcmV0ID0gYXdhaXQgc3R1Yi5Qcm9jZXNzUmVxdWVzdChtLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0LkZpbmRFbGVtZW50KFwicmV0dXJuXCIpLkNhc3REYXRhPHVsb25nW10+KClbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBhc3luYyBUYXNrPHVsb25nW10+IEdldERpbWVuc2lvbnMoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLk1lbW9yeUdldFBhcmFtLCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgbS5BZGRFbGVtZW50KFwicGFyYW1ldGVyXCIsIFwiRGltZW5zaW9uc1wiKTtcclxuICAgICAgICAgICAgdmFyIHJldCA9IGF3YWl0IHN0dWIuUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJldC5GaW5kRWxlbWVudChcInJldHVyblwiKS5DYXN0RGF0YTx1bG9uZ1tdPigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgYm9vbCBtYXhfc2l6ZV9yZWFkO1xyXG4gICAgICAgIHByb3RlY3RlZCB1aW50IHJlbW90ZV9tYXhfc2l6ZTtcclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazx1aW50PiBHZXRNYXhUcmFuc2ZlclNpemUoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IG15X21heF9zaXplID0gc3R1Yi5ycl9ub2RlLk1lbW9yeU1heFRyYW5zZmVyU2l6ZTtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1heF9zaXplX3JlYWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW90ZV9tYXhfc2l6ZSA+IG15X21heF9zaXplKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXlfbWF4X3NpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3RlX21heF9zaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5NZW1vcnlHZXRQYXJhbSwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgIG0uQWRkRWxlbWVudChcInBhcmFtZXRlclwiLCBcIk1heFRyYW5zZmVyU2l6ZVwiKTtcclxuICAgICAgICAgICAgdmFyIHJldCA9IGF3YWl0IHN0dWIuUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgdmFyIHJlbW90ZV9tYXhfc2l6ZTEgPSByZXQuRmluZEVsZW1lbnQoXCJyZXR1cm5cIikuQ2FzdERhdGE8dWludFtdPigpWzBdO1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1heF9zaXplX3JlYWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlX21heF9zaXplID0gcmVtb3RlX21heF9zaXplMTtcclxuICAgICAgICAgICAgICAgICAgICBtYXhfc2l6ZV9yZWFkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVtb3RlX21heF9zaXplID4gbXlfbWF4X3NpemUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG15X21heF9zaXplO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdGVfbWF4X3NpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIFJlYWRJbXBsKHVsb25nW10gbWVtb3J5cG9zLCBvYmplY3QgYnVmZmVyLCB1bG9uZ1tdIGJ1ZmZlcnBvcywgdWxvbmdbXSBjb3VudCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uLndyaXRlb25seSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlT25seU1lbWJlckV4Y2VwdGlvbihcIldyaXRlIG9ubHkgbWVtYmVyXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB1aW50IG1heF90cmFuc2Zlcl9zaXplID0gYXdhaXQgR2V0TWF4VHJhbnNmZXJTaXplKGNhbmNlbCk7XHJcblxyXG4gICAgICAgICAgICB1bG9uZyBlbGVtY291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTx1bG9uZyx1bG9uZz4oY291bnQsKHVsb25nKTEsKEZ1bmM8dWxvbmcsdWxvbmcsdWxvbmc+KSgoeCx5KSA9PiB4KnkpKTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdWxvbmcgbWF4X2VsZW1zID0gbWF4X3RyYW5zZmVyX3NpemUgLyBlbGVtZW50X3NpemU7XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWNvdW50IDw9IG1heF9lbGVtcylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vVHJhbnNmZXIgYWxsIGRhdGEgaW4gb25lIGJsb2NrXHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5NZW1vcnlSZWFkLCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgIGUuQWRkRWxlbWVudChcIm1lbW9yeXBvc1wiLCBtZW1vcnlwb3MpO1xyXG4gICAgICAgICAgICAgICAgZS5BZGRFbGVtZW50KFwiY291bnRcIiwgY291bnQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IGF3YWl0IHN0dWIuUHJvY2Vzc1JlcXVlc3QoZSxjYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIFVucGFja1JlYWRSZXN1bHQocmV0LkZpbmRFbGVtZW50KFwiZGF0YVwiKS5EYXRhLCBidWZmZXIsIGJ1ZmZlcnBvcywgY291bnQsIGVsZW1jb3VudCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9XZSBuZWVkIHRvIHJlYWQgdGhlIGFycmF5IGluIGNodW5rcy4gIFRoaXMgaXMgYSBsaXR0bGUgY29tcGxpY2F0ZWQuLi5cclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgc3BsaXRfZGltO1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgc3BsaXRfZGltX2Jsb2NrO1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgc3BsaXRfZWxlbV9jb3VudDtcclxuICAgICAgICAgICAgICAgIGludCBzcGxpdHNfY291bnQ7XHJcbiAgICAgICAgICAgICAgICBpbnQgc3BsaXRfcmVtYWluZGVyO1xyXG4gICAgICAgICAgICAgICAgdWxvbmdbXSBibG9ja19jb3VudDtcclxuICAgICAgICAgICAgICAgIHVsb25nW10gYmxvY2tfY291bnRfZWRnZTtcclxuXHJcbiAgICAgICAgICAgICAgICBDYWxjdWxhdGVNYXRyaXhCbG9ja3MoZWxlbWVudF9zaXplLCBjb3VudCwgbWF4X2VsZW1zLCBvdXQgc3BsaXRfZGltLCBvdXQgc3BsaXRfZGltX2Jsb2NrLCBvdXQgc3BsaXRfZWxlbV9jb3VudCwgb3V0IHNwbGl0c19jb3VudCwgb3V0IHNwbGl0X3JlbWFpbmRlciwgb3V0IGJsb2NrX2NvdW50LCBvdXQgYmxvY2tfY291bnRfZWRnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYm9vbCBkb25lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudF9wb3MgPSBuZXcgdWxvbmdbY291bnQuTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoIWRvbmUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgc3BsaXRzX2NvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3Bvc1tzcGxpdF9kaW1dID0gc3BsaXRfZGltX2Jsb2NrICogaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50X2J1Zl9wb3MgPSBuZXcgdWxvbmdbYnVmZmVycG9zLkxlbmd0aF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50X21lbV9wb3MgPSBuZXcgdWxvbmdbYnVmZmVycG9zLkxlbmd0aF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxvbmcgaiA9IDA7IGogPCBjdXJyZW50X2J1Zl9wb3MuTG9uZ0xlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2J1Zl9wb3Nbal0gPSBjdXJyZW50X3Bvc1tqXSArIGJ1ZmZlcnBvc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfbWVtX3Bvc1tqXSA9IGN1cnJlbnRfcG9zW2pdICsgbWVtb3J5cG9zW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBSZWFkSW1wbChjdXJyZW50X21lbV9wb3MsIGJ1ZmZlciwgY3VycmVudF9idWZfcG9zLCBibG9ja19jb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXRfcmVtYWluZGVyICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3Bvc1tzcGxpdF9kaW1dID0gc3BsaXRfZGltX2Jsb2NrICogKHVsb25nKXNwbGl0c19jb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfYnVmX3BvcyA9IG5ldyB1bG9uZ1tidWZmZXJwb3MuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfbWVtX3BvcyA9IG5ldyB1bG9uZ1tidWZmZXJwb3MuTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobG9uZyBqID0gMDsgaiA8IGN1cnJlbnRfYnVmX3Bvcy5Mb25nTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYnVmX3Bvc1tqXSA9IGN1cnJlbnRfcG9zW2pdICsgYnVmZmVycG9zW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9tZW1fcG9zW2pdID0gY3VycmVudF9wb3Nbal0gKyBtZW1vcnlwb3Nbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFJlYWRJbXBsKGN1cnJlbnRfbWVtX3BvcywgYnVmZmVyLCBjdXJyZW50X2J1Zl9wb3MsIGJsb2NrX2NvdW50X2VkZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0X2RpbSA9PSBjb3VudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcG9zW3NwbGl0X2RpbSArIDFdKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Bvc1tzcGxpdF9kaW0gKyAxXSA+PSBjb3VudFtzcGxpdF9kaW0gKyAxXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0X2RpbSArIDEgPT0gY291bnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3Bvc1tzcGxpdF9kaW0gKyAxXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IHNwbGl0X2RpbSArIDI7IGogPCBjb3VudC5MZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Bvc1tqIC0gMV0gPj0gY291bnRbaiAtIDFdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3Bvc1tqXSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Bvc1tjb3VudC5MZW5ndGggLSAxXSA+PSBjb3VudFtjb3VudC5MZW5ndGggLSAxXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIFdyaXRlSW1wbCh1bG9uZ1tdIG1lbW9yeXBvcywgb2JqZWN0IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5yZWFkb25seV8pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWFkT25seU1lbWJlckV4Y2VwdGlvbihcIlJlYWQgb25seSBtZW1iZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICB1aW50IG1heF90cmFuc2Zlcl9zaXplID0gYXdhaXQgR2V0TWF4VHJhbnNmZXJTaXplKCk7XHJcblxyXG4gICAgICAgICAgICB1bG9uZyBlbGVtY291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTx1bG9uZyx1bG9uZz4oY291bnQsKHVsb25nKTEsIChGdW5jPHVsb25nLHVsb25nLHVsb25nPikoKHgseSkgPT4geCp5KSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB1aW50IG1heF9lbGVtcyA9IG1heF90cmFuc2Zlcl9zaXplIC8gZWxlbWVudF9zaXplO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVsZW1jb3VudCA8PSBtYXhfZWxlbXMpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1RyYW5zZmVyIGFsbCBkYXRhIGluIG9uZSBibG9ja1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuTWVtb3J5V3JpdGUsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgZS5BZGRFbGVtZW50KFwibWVtb3J5cG9zXCIsIG1lbW9yeXBvcyk7XHJcbiAgICAgICAgICAgICAgICBlLkFkZEVsZW1lbnQoXCJjb3VudFwiLCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZS5BZGRFbGVtZW50KFwiZGF0YVwiLCBQYWNrV3JpdGVSZXF1ZXN0KGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCwgZWxlbWNvdW50KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHN0dWIuUHJvY2Vzc1JlcXVlc3QoZSxjYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBzcGxpdF9kaW07XHJcbiAgICAgICAgICAgICAgICB1bG9uZyBzcGxpdF9kaW1fYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyBzcGxpdF9lbGVtX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgaW50IHNwbGl0c19jb3VudDtcclxuICAgICAgICAgICAgICAgIGludCBzcGxpdF9yZW1haW5kZXI7XHJcbiAgICAgICAgICAgICAgICB1bG9uZ1tdIGJsb2NrX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgdWxvbmdbXSBibG9ja19jb3VudF9lZGdlO1xyXG5cclxuICAgICAgICAgICAgICAgIENhbGN1bGF0ZU1hdHJpeEJsb2NrcyhlbGVtZW50X3NpemUsIGNvdW50LCBtYXhfZWxlbXMsIG91dCBzcGxpdF9kaW0sIG91dCBzcGxpdF9kaW1fYmxvY2ssIG91dCBzcGxpdF9lbGVtX2NvdW50LCBvdXQgc3BsaXRzX2NvdW50LCBvdXQgc3BsaXRfcmVtYWluZGVyLCBvdXQgYmxvY2tfY291bnQsIG91dCBibG9ja19jb3VudF9lZGdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBib29sIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50X3BvcyA9IG5ldyB1bG9uZ1tjb3VudC5MZW5ndGhdO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICghZG9uZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBzcGxpdHNfY291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcG9zW3NwbGl0X2RpbV0gPSBzcGxpdF9kaW1fYmxvY2sgKiBpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfYnVmX3BvcyA9IG5ldyB1bG9uZ1tidWZmZXJwb3MuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfbWVtX3BvcyA9IG5ldyB1bG9uZ1tidWZmZXJwb3MuTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobG9uZyBqID0gMDsgaiA8IGN1cnJlbnRfYnVmX3Bvcy5Mb25nTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYnVmX3Bvc1tqXSA9IGN1cnJlbnRfcG9zW2pdICsgYnVmZmVycG9zW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9tZW1fcG9zW2pdID0gY3VycmVudF9wb3Nbal0gKyBtZW1vcnlwb3Nbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFdyaXRlSW1wbChjdXJyZW50X21lbV9wb3MsIGJ1ZmZlciwgY3VycmVudF9idWZfcG9zLCBibG9ja19jb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXRfcmVtYWluZGVyICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3Bvc1tzcGxpdF9kaW1dID0gc3BsaXRfZGltX2Jsb2NrICogKHVsb25nKXNwbGl0c19jb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfYnVmX3BvcyA9IG5ldyB1bG9uZ1tidWZmZXJwb3MuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfbWVtX3BvcyA9IG5ldyB1bG9uZ1tidWZmZXJwb3MuTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobG9uZyBqID0gMDsgaiA8IGN1cnJlbnRfYnVmX3Bvcy5Mb25nTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYnVmX3Bvc1tqXSA9IGN1cnJlbnRfcG9zW2pdICsgYnVmZmVycG9zW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9tZW1fcG9zW2pdID0gY3VycmVudF9wb3Nbal0gKyBtZW1vcnlwb3Nbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFdyaXRlSW1wbChjdXJyZW50X21lbV9wb3MsIGJ1ZmZlciwgY3VycmVudF9idWZfcG9zLCBibG9ja19jb3VudF9lZGdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdF9kaW0gPT0gKGNvdW50Lkxlbmd0aCAtIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcG9zW3NwbGl0X2RpbSArIDFdKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Bvc1tzcGxpdF9kaW0gKyAxXSA+PSBjb3VudFtzcGxpdF9kaW0gKyAxXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0X2RpbSArIDEgPT0gKGNvdW50Lkxlbmd0aCAtIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcG9zW3NwbGl0X2RpbSArIDFdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gc3BsaXRfZGltICsgMjsgaiA8IGNvdW50Lkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfcG9zW2ogLSAxXSA+PSBjb3VudFtqIC0gMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcG9zW2pdKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfcG9zW2NvdW50LkxvbmdMZW5ndGggLSAxXSA+PSBjb3VudFtjb3VudC5Mb25nTGVuZ3RoIC0gMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIENhbGN1bGF0ZU1hdHJpeEJsb2Nrcyh1aW50IGVsZW1lbnRfc2l6ZSwgdWxvbmdbXSBjb3VudCwgdWxvbmcgbWF4X2VsZW1zLCBvdXQgaW50IHNwbGl0X2RpbSwgb3V0IHVsb25nIHNwbGl0X2RpbV9ibG9jaywgb3V0IHVsb25nIHNwbGl0X2VsZW1fY291bnQsIG91dCBpbnQgc3BsaXRzX2NvdW50LCBvdXQgaW50IHNwbGl0X3JlbWFpbmRlciwgb3V0IHVsb25nW10gYmxvY2tfY291bnQsIG91dCB1bG9uZ1tdIGJsb2NrX2NvdW50X2VkZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzcGxpdF9lbGVtX2NvdW50ID0gMTtcclxuICAgICAgICAgICAgc3BsaXRfZGltID0gLTE7XHJcbiAgICAgICAgICAgIHNwbGl0X2RpbV9ibG9jayA9IDA7XHJcbiAgICAgICAgICAgIGJvb2wgc3BsaXRfZGltX2ZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJsb2NrX2NvdW50ID0gbmV3IHVsb25nW2NvdW50Lkxlbmd0aF07XHJcbiAgICAgICAgICAgIHNwbGl0c19jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHNwbGl0X3JlbWFpbmRlciA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghc3BsaXRfZGltX2ZvdW5kKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVsb25nIHRlbXBfZWxlbV9jb3VudDEgPSBzcGxpdF9lbGVtX2NvdW50ICogY291bnRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBfZWxlbV9jb3VudDEgPiBtYXhfZWxlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGxpdF9kaW0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGxpdF9kaW1fYmxvY2sgPSBtYXhfZWxlbXMgLyBzcGxpdF9lbGVtX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGxpdF9kaW1fZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja19jb3VudFtpXSA9IHNwbGl0X2RpbV9ibG9jaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRzX2NvdW50ID0gKGludCkoY291bnRbaV0gLyBzcGxpdF9kaW1fYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGxpdF9yZW1haW5kZXIgPSAoaW50KShjb3VudFtpXSAlIHNwbGl0X2RpbV9ibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0X2VsZW1fY291bnQgPSB0ZW1wX2VsZW1fY291bnQxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja19jb3VudFtpXSA9IGNvdW50W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9ja19jb3VudFtpXSA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJsb2NrX2NvdW50X2VkZ2UgPSBuZXcgdWxvbmdbYmxvY2tfY291bnQuTGVuZ3RoXTtcclxuICAgICAgICAgICAgQXJyYXkuQ29weShibG9ja19jb3VudCwgYmxvY2tfY291bnRfZWRnZSwgYmxvY2tfY291bnQuTGVuZ3RoKTtcclxuICAgICAgICAgICAgYmxvY2tfY291bnRfZWRnZVtzcGxpdF9kaW1dID0gY291bnRbc3BsaXRfZGltXSAlIHNwbGl0X2RpbV9ibG9jaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIFVucGFja1JlYWRSZXN1bHQob2JqZWN0IHJlcywgb2JqZWN0IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIHVsb25nIGVsZW1fY291bnQpO1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBvYmplY3QgUGFja1dyaXRlUmVxdWVzdChvYmplY3QgYnVmZmVyLCB1bG9uZ1tdIGJ1ZmZlcnBvcywgdWxvbmdbXSBjb3VudCwgdWxvbmcgZWxlbV9jb3VudCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGludGVybmFsIGNsYXNzIE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+IDogTXVsdGlEaW1BcnJheU1lbW9yeUNsaWVudEltcGxCYXNlXHJcbiAgICB7XHJcbiAgICAgICAgaW50ZXJuYWwgTXVsdGlEaW1BcnJheU1lbW9yeUNsaWVudEltcGwoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbilcclxuICAgICAgICAgICAgOiBiYXNlKG1lbWJlcm5hbWUsIHN0dWIsIERhdGFUeXBlVXRpbC5UeXBlSURGcm9tVHlwZSh0eXBlb2YoVCkpLCBEYXRhVHlwZVV0aWwuc2l6ZShEYXRhVHlwZVV0aWwuVHlwZUlERnJvbVR5cGUodHlwZW9mKFQpKSksIGRpcmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgb2JqZWN0IFBhY2tXcml0ZVJlcXVlc3Qob2JqZWN0IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIHVsb25nIGVsZW1fY291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnVmZmVyMSA9IChNdWx0aURpbUFycmF5KShidWZmZXIpO1xyXG5cclxuICAgICAgICAgICAgYm9vbCBlcXUgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGxvbmcgaSA9IDA7IGkgPCBjb3VudC5Mb25nTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChidWZmZXJwb3NbaV0gIT0gMCB8fCBidWZmZXIxLkRpbXNbaV0gIT0gY291bnRbaV0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXF1ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlcXUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHViLnJyX25vZGUuUGFja011bHRpRGltQXJyYXkoYnVmZmVyMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBNdWx0aURpbUFycmF5KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KGNvdW50LChGdW5jPHVsb25nLHVpbnQ+KSh4PT4odWludCl4KSkuVG9BcnJheSgpLCBuZXcgVFtlbGVtX2NvdW50XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVmZmVyMS5SZXRyaWV2ZVN1YkFycmF5KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KGJ1ZmZlcnBvcywoRnVuYzx1bG9uZyx1aW50PikoeD0+KHVpbnQpeCkpLlRvQXJyYXkoKSwgZGF0YSwgbmV3IHVpbnRbY291bnQuTGVuZ3RoXSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHg9Pih1aW50KXgpKS5Ub0FycmF5KCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0dWIucnJfbm9kZS5QYWNrTXVsdGlEaW1BcnJheShkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgVW5wYWNrUmVhZFJlc3VsdChvYmplY3QgcmVzLCBvYmplY3QgYnVmZmVyLCB1bG9uZ1tdIGJ1ZmZlcnBvcywgdWxvbmdbXSBjb3VudCwgdWxvbmcgZWxlbV9jb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBidWZmZXIxID0gKE11bHRpRGltQXJyYXkpYnVmZmVyO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHN0dWIucnJfbm9kZS5VbnBhY2tNdWx0aURpbUFycmF5KChNZXNzYWdlRWxlbWVudE11bHRpRGltQXJyYXkpcmVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhMiA9IG5ldyBNdWx0aURpbUFycmF5TWVtb3J5PFQ+KGRhdGEpO1xyXG4gICAgICAgICAgICBkYXRhMi5SZWFkKG5ldyB1bG9uZ1tjb3VudC5MZW5ndGhdLCBidWZmZXIxLCBidWZmZXJwb3MsIGNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnQ8VD4gOiBNdWx0aURpbUFycmF5TWVtb3J5PFQ+XHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBNdWx0aURpbUFycmF5TWVtb3J5Q2xpZW50SW1wbDxUPiBpbXBsO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1lbWJlck5hbWUge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGltcGwuTWVtYmVyTmFtZTtcclxuICAgIH1cclxuICAgIFxyXG59ICAgICAgICBwdWJsaWMgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gRGlyZWN0aW9uIHtcclxuICAgIGdldFxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBpbXBsLkRpcmVjdGlvbjtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHVibGljIE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnQoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbiA9IE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uLmJvdGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbXBsID0gbmV3IE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+KG1lbWJlcm5hbWUsIHN0dWIsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBBdHRhY2goTXVsdGlEaW1BcnJheSBtZW1vcnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8dWxvbmdbXT4gR2V0RGltZW5zaW9ucyhDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLkdldERpbWVuc2lvbnMoY2FuY2VsKTsgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8dWxvbmc+IEdldERpbUNvdW50KENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGltcGwuR2V0RGltQ291bnQoY2FuY2VsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSBUYXNrPHVpbnQ+IEdldE1heFRyYW5zZmVyU2l6ZShDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLkdldE1heFRyYW5zZmVyU2l6ZShjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGFzeW5jIFRhc2sgUmVhZCh1bG9uZ1tdIG1lbW9yeXBvcywgTXVsdGlEaW1BcnJheSBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IGltcGwuUmVhZEltcGwobWVtb3J5cG9zLCBidWZmZXIsIGJ1ZmZlcnBvcywgY291bnQsIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrIFdyaXRlKHVsb25nW10gbWVtb3J5cG9zLCBNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgaW1wbC5Xcml0ZUltcGwobWVtb3J5cG9zLCBidWZmZXIsIGJ1ZmZlcnBvcywgY291bnQsIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBQb2RBcnJheU1lbW9yeTxUPiA6IEFycmF5TWVtb3J5PFQ+IHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgUG9kQXJyYXlNZW1vcnkoKSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQb2RBcnJheU1lbW9yeShUW10gbWVtb3J5KSA6IGJhc2UobWVtb3J5KVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJuYWwgY2xhc3MgUG9kQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+IDogQXJyYXlNZW1vcnlDbGllbnRJbXBsQmFzZSB3aGVyZSBUOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBpbnRlcm5hbCBQb2RBcnJheU1lbW9yeUNsaWVudEltcGwoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24pXHJcbiAgICAgICAgICAgIDogYmFzZShtZW1iZXJuYW1lLCBzdHViLCBEYXRhVHlwZXMucG9kX3QsIGVsZW1lbnRfc2l6ZSwgZGlyZWN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB1bG9uZyBHZXRCdWZmZXJMZW5ndGgob2JqZWN0IGJ1ZmZlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAodWxvbmcpKChUW10pYnVmZmVyKS5Mb25nTGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIG9iamVjdCBQYWNrV3JpdGVSZXF1ZXN0KG9iamVjdCBidWZmZXIsIHVsb25nIGJ1ZmZlcnBvcywgdWxvbmcgY291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnVmZmVyMSA9IChUW10pYnVmZmVyOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBUW2NvdW50XTtcclxuICAgICAgICAgICAgQXJyYXkuQ29weShidWZmZXIxLCAobG9uZylidWZmZXJwb3MsIG8sIDAsIChsb25nKWNvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0dWIucnJfbm9kZS5QYWNrUG9kQXJyYXk8VD4obywgc3R1Yi5SUkNvbnRleHQpOyAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBVbnBhY2tSZWFkUmVzdWx0KG9iamVjdCByZXMsIG9iamVjdCBidWZmZXIsIHVsb25nIGJ1ZmZlcnBvcywgdWxvbmcgY291bnQpXHJcbiAgICAgICAgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHN0dWIucnJfbm9kZS5VbnBhY2tQb2RBcnJheTxUPigoTWVzc2FnZUVsZW1lbnRQb2RBcnJheSlyZXMsIHN0dWIuUlJDb250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIGJ1ZmZlcjEgPSAoVFtdKWJ1ZmZlcjtcclxuICAgICAgICAgICAgQXJyYXkuQ29weShkYXRhLCAwLCBidWZmZXIxLCAobG9uZylidWZmZXJwb3MsIChsb25nKWNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFBvZEFycmF5TWVtb3J5Q2xpZW50PFQ+IDogUG9kQXJyYXlNZW1vcnk8VD4gIHdoZXJlIFQ6IHN0cnVjdFxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgUG9kQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+IGltcGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTWVtYmVyTmFtZSB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gaW1wbC5NZW1iZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgXHJcbn0gICAgICAgIHB1YmxpYyBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBEaXJlY3Rpb24ge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGltcGwuRGlyZWN0aW9uO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuICAgICAgICBwdWJsaWMgUG9kQXJyYXlNZW1vcnlDbGllbnQoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24gPSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5ib3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW1wbCA9IG5ldyBQb2RBcnJheU1lbW9yeUNsaWVudEltcGw8VD4obWVtYmVybmFtZSwgc3R1YiwgZWxlbWVudF9zaXplLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgQXR0YWNoKFRbXSBtZW1vcnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8dWxvbmc+IEdldExlbmd0aChDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLkdldExlbmd0aCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBUYXNrPHVpbnQ+IEdldE1heFRyYW5zZmVyU2l6ZShDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaW1wbC5HZXRNYXhUcmFuc2ZlclNpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrIFJlYWQodWxvbmcgbWVtb3J5cG9zLCBUW10gYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLlJlYWRJbXBsKG1lbW9yeXBvcywgYnVmZmVyLCBidWZmZXJwb3MsIGNvdW50LCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2sgV3JpdGUodWxvbmcgbWVtb3J5cG9zLCBUW10gYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLldyaXRlSW1wbChtZW1vcnlwb3MsIGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFBvZE11bHRpRGltQXJyYXlNZW1vcnk8VD4gOiBNdWx0aURpbUFycmF5TWVtb3J5QmFzZSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBQb2RNdWx0aURpbUFycmF5IG11bHRpbWVtb3J5O1xyXG5cclxuICAgICAgICBwdWJsaWMgUG9kTXVsdGlEaW1BcnJheU1lbW9yeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBvZE11bHRpRGltQXJyYXlNZW1vcnkoUG9kTXVsdGlEaW1BcnJheSBtZW1vcnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtdWx0aW1lbW9yeSA9IG1lbW9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgQXR0YWNoKFBvZE11bHRpRGltQXJyYXkgbWVtb3J5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tdWx0aW1lbW9yeSA9IG1lbW9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrPHVsb25nW10+IEdldERpbWVuc2lvbnMoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PHVsb25nW10+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVpbnQsdWxvbmc+KG11bHRpbWVtb3J5LkRpbXMsKEZ1bmM8dWludCx1bG9uZz4pKHggPT4gKHVsb25nKXgpKS5Ub0FycmF5KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8dWxvbmc+IEdldERpbUNvdW50KENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDx1bG9uZz4oKHVsb25nKW11bHRpbWVtb3J5LkRpbXMuTGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFRhc2sgUmVhZCh1bG9uZ1tdIG1lbW9yeXBvcywgUG9kTXVsdGlEaW1BcnJheSBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG11bHRpbWVtb3J5LlJldHJpZXZlU3ViQXJyYXkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4obWVtb3J5cG9zLChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCksIGJ1ZmZlciwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oYnVmZmVycG9zLChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCksIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KGNvdW50LChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBUYXNrIFdyaXRlKHVsb25nW10gbWVtb3J5cG9zLCBQb2RNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbXVsdGltZW1vcnkuQXNzaWduU3ViQXJyYXkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4obWVtb3J5cG9zLChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCksIGJ1ZmZlciwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oYnVmZmVycG9zLChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCksIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KGNvdW50LChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGludGVybmFsIGNsYXNzIFBvZE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+IDogTXVsdGlEaW1BcnJheU1lbW9yeUNsaWVudEltcGxCYXNlIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBpbnRlcm5hbCBQb2RNdWx0aURpbUFycmF5TWVtb3J5Q2xpZW50SW1wbChzdHJpbmcgbWVtYmVybmFtZSwgU2VydmljZVN0dWIgc3R1YiwgdWludCBlbGVtZW50X3NpemUsIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbilcclxuICAgICAgICAgICAgOiBiYXNlKG1lbWJlcm5hbWUsIHN0dWIsIERhdGFUeXBlcy5wb2RfdCwgZWxlbWVudF9zaXplLCBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIG9iamVjdCBQYWNrV3JpdGVSZXF1ZXN0KG9iamVjdCBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCB1bG9uZyBlbGVtX2NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ1ZmZlcjEgPSAoUG9kTXVsdGlEaW1BcnJheSkoYnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIGJvb2wgZXF1ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChsb25nIGkgPSAwOyBpIDwgY291bnQuTG9uZ0xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVycG9zW2ldICE9IDAgfHwgYnVmZmVyMS5EaW1zW2ldICE9IGNvdW50W2ldKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVxdSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZXF1KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R1Yi5ycl9ub2RlLlBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KGJ1ZmZlcjEsIHN0dWIuUlJDb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IFBvZE11bHRpRGltQXJyYXkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSwgbmV3IFRbZWxlbV9jb3VudF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ1ZmZlcjEuUmV0cmlldmVTdWJBcnJheShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyx1aW50PihidWZmZXJwb3MsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSwgZGF0YSwgbmV3IHVpbnRbY291bnQuTGVuZ3RoXSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R1Yi5ycl9ub2RlLlBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KGRhdGEsIHN0dWIuUlJDb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgVW5wYWNrUmVhZFJlc3VsdChvYmplY3QgcmVzLCBvYmplY3QgYnVmZmVyLCB1bG9uZ1tdIGJ1ZmZlcnBvcywgdWxvbmdbXSBjb3VudCwgdWxvbmcgZWxlbV9jb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBidWZmZXIxID0gKFBvZE11bHRpRGltQXJyYXkpYnVmZmVyO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHN0dWIucnJfbm9kZS5VbnBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KChNZXNzYWdlRWxlbWVudFBvZE11bHRpRGltQXJyYXkpcmVzLCBzdHViLlJSQ29udGV4dCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YTIgPSBuZXcgUG9kTXVsdGlEaW1BcnJheU1lbW9yeTxUPihkYXRhKTtcclxuICAgICAgICAgICAgZGF0YTIuUmVhZChuZXcgdWxvbmdbY291bnQuTGVuZ3RoXSwgYnVmZmVyMSwgYnVmZmVycG9zLCBjb3VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBQb2RNdWx0aURpbUFycmF5TWVtb3J5Q2xpZW50PFQ+IDogUG9kTXVsdGlEaW1BcnJheU1lbW9yeTxUPiB3aGVyZSBUIDogc3RydWN0XHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBQb2RNdWx0aURpbUFycmF5TWVtb3J5Q2xpZW50SW1wbDxUPiBpbXBsO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1lbWJlck5hbWUge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGltcGwuTWVtYmVyTmFtZTtcclxuICAgIH1cclxuICAgIFxyXG59ICAgICAgICBwdWJsaWMgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gRGlyZWN0aW9uIHtcclxuICAgIGdldFxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBpbXBsLkRpcmVjdGlvbjtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHVibGljIFBvZE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnQoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24gPSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5ib3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW1wbCA9IG5ldyBQb2RNdWx0aURpbUFycmF5TWVtb3J5Q2xpZW50SW1wbDxUPihtZW1iZXJuYW1lLCBzdHViLCBlbGVtZW50X3NpemUsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBBdHRhY2goUG9kTXVsdGlEaW1BcnJheSBtZW1vcnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8dWxvbmdbXT4gR2V0RGltZW5zaW9ucyhDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLkdldERpbWVuc2lvbnMoY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrPHVsb25nPiBHZXREaW1Db3VudChDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLkdldERpbUNvdW50KGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIFRhc2s8dWludD4gR2V0TWF4VHJhbnNmZXJTaXplKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGltcGwuR2V0TWF4VHJhbnNmZXJTaXplKGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgVGFzayBSZWFkKHVsb25nW10gbWVtb3J5cG9zLCBQb2RNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgaW1wbC5SZWFkSW1wbChtZW1vcnlwb3MsIGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrIFdyaXRlKHVsb25nW10gbWVtb3J5cG9zLCBQb2RNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgaW1wbC5Xcml0ZUltcGwobWVtb3J5cG9zLCBidWZmZXIsIGJ1ZmZlcnBvcywgY291bnQsIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBQb2RBcnJheU1lbW9yeVNlcnZpY2VTa2VsPFQ+IDogQXJyYXlNZW1vcnlTZXJ2aWNlU2tlbEJhc2Ugd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBQb2RBcnJheU1lbW9yeVNlcnZpY2VTa2VsKHN0cmluZyBtZW1iZXJuYW1lLCBTZXJ2aWNlU2tlbCBza2VsLCB1aW50IGVsZW1lbnRfc2l6ZSwgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gZGlyZWN0aW9uID0gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24uYm90aClcclxuICAgICAgICAgICAgOiBiYXNlKG1lbWJlcm5hbWUsIHNrZWwsIERhdGFUeXBlcy5wb2RfdCwgZWxlbWVudF9zaXplLCBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBhc3luYyBUYXNrPG9iamVjdD4gRG9SZWFkKHVsb25nIG1lbW9yeXBvcywgdWxvbmcgYnVmZmVycG9zLCB1bG9uZyBjb3VudCwgQXJyYXlNZW1vcnlCYXNlIG1lbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZW0xID0gKFBvZEFycmF5TWVtb3J5PFQ+KW1lbTtcclxuICAgICAgICAgICAgdmFyIGJ1ZjEgPSBuZXcgVFtjb3VudF07XHJcbiAgICAgICAgICAgIGF3YWl0IG1lbTEuUmVhZChtZW1vcnlwb3MsIGJ1ZjEsIDAsIGNvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNrZWwucnJfbm9kZS5QYWNrUG9kQXJyYXk8VD4oYnVmMSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXN5bmMgVGFzayBEb1dyaXRlKHVsb25nIG1lbW9yeXBvcywgb2JqZWN0IGJ1ZmZlciwgdWxvbmcgYnVmZmVycG9zLCB1bG9uZyBjb3VudCwgQXJyYXlNZW1vcnlCYXNlIG1lbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZW0xID0gKFBvZEFycmF5TWVtb3J5PFQ+KW1lbTtcclxuICAgICAgICAgICAgdmFyIGJ1ZjEgPSBza2VsLnJyX25vZGUuVW5wYWNrUG9kQXJyYXk8VD4oKE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkpYnVmZmVyLCBudWxsKTtcclxuICAgICAgICAgICAgYXdhaXQgbWVtMS5Xcml0ZShtZW1vcnlwb3MsIGJ1ZjEsIDAsIGNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFBvZE11bHRpRGltQXJyYXlNZW1vcnlTZXJ2aWNlU2tlbDxUPiA6IE11bHRpRGltQXJyYXlNZW1vcnlTZXJ2aWNlU2tlbEJhc2Ugd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBQb2RNdWx0aURpbUFycmF5TWVtb3J5U2VydmljZVNrZWwoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTa2VsIHNrZWwsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24gPSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5ib3RoKVxyXG4gICAgICAgICAgICA6IGJhc2UobWVtYmVybmFtZSwgc2tlbCwgRGF0YVR5cGVzLnBvZF90LCBlbGVtZW50X3NpemUsIGRpcmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXN5bmMgVGFzazxvYmplY3Q+IERvUmVhZCh1bG9uZ1tdIG1lbW9yeXBvcywgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIHVsb25nIGVsZW1fY291bnQsIE11bHRpRGltQXJyYXlNZW1vcnlCYXNlIG1lbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZW0xID0gKFBvZE11bHRpRGltQXJyYXlNZW1vcnk8VD4pbWVtO1xyXG4gICAgICAgICAgICB2YXIgYnVmMSA9IG5ldyBQb2RNdWx0aURpbUFycmF5KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KGNvdW50LChGdW5jPHVsb25nLHVpbnQ+KSh4ID0+ICh1aW50KXgpKS5Ub0FycmF5KCksIG5ldyBUW2VsZW1fY291bnRdKTtcclxuICAgICAgICAgICAgYXdhaXQgbWVtMS5SZWFkKG1lbW9yeXBvcywgYnVmMSwgbmV3IHVsb25nW2NvdW50Lkxlbmd0aF0sIGNvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNrZWwucnJfbm9kZS5QYWNrUG9kTXVsdGlEaW1BcnJheTxUPihidWYxLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBhc3luYyBUYXNrIERvV3JpdGUodWxvbmdbXSBtZW1vcnlwb3MsIG9iamVjdCBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCB1bG9uZyBlbGVtX2NvdW50LCBNdWx0aURpbUFycmF5TWVtb3J5QmFzZSBtZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWVtMSA9IChQb2RNdWx0aURpbUFycmF5TWVtb3J5PFQ+KW1lbTtcclxuICAgICAgICAgICAgdmFyIGJ1ZjEgPSBza2VsLnJyX25vZGUuVW5wYWNrUG9kTXVsdGlEaW1BcnJheTxUPigoTWVzc2FnZUVsZW1lbnRQb2RNdWx0aURpbUFycmF5KWJ1ZmZlciwgbnVsbCk7XHJcbiAgICAgICAgICAgIGF3YWl0IG1lbTEuV3JpdGUobWVtb3J5cG9zLCBidWYxLCBuZXcgdWxvbmdbY291bnQuTGVuZ3RoXSwgY291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTmFtZWRBcnJheU1lbW9yeTxUPiA6IEFycmF5TWVtb3J5PFQ+IHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTmFtZWRBcnJheU1lbW9yeSgpIDogYmFzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE5hbWVkQXJyYXlNZW1vcnkoVFtdIG1lbW9yeSkgOiBiYXNlKG1lbW9yeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGludGVybmFsIGNsYXNzIE5hbWVkQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+IDogQXJyYXlNZW1vcnlDbGllbnRJbXBsQmFzZSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICB7XHJcbiAgICAgICAgaW50ZXJuYWwgTmFtZWRBcnJheU1lbW9yeUNsaWVudEltcGwoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24pXHJcbiAgICAgICAgICAgIDogYmFzZShtZW1iZXJuYW1lLCBzdHViLCBEYXRhVHlwZXMubmFtZWRhcnJheV90LCBlbGVtZW50X3NpemUsIGRpcmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdWxvbmcgR2V0QnVmZmVyTGVuZ3RoKG9iamVjdCBidWZmZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKHVsb25nKSgoVFtdKWJ1ZmZlcikuTG9uZ0xlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBvYmplY3QgUGFja1dyaXRlUmVxdWVzdChvYmplY3QgYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ1ZmZlcjEgPSAoVFtdKWJ1ZmZlcjtcclxuICAgICAgICAgICAgdmFyIG8gPSBuZXcgVFtjb3VudF07XHJcbiAgICAgICAgICAgIEFycmF5LkNvcHkoYnVmZmVyMSwgKGxvbmcpYnVmZmVycG9zLCBvLCAwLCAobG9uZyljb3VudCk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHViLnJyX25vZGUuUGFja05hbWVkQXJyYXk8VD4obywgc3R1Yi5SUkNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgVW5wYWNrUmVhZFJlc3VsdChvYmplY3QgcmVzLCBvYmplY3QgYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBzdHViLnJyX25vZGUuVW5wYWNrTmFtZWRBcnJheTxUPigoTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5KXJlcywgc3R1Yi5SUkNvbnRleHQpO1xyXG4gICAgICAgICAgICB2YXIgYnVmZmVyMSA9IChUW10pYnVmZmVyO1xyXG4gICAgICAgICAgICBBcnJheS5Db3B5KGRhdGEsIDAsIGJ1ZmZlcjEsIChsb25nKWJ1ZmZlcnBvcywgKGxvbmcpY291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTmFtZWRBcnJheU1lbW9yeUNsaWVudDxUPiA6IE5hbWVkQXJyYXlNZW1vcnk8VD4gd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgTmFtZWRBcnJheU1lbW9yeUNsaWVudEltcGw8VD4gaW1wbDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBNZW1iZXJOYW1lIHtcclxuICAgIGdldFxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBpbXBsLk1lbWJlck5hbWU7XHJcbiAgICB9XHJcbiAgICBcclxufSAgICAgICAgcHVibGljIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIERpcmVjdGlvbiB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gaW1wbC5EaXJlY3Rpb247XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG4gICAgICAgIHB1YmxpYyBOYW1lZEFycmF5TWVtb3J5Q2xpZW50KHN0cmluZyBtZW1iZXJuYW1lLCBTZXJ2aWNlU3R1YiBzdHViLCB1aW50IGVsZW1lbnRfc2l6ZSwgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gZGlyZWN0aW9uID0gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24uYm90aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGltcGwgPSBuZXcgTmFtZWRBcnJheU1lbW9yeUNsaWVudEltcGw8VD4obWVtYmVybmFtZSwgc3R1YiwgZWxlbWVudF9zaXplLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgQXR0YWNoKFRbXSBtZW1vcnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8dWxvbmc+IEdldExlbmd0aChDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLkdldExlbmd0aCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBUYXNrPHVpbnQ+IEdldE1heFRyYW5zZmVyU2l6ZShDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaW1wbC5HZXRNYXhUcmFuc2ZlclNpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrIFJlYWQodWxvbmcgbWVtb3J5cG9zLCBUW10gYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLlJlYWRJbXBsKG1lbW9yeXBvcywgYnVmZmVyLCBidWZmZXJwb3MsIGNvdW50LCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2sgV3JpdGUodWxvbmcgbWVtb3J5cG9zLCBUW10gYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLldyaXRlSW1wbChtZW1vcnlwb3MsIGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE5hbWVkTXVsdGlEaW1BcnJheU1lbW9yeTxUPiA6IE11bHRpRGltQXJyYXlNZW1vcnlCYXNlIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIE5hbWVkTXVsdGlEaW1BcnJheSBtdWx0aW1lbW9yeTtcclxuXHJcbiAgICAgICAgcHVibGljIE5hbWVkTXVsdGlEaW1BcnJheU1lbW9yeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE5hbWVkTXVsdGlEaW1BcnJheU1lbW9yeShOYW1lZE11bHRpRGltQXJyYXkgbWVtb3J5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbXVsdGltZW1vcnkgPSBtZW1vcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIEF0dGFjaChOYW1lZE11bHRpRGltQXJyYXkgbWVtb3J5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tdWx0aW1lbW9yeSA9IG1lbW9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrPHVsb25nW10+IEdldERpbWVuc2lvbnMoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PHVsb25nW10+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVpbnQsdWxvbmc+KG11bHRpbWVtb3J5LkRpbXMsKEZ1bmM8dWludCx1bG9uZz4pKHggPT4gKHVsb25nKXgpKS5Ub0FycmF5KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8dWxvbmc+IEdldERpbUNvdW50KENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDx1bG9uZz4oKHVsb25nKW11bHRpbWVtb3J5LkRpbXMuTGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFRhc2sgUmVhZCh1bG9uZ1tdIG1lbW9yeXBvcywgTmFtZWRNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbXVsdGltZW1vcnkuUmV0cmlldmVTdWJBcnJheShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyx1aW50PihtZW1vcnlwb3MsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSwgYnVmZmVyLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyx1aW50PihidWZmZXJwb3MsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8aW50PigwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFRhc2sgV3JpdGUodWxvbmdbXSBtZW1vcnlwb3MsIE5hbWVkTXVsdGlEaW1BcnJheSBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG11bHRpbWVtb3J5LkFzc2lnblN1YkFycmF5KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KG1lbW9yeXBvcywoRnVuYzx1bG9uZyx1aW50PikoeCA9PiAodWludCl4KSkuVG9BcnJheSgpLCBidWZmZXIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLHVpbnQ+KGJ1ZmZlcnBvcywoRnVuYzx1bG9uZyx1aW50PikoeCA9PiAodWludCl4KSkuVG9BcnJheSgpLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyx1aW50Pihjb3VudCwoRnVuYzx1bG9uZyx1aW50PikoeCA9PiAodWludCl4KSkuVG9BcnJheSgpKTtcclxuICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDxpbnQ+KDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbnRlcm5hbCBjbGFzcyBOYW1lZE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+IDogTXVsdGlEaW1BcnJheU1lbW9yeUNsaWVudEltcGxCYXNlIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBpbnRlcm5hbCBOYW1lZE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnRJbXBsKHN0cmluZyBtZW1iZXJuYW1lLCBTZXJ2aWNlU3R1YiBzdHViLCB1aW50IGVsZW1lbnRfc2l6ZSwgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gZGlyZWN0aW9uKVxyXG4gICAgICAgICAgICA6IGJhc2UobWVtYmVybmFtZSwgc3R1YiwgRGF0YVR5cGVzLm5hbWVkYXJyYXlfdCwgZWxlbWVudF9zaXplLCBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIG9iamVjdCBQYWNrV3JpdGVSZXF1ZXN0KG9iamVjdCBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCB1bG9uZyBlbGVtX2NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ1ZmZlcjEgPSAoTmFtZWRNdWx0aURpbUFycmF5KShidWZmZXIpO1xyXG5cclxuICAgICAgICAgICAgYm9vbCBlcXUgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGxvbmcgaSA9IDA7IGkgPCBjb3VudC5Mb25nTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChidWZmZXJwb3NbaV0gIT0gMCB8fCBidWZmZXIxLkRpbXNbaV0gIT0gY291bnRbaV0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXF1ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlcXUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHViLnJyX25vZGUuUGFja05hbWVkTXVsdGlEaW1BcnJheTxUPihidWZmZXIxLCBzdHViLlJSQ29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBOYW1lZE11bHRpRGltQXJyYXkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSwgbmV3IFRbZWxlbV9jb3VudF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ1ZmZlcjEuUmV0cmlldmVTdWJBcnJheShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyx1aW50PihidWZmZXJwb3MsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSwgZGF0YSwgbmV3IHVpbnRbY291bnQuTGVuZ3RoXSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R1Yi5ycl9ub2RlLlBhY2tOYW1lZE11bHRpRGltQXJyYXk8VD4oZGF0YSwgc3R1Yi5SUkNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBVbnBhY2tSZWFkUmVzdWx0KG9iamVjdCByZXMsIG9iamVjdCBidWZmZXIsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCB1bG9uZyBlbGVtX2NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ1ZmZlcjEgPSAoTmFtZWRNdWx0aURpbUFycmF5KWJ1ZmZlcjtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBzdHViLnJyX25vZGUuVW5wYWNrTmFtZWRNdWx0aURpbUFycmF5PFQ+KChNZXNzYWdlRWxlbWVudE5hbWVkTXVsdGlEaW1BcnJheSlyZXMsIHN0dWIuUlJDb250ZXh0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhMiA9IG5ldyBOYW1lZE11bHRpRGltQXJyYXlNZW1vcnk8VD4oZGF0YSk7XHJcbiAgICAgICAgICAgIGRhdGEyLlJlYWQobmV3IHVsb25nW2NvdW50Lkxlbmd0aF0sIGJ1ZmZlcjEsIGJ1ZmZlcnBvcywgY291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTmFtZWRNdWx0aURpbUFycmF5TWVtb3J5Q2xpZW50PFQ+IDogTmFtZWRNdWx0aURpbUFycmF5TWVtb3J5PFQ+IHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIE5hbWVkTXVsdGlEaW1BcnJheU1lbW9yeUNsaWVudEltcGw8VD4gaW1wbDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBNZW1iZXJOYW1lIHtcclxuICAgIGdldFxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBpbXBsLk1lbWJlck5hbWU7XHJcbiAgICB9XHJcbiAgICBcclxufSAgICAgICAgcHVibGljIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIERpcmVjdGlvbiB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gaW1wbC5EaXJlY3Rpb247XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG4gICAgICAgIHB1YmxpYyBOYW1lZE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnQoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24gPSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5ib3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW1wbCA9IG5ldyBOYW1lZE11bHRpRGltQXJyYXlNZW1vcnlDbGllbnRJbXBsPFQ+KG1lbWJlcm5hbWUsIHN0dWIsIGVsZW1lbnRfc2l6ZSwgZGlyZWN0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIEF0dGFjaChOYW1lZE11bHRpRGltQXJyYXkgbWVtb3J5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrPHVsb25nW10+IEdldERpbWVuc2lvbnMoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaW1wbC5HZXREaW1lbnNpb25zKGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVGFzazx1bG9uZz4gR2V0RGltQ291bnQoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaW1wbC5HZXREaW1Db3VudChjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBUYXNrPHVpbnQ+IEdldE1heFRyYW5zZmVyU2l6ZShDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbXBsLkdldE1heFRyYW5zZmVyU2l6ZShjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGFzeW5jIFRhc2sgUmVhZCh1bG9uZ1tdIG1lbW9yeXBvcywgTmFtZWRNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWxvbmdbXSBidWZmZXJwb3MsIHVsb25nW10gY291bnQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgaW1wbC5SZWFkSW1wbChtZW1vcnlwb3MsIGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrIFdyaXRlKHVsb25nW10gbWVtb3J5cG9zLCBOYW1lZE11bHRpRGltQXJyYXkgYnVmZmVyLCB1bG9uZ1tdIGJ1ZmZlcnBvcywgdWxvbmdbXSBjb3VudCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCBpbXBsLldyaXRlSW1wbChtZW1vcnlwb3MsIGJ1ZmZlciwgYnVmZmVycG9zLCBjb3VudCwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE5hbWVkQXJyYXlNZW1vcnlTZXJ2aWNlU2tlbDxUPiA6IEFycmF5TWVtb3J5U2VydmljZVNrZWxCYXNlIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTmFtZWRBcnJheU1lbW9yeVNlcnZpY2VTa2VsKHN0cmluZyBtZW1iZXJuYW1lLCBTZXJ2aWNlU2tlbCBza2VsLCB1aW50IGVsZW1lbnRfc2l6ZSwgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gZGlyZWN0aW9uID0gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24uYm90aClcclxuICAgICAgICAgICAgOiBiYXNlKG1lbWJlcm5hbWUsIHNrZWwsIERhdGFUeXBlcy5uYW1lZGFycmF5X3QsIGVsZW1lbnRfc2l6ZSwgZGlyZWN0aW9uKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXN5bmMgVGFzazxvYmplY3Q+IERvUmVhZCh1bG9uZyBtZW1vcnlwb3MsIHVsb25nIGJ1ZmZlcnBvcywgdWxvbmcgY291bnQsIEFycmF5TWVtb3J5QmFzZSBtZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWVtMSA9IChOYW1lZEFycmF5TWVtb3J5PFQ+KW1lbTtcclxuICAgICAgICAgICAgdmFyIGJ1ZjEgPSBuZXcgVFtjb3VudF07XHJcbiAgICAgICAgICAgIGF3YWl0IG1lbTEuUmVhZChtZW1vcnlwb3MsIGJ1ZjEsIDAsIGNvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNrZWwucnJfbm9kZS5QYWNrTmFtZWRBcnJheTxUPihidWYxLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBhc3luYyBUYXNrIERvV3JpdGUodWxvbmcgbWVtb3J5cG9zLCBvYmplY3QgYnVmZmVyLCB1bG9uZyBidWZmZXJwb3MsIHVsb25nIGNvdW50LCBBcnJheU1lbW9yeUJhc2UgbWVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lbTEgPSAoTmFtZWRBcnJheU1lbW9yeTxUPiltZW07XHJcbiAgICAgICAgICAgIHZhciBidWYxID0gc2tlbC5ycl9ub2RlLlVucGFja05hbWVkQXJyYXk8VD4oKE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSlidWZmZXIsIG51bGwpO1xyXG4gICAgICAgICAgICBhd2FpdCBtZW0xLldyaXRlKG1lbW9yeXBvcywgYnVmMSwgMCwgY291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTmFtZWRNdWx0aURpbUFycmF5TWVtb3J5U2VydmljZVNrZWw8VD4gOiBNdWx0aURpbUFycmF5TWVtb3J5U2VydmljZVNrZWxCYXNlIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTmFtZWRNdWx0aURpbUFycmF5TWVtb3J5U2VydmljZVNrZWwoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTa2VsIHNrZWwsIHVpbnQgZWxlbWVudF9zaXplLCBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBkaXJlY3Rpb24gPSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5ib3RoKVxyXG4gICAgICAgICAgICA6IGJhc2UobWVtYmVybmFtZSwgc2tlbCwgRGF0YVR5cGVzLm5hbWVkYXJyYXlfdCwgZWxlbWVudF9zaXplLCBkaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIGFzeW5jIFRhc2s8b2JqZWN0PiBEb1JlYWQodWxvbmdbXSBtZW1vcnlwb3MsIHVsb25nW10gYnVmZmVycG9zLCB1bG9uZ1tdIGNvdW50LCB1bG9uZyBlbGVtX2NvdW50LCBNdWx0aURpbUFycmF5TWVtb3J5QmFzZSBtZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWVtMSA9IChOYW1lZE11bHRpRGltQXJyYXlNZW1vcnk8VD4pbWVtO1xyXG4gICAgICAgICAgICB2YXIgYnVmMSA9IG5ldyBOYW1lZE11bHRpRGltQXJyYXkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsdWludD4oY291bnQsKEZ1bmM8dWxvbmcsdWludD4pKHggPT4gKHVpbnQpeCkpLlRvQXJyYXkoKSwgbmV3IFRbZWxlbV9jb3VudF0pO1xyXG4gICAgICAgICAgICBhd2FpdCBtZW0xLlJlYWQobWVtb3J5cG9zLCBidWYxLCBuZXcgdWxvbmdbY291bnQuTGVuZ3RoXSwgY291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2tlbC5ycl9ub2RlLlBhY2tOYW1lZE11bHRpRGltQXJyYXk8VD4oYnVmMSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXN5bmMgVGFzayBEb1dyaXRlKHVsb25nW10gbWVtb3J5cG9zLCBvYmplY3QgYnVmZmVyLCB1bG9uZ1tdIGJ1ZmZlcnBvcywgdWxvbmdbXSBjb3VudCwgdWxvbmcgZWxlbV9jb3VudCwgTXVsdGlEaW1BcnJheU1lbW9yeUJhc2UgbWVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lbTEgPSAoTmFtZWRNdWx0aURpbUFycmF5TWVtb3J5PFQ+KW1lbTtcclxuICAgICAgICAgICAgdmFyIGJ1ZjEgPSBza2VsLnJyX25vZGUuVW5wYWNrTmFtZWRNdWx0aURpbUFycmF5PFQ+KChNZXNzYWdlRWxlbWVudE5hbWVkTXVsdGlEaW1BcnJheSlidWZmZXIsIG51bGwpO1xyXG4gICAgICAgICAgICBhd2FpdCBtZW0xLldyaXRlKG1lbW9yeXBvcywgYnVmMSwgbmV3IHVsb25nW2NvdW50Lkxlbmd0aF0sIGNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgUm9ib3RSYWNvbnRldXJXZWJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFzeW5jTXV0ZXhcclxuICAgIHtcclxuICAgICAgICBRdWV1ZTxUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+PiB3YWl0aW5nX3Rhc2tzPW5ldyBRdWV1ZTxUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+PigpO1xyXG4gICAgICAgIFRhc2sgY3VycmVudCA9IG51bGw7XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgTG9ja0hhbmRsZSA6IElEaXNwb3NhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUYXNrIHRhc2sgPSBudWxsO1xyXG4gICAgICAgICAgICBBc3luY011dGV4IG93bmVyID0gbnVsbDtcclxuICAgICAgICAgICAgaW50ZXJuYWwgTG9ja0hhbmRsZShBc3luY011dGV4IG93bmVyLCBUYXNrIHRhc2spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IHRhc2s7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIERpc3Bvc2UoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvd25lci5FeGl0KHRhc2spO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8SURpc3Bvc2FibGU+IExvY2soKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHQgPUVudGVyKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHQ7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9ja0hhbmRsZSh0aGlzLCB0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPElEaXNwb3NhYmxlPiBMb2NrV2l0aFRpbWVvdXQoaW50IHRpbWVvdXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUYXNrIHQgPSBudWxsOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0ID0gRW50ZXIoKTtcclxuICAgICAgICAgICAgYXdhaXQgVGFzay5XaGVuQW55KHQsIFRhc2suRGVsYXkodGltZW91dCkpO1xyXG4gICAgICAgICAgICBpZiAodC5Jc0NvbXBsZXRlZCB8fCB0LklzRmF1bHRlZCB8fCB0LklzQ2FuY2VsZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExvY2tIYW5kbGUodGhpcywgdCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFRhc2sgbm9vcD10LkNvbnRpbnVlV2l0aCgoQWN0aW9uPFRhc2s+KShkZWxlZ2F0ZShUYXNrIHgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBlPXguRXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRXhpdCh4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVGltZW91dEV4Y2VwdGlvbihcIlRpbWVvdXQgd2F0aW5nIGZvciBtdXRleCBsb2NrXCIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUYXNrIEVudGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPGludD4oKTtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0LlRyeVNldFJlc3VsdCgwKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gdC5UYXNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0LlRhc2s7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FpdGluZ190YXNrcy5FbnF1ZXVlKHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0LlRhc2s7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBFeGl0KFRhc2sgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gYz1udWxsO1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISBPYmplY3QuUmVmZXJlbmNlRXF1YWxzKHQsIGN1cnJlbnQpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCB0YXNrIHRvIHJlbGVhc2UgbXV0ZXhcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAod2FpdGluZ190YXNrcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IHdhaXRpbmdfdGFza3MuRGVxdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjLlRhc2s7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGMgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYy5UcnlTZXRSZXN1bHQoMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENhbmNlbEFsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYzI9IG5ldyBRdWV1ZTxUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+PigpO1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAod2FpdGluZ190YXNrcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYzIuRW5xdWV1ZSh3YWl0aW5nX3Rhc2tzLkRlcXVldWUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGMyLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYzIuRGVxdWV1ZSgpLlRyeVNldENhbmNlbGVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBSb2JvdFJhY29udGV1cldlYi5FeHRlbnNpb25zO1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTZXJ2aWNlU2VjdXJpdHlQb2xpY3lcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVXNlckF1dGhlbnRpY2F0b3IgQXV0aGVudGljYXRvcjtcclxuICAgICAgICBwdWJsaWMgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4gUG9saWNpZXM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlU2VjdXJpdHlQb2xpY3koKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXV0aGVudGljYXRvciA9IG51bGw7XHJcbiAgICAgICAgICAgIFBvbGljaWVzID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlU2VjdXJpdHlQb2xpY3koVXNlckF1dGhlbnRpY2F0b3IgQXV0aGVudGljYXRvciwgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4gUG9saWNpZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkF1dGhlbnRpY2F0b3IgPSBBdXRoZW50aWNhdG9yO1xyXG4gICAgICAgICAgICB0aGlzLlBvbGljaWVzID0gUG9saWNpZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBBdXRoZW50aWNhdGVkVXNlclxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIG1fVXNlcm5hbWU7XHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmdbXSBtX1ByaXZpbGVnZXM7XHJcbiAgICAgICAgcHJpdmF0ZSBEYXRlVGltZSBtX0xvZ2luVGltZTtcclxuICAgICAgICBwcml2YXRlIERhdGVUaW1lIG1fTGFzdEFjY2Vzc1RpbWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVXNlcm5hbWUgeyBnZXQgeyByZXR1cm4gbV9Vc2VybmFtZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmdbXSBQcml2aWxlZ2VzIHsgZ2V0IHsgcmV0dXJuIG1fUHJpdmlsZWdlczsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRlVGltZSBMb2dpblRpbWUgeyBnZXQgeyByZXR1cm4gbV9Mb2dpblRpbWU7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0ZVRpbWUgTGFzdEFjY2Vzc1RpbWUgeyBnZXQgeyByZXR1cm4gbV9MYXN0QWNjZXNzVGltZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBdXRoZW50aWNhdGVkVXNlcihzdHJpbmcgdXNlcm5hbWUsIHN0cmluZ1tdIHByaXZpbGVnZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1fVXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgICAgICAgICAgdGhpcy5tX1ByaXZpbGVnZXMgPSBwcml2aWxlZ2VzO1xyXG4gICAgICAgICAgICBtX0xvZ2luVGltZSA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICAgICAgbV9MYXN0QWNjZXNzVGltZSA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVwZGF0ZUxhc3RBY2Nlc3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbV9MYXN0QWNjZXNzVGltZSA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgaW50ZXJmYWNlIFVzZXJBdXRoZW50aWNhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgQXV0aGVudGljYXRlZFVzZXIgQXV0aGVudGljYXRlVXNlcihzdHJpbmcgdXNlcm5hbWUsIERpY3Rpb25hcnk8c3RyaW5nLCBvYmplY3Q+IGNyZWRlbnRpYWxzKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuI2lmICFST0JPVFJBQ09OVEVVUl9CUklER0VcclxuICAgIHB1YmxpYyBjbGFzcyBQYXNzd29yZEZpbGVVc2VyQXV0aGVudGljYXRvciA6IFVzZXJBdXRoZW50aWNhdG9yXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2xhc3MgVXNlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIHN0cmluZyB1c2VybmFtZTtcclxuICAgICAgICAgICAgcHVibGljIHN0cmluZyBwYXNzd29yZGhhc2g7XHJcbiAgICAgICAgICAgIHB1YmxpYyBzdHJpbmdbXSBwcml2aWxlZ2VzO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgRGljdGlvbmFyeTxzdHJpbmcsIFVzZXI+IHZhbGlkdXNlcnMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFVzZXI+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQYXNzd29yZEZpbGVVc2VyQXV0aGVudGljYXRvcihTdHJlYW1SZWFkZXIgZmlsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyBkID0gZmlsZS5SZWFkVG9FbmQoKTtcclxuICAgICAgICAgICAgbG9hZChkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQYXNzd29yZEZpbGVVc2VyQXV0aGVudGljYXRvcihzdHJpbmcgZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvYWQoZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgbG9hZChzdHJpbmcgZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZ1tdIGxpbmVzID0gZGF0YS5TcGxpdChuZXcgc3RyaW5nW10geyBcIlxcclxcblwiLCBcIlxcblwiIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5SZW1vdmVFbXB0eUVudHJpZXMpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIGwgaW4gbGluZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmluZ1tdIGcgPSBsLlNwbGl0KG51bGwpO1xyXG4gICAgICAgICAgICAgICAgVXNlciB1ID0gbmV3IFVzZXIoKTtcclxuICAgICAgICAgICAgICAgIHUudXNlcm5hbWUgPSBnWzBdO1xyXG4gICAgICAgICAgICAgICAgdS5wYXNzd29yZGhhc2ggPSBnWzFdO1xyXG4gICAgICAgICAgICAgICAgdS5wcml2aWxlZ2VzID0gZ1syXS5TcGxpdChuZXcgY2hhcltdIHsgJywnIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhbGlkdXNlcnMuQWRkKHUudXNlcm5hbWUsIHUpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEF1dGhlbnRpY2F0ZWRVc2VyIEF1dGhlbnRpY2F0ZVVzZXIoc3RyaW5nIHVzZXJuYW1lLCBEaWN0aW9uYXJ5PHN0cmluZywgb2JqZWN0PiBjcmVkZW50aWFscylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghdmFsaWR1c2Vycy5LZXlzLkNvbnRhaW5zKHVzZXJuYW1lKSkgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCB1c2VybmFtZSBvciBwYXNzd29yZFwiKTtcclxuICAgICAgICAgICAgc3RyaW5nIHBhc3N3b3JkO1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQgPSAoc3RyaW5nKWNyZWRlbnRpYWxzW1wicGFzc3dvcmRcIl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FeGNlcHRpb24oXCJQYXNzd29yZCBub3Qgc3VwcGxpZWQgaW4gY3JlZGVudGlhbHNcIik7IH1cclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBwYXNzd29yZGhhc2ggPSBNRDVIYXNoKHBhc3N3b3JkKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWxpZHVzZXJzW3VzZXJuYW1lXS5wYXNzd29yZGhhc2ggIT0gcGFzc3dvcmRoYXNoKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCB1c2VybmFtZSBvciBwYXNzd29yZFwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXV0aGVudGljYXRlZFVzZXIodXNlcm5hbWUsIHZhbGlkdXNlcnNbdXNlcm5hbWVdLnByaXZpbGVnZXMpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBNRDVIYXNoKHN0cmluZyB0ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5NRDUgbWQ1ID0gbmV3IFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuTUQ1Q3J5cHRvU2VydmljZVByb3ZpZGVyKCk7XHJcblxyXG4gICAgICAgICAgICAvL2NvbXB1dGUgaGFzaCBmcm9tIHRoZSBieXRlcyBvZiB0ZXh0XHJcbiAgICAgICAgICAgIG1kNS5Db21wdXRlSGFzaChBU0NJSUVuY29kaW5nLkFTQ0lJLkdldEJ5dGVzKHRleHQpKTtcclxuXHJcbiAgICAgICAgICAgIC8vZ2V0IGhhc2ggcmVzdWx0IGFmdGVyIGNvbXB1dGUgaXRcclxuICAgICAgICAgICAgYnl0ZVtdIHJlc3VsdCA9IG1kNS5IYXNoO1xyXG5cclxuICAgICAgICAgICAgU3RyaW5nQnVpbGRlciBzdHJCdWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCByZXN1bHQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vY2hhbmdlIGl0IGludG8gMiBoZXhhZGVjaW1hbCBkaWdpdHNcclxuICAgICAgICAgICAgICAgIC8vZm9yIGVhY2ggYnl0ZVxyXG4gICAgICAgICAgICAgICAgc3RyQnVpbGRlci5BcHBlbmQocmVzdWx0W2ldLlRvU3RyaW5nKFwieDJcIikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyQnVpbGRlci5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiNlbmRpZlxyXG5cclxufSIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBTeXN0ZW0uTmV0O1xyXG51c2luZyBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnM7XHJcbnVzaW5nIFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnM7XHJcblxyXG5uYW1lc3BhY2UgUm9ib3RSYWNvbnRldXJXZWJcclxue1xyXG5cclxuICAgIHB1YmxpYyBpbnRlcmZhY2UgSVRyYW5zcG9ydENvbm5lY3Rpb25cclxuICAgIHtcclxuICAgICAgICBUYXNrIFNlbmRNZXNzYWdlKE1lc3NhZ2UgbSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKTtcclxuXHJcbiAgICAgICAgdm9pZCBDbG9zZSgpO1xyXG5cclxuICAgICAgICB2b2lkIENoZWNrQ29ubmVjdGlvbih1aW50IGVuZHBvaW50KTtcclxuXHJcbiAgICAgICAgdWludCBMb2NhbEVuZHBvaW50IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICB1aW50IFJlbW90ZUVuZHBvaW50IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBOb2RlSUQgUmVtb3RlTm9kZUlEIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgVHJhbnNwb3J0XHJcbiAgICB7XHJcbiAgICAgICAgW1RocmVhZFN0YXRpY11cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgc3RhdGljIHN0cmluZyBtX0N1cnJlbnRUaHJlYWRUcmFuc3BvcnRDb25uZWN0aW9uVVJMID0gbnVsbDtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBDdXJyZW50VGhyZWFkVHJhbnNwb3J0Q29ubmVjdGlvblVSTCB7IGdldCB7IHJldHVybiBtX0N1cnJlbnRUaHJlYWRUcmFuc3BvcnRDb25uZWN0aW9uVVJMOyB9IH1cclxuXHJcbiAgICAgICAgW1RocmVhZFN0YXRpY11cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgc3RhdGljIElUcmFuc3BvcnRDb25uZWN0aW9uIG1fQ3VycmVudFRocmVhZFRyYW5zcG9ydCA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSVRyYW5zcG9ydENvbm5lY3Rpb24gQ3VycmVudFRocmVhZFRyYW5zcG9ydCB7IGdldCB7IHJldHVybiBtX0N1cnJlbnRUaHJlYWRUcmFuc3BvcnQ7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uPE1lc3NhZ2U+IE1lc3NhZ2VSZWNlaXZlZEV2ZW50O1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgdWludCBUcmFuc3BvcnRJRDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIHJlYWRvbmx5IFJvYm90UmFjb250ZXVyTm9kZSBub2RlO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgVHJhbnNwb3J0KFJvYm90UmFjb250ZXVyTm9kZSBub2RlPW51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobm9kZSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IFJvYm90UmFjb250ZXVyTm9kZS5zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIENoZWNrQ29ubmVjdGlvbih1aW50IGVuZHBvaW50KVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgYm9vbCBJc0NsaWVudCB7IGdldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgYm9vbCBJc1NlcnZlciB7IGdldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3Qgc3RyaW5nW10gVXJsU2NoZW1lU3RyaW5nIHsgZ2V0OyB9XHJcblxyXG4gICAgICAgIC8vcHVibGljIGFic3RyYWN0IHN0cmluZyBTY2hlbWUgeyBnZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IGJvb2wgQ2FuQ29ubmVjdFNlcnZpY2Uoc3RyaW5nIHVybCk7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBUYXNrPElUcmFuc3BvcnRDb25uZWN0aW9uPiBDcmVhdGVUcmFuc3BvcnRDb25uZWN0aW9uKHN0cmluZyB1cmwsIEVuZHBvaW50IGUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBUYXNrIENsb3NlVHJhbnNwb3J0Q29ubmVjdGlvbihFbmRwb2ludCBlLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpO1xyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgVGFzayBTZW5kTWVzc2FnZShNZXNzYWdlIG0sIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIHZpcnR1YWwgdm9pZCBNZXNzYWdlUmVjZWl2ZWQoTWVzc2FnZSBtKVxyXG4gICAgICAgIHtcclxuXHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlUmVjZWl2ZWRFdmVudChtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBhc3luYyBUYXNrPE1lc3NhZ2U+IFNwZWNpYWxSZXF1ZXN0KE1lc3NhZ2UgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChtLmVudHJpZXMuQ291bnQgPj0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWludCB0eXBlID0gKCh1aW50KW0uZW50cmllc1swXS5FbnRyeVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPCA1MDAgJiYgKHR5cGUgJSAyID09IDEpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UgciA9IGF3YWl0IG5vZGUuU3BlY2lhbFJlcXVlc3QobSwgVHJhbnNwb3J0SUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFRhc2sgQ2xvc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRmlyZVRyYW5zcG9ydEV2ZW50TGlzdGVuZXIoVHJhbnNwb3J0TGlzdGVuZXJFdmVudFR5cGUuVHJhbnNwb3J0Q2xvc2VkLCBudWxsKTtcclxuICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDxpbnQ+KDApO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHVpbnQgVHJhbnNwb3J0Q2FwYWJpbGl0eShzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRlbGVnYXRlIHZvaWQgVHJhbnNwb3J0TGlzdGVuZXJEZWxlZ2F0ZShUcmFuc3BvcnQgdHJhbnNwb3J0LCBUcmFuc3BvcnRMaXN0ZW5lckV2ZW50VHlwZSBldiwgb2JqZWN0IHBhcmFtZXRlcik7XHJcblxyXG4gICAgICAgIHB1YmxpYyBldmVudCBUcmFuc3BvcnRMaXN0ZW5lckRlbGVnYXRlIFRyYW5zcG9ydExpc3RlbmVycztcclxuXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIEZpcmVUcmFuc3BvcnRFdmVudExpc3RlbmVyKFRyYW5zcG9ydExpc3RlbmVyRXZlbnRUeXBlIGV2LCBvYmplY3QgcGFyYW1ldGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFRyYW5zcG9ydExpc3RlbmVycyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNwb3J0TGlzdGVuZXJzKHRoaXMsIGV2LCBwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBUYXNrPExpc3Q8Tm9kZURpc2NvdmVyeUluZm8+PiBHZXREZXRlY3RlZE5vZGVzKENhbmNlbGxhdGlvblRva2VuIHRva2VuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG8gPSBuZXcgTGlzdDxOb2RlRGlzY292ZXJ5SW5mbz4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDxMaXN0PE5vZGVEaXNjb3ZlcnlJbmZvPj4obyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIExvY2FsTm9kZVNlcnZpY2VzQ2hhbmdlZCgpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgU2VuZERpc2NvdmVyeVJlcXVlc3QoKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW51bSBUcmFuc3BvcnRMaXN0ZW5lckV2ZW50VHlwZVxyXG4gICAge1xyXG4gICAgICAgIFRyYW5zcG9ydENsb3NlZCA9IDEsXHJcbiAgICAgICAgVHJhbnNwb3J0Q29ubmVjdGlvbkNsb3NlZFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgUGFyc2VDb25uZWN0aW9uVXJsUmVzdWx0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBzY2hlbWU7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBob3N0O1xyXG4gICAgICAgIHB1YmxpYyBpbnQgcG9ydCA9IDA7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBwYXRoO1xyXG4gICAgICAgIHB1YmxpYyBOb2RlSUQgbm9kZWlkO1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgbm9kZW5hbWU7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBzZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVHJhbnNwb3J0VXRpbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgUGFyc2VDb25uZWN0aW9uVXJsUmVzdWx0IFBhcnNlQ29ubmVjdGlvblVybChzdHJpbmcgdXJsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJyMSA9IG5ldyBSZWdleChcIl4oW146XFxcXHNdKyk6Ly8oKD86XFxcXFtbQS1GYS1mMC05XFxcXDpdKyg/OlxcXFwlXFxcXHcqKT9cXFxcXSl8KD86W15cXFxcW1xcXFxdXFxcXDovXFxcXD9cXFxcc10rKSkoPzo6KFteOi9cXFxcP1xcXFxzXSspKT8oPzovKFteXFxcXD9cXFxcc10qKSk/XFxcXD8/KFteXFxcXHNdKikkXCIpO1xyXG4gICAgICAgICAgICB2YXIgdTEgPSBycjEuTWF0Y2godXJsKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdTEuU3VjY2VzcylcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBjb25uZWN0aW9uIFVSTFwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdTEuR3JvdXBzWzFdLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgY29ubmVjdGlvbiBVUkxcIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBQYXJzZUNvbm5lY3Rpb25VcmxSZXN1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIG8uc2NoZW1lID0gdTEuR3JvdXBzWzFdLlZhbHVlO1xyXG4gICAgICAgICAgICBvLmhvc3QgPSB1MS5Hcm91cHNbMl0uVmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh1MS5Hcm91cHNbM10uU3VjY2VzcyAmJiB1MS5Hcm91cHNbM10uVmFsdWUgIT0gXCJcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5wb3J0ID0gaW50LlBhcnNlKHUxLkdyb3Vwc1szXS5WYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvLnBvcnQgPSAtMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG8uc2NoZW1lID09IFwidGNwXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh1MS5Hcm91cHNbNV0uU3VjY2VzcyAmJiB1MS5Hcm91cHNbNV0uVmFsdWUgIT0gXCJcIilcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgY29ubmVjdGlvbiBVUkxcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCEodTEuR3JvdXBzWzRdLlN1Y2Nlc3MgJiYgdTEuR3JvdXBzWzRdLlZhbHVlICE9IFwiXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBjb25uZWN0aW9uIFVSTFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXAgPSB1MS5Hcm91cHNbNF0uVmFsdWUuU3BsaXQobmV3IGNoYXJbXSB7ICcvJyB9LCBTdHJpbmdTcGxpdE9wdGlvbnMuUmVtb3ZlRW1wdHlFbnRyaWVzKTtcclxuICAgICAgICAgICAgICAgIGlmIChhcC5MZW5ndGggIT0gMikgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJJbnZhbGlkIGNvbm5lY3Rpb24gVVJMXCIpO1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nIG5vZGVuID0gYXBbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZW4uQ29udGFpbnMoXCJ7XCIpIHx8IG5vZGVuLkNvbnRhaW5zKFwiW1wiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvLm5vZGVpZCA9IG5ldyBOb2RlSUQobm9kZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG8ubm9kZW5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG8ubm9kZW5hbWUgPSBub2RlbjtcclxuICAgICAgICAgICAgICAgICAgICBvLm5vZGVpZCA9IE5vZGVJRC5Bbnk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgby5zZXJ2aWNlID0gYXBbMV07XHJcbiAgICAgICAgICAgICAgICBvLnBhdGggPSBcIi9cIjtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG8ucG9ydCA9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG8uc2NoZW1lID09IFwicnIrdGNwXCIgfHwgby5zY2hlbWUgPT0gXCJycnMrdGNwXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgby5wb3J0ID0gNDg2NTM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoby5zY2hlbWUgPT0gXCJycit3c1wiIHx8IG8uc2NoZW1lID09IFwicnJzK3dzXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgby5wb3J0ID0gODA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoby5zY2hlbWUgPT0gXCJycit3c3NcIiB8fCBvLnNjaGVtZSA9PSBcInJycyt3c3NcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvLnBvcnQgPSA0NDM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG8ucGF0aCA9IHUxLkdyb3Vwc1s0XS5WYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvLnBhdGggPT0gbnVsbCB8fCBvLnBhdGggPT0gXCJcIikgby5wYXRoID0gXCIvXCI7XHJcblxyXG4gICAgICAgICAgICB2YXIgcXVlcnlfcGFyYW1zID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoISh1MS5Hcm91cHNbNV0uU3VjY2VzcyAmJiB1MS5Hcm91cHNbNV0uVmFsdWUgIT0gXCJcIikpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgY29ubmVjdGlvbiBVUkxcIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgcTIgPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIHUxLkdyb3Vwc1s1XS5WYWx1ZS5UcmltU3RhcnQobmV3IGNoYXJbXSB7ICc/JyB9KS5TcGxpdChuZXcgY2hhcltdIHsgJyYnIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5SZW1vdmVFbXB0eUVudHJpZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcTMgPSBlLlNwbGl0KG5ldyBjaGFyW10geyAnPScgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocTMuTGVuZ3RoICE9IDIpIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBDb25uZWN0aW9uIFVSTFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChxM1swXS5MZW5ndGggPT0gMCB8fCBxM1sxXS5MZW5ndGggPT0gMCkgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJJbnZhbGlkIENvbm5lY3Rpb24gVVJMXCIpO1xyXG4gICAgICAgICAgICAgICAgcXVlcnlfcGFyYW1zLkFkZChxM1swXSwgUlJVcmlFeHRlbnNpb25zLlVuZXNjYXBlRGF0YVN0cmluZyhxM1sxXSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXF1ZXJ5X3BhcmFtcy5Db250YWluc0tleShcInNlcnZpY2VcIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBDb25uZWN0aW9uIFVSTFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgby5zZXJ2aWNlID0gcXVlcnlfcGFyYW1zW1wic2VydmljZVwiXTtcclxuICAgICAgICAgICAgaWYgKFN0cmluZy5Jc051bGxPcldoaXRlU3BhY2Uoby5zZXJ2aWNlKSkgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJJbnZhbGlkIENvbm5lY3Rpb24gVVJMXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHF1ZXJ5X3BhcmFtcy5Db250YWluc0tleShcIm5vZGVpZFwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5ub2RlaWQgPSBuZXcgTm9kZUlEKHF1ZXJ5X3BhcmFtc1tcIm5vZGVpZFwiXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvLm5vZGVpZCA9IE5vZGVJRC5Bbnk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChxdWVyeV9wYXJhbXMuQ29udGFpbnNLZXkoXCJub2RlbmFtZVwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5ub2RlbmFtZSA9IHF1ZXJ5X3BhcmFtc1tcIm5vZGVuYW1lXCJdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJyID0gbmV3IFJlZ2V4KFwiXlthLXpBLVpdW2EtekEtWjAtOV9cXFxcLlxcXFwtXSokXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghcnIuTWF0Y2goby5ub2RlbmFtZSkuU3VjY2VzcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIlxcXCJcIiArIG8ubm9kZW5hbWUgKyBcIlxcXCIgaXMgYW4gaW52YWxpZCBOb2RlTmFtZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG8ubm9kZW5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgMjAxMS0yMDE5IFdhc29uIFRlY2hub2xvZ3ksIExMQ1xyXG4vL1xyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4vL1xyXG4vLyAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuLy9cclxuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZztcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcbiAgIFxyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIENhbGxiYWNrPFQ+XHJcbiAgICB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzdHJpbmcgbV9NZW1iZXJOYW1lO1xyXG5cclxuICAgICAgICBwdWJsaWMgQ2FsbGJhY2soc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtX01lbWJlck5hbWUgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFQgRnVuY3Rpb24geyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgVCBHZXRDbGllbnRGdW5jdGlvbihFbmRwb2ludCBlKTtcclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFQgR2V0Q2xpZW50RnVuY3Rpb24odWludCBlKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBDYWxsYmFja0NsaWVudDxUPiA6IENhbGxiYWNrPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIENhbGxiYWNrQ2xpZW50KHN0cmluZyBuYW1lKVxyXG4gICAgICAgICAgICA6IGJhc2UobmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBUIGZ1bmN0aW9uID0gZGVmYXVsdChUKTtcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVCBGdW5jdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFQgR2V0Q2xpZW50RnVuY3Rpb24oRW5kcG9pbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBmb3IgY2xpZW50IHNpZGUgb2YgY2FsbGJhY2tcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVCBHZXRDbGllbnRGdW5jdGlvbih1aW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgZm9yIGNsaWVudCBzaWRlIG9mIGNhbGxiYWNrXCIpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBDYWxsYmFja1NlcnZlcjxUPiA6IENhbGxiYWNrPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgU2VydmljZVNrZWwgc2tlbDtcclxuXHJcbiAgICAgICAgcHVibGljIENhbGxiYWNrU2VydmVyKHN0cmluZyBuYW1lLCBTZXJ2aWNlU2tlbCBza2VsKVxyXG4gICAgICAgICAgICA6IGJhc2UobmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tlbCA9IHNrZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVCBGdW5jdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBmb3Igc2VydmVyIHNpZGUgb2YgY2FsbGJhY2tcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBmb3Igc2VydmVyIHNpZGUgb2YgY2FsbGJhY2tcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUIEdldENsaWVudEZ1bmN0aW9uKEVuZHBvaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0Q2xpZW50RnVuY3Rpb24oZS5Mb2NhbEVuZHBvaW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUIEdldENsaWVudEZ1bmN0aW9uKHVpbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoVClza2VsLkdldENhbGxiYWNrRnVuY3Rpb24oZSwgbV9NZW1iZXJOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxufSIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQuUmVndWxhckV4cHJlc3Npb25zO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcbiAgICBwdWJsaWMgc3RydWN0IFJvYm90UmFjb250ZXVyVmVyc2lvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyB1aW50IG1ham9yO1xyXG4gICAgICAgIHB1YmxpYyB1aW50IG1pbm9yO1xyXG4gICAgICAgIHB1YmxpYyB1aW50IHBhdGNoO1xyXG4gICAgICAgIHB1YmxpYyB1aW50IHR3ZWFrO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgcHVibGljIFJvYm90UmFjb250ZXVyVmVyc2lvbih1aW50IG1ham9yLCB1aW50IG1pbm9yLCB1aW50IHBhdGNoID0gMCwgdWludCB0d2VhayA9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1ham9yID0gbWFqb3I7XHJcbiAgICAgICAgICAgIHRoaXMubWlub3IgPSBtaW5vcjtcclxuICAgICAgICAgICAgdGhpcy5wYXRjaCA9IHBhdGNoO1xyXG4gICAgICAgICAgICB0aGlzLnR3ZWFrID0gdHdlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUm9ib3RSYWNvbnRldXJWZXJzaW9uKHN0cmluZyB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWFqb3IgPSAwO1xyXG4gICAgICAgICAgICBtaW5vciA9IDA7XHJcbiAgICAgICAgICAgIHBhdGNoID0gMDtcclxuICAgICAgICAgICAgdHdlYWsgPSAwO1xyXG4gICAgICAgICAgICBGcm9tU3RyaW5nKHYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocGF0Y2ggPT0gMCAmJiB0d2VhayA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLkZvcm1hdChcInswfS57MX1cIiwgbWFqb3IsIG1pbm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0d2VhayA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLkZvcm1hdChcInswfS57MX0uezJ9XCIsIG1ham9yLCBtaW5vciwgcGF0Y2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuRm9ybWF0KFwiezB9LnsxfS57Mn0uezN9XCIsIG1ham9yLCBtaW5vciwgcGF0Y2gsIHR3ZWFrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZyb21TdHJpbmcoc3RyaW5nIHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IFJlZ2V4Lk1hdGNoKHYsIFwiXihcXFxcZCspXFxcXC4oXFxcXGQrKSg/OlxcXFwuKFxcXFxkKykoPzpcXFxcLihcXFxcZCspKT8pPyRcIik7XHJcbiAgICAgICAgICAgIGlmICghbS5TdWNjZXNzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkZvcm1hdCBlcnJvciBmb3IgdmVyc2lvbiBkZWZpbml0aW9uIFxcXCJcIiArIHYgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1ham9yID0gVUludDMyLlBhcnNlKG0uR3JvdXBzWzFdLlZhbHVlKTtcclxuICAgICAgICAgICAgbWlub3IgPSBVSW50MzIuUGFyc2UobS5Hcm91cHNbMl0uVmFsdWUpO1xyXG4gICAgICAgICAgICBwYXRjaCA9IG0uR3JvdXBzWzNdLlN1Y2Nlc3MgPyBVSW50MzIuUGFyc2UobS5Hcm91cHNbM10uVmFsdWUpIDogMDtcclxuICAgICAgICAgICAgdHdlYWsgPSBtLkdyb3Vwc1s0XS5TdWNjZXNzID8gVUludDMyLlBhcnNlKG0uR3JvdXBzWzRdLlZhbHVlKSA6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oUm9ib3RSYWNvbnRldXJWZXJzaW9uIHYxLCBSb2JvdFJhY29udGV1clZlcnNpb24gdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKHYxLm1ham9yID09IHYyLm1ham9yKSAmJiAodjEubWlub3IgPT0gdjIubWlub3IpICYmICh2MS5wYXRjaCA9PSB2Mi5wYXRjaCkgJiYgKHYxLnR3ZWFrID09IHYyLnR3ZWFrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShSb2JvdFJhY29udGV1clZlcnNpb24gdjEsIFJvYm90UmFjb250ZXVyVmVyc2lvbiB2MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKCh2MS5tYWpvciA9PSB2Mi5tYWpvcikgJiYgKHYxLm1pbm9yID09IHYyLm1pbm9yKSAmJiAodjEucGF0Y2ggPT0gdjIucGF0Y2gpICYmICh2MS50d2VhayA9PSB2Mi50d2VhaykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID4oUm9ib3RSYWNvbnRldXJWZXJzaW9uIHYxLCBSb2JvdFJhY29udGV1clZlcnNpb24gdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodjEubWFqb3IgPiB2Mi5tYWpvcikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmICh2MS5taW5vciA+IHYyLm1pbm9yKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHYxLnBhdGNoID4gdjIucGF0Y2gpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodjEudHdlYWsgPiB2Mi50d2VhaykgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvcj49KFJvYm90UmFjb250ZXVyVmVyc2lvbiB2MSwgUm9ib3RSYWNvbnRldXJWZXJzaW9uIHYyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCh2MS5tYWpvciA9PSB2Mi5tYWpvcikgJiYgKHYxLm1pbm9yID09IHYyLm1pbm9yKSAmJiAodjEucGF0Y2ggPT0gdjIucGF0Y2gpICYmICh2MS50d2VhayA9PSB2Mi50d2VhaykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB2MSA+IHYyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yIDwoUm9ib3RSYWNvbnRldXJWZXJzaW9uIHYxLCBSb2JvdFJhY29udGV1clZlcnNpb24gdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodjEubWFqb3IgPCB2Mi5tYWpvcikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmICh2MS5taW5vciA8IHYyLm1pbm9yKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHYxLnBhdGNoIDwgdjIucGF0Y2gpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodjEudHdlYWsgPCB2Mi50d2VhaykgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciA8PShSb2JvdFJhY29udGV1clZlcnNpb24gdjEsIFJvYm90UmFjb250ZXVyVmVyc2lvbiB2MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgodjEubWFqb3IgPT0gdjIubWFqb3IpICYmICh2MS5taW5vciA9PSB2Mi5taW5vcikgJiYgKHYxLnBhdGNoID09IHYyLnBhdGNoKSAmJiAodjEudHdlYWsgPT0gdjIudHdlYWspKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdjEgPCB2MjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZXhwbGljaXQgb3BlcmF0b3IgYm9vbChSb2JvdFJhY29udGV1clZlcnNpb24gdjEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gISgodjEubWFqb3IgPT0gMCkgJiYgKHYxLm1pbm9yID09IDApICYmICh2MS5wYXRjaCA9PSAwKSAmJiAodjEudHdlYWsgPT0gMCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuYW1lc3BhY2UgZGV0YWlsXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIGNsYXNzIFNlcnZpY2VEZWZpbml0aW9uVXRpbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50ZXJuYWwgY29uc3Qgc3RyaW5nIFJSX05BTUVfUkVHRVggPSBcIlthLXpBLVpdKD86XFxcXHcqW2EtekEtWjAtOV0pP1wiO1xyXG4gICAgICAgICAgICBpbnRlcm5hbCBjb25zdCBzdHJpbmcgUlJfVFlQRV9SRUdFWCA9IFwiKD86W2EtekEtWl0oPzpcXFxcdypbYS16QS1aMC05XSk/KSg/OlxcXFwuW2EtekEtWl0oPzpcXFxcdypbYS16QS1aMC05XSk/KSpcIjtcclxuICAgICAgICAgICAgaW50ZXJuYWwgY29uc3Qgc3RyaW5nIFJSX1FVQUxJRklFRF9UWVBFX1JFR0VYID0gXCIoPzpbYS16QS1aXSg/OlxcXFx3KlthLXpBLVowLTldKT8pKD86XFxcXC5bYS16QS1aXSg/OlxcXFx3KlthLXpBLVowLTldKT8pK1wiO1xyXG4gICAgICAgICAgICBpbnRlcm5hbCBjb25zdCBzdHJpbmcgUlJfVFlQRTJfUkVHRVggPSBcIig/OlthLXpBLVpdKD86XFxcXHcqW2EtekEtWjAtOV0pPykoPzpcXFxcLlthLXpBLVpdKD86XFxcXHcqW2EtekEtWjAtOV0pPykqKD86XFxcXFtbMC05XFxcXCxcXFxcKlxcXFwtXSpcXFxcXSk/KD86XFxcXHtcXFxcd3sxLDE2fVxcXFx9KT9cIjtcclxuICAgICAgICAgICAgaW50ZXJuYWwgY29uc3Qgc3RyaW5nIFJSX0lOVF9SRUdFWCA9IFwiWytcXFxcLV0/XFxcXGQrXCI7XHJcbiAgICAgICAgICAgIGludGVybmFsIGNvbnN0IHN0cmluZyBSUl9GTE9BVF9SRUdFWCA9IFwiWytcXFxcLV0/KD86KD86MHxbMS05XVxcXFxkKikoPzpcXFxcLlxcXFxkKik/fDpcXFxcLlxcXFxkKykoPzpbZUVdWytcXFxcLV0/XFxcXGQrKT9cIjtcclxuXHJcbiAgICAgICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFNlcnZpY2VEZWZpbml0aW9uX0Zyb21TdHJpbmdGb3JtYXRfY29tbW9uKFJlZ2V4IHIsIHN0cmluZyBsLCBzdHJpbmcga2V5d29yZCwgcmVmIExpc3Q8c3RyaW5nPiB2ZWMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByX21hdGNoID0gci5NYXRjaChsKTtcclxuICAgICAgICAgICAgICAgIGlmICghcl9tYXRjaC5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiRm9ybWF0IGVycm9yIGZvciBcIiArIGtleXdvcmQgKyBcIiBkZWZpbml0aW9uIFxcXCJcIiArIGwgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJfbWF0Y2guR3JvdXBzWzFdLlZhbHVlICE9IGtleXdvcmQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJGb3JtYXQgZXJyb3IgZm9yIFwiICsga2V5d29yZCArIFwiIGRlZmluaXRpb24gXFxcIlwiICsgbCArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZlYy5BZGQocl9tYXRjaC5Hcm91cHNbMl0uVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBTZXJ2aWNlRGVmaW5pdGlvbl9Gcm9tU3RyaW5nSW1wb3J0Rm9ybWF0KHN0cmluZyBsLCBzdHJpbmcga2V5d29yZCwgcmVmIExpc3Q8c3RyaW5nPiB2ZWMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKihcXFxcd3sxLDE2fSlbIFxcXFx0XSsoXCIgKyBSUl9UWVBFX1JFR0VYICsgXCIpWyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgICAgIFNlcnZpY2VEZWZpbml0aW9uX0Zyb21TdHJpbmdGb3JtYXRfY29tbW9uKHIsIGwsIGtleXdvcmQsIHJlZiB2ZWMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBTZXJ2aWNlRGVmaW5pdGlvbl9Gcm9tU3RyaW5nVHlwZUZvcm1hdChzdHJpbmcgbCwgc3RyaW5nIGtleXdvcmQsIHJlZiBMaXN0PHN0cmluZz4gdmVjKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSooXFxcXHd7MSwxNn0pWyBcXFxcdF0rKFwiICsgUlJfVFlQRV9SRUdFWCArIFwiKVsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgICAgICBTZXJ2aWNlRGVmaW5pdGlvbl9Gcm9tU3RyaW5nRm9ybWF0X2NvbW1vbihyLCBsLCBrZXl3b3JkLCByZWYgdmVjKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50ZXJuYWwgc3RhdGljIGJvb2wgU2VydmljZURlZmluaXRpb25fR2V0TGluZShUZXh0UmVhZGVyIGlzXywgcmVmIHN0cmluZyBsLCByZWYgdWludCBwb3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByX2NvbW1lbnQgPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qI1sgLX5cXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgICAgIHZhciByX2VtcHR5ID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgcl92YWxpZCA9IG5ldyBSZWdleChcIl5bIC1+XFxcXHRdKiRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RyaW5nIGwyO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGwyID0gaXNfLlJlYWRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGwyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBwb3MrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbDIgPSBsMi5UcmltRW5kKG5ldyBjaGFyW10geyAnXFxyJyB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Y2hhcj4obDIsJ1xcMCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlNlcnZpY2UgZGVmaW5pdGlvbiBtdXN0IG5vdCBjb250YWluIG51bGwgY2hhcmFjdGVyc1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJfY29tbWVudC5Jc01hdGNoKGwyKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJfZW1wdHkuSXNNYXRjaChsMikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChsMi5FbmRzV2l0aChcIlxcXFxcIikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobDIuTGVuZ3RoIDw9IDApIHRocm93IG5ldyBJbnRlcm5hbEVycm9yRXhjZXB0aW9uKFwiSW50ZXJuYWwgcGFyc2luZyBlcnJvclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbDIgPSBsMi5TdWJzdHJpbmcoMCwgbDIuTGVuZ3RoIC0gMSkgKyAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsMyA9IGlzXy5SZWFkTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobDMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiU2VydmljZSBkZWZpbml0aW9uIGxpbmUgY29udGludWF0aW9uIG11c3Qgbm90IGJlIG9uIGxhc3QgbGluZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbDMgPSBsMy5UcmltRW5kKG5ldyBjaGFyW10geyAnXFxyJyB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGNoYXI+KGwzLCdcXDAnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiU2VydmljZSBkZWZpbml0aW9uIG11c3Qgbm90IGNvbnRhaW4gbnVsbCBjaGFyYWN0ZXJzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsMiArPSBsMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcl92YWxpZC5Jc01hdGNoKGwyKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiU2VydmljZSBkZWZpbml0aW9uIG11c3QgY29udGFpbiBvbmx5IEFTQ0lJIGNoYXJhY3RlcnNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsID0gbDI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFNlcnZpY2VEZWZpbml0aW9uX0ZpbmRCbG9jayhzdHJpbmcgY3VycmVudF9saW5lLCBUZXh0UmVhZGVyIGlzXywgVGV4dFdyaXRlciBvcywgcmVmIHVpbnQgcG9zLCByZWYgdWludCBpbml0X3BvcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJfc3RhcnQgPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qKFxcXFx3ezEsMTZ9KVsgXFxcXHRdKyhcIiArIFJSX05BTUVfUkVHRVggKyBcIilbIFxcXFx0XSokXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJfZW5kID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKmVuZCg/OlsgXFxcXHRdKyhcXFxcd3sxLDE2fSkpP1sgXFxcXHRdKiRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaW5pdF9wb3MgPSBwb3M7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJfc3RhcnRfbWF0Y2ggPSByX3N0YXJ0Lk1hdGNoKGN1cnJlbnRfbGluZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJfc3RhcnRfbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlBhcnNlIGVycm9yIG5lYXI6IFwiICsgY3VycmVudF9saW5lLCAoaW50KXBvcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3MuV3JpdGVMaW5lKGN1cnJlbnRfbGluZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RyaW5nIGJsb2NrX3R5cGUgPSByX3N0YXJ0X21hdGNoLkdyb3Vwc1sxXS5WYWx1ZTtcclxuICAgICAgICAgICAgICAgIHN0cmluZyBsID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICB1aW50IGxhc3RfcG9zID0gcG9zO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChTZXJ2aWNlRGVmaW5pdGlvbl9HZXRMaW5lKGlzXywgcmVmIGwsIHJlZiBwb3MpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RfcG9zKys7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IGxhc3RfcG9zIDwgcG9zOyBsYXN0X3BvcysrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3MuV3JpdGVMaW5lKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb3MuV3JpdGVMaW5lKGwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcl9lbmRfbWF0Y2ggPSByX2VuZC5NYXRjaChsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocl9lbmRfbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyX2VuZF9tYXRjaC5Hcm91cHNbMV0uU3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJfZW5kX21hdGNoLkdyb3Vwc1sxXS5WYWx1ZSAhPSBibG9ja190eXBlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiQmxvY2sgZW5kIGRvZXMgbm90IG1hdGNoIHN0YXJ0OiBcIiArIGwsIChpbnQpcG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiQmxvY2sgZW5kIG5vdCBmb3VuZDogXCIgKyBjdXJyZW50X2xpbmUsIChpbnQpaW5pdF9wb3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJ2aWNlRGVmaW5pdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZTtcclxuXHJcbiAgICAgICAgcHVibGljIERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRW50cnlEZWZpbml0aW9uPiBTdHJ1Y3R1cmVzID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRW50cnlEZWZpbml0aW9uPigpO1xyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZUVudHJ5RGVmaW5pdGlvbj4gUG9kcyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZUVudHJ5RGVmaW5pdGlvbj4oKTtcclxuICAgICAgICBwdWJsaWMgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VFbnRyeURlZmluaXRpb24+IE5hbWVkQXJyYXlzID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRW50cnlEZWZpbml0aW9uPigpO1xyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZUVudHJ5RGVmaW5pdGlvbj4gT2JqZWN0cyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZUVudHJ5RGVmaW5pdGlvbj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8c3RyaW5nPiBPcHRpb25zID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxzdHJpbmc+IEltcG9ydHMgPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFVzaW5nRGVmaW5pdGlvbj4gVXNpbmcgPSBuZXcgTGlzdDxVc2luZ0RlZmluaXRpb24+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PHN0cmluZz4gRXhjZXB0aW9ucyA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIERpY3Rpb25hcnk8c3RyaW5nLCBDb25zdGFudERlZmluaXRpb24+IENvbnN0YW50cyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgQ29uc3RhbnREZWZpbml0aW9uPigpO1xyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PHN0cmluZywgRW51bURlZmluaXRpb24+IEVudW1zID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBFbnVtRGVmaW5pdGlvbj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIFJvYm90UmFjb250ZXVyVmVyc2lvbiBTdGRWZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRvV3JpdGVyKFRleHRXcml0ZXIgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG8uV3JpdGVMaW5lKFwic2VydmljZSB7MH1cIiwgTmFtZSk7XHJcbiAgICAgICAgICAgIG8uV3JpdGVMaW5lKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoKGJvb2wpU3RkVmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib29sIHZlcnNpb25fZm91bmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzbyBpbiBPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByX3ZlcnNpb24gPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qdmVyc2lvblsgXFxcXHRdKyg/OihcXFxcZCsoPzpcXFxcLlxcXFxkKykqKXxbIC1+XFxcXHRdKikkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByX3ZlcnNpb25fbWF0Y2ggPSByX3ZlcnNpb24uTWF0Y2goc28pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyX3ZlcnNpb25fbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZXJzaW9uX2ZvdW5kKSB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlJvYm90IFJhY29udGV1ciB2ZXJzaW9uIGFscmVhZHkgc3BlY2lmaWVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocl92ZXJzaW9uX21hdGNoLkdyb3Vwc1sxXS5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJJbnZhbGlkIFJvYm90IFJhY29udGV1ciB2ZXJzaW9uIHNwZWNpZmllZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdmVyc2lvbl9mb3VuZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU3RkVmVyIDwgbmV3IFJvYm90UmFjb250ZXVyVmVyc2lvbigwLCA5KSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uV3JpdGVMaW5lKFwib3B0aW9uIHZlcnNpb24gezB9XCIsIFN0ZFZlci5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoXCJzdGR2ZXIgezB9XCIsIFN0ZFZlci5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpbXBvcnQgaW4gSW1wb3J0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoXCJpbXBvcnQgezB9XCIsIGltcG9ydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKEltcG9ydHMuQ291bnQgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHUgaW4gVXNpbmcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG8uV3JpdGUodS5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoVXNpbmcuQ291bnQgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9wdGlvbiBpbiBPcHRpb25zKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvLldyaXRlTGluZShcIm9wdGlvbiB7MH1cIiwgb3B0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoT3B0aW9ucy5Db3VudCE9MClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbnN0YW50IGluIENvbnN0YW50cy5WYWx1ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG8uV3JpdGVMaW5lKGNvbnN0YW50LlRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChDb25zdGFudHMuQ291bnQgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gRW51bXMuVmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvLldyaXRlKGUuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKEVudW1zLkNvdW50ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG8uV3JpdGVMaW5lKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIEV4Y2VwdGlvbnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG8uV3JpdGVMaW5lKFwiZXhjZXB0aW9uIHswfVwiLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoRXhjZXB0aW9ucy5Db3VudCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvLldyaXRlTGluZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZCBpbiBTdHJ1Y3R1cmVzLlZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoZC5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGQgaW4gUG9kcy5WYWx1ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG8uV3JpdGVMaW5lKGQuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBkIGluIE5hbWVkQXJyYXlzLlZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoZC5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGQgaW4gT2JqZWN0cy5WYWx1ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG8uV3JpdGVMaW5lKGQuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gbmV3IFN0cmluZ1dyaXRlcigpO1xyXG4gICAgICAgICAgICB3Lk5ld0xpbmUgPSBcIlxcblwiO1xyXG4gICAgICAgICAgICBUb1dyaXRlcih3KTtcclxuICAgICAgICAgICAgcmV0dXJuIHcuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdm9pZCBDaGVja1ZlcnNpb24oUm9ib3RSYWNvbnRldXJWZXJzaW9uIHZlciA9IGRlZmF1bHQoUm9ib3RSYWNvbnRldXJWZXJzaW9uKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIShib29sKVN0ZFZlcilcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmICh2ZXIgPT0gbmV3IFJvYm90UmFjb250ZXVyVmVyc2lvbigwLDApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2ZXIgPSBuZXcgUm9ib3RSYWNvbnRldXJWZXJzaW9uKFJvYm90UmFjb250ZXVyTm9kZS5WZXJzaW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZlciA8IFN0ZFZlcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJTZXJ2aWNlIFwiICsgTmFtZSArIFwiIHJlcXVpcmVzIG5ld2VyIHZlcnNpb24gb2YgUm9ib3QgUmFjb250ZXVyXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gbmV3IExpc3Q8RXhjZXB0aW9uPigpO1xyXG4gICAgICAgICAgICBGcm9tU3RyaW5nKHMsIHJlZiB3KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZyb21SZWFkZXIoVGV4dFJlYWRlciBpc18pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdyA9IG5ldyBMaXN0PEV4Y2VwdGlvbj4oKTtcclxuICAgICAgICAgICAgRnJvbVJlYWRlcihpc18sIHJlZiB3KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZyb21TdHJpbmcoc3RyaW5nIHMsIHJlZiBMaXN0PEV4Y2VwdGlvbj4gd2FybmluZ3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaXNfID0gbmV3IFN0cmluZ1JlYWRlcihzKTtcclxuICAgICAgICAgICAgRnJvbVJlYWRlcihpc18sIHJlZiB3YXJuaW5ncyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBGcm9tUmVhZGVyKFRleHRSZWFkZXIgaXNfLCByZWYgTGlzdDxFeGNlcHRpb24+IHdhcm5pbmdzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJfY29tbWVudCA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSojWyAtflxcXFx0XSokXCIpO1xyXG4gICAgICAgICAgICB2YXIgcl9lbXB0eSA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSokXCIpO1xyXG4gICAgICAgICAgICB2YXIgcl9lbnRyeSA9IG5ldyBSZWdleChcIig/Ol5bIFxcXFx0XSooPzooc2VydmljZSl8KHN0ZHZlcil8KG9wdGlvbil8KGltcG9ydCl8KHVzaW5nKXwoZXhjZXB0aW9uKXwoY29uc3RhbnQpfChlbnVtKXwoc3RydWN0KXwob2JqZWN0KXwocG9kKXwobmFtZWRhcnJheSkpWyBcXFxcdF0rKFxcXFx3W15cXFxcc10qKD86WyBcXFxcdF0rW15cXFxcc10rKSopWyBcXFxcdF0qJCl8KF5bIFxcXFx0XSokKVwiKTtcclxuXHJcbiAgICAgICAgICAgIGJvb2wgc2VydmljZV9uYW1lX2ZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB1aW50IHBvcyA9IDA7XHJcbiAgICAgICAgICAgIHN0cmluZyBsID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIFJvYm90UmFjb250ZXVyVmVyc2lvbiBzdGR2ZXJfdmVyc2lvbiA9IG5ldyBSb2JvdFJhY29udGV1clZlcnNpb24oKTtcclxuICAgICAgICAgICAgYm9vbCBzdGR2ZXJfZm91bmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdWludCBlbnRyeV9rZXlfbWF4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuU2VydmljZURlZmluaXRpb25fR2V0TGluZShpc18sIHJlZiBsLCByZWYgcG9zKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJfZW50cnlfbWF0Y2ggPSByX2VudHJ5Lk1hdGNoKGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcl9lbnRyeV9tYXRjaC5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJQYXJzZSBlcnJvciBuZWFyOiBcIiArIGwsIChpbnQpcG9zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByX2VudHJ5X21hdGNoX2JsYW5rID0gcl9lbnRyeV9tYXRjaC5Hcm91cHNbMTRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyX2VudHJ5X21hdGNoX2JsYW5rLlN1Y2Nlc3MpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnQgZW50cnlfa2V5ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZW50cnlfa2V5IDwgMTI7IGVudHJ5X2tleSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJfZW50cnlfbWF0Y2guR3JvdXBzW2VudHJ5X2tleV0uU3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJfZW50cnlfbWF0Y2hfcmVtYWluaW5nID0gcl9lbnRyeV9tYXRjaC5Hcm91cHNbMTNdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlfa2V5ICE9IDEgJiYgIXNlcnZpY2VfbmFtZV9mb3VuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJzZXJ2aWNlIG5hbWUgbXVzdCBiZSBmaXJzdCBlbnRyeSBpbiBzZXJ2aWNlIGRlZmluaXRpb25cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZW50cnlfa2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXJ2aWNlIG5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeV9rZXlfbWF4ID49IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwic2VydmljZSBuYW1lIG11c3QgYmUgZmlyc3QgZW50cnkgaW4gc2VydmljZSBkZWZpbml0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlX25hbWVfZm91bmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwic2VydmljZSBuYW1lIGFscmVhZHkgc3BlY2lmaWVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXBfbmFtZSA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlNlcnZpY2VEZWZpbml0aW9uX0Zyb21TdHJpbmdUeXBlRm9ybWF0KGwsIFwic2VydmljZVwiLCByZWYgdG1wX25hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPSB0bXBfbmFtZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeV9rZXlfbWF4ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlX25hbWVfZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3N0ZHZlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5X2tleV9tYXggPj0gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJzZXJ2aWNlIG5hbWUgbXVzdCBiZSBmaXJzdCBhZnRlciBzZXJ2aWNlIG5hbWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkdmVyX3ZlcnNpb24uRnJvbVN0cmluZyhyX2VudHJ5X21hdGNoX3JlbWFpbmluZy5WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkdmVyX2ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RkdmVyX3ZlcnNpb24gPCBuZXcgUm9ib3RSYWNvbnRldXJWZXJzaW9uKDAsIDkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiU2VydmljZSBkZWZpbml0aW9uIHN0YW5kYXJkIHZlcnNpb24gMC45IG9yIGdyZWF0ZXIgcmVxdWlyZWQgZm9yIFxcXCJzdGR2ZXJcXFwiIGtleXdvcmRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL29wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT3B0aW9ucy5BZGQocl9lbnRyeV9tYXRjaF9yZW1haW5pbmcuVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ltcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5X2tleV9tYXggPiA0KSB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcImltcG9ydCBtdXN0IGJlIGJlZm9yZSBhbGwgYnV0IG9wdGlvbnNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5TZXJ2aWNlRGVmaW5pdGlvbl9Gcm9tU3RyaW5nSW1wb3J0Rm9ybWF0KGwsIFwiaW1wb3J0XCIsIHJlZiBJbXBvcnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeV9rZXlfbWF4ID0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy91c2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5X2tleV9tYXggPiA1KSB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcInVzaW5nIG11c3QgYmUgYWZ0ZXIgaW1wb3J0cyBhbmQgYmVmb3JlIGFsbCBvdGhlcnMgZXhjZXB0IG9wdGlvbnNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzaW5nX2RlZiA9IG5ldyBVc2luZ0RlZmluaXRpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNpbmdfZGVmLkZyb21TdHJpbmcobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNpbmcuQWRkKHVzaW5nX2RlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlfa2V5X21heCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZXhjZXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlfa2V5X21heCA+PSA5KSB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcImV4Y2VwdGlvbiBtdXN0IGJlIGJlZm9yZSBzdHJ1Y3QgYW5kIG9iamVjdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlNlcnZpY2VEZWZpbml0aW9uX0Zyb21TdHJpbmdUeXBlRm9ybWF0KGwsIFwiZXhjZXB0aW9uXCIsIHJlZiBFeGNlcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeV9rZXlfbWF4ID0gNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zdGFudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5X2tleV9tYXggPj0gOSkgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJleGNlcHRpb24gbXVzdCBiZSBiZWZvcmUgc3RydWN0IGFuZCBvYmplY3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnN0YW50X2RlZiA9IG5ldyBDb25zdGFudERlZmluaXRpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RhbnRfZGVmLkZyb21TdHJpbmcobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uc3RhbnRzLkFkZChjb25zdGFudF9kZWYuTmFtZSwgY29uc3RhbnRfZGVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeV9rZXlfbWF4ID0gNztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9lbnVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlfa2V5X21heCA+PSA5KSB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcImVudW0gbXVzdCBiZSBiZWZvcmUgc3RydWN0IGFuZCBvYmplY3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBpbml0X3BvcyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gbmV3IFN0cmluZ1dyaXRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuU2VydmljZURlZmluaXRpb25fRmluZEJsb2NrKGwsIGlzXywgYmxvY2ssIHJlZiBwb3MsIHJlZiBpbml0X3Bvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudW1fZGVmID0gbmV3IEVudW1EZWZpbml0aW9uKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1fZGVmLkZyb21TdHJpbmcoYmxvY2suVG9TdHJpbmcoKSwgaW5pdF9wb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVudW1zLkFkZChlbnVtX2RlZi5OYW1lLCBlbnVtX2RlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlfa2V5X21heCA9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc3RydWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IGluaXRfcG9zID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBuZXcgU3RyaW5nV3JpdGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5TZXJ2aWNlRGVmaW5pdGlvbl9GaW5kQmxvY2sobCwgaXNfLCBibG9jaywgcmVmIHBvcywgcmVmIGluaXRfcG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RydWN0X2RlZiA9IG5ldyBTZXJ2aWNlRW50cnlEZWZpbml0aW9uKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdF9kZWYuRnJvbVN0cmluZyhibG9jay5Ub1N0cmluZygpLCBpbml0X3BvcywgcmVmIHdhcm5pbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJ1Y3R1cmVzLkFkZChzdHJ1Y3RfZGVmLk5hbWUsIHN0cnVjdF9kZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5X2tleV9tYXggPSA5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL29iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgaW5pdF9wb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9jayA9IG5ldyBTdHJpbmdXcml0ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlNlcnZpY2VEZWZpbml0aW9uX0ZpbmRCbG9jayhsLCBpc18sIGJsb2NrLCByZWYgcG9zLCByZWYgaW5pdF9wb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3RfZGVmID0gbmV3IFNlcnZpY2VFbnRyeURlZmluaXRpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0X2RlZi5Gcm9tU3RyaW5nKGJsb2NrLlRvU3RyaW5nKCksIGluaXRfcG9zLCByZWYgd2FybmluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdHMuQWRkKG9iamVjdF9kZWYuTmFtZSwgb2JqZWN0X2RlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlfa2V5X21heCA9IDEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3BvZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgaW5pdF9wb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9jayA9IG5ldyBTdHJpbmdXcml0ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlNlcnZpY2VEZWZpbml0aW9uX0ZpbmRCbG9jayhsLCBpc18sIGJsb2NrLCByZWYgcG9zLCByZWYgaW5pdF9wb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJ1Y3RfZGVmID0gbmV3IFNlcnZpY2VFbnRyeURlZmluaXRpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0X2RlZi5Gcm9tU3RyaW5nKGJsb2NrLlRvU3RyaW5nKCksIGluaXRfcG9zLCByZWYgd2FybmluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvZHMuQWRkKHN0cnVjdF9kZWYuTmFtZSwgc3RydWN0X2RlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlfa2V5X21heCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbmFtZWRhcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgaW5pdF9wb3M9MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBuZXcgU3RyaW5nV3JpdGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5TZXJ2aWNlRGVmaW5pdGlvbl9GaW5kQmxvY2sobCwgaXNfLCBibG9jaywgcmVmIHBvcywgcmVmIGluaXRfcG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RydWN0X2RlZiA9IG5ldyBTZXJ2aWNlRW50cnlEZWZpbml0aW9uKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdF9kZWYuRnJvbVN0cmluZyhibG9jay5Ub1N0cmluZygpLCBpbml0X3BvcywgcmVmIHdhcm5pbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lZEFycmF5cy5BZGQoc3RydWN0X2RlZi5OYW1lLHN0cnVjdF9kZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5X2tleV9tYXggPSA5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJQYXJzZSBlcnJvciBuZWFyOiBcIiArIGwsIChpbnQpcG9zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJvb2wgdmVyc2lvbl9mb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ZHZlcl9mb3VuZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTdGRWZXIgPSBzdGR2ZXJfdmVyc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIHNvIGluIE9wdGlvbnMpXHJcblxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByX3ZlcnNpb249IG5ldyBSZWdleChcIl5bIFxcXFx0XSp2ZXJzaW9uWyBcXFxcdF0rKD86KFxcXFxkKyg/OlxcXFwuXFxcXGQrKSopfFsgLX5cXFxcdF0qKSRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJfdmVyc2lvbl9tYXRjaCA9IHJfdmVyc2lvbi5NYXRjaChzbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJfdmVyc2lvbl9tYXRjaC5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnNpb25fZm91bmQpIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiUm9ib3QgUmFjb250ZXVyIHZlcnNpb24gYWxyZWFkeSBzcGVjaWZpZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyX3ZlcnNpb25fbWF0Y2guR3JvdXBzWzFdLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0ZFZlciA9IG5ldyBSb2JvdFJhY29udGV1clZlcnNpb24ocl92ZXJzaW9uX21hdGNoLkdyb3Vwc1sxXS5WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkludmFsaWQgUm9ib3QgUmFjb250ZXVyIHZlcnNpb24gc3BlY2lmaWVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25fZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3c7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlBhcnNlIGVycm9yIG5lYXI6IFwiICsgbCwgKGludClwb3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdHJ1Y3R1cmVzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIE9iamVjdHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgT3B0aW9ucy5DbGVhcigpO1xyXG4gICAgICAgICAgICBJbXBvcnRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIFVzaW5nLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIEV4Y2VwdGlvbnMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgQ29uc3RhbnRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIEVudW1zLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIFBvZHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgTmFtZWRBcnJheXMuQ2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBOYW1lZFR5cGVEZWZpbml0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lO1xyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBEYXRhVHlwZXMgUlJEYXRhVHlwZSB7IGdldDsgfVxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBzdHJpbmcgUmVzb2x2ZVF1YWxpZmllZE5hbWUoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGNsYXNzIFNlcnZpY2VFbnRyeURlZmluaXRpb24gOiBOYW1lZFR5cGVEZWZpbml0aW9uXHJcbiAgICB7ICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PHN0cmluZywgTWVtYmVyRGVmaW5pdGlvbj4gTWVtYmVycyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgTWVtYmVyRGVmaW5pdGlvbj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIERhdGFUeXBlcyBFbnRyeVR5cGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU3RydWN0dXJlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8c3RyaW5nPiBJbXBsZW1lbnRzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PHN0cmluZz4gT3B0aW9ucyA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuICAgICAgICBwdWJsaWMgRGljdGlvbmFyeTxzdHJpbmcsIENvbnN0YW50RGVmaW5pdGlvbj4gQ29uc3RhbnRzID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBDb25zdGFudERlZmluaXRpb24+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlRGVmaW5pdGlvbiBTZXJ2aWNlRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBTZXJ2aWNlRW50cnlEZWZpbml0aW9uKFNlcnZpY2VEZWZpbml0aW9uIGRlZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNlcnZpY2VEZWZpbml0aW9uID0gZGVmO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RyaW5nIFVucXVhbGlmeVR5cGVXaXRoVXNpbmcoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Y2hhcj4ocywnLicpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHUgaW4gU2VydmljZURlZmluaXRpb24uVXNpbmcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh1LlF1YWxpZmllZE5hbWUgPT0gcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdS5VbnF1YWxpZmllZE5hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdHJpbmcgUXVhbGlmeVR5cGVXaXRoVXNpbmcoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxjaGFyPihzLCcuJykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdSBpbiBTZXJ2aWNlRGVmaW5pdGlvbi5Vc2luZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHUuVW5xdWFsaWZpZWROYW1lID09IHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUuUXVhbGlmaWVkTmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRvV3JpdGVyKFRleHRXcml0ZXIgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoRW50cnlUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5zdHJ1Y3R1cmVfdDpcclxuICAgICAgICAgICAgICAgICAgICBvLldyaXRlTGluZShcInN0cnVjdCB7MH1cIiwgTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5wb2RfdDpcclxuICAgICAgICAgICAgICAgICAgICBvLldyaXRlTGluZShcInBvZCB7MH1cIiwgTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5uYW1lZGFycmF5X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoXCJuYW1lZGFycmF5IHswfVwiLCBOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLm9iamVjdF90OlxyXG4gICAgICAgICAgICAgICAgICAgIG8uV3JpdGVMaW5lKFwib2JqZWN0IHswfVwiLCBOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBTZXJ2aWNlRW50cnlEZWZpbml0aW9uIHR5cGUgaW4gXCIgKyBOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGltcCBpbiBJbXBsZW1lbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvLldyaXRlTGluZShcIiAgICBpbXBsZW1lbnRzIHswfVwiLCBVbnF1YWxpZnlUeXBlV2l0aFVzaW5nKGltcCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgb3B0aW9uIGluIE9wdGlvbnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG8uV3JpdGVMaW5lKFwiICAgIG9wdGlvbiB7MH1cIiwgb3B0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbnN0YW50IGluIENvbnN0YW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoXCIgICAgezB9XCIsIGNvbnN0YW50LlRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZCBpbiBNZW1iZXJzLlZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQxID0gZC5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKEVudHJ5VHlwZSAhPSBEYXRhVHlwZXMub2JqZWN0X3QpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQyID0gbmV3IFJlZ2V4KFwicHJvcGVydHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZDEgPSBkMi5SZXBsYWNlKGQxLCBcImZpZWxkXCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgby5Xcml0ZUxpbmUoZDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvLldyaXRlTGluZShcImVuZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHcgPSBuZXcgU3RyaW5nV3JpdGVyKCk7XHJcbiAgICAgICAgICAgIHcuTmV3TGluZSA9IFwiXFxuXCI7XHJcbiAgICAgICAgICAgIFRvV3JpdGVyKHcpO1xyXG4gICAgICAgICAgICByZXR1cm4gdy5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEZyb21TdHJpbmcocywgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBGcm9tU3RyaW5nKHN0cmluZyBzLCB1aW50IHN0YXJ0bGluZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gbmV3IExpc3Q8RXhjZXB0aW9uPigpO1xyXG4gICAgICAgICAgICBGcm9tU3RyaW5nKHMsIHN0YXJ0bGluZSwgcmVmIHcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcywgdWludCBzdGFydGxpbmUsIHJlZiBMaXN0PEV4Y2VwdGlvbj4gd2FybmluZ3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaXNfID0gbmV3IFN0cmluZ1JlYWRlcihzKTtcclxuICAgICAgICAgICAgRnJvbVN0cmVhbShpc18sIHN0YXJ0bGluZSwgcmVmIHdhcm5pbmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZyb21TdHJlYW0oVGV4dFJlYWRlciBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRnJvbVN0cmVhbShzLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZyb21TdHJlYW0oVGV4dFJlYWRlciBzLCB1aW50IHN0YXJ0bGluZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gbmV3IExpc3Q8RXhjZXB0aW9uPigpO1xyXG4gICAgICAgICAgICBGcm9tU3RyZWFtKHMsIHN0YXJ0bGluZSwgcmVmIHcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmVhbShUZXh0UmVhZGVyIHMsIHVpbnQgc3RhcnRsaW5lLCByZWYgTGlzdDxFeGNlcHRpb24+IHdhcm5pbmdzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVzZXQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdGFydF9zdHJ1Y3RfcmVnZXggPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qc3RydWN0WyBcXFxcdF0rKFxcXFx3KylbIFxcXFx0XSokXCIpO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRfcG9kX3JlZ2V4ID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKnBvZFsgXFxcXHRdKyhcXFxcdyspWyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0X25hbWVkYXJyYXlfcmVnZXggPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qbmFtZWRhcnJheVsgXFxcXHRdKyhcXFxcdyspWyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0X29iamVjdF9yZWdleCA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSpvYmplY3RbIFxcXFx0XSsoXFxcXHcrKVsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgIHZhciBlbmRfc3RydWN0X3JlZ2V4ID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKmVuZFsgXFxcXHRdK3N0cnVjdFsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgIHZhciBlbmRfcG9kX3JlZ2V4ID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKmVuZFsgXFxcXHRdK3BvZFsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgIHZhciBlbmRfbmFtZWRhcnJheV9yZWdleCA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSplbmRbIFxcXFx0XStuYW1lZGFycmF5WyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgdmFyIGVuZF9vYmplY3RfcmVnZXggPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qZW5kWyBcXFxcdF0rb2JqZWN0WyBcXFxcdF0qJFwiKTtcclxuXHJcbiAgICAgICAgICAgIHVpbnQgcG9zID0gc3RhcnRsaW5lIC0gMTtcclxuICAgICAgICAgICAgc3RyaW5nIGwgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIWRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuU2VydmljZURlZmluaXRpb25fR2V0TGluZShzLCByZWYgbCwgcmVmIHBvcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiSW52YWxpZCBvYmplY3QgbWVtYmVyXCIsIChpbnQpc3RhcnRsaW5lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHN0YXJ0X3N0cnVjdF9jbWF0Y2ggPSBzdGFydF9zdHJ1Y3RfcmVnZXguTWF0Y2gobCk7XHJcbiAgICAgICAgICAgIHZhciBzdGFydF9wb2RfY21hdGNoID0gc3RhcnRfcG9kX3JlZ2V4Lk1hdGNoKGwpO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRfbmFtZWRhcnJheV9jbWF0Y2ggPSBzdGFydF9uYW1lZGFycmF5X3JlZ2V4Lk1hdGNoKGwpO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRfb2JqZWN0X2NtYXRjaCA9IHN0YXJ0X29iamVjdF9yZWdleC5NYXRjaChsKTtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0X3N0cnVjdF9jbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRW50cnlUeXBlID0gRGF0YVR5cGVzLnN0cnVjdHVyZV90O1xyXG4gICAgICAgICAgICAgICAgTmFtZSA9IHN0YXJ0X3N0cnVjdF9jbWF0Y2guR3JvdXBzWzFdLlZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXJ0X3BvZF9jbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRW50cnlUeXBlID0gRGF0YVR5cGVzLnBvZF90O1xyXG4gICAgICAgICAgICAgICAgTmFtZSA9IHN0YXJ0X3BvZF9jbWF0Y2guR3JvdXBzWzFdLlZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXJ0X25hbWVkYXJyYXlfY21hdGNoLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEVudHJ5VHlwZSA9IERhdGFUeXBlcy5uYW1lZGFycmF5X3Q7XHJcbiAgICAgICAgICAgICAgICBOYW1lID0gc3RhcnRfbmFtZWRhcnJheV9jbWF0Y2guR3JvdXBzWzFdLlZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXJ0X29iamVjdF9jbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRW50cnlUeXBlID0gRGF0YVR5cGVzLm9iamVjdF90O1xyXG4gICAgICAgICAgICAgICAgTmFtZSA9IHN0YXJ0X29iamVjdF9jbWF0Y2guR3JvdXBzWzFdLlZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJQYXJzZSBlcnJvclwiLCAoaW50KXN0YXJ0bGluZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcl9tZW1iZXIgPSBuZXcgUmVnZXgoXCIoPzpeWyBcXFxcdF0qKD86KG9wdGlvbil8KGltcGxlbWVudHMpfChjb25zdGFudCl8KGZpZWxkKXwocHJvcGVydHkpfChmdW5jdGlvbil8KGV2ZW50KXwob2JqcmVmKXwocGlwZSl8KGNhbGxiYWNrKXwod2lyZSl8KG1lbW9yeSl8KGVuZCkpWyBcXFxcdF0rKFxcXFx3W15cXFxcc10qKD86WyBcXFxcdF0rW15cXFxcc10rKSopWyBcXFxcdF0qJCl8KF5bIFxcXFx0XSokKVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5TZXJ2aWNlRGVmaW5pdGlvbl9HZXRMaW5lKHMsIHJlZiBsLCByZWYgcG9zKSlcclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJfbWVtYmVyX21hdGNoID0gcl9tZW1iZXIuTWF0Y2gobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcl9tZW1iZXJfbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwuVHJpbSgpID09IFwiZW5kXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuU2VydmljZURlZmluaXRpb25fR2V0TGluZShzLCByZWYgbCwgcmVmIHBvcykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlBhcnNlIGVycm9yXCIsIChpbnQpKHBvcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlBhcnNlIGVycm9yIG5lYXI6IFwiICsgbCwgKGludClwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcl9tZW1iZXJfbWF0Y2hfYmxhbmsgPSByX21lbWJlcl9tYXRjaC5Hcm91cHNbMTVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocl9tZW1iZXJfbWF0Y2hfYmxhbmsuU3VjY2VzcykgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgbWVtYmVyX2tleSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBtZW1iZXJfa2V5IDwgMTM7IG1lbWJlcl9rZXkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJfbWVtYmVyX21hdGNoLkdyb3Vwc1ttZW1iZXJfa2V5XS5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcl9tZW1iZXJfbWF0Y2hfcmVtYWluaW5nID0gcl9tZW1iZXJfbWF0Y2guR3JvdXBzWzE0XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoRW50cnlUeXBlICE9IERhdGFUeXBlcy5vYmplY3RfdCkgJiYgKG1lbWJlcl9rZXkgPj0gNSAmJiBtZW1iZXJfa2V5ICE9IDEzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJTdHJ1Y3R1cmVzIGNhbiBvbmx5IGNvbnRhaW4gZmllbGRzLCBjb25zdGFudHMsIGFuZCBvcHRpb25zXCIsIChpbnQpKHBvcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lbWJlcl9rZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vb3B0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IGxvb2sgaW4gdG8gdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmICghTWVtYmVycy5lbXB0eSgpKSB0aHJvdyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiU3RydWN0dXJlIG9wdGlvbiBtdXN0IGNvbWUgYmVmb3JlIG1lbWJlcnNcIiwgKGludDMyX3QpKHBvcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcHRpb25zLkFkZChyX21lbWJlcl9tYXRjaF9yZW1haW5pbmcuVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5BZGQobmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJvcHRpb24ga2V5d29yZCBpcyBkZXByZWNhdGVkXCIsIChpbnQpcG9zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaW1wbGVtZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1lbWJlcnMuQ291bnQgIT0gMCkgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJTdHJ1Y3R1cmUgaW1wbGVtZW50cyBtdXN0IGNvbWUgYmVmb3JlIG1lbWJlcnNcIiwgKGludCkocG9zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChFbnRyeVR5cGUgIT0gRGF0YVR5cGVzLm9iamVjdF90KSB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlN0cnVjdHVyZXMgY2FuIG9ubHkgY29udGFpbiBmaWVsZHMsIGNvbnN0YW50cywgYW5kIG9wdGlvbnNcIiwgKGludCkocG9zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbXBsZW1lbnRzMSA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5TZXJ2aWNlRGVmaW5pdGlvbl9Gcm9tU3RyaW5nVHlwZUZvcm1hdChsLCBcImltcGxlbWVudHNcIiwgcmVmIGltcGxlbWVudHMxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW1wbGVtZW50cy5BZGQoUXVhbGlmeVR5cGVXaXRoVXNpbmcoaW1wbGVtZW50czFbMF0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zdGFudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1lbWJlcnMuQ291bnQgIT0gMCkgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJTdHJ1Y3R1cmUgY29uc3RhbnRzIG11c3QgY29tZSBiZWZvcmUgbWVtYmVyc1wiLCAoaW50KShwb3MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnN0YW50X2RlZiA9IG5ldyBDb25zdGFudERlZmluaXRpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0YW50X2RlZi5Gcm9tU3RyaW5nKGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25zdGFudHMuQWRkKGNvbnN0YW50X2RlZi5OYW1lLCBjb25zdGFudF9kZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2ZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRW50cnlUeXBlID09IERhdGFUeXBlcy5vYmplY3RfdCkgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJPYmplY3RzIGNhbm5vdCBjb250YWluIGZpZWxkcy4gIFVzZSBwcm9wZXJ0aWVzIGluc3RlYWQuXCIsIChpbnQpKHBvcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IG5ldyBQcm9wZXJ0eURlZmluaXRpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uRnJvbVN0cmluZyhsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVtYmVycy5BZGQobS5OYW1lLCBtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9wcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBuZXcgUHJvcGVydHlEZWZpbml0aW9uKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLkZyb21TdHJpbmcobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lbWJlcnMuQWRkKG0uTmFtZSwgbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZnVuY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gbmV3IEZ1bmN0aW9uRGVmaW5pdGlvbih0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5Gcm9tU3RyaW5nKGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZW1iZXJzLkFkZChtLk5hbWUsIG0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2V2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IG5ldyBFdmVudERlZmluaXRpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uRnJvbVN0cmluZyhsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVtYmVycy5BZGQobS5OYW1lLCBtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9vYmpyZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gbmV3IE9ialJlZkRlZmluaXRpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uRnJvbVN0cmluZyhsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVtYmVycy5BZGQobS5OYW1lLCBtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9waXBlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IG5ldyBQaXBlRGVmaW5pdGlvbih0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5Gcm9tU3RyaW5nKGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZW1iZXJzLkFkZChtLk5hbWUsIG0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBuZXcgQ2FsbGJhY2tEZWZpbml0aW9uKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLkZyb21TdHJpbmcobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lbWJlcnMuQWRkKG0uTmFtZSwgbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vd2lyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gbmV3IFdpcmVEZWZpbml0aW9uKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLkZyb21TdHJpbmcobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lbWJlcnMuQWRkKG0uTmFtZSwgbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbWVtb3J5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBuZXcgTWVtb3J5RGVmaW5pdGlvbih0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5Gcm9tU3RyaW5nKGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZW1iZXJzLkFkZChtLk5hbWUsIG0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChFbnRyeVR5cGUgPT0gRGF0YVR5cGVzLnN0cnVjdHVyZV90KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVuZF9zdHJ1Y3RfcmVnZXguSXNNYXRjaChsKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlBhcnNlIGVycm9yXCIsIChpbnQpKHBvcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEVudHJ5VHlwZSA9PSBEYXRhVHlwZXMucG9kX3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZW5kX3BvZF9yZWdleC5Jc01hdGNoKGwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiUGFyc2UgZXJyb3JcIiwgKGludCkocG9zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoRW50cnlUeXBlID09IERhdGFUeXBlcy5uYW1lZGFycmF5X3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZW5kX25hbWVkYXJyYXlfcmVnZXguSXNNYXRjaChsKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlBhcnNlIGVycm9yXCIsIChpbnQpKHBvcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbmRfb2JqZWN0X3JlZ2V4LklzTWF0Y2gobCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJQYXJzZSBlcnJvclwiLCAoaW50KShwb3MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuU2VydmljZURlZmluaXRpb25fR2V0TGluZShzLCByZWYgbCwgcmVmIHBvcykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiUGFyc2UgZXJyb3JcIiwgKGludCkocG9zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiUGFyc2UgZXJyb3JcIiwgKGludCkocG9zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uIGUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleHApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiUGFyc2UgZXJyb3I6IFwiICsgZXhwLk1lc3NhZ2UgKyBcIiBuZWFyOiBcIiArIGwsIChpbnQpKHBvcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgTWVtYmVycy5DbGVhcigpO1xyXG4gICAgICAgICAgICBFbnRyeVR5cGUgPSBEYXRhVHlwZXMuc3RydWN0dXJlX3Q7XHJcbiAgICAgICAgICAgIEltcGxlbWVudHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgT3B0aW9ucy5DbGVhcigpO1xyXG4gICAgICAgICAgICBDb25zdGFudHMuQ2xlYXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBEYXRhVHlwZXMgUlJEYXRhVHlwZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKEVudHJ5VHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5zdHJ1Y3R1cmVfdDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5wb2RfdDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5uYW1lZGFycmF5X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMub2JqZWN0X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgU2VydmljZUVudHJ5RGVmaW5pdGlvbiB0eXBlIGluIFwiICsgTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVudHJ5VHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBSZXNvbHZlUXVhbGlmaWVkTmFtZSgpXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2VEZWZpbml0aW9uLk5hbWUgKyBcIi5cIiArIE5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW51bSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvblxyXG4gICAge1xyXG4gICAgICAgIHJlYWRvbmx5Xz0wLFxyXG4gICAgICAgIHdyaXRlb25seSxcclxuICAgICAgICBib3RoXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIE1lbWJlckRlZmluaXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICAgICAgcHVibGljIFNlcnZpY2VFbnRyeURlZmluaXRpb24gU2VydmljZUVudHJ5O1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PHN0cmluZz4gTW9kaWZpZXJzO1xyXG5cclxuICAgICAgICBwdWJsaWMgTWVtYmVyRGVmaW5pdGlvbihTZXJ2aWNlRW50cnlEZWZpbml0aW9uIFNlcnZpY2VFbnRyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuU2VydmljZUVudHJ5ID0gU2VydmljZUVudHJ5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgY2xhc3MgTWVtYmVyRGVmaW5pdG9uX1BhcnNlUmVzdWx0c1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIHN0cmluZyBNZW1iZXJUeXBlO1xyXG4gICAgICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICAgICAgICAgIHB1YmxpYyBzdHJpbmcgRGF0YVR5cGU7XHJcbiAgICAgICAgICAgIHB1YmxpYyBMaXN0PHN0cmluZz4gUGFyYW1ldGVycyA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgcHVibGljIExpc3Q8c3RyaW5nPiBNb2RpZmllcnMgPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgYm9vbCBNZW1iZXJEZWZpbml0aW9uX1BhcnNlQ29tbWFMaXN0KFJlZ2V4IHIsIHN0cmluZyBzLCByZWYgTGlzdDxzdHJpbmc+IHJlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByX2VtcHR5ID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgIGlmIChyX2VtcHR5LklzTWF0Y2gocykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcl9tYXRjaCA9IHIuTWF0Y2gocyk7XHJcbiAgICAgICAgICAgIGlmICghcl9tYXRjaC5TdWNjZXNzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcy5BZGQocl9tYXRjaC5Hcm91cHNbMV0uVmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAocl9tYXRjaC5Hcm91cHNbMl0uU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFNZW1iZXJEZWZpbml0aW9uX1BhcnNlQ29tbWFMaXN0KHIsIHJfbWF0Y2guR3JvdXBzWzJdLlZhbHVlLCByZWYgcmVzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgYm9vbCBNZW1iZXJEZWZpbml0aW9uX1BhcnNlUGFyYW1ldGVycyhzdHJpbmcgcywgcmVmIExpc3Q8c3RyaW5nPiByZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcl9wYXJhbXMgPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qKFwiICsgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5SUl9UWVBFX1JFR0VYICsgXCIoPzpcXFxcW1swLTlcXFxcLFxcXFwqXFxcXC1dKlxcXFxdKT8oPzpcXFxce1xcXFx3ezEsMTZ9XFxcXH0pP1sgXFxcXHRdK1xcXFx3KykoPzpbIFxcXFx0XSosWyBcXFxcdF0qKFsgLX5cXFxcdF0qXFxcXHdbIC1+XFxcXHRdKikpP1sgXFxcXHRdKiRcIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9QYXJzZUNvbW1hTGlzdChyX3BhcmFtcywgcywgcmVmIHJlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgYm9vbCBNZW1iZXJEZWZpbml0aW9uX1BhcnNlTW9kaWZpZXJzKHN0cmluZyBzLCByZWYgTGlzdDxzdHJpbmc+IHJlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByX21vZGlmaWVyID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKihcIiArIGRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuUlJfTkFNRV9SRUdFWCArIFwiKD86XFxcXChbXFxcXHdcXFxcLVxcXFwuLCBcXFxcdFxcXFxcXFwiXFxcXHtcXFxcfVxcXFw6XSpcXFxcKSk/KSg/OlsgXFxcXHRdKiwoWyAtflxcXFx0XSopKT8kXCIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE1lbWJlckRlZmluaXRpb25fUGFyc2VDb21tYUxpc3Qocl9tb2RpZmllciwgcywgcmVmIHJlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgc3RyaW5nIE1lbWJlckRlZmluaXRpb25fTW9kaWZpZXJzVG9TdHJpbmcoTGlzdDxzdHJpbmc+IG1vZGlmaWVycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChtb2RpZmllcnMuQ291bnQgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFwiIFtcIiArIFN0cmluZy5Kb2luKFwiLFwiLCBtb2RpZmllcnMpICsgXCJdXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgYm9vbCBNZW1iZXJEZWZpbml0aW9uX1BhcnNlRm9ybWF0X2NvbW1vbihzdHJpbmcgcywgb3V0IE1lbWJlckRlZmluaXRvbl9QYXJzZVJlc3VsdHMgcmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qKFthLXpBLVpdKylbIFxcXFx0XSsoPzooW2EtekEtWl1bXFxcXHdcXFxce1xcXFx9XFxcXFtcXFxcXVxcXFwqXFxcXCxcXFxcLVxcXFwuXSopWyBcXFxcdF0rKT8oXFxcXHcrKSg/OlsgXFxcXHRdKihcXFxcKChbXildKilcXFxcKSkpPyg/OlsgXFxcXHRdK1xcXFxbKFteXFxcXF1dKilcXFxcXSk/WyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgdmFyIHJfcmVzdWx0ID0gci5NYXRjaChzKTtcclxuICAgICAgICAgICAgaWYgKCFyX3Jlc3VsdC5TdWNjZXNzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXMgPSBuZXcgTWVtYmVyRGVmaW5pdG9uX1BhcnNlUmVzdWx0cygpO1xyXG4gICAgICAgICAgICByZXMuTW9kaWZpZXJzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIHJlcy5QYXJhbWV0ZXJzLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWVtYmVyX3R5cGVfcmVzdWx0ID0gcl9yZXN1bHQuR3JvdXBzWzFdO1xyXG4gICAgICAgICAgICB2YXIgZGF0YV90eXBlX3Jlc3VsdCA9IHJfcmVzdWx0Lkdyb3Vwc1syXTtcclxuICAgICAgICAgICAgdmFyIG5hbWVfcmVzdWx0ID0gcl9yZXN1bHQuR3JvdXBzWzNdO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zX3ByZXNlbnRfcmVzdWx0ID0gcl9yZXN1bHQuR3JvdXBzWzRdO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zX3Jlc3VsdCA9IHJfcmVzdWx0Lkdyb3Vwc1s1XTtcclxuICAgICAgICAgICAgdmFyIG1vZGlmaWVyc19yZXN1bHQgPSByX3Jlc3VsdC5Hcm91cHNbNl07XHJcblxyXG4gICAgICAgICAgICByZXMuTWVtYmVyVHlwZSA9IG1lbWJlcl90eXBlX3Jlc3VsdC5WYWx1ZTtcclxuICAgICAgICAgICAgaWYgKGRhdGFfdHlwZV9yZXN1bHQuU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzLkRhdGFUeXBlID0gZGF0YV90eXBlX3Jlc3VsdC5WYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXMuTmFtZSA9IG5hbWVfcmVzdWx0LlZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcmFtc19wcmVzZW50X3Jlc3VsdC5TdWNjZXNzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXMuUGFyYW1ldGVycyA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgIGlmICghTWVtYmVyRGVmaW5pdGlvbl9QYXJzZVBhcmFtZXRlcnMocGFyYW1zX3Jlc3VsdC5WYWx1ZSwgcmVmIHJlcy5QYXJhbWV0ZXJzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtb2RpZmllcnNfcmVzdWx0LlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlcy5Nb2RpZmllcnMgPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIU1lbWJlckRlZmluaXRpb25fUGFyc2VNb2RpZmllcnMobW9kaWZpZXJzX3Jlc3VsdC5WYWx1ZSwgcmVmIHJlcy5Nb2RpZmllcnMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLk1vZGlmaWVycy5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdF9jb21tb24ocmVmIE1lbWJlckRlZmluaXRvbl9QYXJzZVJlc3VsdHMgcGFyc2VfcmVzLCBzdHJpbmcgczEsIExpc3Q8c3RyaW5nPiBtZW1iZXJfdHlwZXMsIE1lbWJlckRlZmluaXRpb24gZGVmKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghTWVtYmVyRGVmaW5pdGlvbl9QYXJzZUZvcm1hdF9jb21tb24oczEsIG91dCBwYXJzZV9yZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkNvdWxkIG5vdCBwYXJzZSBcIiArIG1lbWJlcl90eXBlc1swXSArIFwiIGRlZmluaXRpb24gXFxcIlwiICsgczEgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBtID0gcGFyc2VfcmVzLk1lbWJlclR5cGU7XHJcbiAgICAgICAgICAgIGlmIChtZW1iZXJfdHlwZXMuRmluZCgoUHJlZGljYXRlPHN0cmluZz4pKHggPT4geCA9PSBtKSkgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJGb3JtYXQgRXJyb3JcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlZi5SZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgZGVmLk5hbWUgPSBwYXJzZV9yZXMuTmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdDEoc3RyaW5nIHMxLCBMaXN0PHN0cmluZz4gbWVtYmVyX3R5cGVzLCBNZW1iZXJEZWZpbml0aW9uIGRlZiwgcmVmIFR5cGVEZWZpbml0aW9uIHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZW1iZXJEZWZpbml0b25fUGFyc2VSZXN1bHRzIHBhcnNlX3JlcyA9IG5ldyBNZW1iZXJEZWZpbml0b25fUGFyc2VSZXN1bHRzKCk7XHJcbiAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdF9jb21tb24ocmVmIHBhcnNlX3JlcywgczEsIG1lbWJlcl90eXBlcywgZGVmKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJzZV9yZXMuRGF0YVR5cGUgPT0gbnVsbCB8fCBwYXJzZV9yZXMuUGFyYW1ldGVycy5Db3VudCA+IDApIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiRm9ybWF0IGVycm9yIGZvciBcIiArIG1lbWJlcl90eXBlc1swXSArIFwiIGRlZmluaXRpb24gXFxcIlwiICsgczEgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgIHR5cGUgPSBuZXcgVHlwZURlZmluaXRpb24oZGVmKTtcclxuICAgICAgICAgICAgdHlwZS5Gcm9tU3RyaW5nKHBhcnNlX3Jlcy5EYXRhVHlwZSk7XHJcbiAgICAgICAgICAgIHR5cGUuUmVuYW1lKFwidmFsdWVcIik7XHJcbiAgICAgICAgICAgIHR5cGUuUXVhbGlmeVR5cGVTdHJpbmdXaXRoVXNpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJzZV9yZXMuTW9kaWZpZXJzICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlZi5Nb2RpZmllcnMgPSBwYXJzZV9yZXMuTW9kaWZpZXJzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBNZW1iZXJEZWZpbml0aW9uX0Zyb21TdHJpbmdGb3JtYXQxKHN0cmluZyBzMSwgc3RyaW5nIG1lbWJlcl90eXBlLCBNZW1iZXJEZWZpbml0aW9uIGRlZiwgcmVmIFR5cGVEZWZpbml0aW9uIHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWVtYmVyX3R5cGVzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICBtZW1iZXJfdHlwZXMuQWRkKG1lbWJlcl90eXBlKTtcclxuICAgICAgICAgICAgTWVtYmVyRGVmaW5pdGlvbl9Gcm9tU3RyaW5nRm9ybWF0MShzMSwgbWVtYmVyX3R5cGVzLCBkZWYsIHJlZiB0eXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBzdHJpbmcgTWVtYmVyRGVmaW5pdGlvbl9Ub1N0cmluZ0Zvcm1hdDEoc3RyaW5nIG1lbWJlcl90eXBlLCBNZW1iZXJEZWZpbml0aW9uIGRlZiwgVHlwZURlZmluaXRpb24gZGF0YV90eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBuZXcgVHlwZURlZmluaXRpb24oKTtcclxuICAgICAgICAgICAgZGF0YV90eXBlLkNvcHlUbyhyZWYgdCk7XHJcbiAgICAgICAgICAgIHQuUmVuYW1lKGRlZi5OYW1lKTtcclxuICAgICAgICAgICAgdC5VbnF1YWxpZnlUeXBlU3RyaW5nV2l0aFVzaW5nKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWVtYmVyX3R5cGUgKyBcIiBcIiArIHQuVG9TdHJpbmcoKSArIE1lbWJlckRlZmluaXRpb25fTW9kaWZpZXJzVG9TdHJpbmcoZGVmLk1vZGlmaWVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBNZW1iZXJEZWZpbml0aW9uX1BhcmFtYXRlcnNGcm9tU3RyaW5ncyhMaXN0PHN0cmluZz4gcywgcmVmIExpc3Q8VHlwZURlZmluaXRpb24+IHBhcmFtc18sIE1lbWJlckRlZmluaXRpb24gZGVmKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzMSBpbiBzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGRlZiA9IG5ldyBUeXBlRGVmaW5pdGlvbihkZWYpO1xyXG4gICAgICAgICAgICAgICAgdGRlZi5Gcm9tU3RyaW5nKHMxKTtcclxuICAgICAgICAgICAgICAgIHRkZWYuUXVhbGlmeVR5cGVTdHJpbmdXaXRoVXNpbmcoKTtcclxuICAgICAgICAgICAgICAgIHBhcmFtc18uQWRkKHRkZWYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgc3RyaW5nIE1lbWJlckRlZmluaXRpb25fUGFyYW1ldGVyc1RvU3RyaW5nKExpc3Q8VHlwZURlZmluaXRpb24+IHBhcmFtc18pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zMiA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHAgaW4gcGFyYW1zXylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHlwZURlZmluaXRpb24gcDI9bmV3IFR5cGVEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwLkNvcHlUbyhyZWYgcDIpO1xyXG4gICAgICAgICAgICAgICAgcDIuVW5xdWFsaWZ5VHlwZVN0cmluZ1dpdGhVc2luZygpO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zMi5BZGQocDIuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuSm9pbihcIiwgXCIsIHBhcmFtczIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgTWVtYmVyRGVmaW5pdGlvbl9Gcm9tU3RyaW5nRm9ybWF0MihzdHJpbmcgczEsIHN0cmluZyBtZW1iZXJfdHlwZSwgTWVtYmVyRGVmaW5pdGlvbiBkZWYsIHJlZiBUeXBlRGVmaW5pdGlvbiByZXR1cm5fdHlwZSwgcmVmIExpc3Q8VHlwZURlZmluaXRpb24+IHBhcmFtc18pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWVtYmVyX3R5cGVzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICBtZW1iZXJfdHlwZXMuQWRkKG1lbWJlcl90eXBlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwYXJzZV9yZXMgPSBuZXcgTWVtYmVyRGVmaW5pdG9uX1BhcnNlUmVzdWx0cygpO1xyXG4gICAgICAgICAgICBNZW1iZXJEZWZpbml0aW9uX0Zyb21TdHJpbmdGb3JtYXRfY29tbW9uKHJlZiBwYXJzZV9yZXMsIHMxLCBtZW1iZXJfdHlwZXMsIGRlZik7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFyc2VfcmVzLkRhdGFUeXBlID09IG51bGwgfHwgcGFyc2VfcmVzLlBhcmFtZXRlcnMgPT0gbnVsbCkgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJGb3JtYXQgZXJyb3IgZm9yIFwiICsgbWVtYmVyX3R5cGVzWzBdICsgXCIgZGVmaW5pdGlvbiBcXFwiXCIgKyBzMSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuX3R5cGUgPSBuZXcgVHlwZURlZmluaXRpb24oZGVmKTtcclxuICAgICAgICAgICAgcmV0dXJuX3R5cGUuRnJvbVN0cmluZyhwYXJzZV9yZXMuRGF0YVR5cGUpO1xyXG4gICAgICAgICAgICByZXR1cm5fdHlwZS5SZW5hbWUoXCJcIik7XHJcbiAgICAgICAgICAgIHJldHVybl90eXBlLlF1YWxpZnlUeXBlU3RyaW5nV2l0aFVzaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBNZW1iZXJEZWZpbml0aW9uX1BhcmFtYXRlcnNGcm9tU3RyaW5ncyhwYXJzZV9yZXMuUGFyYW1ldGVycywgcmVmIHBhcmFtc18sIGRlZik7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFyc2VfcmVzLk1vZGlmaWVycyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWYuTW9kaWZpZXJzID0gcGFyc2VfcmVzLk1vZGlmaWVycztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHN0cmluZyBNZW1iZXJEZWZpbml0aW9uX1RvU3RyaW5nRm9ybWF0MihzdHJpbmcgbWVtYmVyX3R5cGUsIE1lbWJlckRlZmluaXRpb24gZGVmLCBUeXBlRGVmaW5pdGlvbiByZXR1cm5fdHlwZSwgTGlzdDxUeXBlRGVmaW5pdGlvbj4gcGFyYW1zXylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFR5cGVEZWZpbml0aW9uIHQ9bmV3IFR5cGVEZWZpbml0aW9uKGRlZik7XHJcbiAgICAgICAgICAgIHJldHVybl90eXBlLkNvcHlUbyhyZWYgdCk7XHJcbiAgICAgICAgICAgIHQuUmVuYW1lKGRlZi5OYW1lKTtcclxuICAgICAgICAgICAgdC5VbnF1YWxpZnlUeXBlU3RyaW5nV2l0aFVzaW5nKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWVtYmVyX3R5cGUgKyBcIiBcIiArIHQuVG9TdHJpbmcoKSArIFwiKFwiICsgTWVtYmVyRGVmaW5pdGlvbl9QYXJhbWV0ZXJzVG9TdHJpbmcocGFyYW1zXykgKyBcIilcIiArIE1lbWJlckRlZmluaXRpb25fTW9kaWZpZXJzVG9TdHJpbmcoZGVmLk1vZGlmaWVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBNZW1iZXJEZWZpbml0aW9uX0Zyb21TdHJpbmdGb3JtYXQzKHN0cmluZyBzMSwgc3RyaW5nIG1lbWJlcl90eXBlLCBNZW1iZXJEZWZpbml0aW9uIGRlZiwgcmVmIExpc3Q8VHlwZURlZmluaXRpb24+IHBhcmFtc18pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWVtYmVyX3R5cGVzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICBtZW1iZXJfdHlwZXMuQWRkKG1lbWJlcl90eXBlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwYXJzZV9yZXMgPSBuZXcgTWVtYmVyRGVmaW5pdG9uX1BhcnNlUmVzdWx0cygpO1xyXG4gICAgICAgICAgICBNZW1iZXJEZWZpbml0aW9uX0Zyb21TdHJpbmdGb3JtYXRfY29tbW9uKHJlZiBwYXJzZV9yZXMsIHMxLCBtZW1iZXJfdHlwZXMsIGRlZik7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFyc2VfcmVzLkRhdGFUeXBlICE9IG51bGwgfHwgcGFyc2VfcmVzLlBhcmFtZXRlcnMgPT0gbnVsbCkgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJGb3JtYXQgZXJyb3IgZm9yIFwiICsgbWVtYmVyX3R5cGVzWzBdICsgXCIgZGVmaW5pdGlvbiBcXFwiXCIgKyBzMSArIFwiXFxcIlwiKTtcclxuXHJcbiAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb25fUGFyYW1hdGVyc0Zyb21TdHJpbmdzKHBhcnNlX3Jlcy5QYXJhbWV0ZXJzLCByZWYgcGFyYW1zXywgZGVmKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJzZV9yZXMuTW9kaWZpZXJzICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlZi5Nb2RpZmllcnMgPSBwYXJzZV9yZXMuTW9kaWZpZXJzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgc3RyaW5nIE1lbWJlckRlZmluaXRpb25fVG9TdHJpbmdGb3JtYXQzKHN0cmluZyBtZW1iZXJfdHlwZSwgTWVtYmVyRGVmaW5pdGlvbiBkZWYsIExpc3Q8VHlwZURlZmluaXRpb24+IHBhcmFtc18pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbWVtYmVyX3R5cGUgKyBcIiBcIiArIGRlZi5OYW1lICsgXCIoXCIgKyBNZW1iZXJEZWZpbml0aW9uX1BhcmFtZXRlcnNUb1N0cmluZyhwYXJhbXNfKSArIFwiKVwiICsgTWVtYmVyRGVmaW5pdGlvbl9Nb2RpZmllcnNUb1N0cmluZyhkZWYuTW9kaWZpZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBNZW1iZXJEZWZpbml0aW9uX0dldERpcmVjdGlvbihMaXN0PHN0cmluZz4gbW9kaWZpZXJzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG1vZGlmaWVycyA9PSBudWxsKSByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24uYm90aDtcclxuICAgICAgICAgICAgaWYgKG1vZGlmaWVycy5Db250YWlucyhcInJlYWRvbmx5XCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24ucmVhZG9ubHlfO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobW9kaWZpZXJzLkNvbnRhaW5zKFwid3JpdGVvbmx5XCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24ud3JpdGVvbmx5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24uYm90aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgUmVzZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTmFtZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIE1vZGlmaWVycyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBQcm9wZXJ0eURlZmluaXRpb24gOiBNZW1iZXJEZWZpbml0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFR5cGVEZWZpbml0aW9uIFR5cGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQcm9wZXJ0eURlZmluaXRpb24oU2VydmljZUVudHJ5RGVmaW5pdGlvbiBTZXJ2aWNlRW50cnkpXHJcbiAgICAgICAgICAgIDogYmFzZShTZXJ2aWNlRW50cnkpXHJcbiAgICAgICAgeyB9XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVG9TdHJpbmcoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb1N0cmluZyhib29sIGlzc3RydWN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIG1lbWJlcl90eXBlID0gaXNzdHJ1Y3QgPyBcImZpZWxkXCIgOiBcInByb3BlcnR5XCI7XHJcbiAgICAgICAgICAgIHJldHVybiBNZW1iZXJEZWZpbml0aW9uX1RvU3RyaW5nRm9ybWF0MShtZW1iZXJfdHlwZSwgdGhpcywgVHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBGcm9tU3RyaW5nKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lbWJlcl90eXBlcyA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgbWVtYmVyX3R5cGVzLkFkZChcInByb3BlcnR5XCIpO1xyXG4gICAgICAgICAgICBtZW1iZXJfdHlwZXMuQWRkKFwiZmllbGRcIik7XHJcbiAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdDEocywgbWVtYmVyX3R5cGVzLCB0aGlzLCByZWYgVHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLlJlc2V0KCk7XHJcbiAgICAgICAgICAgIFR5cGUhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9PlR5cGUuUmVzZXQoKSk6bnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBEaXJlY3Rpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9HZXREaXJlY3Rpb24oTW9kaWZpZXJzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRnVuY3Rpb25EZWZpbml0aW9uIDogTWVtYmVyRGVmaW5pdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBUeXBlRGVmaW5pdGlvbiBSZXR1cm5UeXBlO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PFR5cGVEZWZpbml0aW9uPiBQYXJhbWV0ZXJzID0gbmV3IExpc3Q8VHlwZURlZmluaXRpb24+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGdW5jdGlvbkRlZmluaXRpb24oU2VydmljZUVudHJ5RGVmaW5pdGlvbiBTZXJ2aWNlRW50cnkpXHJcbiAgICAgICAgICAgIDogYmFzZShTZXJ2aWNlRW50cnkpXHJcbiAgICAgICAgeyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1lbWJlckRlZmluaXRpb25fVG9TdHJpbmdGb3JtYXQyKFwiZnVuY3Rpb25cIiwgdGhpcywgUmV0dXJuVHlwZSwgUGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBGcm9tU3RyaW5nKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTWVtYmVyRGVmaW5pdGlvbl9Gcm9tU3RyaW5nRm9ybWF0MihzLCBcImZ1bmN0aW9uXCIsIHRoaXMsIHJlZiBSZXR1cm5UeXBlLCByZWYgUGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLlJlc2V0KCk7XHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgUmV0dXJuVHlwZSE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+UmV0dXJuVHlwZS5SZXNldCgpKTpudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNHZW5lcmF0b3JcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUmV0dXJuVHlwZS5Db250YWluZXJUeXBlID09IERhdGFUeXBlc19Db250YWluZXJUeXBlcy5nZW5lcmF0b3IpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFBhcmFtZXRlcnMuQ291bnQgIT0gMCAmJiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8VHlwZURlZmluaXRpb24+KFBhcmFtZXRlcnMpLkNvbnRhaW5lclR5cGUgPT0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLmdlbmVyYXRvcilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEV2ZW50RGVmaW5pdGlvbiA6IE1lbWJlckRlZmluaXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxUeXBlRGVmaW5pdGlvbj4gUGFyYW1ldGVycyA9IG5ldyBMaXN0PFR5cGVEZWZpbml0aW9uPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgRXZlbnREZWZpbml0aW9uKFNlcnZpY2VFbnRyeURlZmluaXRpb24gU2VydmljZUVudHJ5KVxyXG4gICAgICAgICAgICA6IGJhc2UoU2VydmljZUVudHJ5KVxyXG4gICAgICAgIHsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBNZW1iZXJEZWZpbml0aW9uX1RvU3RyaW5nRm9ybWF0MyhcImV2ZW50XCIsIHRoaXMsIFBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdDMocywgXCJldmVudFwiLCB0aGlzLCByZWYgUGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLlJlc2V0KCk7XHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnMuQ2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE9ialJlZkRlZmluaXRpb24gOiBNZW1iZXJEZWZpbml0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFN0cmluZyBPYmplY3RUeXBlO1xyXG4gICAgICAgIHB1YmxpYyBEYXRhVHlwZXNfQXJyYXlUeXBlcyBBcnJheVR5cGU7XHJcbiAgICAgICAgcHVibGljIERhdGFUeXBlc19Db250YWluZXJUeXBlcyBDb250YWluZXJUeXBlO1xyXG5cclxuICAgICAgICBwdWJsaWMgT2JqUmVmRGVmaW5pdGlvbihTZXJ2aWNlRW50cnlEZWZpbml0aW9uIFNlcnZpY2VFbnRyeSlcclxuICAgICAgICAgICAgOiBiYXNlKFNlcnZpY2VFbnRyeSlcclxuICAgICAgICB7IH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdCA9IG5ldyBUeXBlRGVmaW5pdGlvbih0aGlzKTtcclxuICAgICAgICAgICAgdC5OYW1lID0gTmFtZTtcclxuICAgICAgICAgICAgdC5UeXBlU3RyaW5nID0gT2JqZWN0VHlwZTtcclxuICAgICAgICAgICAgdC5UeXBlID0gRGF0YVR5cGVzLm5hbWVkdHlwZV90O1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChBcnJheVR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0FycmF5VHlwZXMubm9uZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoQ29udGFpbmVyVHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXNfQ29udGFpbmVyVHlwZXMubm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm1hcF9pbnQzMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm1hcF9zdHJpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5Db250YWluZXJUeXBlID0gQ29udGFpbmVyVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBPYmpSZWZEZWZpbml0aW9uIGZvciBvYmpyZWYgXFxcIlwiICsgTmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19BcnJheVR5cGVzLmFycmF5OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENvbnRhaW5lclR5cGUgIT0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgT2JqUmVmRGVmaW5pdGlvbiBmb3Igb2JqcmVmIFxcXCJcIiArIE5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdC5BcnJheVR5cGUgPSBBcnJheVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuQXJyYXlWYXJMZW5ndGggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0LkFycmF5TGVuZ3RoLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIE9ialJlZkRlZmluaXRpb24gZm9yIG9ianJlZiBcXFwiXCIgKyBOYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9Ub1N0cmluZ0Zvcm1hdDEoXCJvYmpyZWZcIiwgdGhpcywgdCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gbmV3IFR5cGVEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdDEocywgXCJvYmpyZWZcIiwgdGhpcywgcmVmIHQpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0LkFycmF5VHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXNfQXJyYXlUeXBlcy5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0LkNvbnRhaW5lclR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19Db250YWluZXJUeXBlcy5tYXBfaW50MzI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19Db250YWluZXJUeXBlcy5tYXBfc3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkludmFsaWQgb2JqcmVmIGRlZmluaXRpb24gXFxcIlwiICsgcyArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19BcnJheVR5cGVzLmFycmF5OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENvbnRhaW5lclR5cGUgIT0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiSW52YWxpZCBvYmpyZWYgZGVmaW5pdGlvbiBcXFwiXCIgKyBzICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdC5BcnJheVZhckxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJJbnZhbGlkIG9ianJlZiBkZWZpbml0aW9uIFxcXCJcIiArIHMgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuQXJyYXlMZW5ndGhbMF0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJJbnZhbGlkIG9ianJlZiBkZWZpbml0aW9uIFxcXCJcIiArIHMgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkludmFsaWQgb2JqcmVmIGRlZmluaXRpb24gXFxcIlwiICsgcyArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCEoKCFTdHJpbmcuSXNOdWxsT3JFbXB0eSh0LlR5cGVTdHJpbmcpICYmIHQuVHlwZSA9PSBEYXRhVHlwZXMubmFtZWR0eXBlX3QpXHJcbiAgICAgICAgICAgICAgICB8fCAodC5UeXBlID09IERhdGFUeXBlcy52YXJvYmplY3RfdCkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkludmFsaWQgb2JqcmVmIGRlZmluaXRpb24gXFxcIlwiICsgcyArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmICh0LlR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkdHlwZV90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3RUeXBlID0gdC5UeXBlU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0VHlwZSA9IFwidmFyb2JqZWN0XCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFycmF5VHlwZSA9IHQuQXJyYXlUeXBlO1xyXG4gICAgICAgICAgICBDb250YWluZXJUeXBlID0gdC5Db250YWluZXJUeXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVzZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5SZXNldCgpO1xyXG4gICAgICAgICAgICBPYmplY3RUeXBlID0gXCJcIjtcclxuICAgICAgICAgICAgQXJyYXlUeXBlID0gRGF0YVR5cGVzX0FycmF5VHlwZXMubm9uZTtcclxuICAgICAgICAgICAgQ29udGFpbmVyVHlwZSA9IERhdGFUeXBlc19Db250YWluZXJUeXBlcy5ub25lO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgUGlwZURlZmluaXRpb24gOiBNZW1iZXJEZWZpbml0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFR5cGVEZWZpbml0aW9uIFR5cGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQaXBlRGVmaW5pdGlvbihTZXJ2aWNlRW50cnlEZWZpbml0aW9uIFNlcnZpY2VFbnRyeSlcclxuICAgICAgICAgICAgOiBiYXNlKFNlcnZpY2VFbnRyeSlcclxuICAgICAgICB7IH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9Ub1N0cmluZ0Zvcm1hdDEoXCJwaXBlXCIsIHRoaXMsIFR5cGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdDEocywgXCJwaXBlXCIsIHRoaXMsIHJlZiBUeXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlc2V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuUmVzZXQoKTtcclxuICAgICAgICAgICAgVHlwZSE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+VHlwZS5SZXNldCgpKTpudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIERpcmVjdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNZW1iZXJEZWZpbml0aW9uX0dldERpcmVjdGlvbihNb2RpZmllcnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1VucmVsaWFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxzdHJpbmc+KE1vZGlmaWVycywoRnVuYzxzdHJpbmcsYm9vbD4pKHggPT4geD09XCJ1bnJlbGlhYmxlXCIpKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvIGluIFNlcnZpY2VFbnRyeS5PcHRpb25zKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKnBpcGVbIFxcXFx0XStcIiArIE5hbWUgKyBcIlsgXFxcXHRdK3VucmVsaWFibGVbIFxcXFx0XSokXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyLklzTWF0Y2gobykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIENhbGxiYWNrRGVmaW5pdGlvbiA6IE1lbWJlckRlZmluaXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVHlwZURlZmluaXRpb24gUmV0dXJuVHlwZTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxUeXBlRGVmaW5pdGlvbj4gUGFyYW1ldGVycyA9IG5ldyBMaXN0PFR5cGVEZWZpbml0aW9uPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgQ2FsbGJhY2tEZWZpbml0aW9uKFNlcnZpY2VFbnRyeURlZmluaXRpb24gU2VydmljZUVudHJ5KVxyXG4gICAgICAgICAgICA6IGJhc2UoU2VydmljZUVudHJ5KVxyXG4gICAgICAgIHsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBNZW1iZXJEZWZpbml0aW9uX1RvU3RyaW5nRm9ybWF0MihcImNhbGxiYWNrXCIsIHRoaXMsIFJldHVyblR5cGUsIFBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdDIocywgXCJjYWxsYmFja1wiLCB0aGlzLCByZWYgUmV0dXJuVHlwZSwgcmVmIFBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVzZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5SZXNldCgpO1xyXG4gICAgICAgICAgICBQYXJhbWV0ZXJzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIFJldHVyblR5cGUhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9PlJldHVyblR5cGUuUmVzZXQoKSk6bnVsbDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGNsYXNzIFdpcmVEZWZpbml0aW9uIDogTWVtYmVyRGVmaW5pdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBUeXBlRGVmaW5pdGlvbiBUeXBlO1xyXG5cclxuICAgICAgICBwdWJsaWMgV2lyZURlZmluaXRpb24oU2VydmljZUVudHJ5RGVmaW5pdGlvbiBTZXJ2aWNlRW50cnkpXHJcbiAgICAgICAgICAgIDogYmFzZShTZXJ2aWNlRW50cnkpXHJcbiAgICAgICAgeyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1lbWJlckRlZmluaXRpb25fVG9TdHJpbmdGb3JtYXQxKFwid2lyZVwiLCB0aGlzLCBUeXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZyb21TdHJpbmcoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZW1iZXJEZWZpbml0aW9uX0Zyb21TdHJpbmdGb3JtYXQxKHMsIFwid2lyZVwiLCB0aGlzLCByZWYgVHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLlJlc2V0KCk7XHJcbiAgICAgICAgICAgIFR5cGUhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9PlR5cGUuUmVzZXQoKSk6bnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbiBEaXJlY3Rpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVtYmVyRGVmaW5pdGlvbl9HZXREaXJlY3Rpb24oTW9kaWZpZXJzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTWVtb3J5RGVmaW5pdGlvbiA6IE1lbWJlckRlZmluaXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVHlwZURlZmluaXRpb24gVHlwZTtcclxuXHJcbiAgICAgICAgcHVibGljIE1lbW9yeURlZmluaXRpb24oU2VydmljZUVudHJ5RGVmaW5pdGlvbiBTZXJ2aWNlRW50cnkpXHJcbiAgICAgICAgICAgIDogYmFzZShTZXJ2aWNlRW50cnkpXHJcbiAgICAgICAgeyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1lbWJlckRlZmluaXRpb25fVG9TdHJpbmdGb3JtYXQxKFwibWVtb3J5XCIsIHRoaXMsIFR5cGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb25fRnJvbVN0cmluZ0Zvcm1hdDEocywgXCJtZW1vcnlcIiwgdGhpcywgcmVmIFR5cGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVzZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5SZXNldCgpO1xyXG4gICAgICAgICAgICBUeXBlIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tTGFtYmRhKCgpPT5UeXBlLlJlc2V0KCkpOm51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24gRGlyZWN0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1lbWJlckRlZmluaXRpb25fR2V0RGlyZWN0aW9uKE1vZGlmaWVycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFR5cGVEZWZpbml0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YVR5cGVzIFR5cGU7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUeXBlU3RyaW5nO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YVR5cGVzX0FycmF5VHlwZXMgQXJyYXlUeXBlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIEFycmF5VmFyTGVuZ3RoO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gQXJyYXlMZW5ndGggPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhVHlwZXNfQ29udGFpbmVyVHlwZXMgQ29udGFpbmVyVHlwZTtcclxuXHJcbiAgICAgICAgcHVibGljIE1lbWJlckRlZmluaXRpb24gbWVtYmVyO1xyXG5cclxuICAgICAgICBpbnRlcm5hbCBOYW1lZFR5cGVEZWZpbml0aW9uIFJlc29sdmVOYW1lZFR5cGVfY2FjaGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUeXBlRGVmaW5pdGlvbigpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUeXBlRGVmaW5pdGlvbihNZW1iZXJEZWZpbml0aW9uIG1lbWJlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubWVtYmVyID0gbWVtYmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgdmFyIG8gPSBuZXcgU3RyaW5nV3JpdGVyKCk7XHJcbiAgICAgICAgICAgIG8uV3JpdGUoKFR5cGUgPj0gRGF0YVR5cGVzLm5hbWVkdHlwZV90ICYmICghKFR5cGUgPT0gRGF0YVR5cGVzLnZhcnZhbHVlX3QpICYmICEoVHlwZSA9PSBEYXRhVHlwZXMudmFyb2JqZWN0X3QpKSkgPyBUeXBlU3RyaW5nIDogU3RyaW5nRnJvbURhdGFUeXBlKFR5cGUpKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoQXJyYXlUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19BcnJheVR5cGVzLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19BcnJheVR5cGVzLmFycmF5OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5Xcml0ZShcIltcIiArIChBcnJheUxlbmd0aFswXSAhPSAwID8gKChBcnJheUxlbmd0aFswXSkgKyAoQXJyYXlWYXJMZW5ndGggPyBcIi1cIiA6IFwiXCIpKS5Ub1N0cmluZygpIDogXCJcIikgKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0FycmF5VHlwZXMubXVsdGlkaW1hcnJheTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheVZhckxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5Xcml0ZShcIlsqXVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheUxlbmd0aC5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uV3JpdGUoXCJbezB9XVwiLCBBcnJheUxlbmd0aFswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIEFycmF5TGVuZ3RoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzLkFkZChlLlRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLldyaXRlKFwiW1wiICsgU3RyaW5nLkpvaW4oXCIsXCIsIHMzKSArIFwiXVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIHR5cGUgZGVmaW5pdGlvbiBcXFwiXCIgKyBOYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKENvbnRhaW5lclR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19Db250YWluZXJUeXBlcy5saXN0OlxyXG4gICAgICAgICAgICAgICAgICAgIG8uV3JpdGUoXCJ7bGlzdH1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19Db250YWluZXJUeXBlcy5tYXBfaW50MzI6XHJcbiAgICAgICAgICAgICAgICAgICAgby5Xcml0ZShcIntpbnQzMn1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19Db250YWluZXJUeXBlcy5tYXBfc3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIG8uV3JpdGUoXCJ7c3RyaW5nfVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLmdlbmVyYXRvcjpcclxuICAgICAgICAgICAgICAgICAgICBvLldyaXRlKFwie2dlbmVyYXRvcn1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgdHlwZSBkZWZpbml0aW9uIFxcXCJcIiArIE5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG8uV3JpdGUoXCIgXCIgKyBOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIG8uVG9TdHJpbmcoKS5UcmltKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBGcm9tU3RyaW5nKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVzZXQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKihbYS16QS1aXVtcXFxcd1xcXFwuXSopKD86KFxcXFxbXFxcXF0pfFxcXFxbKChbMC05XSspfChbMC05XSspXFxcXC18KFxcXFwqKXwoWzAtOV0rKVxcXFwsfChbMC05XFxcXCxdKykpXFxcXF0pPyg/OlxcXFx7KFxcXFx3ezEsMTZ9KVxcXFx9KT8oPzpbIFxcXFx0XSsoXFxcXHcrKSk/WyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgdmFyIHJfcmVzdWx0ID0gci5NYXRjaChzKTtcclxuICAgICAgICAgICAgaWYgKCFyX3Jlc3VsdC5TdWNjZXNzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkNvdWxkIG5vdCBwYXJzZSB0eXBlIFxcXCJcIiArIHMuVHJpbSgpICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdHlwZV9yZXN1bHQgPSByX3Jlc3VsdC5Hcm91cHNbMV07XHJcbiAgICAgICAgICAgIHZhciBhcnJheV9yZXN1bHQgPSByX3Jlc3VsdC5Hcm91cHNbMl07XHJcbiAgICAgICAgICAgIHZhciBhcnJheV9yZXN1bHQyID0gcl9yZXN1bHQuR3JvdXBzWzNdO1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlfdmFyX3Jlc3VsdCA9IHJfcmVzdWx0Lkdyb3Vwc1s0XTtcclxuICAgICAgICAgICAgdmFyIGFycmF5X21heF92YXJfcmVzdWx0ID0gcl9yZXN1bHQuR3JvdXBzWzVdO1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlfbXVsdGlfcmVzdWx0ID0gcl9yZXN1bHQuR3JvdXBzWzZdO1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlfbXVsdGlfc2luZ2xlX2ZpeGVkX3Jlc3VsdCA9IHJfcmVzdWx0Lkdyb3Vwc1s3XTtcclxuICAgICAgICAgICAgdmFyIGFycmF5X211bHRpX2ZpeGVkX3Jlc3VsdCA9IHJfcmVzdWx0Lkdyb3Vwc1s4XTtcclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lcl9yZXN1bHQgPSByX3Jlc3VsdC5Hcm91cHNbOV07XHJcbiAgICAgICAgICAgIHZhciBuYW1lX3Jlc3VsdCA9IHJfcmVzdWx0Lkdyb3Vwc1sxMF07XHJcblxyXG4gICAgICAgICAgICBOYW1lID0gbmFtZV9yZXN1bHQuU3VjY2VzcyA/IG5hbWVfcmVzdWx0LlZhbHVlIDogXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXJfcmVzdWx0LlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXJfcmVzdWx0LlZhbHVlID09IFwibGlzdFwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbnRhaW5lclR5cGUgPSBEYXRhVHlwZXNfQ29udGFpbmVyVHlwZXMubGlzdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5lcl9yZXN1bHQuVmFsdWUgPT0gXCJpbnQzMlwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbnRhaW5lclR5cGUgPSBEYXRhVHlwZXNfQ29udGFpbmVyVHlwZXMubWFwX2ludDMyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbmVyX3Jlc3VsdC5WYWx1ZSA9PSBcInN0cmluZ1wiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbnRhaW5lclR5cGUgPSBEYXRhVHlwZXNfQ29udGFpbmVyVHlwZXMubWFwX3N0cmluZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5lcl9yZXN1bHQuVmFsdWUgPT0gXCJnZW5lcmF0b3JcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDb250YWluZXJUeXBlID0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLmdlbmVyYXRvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkNvdWxkIG5vdCBwYXJzZSB0eXBlIFxcXCJcIiArIHMuVHJpbSgpICsgXCJcXFwiOiBpbnZhbGlkIGNvbnRhaW5lciB0eXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoYXJyYXlfcmVzdWx0LlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vdmFyaWFibGUgYXJyYXlcclxuICAgICAgICAgICAgICAgIEFycmF5VHlwZSA9IERhdGFUeXBlc19BcnJheVR5cGVzLmFycmF5O1xyXG4gICAgICAgICAgICAgICAgQXJyYXlWYXJMZW5ndGggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQXJyYXlMZW5ndGggPSBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMSk9PntfbzEuQWRkKDApO3JldHVybiBfbzE7fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFycmF5X3Jlc3VsdDIuU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFycmF5X3Zhcl9yZXN1bHQuU3VjY2VzcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0ZpeGVkIGFycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXlUeXBlID0gRGF0YVR5cGVzX0FycmF5VHlwZXMuYXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXlMZW5ndGguQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheUxlbmd0aC5BZGQoKGludClVSW50MzIuUGFyc2UoYXJyYXlfdmFyX3Jlc3VsdC5WYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5VmFyTGVuZ3RoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcnJheV9tYXhfdmFyX3Jlc3VsdC5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdmFyaWFibGUgYXJyYXkgbWF4IHNpemVkXHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXlUeXBlID0gRGF0YVR5cGVzX0FycmF5VHlwZXMuYXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXlMZW5ndGguQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheUxlbmd0aC5BZGQoKGludClVSW50MzIuUGFyc2UoYXJyYXlfbWF4X3Zhcl9yZXN1bHQuVmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheVZhckxlbmd0aCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcnJheV9tdWx0aV9yZXN1bHQuU3VjY2VzcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL211bHRpZGltIGFycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXlUeXBlID0gRGF0YVR5cGVzX0FycmF5VHlwZXMubXVsdGlkaW1hcnJheTtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheVZhckxlbmd0aCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcnJheV9tdWx0aV9zaW5nbGVfZml4ZWRfcmVzdWx0LlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9tdWx0aWRpbSBzaW5nbGUgZml4ZWQgYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICBBcnJheVR5cGUgPSBEYXRhVHlwZXNfQXJyYXlUeXBlcy5tdWx0aWRpbWFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5VmFyTGVuZ3RoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXlMZW5ndGguQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheUxlbmd0aC5BZGQoKGludClVSW50MzIuUGFyc2UoYXJyYXlfbXVsdGlfc2luZ2xlX2ZpeGVkX3Jlc3VsdC5WYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJyYXlfbXVsdGlfZml4ZWRfcmVzdWx0LlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9tdWx0aWRpbSBmaXhlZCBhcnJheVxyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5VHlwZSA9IERhdGFUeXBlc19BcnJheVR5cGVzLm11bHRpZGltYXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXlWYXJMZW5ndGggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGltcyA9IGFycmF5X211bHRpX2ZpeGVkX3Jlc3VsdC5WYWx1ZS5TcGxpdChuZXcgY2hhcltdIHsgJywnIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5TGVuZ3RoLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGQgaW4gZGltcylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheUxlbmd0aC5BZGQoKGludClVSW50MzIuUGFyc2UoZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkNvdWxkIG5vdCBwYXJzZSB0eXBlIFxcXCJcIiArIHMuVHJpbSgpICsgXCJcXFwiOiBhcnJheSBlcnJvclwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGF0YVR5cGVzIHQgPSBEYXRhVHlwZUZyb21TdHJpbmcodHlwZV9yZXN1bHQuVmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAodCA9PSBEYXRhVHlwZXMubmFtZWR0eXBlX3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFR5cGUgPSBEYXRhVHlwZXMubmFtZWR0eXBlX3Q7XHJcbiAgICAgICAgICAgICAgICBUeXBlU3RyaW5nID0gdHlwZV9yZXN1bHQuVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUeXBlID0gdDtcclxuICAgICAgICAgICAgICAgIFR5cGVTdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIERhdGFUeXBlcyBEYXRhVHlwZUZyb21TdHJpbmcoU3RyaW5nIGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZCA9PSBcInZvaWRcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy52b2lkX3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZCA9PSBcImRvdWJsZVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmRvdWJsZV90O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgPT0gXCJzaW5nbGVcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5zaW5nbGVfdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkID09IFwiaW50OFwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmludDhfdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkID09IFwidWludDhcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy51aW50OF90O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgPT0gXCJpbnQxNlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmludDE2X3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZCA9PSBcInVpbnQxNlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnVpbnQxNl90O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgPT0gXCJpbnQzMlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmludDMyX3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZCA9PSBcInVpbnQzMlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnVpbnQzMl90O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgPT0gXCJpbnQ2NFwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmludDY0X3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZCA9PSBcInVpbnQ2NFwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnVpbnQ2NF90O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgPT0gXCJzdHJpbmdcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5zdHJpbmdfdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkID09IFwiY2RvdWJsZVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmNkb3VibGVfdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkID09IFwiY3NpbmdsZVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmNzaW5nbGVfdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkID09IFwiYm9vbFwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmJvb2xfdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkID09IFwic3RydWN0dXJlXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuc3RydWN0dXJlX3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZCA9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLm9iamVjdF90O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgPT0gXCJ2YXJ2YWx1ZVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnZhcnZhbHVlX3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZCA9PSBcInZhcm9iamVjdFwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnZhcm9iamVjdF90O1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5uYW1lZHR5cGVfdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFN0cmluZ0Zyb21EYXRhVHlwZShEYXRhVHlwZXMgZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudm9pZF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInZvaWRcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmRvdWJsZV90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRvdWJsZVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuc2luZ2xlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2luZ2xlXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQ4X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW50OFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDhfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ1aW50OFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50MTZfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpbnQxNlwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDE2X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidWludDE2XCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQzMl90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImludDMyXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MzJfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ1aW50MzJcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDY0X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW50NjRcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnVpbnQ2NF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInVpbnQ2NFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuc3RyaW5nX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5jZG91YmxlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2RvdWJsZVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuY3NpbmdsZV90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNzaW5nbGVcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmJvb2xfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJib29sXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5zdHJ1Y3R1cmVfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdHJ1Y3R1cmVcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLm9iamVjdF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudmFydmFsdWVfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ2YXJ2YWx1ZVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudmFyb2JqZWN0X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidmFyb2JqZWN0XCI7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIkludmFsaWQgZGF0YSB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KFR5cGVEZWZpbml0aW9uIGEsIFR5cGVEZWZpbml0aW9uIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLk9iamVjdC5SZWZlcmVuY2VFcXVhbHMoYSwgYikpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCgob2JqZWN0KWEgPT0gbnVsbCkgfHwgKChvYmplY3QpYiA9PSBudWxsKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGEuTmFtZSAhPSBiLk5hbWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGEuVHlwZVN0cmluZyAhPSBiLlR5cGVTdHJpbmcpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGEuQXJyYXlUeXBlICE9IGIuQXJyYXlUeXBlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChhLkFycmF5VmFyTGVuZ3RoICE9IGIuQXJyYXlWYXJMZW5ndGgpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGEuQXJyYXlMZW5ndGggIT0gYi5BcnJheUxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoYS5Db250YWluZXJUeXBlICE9IGIuQ29udGFpbmVyVHlwZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShUeXBlRGVmaW5pdGlvbiBhLCBUeXBlRGVmaW5pdGlvbiBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICEoYSA9PSBiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMgPT0gKFR5cGVEZWZpbml0aW9uKW87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcnJheVR5cGUgPSBEYXRhVHlwZXNfQXJyYXlUeXBlcy5ub25lO1xyXG4gICAgICAgICAgICBDb250YWluZXJUeXBlID0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmU7XHJcblxyXG4gICAgICAgICAgICBBcnJheVZhckxlbmd0aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBUeXBlID0gRGF0YVR5cGVzLnZvaWRfdDtcclxuICAgICAgICAgICAgQXJyYXlMZW5ndGguQ2xlYXIoKTtcclxuICAgICAgICAgICAgVHlwZVN0cmluZyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb3B5VG8ocmVmIFR5cGVEZWZpbml0aW9uIGRlZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRlZi5OYW1lID0gTmFtZTtcclxuICAgICAgICAgICAgZGVmLlR5cGUgPSBUeXBlO1xyXG4gICAgICAgICAgICBkZWYuVHlwZVN0cmluZyA9IFR5cGVTdHJpbmc7XHJcbiAgICAgICAgICAgIGRlZi5BcnJheVR5cGUgPSBBcnJheVR5cGU7XHJcbiAgICAgICAgICAgIGRlZi5Db250YWluZXJUeXBlID0gQ29udGFpbmVyVHlwZTtcclxuICAgICAgICAgICAgZGVmLkFycmF5TGVuZ3RoID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBcnJheUxlbmd0aCk7XHJcbiAgICAgICAgICAgIGRlZi5BcnJheVZhckxlbmd0aCA9IEFycmF5VmFyTGVuZ3RoO1xyXG4gICAgICAgICAgICBkZWYubWVtYmVyID0gbWVtYmVyO1xyXG4gICAgICAgICAgICBkZWYuUmVzb2x2ZU5hbWVkVHlwZV9jYWNoZSA9IFJlc29sdmVOYW1lZFR5cGVfY2FjaGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHlwZURlZmluaXRpb24gQ2xvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRlZjIgPSBuZXcgVHlwZURlZmluaXRpb24oKTtcclxuICAgICAgICAgICAgQ29weVRvKHJlZiBkZWYyKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlZjI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZW5hbWUoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOYW1lID0gbmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbW92ZUNvbnRhaW5lcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ29udGFpbmVyVHlwZSA9IERhdGFUeXBlc19Db250YWluZXJUeXBlcy5ub25lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVtb3ZlQXJyYXkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKENvbnRhaW5lclR5cGUgIT0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmUpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiUmVtb3ZlIGNvbnRhaW5lcnMgZmlyc3RcIik7XHJcblxyXG4gICAgICAgICAgICBBcnJheVR5cGUgPSBEYXRhVHlwZXNfQXJyYXlUeXBlcy5ub25lO1xyXG4gICAgICAgICAgICBBcnJheUxlbmd0aC5DbGVhcigpO1xyXG4gICAgICAgICAgICBBcnJheVZhckxlbmd0aCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIExpc3Q8VXNpbmdEZWZpbml0aW9uPiBUeXBlRGVmaW5pdGlvbl9HZXRTZXJ2aWNlVXNpbmdEZWZpbml0aW9uKFR5cGVEZWZpbml0aW9uIGRlZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIxID0gZGVmLm1lbWJlcjtcclxuICAgICAgICAgICAgaWYgKG1lbWJlcjEgPT0gbnVsbCkgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJNZW1iZXIgbm90IHNldCBmb3IgVHlwZURlZmluaXRpb25cIik7XHJcbiAgICAgICAgICAgIHZhciBlbnRyeTEgPSBtZW1iZXIxLlNlcnZpY2VFbnRyeTtcclxuICAgICAgICAgICAgaWYgKGVudHJ5MSA9PSBudWxsKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk9iamVjdCBvciBzdHJ1Y3Qgbm90IHNldCBmb3IgTWVtYmVyRGVmaW5pdGlvbiBcIiArIG1lbWJlcjEuTmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlMSA9IGVudHJ5MS5TZXJ2aWNlRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgaWYgKHNlcnZpY2UxID09IG51bGwpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiU2VydmljZURlZmluaXRpb24gb3Igc3RydWN0IG5vdCBzZXQgZm9yIE9iamVjdCBvciBTdHJ1Y3R1cmUgXCIgKyBlbnRyeTEuTmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlMS5Vc2luZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFF1YWxpZnlUeXBlU3RyaW5nV2l0aFVzaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChUeXBlICE9IERhdGFUeXBlcy5uYW1lZHR5cGVfdClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmIChUeXBlU3RyaW5nLkNvbnRhaW5zKFwiLlwiKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8VXNpbmdEZWZpbml0aW9uPiB1c2luZ18gPSBUeXBlRGVmaW5pdGlvbl9HZXRTZXJ2aWNlVXNpbmdEZWZpbml0aW9uKHRoaXMpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdSBpbiB1c2luZ18pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh1LlVucXVhbGlmaWVkTmFtZSA9PSBUeXBlU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFR5cGVTdHJpbmcgPSB1LlF1YWxpZmllZE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBVbnF1YWxpZnlUeXBlU3RyaW5nV2l0aFVzaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChUeXBlICE9IERhdGFUeXBlcy5uYW1lZHR5cGVfdClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmICghVHlwZVN0cmluZy5Db250YWlucyhcIi5cIikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgdXNpbmdfID0gVHlwZURlZmluaXRpb25fR2V0U2VydmljZVVzaW5nRGVmaW5pdGlvbih0aGlzKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHUgaW4gdXNpbmdfKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodS5RdWFsaWZpZWROYW1lID09IFR5cGVTdHJpbmcpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHlwZVN0cmluZyA9IHUuVW5xdWFsaWZpZWROYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE5hbWVkVHlwZURlZmluaXRpb24gUmVzb2x2ZU5hbWVkVHlwZShEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZURlZmluaXRpb24+IGltcG9ydGVkX2RlZnM9bnVsbCwgUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUgPSBudWxsLCBvYmplY3QgY2xpZW50ID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5hbWVkVHlwZURlZmluaXRpb24gbyA9IFJlc29sdmVOYW1lZFR5cGVfY2FjaGU7XHJcbiAgICAgICAgICAgIGlmIChvICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgc3RyaW5nIGVudHJ5X25hbWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIVR5cGVTdHJpbmcuQ29udGFpbnMoXCIuXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeV9uYW1lID0gVHlwZVN0cmluZztcclxuICAgICAgICAgICAgICAgIC8vQXNzdW1lIG5vdCBpbXBvcnRlZFxyXG4gICAgICAgICAgICAgICAgTWVtYmVyRGVmaW5pdGlvbiBtID0gbWVtYmVyO1xyXG4gICAgICAgICAgICAgICAgaWYgKG0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlRW50cnlEZWZpbml0aW9uIGVudHJ5ID0gbS5TZXJ2aWNlRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgPSBlbnRyeS5TZXJ2aWNlRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IFNlcnZpY2VEZWZpbml0aW9uVXRpbC5TcGxpdFF1YWxpZmllZE5hbWUoVHlwZVN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICBzdHJpbmcgZGVmX25hbWUgPSBzLkl0ZW0xO1xyXG4gICAgICAgICAgICAgICAgZW50cnlfbmFtZSA9IHMuSXRlbTI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGltcG9ydGVkX2RlZnMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbXBvcnRlZF9kZWZzLlRyeUdldFZhbHVlKGRlZl9uYW1lLCBvdXQgZGVmKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkZWYgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSA9PSBudWxsKSB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJOb2RlIG5vdCBzcGVjaWZpZWQgZm9yIFJlc29sdmVUeXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpZW50MiA9ICgoU2VydmljZVN0dWIpY2xpZW50KS5SUkNvbnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgPSBjbGllbnQyLkdldFB1bGxlZFNlcnZpY2VUeXBlKGRlZl9uYW1lKS5TZXJ2aWNlRGVmKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pIHsgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVmID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkNvdWxkIG5vdCByZXNvbHZlIG5hbWVkIHR5cGUgXCIgKyBUeXBlU3RyaW5nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2VydmljZUVudHJ5RGVmaW5pdGlvbiBmb3VuZF9zdHJ1Y3Q7XHJcbiAgICAgICAgICAgIGlmIChkZWYuU3RydWN0dXJlcy5UcnlHZXRWYWx1ZShlbnRyeV9uYW1lLCBvdXQgZm91bmRfc3RydWN0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVzb2x2ZU5hbWVkVHlwZV9jYWNoZSA9IGZvdW5kX3N0cnVjdDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZF9zdHJ1Y3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgU2VydmljZUVudHJ5RGVmaW5pdGlvbiBmb3VuZF9wb2Q7XHJcbiAgICAgICAgICAgIGlmIChkZWYuUG9kcy5UcnlHZXRWYWx1ZShlbnRyeV9uYW1lLCBvdXQgZm91bmRfcG9kKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVzb2x2ZU5hbWVkVHlwZV9jYWNoZSA9IGZvdW5kX3BvZDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZF9wb2Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgU2VydmljZUVudHJ5RGVmaW5pdGlvbiBmb3VuZF9uYW1lZGFycmF5O1xyXG4gICAgICAgICAgICBpZiAoZGVmLk5hbWVkQXJyYXlzLlRyeUdldFZhbHVlKGVudHJ5X25hbWUsIG91dCBmb3VuZF9uYW1lZGFycmF5KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVzb2x2ZU5hbWVkVHlwZV9jYWNoZSA9IGZvdW5kX25hbWVkYXJyYXk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmRfbmFtZWRhcnJheTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBTZXJ2aWNlRW50cnlEZWZpbml0aW9uIGZvdW5kX29iamVjdDtcclxuICAgICAgICAgICAgaWYgKGRlZi5PYmplY3RzLlRyeUdldFZhbHVlKGVudHJ5X25hbWUsIG91dCBmb3VuZF9vYmplY3QpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSZXNvbHZlTmFtZWRUeXBlX2NhY2hlID0gZm91bmRfb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kX29iamVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBFbnVtRGVmaW5pdGlvbiBmb3VuZF9lbnVtO1xyXG4gICAgICAgICAgICBpZiAoZGVmLkVudW1zLlRyeUdldFZhbHVlKGVudHJ5X25hbWUsIG91dCBmb3VuZF9lbnVtKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVzb2x2ZU5hbWVkVHlwZV9jYWNoZSA9IGZvdW5kX2VudW07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmRfZW51bTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiQ291bGQgbm90IHJlc29sdmUgbmFtZWQgdHlwZSBcIiArIGRlZi5OYW1lICsgXCIuXCIgKyBlbnRyeV9uYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIFVzaW5nRGVmaW5pdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUXVhbGlmaWVkTmFtZTtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFVucXVhbGlmaWVkTmFtZTtcclxuICAgICAgICBwdWJsaWMgU2VydmljZURlZmluaXRpb24gc2VydmljZTtcclxuXHJcbiAgICAgICAgcHVibGljIFVzaW5nRGVmaW5pdGlvbihTZXJ2aWNlRGVmaW5pdGlvbiBzZXJ2aWNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHMgPSBTZXJ2aWNlRGVmaW5pdGlvblV0aWwuU3BsaXRRdWFsaWZpZWROYW1lKFF1YWxpZmllZE5hbWUpO1xyXG4gICAgICAgICAgICBzdHJpbmcgcXVhbGlmaWVkX25hbWVfdHlwZSA9IHMuSXRlbTI7XHJcbiAgICAgICAgICAgIGlmIChxdWFsaWZpZWRfbmFtZV90eXBlID09IFVucXVhbGlmaWVkTmFtZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXNpbmcgXCIgKyBRdWFsaWZpZWROYW1lICsgXCJcXG5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInVzaW5nIFwiICsgUXVhbGlmaWVkTmFtZSArIFwiIGFzIFwiICsgVW5xdWFsaWZpZWROYW1lICsgXCJcXG5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKnVzaW5nWyBcXFxcdF0rKFwiICsgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5SUl9RVUFMSUZJRURfVFlQRV9SRUdFWCArIFwiKSg/OlsgXFxcXHRdK2FzWyBcXFxcdF0oXCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX05BTUVfUkVHRVggKyAgXCIpKT9bIFxcXFx0XSokXCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJfbWF0Y2ggPSByLk1hdGNoKHMpO1xyXG4gICAgICAgICAgICBpZiAoIXJfbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJGb3JtYXQgZXJyb3IgZm9yIHVzaW5nICBkZWZpbml0aW9uIFxcXCJcIiArIHMgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghcl9tYXRjaC5Hcm91cHNbMl0uU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5RdWFsaWZpZWROYW1lID0gcl9tYXRjaC5Hcm91cHNbMV0uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgczIgPSBTZXJ2aWNlRGVmaW5pdGlvblV0aWwuU3BsaXRRdWFsaWZpZWROYW1lKHJfbWF0Y2guR3JvdXBzWzFdLlZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuVW5xdWFsaWZpZWROYW1lID0gczIuSXRlbTI7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5RdWFsaWZpZWROYW1lID0gcl9tYXRjaC5Hcm91cHNbMV0uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlVucXVhbGlmaWVkTmFtZSA9IHJfbWF0Y2guR3JvdXBzWzJdLlZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBDb25zdGFudERlZmluaXRpb25fU3RydWN0RmllbGRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBDb25zdGFudFJlZk5hbWU7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBDb25zdGFudERlZmluaXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICAgICAgcHVibGljIFR5cGVEZWZpbml0aW9uIFR5cGU7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBWYWx1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcnZpY2VEZWZpbml0aW9uIHNlcnZpY2U7XHJcbiAgICAgICAgcHVibGljIFNlcnZpY2VFbnRyeURlZmluaXRpb24gc2VydmljZV9lbnRyeTtcclxuXHJcbiAgICAgICAgcHVibGljIENvbnN0YW50RGVmaW5pdGlvbihTZXJ2aWNlRGVmaW5pdGlvbiBzZXJ2aWNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb25zdGFudERlZmluaXRpb24oU2VydmljZUVudHJ5RGVmaW5pdGlvbiBzZXJ2aWNlX2VudHJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlX2VudHJ5ID0gc2VydmljZV9lbnRyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiY29uc3RhbnQgXCIgKyBUeXBlLlRvU3RyaW5nKCkgKyBcIiBcIiArIE5hbWUgKyBcIiBcIiArIFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRnJvbVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFJlc2V0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSpjb25zdGFudFsgXFxcXHRdKyhcIiArIGRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuUlJfVFlQRTJfUkVHRVggKyBcIilbIFxcXFx0XSsoXCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX05BTUVfUkVHRVggKyBcIilbIFxcXFx0XSsoW15cXFxcc10oPzpbIC1+XFxcXHRdKlteXFxcXHNdKT8pWyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgdmFyIHJfbWF0Y2ggPSByLk1hdGNoKHMpO1xyXG4gICAgICAgICAgICBpZiAoIXJfbWF0Y2guU3VjY2VzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJJbnZhbGlkIGNvbnN0YW50IGRlZmluaXRpb246IFwiICsgcy5UcmltKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdHlwZV9zdHIgPSByX21hdGNoLkdyb3Vwc1sxXS5WYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGRlZiA9IG5ldyBUeXBlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgICAgICBkZWYuRnJvbVN0cmluZyh0eXBlX3N0cik7XHJcbiAgICAgICAgICAgIGlmICghVmVyaWZ5VHlwZUFuZFZhbHVlKGRlZiwgcl9tYXRjaC5Hcm91cHNbM10uVmFsdWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkludmFsaWQgY29uc3RhbnQgZGVmaW5pdGlvbjogXCIgKyBzLlRyaW0oKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFR5cGUgPSBkZWY7XHJcbiAgICAgICAgICAgIE5hbWUgPSByX21hdGNoLkdyb3Vwc1syXS5WYWx1ZTtcclxuICAgICAgICAgICAgVmFsdWUgPSByX21hdGNoLkdyb3Vwc1szXS5WYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIENvbnN0YW50RGVmaW5pdGlvbl9DaGVja1NjYWxhcihEYXRhVHlwZXMgdCwgc3RyaW5nIHZhbClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmRvdWJsZV90OlxyXG4gICAgICAgICAgICAgICAgICAgIGRvdWJsZSByZXMxO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEb3VibGUuVHJ5UGFyc2UodmFsLCBvdXQgcmVzMSk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5zaW5nbGVfdDpcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCByZXMyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTaW5nbGUuVHJ5UGFyc2UodmFsLCBvdXQgcmVzMik7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQ4X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgc2J5dGUgcmVzMztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU0J5dGUuVHJ5UGFyc2UodmFsLCBvdXQgcmVzMyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50OF90OlxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGUgcmVzNDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQnl0ZS5UcnlQYXJzZSh2YWwsIG91dCByZXM0KTtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDE2X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvcnQgcmVzNTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSW50MTYuVHJ5UGFyc2UodmFsLCBvdXQgcmVzNSk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MTZfdDpcclxuICAgICAgICAgICAgICAgICAgICB1c2hvcnQgcmVzNjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVUludDE2LlRyeVBhcnNlKHZhbCwgb3V0IHJlczYpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50MzJfdDpcclxuICAgICAgICAgICAgICAgICAgICBpbnQgcmVzNztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSW50MzIuVHJ5UGFyc2UodmFsLCBvdXQgcmVzNyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MzJfdDpcclxuICAgICAgICAgICAgICAgICAgICB1aW50IHJlczg7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVJbnQzMi5UcnlQYXJzZSh2YWwsIG91dCByZXM4KTtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDY0X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZyByZXM5O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJbnQ2NC5UcnlQYXJzZSh2YWwsIG91dCByZXM5KTtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnVpbnQ2NF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHVsb25nIHJlczEwO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBVSW50NjQuVHJ5UGFyc2UodmFsLCBvdXQgcmVzMTApO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFZlcmlmeVZhbHVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBWZXJpZnlUeXBlQW5kVmFsdWUoVHlwZSwgVmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgVmVyaWZ5VHlwZUFuZFZhbHVlKFR5cGVEZWZpbml0aW9uIHQsIHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0LkFycmF5VHlwZSA9PSBEYXRhVHlwZXNfQXJyYXlUeXBlcy5tdWx0aWRpbWFycmF5KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChEYXRhVHlwZVV0aWwuSXNOdW1iZXIodC5UeXBlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHQuVHlwZSA9PSBEYXRhVHlwZXMuY2RvdWJsZV90IHx8IHQuVHlwZSA9PSBEYXRhVHlwZXMuY3NpbmdsZV90IHx8IHQuVHlwZSA9PSBEYXRhVHlwZXMuYm9vbF90KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0LkNvbnRhaW5lclR5cGUgIT0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0LkFycmF5VHlwZSA9PSBEYXRhVHlwZXNfQXJyYXlUeXBlcy5ub25lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0LlR5cGUgPT0gRGF0YVR5cGVzLmRvdWJsZV90IHx8IHQuVHlwZSA9PSBEYXRhVHlwZXMuc2luZ2xlX3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcl9zY2FsYXIgPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qXCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX0ZMT0FUX1JFR0VYICsgXCJbIFxcXFx0XSokXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJfc2NhbGFyLklzTWF0Y2godmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcl9zY2FsYXIgPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qXCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX0lOVF9SRUdFWCArIFwiWyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyX3NjYWxhci5Jc01hdGNoKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnN0YW50RGVmaW5pdGlvbl9DaGVja1NjYWxhcih0LlR5cGUsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBNYXRjaCByX2FycmF5X21hdGNoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0LlR5cGUgPT0gRGF0YVR5cGVzLmRvdWJsZV90IHx8IHQuVHlwZSA9PSBEYXRhVHlwZXMuc2luZ2xlX3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcl9hcnJheSA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSpcXFxce1sgXFxcXHRdKigoPzpcIiArIGRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuUlJfRkxPQVRfUkVHRVggKyBcIikoPzpbIFxcXFx0XSosWyBcXFxcdF0qKD86XCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX0ZMT0FUX1JFR0VYICsgXCIpKSopP1sgXFxcXHRdKn1bIFxcXFx0XSokXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByX2FycmF5X21hdGNoID0gcl9hcnJheS5NYXRjaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcl9hcnJheV9tYXRjaC5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcl9hcnJheSA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSpcXFxce1sgXFxcXHRdKigoPzpcIiArIGRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuUlJfSU5UX1JFR0VYICsgXCIpKD86WyBcXFxcdF0qLFsgXFxcXHRdKig/OlwiICsgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5SUl9JTlRfUkVHRVggKyBcIikpKik/WyBcXFxcdF0qfVsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJfYXJyYXlfbWF0Y2ggPSByX2FycmF5Lk1hdGNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyX2FycmF5X21hdGNoLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJfYXJyYXlfbWF0Y2guR3JvdXBzWzFdLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIHJfYXJyYXlfbWF0Y2guR3JvdXBzWzFdLlZhbHVlLlNwbGl0KG5ldyBjaGFyW10geyAnLCcgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUNvbnN0YW50RGVmaW5pdGlvbl9DaGVja1NjYWxhcih0LlR5cGUsIGUuVHJpbSgpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHQuQXJyYXlUeXBlICE9IERhdGFUeXBlc19BcnJheVR5cGVzLm5vbmUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0LlR5cGUgPT0gRGF0YVR5cGVzLnN0cmluZ190KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByX3N0cmluZyA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSpcXFwiKD86KD86XFxcXFxcXFxcXFwifFxcXFxcXFxcXFxcXFxcXFx8XFxcXFxcXFwvfFxcXFxcXFxcYnxcXFxcXFxcXGZ8XFxcXFxcXFxufFxcXFxcXFxccnxcXFxcXFxcXHR8XFxcXFxcXFx1W1xcXFxkYS1mQS1GXXs0fSl8W15cXFwiXFxcXFxcXFxdKSpcXFwiWyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJfc3RyaW5nLklzTWF0Y2godmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0LlR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkdHlwZV90KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByX3N0cnVjdCA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSpcXFxce1sgXFxcXHRdKig/OlwiICsgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5SUl9OQU1FX1JFR0VYICsgXCJbIFxcXFx0XSpcXFxcOlsgXFxcXHRdKlwiICsgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5SUl9OQU1FX1JFR0VYICsgXCIoPzpbIFxcXFx0XSosWyBcXFxcdF0qXCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX05BTUVfUkVHRVggKyBcIlsgXFxcXHRdKlxcXFw6WyBcXFxcdF0qXCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX05BTUVfUkVHRVggKyBcIikqWyBcXFxcdF0qKT9cXFxcfVsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyX3N0cnVjdC5Jc01hdGNoKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgVHlwZSA9IG51bGw7XHJcbiAgICAgICAgICAgIFZhbHVlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBUIFZhbHVlVG9TY2FsYXI8VD4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChUKUNvbnZlcnQuQ2hhbmdlVHlwZShWYWx1ZS5UcmltKCksIHR5cGVvZihUKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgVFtdIFZhbHVlVG9BcnJheTxUPigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgdmFsdWUxID0gVmFsdWUuVHJpbSgnICcsICdcXHQnLCAneycsICd9JykuVHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUxLkxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUWzBdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxUPih2YWx1ZTEuU3BsaXQoJywnKSwoRnVuYzxzdHJpbmcsVD4pKHg9PiAoVClDb252ZXJ0LkNoYW5nZVR5cGUoeC5UcmltKCksIHR5cGVvZihUKSkpKS5Ub0FycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFZhbHVlVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFR5cGUgPT0gbnVsbCkgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIG9wZXJhdGlvblwiKTtcclxuICAgICAgICAgICAgaWYgKFR5cGUuVHlwZSAhPSBEYXRhVHlwZXMuc3RyaW5nX3QpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBvcGVyYXRpb25cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgcl9zdHJpbmcgPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qXFxcIigoPzooPzpcXFxcXFxcXFxcXCJ8XFxcXFxcXFxcXFxcXFxcXHxcXFxcXFxcXC98XFxcXFxcXFxifFxcXFxcXFxcZnxcXFxcXFxcXG58XFxcXFxcXFxyfFxcXFxcXFxcdHxcXFxcXFxcXHVbXFxcXGRhLWZBLUZdezR9KXwoPzooPyFbXFxcIlxcXFxcXFxcXSlbIC1+XSkpKilcXFwiWyBcXFxcdF0qJFwiKTtcclxuICAgICAgICAgICAgdmFyIHJfc3RyaW5nX21hdGNoID0gcl9zdHJpbmcuTWF0Y2goVmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoIXJfc3RyaW5nX21hdGNoLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkludmFsaWQgc3RyaW5nIGNvbnN0YW50IGZvcm1hdFwiKTtcclxuXHJcbiAgICAgICAgICAgIHN0cmluZyB2YWx1ZTIgPSByX3N0cmluZ19tYXRjaC5Hcm91cHNbMV0uVmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBVbmVzY2FwZVN0cmluZyh2YWx1ZTIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBDb25zdGFudERlZmluaXRpb25fVW5lc2NhcGVTdHJpbmdfRm9ybWF0dGVyKE1hdGNoIG1hdGNoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIGkgPSBtYXRjaC5Hcm91cHNbMF0uVmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChpID09IFwiXFxcXFxcXCJcIikgcmV0dXJuIFwiXFxcIlwiO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSBcIlxcXFxcXFxcXCIpIHJldHVybiBcIlxcXFxcIjtcclxuICAgICAgICAgICAgaWYgKGkgPT0gXCJcXFxcL1wiKSByZXR1cm4gXCIvXCI7XHJcbiAgICAgICAgICAgIGlmIChpID09IFwiXFxcXGJcIikgcmV0dXJuIFwiXFxiXCI7XHJcbiAgICAgICAgICAgIGlmIChpID09IFwiXFxcXGZcIikgcmV0dXJuIFwiXFxmXCI7XHJcbiAgICAgICAgICAgIGlmIChpID09IFwiXFxcXG5cIikgcmV0dXJuIFwiXFxuXCI7XHJcbiAgICAgICAgICAgIGlmIChpID09IFwiXFxcXHJcIikgcmV0dXJuIFwiXFxyXCI7XHJcbiAgICAgICAgICAgIGlmIChpID09IFwiXFxcXHRcIikgcmV0dXJuIFwiXFx0XCI7XHJcblxyXG4gICAgICAgICAgICBpZiAoaS5TdGFydHNXaXRoKFwiXFxcXHVcIikpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdjMgPSBuZXcgYnl0ZVtpLkxlbmd0aCAvIDNdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCB2My5MZW5ndGggLyAyOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHYgPSBpLlN1YnN0cmluZyhqICogNiArIDIsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyB2MiA9IGkuU3Vic3RyaW5nKGogKiA2ICsgNCwgMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHYzW2ogKiAyXSA9IENvbnZlcnQuVG9CeXRlKHYsIDE2KTtcclxuICAgICAgICAgICAgICAgICAgICB2M1tqICogMiArIDFdID0gQ29udmVydC5Ub0J5dGUodjIsIDE2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBVbmljb2RlRW5jb2RpbmcuVW5pY29kZS5HZXRTdHJpbmcodjMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFcnJvckV4Y2VwdGlvbihcIkludGVybmFsIGVycm9yXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVW5lc2NhcGVTdHJpbmcoc3RyaW5nIGluXylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByX3N0cmluZ19leHByZXNzaW9uID0gbmV3IFJlZ2V4KFwiKFxcXFxcXFxcXFxcInxcXFxcXFxcXFxcXFxcXFxcfFxcXFxcXFxcL3xcXFxcXFxcXGJ8XFxcXFxcXFxmfFxcXFxcXFxcbnxcXFxcXFxcXHJ8XFxcXFxcXFx0fCg/OlxcXFxcXFxcdVtcXFxcZGEtZkEtRl17NH0pKylcIik7XHJcbiAgICAgICAgICAgIHJldHVybiByX3N0cmluZ19leHByZXNzaW9uLlJlcGxhY2UoaW5fLCAoTWF0Y2hFdmFsdWF0b3IpQ29uc3RhbnREZWZpbml0aW9uX1VuZXNjYXBlU3RyaW5nX0Zvcm1hdHRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgc3RyaW5nIENvbnN0YW50RGVmaW5pdGlvbl9Fc2NhcGVTdHJpbmdfRm9ybWF0dGVyKE1hdGNoIG1hdGNoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIGkgPSBtYXRjaC5Hcm91cHNbMF0uVmFsdWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoaSA9PSBcIlxcXCJcIikgcmV0dXJuIFwiXFxcXFxcXCJcIjtcclxuICAgICAgICAgICAgaWYgKGkgPT0gXCJcXFxcXCIpIHJldHVybiBcIlxcXFxcXFxcXCI7XHJcbiAgICAgICAgICAgIGlmIChpID09IFwiL1wiKSByZXR1cm4gXCJcXFxcL1wiO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSBcIlxcYlwiKSByZXR1cm4gXCJcXFxcYlwiO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSBcIlxcZlwiKSByZXR1cm4gXCJcXFxcZlwiO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSBcIlxcblwiKSByZXR1cm4gXCJcXFxcblwiO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSBcIlxcclwiKSByZXR1cm4gXCJcXFxcclwiO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSBcIlxcdFwiKSByZXR1cm4gXCJcXFxcdFwiO1xyXG5cclxuICAgICAgICAgICAgdmFyIHYgPSBVbmljb2RlRW5jb2RpbmcuVW5pY29kZS5HZXRCeXRlcyhpKTtcclxuICAgICAgICAgICAgdmFyIHYyID0gbmV3IFN0cmluZ1dyaXRlcigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IHYuTGVuZ3RoOyBqICs9IDIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHYyLldyaXRlKFwiXFxcXHV7MDpYMDJ9ezE6WDAyfVwiLCB2W2pdLCB2W2ogKyAxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHYyLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBFc2NhcGVTdHJpbmcoc3RyaW5nIGluXylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByX3JlcGxhY2UgPSBuZXcgUmVnZXgoXCIoXFxcInxcXFxcXFxcXHxcXFxcL3xbXFxcXHgwMC1cXFxceDFGXXxcXFxceDdGfFtcXFxceDgwLVxcXFx4RkZdKylcIik7XHJcbiAgICAgICAgICAgIHJldHVybiByX3JlcGxhY2UuUmVwbGFjZShpbl8sIChNYXRjaEV2YWx1YXRvcilDb25zdGFudERlZmluaXRpb25fRXNjYXBlU3RyaW5nX0Zvcm1hdHRlcik7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxDb25zdGFudERlZmluaXRpb25fU3RydWN0RmllbGQ+IFZhbHVlVG9TdHJ1Y3RGaWVsZHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG8gPSBuZXcgTGlzdDxDb25zdGFudERlZmluaXRpb25fU3RydWN0RmllbGQ+KCk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZTEgPSBWYWx1ZS5UcmltKG5ldyBjaGFyW10geyAnICcsICdcXHQnLCAneycsICd9JyB9KS5UcmltKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZTEuTGVuZ3RoID09IDApIHJldHVybiBvO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgUmVnZXgoXCJbIFxcXFx0XSooXCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX05BTUVfUkVHRVggKyBcIilbIFxcXFx0XSpcXFxcOlsgXFxcXHRdKihcIiArIGRldGFpbC5TZXJ2aWNlRGVmaW5pdGlvblV0aWwuUlJfTkFNRV9SRUdFWCArIFwiKVsgXFxcXHRdKlwiKTtcclxuICAgICAgICAgICAgdmFyIHMgPSB2YWx1ZTEuU3BsaXQobmV3IGNoYXJbXSB7ICcsJyB9KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJfbWF0Y2ggPSByLk1hdGNoKGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyX21hdGNoLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJJbnZhbGlkIHN0cnVjdCBjb25zdGFudCBmb3JtYXRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IG5ldyBDb25zdGFudERlZmluaXRpb25fU3RydWN0RmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGYuTmFtZSA9IHJfbWF0Y2guR3JvdXBzWzFdLlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZi5Db25zdGFudFJlZk5hbWUgPSByX21hdGNoLkdyb3Vwc1syXS5WYWx1ZTtcclxuICAgICAgICAgICAgICAgIG8uQWRkKGYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBFbnVtRGVmaW5pdGlvbiA6IE5hbWVkVHlwZURlZmluaXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxFbnVtRGVmaW5pdGlvblZhbHVlPiBWYWx1ZXMgPSBuZXcgTGlzdDxFbnVtRGVmaW5pdGlvblZhbHVlPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VydmljZURlZmluaXRpb24gc2VydmljZTtcclxucHVibGljIG92ZXJyaWRlIERhdGFUeXBlcyBSUkRhdGFUeXBlXHJcbntcclxuICAgIGdldFxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBEYXRhVHlwZXMuZW51bV90O1xyXG4gICAgfVxyXG59XHJcbiAgICAgICAgcHVibGljIEVudW1EZWZpbml0aW9uKFNlcnZpY2VEZWZpbml0aW9uIHNlcnZpY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIVZlcmlmeVZhbHVlcygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIGVudW06IFwiICsgTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBzID0gXCJlbnVtIFwiICsgTmFtZSArIFwiXFxuXCI7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gVmFsdWVzKVxyXG5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuSW1wbGljaXRWYWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuQWRkKFwiICAgIFwiICsgZS5OYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWUuSGV4VmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuQWRkKFwiICAgIFwiICsgZS5OYW1lICsgXCIgPSBcIiArIGUuVmFsdWUuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5BZGQoXCIgICAgXCIgKyBlLk5hbWUgKyBcIiA9IDB4XCIgKyBlLlZhbHVlLlRvU3RyaW5nKFwieFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHMgKz0gU3RyaW5nLkpvaW4oXCIsXFxuXCIsIHZhbHVlcyk7XHJcbiAgICAgICAgICAgIHMgKz0gXCJcXG5lbmQgZW51bVxcblwiO1xyXG4gICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZyb21TdHJpbmcoc3RyaW5nIHMsIHVpbnQgc3RhcnRsaW5lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVzZXQoKTtcclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBzMiA9IHMuVHJpbSgpO1xyXG4gICAgICAgICAgICB2YXIgbGluZXMgPSBzMi5TcGxpdChuZXcgY2hhcltdIHsgJ1xcbicsICdcXHInIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5SZW1vdmVFbXB0eUVudHJpZXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxpbmVzLkxlbmd0aCA8IDIpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkludmFsaWQgZW51bVwiLCAoaW50KXN0YXJ0bGluZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcl9zdGFydCA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSplbnVtWyBcXFxcdF0rKFthLXpBLVpdXFxcXHcqKVsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgIHZhciByX2VuZCA9IG5ldyBSZWdleChcIl5bIFxcXFx0XSplbmQoPzpbIFxcXFx0XStlbnVtKT9bIFxcXFx0XSokXCIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciByX3N0YXJ0X21hdGNoID0gcl9zdGFydC5NYXRjaChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PHN0cmluZz4obGluZXMpKTtcclxuICAgICAgICAgICAgaWYgKCFyX3N0YXJ0X21hdGNoLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiUGFyc2UgZXJyb3IgbmVhcjogXCIgKyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PHN0cmluZz4obGluZXMpLCAoaW50KXN0YXJ0bGluZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgTmFtZSA9IHJfc3RhcnRfbWF0Y2guR3JvdXBzWzFdLlZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyX2VuZC5Jc01hdGNoKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxzdHJpbmc+KGxpbmVzKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiUGFyc2UgZXJyb3IgbmVhcjogXCIgKyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8c3RyaW5nPihsaW5lcyksIChpbnQpKHN0YXJ0bGluZSArIGxpbmVzLkxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlczEgPSBTdHJpbmcuSm9pbihcIiBcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPHN0cmluZz4obGluZXMsMSkuVGFrZShsaW5lcy5MZW5ndGggLSAyKSk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMyID0gdmFsdWVzMS5TcGxpdChuZXcgY2hhcltdIHsgJywnIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJfdmFsdWUgPSBuZXcgUmVnZXgoXCJeWyBcXFxcdF0qKFtBLVphLXpdXFxcXHcqKSg/OlsgXFxcXHRdKj1bIFxcXFx0XSooPzooMHhcXFxcZCspfCgtP1xcXFxkKykpKT9bIFxcXFx0XSokXCIpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzMyA9IG5ldyBMaXN0PEVudW1EZWZpbml0aW9uVmFsdWU+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyBsIGluIHZhbHVlczIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByX3ZhbHVlX21hdGNoID0gcl92YWx1ZS5NYXRjaChsKTtcclxuICAgICAgICAgICAgICAgIGlmICghcl92YWx1ZV9tYXRjaC5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiRW51bSB2YWx1ZSBwYXJzZSBlcnJvciBuZWFyOiBcIiArIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8c3RyaW5nPihsaW5lcyksIChpbnQpKHN0YXJ0bGluZSArIGxpbmVzLkxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZW51bV9pID0gbmV3IEVudW1EZWZpbml0aW9uVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIGVudW1faS5OYW1lID0gcl92YWx1ZV9tYXRjaC5Hcm91cHNbMV0uVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJfdmFsdWVfbWF0Y2guR3JvdXBzWzJdLlN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW51bV9pLkltcGxpY2l0VmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBlbnVtX2kuVmFsdWUgPSBDb252ZXJ0LlRvSW50MzIoUmVnZXguTWF0Y2gocl92YWx1ZV9tYXRjaC5Hcm91cHNbMl0uVmFsdWUsXCIweChbMC05YS1mQS1GXSspXCIpLkdyb3Vwc1sxXS5WYWx1ZSwgMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudW1faS5IZXhWYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyX3ZhbHVlX21hdGNoLkdyb3Vwc1szXS5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVudW1faS5JbXBsaWNpdFZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZW51bV9pLlZhbHVlID0gSW50MzIuUGFyc2Uocl92YWx1ZV9tYXRjaC5Hcm91cHNbM10uVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudW1faS5IZXhWYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChWYWx1ZXMuQ291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKFwiRW51bSBmaXJzdCB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZDogXCIgKyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PHN0cmluZz4obGluZXMpLCAoaW50KShzdGFydGxpbmUgKyBsaW5lcy5MZW5ndGggLSAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnVtX2kuSW1wbGljaXRWYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZW51bV9pLlZhbHVlID0gKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxFbnVtRGVmaW5pdGlvblZhbHVlPih2YWx1ZXMzKSkuVmFsdWUgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudW1faS5IZXhWYWx1ZSA9IChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8RW51bURlZmluaXRpb25WYWx1ZT4odmFsdWVzMykpLkhleFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhbHVlczMuQWRkKGVudW1faSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFZhbHVlcyA9IHZhbHVlczM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIVZlcmlmeVZhbHVlcygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkVudW0gbmFtZXMgb3IgdmFsdWVzIG5vdCB1bmlxdWU6IFwiICsgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxzdHJpbmc+KGxpbmVzKSwgKGludCkoc3RhcnRsaW5lKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFZlcmlmeVZhbHVlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoVmFsdWVzLkNvdW50ID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaT0wOyBpPFZhbHVlcy5Db3VudC0xOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gVmFsdWVzW2ldOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpKzE7IGo8VmFsdWVzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGUyID0gVmFsdWVzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLlZhbHVlID09IGUyLlZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuTmFtZSA9PSBlMi5OYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWYWx1ZXMuQ2xlYXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgUmVzb2x2ZVF1YWxpZmllZE5hbWUoKVxyXG4gICAgICAgIHsgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuTmFtZSArIFwiLlwiICsgTmFtZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEVudW1EZWZpbml0aW9uVmFsdWVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICAgICAgcHVibGljIGludCBWYWx1ZTtcclxuICAgICAgICBwdWJsaWMgYm9vbCBJbXBsaWNpdFZhbHVlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIEhleFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uIDogRXhjZXB0aW9uXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTGluZU51bWJlcjtcclxuXHJcbiAgICAgICAgcHVibGljIFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oc3RyaW5nIGUpXHJcbiAgICAgICAgICAgIDogYmFzZShlKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBSb2JvdFJhY29udGV1clBhcnNlRXhjZXB0aW9uKHN0cmluZyBlLCBpbnQgbGluZSlcclxuICAgICAgICAgICAgOiBiYXNlKGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaW5lTnVtYmVyID0gbGluZTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlJvYm90UmFjb250ZXVyIFBhcnNlIEVycm9yIE9uIExpbmUgXCIgKyBMaW5lTnVtYmVyICsgXCI6IFwiICsgTWVzc2FnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgU2VydmljZURlZmluaXRpb25VdGlsXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUdXBsZTxzdHJpbmcsIHN0cmluZz4gU3BsaXRRdWFsaWZpZWROYW1lKHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHBvcyA9IG5hbWUuTGFzdEluZGV4T2YoJy4nKTtcclxuICAgICAgICAgICAgaWYgKHBvcyA8IDApIHJldHVybiBUdXBsZS5DcmVhdGU8c3RyaW5nLHN0cmluZz4oKHN0cmluZyludWxsLCBuYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIFR1cGxlLkNyZWF0ZTxzdHJpbmcsc3RyaW5nPihuYW1lLlN1YnN0cmluZygwLCBwb3MpLCBuYW1lLlN1YnN0cmluZyhwb3MgKyAxLCBuYW1lLkxlbmd0aCAtIHBvcyAtIDEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBzdHJpbmdbXSBTcGxpdFBhcmFtZXRlclN0cmluZyhzdHJpbmcgc3RyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxzdHJpbmc+IG8gPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgICAgICBib29sIGluYnJhY2tldCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpbnQgcG9zID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHIuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghaW5icmFja2V0ICYmIHN0cltpXSA9PSAnWycpIGluYnJhY2tldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5icmFja2V0ICYmIHN0cltpXSA9PSAnXScpIGluYnJhY2tldCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghaW5icmFja2V0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJbaV0gPT0gJywnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5BZGQoc3RyLlN1YnN0cmluZyhwb3MsIGkgLSBwb3MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gaSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPiBzdHIuTGVuZ3RoKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwb3MgPCBzdHIuTGVuZ3RoKSBvLkFkZChzdHIuU3Vic3RyaW5nKHBvcykpO1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLHN0cmluZz4obywoRnVuYzxzdHJpbmcsc3RyaW5nPikoeCA9PiB4LlRyaW0oKSkpLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFZlcmlmeVZlcnNpb25TdXBwb3J0KFNlcnZpY2VEZWZpbml0aW9uIGRlZiwgdWludCBtYWpvciwgdWludCBtaW5vciwgc3RyaW5nIG1zZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkZWZfdmVyc2lvbiA9IGRlZi5TdGRWZXI7XHJcbiAgICAgICAgICAgIGlmIChkZWZfdmVyc2lvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRlZl92ZXJzaW9uIDwgbmV3IFJvYm90UmFjb250ZXVyVmVyc2lvbihtYWpvciwgbWlub3IpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobXNnICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiTmV3ZXIgc2VydmljZSBkZWZpbml0aW9uIHN0YW5kYXJkIHJlcXVpcmVkIGZvciBmZWF0dXJlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBWZXJpZnlOYW1lKHN0cmluZyBuYW1lLCBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYsIGJvb2wgYWxsb3dkb3QgPSBmYWxzZSwgYm9vbCBpZ25vcmVyZXNlcnZlZCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFN0cmluZy5Jc051bGxPckVtcHR5KG5hbWUpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJFbXB0eSBuYW1lIGluIHNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBuYW1lMiA9IG5hbWUuVG9Mb3dlcigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpZ25vcmVyZXNlcnZlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJ0aGlzXCIgfHwgbmFtZSA9PSBcInNlbGZcIiB8fCBuYW1lID09IFwiTWVcIikgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiVGhlIG5hbWVzIFxcXCJ0aGlzXFxcIiwgXFxcInNlbGZcXFwiLCBhbmQgXFxcIk1lXFxcIiBhcmUgcmVzZXJ2ZWQsIGVycm9yIGluIHNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzZXJ2ZWQgPSBuZXcgU3RyaW5nW10geyBcIm9iamVjdFwiLCBcImVuZFwiLCBcIm9wdGlvblwiLCBcInNlcnZpY2VcIiwgXCJvYmplY3RcIiwgXCJzdHJ1Y3RcIiwgXCJpbXBvcnRcIiwgXCJpbXBsZW1lbnRzXCIsIFwiZmllbGRcIiwgXCJwcm9wZXJ0eVwiLCBcImZ1bmN0aW9uXCIsIFwiZXZlbnRcIiwgXCJvYmpyZWZcIiwgXCJwaXBlXCIsIFwiY2FsbGJhY2tcIiwgXCJ3aXJlXCIsIFwibWVtb3J5XCIsIFwidm9pZFwiLCBcImludDhcIiwgXCJ1aW50OFwiLCBcImludDE2XCIsIFwidWludDE2XCIsIFwiaW50MzJcIiwgXCJ1aW50MzJcIiwgXCJpbnQ2NFwiLCBcInVpbnQ2NFwiLCBcInNpbmdsZVwiLCBcImRvdWJsZVwiLCBcInZhcnZhbHVlXCIsIFwidmFyb2JqZWN0XCIsIFwiZXhjZXB0aW9uXCIsIFwidXNpbmdcIiwgXCJjb25zdGFudFwiLCBcImVudW1cIiwgXCJwb2RcIiwgXCJuYW1lZGFycmF5XCIsIFwiY2RvdWJsZVwiLCBcImNzaW5nbGVcIiwgXCJib29sXCIgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkFycmF5RXh0ZW5zaW9ucy5Db250YWluczxzdHJpbmc+KHJlc2VydmVkLG5hbWUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk5hbWUgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBpcyByZXNlcnZlZCBpbiBzZXJ2aWNlIGRlZmluaXRpb25cXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZTIuU3RhcnRzV2l0aChcImdldF9cIikgfHwgbmFtZTIuU3RhcnRzV2l0aChcInNldF9cIikgfHwgbmFtZTIuU3RhcnRzV2l0aChcInJyXCIpIHx8IG5hbWUyLlN0YXJ0c1dpdGgoXCJyb2JvdHJhY29udGV1clwiKSB8fCBuYW1lMi5TdGFydHNXaXRoKFwiYXN5bmNfXCIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk5hbWUgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBpcyBpbnZhbGlkIGluIHNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFsbG93ZG90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVJlZ2V4LklzTWF0Y2gobmFtZSwgXCJeXCIgKyBkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX1RZUEVfUkVHRVggKyBcIiRcIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiTmFtZSBcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIGludmFsaWQgaW4gc2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFSZWdleC5Jc01hdGNoKG5hbWUsIFwiXlwiICsgZGV0YWlsLlNlcnZpY2VEZWZpbml0aW9uVXRpbC5SUl9OQU1FX1JFR0VYICsgXCIkXCIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk5hbWUgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBpcyBpbnZhbGlkIGluIHNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHN0cmluZyBWZXJpZnlDb25zdGFudChzdHJpbmcgY29uc3RhbnQsIFNlcnZpY2VEZWZpbml0aW9uIGRlZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjID0gbmV3IENvbnN0YW50RGVmaW5pdGlvbihkZWYpO1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYy5Gcm9tU3RyaW5nKGNvbnN0YW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJFcnJvciBpbiBjb25zdGFudCBpbiBzZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghYy5WZXJpZnlWYWx1ZSgpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJFcnJvciBpbiBjb25zdGFudCBcIiArIGMuTmFtZSArIFwiIGluIHNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjLlR5cGUuVHlwZSA9PSBEYXRhVHlwZXMubmFtZWR0eXBlX3QpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkVycm9yIGluIGNvbnN0YW50IFwiICsgYy5OYW1lICsgXCIgaW4gc2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgVmVyaWZ5TmFtZShjLk5hbWUsIGRlZik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYy5OYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgVmVyaWZ5Q29uc3RhbnRTdHJ1Y3QoQ29uc3RhbnREZWZpbml0aW9uIGMsIFNlcnZpY2VEZWZpbml0aW9uIGRlZiwgRGljdGlvbmFyeTxzdHJpbmcsIENvbnN0YW50RGVmaW5pdGlvbj4gY29uc3RhbnRzLCBMaXN0PHN0cmluZz4gcGFyZW50X3R5cGVzKVxyXG4gICAgICAgIHtcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgZmllbGRzID0gYy5WYWx1ZVRvU3RydWN0RmllbGRzKCk7XHJcbiAgICAgICAgICAgIHBhcmVudF90eXBlcy5BZGQoYy5OYW1lKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZmllbGRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWZXJpZnlOYW1lKGUuTmFtZSwgZGVmKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuYW1lIGluIHBhcmVudF90eXBlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5Db25zdGFudFJlZk5hbWUgPT0gbmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiRXJyb3IgaW4gY29uc3RhbnQgXCIgKyBjLk5hbWUgKyBcIiBpbiBzZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCI6IHJlY3Vyc2l2ZSBzdHJ1Y3Qgbm90IGFsbG93ZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBib29sIGZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZiBpbiBjb25zdGFudHMuVmFsdWVzKVxyXG5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZi5OYW1lID09IGUuQ29uc3RhbnRSZWZOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5UeXBlLlR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkdHlwZV90KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZXJpZnlDb25zdGFudFN0cnVjdChmLCBkZWYsIGNvbnN0YW50cywgcGFyZW50X3R5cGVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiRXJyb3IgaW4gY29uc3RhbnQgXCIgKyBjLk5hbWUgKyBcIiBpbiBzZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCI6IHN0cnVjdCBmaWVsZCBcIiArIGUuQ29uc3RhbnRSZWZOYW1lICsgXCIgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgc3RyaW5nIFZlcmlmeUNvbnN0YW50KENvbnN0YW50RGVmaW5pdGlvbiBjLCBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYsIERpY3Rpb25hcnk8c3RyaW5nLCBDb25zdGFudERlZmluaXRpb24+IGNvbnN0YW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghYy5WZXJpZnlWYWx1ZSgpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJFcnJvciBpbiBjb25zdGFudCBcIiArIGMuTmFtZSArIFwiIGluIHNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgVmVyaWZ5TmFtZShjLk5hbWUsIGRlZik7XHJcblxyXG4gICAgICAgICAgICBpZiAoYy5UeXBlLlR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkdHlwZV90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWZXJpZnlDb25zdGFudFN0cnVjdChjLCBkZWYsIGNvbnN0YW50cywgbmV3IExpc3Q8c3RyaW5nPigpKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjLk5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBWZXJpZnlFbnVtKEVudW1EZWZpbml0aW9uIGUsIFNlcnZpY2VEZWZpbml0aW9uIGRlZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghZS5WZXJpZnlWYWx1ZXMoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiRXJyb3IgaW4gY29uc3RhbnQgaW4gZW51bSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBWZXJpZnlOYW1lKGUuTmFtZSwgZGVmKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUxIGluIGUuVmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWZXJpZnlOYW1lKGUxLk5hbWUsIGRlZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBMaXN0PHN0cmluZz4gR2V0U2VydmljZU5hbWVzKFNlcnZpY2VEZWZpbml0aW9uIGRlZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbiBpbiBkZWYuT2JqZWN0cy5WYWx1ZXMpIG8uQWRkKG4uTmFtZSk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuIGluIGRlZi5TdHJ1Y3R1cmVzLlZhbHVlcykgby5BZGQobi5OYW1lKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG4gaW4gZGVmLlBvZHMuVmFsdWVzKSBvLkFkZChuLk5hbWUpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbiBpbiBkZWYuTmFtZWRBcnJheXMuVmFsdWVzKSBvLkFkZChuLk5hbWUpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbiBpbiBkZWYuQ29uc3RhbnRzLlZhbHVlcykgby5BZGQobi5OYW1lKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG4gaW4gZGVmLkVudW1zLlZhbHVlcykgby5BZGQobi5OYW1lKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG4gaW4gZGVmLkV4Y2VwdGlvbnMpIG8uQWRkKG4pO1xyXG4gICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFZlcmlmeVVzaW5nKFVzaW5nRGVmaW5pdGlvbiBlLCBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYsIERpY3Rpb25hcnk8c3RyaW5nLFNlcnZpY2VEZWZpbml0aW9uPiBpbXBvcnRlZGRlZnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWZXJpZnlOYW1lKGUuVW5xdWFsaWZpZWROYW1lLCBkZWYpO1xyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBSZWdleChkZXRhaWwuU2VydmljZURlZmluaXRpb25VdGlsLlJSX1FVQUxJRklFRF9UWVBFX1JFR0VYKTtcclxuICAgICAgICAgICAgaWYgKCFyLklzTWF0Y2goZS5RdWFsaWZpZWROYW1lKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiVXNpbmcgXFxcIlwiICsgZS5RdWFsaWZpZWROYW1lICsgXCJcXFwiIGlzIGludmFsaWQgaW4gc2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgczEgPSBTcGxpdFF1YWxpZmllZE5hbWUoZS5RdWFsaWZpZWROYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBkMSBpbiBpbXBvcnRlZGRlZnMuVmFsdWVzKVxyXG5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHMxLkl0ZW0xID09IGQxLk5hbWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltcG9ydGVkZGVmc19uYW1lcyA9IEdldFNlcnZpY2VOYW1lcyhkMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbXBvcnRlZGRlZnNfbmFtZXMuQ29udGFpbnMoczEuSXRlbTIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiVXNpbmcgXFxcIlwiICsgZS5RdWFsaWZpZWROYW1lICsgXCJcXFwiIGlzIGludmFsaWQgaW4gc2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIlVzaW5nIFxcXCJcIiArIGUuUXVhbGlmaWVkTmFtZSArIFwiXFxcIiBpcyBpbnZhbGlkIGluIHNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFZlcmlmeVR5cGUoVHlwZURlZmluaXRpb24gdCwgU2VydmljZURlZmluaXRpb24gZGVmLCBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZURlZmluaXRpb24+IGRlZnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHQuQXJyYXlUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19BcnJheVR5cGVzLm5vbmU6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19BcnJheVR5cGVzLmFycmF5OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXNfQXJyYXlUeXBlcy5tdWx0aWRpbWFycmF5OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIFJvYm90IFJhY29udGV1ciBkYXRhIHR5cGUgXFxcIlwiICsgdC5Ub1N0cmluZygpICsgXCJcXFwiIHR5cGUgaW4gc2VydmljZSBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0LkNvbnRhaW5lclR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmU6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19Db250YWluZXJUeXBlcy5saXN0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXNfQ29udGFpbmVyVHlwZXMubWFwX2ludDMyOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXNfQ29udGFpbmVyVHlwZXMubWFwX3N0cmluZzpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBSb2JvdCBSYWNvbnRldXIgZGF0YSB0eXBlIFxcXCJcIiArIHQuVG9TdHJpbmcoKSArIFwiXFxcIiB0eXBlIGluIHNlcnZpY2UgXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChEYXRhVHlwZVV0aWwuSXNOdW1iZXIodC5UeXBlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodC5UeXBlID09IERhdGFUeXBlcy5zdHJpbmdfdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHQuQXJyYXlUeXBlICE9IERhdGFUeXBlc19BcnJheVR5cGVzLm5vbmUpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgUm9ib3QgUmFjb250ZXVyIGRhdGEgdHlwZSBcXFwiXCIgKyB0LlRvU3RyaW5nKCkgKyBcIlxcXCIgdHlwZSBpbiBzZXJ2aWNlIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodC5UeXBlID09IERhdGFUeXBlcy52ZWN0b3JfdCB8fCB0LlR5cGUgPT0gRGF0YVR5cGVzLmRpY3Rpb25hcnlfdCB8fCB0LlR5cGUgPT0gRGF0YVR5cGVzLm9iamVjdF90IHx8IHQuVHlwZSA9PSBEYXRhVHlwZXMudmFydmFsdWVfdCB8fCB0LlR5cGUgPT0gRGF0YVR5cGVzLnZhcm9iamVjdF90IHx8IHQuVHlwZSA9PSBEYXRhVHlwZXMubXVsdGlkaW1hcnJheV90KSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICh0LlR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkdHlwZV90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbnQgPSB0LlJlc29sdmVOYW1lZFR5cGUoZGVmcyk7XHJcbiAgICAgICAgICAgICAgICBEYXRhVHlwZXMgbnRfdHlwZSA9IG50LlJSRGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoKG50X3R5cGUgIT0gRGF0YVR5cGVzLnBvZF90ICYmIG50X3R5cGUgIT0gRGF0YVR5cGVzLm5hbWVkYXJyYXlfdCkgJiYgdC5BcnJheVR5cGUgIT0gRGF0YVR5cGVzX0FycmF5VHlwZXMubm9uZSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBSb2JvdCBSYWNvbnRldXIgZGF0YSB0eXBlIFxcXCJcIiArIHQuVG9TdHJpbmcoKSArIFwiXFxcIiB0eXBlIGluIHNlcnZpY2UgXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAobnRfdHlwZSAhPSBEYXRhVHlwZXMuc3RydWN0dXJlX3QgJiYgbnRfdHlwZSAhPSBEYXRhVHlwZXMucG9kX3QgJiYgbnRfdHlwZSAhPSBEYXRhVHlwZXMubmFtZWRhcnJheV90ICYmIG50X3R5cGUgIT0gRGF0YVR5cGVzLmVudW1fdCkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBSb2JvdCBSYWNvbnRldXIgZGF0YSB0eXBlIFxcXCJcIiArIHQuVG9TdHJpbmcoKSArIFwiXFxcIiB0eXBlIGluIHNlcnZpY2UgXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAobnRfdHlwZSA9PSBEYXRhVHlwZXMucG9kX3QpXHJcbiAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgUm9ib3QgUmFjb250ZXVyIGRhdGEgdHlwZSBcXFwiXCIgKyB0LlRvU3RyaW5nKCkgKyBcIlxcXCIgdHlwZSBpbiBzZXJ2aWNlIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgVmVyaWZ5UmV0dXJuVHlwZShUeXBlRGVmaW5pdGlvbiB0LCBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYsIERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRGVmaW5pdGlvbj4gZGVmcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0LlR5cGUgPT0gRGF0YVR5cGVzLnZvaWRfdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHQuQXJyYXlUeXBlICE9IERhdGFUeXBlc19BcnJheVR5cGVzLm5vbmUgfHwgdC5Db250YWluZXJUeXBlICE9IERhdGFUeXBlc19Db250YWluZXJUeXBlcy5ub25lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgUm9ib3QgUmFjb250ZXVyIGRhdGEgdHlwZSBcXFwiXCIgKyB0LlRvU3RyaW5nKCkgKyBcIlxcXCIgdHlwZSBpbiBzZXJ2aWNlIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5VHlwZSh0LCBkZWYsIGRlZnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBWZXJpZnlQYXJhbWV0ZXJzKExpc3Q8VHlwZURlZmluaXRpb24+IHAsIFNlcnZpY2VEZWZpbml0aW9uIGRlZiwgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VEZWZpbml0aW9uPiBkZWZzKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBuYW1lcyA9IG5ldyBMaXN0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gcClcclxuXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFZlcmlmeVR5cGUodCwgZGVmLCBkZWZzKTtcclxuICAgICAgICAgICAgICAgIGlmIChuYW1lcy5Db250YWlucyh0Lk5hbWUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIlBhcmFtZXRlcnMgbXVzdCBoYXZlIHVuaXF1ZSBuYW1lc1wiKTtcclxuICAgICAgICAgICAgICAgIG5hbWVzLkFkZCh0Lk5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBWZXJpZnlNb2RpZmllcnMoTWVtYmVyRGVmaW5pdGlvbiBtLCBib29sIHJlYWR3cml0ZSwgYm9vbCB1bnJlbGlhYmxlLCByZWYgTGlzdDxFeGNlcHRpb24+IHdhcm5pbmdzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCBkaXJlY3Rpb25fZm91bmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgYm9vbCB1bnJlbGlhYmxlX2ZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcyBpbiBtLk1vZGlmaWVycylcclxuXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWFkd3JpdGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMgPT0gXCJyZWFkb25seVwiIHx8IHMgPT0gXCJ3cml0ZW9ubHlcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb25fZm91bmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzLkFkZChuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIkludmFsaWQgbWVtYmVyIG1vZGlmaWVyIGNvbWJpbmF0aW9uOiBbcmVhZG9ubHksd3JpdGVvbmx5XVwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uX2ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh1bnJlbGlhYmxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzID09IFwidW5yZWxpYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IG0uU2VydmljZUVudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvIGluIG9iai5PcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbmV3IFJlZ2V4KFwiXlsgXFxcXHRdKnBpcGVbIFxcXFx0XStcIiArIG0uTmFtZSArIFwiWyBcXFxcdF0rdW5yZWxpYWJsZVsgXFxcXHRdKiRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyLklzTWF0Y2gobykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5BZGQobmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJJbnZhbGlkIG1lbWJlciBtb2RpZmllciBjb21iaW5hdGlvbjogW3VucmVsaWFibGVdXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bnJlbGlhYmxlX2ZvdW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5BZGQobmV3IFJvYm90UmFjb250ZXVyUGFyc2VFeGNlcHRpb24oXCJJbnZhbGlkIG1lbWJlciBtb2RpZmllciBjb21iaW5hdGlvbjogW3VucmVsaWFibGVdXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnJlbGlhYmxlX2ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLkFkZChuZXcgUm9ib3RSYWNvbnRldXJQYXJzZUV4Y2VwdGlvbihcIlVua25vd24gbWVtYmVyIG1vZGlmaWVyOiBbXCIgKyBzICsgXCJdXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHN0cmluZyBWZXJpZnlNZW1iZXIoTWVtYmVyRGVmaW5pdGlvbiBtLCBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYsIERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRGVmaW5pdGlvbj4gZGVmcywgcmVmIExpc3Q8RXhjZXB0aW9uPiB3YXJuaW5ncylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFZlcmlmeU5hbWUobS5OYW1lLCBkZWYpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG0uTW9kaWZpZXJzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5VmVyc2lvblN1cHBvcnQoZGVmLCAwLCA5LCBcIlNlcnZpY2UgZGVmaW5pdGlvbiBzdGFuZGFyZCB2ZXJzaW9uIDAuOSBvciBncmVhdGVyIHJlcXVpcmVkIGZvciBNZW1iZXIgTW9kaWZpZXJzXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcCA9IG0gYXMgUHJvcGVydHlEZWZpbml0aW9uO1xyXG4gICAgICAgICAgICBpZiAocCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWZXJpZnlUeXBlKHAuVHlwZSwgZGVmLCBkZWZzKTtcclxuICAgICAgICAgICAgICAgIFZlcmlmeU1vZGlmaWVycyhtLCB0cnVlLCBmYWxzZSwgcmVmIHdhcm5pbmdzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwLk5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGYgPSBtIGFzIEZ1bmN0aW9uRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgaWYgKGYgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmLklzR2VuZXJhdG9yKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeVBhcmFtZXRlcnMoZi5QYXJhbWV0ZXJzLCBkZWYsIGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeVJldHVyblR5cGUoZi5SZXR1cm5UeXBlLCBkZWYsIGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeU1vZGlmaWVycyhtLCBmYWxzZSwgZmFsc2UsIHJlZiB3YXJuaW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYuTmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBib29sIGdlbmVyYXRvcl9mb3VuZCA9IGZhbHNlOyA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYuUmV0dXJuVHlwZS5Db250YWluZXJUeXBlID09IERhdGFUeXBlc19Db250YWluZXJUeXBlcy5nZW5lcmF0b3IpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5SZXR1cm5UeXBlLlR5cGUgPT0gRGF0YVR5cGVzLnZvaWRfdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiR2VuZXJhdG9yIHJldHVybiBtdXN0IG5vdCBiZSB2b2lkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0MiA9IGYuUmV0dXJuVHlwZS5DbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQyLlJlbW92ZUNvbnRhaW5lcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVyaWZ5VHlwZShyZXQyLCBkZWYsIGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5SZXR1cm5UeXBlLlR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkdHlwZV90KSBmLlJldHVyblR5cGUuUmVzb2x2ZU5hbWVkVHlwZShkZWZzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdG9yX2ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYuUmV0dXJuVHlwZS5UeXBlICE9IERhdGFUeXBlcy52b2lkX3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkdlbmVyYXRvciByZXR1cm4gbXVzdCB1c2UgZ2VuZXJhdG9yIGNvbnRhaW5lclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1ZlcmlmeVJldHVyblR5cGUoZi5SZXR1cm5UeXBlLCBkZWYsIGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYuUGFyYW1ldGVycy5Db3VudCA+IDAgJiYgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5MYXN0PFR5cGVEZWZpbml0aW9uPihmLlBhcmFtZXRlcnMpLkNvbnRhaW5lclR5cGUgPT0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLmdlbmVyYXRvcilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwMyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxUeXBlRGVmaW5pdGlvbj4oZi5QYXJhbWV0ZXJzKS5DbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwMy5SZW1vdmVDb250YWluZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlcmlmeVR5cGUocDMsIGRlZiwgZGVmcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8VHlwZURlZmluaXRpb24+KGYuUGFyYW1ldGVycykuVHlwZSA9PSBEYXRhVHlwZXMubmFtZWR0eXBlX3QpIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxUeXBlRGVmaW5pdGlvbj4oZi5QYXJhbWV0ZXJzKS5SZXNvbHZlTmFtZWRUeXBlKGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5QYXJhbWV0ZXJzLkNvdW50ID4gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtczIgPSBuZXcgTGlzdDxUeXBlRGVmaW5pdGlvbj4oKFR5cGVEZWZpbml0aW9uW10pU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPFR5cGVEZWZpbml0aW9uPihmLlBhcmFtZXRlcnMsZi5QYXJhbWV0ZXJzLkNvdW50IC0gMSkuVG9BcnJheSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlcmlmeVBhcmFtZXRlcnMocGFyYW1zMiwgZGVmLCBkZWZzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0b3JfZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBWZXJpZnlQYXJhbWV0ZXJzKGYuUGFyYW1ldGVycywgZGVmLCBkZWZzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2VuZXJhdG9yX2ZvdW5kKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiR2VuZXJhdG9yIHJldHVybiBvciBwYXJhbWV0ZXIgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYuTmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGUgPSBtIGFzIEV2ZW50RGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgaWYgKGUgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5UGFyYW1ldGVycyhlLlBhcmFtZXRlcnMsIGRlZiwgZGVmcyk7XHJcbiAgICAgICAgICAgICAgICBWZXJpZnlNb2RpZmllcnMobSwgZmFsc2UsIGZhbHNlLCByZWYgd2FybmluZ3MpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuTmFtZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG8gPSBtIGFzIE9ialJlZkRlZmluaXRpb247XHJcbiAgICAgICAgICAgIGlmIChvICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFZlcmlmeU1vZGlmaWVycyhtLCBmYWxzZSwgZmFsc2UsIHJlZiB3YXJuaW5ncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG8uT2JqZWN0VHlwZSA9PSBcInZhcm9iamVjdFwiKSByZXR1cm4gby5OYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxjaGFyPihvLk9iamVjdFR5cGUsJy4nKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZWUgaW4gZGVmLk9iamVjdHMuVmFsdWVzKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZS5OYW1lID09IG8uT2JqZWN0VHlwZSkgcmV0dXJuIG8uTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMxID0gU3BsaXRRdWFsaWZpZWROYW1lKG8uT2JqZWN0VHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZuYW1lID0gczEuSXRlbTE7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VydmljZURlZmluaXRpb24gZGVmMjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmcy5UcnlHZXRWYWx1ZShkZWZuYW1lLCBvdXQgZGVmMikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZWUgaW4gZGVmMi5PYmplY3RzLlZhbHVlcylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZS5OYW1lID09IHMxLkl0ZW0yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJVbmtub3duIG9iamVjdCB0eXBlIFxcXCJcIiArIG8uT2JqZWN0VHlwZSArIFwiXFxcIiBpbiBtZW1iZXIgXFxcIlwiICsgbS5OYW1lICsgXCJcXFwiIGluICBzZXJ2aWNlIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcDIgPSBtIGFzIFBpcGVEZWZpbml0aW9uO1xyXG4gICAgICAgICAgICBpZiAocDIgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5VHlwZShwMi5UeXBlLCBkZWYsIGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5TW9kaWZpZXJzKG0sIHRydWUsIHRydWUsIHJlZiB3YXJuaW5ncyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcDIuTmFtZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGMgPSBtIGFzIENhbGxiYWNrRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgaWYgKGMgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5UGFyYW1ldGVycyhjLlBhcmFtZXRlcnMsIGRlZiwgZGVmcyk7XHJcbiAgICAgICAgICAgICAgICBWZXJpZnlSZXR1cm5UeXBlKGMuUmV0dXJuVHlwZSwgZGVmLCBkZWZzKTtcclxuICAgICAgICAgICAgICAgIFZlcmlmeU1vZGlmaWVycyhtLCBmYWxzZSwgZmFsc2UsIHJlZiB3YXJuaW5ncyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYy5OYW1lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdyA9IG0gYXMgV2lyZURlZmluaXRpb247XHJcbiAgICAgICAgICAgIGlmICh3ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFZlcmlmeVR5cGUody5UeXBlLCBkZWYsIGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5TW9kaWZpZXJzKG0sIHRydWUsIGZhbHNlLCByZWYgd2FybmluZ3MpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHcuTmFtZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG0yID0gbSBhcyBNZW1vcnlEZWZpbml0aW9uO1xyXG4gICAgICAgICAgICBpZiAobTIgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5VHlwZShtMi5UeXBlLCBkZWYsIGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5TW9kaWZpZXJzKG0sIHRydWUsIGZhbHNlLCByZWYgd2FybmluZ3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFEYXRhVHlwZVV0aWwuSXNOdW1iZXIobTIuVHlwZS5UeXBlKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobTIuVHlwZS5UeXBlICE9IERhdGFUeXBlcy5uYW1lZHR5cGVfdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk1lbW9yeSBtZW1iZXIgbXVzdCBiZSBudW1lcmljIG9yIHBvZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG50ID0gbTIuVHlwZS5SZXNvbHZlTmFtZWRUeXBlKGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudC5SUkRhdGFUeXBlICE9IERhdGFUeXBlcy5wb2RfdCAmJiBudC5SUkRhdGFUeXBlICE9IERhdGFUeXBlcy5uYW1lZGFycmF5X3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJNZW1vcnkgbWVtYmVyIG11c3QgYmUgbnVtZXJpYyBvciBwb2RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtMi5UeXBlLkFycmF5VHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19BcnJheVR5cGVzLmFycmF5OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0FycmF5VHlwZXMubXVsdGlkaW1hcnJheTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiTWVtb3J5IG1lbWJlciBtdXN0IGJlIG51bWVyaWMgb3IgcG9kXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghbTIuVHlwZS5BcnJheVZhckxlbmd0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJNZW1vcnkgbWVtYmVyIG11c3Qgbm90IGJlIGZpeGVkIHNpemVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG0yLlR5cGUuQXJyYXlMZW5ndGguQ291bnQgIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXlfY291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxpbnQsaW50PihtMi5UeXBlLkFycmF5TGVuZ3RoLDEsIChGdW5jPGludCxpbnQsaW50PikoKHgsIHkpID0+IHggKiB5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5X2NvdW50ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJNZW1vcnkgbWVtYmVyIG11c3Qgbm90IGJlIGZpeGVkIHNpemVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtMi5OYW1lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIG1lbWJlciBcXFwiXCIgKyBtLk5hbWUgKyBcIlxcXCIgdHlwZSBpbiBzZXJ2aWNlIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgY2xhc3MgcnJpbXBsZW1lbnRzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgc3RyaW5nIG5hbWU7XHJcbiAgICAgICAgICAgIHB1YmxpYyBTZXJ2aWNlRW50cnlEZWZpbml0aW9uIG9iajtcclxuICAgICAgICAgICAgcHVibGljIExpc3Q8cnJpbXBsZW1lbnRzPiBpbXBsZW1lbnRzID0gbmV3IExpc3Q8cnJpbXBsZW1lbnRzPigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBycmltcGxlbWVudHMgZ2V0X2ltcGxlbWVudHMoU2VydmljZUVudHJ5RGVmaW5pdGlvbiBvYmosIFNlcnZpY2VEZWZpbml0aW9uIGRlZiwgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VEZWZpbml0aW9uPiBkZWZzLCBzdHJpbmcgcm9vdG9iaiA9IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb3V0XyA9IG5ldyBycmltcGxlbWVudHMoKTtcclxuICAgICAgICAgICAgb3V0Xy5vYmogPSBvYmo7XHJcbiAgICAgICAgICAgIG91dF8ubmFtZSA9IGRlZi5OYW1lICsgXCIuXCIgKyBvYmouTmFtZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyb290b2JqID09IFwiXCIpIHJvb3RvYmogPSBvdXRfLm5hbWU7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBvYmouSW1wbGVtZW50cylcclxuXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghZS5Db250YWlucyhcIi5cIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlRW50cnlEZWZpbml0aW9uIG9iajI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWYuT2JqZWN0cy5UcnlHZXRWYWx1ZShlLCBvdXQgb2JqMikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk9iamVjdCBcXFwiXCIgKyBkZWYuTmFtZSArIFwiLlwiICsgZSArIFwiIG5vdCBmb3VuZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RvYmogPT0gKGRlZi5OYW1lICsgXCIuXCIgKyBvYmoyLk5hbWUpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJSZWN1cnNpdmUgaW1wbGVtZW50cyBiZXR3ZWVuIFxcXCJcIiArIHJvb3RvYmogKyBcIlxcXCIgYW5kIFxcXCJcIiArIGRlZi5OYW1lICsgXCIuXCIgKyBvYmoyLk5hbWUgKyBcIlxcXCJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJyaW1wbGVtZW50cyBpbXAyID0gZ2V0X2ltcGxlbWVudHMob2JqMiwgZGVmLCBkZWZzLCByb290b2JqKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRfLmltcGxlbWVudHMuQWRkKGltcDIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzMSA9IFNwbGl0UXVhbGlmaWVkTmFtZShlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU2VydmljZURlZmluaXRpb24gZGVmMjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRlZnMuVHJ5R2V0VmFsdWUoczEuSXRlbTEsIG91dCBkZWYyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiU2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGUgKyBcIlxcXCIgbm90IGZvdW5kLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU2VydmljZUVudHJ5RGVmaW5pdGlvbiBvYmoyO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGVmMi5PYmplY3RzLlRyeUdldFZhbHVlKHMxLkl0ZW0yLCBvdXQgb2JqMikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk9iamVjdCBcXFwiXCIgKyBlICsgXCIgbm90IGZvdW5kXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdG9iaiA9PSAoZGVmMi5OYW1lICsgXCIuXCIgKyBvYmoyLk5hbWUpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJSZWN1cnNpdmUgaW1wbGVtZW50cyBiZXR3ZWVuIFxcXCJcIiArIHJvb3RvYmogKyBcIlxcXCIgYW5kIFxcXCJcIiArIGRlZjIuTmFtZSArIFwiLlwiICsgb2JqMi5OYW1lICsgXCJcXFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBycmltcGxlbWVudHMgaW1wMiA9IGdldF9pbXBsZW1lbnRzKG9iajIsIGRlZjIsIGRlZnMsIHJvb3RvYmopO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dF8uaW1wbGVtZW50cy5BZGQoaW1wMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgciBpbiBvdXRfLmltcGxlbWVudHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciByMiBpbiByLmltcGxlbWVudHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9vbCBmb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciByMyBpbiBvdXRfLmltcGxlbWVudHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocjIubmFtZSA9PSByMy5uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiT2JqZWN0IFxcXCJcIiArIG91dF8ubmFtZSArIFwiXFxcIiBkb2VzIG5vdCBpbXBsZW1lbnQgaW5oZXJpdGVkIHR5cGUgXFxcIlwiICsgcjIubmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG91dF87XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIGJvb2wgQ29tcGFyZVR5cGVEZWZpbml0aW9uKFNlcnZpY2VEZWZpbml0aW9uIGQxLCBUeXBlRGVmaW5pdGlvbiB0MSwgU2VydmljZURlZmluaXRpb24gZDIsIFR5cGVEZWZpbml0aW9uIHQyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHQxLk5hbWUgIT0gdDIuTmFtZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAvL2lmICh0MS5JbXBvcnRlZFR5cGUhPXQyLkltcG9ydGVkVHlwZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodDEuQXJyYXlUeXBlICE9IHQyLkFycmF5VHlwZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodDEuQXJyYXlUeXBlICE9IERhdGFUeXBlc19BcnJheVR5cGVzLm5vbmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh0MS5BcnJheVZhckxlbmd0aCAhPSB0Mi5BcnJheVZhckxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHQxLkFycmF5TGVuZ3RoLkNvdW50ICE9IHQyLkFycmF5TGVuZ3RoLkNvdW50KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KHQxLkFycmF5TGVuZ3RoLHQyLkFycmF5TGVuZ3RoKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodDEuQ29udGFpbmVyVHlwZSAhPSB0Mi5Db250YWluZXJUeXBlKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAodDEuVHlwZSAhPSB0Mi5UeXBlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0MS5UeXBlICE9IERhdGFUeXBlcy5uYW1lZHR5cGVfdCAmJiB0MS5UeXBlICE9IERhdGFUeXBlcy5vYmplY3RfdCkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAodDEuVHlwZVN0cmluZyA9PSBcInZhcnZhbHVlXCIgJiYgdDIuVHlwZVN0cmluZyA9PSBcInZhcnZhbHVlXCIpIHJldHVybiB0cnVlO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBzdDEgPSBcIlwiO1xyXG4gICAgICAgICAgICBzdHJpbmcgc3QyID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxjaGFyPih0MS5UeXBlU3RyaW5nLCcuJykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0MSA9IGQxLk5hbWUgKyBcIi5cIiArIHQxLlR5cGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdDEgPSB0MS5UeXBlU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Y2hhcj4odDIuVHlwZVN0cmluZywnLicpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdDIgPSBkMi5OYW1lICsgXCIuXCIgKyB0Mi5UeXBlU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3QyID0gdDIuVHlwZVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0MSA9PSBzdDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgYm9vbCBDb21wYXJlVHlwZURlZmluaXRpb25zKFNlcnZpY2VEZWZpbml0aW9uIGQxLCBMaXN0PFR5cGVEZWZpbml0aW9uPiB0MSwgU2VydmljZURlZmluaXRpb24gZDIsIExpc3Q8VHlwZURlZmluaXRpb24+IHQyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHQxLkNvdW50ICE9IHQyLkNvdW50KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdDEuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFDb21wYXJlVHlwZURlZmluaXRpb24oZDEsIHQxW2ldLCBkMiwgdDJbaV0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIGJvb2wgQ29tcGFyZU1lbWJlcihNZW1iZXJEZWZpbml0aW9uIG0xLCBNZW1iZXJEZWZpbml0aW9uIG0yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG0xLk5hbWUgIT0gbTIuTmFtZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxzdHJpbmc+KG0xLk1vZGlmaWVycyxtMi5Nb2RpZmllcnMpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgZTEgPSBtMS5TZXJ2aWNlRW50cnk7XHJcbiAgICAgICAgICAgIHZhciBlMiA9IG0yLlNlcnZpY2VFbnRyeTtcclxuICAgICAgICAgICAgaWYgKChlMSA9PSBudWxsKSB8fCAoZTIgPT0gbnVsbCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkMSA9IGUxLlNlcnZpY2VEZWZpbml0aW9uO1xyXG4gICAgICAgICAgICB2YXIgZDIgPSBlMi5TZXJ2aWNlRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgaWYgKChkMSA9PSBudWxsKSB8fCAoZDIgPT0gbnVsbCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwMSA9IG0xIGFzIFByb3BlcnR5RGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgdmFyIHAyID0gbTIgYXMgUHJvcGVydHlEZWZpbml0aW9uO1xyXG4gICAgICAgICAgICBpZiAocDIgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAyID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb21wYXJlVHlwZURlZmluaXRpb24oZDEsIHAxLlR5cGUsIGQyLCBwMi5UeXBlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGYxID0gbTEgYXMgRnVuY3Rpb25EZWZpbml0aW9uO1xyXG4gICAgICAgICAgICB2YXIgZjIgPSBtMiBhcyBGdW5jdGlvbkRlZmluaXRpb247XHJcbiAgICAgICAgICAgIGlmIChmMSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZjIgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFDb21wYXJlVHlwZURlZmluaXRpb24oZDEsIGYxLlJldHVyblR5cGUsIGQyLCBmMi5SZXR1cm5UeXBlKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbXBhcmVUeXBlRGVmaW5pdGlvbnMoZDEsIGYxLlBhcmFtZXRlcnMsIGQyLCBmMi5QYXJhbWV0ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGV2MSA9IG0xIGFzIEV2ZW50RGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgdmFyIGV2MiA9IG0yIGFzIEV2ZW50RGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgaWYgKGV2MiAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXYyID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tcGFyZVR5cGVEZWZpbml0aW9ucyhkMSwgZXYxLlBhcmFtZXRlcnMsIGQyLCBldjIuUGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBvMSA9IG0xIGFzIE9ialJlZkRlZmluaXRpb247XHJcbiAgICAgICAgICAgIHZhciBvMiA9IG0yIGFzIE9ialJlZkRlZmluaXRpb247XHJcbiAgICAgICAgICAgIGlmIChvMSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobzIgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvMS5BcnJheVR5cGUgIT0gbzIuQXJyYXlUeXBlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAobzEuQ29udGFpbmVyVHlwZSAhPSBvMi5Db250YWluZXJUeXBlKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG8xLk9iamVjdFR5cGUgPT0gXCJ2YXJvYmplY3RcIiAmJiBvMi5PYmplY3RUeXBlID09IFwidmFyb2JqZWN0XCIpIHJldHVybiB0cnVlO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBzdHJpbmcgc3QxID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHN0cmluZyBzdDIgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxjaGFyPihvMS5PYmplY3RUeXBlLCcuJykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3QxID0gZDEuTmFtZSArIFwiLlwiICsgbzEuT2JqZWN0VHlwZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdDEgPSBvMS5PYmplY3RUeXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Y2hhcj4obzIuT2JqZWN0VHlwZSwnLicpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0MiA9IGQyLk5hbWUgKyBcIi5cIiArIG8yLk9iamVjdFR5cGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3QyID0gbzIuT2JqZWN0VHlwZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3QxID09IHN0MjtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBwcDEgPSBtMSBhcyBQaXBlRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgdmFyIHBwMiA9IG0yIGFzIFBpcGVEZWZpbml0aW9uO1xyXG4gICAgICAgICAgICBpZiAocHAxICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcDIgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBDb21wYXJlVHlwZURlZmluaXRpb24oZDEsIHBwMS5UeXBlLCBkMiwgcHAyLlR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYzEgPSBtMSBhcyBDYWxsYmFja0RlZmluaXRpb247XHJcbiAgICAgICAgICAgIHZhciBjMiA9IG0yIGFzIENhbGxiYWNrRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgaWYgKGMxICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjMiA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUNvbXBhcmVUeXBlRGVmaW5pdGlvbihkMSwgYzEuUmV0dXJuVHlwZSwgZDIsIGMyLlJldHVyblR5cGUpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tcGFyZVR5cGVEZWZpbml0aW9ucyhkMSwgYzEuUGFyYW1ldGVycywgZDIsIGMyLlBhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdzEgPSBtMSBhcyBXaXJlRGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgdmFyIHcyID0gbTIgYXMgV2lyZURlZmluaXRpb247XHJcbiAgICAgICAgICAgIGlmICh3MSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodzIgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBDb21wYXJlVHlwZURlZmluaXRpb24oZDEsIHcxLlR5cGUsIGQyLCB3Mi5UeXBlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG1lbTEgPSBtMSBhcyBNZW1vcnlEZWZpbml0aW9uO1xyXG4gICAgICAgICAgICB2YXIgbWVtMiA9IG0yIGFzIE1lbW9yeURlZmluaXRpb247XHJcbiAgICAgICAgICAgIGlmIChtZW0xICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtZW0yID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tcGFyZVR5cGVEZWZpbml0aW9uKGQxLCBtZW0xLlR5cGUsIGQyLCBtZW0yLlR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgVmVyaWZ5T2JqZWN0KFNlcnZpY2VFbnRyeURlZmluaXRpb24gb2JqLCBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYsIERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRGVmaW5pdGlvbj4gZGVmcywgcmVmIExpc3Q8RXhjZXB0aW9uPiB3YXJuaW5ncylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvYmouRW50cnlUeXBlICE9IERhdGFUeXBlcy5vYmplY3RfdCkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBFbnRyeVR5cGUgaW4gXCIgKyBvYmouTmFtZSk7XHJcblxyXG4gICAgICAgICAgICBWZXJpZnlOYW1lKG9iai5OYW1lLCBkZWYpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1lbWJlcm5hbWVzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gb2JqLk9wdGlvbnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzMSA9IGUuU3BsaXQobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoczFbMF0gPT0gXCJjb25zdGFudFwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBtZW1iZXJuYW1lID0gVmVyaWZ5Q29uc3RhbnQoZSwgZGVmKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVtYmVybmFtZXMuQ29udGFpbnMobWVtYmVybmFtZSkpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk9iamVjdCBcXFwiXCIgKyBvYmouTmFtZSArIFwiXFxcIiBpbiBzZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCIgY29udGFpbnMgbXVsdGlwbGUgbWVtYmVycyBuYW1lZCBcXFwiXCIgKyBtZW1iZXJuYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcm5hbWVzLkFkZChtZW1iZXJuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9iai5Db25zdGFudHMuQ291bnQgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5VmVyc2lvblN1cHBvcnQoZGVmLCAwLCA5LCBcIlNlcnZpY2UgZGVmaW5pdGlvbiBzdGFuZGFyZCB2ZXJzaW9uIDAuOSBvciBncmVhdGVyIHJlcXVpcmVkIGZvciBcXFwiY29uc3RhbnRcXFwiIGtleXdvcmRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIG9iai5Db25zdGFudHMuVmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHJpbmcgbWVtYmVybmFtZSA9IFZlcmlmeUNvbnN0YW50KGUsIGRlZiwgb2JqLkNvbnN0YW50cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVtYmVybmFtZXMuQ29udGFpbnMobWVtYmVybmFtZSkpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk9iamVjdCBcXFwiXCIgKyBvYmouTmFtZSArIFwiXFxcIiBpbiBzZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCIgY29udGFpbnMgbXVsdGlwbGUgbWVtYmVycyBuYW1lZCBcXFwiXCIgKyBtZW1iZXJuYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVtYmVybmFtZXMuQWRkKG1lbWJlcm5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBvYmouTWVtYmVycy5WYWx1ZXMpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzdHJpbmcgbWVtYmVybmFtZSA9IFZlcmlmeU1lbWJlcihlLCBkZWYsIGRlZnMsIHJlZiB3YXJuaW5ncyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVtYmVybmFtZXMuQ29udGFpbnMobWVtYmVybmFtZSkpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk9iamVjdCBcXFwiXCIgKyBvYmouTmFtZSArIFwiXFxcIiBpbiBzZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCIgY29udGFpbnMgbXVsdGlwbGUgbWVtYmVycyBuYW1lZCBcXFwiXCIgKyBtZW1iZXJuYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVtYmVybmFtZXMuQWRkKG1lbWJlcm5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBycmltcGxlbWVudHMgciA9IGdldF9pbXBsZW1lbnRzKG9iaiwgZGVmLCBkZWZzKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIHIuaW1wbGVtZW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGVlIGluIGUub2JqLk1lbWJlcnMuVmFsdWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE1lbWJlckRlZmluaXRpb24gbTI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmouTWVtYmVycy5UcnlHZXRWYWx1ZShlZS5OYW1lLCBvdXQgbTIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJPYmplY3QgXFxcIlwiICsgb2JqLk5hbWUgKyBcIlxcXCIgaW4gc2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiIGRvZXMgbm90IGltcGxlbWVudCByZXF1aXJlZCBtZW1iZXIgXFxcIlwiICsgZWUuTmFtZSArIFwiXFxcIlwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghQ29tcGFyZU1lbWJlcihtMiwgZWUpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJNZW1iZXIgXFxcIlwiICsgZWUuTmFtZSArIFwiXFxcIiBpbiBvYmplY3QgXFxcIlwiICsgb2JqLk5hbWUgKyBcIlxcXCIgaW4gc2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiIGRvZXMgbm90IG1hdGNoIGltcGxlbWVudGVkIG1lbWJlciBcIiArIG0yLlRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBWZXJpZnlTdHJ1Y3R1cmVfY2hlY2tfcmVjdXJzaW9uKFNlcnZpY2VFbnRyeURlZmluaXRpb24gc3RydXQsIHJlZiBIYXNoU2V0PHN0cmluZz4gIG5hbWVzLCBEYXRhVHlwZXMgZW50cnlfdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdHJ1dC5FbnRyeVR5cGUgIT0gZW50cnlfdHlwZSAmJiBzdHJ1dC5FbnRyeVR5cGUgIT0gRGF0YVR5cGVzLm5hbWVkYXJyYXlfdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXJyb3JFeGNlcHRpb24oXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5hbWVzLkFkZChzdHJ1dC5OYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKE1lbWJlckRlZmluaXRpb24gZSBpbiBzdHJ1dC5NZW1iZXJzLlZhbHVlcylcclxuXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gZSBhcyBQcm9wZXJ0eURlZmluaXRpb247XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PSBudWxsKSB0aHJvdyBuZXcgSW50ZXJuYWxFcnJvckV4Y2VwdGlvbihcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocC5UeXBlLlR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkdHlwZV90KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBudF9kZWYgPSBwLlR5cGUuUmVzb2x2ZU5hbWVkVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBldF9kZWYgPSBudF9kZWYgYXMgU2VydmljZUVudHJ5RGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXRfZGVmID09IG51bGwpIHRocm93IG5ldyBJbnRlcm5hbEVycm9yRXhjZXB0aW9uKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldF9kZWYuRW50cnlUeXBlICE9IGVudHJ5X3R5cGUgJiYgZXRfZGVmLkVudHJ5VHlwZSAhPSBEYXRhVHlwZXMubmFtZWRhcnJheV90KSB0aHJvdyBuZXcgSW50ZXJuYWxFcnJvckV4Y2VwdGlvbihcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVzLkNvbnRhaW5zKGV0X2RlZi5OYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIlJlY3Vyc2l2ZSBuYW1lZGFycmF5L3BvZCBkZXRlY3RlZCBpbiBcIiArIHN0cnV0Lk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWVzMiA9IG5ldyBIYXNoU2V0PHN0cmluZz4obmFtZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeVN0cnVjdHVyZV9jaGVja19yZWN1cnNpb24oZXRfZGVmLCByZWYgbmFtZXMyLCBlbnRyeV90eXBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgVmVyaWZ5U3RydWN0dXJlX2NvbW1vbihTZXJ2aWNlRW50cnlEZWZpbml0aW9uIHN0cnV0LCBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYsIERpY3Rpb25hcnk8c3RyaW5nLFNlcnZpY2VEZWZpbml0aW9uPiBkZWZzLCByZWYgTGlzdDxFeGNlcHRpb24+IHdhcm5pbmdzLCBEYXRhVHlwZXMgZW50cnlfdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdHJ1dC5FbnRyeVR5cGUgIT0gZW50cnlfdHlwZSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBFbnRyeVR5cGUgaW4gXCIgKyBzdHJ1dC5OYW1lKTtcclxuXHJcbiAgICAgICAgICAgIFZlcmlmeU5hbWUoc3RydXQuTmFtZSwgZGVmKTtcclxuICAgICAgICAgICAgdmFyIG1lbWJlcm5hbWVzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgZSBpbiBzdHJ1dC5PcHRpb25zKVxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgczEgPSBlLlNwbGl0KChzdHJpbmdbXSludWxsLCBTdHJpbmdTcGxpdE9wdGlvbnMuUmVtb3ZlRW1wdHlFbnRyaWVzKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoczFbMF0gPT0gXCJjb25zdGFudFwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZW1iZXJuYW1lID0gVmVyaWZ5Q29uc3RhbnQoZSwgZGVmKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVtYmVybmFtZXMuQ29udGFpbnMoIG1lbWJlcm5hbWUpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJTdHJ1Y3R1cmUgXFxcIlwiICsgc3RydXQuTmFtZSArIFwiXFxcIiBpbiBzZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCIgY29udGFpbnMgbXVsdGlwbGUgbWVtYmVycyBuYW1lZCBcXFwiXCIgKyBtZW1iZXJuYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcm5hbWVzLkFkZChtZW1iZXJuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgZSBpbiBzdHJ1dC5Db25zdGFudHMuVmFsdWVzKVxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHJpbmcgbWVtYmVybmFtZSA9IFZlcmlmeUNvbnN0YW50KGUsIGRlZiwgc3RydXQuQ29uc3RhbnRzKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZW1iZXJuYW1lcy5Db250YWlucyhtZW1iZXJuYW1lKSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiU3RydWN0IFxcXCJcIiArIHN0cnV0Lk5hbWUgKyBcIlxcXCIgaW4gc2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiIGNvbnRhaW5zIG11bHRpcGxlIG1lbWJlcnMgbmFtZWQgXFxcIlwiICsgbWVtYmVybmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgIG1lbWJlcm5hbWVzLkFkZChtZW1iZXJuYW1lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGF0YVR5cGVzIG5hbWVkYXJyYXlfZWxlbWVudF90eXBlID0gRGF0YVR5cGVzLnZvaWRfdDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIGUgaW4gc3RydXQuTWVtYmVycy5WYWx1ZXMpXHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gZSBhcyBQcm9wZXJ0eURlZmluaXRpb247XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PSBudWxsKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJTdHJ1Y3R1cmUgXFxcIlwiICsgc3RydXQuTmFtZSArIFwiXFxcIiBjYW4gb25seSBjb250YWluIGZpZWxkcyBpbiBzZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZGVmLk5hbWUgKyBcIlxcXCJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RyaW5nIG1lbWJlcm5hbWUgPSBWZXJpZnlNZW1iZXIocCwgZGVmLCBkZWZzLCByZWYgd2FybmluZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbnRyeV90eXBlID09IERhdGFUeXBlcy5wb2RfdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHAuVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIURhdGFUeXBlVXRpbC5Jc051bWJlcih0LlR5cGUpICYmIHQuVHlwZSAhPSBEYXRhVHlwZXMubmFtZWR0eXBlX3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJQb2RzIG11c3Qgb25seSBjb250YWluIG51bWVyaWMsIHBvZCwgYW5kIG5hbWVkYXJyYXkgdHlwZXNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodC5UeXBlID09IERhdGFUeXBlcy5uYW1lZHR5cGVfdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWVkVHlwZURlZmluaXRpb24gdHQgPSB0LlJlc29sdmVOYW1lZFR5cGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR0LlJSRGF0YVR5cGUgIT0gRGF0YVR5cGVzLnBvZF90ICYmIHR0LlJSRGF0YVR5cGUgIT0gRGF0YVR5cGVzLm5hbWVkYXJyYXlfdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiUG9kcyBtdXN0IG9ubHkgY29udGFpbiBudW1lcmljLCBjdXN0cnVjdCwgcG9kIHR5cGVzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodC5Db250YWluZXJUeXBlICE9IERhdGFUeXBlc19Db250YWluZXJUeXBlcy5ub25lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiUG9kcyBtYXkgbm90IHVzZSBjb250YWluZXJzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQuQXJyYXlMZW5ndGguQ29udGFpbnMoMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHQuQXJyYXlUeXBlID09IERhdGFUeXBlc19BcnJheVR5cGVzLm11bHRpZGltYXJyYXkgJiYgdC5BcnJheUxlbmd0aC5Db3VudD09MCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJQb2RzIG11c3QgaGF2ZSBmaXhlZCBvciBmaW5pdGUgbGVuZ3RoIGFycmF5c1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gbmV3IEhhc2hTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeVN0cnVjdHVyZV9jaGVja19yZWN1cnNpb24oc3RydXQsIHJlZiBuLCBEYXRhVHlwZXMucG9kX3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbnRyeV90eXBlID09IERhdGFUeXBlcy5uYW1lZGFycmF5X3QpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHlwZURlZmluaXRpb24gdCA9IHAuVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIURhdGFUeXBlVXRpbC5Jc051bWJlcih0LlR5cGUpICYmIHQuVHlwZSAhPSBEYXRhVHlwZXMubmFtZWR0eXBlX3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJOYW1lZEFycmF5cyBtdXN0IG9ubHkgY29udGFpbiBudW1lcmljIGFuZCBuYW1lZGFycmF5IHR5cGVzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQuVHlwZSA9PSBEYXRhVHlwZXMubmFtZWR0eXBlX3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBOYW1lZFR5cGVEZWZpbml0aW9uIHR0ID0gdC5SZXNvbHZlTmFtZWRUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dC5SUkRhdGFUeXBlICE9IERhdGFUeXBlcy5uYW1lZGFycmF5X3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk5hbWVkQXJyYXlzIG11c3Qgb25seSBjb250YWluIG51bWVyaWMgYW5kIG5hbWVkYXJyYXkgdHlwZXNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0LkNvbnRhaW5lclR5cGUgIT0gRGF0YVR5cGVzX0NvbnRhaW5lclR5cGVzLm5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJOYW1lZEFycmF5cyBtYXkgbm90IHVzZSBjb250YWluZXJzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0LkFycmF5VHlwZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzX0FycmF5VHlwZXMubm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlc19BcnJheVR5cGVzLmFycmF5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuQXJyYXlWYXJMZW5ndGgpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk5hbWVkQXJyYXkgZmllbGRzIG11c3QgYmUgc2NhbGFycyBvciBmaXhlZCBhcnJheXNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIk5hbWVkQXJyYXkgZmllbGRzIG11c3QgYmUgc2NhbGFycyBvciBmaXhlZCBhcnJheXNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgR2V0TmFtZWRBcnJheUVsZW1lbnRUeXBlQW5kQ291bnQoc3RydXQsIGRlZnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtZW1iZXJuYW1lcy5Db250YWlucyhtZW1iZXJuYW1lKSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiU3RydWN0dXJlIFxcXCJcIiArIHN0cnV0Lk5hbWUgKyBcIlxcXCIgaW4gc2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGRlZi5OYW1lICsgXCJcXFwiIGNvbnRhaW5zIG11bHRpcGxlIG1lbWJlcnMgbmFtZWQgXFxcIlwiICsgbWVtYmVybmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgIG1lbWJlcm5hbWVzLkFkZChtZW1iZXJuYW1lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFZlcmlmeVN0cnVjdHVyZShTZXJ2aWNlRW50cnlEZWZpbml0aW9uIHN0cnV0LCBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYsIERpY3Rpb25hcnk8c3RyaW5nLFNlcnZpY2VEZWZpbml0aW9uPiBkZWZzLCByZWYgTGlzdDxFeGNlcHRpb24+IHdhcm5pbmdzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVmVyaWZ5U3RydWN0dXJlX2NvbW1vbihzdHJ1dCwgZGVmLCBkZWZzLCByZWYgd2FybmluZ3MsIERhdGFUeXBlcy5zdHJ1Y3R1cmVfdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBWZXJpZnlQb2QoU2VydmljZUVudHJ5RGVmaW5pdGlvbiBzdHJ1dCwgU2VydmljZURlZmluaXRpb24gZGVmLCBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZURlZmluaXRpb24+IGRlZnMsIHJlZiBMaXN0PEV4Y2VwdGlvbj4gd2FybmluZ3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWZXJpZnlTdHJ1Y3R1cmVfY29tbW9uKHN0cnV0LCBkZWYsIGRlZnMsIHJlZiB3YXJuaW5ncywgRGF0YVR5cGVzLnBvZF90KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFZlcmlmeU5hbWVkQXJyYXkoU2VydmljZUVudHJ5RGVmaW5pdGlvbiBzdHJ1dCwgU2VydmljZURlZmluaXRpb24gZGVmLCBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZURlZmluaXRpb24+IGRlZnMsIHJlZiBMaXN0PEV4Y2VwdGlvbj4gd2FybmluZ3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWZXJpZnlTdHJ1Y3R1cmVfY29tbW9uKHN0cnV0LCBkZWYsIGRlZnMsIHJlZiB3YXJuaW5ncywgRGF0YVR5cGVzLm5hbWVkYXJyYXlfdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBjbGFzcyBycmltcG9ydHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBTZXJ2aWNlRGVmaW5pdGlvbiBkZWY7XHJcbiAgICAgICAgICAgIHB1YmxpYyBMaXN0PHJyaW1wb3J0cz4gaW1wb3J0ZWQ9bmV3IExpc3Q8cnJpbXBvcnRzPigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBycmltcG9ydHMgZ2V0X2ltcG9ydHMoU2VydmljZURlZmluaXRpb24gZGVmLCBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmljZURlZmluaXRpb24+IGRlZnMsIFNlcnZpY2VEZWZpbml0aW9uIHJvb3RkZWYgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcnJpbXBvcnRzIG91dF8gPSBuZXcgcnJpbXBvcnRzKCk7XHJcbiAgICAgICAgICAgIG91dF8uZGVmID0gZGVmO1xyXG4gICAgICAgICAgICBpZiAoZGVmLkltcG9ydHMuQ291bnQgPT0gMCkgcmV0dXJuIG91dF87XHJcblxyXG4gICAgICAgICAgICBpZiAocm9vdGRlZiA9PSBudWxsKSByb290ZGVmID0gZGVmO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZGVmLkltcG9ydHMpXHJcblxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTZXJ2aWNlRGVmaW5pdGlvbiBkZWYyOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmICghZGVmcy5UcnlHZXRWYWx1ZShlLCBvdXQgZGVmMikpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIlNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBlICsgXCJcXFwiIG5vdCBmb3VuZC5cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmMi5OYW1lID09IHJvb3RkZWYuTmFtZSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiUmVjdXJzaXZlIGltcG9ydHMgYmV0d2VlbiBcXFwiXCIgKyBkZWYuTmFtZSArIFwiXFxcIiBhbmQgXFxcIlwiICsgcm9vdGRlZi5OYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgcnJpbXBvcnRzIGltcDIgPSBnZXRfaW1wb3J0cyhkZWYyLCBkZWZzLCByb290ZGVmKTtcclxuICAgICAgICAgICAgICAgIG91dF8uaW1wb3J0ZWQuQWRkKGltcDIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb3V0XztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFZlcmlmeUltcG9ydHMoU2VydmljZURlZmluaXRpb24gZGVmLCBEaWN0aW9uYXJ5PHN0cmluZyxTZXJ2aWNlRGVmaW5pdGlvbj4gZGVmcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJyaW1wb3J0cyBjID0gZ2V0X2ltcG9ydHMoZGVmLCBkZWZzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBWZXJpZnlTZXJ2aWNlRGVmaW5pdGlvbnMoRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VEZWZpbml0aW9uPiBkZWYsIHJlZiBMaXN0PEV4Y2VwdGlvbj4gd2FybmluZ3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBkZWYuVmFsdWVzKVxyXG5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZS5DaGVja1ZlcnNpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWUuTmFtZS5TdGFydHNXaXRoKFwiUm9ib3RSYWNvbnRldXJUZXN0U2VydmljZVwiKSAmJiAhZS5OYW1lLlN0YXJ0c1dpdGgoXCJSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBWZXJpZnlOYW1lKGUuTmFtZSwgZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGUuTmFtZS5FbmRzV2l0aChcIl9zaWduZWRcIikpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIlNlcnZpY2UgZGVmaW5pdGlvbiBuYW1lcyBlbmRpbmcgd2l0aCBcXFwiX3NpZ25lZFxcXCIgYXJlIHJlc2VydmVkXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIFZlcmlmeUltcG9ydHMoZSwgZGVmKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZXMgPSBuZXcgSGFzaFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZWUgaW4gZS5PcHRpb25zKVxyXG5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgczEgPSBlZS5TcGxpdCgoc3RyaW5nW10pbnVsbCwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMxWzBdID09IFwiY29uc3RhbnRcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gVmVyaWZ5Q29uc3RhbnQoZWUsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZXMuQ29udGFpbnMobmFtZSkpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIlNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBlLk5hbWUgKyBcIlxcXCIgY29udGFpbnMgbXVsdGlwbGUgaGlnaCBsZXZlbCBuYW1lcyBcXFwiXCIgKyBuYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lcy5BZGQobmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlLkNvbnN0YW50cy5Db3VudCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeVZlcnNpb25TdXBwb3J0KGUsIDAsIDksIFwiU2VydmljZSBkZWZpbml0aW9uIHN0YW5kYXJkIHZlcnNpb24gMC45IG9yIGdyZWF0ZXIgcmVxdWlyZWQgZm9yIFxcXCJjb25zdGFudFxcXCIga2V5d29yZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZWUgaW4gZS5Db25zdGFudHMuVmFsdWVzKVxyXG5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgbmFtZSA9IFZlcmlmeUNvbnN0YW50KGVlLCBlLCBlLkNvbnN0YW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVzLkNvbnRhaW5zKG5hbWUpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJTZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZS5OYW1lICsgXCJcXFwiIGNvbnRhaW5zIG11bHRpcGxlIGhpZ2ggbGV2ZWwgbmFtZXMgXFxcIlwiICsgbmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lcy5BZGQobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGVlIGluIGUuRXhjZXB0aW9ucylcclxuXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVyaWZ5TmFtZShlZSwgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSBlZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmFtZXMuQ29udGFpbnMobmFtZSkpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIlNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBlLk5hbWUgKyBcIlxcXCIgY29udGFpbnMgbXVsdGlwbGUgaGlnaCBsZXZlbCBuYW1lcyBcXFwiXCIgKyBuYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzLkFkZChuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW1wb3J0ZWRkZWZzID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRGVmaW5pdGlvbj4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlZSBpbiBlLkltcG9ydHMpXHJcblxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlZTIgaW4gZGVmLlZhbHVlcylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWUgPT0gZWUyLk5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVkZGVmcy5BZGQoZWUyLk5hbWUsIGVlMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICgoYm9vbCllLlN0ZFZlcilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZWUgaW4gaW1wb3J0ZWRkZWZzLlZhbHVlcylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShib29sKWVlLlN0ZFZlciB8fCBlZS5TdGRWZXIgPiBlLlN0ZFZlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW1wb3J0ZWQgc2VydmljZSBkZWZpbml0aW9uIFwiICsgZWUuTmFtZSArIFwiIGhhcyBhIGhpZ2hlciBTZXJ2aWNlIERlZmluaXRpb24gc3RhbmRhcmQgdmVyc2lvbiB0aGFuIFwiICsgZS5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5Vc2luZy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVyaWZ5VmVyc2lvblN1cHBvcnQoZSwgMCwgOSwgXCJTZXJ2aWNlIGRlZmluaXRpb24gc3RhbmRhcmQgdmVyc2lvbiAwLjkgb3IgZ3JlYXRlciByZXF1aXJlZCBmb3IgXFxcInVzaW5nXFxcIiBrZXl3b3JkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlZSBpbiBlLlVzaW5nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBuYW1lID0gZWUuVW5xdWFsaWZpZWROYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuYW1lcy5Db250YWlucyhuYW1lKSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiU2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGUuTmFtZSArIFwiXFxcIiBjb250YWlucyBtdWx0aXBsZSBoaWdoIGxldmVsIG5hbWVzIFxcXCJcIiArIG5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVyaWZ5VXNpbmcoZWUsIGUsIGltcG9ydGVkZGVmcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMuQWRkKG5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5FbnVtcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVyaWZ5VmVyc2lvblN1cHBvcnQoZSwgMCwgOSwgXCJTZXJ2aWNlIGRlZmluaXRpb24gc3RhbmRhcmQgdmVyc2lvbiAwLjkgb3IgZ3JlYXRlciByZXF1aXJlZCBmb3IgXFxcImVudW1cXFwiIGtleXdvcmRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGVlIGluIGUuRW51bXMuVmFsdWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeUVudW0oZWUsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBuYW1lID0gZWUuTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmFtZXMuQ29udGFpbnMobmFtZSkpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIlNlcnZpY2UgZGVmaW5pdGlvbiBcXFwiXCIgKyBlLk5hbWUgKyBcIlxcXCIgY29udGFpbnMgbXVsdGlwbGUgaGlnaCBsZXZlbCBuYW1lcyBcXFwiXCIgKyBuYW1lICsgXCJcXFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzLkFkZChuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZWUgaW4gZS5TdHJ1Y3R1cmVzLlZhbHVlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBWZXJpZnlTdHJ1Y3R1cmUoZWUsIGUsIGltcG9ydGVkZGVmcywgcmVmIHdhcm5pbmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSBlZS5OYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuYW1lcy5Db250YWlucyhuYW1lKSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiU2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGUuTmFtZSArIFwiXFxcIiBjb250YWlucyBtdWx0aXBsZSBoaWdoIGxldmVsIG5hbWVzIFxcXCJcIiArIG5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMuQWRkKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlZSBpbiBlLlBvZHMuVmFsdWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeVBvZChlZSwgZSwgaW1wb3J0ZWRkZWZzLCByZWYgd2FybmluZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgbmFtZSA9IGVlLk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVzLkNvbnRhaW5zKG5hbWUpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJTZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZS5OYW1lICsgXCJcXFwiIGNvbnRhaW5zIG11bHRpcGxlIGhpZ2ggbGV2ZWwgbmFtZXMgXFxcIlwiICsgbmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lcy5BZGQobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGVlIGluIGUuTmFtZWRBcnJheXMuVmFsdWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeU5hbWVkQXJyYXkoZWUsIGUsIGltcG9ydGVkZGVmcywgcmVmIHdhcm5pbmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSBlZS5OYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuYW1lcy5Db250YWlucyhuYW1lKSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiU2VydmljZSBkZWZpbml0aW9uIFxcXCJcIiArIGUuTmFtZSArIFwiXFxcIiBjb250YWlucyBtdWx0aXBsZSBoaWdoIGxldmVsIG5hbWVzIFxcXCJcIiArIG5hbWUgKyBcIlxcXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMuQWRkKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlZSBpbiBlLk9iamVjdHMuVmFsdWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlcmlmeU9iamVjdChlZSwgZSwgaW1wb3J0ZWRkZWZzLCByZWYgd2FybmluZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgbmFtZSA9IGVlLk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVzLkNvbnRhaW5zKG5hbWUpKSB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJTZXJ2aWNlIGRlZmluaXRpb24gXFxcIlwiICsgZS5OYW1lICsgXCJcXFwiIGNvbnRhaW5zIG11bHRpcGxlIGhpZ2ggbGV2ZWwgbmFtZXMgXFxcIlwiICsgbmFtZSArIFwiXFxcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lcy5BZGQobmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBWZXJpZnlTZXJ2aWNlRGVmaW5pdGlvbnMoRGljdGlvbmFyeTxzdHJpbmcsU2VydmljZURlZmluaXRpb24+IGRlZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3YXJuaW5ncyA9IG5ldyBMaXN0PEV4Y2VwdGlvbj4oKTtcclxuICAgICAgICAgICAgVmVyaWZ5U2VydmljZURlZmluaXRpb25zKGRlZiwgcmVmIHdhcm5pbmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBib29sIENvbXBhcmVDb25zdGFudERlZmluaXRpb24oU2VydmljZURlZmluaXRpb24gc2VydmljZTEsIENvbnN0YW50RGVmaW5pdGlvbiBkMSwgU2VydmljZURlZmluaXRpb24gc2VydmljZTIsIENvbnN0YW50RGVmaW5pdGlvbiBkMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkMS5OYW1lICE9IGQyLk5hbWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKCFDb21wYXJlVHlwZURlZmluaXRpb24oc2VydmljZTEsIGQxLlR5cGUsIHNlcnZpY2UyLCBkMi5UeXBlKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoZDEuVmFsdWUuVHJpbSgpICE9IGQyLlZhbHVlLlRyaW0oKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBDb21wYXJlU2VydmljZUVudHJ5RGVmaW5pdGlvbihTZXJ2aWNlRGVmaW5pdGlvbiBzZXJ2aWNlMSwgU2VydmljZUVudHJ5RGVmaW5pdGlvbiBkMSwgU2VydmljZURlZmluaXRpb24gc2VydmljZTIsIFNlcnZpY2VFbnRyeURlZmluaXRpb24gZDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZDEuTmFtZSAhPSBkMi5OYW1lKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChkMS5FbnRyeVR5cGUgIT0gZDIuRW50cnlUeXBlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPHN0cmluZz4oZDEuSW1wbGVtZW50cyxkMi5JbXBsZW1lbnRzKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxzdHJpbmc+KGQxLk9wdGlvbnMsZDIuT3B0aW9ucykpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGQxLkNvbnN0YW50cy5Db3VudCAhPSBkMi5Db25zdGFudHMuQ291bnQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgc3RyaW5nW10gY29uc3RhbnRfa2V5cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9BcnJheTxzdHJpbmc+KGQxLkNvbnN0YW50cy5LZXlzKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBkMS5Db25zdGFudHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFDb21wYXJlQ29uc3RhbnREZWZpbml0aW9uKHNlcnZpY2UxLCBkMS5Db25zdGFudHNbY29uc3RhbnRfa2V5c1tpXV0sIHNlcnZpY2UyLCBkMi5Db25zdGFudHNbY29uc3RhbnRfa2V5c1tpXV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGQxLk1lbWJlcnMuQ291bnQgIT0gZDIuTWVtYmVycy5Db3VudCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBzdHJpbmdbXSBtZW1iZXJfa2V5cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9BcnJheTxzdHJpbmc+KGQxLk1lbWJlcnMuS2V5cyk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZDEuTWVtYmVycy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUNvbXBhcmVNZW1iZXIoZDEuTWVtYmVyc1ttZW1iZXJfa2V5c1tpXV0sIGQyLk1lbWJlcnNbbWVtYmVyX2tleXNbaV1dKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgYm9vbCBDb21wYXJlVXNpbmdEZWZpbml0aW9uKFVzaW5nRGVmaW5pdGlvbiB1MSwgVXNpbmdEZWZpbml0aW9uIHUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHUxLlF1YWxpZmllZE5hbWUgIT0gdTIuUXVhbGlmaWVkTmFtZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodTEuVW5xdWFsaWZpZWROYW1lICE9IHUyLlVucXVhbGlmaWVkTmFtZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBib29sIENvbXBhcmVFbnVtRGVmaW5pdGlvbihFbnVtRGVmaW5pdGlvbiBlbnVtMSwgRW51bURlZmluaXRpb24gZW51bTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZW51bTEuTmFtZSAhPSBlbnVtMi5OYW1lKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChlbnVtMS5WYWx1ZXMuQ291bnQgIT0gZW51bTIuVmFsdWVzLkNvdW50KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZW51bTEuVmFsdWVzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbnVtMS5WYWx1ZXNbaV0uTmFtZSAhPSBlbnVtMi5WYWx1ZXNbaV0uTmFtZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudW0xLlZhbHVlc1tpXS5WYWx1ZSAhPSBlbnVtMi5WYWx1ZXNbaV0uVmFsdWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChlbnVtMS5WYWx1ZXNbaV0uSW1wbGljaXRWYWx1ZSAhPSBlbnVtMi5WYWx1ZXNbaV0uSW1wbGljaXRWYWx1ZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudW0xLlZhbHVlc1tpXS5IZXhWYWx1ZSAhPSBlbnVtMi5WYWx1ZXNbaV0uSGV4VmFsdWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBDb21wYXJlU2VydmljZURlZmluaXRpb25zKFNlcnZpY2VEZWZpbml0aW9uIHNlcnZpY2UxLCBTZXJ2aWNlRGVmaW5pdGlvbiBzZXJ2aWNlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzZXJ2aWNlMS5OYW1lICE9IHNlcnZpY2UyLk5hbWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8c3RyaW5nPihzZXJ2aWNlMS5JbXBvcnRzLHNlcnZpY2UyLkltcG9ydHMpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPHN0cmluZz4oc2VydmljZTEuT3B0aW9ucyxzZXJ2aWNlMi5PcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlcnZpY2UxLlVzaW5nLkNvdW50ICE9IHNlcnZpY2UyLlVzaW5nLkNvdW50KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2VydmljZTEuVXNpbmcuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFDb21wYXJlVXNpbmdEZWZpbml0aW9uKHNlcnZpY2UxLlVzaW5nW2ldLCBzZXJ2aWNlMi5Vc2luZ1tpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VydmljZTEuQ29uc3RhbnRzLkNvdW50ICE9IHNlcnZpY2UyLkNvbnN0YW50cy5Db3VudCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBzZXJ2aWNlMS5Db25zdGFudHMuS2V5cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFDb21wYXJlQ29uc3RhbnREZWZpbml0aW9uKHNlcnZpY2UxLCBzZXJ2aWNlMS5Db25zdGFudHNbaV0sIHNlcnZpY2UyLCBzZXJ2aWNlMi5Db25zdGFudHNbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHNlcnZpY2UxLkVudW1zLkNvdW50ICE9IHNlcnZpY2UyLkVudW1zLkNvdW50KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHNlcnZpY2UxLkVudW1zLktleXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghQ29tcGFyZUVudW1EZWZpbml0aW9uKHNlcnZpY2UxLkVudW1zW2ldLCBzZXJ2aWNlMi5FbnVtc1tpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VydmljZTEuU3RkVmVyICE9IHNlcnZpY2UyLlN0ZFZlcikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlcnZpY2UxLk9iamVjdHMuQ291bnQgIT0gc2VydmljZTIuT2JqZWN0cy5Db3VudCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBzZXJ2aWNlMS5PYmplY3RzLktleXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghQ29tcGFyZVNlcnZpY2VFbnRyeURlZmluaXRpb24oc2VydmljZTEsIHNlcnZpY2UxLk9iamVjdHNbaV0sIHNlcnZpY2UyLCBzZXJ2aWNlMi5PYmplY3RzW2ldKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzZXJ2aWNlMS5TdHJ1Y3R1cmVzLkNvdW50ICE9IHNlcnZpY2UyLlN0cnVjdHVyZXMuQ291bnQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gc2VydmljZTEuU3RydWN0dXJlcy5LZXlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUNvbXBhcmVTZXJ2aWNlRW50cnlEZWZpbml0aW9uKHNlcnZpY2UxLCBzZXJ2aWNlMS5TdHJ1Y3R1cmVzW2ldLCBzZXJ2aWNlMiwgc2VydmljZTIuU3RydWN0dXJlc1tpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VydmljZTEuUG9kcy5Db3VudCAhPSBzZXJ2aWNlMi5Qb2RzLkNvdW50KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHNlcnZpY2UxLlBvZHMuS2V5cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFDb21wYXJlU2VydmljZUVudHJ5RGVmaW5pdGlvbihzZXJ2aWNlMSwgc2VydmljZTEuUG9kc1tpXSwgc2VydmljZTIsIHNlcnZpY2UyLlBvZHNbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBFc3RpbWF0ZVBvZFBhY2tlZEVsZW1lbnRTaXplKFNlcnZpY2VFbnRyeURlZmluaXRpb24gZGVmLCBEaWN0aW9uYXJ5PHN0cmluZyxTZXJ2aWNlRGVmaW5pdGlvbj4gb3RoZXJfZGVmcz1udWxsLCBSb2JvdFJhY29udGV1ck5vZGUgbm9kZSA9IG51bGwsIG9iamVjdCBjbGllbnQgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHMgPSAxNjtcclxuICAgICAgICAgICAgcyArPSBBcnJheUJpbmFyeVdyaXRlci5HZXRTdHJpbmdCeXRlQ291bnQ4KGRlZi5OYW1lKTtcclxuICAgICAgICAgICAgZm9yZWFjaCggdmFyIG0gaW4gZGVmLk1lbWJlcnMuVmFsdWVzKVxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG0gYXMgUHJvcGVydHlEZWZpbml0aW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKERhdGFUeXBlVXRpbC5Jc051bWJlcihwLlR5cGUuVHlwZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcyArPSAxNjtcclxuICAgICAgICAgICAgICAgICAgICBzICs9IEFycmF5QmluYXJ5V3JpdGVyLkdldFN0cmluZ0J5dGVDb3VudDgocC5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgYXJyYXlfY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAuVHlwZS5BcnJheVR5cGUgPT0gRGF0YVR5cGVzX0FycmF5VHlwZXMubm9uZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5X2NvdW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlfY291bnQgPSAoaW50KVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGludCxpbnQ+KHAuVHlwZS5BcnJheUxlbmd0aCwxLCAoRnVuYzxpbnQsaW50LGludD4pKCh4LCB5KSA9PiB4ICogeSkpOztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcyArPSAoaW50KURhdGFUeXBlVXRpbC5zaXplKHAuVHlwZS5UeXBlKSAqIGFycmF5X2NvdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBudCA9IChTZXJ2aWNlRW50cnlEZWZpbml0aW9uKShwLlR5cGUuUmVzb2x2ZU5hbWVkVHlwZShvdGhlcl9kZWZzLCBub2RlLCBjbGllbnQpKTtcclxuICAgICAgICAgICAgICAgICAgICBzICs9IDE2O1xyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gQXJyYXlCaW5hcnlXcml0ZXIuR2V0U3RyaW5nQnl0ZUNvdW50OChwLk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gQXJyYXlCaW5hcnlXcml0ZXIuR2V0U3RyaW5nQnl0ZUNvdW50OChudC5SZXNvbHZlUXVhbGlmaWVkTmFtZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgYXJyYXlfY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAuVHlwZS5BcnJheVR5cGUgPT0gRGF0YVR5cGVzX0FycmF5VHlwZXMubm9uZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5X2NvdW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlfY291bnQgPSAoaW50KVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGludCxpbnQ+KHAuVHlwZS5BcnJheUxlbmd0aCwxLChGdW5jPGludCxpbnQsaW50PikoKHgseSkgPT4geCp5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gRXN0aW1hdGVQb2RQYWNrZWRFbGVtZW50U2l6ZShudCwgb3RoZXJfZGVmcywgbm9kZSwgY2xpZW50KSAqIGFycmF5X2NvdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUdXBsZTxEYXRhVHlwZXMsIGludD4gR2V0TmFtZWRBcnJheUVsZW1lbnRUeXBlQW5kQ291bnQoU2VydmljZUVudHJ5RGVmaW5pdGlvbiBkZWYsIERpY3Rpb25hcnk8c3RyaW5nLFNlcnZpY2VEZWZpbml0aW9uPiBvdGhlcl9kZWZzPW51bGwsIFJvYm90UmFjb250ZXVyTm9kZSBub2RlID0gbnVsbCwgb2JqZWN0IGNsaWVudCA9IG51bGwsIEhhc2hTZXQ8c3RyaW5nPiBuID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChuID09IG51bGwpIG4gPSBuZXcgSGFzaFNldDxzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVmLkVudHJ5VHlwZSAhPSBEYXRhVHlwZXMubmFtZWRhcnJheV90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkFyZ3VtZW50IG11c3QgYmUgYW4gbmFtZWRhcnJheVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbi5BZGQoZGVmLk5hbWUpO1xyXG5cclxuICAgICAgICAgICAgRGF0YVR5cGVzIGVsZW1lbnRfdHlwZSA9IERhdGFUeXBlcy52b2lkX3Q7XHJcbiAgICAgICAgICAgIGludCBlbGVtZW50X2NvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZWYuTWVtYmVycy5Db3VudD09MClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwibmFtZWRhcnJheSBtdXN0IG5vdCBiZSBlbXB0eVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgZSBpbiBkZWYuTWVtYmVycy5WYWx1ZXMpXHJcbiAgICBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgZmllbGRfZWxlbWVudF9jb3VudCA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBlIGFzIFByb3BlcnR5RGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgICAgIGlmIChwID09IG51bGwpIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgbWVtYmVyIHR5cGUgaW4gbmFtZWRhcnJheTogXCIgKyBkZWYuTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHAuVHlwZS5Db250YWluZXJUeXBlICE9IERhdGFUeXBlc19Db250YWluZXJUeXBlcy5ub25lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkV4Y2VwdGlvbihcIm5hbWVkYXJyYXkgbXVzdCBub3QgY29udGFpbiBjb250YWluZXJzOiBcIiArIGRlZi5OYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocC5UeXBlLkFycmF5VHlwZSAhPSBEYXRhVHlwZXNfQXJyYXlUeXBlcy5ub25lICYmIHAuVHlwZS5BcnJheVZhckxlbmd0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJuYW1lZGFycmF5IG11c3Qgbm90IGNvbnRhaW4gdmFyaWFibGUgbGVuZ3RoIGFycmF5czogXCIgKyBkZWYuTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHAuVHlwZS5BcnJheVR5cGUgIT0gRGF0YVR5cGVzX0FycmF5VHlwZXMubm9uZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZF9lbGVtZW50X2NvdW50ID0gKGludClTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxpbnQsaW50PihwLlR5cGUuQXJyYXlMZW5ndGgsMSwgKEZ1bmM8aW50LGludCxpbnQ+KSgoeCwgeSkgPT4geCAqIHkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoRGF0YVR5cGVVdGlsLklzTnVtYmVyKHAuVHlwZS5UeXBlKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudF90eXBlID09IERhdGFUeXBlcy52b2lkX3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50X3R5cGUgPSBwLlR5cGUuVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRfdHlwZSAhPSBwLlR5cGUuVHlwZSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwibmFtZWRhcnJheSBtdXN0IGNvbnRhaW4gc2FtZSBudW1lcmljIHR5cGU6IFwiICsgZGVmLk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF9jb3VudCArPSBmaWVsZF9lbGVtZW50X2NvdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocC5UeXBlLlR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkdHlwZV90KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBudF9kZWYgPSBwLlR5cGUuUmVzb2x2ZU5hbWVkVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBldF9kZWYgPSBudF9kZWYgYXMgU2VydmljZUVudHJ5RGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXRfZGVmID09IG51bGwpIHRocm93IG5ldyBJbnRlcm5hbEVycm9yRXhjZXB0aW9uKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldF9kZWYuRW50cnlUeXBlICE9IERhdGFUeXBlcy5uYW1lZGFycmF5X3QpIHRocm93IG5ldyBJbnRlcm5hbEVycm9yRXhjZXB0aW9uKFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobi5Db250YWlucyhldF9kZWYuTmFtZSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZURlZmluaXRpb25FeGNlcHRpb24oXCJSZWN1cnNpdmUgbmFtZWRhcnJheSBkZXRlY3RlZCBpbiBcIiArIGRlZi5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuMiA9IG5ldyBIYXNoU2V0PHN0cmluZz4obik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBHZXROYW1lZEFycmF5RWxlbWVudFR5cGVBbmRDb3VudChldF9kZWYsIG90aGVyX2RlZnMsIG5vZGUsIGNsaWVudCwgbjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50X3R5cGUgPT0gRGF0YVR5cGVzLnZvaWRfdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfdHlwZSA9IHYuSXRlbTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50X3R5cGUgIT0gdi5JdGVtMSkgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwibmFtZWRhcnJheSBtdXN0IGNvbnRhaW4gc2FtZSBudW1lcmljIHR5cGU6IFwiICsgZGVmLk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF9jb3VudCArPSBmaWVsZF9lbGVtZW50X2NvdW50ICogdi5JdGVtMjtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VEZWZpbml0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBuYW1lZGFycmF5IGZpZWxkIGluIFwiICsgZGVmLk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gVHVwbGUuQ3JlYXRlPERhdGFUeXBlcyxpbnQ+KGVsZW1lbnRfdHlwZSwgZWxlbWVudF9jb3VudCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUeXBlIEZpbmRQYXJlbnRJbnRlcmZhY2UoVHlwZSBvYmp0eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxUeXBlPiBpbnRlcmZhY2VzID0gbmV3IExpc3Q8VHlwZT4ob2JqdHlwZS5HZXRJbnRlcmZhY2VzKCkpO1xyXG4gICAgICAgICAgICBpbnRlcmZhY2VzLlJlbW92ZUFsbCgoUHJlZGljYXRlPFR5cGU+KSh4ID0+ICh4LkdldEN1c3RvbUF0dHJpYnV0ZXModHlwZW9mKFJvYm90UmFjb250ZXVyU2VydmljZU9iamVjdEludGVyZmFjZSksIHRydWUpLkxlbmd0aCA9PSAwKSkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGludGVyZmFjZXMuQ291bnQgPT0gMCkgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiT2JqZWN0IG5vdCBhIFJvYm90IFJhY29udGV1ciB0eXBlXCIpO1xyXG4gICAgICAgICAgICBpZiAoaW50ZXJmYWNlcy5Db3VudCA9PSAxKSByZXR1cm4gaW50ZXJmYWNlc1swXTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8VHlwZT4gcGFyZW50aW50ZXJmYWNlcyA9IG5ldyBMaXN0PFR5cGU+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGludGVyZmFjZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9vbCBwYXJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBpbnRlcmZhY2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT0gailcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8VHlwZT4oaW50ZXJmYWNlc1tqXS5HZXRJbnRlcmZhY2VzKCksKEZ1bmM8VHlwZSxib29sPikoeCA9PiB4ID09IGludGVyZmFjZXNbaV0pKSAhPSAwKSBwYXJlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudGludGVyZmFjZXMuQWRkKGludGVyZmFjZXNbaV0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhcmVudGludGVyZmFjZXMuQ291bnQgIT0gMSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIlJvYm90IFJhY29udGV1ciB0eXBlcyBjYW4gb25seSBkaXJlY3RseSBpbmhlcmV0IG9uZSBSb2JvdCBSYWNvbnRldXIgaW50ZXJmYWNlIHR5cGVcIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50aW50ZXJmYWNlc1swXTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBGaW5kT2JqZWN0UlJUeXBlKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IEZpbmRQYXJlbnRJbnRlcmZhY2Uob2JqLkdldFR5cGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiAoKFJvYm90UmFjb250ZXVyU2VydmljZU9iamVjdEludGVyZmFjZSlpLkdldEN1c3RvbUF0dHJpYnV0ZXModHlwZW9mKFJvYm90UmFjb250ZXVyU2VydmljZU9iamVjdEludGVyZmFjZSksIGZhbHNlKVswXSkuUlJUeXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgRmluZFN0cnVjdFJSVHlwZShUeXBlIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocy5Jc0FycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzID0gcy5HZXRFbGVtZW50VHlwZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdDEgPSBzLkdldEN1c3RvbUF0dHJpYnV0ZXModHlwZW9mKFJvYm90UmFjb250ZXVyU2VydmljZVN0cnVjdCksIHRydWUpO1xyXG4gICAgICAgICAgICBpZiAodDEuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoUm9ib3RSYWNvbnRldXJTZXJ2aWNlU3RydWN0KXQxWzBdKS5SUlR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB0MiA9IHMuR2V0Q3VzdG9tQXR0cmlidXRlcyh0eXBlb2YoUm9ib3RSYWNvbnRldXJOYW1lZEFycmF5RWxlbWVudFR5cGVBbmRDb3VudCksIHRydWUpO1xyXG4gICAgICAgICAgICBpZiAodDIuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoUm9ib3RSYWNvbnRldXJOYW1lZEFycmF5RWxlbWVudFR5cGVBbmRDb3VudCl0MlswXSkuUlJUeXBlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdDMgPSBzLkdldEN1c3RvbUF0dHJpYnV0ZXModHlwZW9mKFJvYm90UmFjb250ZXVyU2VydmljZVBvZCksIHRydWUpO1xyXG4gICAgICAgICAgICBpZiAodDMuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgoUm9ib3RSYWNvbnRldXJTZXJ2aWNlUG9kKXQzWzBdKS5SUlR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgUm9ib3QgUmFjb250ZXVyIHN0cnVjdHVyZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG4jcHJhZ21hIHdhcm5pbmcgZGlzYWJsZVxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbntcclxuXHJcbiAgICBwdWJsaWMgZW51bSBEYXRhVHlwZXNcclxuICAgIHtcclxuICAgICAgICB2b2lkX3QgPSAwLFxyXG4gICAgICAgIGRvdWJsZV90LFxyXG4gICAgICAgIHNpbmdsZV90LFxyXG4gICAgICAgIGludDhfdCxcclxuICAgICAgICB1aW50OF90LFxyXG4gICAgICAgIGludDE2X3QsXHJcbiAgICAgICAgdWludDE2X3QsXHJcbiAgICAgICAgaW50MzJfdCxcclxuICAgICAgICB1aW50MzJfdCxcclxuICAgICAgICBpbnQ2NF90LFxyXG4gICAgICAgIHVpbnQ2NF90LFxyXG4gICAgICAgIHN0cmluZ190LFxyXG4gICAgICAgIGNkb3VibGVfdCxcclxuICAgICAgICBjc2luZ2xlX3QsXHJcbiAgICAgICAgYm9vbF90LFxyXG4gICAgICAgIHN0cnVjdHVyZV90ID0gMTAxLFxyXG4gICAgICAgIHZlY3Rvcl90LFxyXG4gICAgICAgIGRpY3Rpb25hcnlfdCxcclxuICAgICAgICBvYmplY3RfdCxcclxuICAgICAgICB2YXJ2YWx1ZV90LFxyXG4gICAgICAgIHZhcm9iamVjdF90LFxyXG4gICAgICAgIGxpc3RfdCA9IDEwOCxcclxuICAgICAgICBwb2RfdCxcclxuICAgICAgICBwb2RfYXJyYXlfdCxcclxuICAgICAgICBwb2RfbXVsdGlkaW1hcnJheV90LFxyXG4gICAgICAgIGVudW1fdCxcclxuICAgICAgICBuYW1lZHR5cGVfdCxcclxuICAgICAgICBuYW1lZGFycmF5X3QsXHJcbiAgICAgICAgbmFtZWRhcnJheV9hcnJheV90LFxyXG4gICAgICAgIG5hbWVkYXJyYXlfbXVsdGlkaW1hcnJheV90LFxyXG4gICAgICAgIG11bHRpZGltYXJyYXlfdFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIERhdGFUeXBlc19BcnJheVR5cGVzXHJcbiAgICB7XHJcbiAgICAgICAgbm9uZSA9IDAsXHJcbiAgICAgICAgYXJyYXksXHJcbiAgICAgICAgbXVsdGlkaW1hcnJheVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIERhdGFUeXBlc19Db250YWluZXJUeXBlc1xyXG4gICAge1xyXG4gICAgICAgIG5vbmUgPSAwLFxyXG4gICAgICAgIGxpc3QsXHJcbiAgICAgICAgbWFwX2ludDMyLFxyXG4gICAgICAgIG1hcF9zdHJpbmcsXHJcbiAgICAgICAgZ2VuZXJhdG9yXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVudW0gTWVzc2FnZUVudHJ5VHlwZVxyXG4gICAge1xyXG4gICAgICAgIE51bGwgPSAwLFxyXG4gICAgICAgIFN0cmVhbU9wID0gMSxcclxuICAgICAgICBTdHJlYW1PcFJldCxcclxuICAgICAgICBTdHJlYW1DaGVja0NhcGFiaWxpdHksXHJcbiAgICAgICAgU3RyZWFtQ2hlY2tDYXBhYmlsaXR5UmV0LFxyXG4gICAgICAgIFN0cmluZ1RhYmxlT3AsXHJcbiAgICAgICAgU3RyaW5nVGFibGVPcFJldCxcclxuICAgICAgICBHZXRTZXJ2aWNlRGVzYyA9IDEwMSxcclxuICAgICAgICBHZXRTZXJ2aWNlRGVzY1JldCxcclxuICAgICAgICBPYmplY3RUeXBlTmFtZSxcclxuICAgICAgICBPYmplY3RUeXBlTmFtZVJldCxcclxuICAgICAgICBTZXJ2aWNlQ2xvc2VkLFxyXG4gICAgICAgIFNlcnZpY2VDbG9zZWRSZXQsXHJcbiAgICAgICAgQ29ubmVjdENsaWVudCxcclxuICAgICAgICBDb25uZWN0Q2xpZW50UmV0LFxyXG4gICAgICAgIERpc2Nvbm5lY3RDbGllbnQsXHJcbiAgICAgICAgRGlzY29ubmVjdENsaWVudFJldCxcclxuICAgICAgICBDb25uZWN0aW9uVGVzdCxcclxuICAgICAgICBDb25uZWN0aW9uVGVzdFJldCxcclxuICAgICAgICBHZXROb2RlSW5mbyxcclxuICAgICAgICBHZXROb2RlSW5mb1JldCxcclxuICAgICAgICBSZWNvbm5lY3RDbGllbnQsXHJcbiAgICAgICAgUmVjb25uZWN0Q2xpZW50UmV0LFxyXG4gICAgICAgIE5vZGVDaGVja0NhcGFiaWxpdHksXHJcbiAgICAgICAgTm9kZUNoZWNrQ2FwYWJpbGl0eVJldCxcclxuICAgICAgICBHZXRTZXJ2aWNlQXR0cmlidXRlcyxcclxuICAgICAgICBHZXRTZXJ2aWNlQXR0cmlidXRlc1JldCxcclxuICAgICAgICBDb25uZWN0Q2xpZW50Q29tYmluZWQsXHJcbiAgICAgICAgQ29ubmVjdENsaWVudENvbWJpbmVkUmV0LFxyXG4gICAgICAgIEVuZHBvaW50Q2hlY2tDYXBhYmlsaXR5ID0gNTAxLFxyXG4gICAgICAgIEVuZHBvaW50Q2hlY2tDYXBhYmlsaXR5UmV0LFxyXG4gICAgICAgIFNlcnZpY2VDaGVja0NhcGFiaWxpdHlSZXEgPSAxMTAxLFxyXG4gICAgICAgIFNlcnZpY2VDaGVja0NhcGFiaWxpdHlSZXQsXHJcbiAgICAgICAgQ2xpZW50S2VlcEFsaXZlUmVxID0gMTEwNSxcclxuICAgICAgICBDbGllbnRLZWVwQWxpdmVSZXQsXHJcbiAgICAgICAgQ2xpZW50U2Vzc2lvbk9wUmVxID0gMTEwNyxcclxuICAgICAgICBDbGllbnRTZXNzaW9uT3BSZXQsXHJcbiAgICAgICAgU2VydmljZVBhdGhSZWxlYXNlZFJlcSxcclxuICAgICAgICBTZXJ2aWNlUGF0aFJlbGVhc2VkUmV0LFxyXG4gICAgICAgIFByb3BlcnR5R2V0UmVxID0gMTExMSxcclxuICAgICAgICBQcm9wZXJ0eUdldFJlcyxcclxuICAgICAgICBQcm9wZXJ0eVNldFJlcSxcclxuICAgICAgICBQcm9wZXJ0eVNldFJlcyxcclxuICAgICAgICBGdW5jdGlvbkNhbGxSZXEgPSAxMTIxLFxyXG4gICAgICAgIEZ1bmN0aW9uQ2FsbFJlcyxcclxuICAgICAgICBHZW5lcmF0b3JOZXh0UmVxLFxyXG4gICAgICAgIEdlbmVyYXRvck5leHRSZXMsXHJcbiAgICAgICAgRXZlbnRSZXEgPSAxMTMxLFxyXG4gICAgICAgIEV2ZW50UmVzLFxyXG4gICAgICAgIFBpcGVQYWNrZXQgPSAxMTQxLFxyXG4gICAgICAgIFBpcGVQYWNrZXRSZXQsXHJcbiAgICAgICAgUGlwZUNvbm5lY3RSZXEsXHJcbiAgICAgICAgUGlwZUNvbm5lY3RSZXQsXHJcbiAgICAgICAgUGlwZURpc2Nvbm5lY3RSZXEsXHJcbiAgICAgICAgUGlwZURpc2Nvbm5lY3RSZXQsXHJcbiAgICAgICAgUGlwZUNsb3NlZCxcclxuICAgICAgICBQaXBlQ2xvc2VkUmV0LFxyXG4gICAgICAgIENhbGxiYWNrQ2FsbFJlcSA9IDExNTEsXHJcbiAgICAgICAgQ2FsbGJhY2tDYWxsUmV0LFxyXG4gICAgICAgIFdpcmVQYWNrZXQgPSAxMTYxLFxyXG4gICAgICAgIFdpcmVQYWNrZXRSZXQsXHJcbiAgICAgICAgV2lyZUNvbm5lY3RSZXEsXHJcbiAgICAgICAgV2lyZUNvbm5lY3RSZXQsXHJcbiAgICAgICAgV2lyZURpc2Nvbm5lY3RSZXEsXHJcbiAgICAgICAgV2lyZURpc2Nvbm5lY3RSZXQsXHJcbiAgICAgICAgV2lyZUNsb3NlZCxcclxuICAgICAgICBXaXJlQ2xvc2VkUmV0LFxyXG4gICAgICAgIE1lbW9yeVJlYWQgPSAxMTcxLFxyXG4gICAgICAgIE1lbW9yeVJlYWRSZXQsXHJcbiAgICAgICAgTWVtb3J5V3JpdGUsXHJcbiAgICAgICAgTWVtb3J5V3JpdGVSZXQsXHJcbiAgICAgICAgTWVtb3J5R2V0UGFyYW0sXHJcbiAgICAgICAgTWVtb3J5R2V0UGFyYW1SZXQsXHJcbiAgICAgICAgV2lyZVBlZWtJblZhbHVlUmVxID0gMTE4MSxcclxuICAgICAgICBXaXJlUGVla0luVmFsdWVSZXQsXHJcbiAgICAgICAgV2lyZVBlZWtPdXRWYWx1ZVJlcSxcclxuICAgICAgICBXaXJlUGVla091dFZhbHVlUmV0LFxyXG4gICAgICAgIFdpcmVQb2tlT3V0VmFsdWVSZXEsXHJcbiAgICAgICAgV2lyZVBva2VPdXRWYWx1ZVJldCxcclxuICAgICAgICBXaXJlVHJhbnNwb3J0T3BSZXEgPSAxMTE2MSxcclxuICAgICAgICBXaXJlVHJhbnNwb3J0T3BSZXQsXHJcbiAgICAgICAgV2lyZVRyYW5zcG9ydEV2ZW50LFxyXG4gICAgICAgIFdpcmVUcmFuc3BvcnRFdmVudFJldFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIE1lc3NhZ2VFcnJvclR5cGVcclxuICAgIHtcclxuICAgICAgICBOb25lID0gMCxcclxuICAgICAgICBDb25uZWN0aW9uRXJyb3IgPSAxLFxyXG4gICAgICAgIFByb3RvY29sRXJyb3IsXHJcbiAgICAgICAgU2VydmljZU5vdEZvdW5kLFxyXG4gICAgICAgIE9iamVjdE5vdEZvdW5kLFxyXG4gICAgICAgIEludmFsaWRFbmRwb2ludCxcclxuICAgICAgICBFbmRwb2ludENvbW11bmljYXRpb25GYXRhbEVycm9yLFxyXG4gICAgICAgIE5vZGVOb3RGb3VuZCxcclxuICAgICAgICBTZXJ2aWNlRXJyb3IsXHJcbiAgICAgICAgTWVtYmVyTm90Rm91bmQsXHJcbiAgICAgICAgTWVtYmVyRm9ybWF0TWlzbWF0Y2gsXHJcbiAgICAgICAgRGF0YVR5cGVNaXNtYXRjaCxcclxuICAgICAgICBEYXRhVHlwZUVycm9yLFxyXG4gICAgICAgIERhdGFTZXJpYWxpemF0aW9uRXJyb3IsXHJcbiAgICAgICAgTWVzc2FnZUVudHJ5Tm90Rm91bmQsXHJcbiAgICAgICAgTWVzc2FnZUVsZW1lbnROb3RGb3VuZCxcclxuICAgICAgICBVbmtub3duRXJyb3IsXHJcbiAgICAgICAgSW52YWxpZE9wZXJhdGlvbixcclxuICAgICAgICBJbnZhbGlkQXJndW1lbnQsXHJcbiAgICAgICAgT3BlcmF0aW9uRmFpbGVkLFxyXG4gICAgICAgIE51bGxWYWx1ZSxcclxuICAgICAgICBJbnRlcm5hbEVycm9yLFxyXG4gICAgICAgIFN5c3RlbVJlc291cmNlUGVybWlzc2lvbkRlbmllZCxcclxuICAgICAgICBPdXRPZlN5c3RlbVJlc291cmNlLFxyXG4gICAgICAgIFN5c3RlbVJlc291cmNlRXJyb3IsXHJcbiAgICAgICAgUmVzb3VyY2VOb3RGb3VuZCxcclxuICAgICAgICBJT0Vycm9yLFxyXG4gICAgICAgIEJ1ZmZlckxpbWl0VmlvbGF0aW9uLFxyXG4gICAgICAgIFNlcnZpY2VEZWZpbml0aW9uRXJyb3IsXHJcbiAgICAgICAgT3V0T2ZSYW5nZSxcclxuICAgICAgICBLZXlOb3RGb3VuZCxcclxuICAgICAgICBSZW1vdGVFcnJvciA9IDEwMCxcclxuICAgICAgICBSZXF1ZXN0VGltZW91dCxcclxuICAgICAgICBSZWFkT25seU1lbWJlcixcclxuICAgICAgICBXcml0ZU9ubHlNZW1iZXIsXHJcbiAgICAgICAgTm90SW1wbGVtZW50ZWRFcnJvcixcclxuICAgICAgICBNZW1iZXJCdXN5LFxyXG4gICAgICAgIFZhbHVlTm90U2V0LFxyXG4gICAgICAgIEFib3J0T3BlcmF0aW9uLFxyXG4gICAgICAgIE9wZXJhdGlvbkFib3J0ZWQsXHJcbiAgICAgICAgU3RvcEl0ZXJhdGlvbixcclxuICAgICAgICBBdXRoZW50aWNhdGlvbkVycm9yID0gMTUwLFxyXG4gICAgICAgIE9iamVjdExvY2tlZEVycm9yLFxyXG4gICAgICAgIFBlcm1pc3Npb25EZW5pZWQgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RydWN0IENEb3VibGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgZG91YmxlIFJlYWw7XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBJbWFnO1xyXG5cclxuICAgICAgICBwdWJsaWMgQ0RvdWJsZShkb3VibGUgcmVhbCwgZG91YmxlIGltYWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBSZWFsID0gcmVhbDtcclxuICAgICAgICAgICAgSW1hZyA9IGltYWc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oQ0RvdWJsZSBhLCBDRG91YmxlIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKGEuUmVhbCA9PSBiLlJlYWwpICYmIChhLkltYWcgPT0gYi5JbWFnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShDRG91YmxlIGEsIENEb3VibGUgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKChhLlJlYWwgPT0gYi5SZWFsKSAmJiAoYS5JbWFnID09IGIuSW1hZykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKCEob2JqIGlzIENEb3VibGUpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiAoKENEb3VibGUpb2JqKSA9PSB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKGludCkoUmVhbCAlIDFlNyArIEltYWcgJSAxZTcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RydWN0IENTaW5nbGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgZmxvYXQgUmVhbDtcclxuICAgICAgICBwdWJsaWMgZmxvYXQgSW1hZztcclxuXHJcbiAgICAgICAgcHVibGljIENTaW5nbGUoZmxvYXQgcmVhbCwgZmxvYXQgaW1hZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFJlYWwgPSByZWFsO1xyXG4gICAgICAgICAgICBJbWFnID0gaW1hZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciA9PShDU2luZ2xlIGEsIENTaW5nbGUgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoYS5SZWFsID09IGIuUmVhbCkgJiYgKGEuSW1hZyA9PSBiLkltYWcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yICE9KENTaW5nbGUgYSwgQ1NpbmdsZSBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICEoKGEuUmVhbCA9PSBiLlJlYWwpICYmIChhLkltYWcgPT0gYi5JbWFnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgQ1NpbmdsZSkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuICgoQ1NpbmdsZSlvYmopID09IHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KShSZWFsICUgMWU3ICsgSW1hZyAlIDFlNyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBEYXRhVHlwZVV0aWxcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVpbnQgc2l6ZShEYXRhVHlwZXMgdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuZG91YmxlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDg7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuc2luZ2xlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQ4X3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50OF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50MTZfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnVpbnQxNl90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50MzJfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnVpbnQzMl90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA0O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50NjRfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnVpbnQ2NF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA4O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuc3RyaW5nX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5jZG91YmxlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE2O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuY3NpbmdsZV90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA4O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuYm9vbF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIGRhdGEgdHlwZVwiKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIERhdGFUeXBlcyBUeXBlSURGcm9tU3RyaW5nKHN0cmluZyBzdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3R5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJudWxsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy52b2lkX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLkRvdWJsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuZG91YmxlX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLlNpbmdsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuc2luZ2xlX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLlNCeXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5pbnQ4X3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLkJ5dGVcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnVpbnQ4X3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLkludDE2XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5pbnQxNl90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5VSW50MTZcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnVpbnQxNl90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5JbnQzMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuaW50MzJfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uVUludDMyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy51aW50MzJfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uSW50NjRcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmludDY0X3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLlVJbnQ2NFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMudWludDY0X3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLlN0cmluZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuc3RyaW5nX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLkJvb2xlYW5cIjogICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5ib29sX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuQ0RvdWJsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuY2RvdWJsZV90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJvYm90UmFjb250ZXVyV2ViLkNTaW5nbGVcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLmNzaW5nbGVfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudFN0cnVjdHVyZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuc3RydWN0dXJlX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnRNYXA8aW50PlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMudmVjdG9yX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnRNYXA8c3RyaW5nPlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuZGljdGlvbmFyeV90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50TXVsdGlEaW1BcnJheVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMubXVsdGlkaW1hcnJheV90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50TGlzdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMubGlzdF90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50UG9kXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5wb2RfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudFBvZEFycmF5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5wb2RfYXJyYXlfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudFBvZE11bHRpRGltQXJyYXlcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnBvZF9tdWx0aWRpbWFycmF5X3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5uYW1lZGFycmF5X2FycmF5X3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnROYW1lZE11bHRpRGltQXJyYXlcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLm5hbWVkYXJyYXlfbXVsdGlkaW1hcnJheV90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5PYmplY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVR5cGVzLnZhcnZhbHVlX3Q7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIlVua25vd24gZGF0YSB0eXBlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFR5cGVJREZyb21TdHJpbmdfa25vd24oc3RyaW5nIHN0eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoIChzdHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm51bGxcIjpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uRG91YmxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLlNpbmdsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5TQnl0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLkJ5dGVcIjpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uSW50MTZcIjpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uVUludDE2XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLkludDMyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLlVJbnQzMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5JbnQ2NFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5VSW50NjRcIjpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uU3RyaW5nXCI6XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5Cb29sZWFuXCI6XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJvYm90UmFjb250ZXVyV2ViLkNEb3VibGVcIjpcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuQ1NpbmdsZVwiOlxyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudFN0cnVjdHVyZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50SW5kZXhlZFNldDxpbnQ+XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnRJbmRleGVkU2V0PHN0cmluZz5cIjpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudE11bHRpRGltQXJyYXlcIjpcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uT2JqZWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc051bWJlcihEYXRhVHlwZXMgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuZG91YmxlX3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5zaW5nbGVfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDhfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnVpbnQ4X3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQxNl90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDE2X3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQzMl90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDMyX3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5pbnQ2NF90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDY0X3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5jZG91YmxlX3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5jc2luZ2xlX3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5ib29sX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBBcnJheSBBcnJheUZyb21EYXRhVHlwZShEYXRhVHlwZXMgdCwgdWludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuZG91YmxlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBkb3VibGVbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnNpbmdsZV90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZmxvYXRbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgIERhdGFUeXBlcy5pbnQ4X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBzYnl0ZVtsZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDhfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGJ5dGVbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgIERhdGFUeXBlcy5pbnQxNl90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgc2hvcnRbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgIERhdGFUeXBlcy51aW50MTZfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHVzaG9ydFtsZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAgRGF0YVR5cGVzLmludDMyX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBpbnRbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgIERhdGFUeXBlcy51aW50MzJfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHVpbnRbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgIERhdGFUeXBlcy5pbnQ2NF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbG9uZ1tsZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAgRGF0YVR5cGVzLnVpbnQ2NF90OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdWxvbmdbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgIERhdGFUeXBlcy5zdHJpbmdfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmNkb3VibGVfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENEb3VibGVbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmNzaW5nbGVfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENTaW5nbGVbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmJvb2xfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGJvb2xbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgIERhdGFUeXBlcy5zdHJ1Y3R1cmVfdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiQ291bGQgbm90IGNyZWF0ZSBhcnJheSBmb3IgZGF0YSB0eXBlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBPYmplY3QgQXJyYXlGcm9tU2NhbGFyKE9iamVjdCBpbnYpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYgKGludiBpcyBBcnJheSkgcmV0dXJuIGludjtcclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBzdHlwZSA9IGludi5HZXRUeXBlKCkuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgc3dpdGNoIChzdHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5Eb3VibGVcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGRvdWJsZVtdIHsoKGRvdWJsZSlpbnYpfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uU2luZ2xlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBmbG9hdFtdIHsoKGZsb2F0KWludil9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5TQnl0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgc2J5dGVbXSB7ICgoc2J5dGUpaW52KSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5CeXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBieXRlW10geyAoKGJ5dGUpaW52KSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5JbnQxNlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgc2hvcnRbXSB7ICgoc2hvcnQpaW52KSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5VSW50MTZcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHVzaG9ydFtdIHsgKCh1c2hvcnQpaW52KSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlN5c3RlbS5JbnQzMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaW50W10geyAoKGludClpbnYpIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLlVJbnQzMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdWludFtdIHsgKCh1aW50KWludikgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uSW50NjRcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGxvbmdbXSB7ICgobG9uZylpbnYpIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU3lzdGVtLlVJbnQ2NFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdWxvbmdbXSB7ICgodWxvbmcpaW52KSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJvYm90UmFjb250ZXVyV2ViLkNEb3VibGVcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENEb3VibGVbXSB7ICgoQ0RvdWJsZSlpbnYpIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuQ1NpbmdsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ1NpbmdsZVtdIHsgKChDU2luZ2xlKWludikgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTeXN0ZW0uQm9vbGVhblwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYm9vbFtdIHsgKChib29sKWludikgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiQ291bGQgbm90IGNyZWF0ZSBhcnJheSBmb3IgZGF0YVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0YVR5cGVzIFR5cGVJREZyb21UeXBlKFR5cGUgc3R5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKFR5cGUuR2V0VHlwZUNvZGUoc3R5cGUpKVxyXG4gICAgICAgICAgICB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5Eb3VibGU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5kb3VibGVfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuU2luZ2xlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuc2luZ2xlX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlNCeXRlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuaW50OF90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5CeXRlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMudWludDhfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50MTY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5pbnQxNl90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50MTY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy51aW50MTZfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50MzI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5pbnQzMl90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50MzI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy51aW50MzJfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50NjQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5pbnQ2NF90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50NjQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy51aW50NjRfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuc3RyaW5nX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkJvb2xlYW46XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5ib29sX3Q7XHJcbiAgICAgICAgICAgICAgICAvKmNhc2UgXCJSb2JvdFJhY29udGV1cldlYi5DRG91YmxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5jZG91YmxlX3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuQ1NpbmdsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVHlwZXMuY3NpbmdsZV90O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50U3RydWN0dXJlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5zdHJ1Y3R1cmVfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudE1hcDxpbnQ+XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy52ZWN0b3JfdDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudE1hcDxzdHJpbmc+XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5kaWN0aW9uYXJ5X3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5tdWx0aWRpbWFycmF5X3Q7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnRMaXN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5saXN0X3Q7Ki9cclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuT2JqZWN0OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eXBlID09IHR5cGVvZihDRG91YmxlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5jZG91YmxlX3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eXBlID09IHR5cGVvZihDU2luZ2xlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy5jc2luZ2xlX3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUeXBlcy52YXJ2YWx1ZV90O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiVW5rbm93biBkYXRhIHR5cGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRbXSBWZXJpZnlBcnJheUxlbmd0aDxUPihUW10gYSwgaW50IGxlbiwgYm9vbCB2YXJsZW5ndGgpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwpIHRocm93IG5ldyBOdWxsUmVmZXJlbmNlRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChsZW4gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhcmxlbmd0aCAmJiBhLkxlbmd0aCA+IGxlbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJBcnJheSBkaW1lbnNpb24gbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZhcmxlbmd0aCAmJiBhLkxlbmd0aCAhPSBsZW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiQXJyYXkgZGltZW5zaW9uIG1pc21hdGNoXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTXVsdGlEaW1BcnJheSBWZXJpZnlBcnJheUxlbmd0aChNdWx0aURpbUFycmF5IGEsIGludCBuX2VsZW1zLCB1aW50W10gbGVuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGEuRGltcy5MZW5ndGggIT0gbGVuLkxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiQXJyYXkgZGltZW5zaW9uIG1pc21hdGNoXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbi5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEuRGltc1tpXSAhPSBsZW5baV0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiQXJyYXkgZGltZW5zaW9uIG1pc21hdGNoXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBQb2RNdWx0aURpbUFycmF5IFZlcmlmeUFycmF5TGVuZ3RoKFBvZE11bHRpRGltQXJyYXkgYSwgaW50IG5fZWxlbXMsIHVpbnRbXSBsZW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYS5EaW1zLkxlbmd0aCAhPSBsZW4uTGVuZ3RoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJBcnJheSBkaW1lbnNpb24gbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5EaW1zW2ldICE9IGxlbltpXSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJBcnJheSBkaW1lbnNpb24gbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE5hbWVkTXVsdGlEaW1BcnJheSBWZXJpZnlBcnJheUxlbmd0aChOYW1lZE11bHRpRGltQXJyYXkgYSwgaW50IG5fZWxlbXMsIHVpbnRbXSBsZW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYS5EaW1zLkxlbmd0aCAhPSBsZW4uTGVuZ3RoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJBcnJheSBkaW1lbnNpb24gbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5EaW1zW2ldICE9IGxlbltpXSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJBcnJheSBkaW1lbnNpb24gbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VFtdPiBWZXJpZnlBcnJheUxlbmd0aDxUPihMaXN0PFRbXT4gYSwgaW50IGxlbiwgYm9vbCB2YXJsZW5ndGgpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwpIHJldHVybiBhO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChUW10gYWEgaW4gYSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5QXJyYXlMZW5ndGg8VD4oYWEsIGxlbiwgdmFybGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIERpY3Rpb25hcnk8SywgVFtdPiBWZXJpZnlBcnJheUxlbmd0aDxLLCBUPihEaWN0aW9uYXJ5PEssIFRbXT4gYSwgaW50IGxlbiwgYm9vbCB2YXJsZW5ndGgpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwpIHJldHVybiBhO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChUW10gYWEgaW4gYS5WYWx1ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFZlcmlmeUFycmF5TGVuZ3RoPFQ+KGFhLCBsZW4sIHZhcmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PE11bHRpRGltQXJyYXk+IFZlcmlmeUFycmF5TGVuZ3RoKExpc3Q8TXVsdGlEaW1BcnJheT4gYSwgaW50IG5fZWxlbXMsIHVpbnRbXSBsZW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYSA9PSBudWxsKSByZXR1cm4gYTtcclxuICAgICAgICAgICAgZm9yZWFjaCAoTXVsdGlEaW1BcnJheSBhYSBpbiBhKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWZXJpZnlBcnJheUxlbmd0aChhYSwgbl9lbGVtcywgbGVuKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIERpY3Rpb25hcnk8SywgTXVsdGlEaW1BcnJheT4gVmVyaWZ5QXJyYXlMZW5ndGg8Sz4oRGljdGlvbmFyeTxLLCBNdWx0aURpbUFycmF5PiBhLCBpbnQgbl9lbGVtcywgdWludFtdIGxlbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwpIHJldHVybiBhO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChNdWx0aURpbUFycmF5IGFhIGluIGEuVmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWZXJpZnlBcnJheUxlbmd0aChhYSwgbl9lbGVtcywgbGVuKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8UG9kTXVsdGlEaW1BcnJheT4gVmVyaWZ5QXJyYXlMZW5ndGgoTGlzdDxQb2RNdWx0aURpbUFycmF5PiBhLCBpbnQgbl9lbGVtcywgdWludFtdIGxlbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwpIHJldHVybiBhO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChQb2RNdWx0aURpbUFycmF5IGFhIGluIGEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFZlcmlmeUFycmF5TGVuZ3RoKGFhLCBuX2VsZW1zLCBsZW4pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGljdGlvbmFyeTxLLCBQb2RNdWx0aURpbUFycmF5PiBWZXJpZnlBcnJheUxlbmd0aDxLPihEaWN0aW9uYXJ5PEssIFBvZE11bHRpRGltQXJyYXk+IGEsIGludCBuX2VsZW1zLCB1aW50W10gbGVuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGEgPT0gbnVsbCkgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKFBvZE11bHRpRGltQXJyYXkgYWEgaW4gYS5WYWx1ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFZlcmlmeUFycmF5TGVuZ3RoKGFhLCBuX2VsZW1zLCBsZW4pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxOYW1lZE11bHRpRGltQXJyYXk+IFZlcmlmeUFycmF5TGVuZ3RoKExpc3Q8TmFtZWRNdWx0aURpbUFycmF5PiBhLCBpbnQgbl9lbGVtcywgdWludFtdIGxlbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwpIHJldHVybiBhO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChOYW1lZE11bHRpRGltQXJyYXkgYWEgaW4gYSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5QXJyYXlMZW5ndGgoYWEsIG5fZWxlbXMsIGxlbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBEaWN0aW9uYXJ5PEssIE5hbWVkTXVsdGlEaW1BcnJheT4gVmVyaWZ5QXJyYXlMZW5ndGg8Sz4oRGljdGlvbmFyeTxLLCBOYW1lZE11bHRpRGltQXJyYXk+IGEsIGludCBuX2VsZW1zLCB1aW50W10gbGVuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGEgPT0gbnVsbCkgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKE5hbWVkTXVsdGlEaW1BcnJheSBhYSBpbiBhLlZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmVyaWZ5QXJyYXlMZW5ndGgoYWEsIG5fZWxlbXMsIGxlbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgIH1cclxuICAgIH0gICAgXHJcbiAgICBcclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTWVzc2FnZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlSGVhZGVyIGhlYWRlcjtcclxuICAgICAgICBwdWJsaWMgTGlzdDxNZXNzYWdlRW50cnk+IGVudHJpZXM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVudHJpZXM9bmV3IExpc3Q8TWVzc2FnZUVudHJ5PigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVpbnQgQ29tcHV0ZVNpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCBzPWhlYWRlci5Db21wdXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRW50cnkgZSBpbiBlbnRyaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzICs9IGUuQ29tcHV0ZVNpemUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFdyaXRlKEFycmF5QmluYXJ5V3JpdGVyIHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3LlB1c2hSZWxhdGl2ZUxpbWl0KENvbXB1dGVTaXplKCkpO1xyXG4gICAgICAgICAgICBoZWFkZXIuVXBkYXRlSGVhZGVyKENvbXB1dGVTaXplKCksICh1c2hvcnQpZW50cmllcy5Db3VudCk7XHJcbiAgICAgICAgICAgIGhlYWRlci5Xcml0ZSh3KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVudHJ5IGUgaW4gZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZS5Xcml0ZSh3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAody5EaXN0YW5jZUZyb21MaW1pdCAhPSAwKSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHdyaXRlIGVycm9yXCIpO1xyXG4gICAgICAgICAgICB3LlBvcExpbWl0KCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbnRyeSBGaW5kRW50cnkoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYgKGVudHJpZXMgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRW50cnkgbSBpbiBlbnRyaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobS5NZW1iZXJOYW1lID09IG5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNZXNzYWdlRW50cnlOb3RGb3VuZEV4Y2VwdGlvbihcIkVsZW1lbnQgXCIgKyBuYW1lICsgXCIgbm90IGZvdW5kLlwiKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVudHJ5IEFkZEVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUgdCxzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtID0gbmV3IE1lc3NhZ2VFbnRyeSgpO1xyXG4gICAgICAgICAgICBtLk1lbWJlck5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICBtLkVudHJ5VHlwZSA9IHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoZW50cmllcyA9PSBudWxsKSBlbnRyaWVzID0gbmV3IExpc3Q8TWVzc2FnZUVudHJ5PigpO1xyXG4gICAgICAgICAgICBlbnRyaWVzLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVhZChBcnJheUJpbmFyeVJlYWRlciByKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGVhZGVyID0gbmV3IE1lc3NhZ2VIZWFkZXIoKTtcclxuICAgICAgICAgICAgaGVhZGVyLlJlYWQocik7XHJcblxyXG4gICAgICAgICAgICByLlB1c2hSZWxhdGl2ZUxpbWl0KGhlYWRlci5NZXNzYWdlU2l6ZSAtIGhlYWRlci5IZWFkZXJMZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgdXNob3J0IHMgPSBoZWFkZXIuRW50cnlDb3VudDtcclxuICAgICAgICAgICAgZW50cmllcz1uZXcgTGlzdDxNZXNzYWdlRW50cnk+KHMpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpPTA7IGk8czsgaSsrKSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IGU9bmV3IE1lc3NhZ2VFbnRyeSgpO1xyXG4gICAgICAgICAgICAgICAgZS5SZWFkKHIpO1xyXG4gICAgICAgICAgICAgICAgZW50cmllcy5BZGQoZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHIuUG9wTGltaXQoKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBNZXNzYWdlSGVhZGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHVzaG9ydCBIZWFkZXJMZW5ndGg7XHJcbiAgICAgICAgcHVibGljIHVpbnQgU2VuZGVyRW5kcG9pbnQ7XHJcbiAgICAgICAgcHVibGljIHVpbnQgUmVjZWl2ZXJFbmRwb2ludDtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFNlbmRlck5vZGVOYW1lPVwiXCI7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWNlaXZlck5vZGVOYW1lID0gXCJcIjtcclxuICAgICAgICBwdWJsaWMgTm9kZUlEIFNlbmRlck5vZGVJRD1uZXcgTm9kZUlEKG5ldyBieXRlW10gezAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDB9KTtcclxuICAgICAgICBwdWJsaWMgTm9kZUlEIFJlY2VpdmVyTm9kZUlEID0gbmV3IE5vZGVJRChuZXcgYnl0ZVtdIHsgMCwgMCwgMCwgMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCB9KTtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1ldGFEYXRhPVwiXCI7XHJcbiAgICAgICAgcHVibGljIHVzaG9ydCBFbnRyeUNvdW50O1xyXG4gICAgICAgIHB1YmxpYyB1c2hvcnQgTWVzc2FnZUlEO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyB1c2hvcnQgTWVzc2FnZVJlc0lEO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyB1aW50IE1lc3NhZ2VTaXplO1xyXG5cclxuICAgICAgICBwdWJsaWMgdXNob3J0IENvbXB1dGVTaXplKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAodXNob3J0KSg2NCArIEFycmF5QmluYXJ5V3JpdGVyLkdldFN0cmluZ0J5dGVDb3VudDgoU2VuZGVyTm9kZU5hbWUpICsgQXJyYXlCaW5hcnlXcml0ZXIuR2V0U3RyaW5nQnl0ZUNvdW50OChSZWNlaXZlck5vZGVOYW1lKSArIEFycmF5QmluYXJ5V3JpdGVyLkdldFN0cmluZ0J5dGVDb3VudDgoTWV0YURhdGEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVwZGF0ZUhlYWRlcih1aW50IG1lc3NhZ2Vfc2l6ZSwgdXNob3J0IGVudHJ5X2NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSGVhZGVyTGVuZ3RoID0gQ29tcHV0ZVNpemUoKTtcclxuICAgICAgICAgICAgTWVzc2FnZVNpemUgPSBtZXNzYWdlX3NpemU7XHJcbiAgICAgICAgICAgIEVudHJ5Q291bnQgPSBlbnRyeV9jb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFdyaXRlKEFycmF5QmluYXJ5V3JpdGVyIHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3LlB1c2hSZWxhdGl2ZUxpbWl0KEhlYWRlckxlbmd0aCk7XHJcbiAgICAgICAgICAgIHcuV3JpdGVTdHJpbmc4KFwiUlJBQ1wiKTtcclxuICAgICAgICAgICAgdy5Xcml0ZShNZXNzYWdlU2l6ZSk7XHJcbiAgICAgICAgICAgIHcuV3JpdGUoKHVzaG9ydCkyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHcuV3JpdGUoSGVhZGVyTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGJ5dGVbXSBiU2VuZGVyTm9kZUlEID0gU2VuZGVyTm9kZUlELlRvQnl0ZUFycmF5KCk7XHJcbiAgICAgICAgICAgIGJ5dGVbXSBiUmVjZWl2ZXJOb2RlSUQgPSBSZWNlaXZlck5vZGVJRC5Ub0J5dGVBcnJheSgpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDE2OyBpKyspIHsgdy5Xcml0ZShiU2VuZGVyTm9kZUlEW2ldKTsgfTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7IHcuV3JpdGUoYlJlY2VpdmVyTm9kZUlEW2ldKTsgfTtcclxuICAgICAgICAgICAgdy5Xcml0ZShTZW5kZXJFbmRwb2ludCk7XHJcbiAgICAgICAgICAgIHcuV3JpdGUoUmVjZWl2ZXJFbmRwb2ludCk7XHJcbiAgICAgICAgICAgIHcuV3JpdGUoKHVzaG9ydClBcnJheUJpbmFyeVdyaXRlci5HZXRTdHJpbmdCeXRlQ291bnQ4KFNlbmRlck5vZGVOYW1lKSk7XHJcbiAgICAgICAgICAgIHcuV3JpdGVTdHJpbmc4KFNlbmRlck5vZGVOYW1lKTtcclxuICAgICAgICAgICAgdy5Xcml0ZSgodXNob3J0KUFycmF5QmluYXJ5V3JpdGVyLkdldFN0cmluZ0J5dGVDb3VudDgoUmVjZWl2ZXJOb2RlTmFtZSkpO1xyXG4gICAgICAgICAgICB3LldyaXRlU3RyaW5nOChSZWNlaXZlck5vZGVOYW1lKTtcclxuICAgICAgICAgICAgdy5Xcml0ZSgodXNob3J0KUFycmF5QmluYXJ5V3JpdGVyLkdldFN0cmluZ0J5dGVDb3VudDgoTWV0YURhdGEpKTtcclxuICAgICAgICAgICAgdy5Xcml0ZVN0cmluZzgoTWV0YURhdGEpO1xyXG4gICAgICAgICAgICB3LldyaXRlKCh1c2hvcnQpRW50cnlDb3VudCk7XHJcbiAgICAgICAgICAgIHcuV3JpdGUoTWVzc2FnZUlEKTtcclxuICAgICAgICAgICAgdy5Xcml0ZShNZXNzYWdlUmVzSUQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHcuRGlzdGFuY2VGcm9tTGltaXQgIT0gMCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTWVzc2FnZSB3cml0ZSBlcnJvclwiKTtcclxuICAgICAgICAgICAgdy5Qb3BMaW1pdCgpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlYWQoQXJyYXlCaW5hcnlSZWFkZXIgcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyBzZWVkID0gci5SZWFkU3RyaW5nOCg0KTtcclxuICAgICAgICAgICAgaWYgKHNlZWQgIT1cIlJSQUNcIilcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm90b2NvbEV4Y2VwdGlvbihcIkluY29ycmVjdCBtZXNzYWdlIHNlZWRcIik7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VTaXplID0gci5SZWFkVUludDMyKCk7XHJcbiAgICAgICAgICAgIHVzaG9ydCB2ZXJzaW9uID0gci5SZWFkVUludDE2KCk7XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uICE9IDIpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9jb2xFeGNlcHRpb24oXCJVa25vd24gcHJvdG9jb2wgdmVyc2lvblwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEhlYWRlckxlbmd0aCA9IHIuUmVhZFVJbnQxNigpO1xyXG5cclxuICAgICAgICAgICAgci5QdXNoUmVsYXRpdmVMaW1pdCgodWludCkoSGVhZGVyTGVuZ3RoIC0gMTIpKTtcclxuXHJcbiAgICAgICAgICAgIGJ5dGVbXSBiU2VuZGVyTm9kZUlEID0gbmV3IGJ5dGVbXSB7IDAsIDAsIDAsIDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAgfTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7IGJTZW5kZXJOb2RlSURbaV0gPSByLlJlYWRCeXRlKCk7IH07XHJcbiAgICAgICAgICAgIFNlbmRlck5vZGVJRCA9IG5ldyBOb2RlSUQoYlNlbmRlck5vZGVJRCk7XHJcbiAgICAgICAgICAgIGJ5dGVbXSBiUmVjZWl2ZXJOb2RlSUQgPSBuZXcgYnl0ZVtdIHsgMCwgMCwgMCwgMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCB9O1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDE2OyBpKyspIHsgYlJlY2VpdmVyTm9kZUlEW2ldID0gci5SZWFkQnl0ZSgpOyB9O1xyXG4gICAgICAgICAgICBSZWNlaXZlck5vZGVJRCA9IG5ldyBOb2RlSUQoYlJlY2VpdmVyTm9kZUlEKTtcclxuICAgICAgICAgICAgU2VuZGVyRW5kcG9pbnQgPSByLlJlYWRVSW50MzIoKTtcclxuICAgICAgICAgICAgUmVjZWl2ZXJFbmRwb2ludCA9IHIuUmVhZFVJbnQzMigpO1xyXG4gICAgICAgICAgICB1c2hvcnQgcG5hbWVfcz0gci5SZWFkVUludDE2KCk7XHJcbiAgICAgICAgICAgIFNlbmRlck5vZGVOYW1lID0gci5SZWFkU3RyaW5nOChwbmFtZV9zKTtcclxuICAgICAgICAgICAgdXNob3J0IHBuYW1lX3IgPSByLlJlYWRVSW50MTYoKTtcclxuICAgICAgICAgICAgUmVjZWl2ZXJOb2RlTmFtZSA9IHIuUmVhZFN0cmluZzgocG5hbWVfcik7XHJcbiAgICAgICAgICAgIHVzaG9ydCBtZXRhX3MgPSByLlJlYWRVSW50MTYoKTtcclxuICAgICAgICAgICAgTWV0YURhdGEgPSByLlJlYWRTdHJpbmc4KG1ldGFfcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBFbnRyeUNvdW50ID0gci5SZWFkVUludDE2KCk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VJRCA9IHIuUmVhZFVJbnQxNigpO1xyXG4gICAgICAgICAgICBNZXNzYWdlUmVzSUQgPSByLlJlYWRVSW50MTYoKTtcclxuICAgICAgICAgICAgaWYgKHIuRGlzdGFuY2VGcm9tTGltaXQgIT0gMCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRXJyb3IgcmVhZGluZyBtZXNzYWdlXCIpO1xyXG4gICAgICAgICAgICByLlBvcExpbWl0KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGNsYXNzIE1lc3NhZ2VFbnRyeVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyB1aW50IEVudHJ5U2l6ZTtcclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbnRyeVR5cGUgRW50cnlUeXBlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFNlcnZpY2VQYXRoPVwiXCI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTWVtYmVyTmFtZT1cIlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBSZXF1ZXN0SUQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRXJyb3JUeXBlIEVycm9yO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1ldGFEYXRhPVwiXCI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PE1lc3NhZ2VFbGVtZW50PiBlbGVtZW50cztcclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbnRyeSgpIHtcclxuICAgICAgICAgICAgZWxlbWVudHMgPW5ldyBMaXN0PE1lc3NhZ2VFbGVtZW50PigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlIHQsIHN0cmluZyBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZWxlbWVudHMgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKTtcclxuICAgICAgICAgICAgRW50cnlUeXBlID0gdDtcclxuICAgICAgICAgICAgTWVtYmVyTmFtZSA9IG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBDb21wdXRlU2l6ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHMgPSAyMjtcclxuICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVsZW1lbnQgZSBpbiBlbGVtZW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcyArPSBlLkNvbXB1dGVTaXplKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHMgKz0gKHVpbnQpQXJyYXlCaW5hcnlXcml0ZXIuR2V0U3RyaW5nQnl0ZUNvdW50OChTZXJ2aWNlUGF0aCk7XHJcbiAgICAgICAgICAgIHMgKz0gKHVpbnQpQXJyYXlCaW5hcnlXcml0ZXIuR2V0U3RyaW5nQnl0ZUNvdW50OChNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgcyArPSAodWludClBcnJheUJpbmFyeVdyaXRlci5HZXRTdHJpbmdCeXRlQ291bnQ4KE1ldGFEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50IEZpbmRFbGVtZW50KHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50cyA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IG0gaW4gZWxlbWVudHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtLkVsZW1lbnROYW1lID09IG5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNZXNzYWdlRWxlbWVudE5vdEZvdW5kRXhjZXB0aW9uKFwiRWxlbWVudCBcIiArIG5hbWUgKyBcIiBub3QgZm91bmQuXCIpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFRyeUZpbmRFbGVtZW50KHN0cmluZyBuYW1lLCBvdXQgTWVzc2FnZUVsZW1lbnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50cyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBtMSBpbiBlbGVtZW50cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobTEuRWxlbWVudE5hbWUgPT0gbmFtZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG0gPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnQgQWRkRWxlbWVudChzdHJpbmcgbmFtZSwgT2JqZWN0IGRhdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlRWxlbWVudCBtID0gbmV3IE1lc3NhZ2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIG0uRWxlbWVudE5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICBtLkRhdGEgPSBkYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRzID09IG51bGwpIGVsZW1lbnRzID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50IEFkZEVsZW1lbnQoTWVzc2FnZUVsZW1lbnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50cyA9PSBudWxsKSBlbGVtZW50cyA9IG5ldyBMaXN0PE1lc3NhZ2VFbGVtZW50PigpO1xyXG4gICAgICAgICAgICBlbGVtZW50cy5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFdyaXRlKEFycmF5QmluYXJ5V3JpdGVyIHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgRW50cnlTaXplID0gQ29tcHV0ZVNpemUoKTtcclxuICAgICAgICAgICAgdy5QdXNoUmVsYXRpdmVMaW1pdChFbnRyeVNpemUpO1xyXG4gICAgICAgICAgICB3LldyaXRlKEVudHJ5U2l6ZSk7XHJcbiAgICAgICAgICAgIHcuV3JpdGUoKHVzaG9ydClFbnRyeVR5cGUpO1xyXG4gICAgICAgICAgICB3LldyaXRlKCh1c2hvcnQpMCk7XHJcblxyXG4gICAgICAgICAgICB3LldyaXRlKCh1c2hvcnQpQXJyYXlCaW5hcnlXcml0ZXIuR2V0U3RyaW5nQnl0ZUNvdW50OChTZXJ2aWNlUGF0aCkpO1xyXG4gICAgICAgICAgICB3LldyaXRlU3RyaW5nOChTZXJ2aWNlUGF0aCk7XHJcbiAgICAgICAgICAgIHcuV3JpdGUoKHVzaG9ydClBcnJheUJpbmFyeVdyaXRlci5HZXRTdHJpbmdCeXRlQ291bnQ4KE1lbWJlck5hbWUpKTtcclxuICAgICAgICAgICAgdy5Xcml0ZVN0cmluZzgoTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgIHcuV3JpdGUoUmVxdWVzdElEKTtcclxuICAgICAgICAgICAgdy5Xcml0ZSgodXNob3J0KUVycm9yKTtcclxuICAgICAgICAgICAgIHcuV3JpdGUoKHVzaG9ydClBcnJheUJpbmFyeVdyaXRlci5HZXRTdHJpbmdCeXRlQ291bnQ4KE1ldGFEYXRhKSk7XHJcbiAgICAgICAgICAgIHcuV3JpdGVTdHJpbmc4KE1ldGFEYXRhKTtcclxuICAgICAgICAgICAgdy5Xcml0ZSgodXNob3J0KWVsZW1lbnRzLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gZWxlbWVudHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGUuV3JpdGUodyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh3LkRpc3RhbmNlRnJvbUxpbWl0ICE9IDApIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk1lc3NhZ2Ugd3JpdGUgZXJyb3JcIik7XHJcbiAgICAgICAgICAgIHcuUG9wTGltaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlYWQoQXJyYXlCaW5hcnlSZWFkZXIgcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVudHJ5U2l6ZSA9IHIuUmVhZFVJbnQzMigpO1xyXG5cclxuICAgICAgICAgICAgci5QdXNoUmVsYXRpdmVMaW1pdChFbnRyeVNpemUgLSA0KTtcclxuXHJcbiAgICAgICAgICAgIEVudHJ5VHlwZSA9IChNZXNzYWdlRW50cnlUeXBlKXIuUmVhZFVJbnQxNigpO1xyXG4gICAgICAgICAgICByLlJlYWRVSW50MTYoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHVzaG9ydCBzbmFtZV9zID0gci5SZWFkVUludDE2KCk7XHJcbiAgICAgICAgICAgIFNlcnZpY2VQYXRoID0gci5SZWFkU3RyaW5nOChzbmFtZV9zKTtcclxuICAgICAgICAgICAgdXNob3J0IG1uYW1lX3MgPSByLlJlYWRVSW50MTYoKTtcclxuICAgICAgICAgICAgTWVtYmVyTmFtZSA9IHIuUmVhZFN0cmluZzgobW5hbWVfcyk7XHJcbiAgICAgICAgICAgIFJlcXVlc3RJRCA9IHIuUmVhZFVJbnQzMigpO1xyXG4gICAgICAgICAgICBFcnJvciA9IChNZXNzYWdlRXJyb3JUeXBlKXIuUmVhZFVJbnQxNigpO1xyXG5cclxuICAgICAgICAgICAgdXNob3J0IG1ldGFkYXRhX3MgPSByLlJlYWRVSW50MTYoKTtcclxuICAgICAgICAgICAgTWV0YURhdGEgPSByLlJlYWRTdHJpbmc4KG1ldGFkYXRhX3MpO1xyXG5cclxuICAgICAgICAgICAgdXNob3J0IGVjb3VudCA9IHIuUmVhZFVJbnQxNigpO1xyXG5cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBlbGVtZW50cz1uZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oZWNvdW50KTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBlY291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnQgZSA9IG5ldyBNZXNzYWdlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgZS5SZWFkKHIpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuQWRkKGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoci5EaXN0YW5jZUZyb21MaW1pdCAhPSAwKSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJFcnJvciByZWFkaW5nIG1lc3NhZ2VcIik7XHJcbiAgICAgICAgICAgIHIuUG9wTGltaXQoKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE1lc3NhZ2VFbGVtZW50XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHVpbnQgRWxlbWVudFNpemU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRWxlbWVudE5hbWU9XCJcIjtcclxuXHJcbiAgICAgICAgcHVibGljIERhdGFUeXBlcyBFbGVtZW50VHlwZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBFbGVtZW50VHlwZU5hbWUgPSBcIlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1ldGFEYXRhPVwiXCI7XHJcblxyXG4gICAgICAgIHB1YmxpYyB1aW50IERhdGFDb3VudDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvYmplY3QgZGF0O1xyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRWxlbWVudChTdHJpbmcgbmFtZSwgT2JqZWN0IGRhdGluKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRWxlbWVudE5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICBEYXRhID0gZGF0aW47XHJcbiAgICAgICAgICAgIC8vVXBkYXRlRGF0YSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE9iamVjdCBEYXRhXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgVXBkYXRlRGF0YSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIHVpbnQgQ29tcHV0ZVNpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCBzID0gMTYgKyAodWludClBcnJheUJpbmFyeVdyaXRlci5HZXRTdHJpbmdCeXRlQ291bnQ4KEVsZW1lbnROYW1lKSsodWludClBcnJheUJpbmFyeVdyaXRlci5HZXRTdHJpbmdCeXRlQ291bnQ4KEVsZW1lbnRUeXBlTmFtZSkgKyAodWludClBcnJheUJpbmFyeVdyaXRlci5HZXRTdHJpbmdCeXRlQ291bnQ4KE1ldGFEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMuc3RydWN0dXJlX3QpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSBkID0gKE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlKURhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBlIGluIGQuRWxlbWVudHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcyArPSBlLkNvbXB1dGVTaXplKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoRWxlbWVudFR5cGU9PURhdGFUeXBlcy52ZWN0b3JfdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnRNYXA8aW50PiBkID0gKE1lc3NhZ2VFbGVtZW50TWFwPGludD4pRGF0YTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVsZW1lbnQgZSBpbiBkLkVsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gZS5Db21wdXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKEVsZW1lbnRUeXBlID09IERhdGFUeXBlcy5kaWN0aW9uYXJ5X3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50TWFwPHN0cmluZz4gZCA9IChNZXNzYWdlRWxlbWVudE1hcDxzdHJpbmc+KURhdGE7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gZC5FbGVtZW50cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzICs9IGUuQ29tcHV0ZVNpemUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMubGlzdF90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudExpc3QgZCA9IChNZXNzYWdlRWxlbWVudExpc3QpRGF0YTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVsZW1lbnQgZSBpbiBkLkVsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gZS5Db21wdXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKEVsZW1lbnRUeXBlID09IERhdGFUeXBlcy5tdWx0aWRpbWFycmF5X3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50TXVsdGlEaW1BcnJheSBkID0gKE1lc3NhZ2VFbGVtZW50TXVsdGlEaW1BcnJheSlEYXRhOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gZC5FbGVtZW50cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzICs9IGUuQ29tcHV0ZVNpemUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMucG9kX3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50UG9kIGQgPSAoTWVzc2FnZUVsZW1lbnRQb2QpRGF0YTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gZC5FbGVtZW50cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzICs9IGUuQ29tcHV0ZVNpemUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMucG9kX2FycmF5X3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkgZCA9IChNZXNzYWdlRWxlbWVudFBvZEFycmF5KURhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBlIGluIGQuRWxlbWVudHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcyArPSBlLkNvbXB1dGVTaXplKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoRWxlbWVudFR5cGUgPT0gRGF0YVR5cGVzLnBvZF9tdWx0aWRpbWFycmF5X3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50UG9kTXVsdGlEaW1BcnJheSBkID0gKE1lc3NhZ2VFbGVtZW50UG9kTXVsdGlEaW1BcnJheSlEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVsZW1lbnQgZSBpbiBkLkVsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gZS5Db21wdXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKEVsZW1lbnRUeXBlID09IERhdGFUeXBlcy5uYW1lZGFycmF5X2FycmF5X3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSBkID0gKE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSlEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVsZW1lbnQgZSBpbiBkLkVsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gZS5Db21wdXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKEVsZW1lbnRUeXBlID09IERhdGFUeXBlcy5uYW1lZGFycmF5X211bHRpZGltYXJyYXlfdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnROYW1lZE11bHRpRGltQXJyYXkgZCA9IChNZXNzYWdlRWxlbWVudE5hbWVkTXVsdGlEaW1BcnJheSlEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVsZW1lbnQgZSBpbiBkLkVsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gZS5Db21wdXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKEVsZW1lbnRUeXBlID09IERhdGFUeXBlcy52b2lkX3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHMgKz0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzICs9IERhdGFDb3VudCAqIERhdGFUeXBlVXRpbC5zaXplKEVsZW1lbnRUeXBlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHM7IFxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVwZGF0ZURhdGEoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIGRhdGF0eXBlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRhdHlwZSA9IFwibnVsbFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdCBpcyBBcnJheSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0YXR5cGUgPSBkYXQuR2V0VHlwZSgpLkdldEVsZW1lbnRUeXBlKCkuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIERhdGFDb3VudCA9ICh1aW50KSgoQXJyYXkpZGF0KS5MZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0IGlzIE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ291bnQgPSAodWludCkoKE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlKWRhdCkuRWxlbWVudHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBFbGVtZW50VHlwZU5hbWUgPSAoKE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlKWRhdCkuVHlwZTtcclxuICAgICAgICAgICAgICAgIGRhdGF0eXBlID0gXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudFN0cnVjdHVyZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdCBpcyBNZXNzYWdlRWxlbWVudE1hcDxpbnQ+KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ291bnQgPSAodWludCkoKE1lc3NhZ2VFbGVtZW50TWFwPGludD4pZGF0KS5FbGVtZW50cy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGRhdGF0eXBlID0gXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudE1hcDxpbnQ+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0IGlzIE1lc3NhZ2VFbGVtZW50TWFwPHN0cmluZz4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERhdGFDb3VudCA9ICh1aW50KSgoTWVzc2FnZUVsZW1lbnRNYXA8c3RyaW5nPilkYXQpLkVsZW1lbnRzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgZGF0YXR5cGUgPSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50TWFwPHN0cmluZz5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnRMaXN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ291bnQgPSAodWludCkoKE1lc3NhZ2VFbGVtZW50TGlzdClkYXQpLkVsZW1lbnRzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgZGF0YXR5cGUgPSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50TGlzdFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdCBpcyBNZXNzYWdlRWxlbWVudE11bHRpRGltQXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERhdGFDb3VudCA9ICh1aW50KSgoTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5KWRhdCkuRWxlbWVudHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBkYXRhdHlwZSA9IFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0IGlzIE1lc3NhZ2VFbGVtZW50UG9kKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ291bnQgPSAodWludCkoKE1lc3NhZ2VFbGVtZW50UG9kKWRhdCkuRWxlbWVudHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBkYXRhdHlwZSA9IFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnRQb2RcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnRQb2RBcnJheSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRGF0YUNvdW50ID0gKHVpbnQpKChNZXNzYWdlRWxlbWVudFBvZEFycmF5KWRhdCkuRWxlbWVudHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBFbGVtZW50VHlwZU5hbWUgPSAoKE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkpZGF0KS5UeXBlO1xyXG4gICAgICAgICAgICAgICAgZGF0YXR5cGUgPSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50UG9kQXJyYXlcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnRQb2RNdWx0aURpbUFycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ291bnQgPSAodWludCkoKE1lc3NhZ2VFbGVtZW50UG9kTXVsdGlEaW1BcnJheSlkYXQpLkVsZW1lbnRzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgRWxlbWVudFR5cGVOYW1lID0gKChNZXNzYWdlRWxlbWVudFBvZE11bHRpRGltQXJyYXkpZGF0KS5UeXBlO1xyXG4gICAgICAgICAgICAgICAgZGF0YXR5cGUgPSBcIlJvYm90UmFjb250ZXVyV2ViLk1lc3NhZ2VFbGVtZW50UG9kTXVsdGlEaW1BcnJheVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdCBpcyBNZXNzYWdlRWxlbWVudE5hbWVkQXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERhdGFDb3VudCA9ICh1aW50KSgoTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5KWRhdCkuRWxlbWVudHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBFbGVtZW50VHlwZU5hbWUgPSAoKE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSlkYXQpLlR5cGU7XHJcbiAgICAgICAgICAgICAgICBkYXRhdHlwZSA9IFwiUm9ib3RSYWNvbnRldXJXZWIuTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0IGlzIE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ291bnQgPSAodWludCkoKE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5KWRhdCkuRWxlbWVudHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBFbGVtZW50VHlwZU5hbWUgPSAoKE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5KWRhdCkuVHlwZTtcclxuICAgICAgICAgICAgICAgIGRhdGF0eXBlID0gXCJSb2JvdFJhY29udGV1cldlYi5NZXNzYWdlRWxlbWVudE5hbWVkTXVsdGlEaW1BcnJheVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdCBpcyBzdHJpbmcpIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRhdHlwZSA9IFwiU3lzdGVtLlN0cmluZ1wiO1xyXG4gICAgICAgICAgICAgICAgRGF0YUNvdW50ID0gKHVpbnQpVVRGOEVuY29kaW5nLlVURjguR2V0Qnl0ZUNvdW50KChzdHJpbmcpZGF0KTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIERhdGFDb3VudCA9IDE7XHJcbiAgICAgICAgICAgICAgICBkYXRhdHlwZSA9IGRhdC5HZXRUeXBlKCkuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRWxlbWVudFR5cGUgPSBEYXRhVHlwZVV0aWwuVHlwZUlERnJvbVN0cmluZyhkYXRhdHlwZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoRWxlbWVudFR5cGUgIT0gRGF0YVR5cGVzLnZvaWRfdCAmJiBFbGVtZW50VHlwZSA8IERhdGFUeXBlcy5zdHJpbmdfdCAmJiAhKGRhdCBpcyBBcnJheSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdCA9IERhdGFUeXBlVXRpbC5BcnJheUZyb21TY2FsYXIoZGF0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRWxlbWVudFNpemUgPSBDb21wdXRlU2l6ZSgpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFdyaXRlKEFycmF5QmluYXJ5V3JpdGVyIHcpXHJcbiAgICAgICAgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBVcGRhdGVEYXRhKCk7XHJcbiAgICAgICAgICAgIHcuUHVzaFJlbGF0aXZlTGltaXQoRWxlbWVudFNpemUpO1xyXG4gICAgICAgICAgICB3LldyaXRlKEVsZW1lbnRTaXplKTtcclxuICAgICAgICAgICAgdy5Xcml0ZSgodXNob3J0KUFycmF5QmluYXJ5V3JpdGVyLkdldFN0cmluZ0J5dGVDb3VudDgoRWxlbWVudE5hbWUpKTtcclxuICAgICAgICAgICAgdy5Xcml0ZVN0cmluZzgoRWxlbWVudE5hbWUpO1xyXG4gICAgICAgICAgICB3LldyaXRlKCh1c2hvcnQpRWxlbWVudFR5cGUpO1xyXG4gICAgICAgICAgICB3LldyaXRlKCh1c2hvcnQpQXJyYXlCaW5hcnlXcml0ZXIuR2V0U3RyaW5nQnl0ZUNvdW50OChFbGVtZW50VHlwZU5hbWUpKTtcclxuICAgICAgICAgICAgdy5Xcml0ZVN0cmluZzgoRWxlbWVudFR5cGVOYW1lKTtcclxuICAgICAgICAgICAgdy5Xcml0ZSgodXNob3J0KUFycmF5QmluYXJ5V3JpdGVyLkdldFN0cmluZ0J5dGVDb3VudDgoTWV0YURhdGEpKTtcclxuICAgICAgICAgICAgdy5Xcml0ZVN0cmluZzgoTWV0YURhdGEpO1xyXG4gICAgICAgICAgICB3LldyaXRlKCh1aW50KURhdGFDb3VudCk7XHJcbiAgICAgICAgICAgIGlmIChkYXQgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQuR2V0VHlwZSgpLklzQXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHcuV3JpdGVBcnJheSgoQXJyYXkpZGF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnRTdHJ1Y3R1cmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSAoKE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlKWRhdCkuRWxlbWVudHM7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBlIGluIGwpIGUuV3JpdGUodyk7XHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0IGlzIE1lc3NhZ2VFbGVtZW50TWFwPGludD4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSAoKE1lc3NhZ2VFbGVtZW50TWFwPGludD4pZGF0KS5FbGVtZW50cztcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gbCkgZS5Xcml0ZSh3KTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0IGlzIE1lc3NhZ2VFbGVtZW50TWFwPHN0cmluZz4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSAoKE1lc3NhZ2VFbGVtZW50TWFwPHN0cmluZz4pZGF0KS5FbGVtZW50cztcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gbCkgZS5Xcml0ZSh3KTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0IGlzIE1lc3NhZ2VFbGVtZW50TGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTGlzdDxNZXNzYWdlRWxlbWVudD4gbCA9ICgoTWVzc2FnZUVsZW1lbnRMaXN0KWRhdCkuRWxlbWVudHM7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBlIGluIGwpIGUuV3JpdGUodyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdCBpcyBzdHJpbmcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHcuV3JpdGVTdHJpbmc4KChzdHJpbmcpZGF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBsID0gKChNZXNzYWdlRWxlbWVudE11bHRpRGltQXJyYXkpZGF0KS5FbGVtZW50cztcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gbCkgZS5Xcml0ZSh3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnRQb2QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSAoKE1lc3NhZ2VFbGVtZW50UG9kKWRhdCkuRWxlbWVudHM7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBlIGluIGwpIGUuV3JpdGUodyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0IGlzIE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSAoKE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkpZGF0KS5FbGVtZW50cztcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gbCkgZS5Xcml0ZSh3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnRQb2RNdWx0aURpbUFycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBsID0gKChNZXNzYWdlRWxlbWVudFBvZE11bHRpRGltQXJyYXkpZGF0KS5FbGVtZW50cztcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gbCkgZS5Xcml0ZSh3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBsID0gKChNZXNzYWdlRWxlbWVudE5hbWVkQXJyYXkpZGF0KS5FbGVtZW50cztcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gbCkgZS5Xcml0ZSh3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXQgaXMgTWVzc2FnZUVsZW1lbnROYW1lZE11bHRpRGltQXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSAoKE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5KWRhdCkuRWxlbWVudHM7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBlIGluIGwpIGUuV3JpdGUodyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3LldyaXRlTnVtYmVyKGRhdCwgRWxlbWVudFR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAody5EaXN0YW5jZUZyb21MaW1pdCAhPSAwKSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJNZXNzYWdlIHdyaXRlIGVycm9yXCIpO1xyXG4gICAgICAgICAgICB3LlBvcExpbWl0KCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVhZChBcnJheUJpbmFyeVJlYWRlciByKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRWxlbWVudFNpemU9ci5SZWFkVUludDMyKCk7XHJcbiAgICAgICAgICAgIHIuUHVzaFJlbGF0aXZlTGltaXQoRWxlbWVudFNpemUgLSA0KTtcclxuICAgICAgICAgICAgdXNob3J0IG5hbWVfcyA9IHIuUmVhZFVJbnQxNigpO1xyXG4gICAgICAgICAgICBFbGVtZW50TmFtZSA9IHIuUmVhZFN0cmluZzgobmFtZV9zKTtcclxuICAgICAgICAgICAgRWxlbWVudFR5cGUgPSAoRGF0YVR5cGVzKXIuUmVhZFVJbnQxNigpO1xyXG4gICAgICAgICAgICB1c2hvcnQgbmFtZXR5cGVfcyA9IHIuUmVhZFVJbnQxNigpO1xyXG4gICAgICAgICAgICBFbGVtZW50VHlwZU5hbWUgPSByLlJlYWRTdHJpbmc4KG5hbWV0eXBlX3MpO1xyXG4gICAgICAgICAgICB1c2hvcnQgbWV0YWRhdGFfcyA9IHIuUmVhZFVJbnQxNigpO1xyXG4gICAgICAgICAgICBNZXRhRGF0YSA9IHIuUmVhZFN0cmluZzgobWV0YWRhdGFfcyk7XHJcbiAgICAgICAgICAgIERhdGFDb3VudCA9IHIuUmVhZFVJbnQzMigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKEVsZW1lbnRUeXBlID09IERhdGFUeXBlcy52b2lkX3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMuc3RydWN0dXJlX3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKGludClEYXRhQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEYXRhQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudCBtPW5ldyBNZXNzYWdlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG0uUmVhZChyKTtcclxuICAgICAgICAgICAgICAgICAgICBsLkFkZChtKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXQgPSBuZXcgTWVzc2FnZUVsZW1lbnRTdHJ1Y3R1cmUoRWxlbWVudFR5cGVOYW1lLGwpO1xyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgaWYgKEVsZW1lbnRUeXBlID09IERhdGFUeXBlcy52ZWN0b3JfdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTGlzdDxNZXNzYWdlRWxlbWVudD4gbCA9IG5ldyBMaXN0PE1lc3NhZ2VFbGVtZW50PigoaW50KURhdGFDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IERhdGFDb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50IG0gPSBuZXcgTWVzc2FnZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBtLlJlYWQocik7XHJcbiAgICAgICAgICAgICAgICAgICAgbC5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBNZXNzYWdlRWxlbWVudE1hcDxpbnQ+KGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgaWYgKEVsZW1lbnRUeXBlID09IERhdGFUeXBlcy5kaWN0aW9uYXJ5X3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKGludClEYXRhQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEYXRhQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudCBtID0gbmV3IE1lc3NhZ2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5SZWFkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGwuQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXQgPSBuZXcgTWVzc2FnZUVsZW1lbnRNYXA8c3RyaW5nPihsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMubGlzdF90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBsID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KChpbnQpRGF0YUNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRGF0YUNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnQgbSA9IG5ldyBNZXNzYWdlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG0uUmVhZChyKTtcclxuICAgICAgICAgICAgICAgICAgICBsLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ID0gbmV3IE1lc3NhZ2VFbGVtZW50TGlzdChsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMuc3RyaW5nX3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChEYXRhQ291bnQgPiByLkRpc3RhbmNlRnJvbUxpbWl0KSB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJFcnJvciByZWFkaW5nIG1lc3NhZ2VcIik7XHJcbiAgICAgICAgICAgICAgICBkYXQgPSByLlJlYWRTdHJpbmc4KERhdGFDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBpZiAoRWxlbWVudFR5cGUgPT0gRGF0YVR5cGVzLm11bHRpZGltYXJyYXlfdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTGlzdDxNZXNzYWdlRWxlbWVudD4gbCA9IG5ldyBMaXN0PE1lc3NhZ2VFbGVtZW50PigoaW50KURhdGFDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IERhdGFDb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50IG0gPSBuZXcgTWVzc2FnZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBtLlJlYWQocik7XHJcbiAgICAgICAgICAgICAgICAgICAgbC5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGF0ID0gbmV3IE1lc3NhZ2VFbGVtZW50TXVsdGlEaW1BcnJheShsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMucG9kX3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKGludClEYXRhQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEYXRhQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudCBtID0gbmV3IE1lc3NhZ2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5SZWFkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGwuQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBNZXNzYWdlRWxlbWVudFBvZChsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMucG9kX2FycmF5X3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKGludClEYXRhQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEYXRhQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudCBtID0gbmV3IE1lc3NhZ2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5SZWFkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGwuQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBNZXNzYWdlRWxlbWVudFBvZEFycmF5KEVsZW1lbnRUeXBlTmFtZSwgbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBpZiAoRWxlbWVudFR5cGUgPT0gRGF0YVR5cGVzLnBvZF9tdWx0aWRpbWFycmF5X3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKGludClEYXRhQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEYXRhQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudCBtID0gbmV3IE1lc3NhZ2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5SZWFkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGwuQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBNZXNzYWdlRWxlbWVudFBvZE11bHRpRGltQXJyYXkoRWxlbWVudFR5cGVOYW1lLCBsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMucG9kX3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKGludClEYXRhQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEYXRhQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudCBtID0gbmV3IE1lc3NhZ2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5SZWFkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGwuQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBNZXNzYWdlRWxlbWVudFBvZChsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGlmIChFbGVtZW50VHlwZSA9PSBEYXRhVHlwZXMubmFtZWRhcnJheV9hcnJheV90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBsID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KChpbnQpRGF0YUNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRGF0YUNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnQgbSA9IG5ldyBNZXNzYWdlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG0uUmVhZChyKTtcclxuICAgICAgICAgICAgICAgICAgICBsLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkYXQgPSBuZXcgTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5KEVsZW1lbnRUeXBlTmFtZSwgbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBpZiAoRWxlbWVudFR5cGUgPT0gRGF0YVR5cGVzLm5hbWVkYXJyYXlfbXVsdGlkaW1hcnJheV90KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBsID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KChpbnQpRGF0YUNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRGF0YUNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnQgbSA9IG5ldyBNZXNzYWdlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG0uUmVhZChyKTtcclxuICAgICAgICAgICAgICAgICAgICBsLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkYXQgPSBuZXcgTWVzc2FnZUVsZW1lbnROYW1lZE11bHRpRGltQXJyYXkoRWxlbWVudFR5cGVOYW1lLCBsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChEYXRhQ291bnQqRGF0YVR5cGVVdGlsLnNpemUoRWxlbWVudFR5cGUpID4gci5EaXN0YW5jZUZyb21MaW1pdCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRXJyb3IgcmVhZGluZyBtZXNzYWdlXCIpO1xyXG4gICAgICAgICAgICAgICAgQXJyYXkgZD1EYXRhVHlwZVV0aWwuQXJyYXlGcm9tRGF0YVR5cGUoRWxlbWVudFR5cGUsRGF0YUNvdW50KTtcclxuICAgICAgICAgICAgICAgIHIuUmVhZEFycmF5KGQpO1xyXG4gICAgICAgICAgICAgICAgZGF0ID0gKE9iamVjdClkO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHIuRGlzdGFuY2VGcm9tTGltaXQgIT0gMCkgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRXJyb3IgcmVhZGluZyBtZXNzYWdlXCIpO1xyXG4gICAgICAgICAgICByLlBvcExpbWl0KCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBGaW5kRWxlbWVudChMaXN0PE1lc3NhZ2VFbGVtZW50PiBtLCBzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuRWxlbWVudE5hbWUgPT0gbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNZXNzYWdlRWxlbWVudE5vdEZvdW5kRXhjZXB0aW9uKFwiQ291bGQgbm90IGZpbmQgZWxlbWVudCBcIiArIG5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBGaW5kRWxlbWVudChNZXNzYWdlRW50cnkgbSwgc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRmluZEVsZW1lbnQobS5lbGVtZW50cywgbmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVCBDYXN0RGF0YTxUPigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoRGF0YSA9PSBudWxsKSByZXR1cm4gZGVmYXVsdChUKTtcclxuICAgICAgICAgICAgaWYgKERhdGEgaXMgVClcclxuICAgICAgICAgICAgICAgIHJldHVybiAoVClEYXRhO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJDb3VsZCBub3QgY2FzdCBkYXRhIHRvIHR5cGUgXCIgKyB0eXBlb2YoVCkuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgQ2FzdERhdGE8VD4ob2JqZWN0IERhdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoRGF0YSA9PSBudWxsKSByZXR1cm4gZGVmYXVsdChUKTtcclxuICAgICAgICAgICAgaWYgKERhdGEgaXMgVClcclxuICAgICAgICAgICAgICAgIHJldHVybiAoVClEYXRhO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJDb3VsZCBub3QgY2FzdCBkYXRhIHRvIHR5cGUgXCIgKyB0eXBlb2YoVCkuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBNZXNzYWdlRWxlbWVudFN0cnVjdHVyZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRWxlbWVudFN0cnVjdHVyZShzdHJpbmcgdHlwZV8sIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGVsZW1lbnRzXylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVsZW1lbnRzID0gZWxlbWVudHNfO1xyXG4gICAgICAgICAgICBUeXBlID0gdHlwZV87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PE1lc3NhZ2VFbGVtZW50PiBFbGVtZW50cztcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUeXBlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTWVzc2FnZUVsZW1lbnRNYXA8VD5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnRNYXAoTGlzdDxNZXNzYWdlRWxlbWVudD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVsZW1lbnRzID0gZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IEVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBNZXNzYWdlRWxlbWVudExpc3RcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnRMaXN0KExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbGVtZW50cyA9IGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PE1lc3NhZ2VFbGVtZW50PiBFbGVtZW50cztcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBNZXNzYWdlRWxlbWVudE11bHRpRGltQXJyYXlcclxuICAgIHtcclxuICAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50TXVsdGlEaW1BcnJheShMaXN0PE1lc3NhZ2VFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRWxlbWVudHMgPSBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IEVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBNZXNzYWdlRWxlbWVudFBvZFxyXG4gICAgeyAgICAgICAgXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50UG9kKExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbGVtZW50cyA9IGU7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgcHVibGljIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IEVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBNZXNzYWdlRWxlbWVudFBvZEFycmF5XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkoc3RyaW5nIHR5cGUsIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbGVtZW50cyA9IGU7XHJcbiAgICAgICAgICAgIHRoaXMuVHlwZSA9IHR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVHlwZTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxNZXNzYWdlRWxlbWVudD4gRWxlbWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE1lc3NhZ2VFbGVtZW50UG9kTXVsdGlEaW1BcnJheVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRWxlbWVudFBvZE11bHRpRGltQXJyYXkoc3RyaW5nIHR5cGUsIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbGVtZW50cyA9IGU7XHJcbiAgICAgICAgICAgIHRoaXMuVHlwZSA9IHR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVHlwZTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxNZXNzYWdlRWxlbWVudD4gRWxlbWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlRWxlbWVudE5hbWVkQXJyYXkoc3RyaW5nIHR5cGUsIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbGVtZW50cyA9IGU7XHJcbiAgICAgICAgICAgIHRoaXMuVHlwZSA9IHR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVHlwZTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxNZXNzYWdlRWxlbWVudD4gRWxlbWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5KHN0cmluZyB0eXBlLCBMaXN0PE1lc3NhZ2VFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRWxlbWVudHMgPSBlO1xyXG4gICAgICAgICAgICB0aGlzLlR5cGUgPSB0eXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFR5cGU7XHJcbiAgICAgICAgcHVibGljIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IEVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTWVzc2FnZUVsZW1lbnRVdGlsXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBOZXdNZXNzYWdlRWxlbWVudChzdHJpbmcgbmFtZSwgb2JqZWN0IGRhdGEpXHJcbiAgICAgICAgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNZXNzYWdlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBtLkVsZW1lbnROYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgbS5EYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQWRkTWVzc2FnZUVsZW1lbnQoTGlzdDxNZXNzYWdlRWxlbWVudD4gdmN0LCBzdHJpbmcgbmFtZSwgb2JqZWN0IGRhdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IE5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIGRhdGEpO1xyXG4gICAgICAgICAgICB2Y3QuQWRkKG0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEFkZE1lc3NhZ2VFbGVtZW50KE1lc3NhZ2VFbnRyeSBtLCBzdHJpbmcgbmFtZSwgb2JqZWN0IGRhdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbTEgPSBOZXdNZXNzYWdlRWxlbWVudChuYW1lLCBkYXRhKTtcclxuICAgICAgICAgICAgbS5BZGRFbGVtZW50KG0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTWVzc2FnZUVsZW1lbnQgTmV3TWVzc2FnZUVsZW1lbnQoaW50IGksIG9iamVjdCBkYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTWVzc2FnZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgbS5FbGVtZW50TmFtZSA9IGkuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgbS5EYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQWRkTWVzc2FnZUVsZW1lbnQoTGlzdDxNZXNzYWdlRWxlbWVudD4gdmN0LCBpbnQgaSwgb2JqZWN0IGRhdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IE5ld01lc3NhZ2VFbGVtZW50KGksIGRhdGEpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2Y3QuQWRkKG0pOyAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQWRkTWVzc2FnZUVsZW1lbnQoTWVzc2FnZUVudHJ5IG0sIGludCBpLCBvYmplY3QgZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtMSA9IE5ld01lc3NhZ2VFbGVtZW50KGksIGRhdGEpO1xyXG4gICAgICAgICAgICBtLkFkZEVsZW1lbnQobTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEFkZE1lc3NhZ2VFbGVtZW50KExpc3Q8TWVzc2FnZUVsZW1lbnQ+IHZjdCwgTWVzc2FnZUVsZW1lbnQgbSlcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICB2Y3QuQWRkKG0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEFkZE1lc3NhZ2VFbGVtZW50KE1lc3NhZ2VFbnRyeSBtLCBNZXNzYWdlRWxlbWVudCBtbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG0uQWRkRWxlbWVudChtbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgRmluZEVsZW1lbnRBbmRDYXN0PFQ+KExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGVsZW1zLCBzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlID0gTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQoZWxlbXMsIG5hbWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGUuQ2FzdERhdGE8VD4oKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTWVzc2FnZUVsZW1lbnQgRmluZEVsZW1lbnQoTGlzdDxNZXNzYWdlRWxlbWVudD4gZWxlbXMsIHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VFbGVtZW50LkZpbmRFbGVtZW50KGVsZW1zLCBuYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTWVzc2FnZUVsZW1lbnQgRmluZEVsZW1lbnQoTWVzc2FnZUVudHJ5IG0sIHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VFbGVtZW50LkZpbmRFbGVtZW50KG0sIG5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUIENhc3REYXRhPFQ+KE1lc3NhZ2VFbGVtZW50IG0pXHJcbiAgICAgICAgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbS5DYXN0RGF0YTxUPigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0TWVzc2FnZUVsZW1lbnROdW1iZXIoTWVzc2FnZUVsZW1lbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCByZXM7XHJcbiAgICAgICAgICAgIGlmKCFJbnQzMi5UcnlQYXJzZShlLkVsZW1lbnROYW1lLCBvdXQgcmVzKSlcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm90b2NvbEV4Y2VwdGlvbihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgRWxlbWVudCBOdW1iZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTWVzc2FnZUVsZW1lbnQgUGFja1NjYWxhcjxUPihzdHJpbmcgbmFtZSwgVCB2YWwpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXdNZXNzYWdlRWxlbWVudChuYW1lLCBuZXcgVFtdIHsgdmFsIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBQYWNrQXJyYXk8VD4oc3RyaW5nIG5hbWUsIFRbXSB2YWwpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE51bGxSZWZlcmVuY2VFeGNlcHRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTmV3TWVzc2FnZUVsZW1lbnQobmFtZSwgdmFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTWVzc2FnZUVsZW1lbnQgUGFja011bHRpRGltQXJyYXkoUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUsIHN0cmluZyBuYW1lLCBNdWx0aURpbUFycmF5IHZhbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE51bGxSZWZlcmVuY2VFeGNlcHRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIG5vZGUuUGFja011bHRpRGltQXJyYXkodmFsKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE1lc3NhZ2VFbGVtZW50IFBhY2tTdHJpbmcoc3RyaW5nIG5hbWUsIHN0cmluZyB2YWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodmFsID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOdWxsUmVmZXJlbmNlRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIHZhbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE1lc3NhZ2VFbGVtZW50IFBhY2tTdHJ1Y3R1cmUoUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUsIENsaWVudENvbnRleHQgY2xpZW50LCBzdHJpbmcgbmFtZSwgb2JqZWN0IHZhbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXdNZXNzYWdlRWxlbWVudChuYW1lLCBub2RlLlBhY2tTdHJ1Y3R1cmUodmFsLGNsaWVudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBQYWNrVmFyVHlwZShSb2JvdFJhY29udGV1ck5vZGUgbm9kZSwgQ2xpZW50Q29udGV4dCBjbGllbnQsIHN0cmluZyBuYW1lLCBvYmplY3QgdmFsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIG5vZGUuUGFja1ZhclR5cGUodmFsLGNsaWVudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBQYWNrTWFwVHlwZTxLLCBUPihSb2JvdFJhY29udGV1ck5vZGUgbm9kZSwgQ2xpZW50Q29udGV4dCBjbGllbnQsIHN0cmluZyBuYW1lLCBEaWN0aW9uYXJ5PEssIFQ+IHZhbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXdNZXNzYWdlRWxlbWVudChuYW1lLCBub2RlLlBhY2tNYXBUeXBlPEssIFQ+KHZhbCxjbGllbnQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTWVzc2FnZUVsZW1lbnQgUGFja0xpc3RUeXBlPFQ+KFJvYm90UmFjb250ZXVyTm9kZSBub2RlLCBDbGllbnRDb250ZXh0IGNsaWVudCwgc3RyaW5nIG5hbWUsIExpc3Q8VD4gdmFsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIG5vZGUuUGFja0xpc3RUeXBlPFQ+KHZhbCwgY2xpZW50KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE1lc3NhZ2VFbGVtZW50IFBhY2tFbnVtPFQ+KHN0cmluZyBuYW1lLCBUIHZhbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXdNZXNzYWdlRWxlbWVudChuYW1lLCBuZXcgaW50W10geyAoaW50KShvYmplY3QpdmFsIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBQYWNrUG9kVG9BcnJheTxUPihSb2JvdFJhY29udGV1ck5vZGUgbm9kZSwgQ2xpZW50Q29udGV4dCBjbGllbnQsIHN0cmluZyBuYW1lLCByZWYgVCB2YWwpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXdNZXNzYWdlRWxlbWVudChuYW1lLCBub2RlLlBhY2tQb2RUb0FycmF5PFQ+KHJlZiB2YWwsIGNsaWVudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBQYWNrUG9kQXJyYXk8VD4oUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUsIENsaWVudENvbnRleHQgY2xpZW50LCBzdHJpbmcgbmFtZSwgVFtdIHZhbCkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIG5vZGUuUGFja1BvZEFycmF5PFQ+KHZhbCwgY2xpZW50KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE1lc3NhZ2VFbGVtZW50IFBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KFJvYm90UmFjb250ZXVyTm9kZSBub2RlLCBDbGllbnRDb250ZXh0IGNsaWVudCwgc3RyaW5nIG5hbWUsIFBvZE11bHRpRGltQXJyYXkgdmFsKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV3TWVzc2FnZUVsZW1lbnQobmFtZSwgbm9kZS5QYWNrUG9kTXVsdGlEaW1BcnJheTxUPih2YWwsIGNsaWVudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXNzYWdlRWxlbWVudCBQYWNrTmFtZWRBcnJheVRvQXJyYXk8VD4oUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUsIENsaWVudENvbnRleHQgY2xpZW50LCBzdHJpbmcgbmFtZSwgcmVmIFQgdmFsKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV3TWVzc2FnZUVsZW1lbnQobmFtZSwgbm9kZS5QYWNrTmFtZWRBcnJheVRvQXJyYXk8VD4ocmVmIHZhbCwgY2xpZW50KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE1lc3NhZ2VFbGVtZW50IFBhY2tOYW1lZEFycmF5PFQ+KFJvYm90UmFjb250ZXVyTm9kZSBub2RlLCBDbGllbnRDb250ZXh0IGNsaWVudCwgc3RyaW5nIG5hbWUsIFRbXSB2YWwpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXdNZXNzYWdlRWxlbWVudChuYW1lLCBub2RlLlBhY2tOYW1lZEFycmF5PFQ+KHZhbCwgY2xpZW50KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE1lc3NhZ2VFbGVtZW50IFBhY2tOYW1lZE11bHRpRGltQXJyYXk8VD4oUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUsIENsaWVudENvbnRleHQgY2xpZW50LCBzdHJpbmcgbmFtZSwgTmFtZWRNdWx0aURpbUFycmF5IHZhbCkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIG5vZGUuUGFja05hbWVkTXVsdGlEaW1BcnJheTxUPih2YWwsIGNsaWVudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUIFVucGFja1NjYWxhcjxUPihNZXNzYWdlRWxlbWVudCBtKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUW10gYSA9IENhc3REYXRhPFRbXT4obSk7XHJcbiAgICAgICAgICAgIGlmIChhLkxlbmd0aCAhPSAxKSB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIHNjYWxhclwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRbXSBVbnBhY2tBcnJheTxUPihNZXNzYWdlRWxlbWVudCBtKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUW10gYSA9IENhc3REYXRhPFRbXT4obSk7XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwpIHRocm93IG5ldyBOdWxsUmVmZXJlbmNlRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNdWx0aURpbUFycmF5IFVucGFja011bHRpRGltQXJyYXkoUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUsIE1lc3NhZ2VFbGVtZW50IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNdWx0aURpbUFycmF5IGEgPSBub2RlLlVucGFja011bHRpRGltQXJyYXkoTWVzc2FnZUVsZW1lbnRVdGlsLkNhc3REYXRhPE1lc3NhZ2VFbGVtZW50TXVsdGlEaW1BcnJheT4obSkpO1xyXG4gICAgICAgICAgICBpZiAoYSA9PSBudWxsKSB0aHJvdyBuZXcgTnVsbFJlZmVyZW5jZUV4Y2VwdGlvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFVucGFja1N0cmluZyhNZXNzYWdlRWxlbWVudCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIHMgPSBNZXNzYWdlRWxlbWVudFV0aWwuQ2FzdERhdGE8c3RyaW5nPihtKTtcclxuICAgICAgICAgICAgaWYgKHMgPT0gbnVsbCkgdGhyb3cgbmV3IE51bGxSZWZlcmVuY2VFeGNlcHRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgVW5wYWNrU3RydWN0dXJlPFQ+KFJvYm90UmFjb250ZXVyTm9kZSBub2RlLCBDbGllbnRDb250ZXh0IGNsaWVudCwgTWVzc2FnZUVsZW1lbnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLlVucGFja1N0cnVjdHVyZTxUPihNZXNzYWdlRWxlbWVudFV0aWwuQ2FzdERhdGE8TWVzc2FnZUVsZW1lbnRTdHJ1Y3R1cmU+KG0pLCBjbGllbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBvYmplY3QgVW5wYWNrVmFyVHlwZShSb2JvdFJhY29udGV1ck5vZGUgbm9kZSwgQ2xpZW50Q29udGV4dCBjbGllbnQsIE1lc3NhZ2VFbGVtZW50IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZS5VbnBhY2tWYXJUeXBlKG0sIGNsaWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIERpY3Rpb25hcnk8SywgVD4gVW5wYWNrTWFwPEssIFQ+KFJvYm90UmFjb250ZXVyTm9kZSBub2RlLCBDbGllbnRDb250ZXh0IGNsaWVudCwgTWVzc2FnZUVsZW1lbnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoRGljdGlvbmFyeTxLLCBUPilub2RlLlVucGFja01hcFR5cGU8SywgVD4obS5EYXRhLCBjbGllbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IFVucGFja0xpc3Q8VD4oUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUsIENsaWVudENvbnRleHQgY2xpZW50LCBNZXNzYWdlRWxlbWVudCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChMaXN0PFQ+KW5vZGUuVW5wYWNrTGlzdFR5cGU8VD4obS5EYXRhLCBjbGllbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUIFVucGFja0VudW08VD4oTWVzc2FnZUVsZW1lbnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludFtdIGEgPSBDYXN0RGF0YTxpbnRbXT4obSk7XHJcbiAgICAgICAgICAgIGlmIChhLkxlbmd0aCAhPSAxKSB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIGVudW1cIik7XHJcbiAgICAgICAgICAgIHJldHVybiAoVCkob2JqZWN0KWFbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgVW5wYWNrUG9kRnJvbUFycmF5PFQ+KFJvYm90UmFjb250ZXVyTm9kZSBub2RlLCBDbGllbnRDb250ZXh0IGNsaWVudCwgTWVzc2FnZUVsZW1lbnQgbSkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuVW5wYWNrUG9kRnJvbUFycmF5PFQ+KENhc3REYXRhPE1lc3NhZ2VFbGVtZW50UG9kQXJyYXk+KG0pLCBjbGllbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUW10gVW5wYWNrUG9kQXJyYXk8VD4oUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUsIENsaWVudENvbnRleHQgY2xpZW50LCBNZXNzYWdlRWxlbWVudCBtKSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZS5VbnBhY2tQb2RBcnJheTxUPihDYXN0RGF0YTxNZXNzYWdlRWxlbWVudFBvZEFycmF5PihtKSwgY2xpZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgUG9kTXVsdGlEaW1BcnJheSBVbnBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KFJvYm90UmFjb250ZXVyTm9kZSBub2RlLCBDbGllbnRDb250ZXh0IGNsaWVudCwgTWVzc2FnZUVsZW1lbnQgbSkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuVW5wYWNrUG9kTXVsdGlEaW1BcnJheTxUPihNZXNzYWdlRWxlbWVudFV0aWwuQ2FzdERhdGE8TWVzc2FnZUVsZW1lbnRQb2RNdWx0aURpbUFycmF5PihtKSwgY2xpZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVCBVbnBhY2tOYW1lZEFycmF5RnJvbUFycmF5PFQ+KFJvYm90UmFjb250ZXVyTm9kZSBub2RlLCBDbGllbnRDb250ZXh0IGNsaWVudCwgTWVzc2FnZUVsZW1lbnQgbSkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuVW5wYWNrTmFtZWRBcnJheUZyb21BcnJheTxUPihDYXN0RGF0YTxNZXNzYWdlRWxlbWVudE5hbWVkQXJyYXk+KG0pLCBjbGllbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUW10gVW5wYWNrTmFtZWRBcnJheTxUPihSb2JvdFJhY29udGV1ck5vZGUgbm9kZSwgQ2xpZW50Q29udGV4dCBjbGllbnQsIE1lc3NhZ2VFbGVtZW50IG0pIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLlVucGFja05hbWVkQXJyYXk8VD4oQ2FzdERhdGE8TWVzc2FnZUVsZW1lbnROYW1lZEFycmF5PihtKSwgY2xpZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTmFtZWRNdWx0aURpbUFycmF5IFVucGFja05hbWVkTXVsdGlEaW1BcnJheTxUPihSb2JvdFJhY29udGV1ck5vZGUgbm9kZSwgQ2xpZW50Q29udGV4dCBjbGllbnQsIE1lc3NhZ2VFbGVtZW50IG0pIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLlVucGFja05hbWVkTXVsdGlEaW1BcnJheTxUPihNZXNzYWdlRWxlbWVudFV0aWwuQ2FzdERhdGE8TWVzc2FnZUVsZW1lbnROYW1lZE11bHRpRGltQXJyYXk+KG0pLCBjbGllbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0TWVzc2FnZUVsZW1lbnREYXRhVHlwZVN0cmluZyhvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBmID0gby5HZXRUeXBlKCkuR2V0RmllbGQoXCJUeXBlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gKHN0cmluZylmLkdldFZhbHVlKG8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG5cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgMjAxMS0yMDE5IFdhc29uIFRlY2hub2xvZ3ksIExMQ1xyXG4vL1xyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4vL1xyXG4vLyAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuLy9cclxuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBSb2JvdFJhY29udGV1cldlYi5FeHRlbnNpb25zO1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbntcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBFbmRwb2ludFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyB1aW50IExvY2FsRW5kcG9pbnQgeyBnZXQgeyByZXR1cm4gbV9Mb2NhbEVuZHBvaW50OyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgdWludCBtX0xvY2FsRW5kcG9pbnQgPSAwO1xyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBSZW1vdGVFbmRwb2ludCB7IGdldCB7IHJldHVybiBtX1JlbW90ZUVuZHBvaW50OyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgdWludCBtX1JlbW90ZUVuZHBvaW50ID0gMDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZW1vdGVOb2RlTmFtZSB7IGdldCB7IHJldHVybiBtX1JlbW90ZU5vZGVOYW1lOyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgc3RyaW5nIG1fUmVtb3RlTm9kZU5hbWUgPSBcIlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgTm9kZUlEIFJlbW90ZU5vZGVJRCB7IGdldCB7IHJldHVybiBtX1JlbW90ZU5vZGVJRDsgfSB9XHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIE5vZGVJRCBtX1JlbW90ZU5vZGVJRCA9IE5vZGVJRC5Bbnk7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBJVHJhbnNwb3J0Q29ubmVjdGlvbiBUcmFuc3BvcnRDb25uZWN0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIHVpbnQgdHJhbnNwb3J0O1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgRGF0ZVRpbWUgTGFzdE1lc3NhZ2VSZWNlaXZlZFRpbWUgPSBEYXRlVGltZS5VdGNOb3c7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB1c2hvcnQgTWVzc2FnZU51bWJlciA9IDA7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvYmplY3QgTWVzc2FnZU51bWJlckxvY2sgPSBuZXcgb2JqZWN0KCk7XHJcbiAgICAgICAgLy9wdWJsaWMgVHJhbnNwb3J0IHRyYW5zcG9ydDtcclxuICAgICAgICAvL3B1YmxpYyB1aW50IHRyYW5zcG9ydF9pZDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIHJlYWRvbmx5IFJvYm90UmFjb250ZXVyTm9kZSBub2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgRW5kcG9pbnQoUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobm9kZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUgPSBSb2JvdFJhY29udGV1ck5vZGUucztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIGFzeW5jIFRhc2sgU2VuZE1lc3NhZ2UoTWVzc2FnZSBtLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChtLmhlYWRlciA9PSBudWxsKSBtLmhlYWRlciA9IG5ldyBNZXNzYWdlSGVhZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobS5lbnRyaWVzLkNvdW50ID09IDEgJiYgKGludCltLmVudHJpZXNbMF0uRW50cnlUeXBlIDw9IDUwMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbS5oZWFkZXIuUmVjZWl2ZXJOb2RlTmFtZSA9IFJlbW90ZU5vZGVOYW1lO1xyXG4gICAgICAgICAgICAgICAgbS5oZWFkZXIuU2VuZGVyTm9kZU5hbWUgPSBub2RlLk5vZGVOYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG0uaGVhZGVyLlNlbmRlckVuZHBvaW50ID0gTG9jYWxFbmRwb2ludDtcclxuICAgICAgICAgICAgbS5oZWFkZXIuUmVjZWl2ZXJFbmRwb2ludCA9IFJlbW90ZUVuZHBvaW50O1xyXG5cclxuICAgICAgICAgICAgbS5oZWFkZXIuU2VuZGVyTm9kZUlEID0gbm9kZS5Ob2RlSUQ7XHJcbiAgICAgICAgICAgIG0uaGVhZGVyLlJlY2VpdmVyTm9kZUlEID0gUmVtb3RlTm9kZUlEO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGxvY2sgKE1lc3NhZ2VOdW1iZXJMb2NrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtLmhlYWRlci5NZXNzYWdlSUQgPSBNZXNzYWdlTnVtYmVyO1xyXG5cclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VOdW1iZXIgPSAodXNob3J0KSgoTWVzc2FnZU51bWJlciA9PSAoKHVzaG9ydClVSW50MTYuTWF4VmFsdWUpKSA/IDAgOiBNZXNzYWdlTnVtYmVyICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IG5vZGUuU2VuZE1lc3NhZ2UobSwgY2FuY2VsKTtcclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCB2b2lkIE1lc3NhZ2VSZWNlaXZlZChNZXNzYWdlIG0pO1xyXG4gICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIENoZWNrRW5kcG9pbnRDYXBhYmlsaXR5TWVzc2FnZShNZXNzYWdlIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IGNhcGFiaWxpdHkgPSAwO1xyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgZTtcclxuXHJcbiAgICAgICAgICAgIE1lc3NhZ2UgcmV0ID0gbmV3IE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgcmV0LmhlYWRlciA9IG5ldyBNZXNzYWdlSGVhZGVyKCk7XHJcbiAgICAgICAgICAgIHJldC5oZWFkZXIuUmVjZWl2ZXJOb2RlTmFtZSA9IG0uaGVhZGVyLlNlbmRlck5vZGVOYW1lO1xyXG4gICAgICAgICAgICByZXQuaGVhZGVyLlNlbmRlck5vZGVOYW1lID0gbm9kZS5Ob2RlTmFtZTtcclxuICAgICAgICAgICAgcmV0LmhlYWRlci5SZWNlaXZlck5vZGVJRCA9IG0uaGVhZGVyLlNlbmRlck5vZGVJRDtcclxuICAgICAgICAgICAgcmV0LmhlYWRlci5SZWNlaXZlckVuZHBvaW50ID0gbS5oZWFkZXIuU2VuZGVyRW5kcG9pbnQ7XHJcbiAgICAgICAgICAgIHJldC5oZWFkZXIuU2VuZGVyRW5kcG9pbnQgPSBtLmhlYWRlci5SZWNlaXZlckVuZHBvaW50O1xyXG4gICAgICAgICAgICByZXQuaGVhZGVyLlNlbmRlck5vZGVJRCA9IG5vZGUuTm9kZUlEO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG0uZW50cmllcy5Db3VudCA9PSAwKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGUgPSBtLmVudHJpZXNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IGVyZXQgPSByZXQuQWRkRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5FbmRwb2ludENoZWNrQ2FwYWJpbGl0eVJldCwgbS5lbnRyaWVzWzBdLk1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgZXJldC5SZXF1ZXN0SUQgPSBlLlJlcXVlc3RJRDtcclxuICAgICAgICAgICAgICAgIGVyZXQuU2VydmljZVBhdGggPSBlLlNlcnZpY2VQYXRoO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlLkVudHJ5VHlwZSAhPSBNZXNzYWdlRW50cnlUeXBlLkVuZHBvaW50Q2hlY2tDYXBhYmlsaXR5KSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSBlLk1lbWJlck5hbWU7XHJcbiAgICAgICAgICAgICAgICBjYXBhYmlsaXR5ID0gRW5kcG9pbnRDYXBhYmlsaXR5KG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgZXJldC5BZGRFbGVtZW50KFwicmV0dXJuXCIsIGNhcGFiaWxpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoXHJcbiAgICAgICAgICAgIHtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2VuZE1lc3NhZ2UocmV0LGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTtcclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHVpbnQgRW5kcG9pbnRDYXBhYmlsaXR5KHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICh1aW50KTA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG59IiwiLy8gQ29weXJpZ2h0IDIwMTEtMjAxOSBXYXNvbiBUZWNobm9sb2d5LCBMTENcclxuLy9cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy9cclxuLy8gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbi8vXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhc3luYyBUYXNrIEF3YWl0V2l0aFRpbWVvdXQodGhpcyBUYXNrIHRhc2ssIGludCB0aW1lb3V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRpbWVvdXQgPCAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0YXNrO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYyA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xyXG4gICAgICAgICAgICBUYXNrIHRpbWVvdXRfdGFzayA9IFRhc2suRGVsYXkodGltZW91dCwgYy5Ub2tlbik7XHJcblxyXG4gICAgICAgICAgICB2YXIgcjEgPSBhd2FpdCBUYXNrLldoZW5BbnkodGFzaywgdGltZW91dF90YXNrKTtcclxuICAgICAgICAgICAgaWYgKHRhc2suSXNDb21wbGV0ZWQgfHwgdGFzay5Jc0ZhdWx0ZWQgfHwgdGFzay5Jc0NhbmNlbGVkKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG5vb3AgPSB0aW1lb3V0X3Rhc2suSWdub3JlUmVzdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBjLkNhbmNlbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRhc2s7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9vcCA9IHRhc2suSWdub3JlUmVzdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVGltZW91dEV4Y2VwdGlvbihcIk9wZXJhdGlvbiB0aW1lZCBvdXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgVGFzazxUPiBBd2FpdFdpdGhUaW1lb3V0PFQ+KHRoaXMgVGFzazxUPiB0YXNrLCBpbnQgdGltZW91dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0aW1lb3V0IDwgMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRhc2s7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjID0gbmV3IENhbmNlbGxhdGlvblRva2VuU291cmNlKCk7XHJcbiAgICAgICAgICAgIFRhc2sgdGltZW91dF90YXNrID0gVGFzay5EZWxheSh0aW1lb3V0LCBjLlRva2VuKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByMSA9IGF3YWl0IFRhc2suV2hlbkFueSh0YXNrLCB0aW1lb3V0X3Rhc2spO1xyXG4gICAgICAgICAgICBpZiAodGFzay5Jc0NvbXBsZXRlZCB8fCB0YXNrLklzRmF1bHRlZCB8fCB0YXNrLklzQ2FuY2VsZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBub29wID0gdGltZW91dF90YXNrLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgYy5DYW5jZWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGFzaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBub29wID0gUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLklnbm9yZVJlc3VsdDxUPih0YXNrKTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUaW1lb3V0RXhjZXB0aW9uKFwiT3BlcmF0aW9uIHRpbWVkIG91dFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEF0dGFjaENhbmNlbGxhdGlvblRva2VuPFQ+KHRoaXMgVGFza0NvbXBsZXRpb25Tb3VyY2U8VD4gc291cmNlLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwsIEV4Y2VwdGlvbiBlID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNhbmNlbC5SZWdpc3RlcigoQWN0aW9uKShkZWxlZ2F0ZSAoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZS5UcnlTZXRDYW5jZWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZS5UcnlTZXRFeGNlcHRpb24oZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGFzayBJZ25vcmVSZXN1bHQodGhpcyBUYXNrIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdC5Db250aW51ZVdpdGgoKEFjdGlvbjxUYXNrPikoZGVsZWdhdGUgKFRhc2sgdDIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gdDIuRXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbikgeyB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGFzayBJZ25vcmVSZXN1bHQ8VD4odGhpcyBUYXNrPFQ+IHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdC5Db250aW51ZVdpdGgoKEFjdGlvbjxUYXNrPFQ+PikoZGVsZWdhdGUgKFRhc2s8VD4gdDIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gdDIuUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbikgeyB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUFzeW5jUmVzdWx0IEFzQXBtPFQ+KHRoaXMgVGFzazxUPiB0YXNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3luY0NhbGxiYWNrIGNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Qgc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGFzayA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInRhc2tcIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGNzID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPFQ+KHN0YXRlKTtcclxuICAgICAgICAgICAgdGFzay5Db250aW51ZVdpdGgoKEFjdGlvbjxUYXNrPFQ+PikodCA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodC5Jc0ZhdWx0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgdGNzLlRyeVNldEV4Y2VwdGlvbih0LkV4Y2VwdGlvbi5Jbm5lckV4Y2VwdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodC5Jc0NhbmNlbGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHRjcy5UcnlTZXRDYW5jZWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRjcy5UcnlTZXRSZXN1bHQodC5SZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRjcy5UYXNrKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGNzLlRhc2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElBc3luY1Jlc3VsdCBBc0FwbSh0aGlzIFRhc2sgdGFzayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXN5bmNDYWxsYmFjayBjYWxsYmFjayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0IHN0YXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRhc2sgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJ0YXNrXCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRjcyA9IG5ldyBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+KHN0YXRlKTtcclxuICAgICAgICAgICAgdGFzay5Db250aW51ZVdpdGgoKEFjdGlvbjxUYXNrPikodCA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodC5Jc0ZhdWx0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgdGNzLlRyeVNldEV4Y2VwdGlvbih0LkV4Y2VwdGlvbi5Jbm5lckV4Y2VwdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodC5Jc0NhbmNlbGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHRjcy5UcnlTZXRDYW5jZWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRjcy5UcnlTZXRSZXN1bHQoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodGNzLlRhc2spO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0Y3MuVGFzaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFJlcGxhY2VGaXJzdCh0aGlzIHN0cmluZyB0ZXh0LCBzdHJpbmcgc2VhcmNoLCBzdHJpbmcgcmVwbGFjZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBwb3MgPSB0ZXh0LkluZGV4T2Yoc2VhcmNoKTtcclxuICAgICAgICAgICAgaWYgKHBvcyA8IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0LlN1YnN0cmluZygwLCBwb3MpICsgcmVwbGFjZSArIHRleHQuU3Vic3RyaW5nKHBvcyArIHNlYXJjaC5MZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiNpZiBST0JPVFJBQ09OVEVVUl9CUklER0VcclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRhc2s8aW50PiBSZWFkQXN5bmModGhpcyBTdHJlYW0gc3RyZWFtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIsIGludCBvZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0cmVhbSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInN0cmVhbVwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0Y3MgPSBuZXcgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PigpO1xyXG4gICAgICAgICAgICBzdHJlYW0uQmVnaW5SZWFkKGJ1ZmZlciwgb2Zmc2V0LCBjb3VudCwgKEFzeW5jQ2FsbGJhY2spKGlhciA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0Y3MuVHJ5U2V0UmVzdWx0KHN0cmVhbS5FbmRSZWFkKGlhcikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKE9wZXJhdGlvbkNhbmNlbGVkRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRjcy5UcnlTZXRDYW5jZWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleGMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGNzLlRyeVNldEV4Y2VwdGlvbihleGMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSwgbnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0Y3MuVGFzaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGFzazxpbnQ+IFdyaXRlQXN5bmModGhpcyBTdHJlYW0gc3RyZWFtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIsIGludCBvZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0cmVhbSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInN0cmVhbVwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0Y3MgPSBuZXcgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PigpO1xyXG4gICAgICAgICAgICBzdHJlYW0uQmVnaW5Xcml0ZShidWZmZXIsIG9mZnNldCwgY291bnQsIChBc3luY0NhbGxiYWNrKShpYXIgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGNzLlRyeVNldFJlc3VsdChzdHJlYW0uRW5kUmVhZChpYXIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChPcGVyYXRpb25DYW5jZWxlZEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0Y3MuVHJ5U2V0Q2FuY2VsZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXhjKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRjcy5UcnlTZXRFeGNlcHRpb24oZXhjKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksIG51bGwpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGNzLlRhc2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRhc2s8VD4gQ29uZmlndXJlQXdhaXQ8VD4odGhpcyBUYXNrPFQ+IHQsIGJvb2wgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0O1xyXG4gICAgICAgIH1cclxuI2VuZGlmXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgUlJVcmlFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgRXNjYXBlRGF0YVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiNpZiBST0JPVFJBQ09OVEVVUl9CUklER0VcclxuICAgICAgICAgICAgcmV0dXJuIEJyaWRnZS5TY3JpcHQuRW5jb2RlVVJJKHMpO1xyXG4jZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gVXJpLkVzY2FwZURhdGFTdHJpbmcocyk7XHJcbiNlbmRpZlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVW5lc2NhcGVEYXRhU3RyaW5nKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuI2lmIFJPQk9UUkFDT05URVVSX0JSSURHRVxyXG4gICAgICAgICAgICByZXR1cm4gQnJpZGdlLlNjcmlwdC5EZWNvZGVVUkkocyk7XHJcbiNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBVcmkuVW5lc2NhcGVEYXRhU3RyaW5nKHMpO1xyXG4jZW5kaWZcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4jaWYgUk9CT1RSQUNPTlRFVVJfQlJJREdFXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJ1ZmZlclxyXG4gICAge1xyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIEJsb2NrQ29weShieXRlW10gcmVjYnVmLCBpbnQgdjEsIGJ5dGVbXSBuZXdidWYsIGludCB2MiwgaW50IHYzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXJyYXkuQ29weShyZWNidWYsIHYxLCBuZXdidWYsIHYyLCB2Myk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgaW50IEJ5dGVMZW5ndGgoQXJyYXkgYSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFR5cGVDb2RlIHQgPSBUeXBlLkdldFR5cGVDb2RlKGEuR2V0VHlwZSgpLkdldEVsZW1lbnRUeXBlKCkpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuRG91YmxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA4ICogYS5MZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlNpbmdsZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNCAqIGEuTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5CeXRlOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5TQnl0ZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5MZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlVJbnQxNjpcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50MTY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIgKiBhLkxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuVUludDMyOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5JbnQzMjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNCAqIGEuTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50NjQ6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkludDY0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA4ICogYS5MZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkJvb2xlYW46XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIGFycmF5IHR5cGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIEJsb2NrQ29weShBcnJheSBhLCBpbnQgdiwgYnl0ZVtdIG1lbWJ1ZiwgaW50IHBvc2l0aW9uLCBpbnQgYmwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYiA9IG5ldyBCaW5hcnlXcml0ZXIobmV3IE1lbW9yeVN0cmVhbShtZW1idWYscG9zaXRpb24sYmwpKTtcclxuICAgICAgICAgICAgVHlwZUNvZGUgdCA9IFR5cGUuR2V0VHlwZUNvZGUoYS5HZXRUeXBlKCkuR2V0RWxlbWVudFR5cGUoKSk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5Eb3VibGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAoZG91YmxlW10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibC84OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLldyaXRlKGExW2krdl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlNpbmdsZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhMSA9IChmbG9hdFtdKWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmwvNDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5Xcml0ZShhMVtpK3ZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5CeXRlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGExID0gKGJ5dGVbXSlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJsOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLldyaXRlKGExW2krdl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlNCeXRlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGExID0gKHNieXRlW10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5Xcml0ZShhMVtpK3ZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50MTY6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAodXNob3J0W10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibC8yOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLldyaXRlKGExW2krdl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkludDE2OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGExID0gKHNob3J0W10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPGJsLzI7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuV3JpdGUoYTFbaSt2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuVUludDMyOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGExID0gKHVpbnRbXSlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJsLzQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuV3JpdGUoYTFbaSt2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50MzI6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAoaW50W10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibC80OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLldyaXRlKGExW2krdl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlVJbnQ2NDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhMSA9ICh1bG9uZ1tdKWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmwvODsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5Xcml0ZShhMVtpK3ZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5JbnQ2NDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhMSA9IChsb25nW10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibC84OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLldyaXRlKGExW2krdl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkJvb2xlYW46XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAoYm9vbFtdKWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmw7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuV3JpdGUoYTFbaSt2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiSW52YWxpZCBhcnJheSB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBCbG9ja0NvcHkoYnl0ZVtdIG1lbWJ1ZiwgaW50IHBvc2l0aW9uLCBBcnJheSBhLCBpbnQgdiwgaW50IGJsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGIgPSBuZXcgQmluYXJ5UmVhZGVyKG5ldyBNZW1vcnlTdHJlYW0obWVtYnVmLHBvc2l0aW9uLGJsKSk7XHJcbiAgICAgICAgICAgIFR5cGVDb2RlIHQgPSBUeXBlLkdldFR5cGVDb2RlKGEuR2V0VHlwZSgpLkdldEVsZW1lbnRUeXBlKCkpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuRG91YmxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGExID0gKGRvdWJsZVtdKWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmwvODsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYTFbaSt2XSA9IGIuUmVhZERvdWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlNpbmdsZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhMSA9IChmbG9hdFtdKWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmwvNDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYTFbaSt2XSA9IGIuUmVhZFNpbmdsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkJ5dGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAoYnl0ZVtdKWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmw7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGExW2krdl0gPSBiLlJlYWRCeXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuU0J5dGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAoc2J5dGVbXSlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJsOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMVtpK3ZdID0gYi5SZWFkU0J5dGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50MTY6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAodXNob3J0W10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibC8yOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMVtpK3ZdID0gYi5SZWFkVUludDE2KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50MTY6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAoc2hvcnRbXSlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJsLzI7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGExW2krdl0gPSBiLlJlYWRJbnQxNigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlVJbnQzMjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhMSA9ICh1aW50W10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibC80OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMVtpK3ZdID0gYi5SZWFkVUludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50MzI6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAoaW50W10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibC80OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMVtpK3ZdID0gYi5SZWFkSW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50NjQ6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSAodWxvbmdbXSlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJsLzg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGExW2krdl0gPSBiLlJlYWRVSW50NjQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5JbnQ2NDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhMSA9IChsb25nW10pYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBibC84OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMVtpK3ZdID0gYi5SZWFkSW50NjQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5Cb29sZWFuOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGExID0gKGJvb2xbXSlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJsOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMVtpK3ZdID0gYi5SZWFkQm9vbGVhbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgYXJyYXkgdHlwZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiNlbmRpZlxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBSb2JvdFJhY29udGV1cldlYi5FeHRlbnNpb25zO1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbntcclxuICAgIHB1YmxpYyBpbnRlcmZhY2UgR2VuZXJhdG9yMTxSZXR1cm5UeXBlLCBQYXJhbVR5cGU+XHJcbiAgICB7XHJcbiAgICAgICAgVGFzazxSZXR1cm5UeXBlPiBOZXh0KFBhcmFtVHlwZSBwYXJhbSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsPWRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTsgICAgICAgIFxyXG4gICAgICAgIFRhc2sgQWJvcnQoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpOyAgICAgICAgXHJcbiAgICAgICAgVGFzayBDbG9zZShDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSk7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW50ZXJmYWNlIEdlbmVyYXRvcjI8UmV0dXJuVHlwZT5cclxuICAgIHtcclxuICAgICAgICBUYXNrPFJldHVyblR5cGU+IE5leHQoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG4gICAgICAgIFRhc2sgQWJvcnQoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG4gICAgICAgIFRhc2sgQ2xvc2UoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG4gICAgICAgIFRhc2s8UmV0dXJuVHlwZVtdPiBOZXh0QWxsKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW50ZXJmYWNlIEdlbmVyYXRvcjM8UGFyYW1UeXBlPlxyXG4gICAge1xyXG4gICAgICAgIFRhc2sgTmV4dChQYXJhbVR5cGUgcGFyYW0sIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuICAgICAgICBUYXNrIEFib3J0KENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuICAgICAgICBUYXNrIENsb3NlKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgR2VuZXJhdG9yQ2xpZW50QmFzZVxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBTZXJ2aWNlU3R1YiBzdHViO1xyXG4gICAgICAgIHByb3RlY3RlZCBzdHJpbmcgbWVtYmVybmFtZTtcclxuICAgICAgICBpbnRlcm5hbCBpbnQgaWQ7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBHZW5lcmF0b3JDbGllbnRCYXNlKHN0cmluZyBtZW1iZXJuYW1lLCBTZXJ2aWNlU3R1YiBzdHViLCBpbnQgaWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnN0dWIgPSBzdHViO1xyXG4gICAgICAgICAgICB0aGlzLm1lbWJlcm5hbWUgPSBtZW1iZXJuYW1lO1xyXG4gICAgICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1lbWJlck5hbWUge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG1lbWJlcm5hbWU7XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEFib3J0KENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuR2VuZXJhdG9yTmV4dFJlcSwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgQWJvcnRPcGVyYXRpb25FeGNlcHRpb24oXCJHZW5lcmF0b3IgYWJvcnQgcmVxdWVzdGVkXCIpO1xyXG4gICAgICAgICAgICBSb2JvdFJhY29udGV1ckV4Y2VwdGlvblV0aWwuRXhjZXB0aW9uVG9NZXNzYWdlRW50cnkoZXJyLCBtKTtcclxuICAgICAgICAgICAgbS5BZGRFbGVtZW50KFwiaW5kZXhcIiwgaWQpO1xyXG4gICAgICAgICAgICBhd2FpdCBzdHViLlByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIENsb3NlKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuR2VuZXJhdG9yTmV4dFJlcSwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgU3RvcEl0ZXJhdGlvbkV4Y2VwdGlvbihcIkdlbmVyYXRvciBhYm9ydCByZXF1ZXN0ZWRcIik7XHJcbiAgICAgICAgICAgIFJvYm90UmFjb250ZXVyRXhjZXB0aW9uVXRpbC5FeGNlcHRpb25Ub01lc3NhZ2VFbnRyeShlcnIsIG0pO1xyXG4gICAgICAgICAgICBtLkFkZEVsZW1lbnQoXCJpbmRleFwiLCBpZCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHN0dWIuUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPE1lc3NhZ2VFbGVtZW50PiBOZXh0QmFzZShNZXNzYWdlRWxlbWVudCB2LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5HZW5lcmF0b3JOZXh0UmVxLCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgbS5BZGRFbGVtZW50KFwiaW5kZXhcIiwgaWQpO1xyXG4gICAgICAgICAgICBpZiAodiAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2LkVsZW1lbnROYW1lID0gXCJwYXJhbWV0ZXJcIjtcclxuICAgICAgICAgICAgICAgIG0uZWxlbWVudHMuQWRkKHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXQgPSBhd2FpdCBzdHViLlByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50IG1yZXQ7XHJcbiAgICAgICAgICAgIHJldC5UcnlGaW5kRWxlbWVudChcInJldHVyblwiLCBvdXQgbXJldCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtcmV0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgR2VuZXJhdG9yMUNsaWVudDxSZXR1cm5UeXBlLCBQYXJhbVR5cGU+IDogR2VuZXJhdG9yQ2xpZW50QmFzZSwgR2VuZXJhdG9yMTxSZXR1cm5UeXBlLCBQYXJhbVR5cGU+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEdlbmVyYXRvcjFDbGllbnQoc3RyaW5nIG1lbWJlcm5hbWUsIFNlcnZpY2VTdHViIHN0dWIsIGludCBpZCkgOiBiYXNlKG1lbWJlcm5hbWUsIHN0dWIsIGlkKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPFJldHVyblR5cGU+IE5leHQoUGFyYW1UeXBlIHBhcmFtLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE1lc3NhZ2VFbGVtZW50KFwicGFyYW1cIiwgc3R1Yi5SUkNvbnRleHQuUGFja1ZhclR5cGUocGFyYW0pKTtcclxuICAgICAgICAgICAgdmFyIG1fcmV0ID0gYXdhaXQgTmV4dEJhc2UobSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBzdHViLlJSQ29udGV4dC5VbnBhY2tWYXJUeXBlKG1fcmV0KTtcclxuICAgICAgICAgICAgaWYgKGRhdGEgaXMgQXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoUmV0dXJuVHlwZSkuSXNBcnJheSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFJldHVyblR5cGUpZGF0YTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgIHJldHVybiAoKFJldHVyblR5cGVbXSlkYXRhKVswXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgIHJldHVybiAoUmV0dXJuVHlwZSlkYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgR2VuZXJhdG9yMkNsaWVudDxSZXR1cm5UeXBlPiA6IEdlbmVyYXRvckNsaWVudEJhc2UsIEdlbmVyYXRvcjI8UmV0dXJuVHlwZT5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgR2VuZXJhdG9yMkNsaWVudChzdHJpbmcgbWVtYmVybmFtZSwgU2VydmljZVN0dWIgc3R1YiwgaW50IGlkKSA6IGJhc2UobWVtYmVybmFtZSwgc3R1YiwgaWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8UmV0dXJuVHlwZT4gTmV4dChDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBtX3JldCA9IGF3YWl0IE5leHRCYXNlKG51bGwsIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gc3R1Yi5SUkNvbnRleHQuVW5wYWNrVmFyVHlwZShtX3JldCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhIGlzIEFycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKFJldHVyblR5cGUpLklzQXJyYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChSZXR1cm5UeXBlKWRhdGE7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoUmV0dXJuVHlwZVtdKWRhdGEpWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiAoUmV0dXJuVHlwZSlkYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8UmV0dXJuVHlwZVtdPiBOZXh0QWxsKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBMaXN0PFJldHVyblR5cGU+KCk7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXQuQWRkKGF3YWl0IE5leHQoY2FuY2VsKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKFN0b3BJdGVyYXRpb25FeGNlcHRpb24pIHsgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0LlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEdlbmVyYXRvcjNDbGllbnQ8UGFyYW1UeXBlPiA6IEdlbmVyYXRvckNsaWVudEJhc2UsIEdlbmVyYXRvcjM8UGFyYW1UeXBlPlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBHZW5lcmF0b3IzQ2xpZW50KHN0cmluZyBtZW1iZXJuYW1lLCBTZXJ2aWNlU3R1YiBzdHViLCBpbnQgaWQpIDogYmFzZShtZW1iZXJuYW1lLCBzdHViLCBpZClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBOZXh0KFBhcmFtVHlwZSBwYXJhbSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBNZXNzYWdlRWxlbWVudChcInBhcmFtXCIsIHN0dWIuUlJDb250ZXh0LlBhY2tWYXJUeXBlKHBhcmFtKSk7XHJcbiAgICAgICAgICAgIHZhciBtX3JldCA9IGF3YWl0IE5leHRCYXNlKG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHN0dWIuUlJDb250ZXh0LlVucGFja1ZhclR5cGUobV9yZXQpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgR2VuZXJhdG9yU2VydmVyQmFzZVxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBzdHJpbmcgbmFtZTtcclxuICAgICAgICBwcm90ZWN0ZWQgaW50IGluZGV4O1xyXG4gICAgICAgIHByb3RlY3RlZCBTZXJ2aWNlU2tlbCBza2VsO1xyXG4gICAgICAgIHByb3RlY3RlZCBTZXJ2ZXJFbmRwb2ludCBlcDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIERhdGVUaW1lIGxhc3RfYWNjZXNzX3RpbWU7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBHZW5lcmF0b3JTZXJ2ZXJCYXNlKHN0cmluZyBuYW1lLCBpbnQgaW5kZXgsIFNlcnZpY2VTa2VsIHNrZWwsIFNlcnZlckVuZHBvaW50IGVwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLnNrZWwgPSBza2VsO1xyXG4gICAgICAgICAgICB0aGlzLmVwID0gZXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBFbmRwb2ludCB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gZXAuTG9jYWxFbmRwb2ludDtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsTmV4dChNZXNzYWdlRW50cnkgbSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgR2VuZXJhdG9yMVNlcnZlcjxSZXR1cm5UeXBlLCBQYXJhbVR5cGU+IDogR2VuZXJhdG9yU2VydmVyQmFzZVxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBHZW5lcmF0b3IxPFJldHVyblR5cGUsIFBhcmFtVHlwZT4gZ2VuZXJhdG9yO1xyXG5cclxuICAgICAgICBwdWJsaWMgR2VuZXJhdG9yMVNlcnZlcihHZW5lcmF0b3IxPFJldHVyblR5cGUsUGFyYW1UeXBlPiBnZW5lcmF0b3IsIHN0cmluZyBuYW1lLCBpbnQgaWQsIFNlcnZpY2VTa2VsIHNrZWwsIFNlcnZlckVuZHBvaW50IGVwKSA6IGJhc2UobmFtZSwgaWQsIHNrZWwsIGVwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgVGFzazxNZXNzYWdlRW50cnk+IENhbGxOZXh0KE1lc3NhZ2VFbnRyeSBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1fcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLkdlbmVyYXRvck5leHRSZXMsIG0uTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgIG1fcmV0LlJlcXVlc3RJRCA9IG0uUmVxdWVzdElEO1xyXG4gICAgICAgICAgICBtX3JldC5TZXJ2aWNlUGF0aCA9IG0uU2VydmljZVBhdGg7XHJcbiAgICAgICAgICAgIGlmIChtLkVycm9yICE9IE1lc3NhZ2VFcnJvclR5cGUuTm9uZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG0uRXJyb3IgPT0gTWVzc2FnZUVycm9yVHlwZS5TdG9wSXRlcmF0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRvci5DbG9zZSgpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdG9yLkFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtX3JldC5BZGRFbGVtZW50KFwicmV0dXJuXCIsIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSAoUGFyYW1UeXBlKXNrZWwuUlJDb250ZXh0LlVucGFja1ZhclR5cGUobS5GaW5kRWxlbWVudChcInBhcmFtZXRlclwiKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IGF3YWl0IGdlbmVyYXRvci5OZXh0KHApO1xyXG4gICAgICAgICAgICAgICAgbV9yZXQuQWRkRWxlbWVudChcInJldHVyblwiLCBza2VsLlJSQ29udGV4dC5QYWNrVmFyVHlwZShyKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1fcmV0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgR2VuZXJhdG9yMlNlcnZlcjxSZXR1cm5UeXBlPiA6IEdlbmVyYXRvclNlcnZlckJhc2VcclxuICAgIHtcclxuICAgICAgICBwcm90ZWN0ZWQgR2VuZXJhdG9yMjxSZXR1cm5UeXBlPiBnZW5lcmF0b3I7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHZW5lcmF0b3IyU2VydmVyKEdlbmVyYXRvcjI8UmV0dXJuVHlwZT4gZ2VuZXJhdG9yLCBzdHJpbmcgbmFtZSwgaW50IGlkLCBTZXJ2aWNlU2tlbCBza2VsLCBTZXJ2ZXJFbmRwb2ludCBlcCkgOiBiYXNlKG5hbWUsIGlkLCBza2VsLCBlcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGFzeW5jIFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsTmV4dChNZXNzYWdlRW50cnkgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtX3JldCA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5HZW5lcmF0b3JOZXh0UmVzLCBtLk1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICBtX3JldC5SZXF1ZXN0SUQgPSBtLlJlcXVlc3RJRDtcclxuICAgICAgICAgICAgbV9yZXQuU2VydmljZVBhdGggPSBtLlNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICBpZiAobS5FcnJvciAhPSBNZXNzYWdlRXJyb3JUeXBlLk5vbmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtLkVycm9yID09IE1lc3NhZ2VFcnJvclR5cGUuU3RvcEl0ZXJhdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0b3IuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0b3IuQWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1fcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBhd2FpdCBnZW5lcmF0b3IuTmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgbV9yZXQuQWRkRWxlbWVudChcInJldHVyblwiLCBza2VsLlJSQ29udGV4dC5QYWNrVmFyVHlwZShyKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1fcmV0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgR2VuZXJhdG9yM1NlcnZlcjxQYXJhbVR5cGU+IDogR2VuZXJhdG9yU2VydmVyQmFzZVxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBHZW5lcmF0b3IzPFBhcmFtVHlwZT4gZ2VuZXJhdG9yO1xyXG5cclxuICAgICAgICBwdWJsaWMgR2VuZXJhdG9yM1NlcnZlcihHZW5lcmF0b3IzPFBhcmFtVHlwZT4gZ2VuZXJhdG9yLCBzdHJpbmcgbmFtZSwgaW50IGlkLCBTZXJ2aWNlU2tlbCBza2VsLCBTZXJ2ZXJFbmRwb2ludCBlcCkgOiBiYXNlKG5hbWUsIGlkLCBza2VsLCBlcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGFzeW5jIFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsTmV4dChNZXNzYWdlRW50cnkgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtX3JldCA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5HZW5lcmF0b3JOZXh0UmVzLCBtLk1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICBtX3JldC5SZXF1ZXN0SUQgPSBtLlJlcXVlc3RJRDtcclxuICAgICAgICAgICAgbV9yZXQuU2VydmljZVBhdGggPSBtLlNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICBpZiAobS5FcnJvciAhPSBNZXNzYWdlRXJyb3JUeXBlLk5vbmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtLkVycm9yID09IE1lc3NhZ2VFcnJvclR5cGUuU3RvcEl0ZXJhdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0b3IuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0b3IuQWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1fcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IChQYXJhbVR5cGUpc2tlbC5SUkNvbnRleHQuVW5wYWNrVmFyVHlwZShtLkZpbmRFbGVtZW50KFwicGFyYW1ldGVyXCIpKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRvci5OZXh0KHApO1xyXG4gICAgICAgICAgICAgICAgbV9yZXQuQWRkRWxlbWVudChcInJldHVyblwiLCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbV9yZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBFbnVtZXJhdG9yR2VuZXJhdG9yPFQ+IDogR2VuZXJhdG9yMjxUPlxyXG4gICAge1xyXG4gICAgICAgIGJvb2wgYWJvcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGJvb2wgY2xvc2VkID0gZmFsc2U7XHJcbiAgICAgICAgSUVudW1lcmF0b3I8VD4gZW51bWVyYXRvcjtcclxuXHJcbiAgICAgICAgcHVibGljIEVudW1lcmF0b3JHZW5lcmF0b3IoSUVudW1lcmFibGU8VD4gZW51bWVyYWJsZSlcclxuICAgICAgICAgICAgOiB0aGlzKGVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpKVxyXG4gICAgICAgIHsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRW51bWVyYXRvckdlbmVyYXRvcihJRW51bWVyYXRvcjxUPiBlbnVtZXJhdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5lbnVtZXJhdG9yID0gZW51bWVyYXRvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUYXNrIEFib3J0KENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYWJvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDxpbnQ+KDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRhc2sgQ2xvc2UoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8aW50PigwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUYXNrPFQ+IE5leHQoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWJvcnRlZCkgdGhyb3cgbmV3IE9wZXJhdGlvbkFib3J0ZWRFeGNlcHRpb24oXCJHZW5lcmF0b3IgYWJvcnRlZFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChjbG9zZWQpIHRocm93IG5ldyBTdG9wSXRlcmF0aW9uRXhjZXB0aW9uKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbnVtZXJhdG9yLk1vdmVOZXh0KCkpIHRocm93IG5ldyBTdG9wSXRlcmF0aW9uRXhjZXB0aW9uKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDxUPihlbnVtZXJhdG9yLkN1cnJlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxUW10+IE5leHRBbGwoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PFQ+IG8gPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgby5BZGQoYXdhaXQgTmV4dCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoU3RvcEl0ZXJhdGlvbkV4Y2VwdGlvbikgeyB9XHJcbiAgICAgICAgICAgIHJldHVybiBvLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiLy8gQ29weXJpZ2h0IDIwMTEtMjAxOSBXYXNvbiBUZWNobm9sb2d5LCBMTENcclxuLy9cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy9cclxuLy8gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbi8vXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5cclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE11bHRpRGltQXJyYXlfQ2FsY3VsYXRlQ29weUluZGljZXNJdGVyXHJcbiAgICB7XHJcbiAgICAgICAgdWludFtdIG1lbWFfZGltcztcclxuICAgICAgICB1aW50W10gbWVtYl9kaW1zO1xyXG4gICAgICAgIHVpbnRbXSBtZW1hX3BvcztcclxuICAgICAgICB1aW50W10gbWVtYl9wb3M7XHJcbiAgICAgICAgdWludFtdIGNvdW50O1xyXG5cclxuICAgICAgICB1aW50W10gc3RyaWRlYTtcclxuICAgICAgICB1aW50W10gc3RyaWRlYjtcclxuXHJcbiAgICAgICAgdWludFtdIGN1cnJlbnRfY291bnQ7XHJcblxyXG4gICAgICAgIGJvb2wgZG9uZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNdWx0aURpbUFycmF5X0NhbGN1bGF0ZUNvcHlJbmRpY2VzSXRlciBCZWdpbkl0ZXIodWludFtdIG1lbWFfZGltcywgdWludFtdIG1lbWFfcG9zLCB1aW50W10gbWVtYl9kaW1zLCB1aW50W10gbWVtYl9wb3MsIHVpbnRbXSBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjb3VudC5MZW5ndGggPT0gMCkgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiTXVsdGlEaW1BcnJheSBjb3VudCBpbnZhbGlkXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvdW50Lkxlbmd0aCA+IG1lbWFfZGltcy5MZW5ndGggfHwgY291bnQuTGVuZ3RoID4gbWVtYl9kaW1zLkxlbmd0aCkgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiTXVsdGlEaW1BcnJheSBjb3B5IGNvdW50IGludmFsaWRcIik7XHJcbiAgICAgICAgICAgIGlmIChjb3VudC5MZW5ndGggPiBtZW1iX2RpbXMuTGVuZ3RoIHx8IGNvdW50Lkxlbmd0aCA+IG1lbWJfZGltcy5MZW5ndGgpIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIk11bHRpRGltQXJyYXkgY29weSBjb3VudCBpbnZhbGlkXCIpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtZW1hX2RpbXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtZW1hX2RpbXNbaV0gPCAwKSB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJNdWx0aURpbUFycmF5IG1lbWFfZGltcyBpbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1lbWJfZGltcy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lbWJfZGltc1tpXSA8IDApIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIk11bHRpRGltQXJyYXkgbWVtYl9kaW1zIGludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudFtpXSA8IDApIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIk11bHRpRGltQXJyYXkgY291bnQgaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtZW1hX2RpbXMuTGVuZ3RoICYmIGkgPCBjb3VudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lbWFfcG9zW2ldID4gbWVtYV9kaW1zW2ldIHx8IChtZW1hX3Bvc1tpXSArIGNvdW50W2ldKSA+IG1lbWFfZGltc1tpXSlcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJNdWx0aURpbUFycmF5IEEgY291bnQgaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtZW1iX2RpbXMuTGVuZ3RoICYmIGkgPCBjb3VudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lbWJfcG9zW2ldID4gbWVtYl9kaW1zW2ldIHx8IChtZW1iX3Bvc1tpXSArIGNvdW50W2ldKSA+IG1lbWJfZGltc1tpXSlcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJNdWx0aURpbUFycmF5IEIgY291bnQgaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHN0cmlkZWEgPSBuZXcgdWludFtjb3VudC5MZW5ndGhdO1xyXG4gICAgICAgICAgICBzdHJpZGVhWzBdID0gMTtcclxuICAgICAgICAgICAgZm9yICh1aW50IGkgPSAxOyBpIDwgKHVpbnQpY291bnQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmlkZWFbaV0gPSBzdHJpZGVhW2kgLSAxXSAqIG1lbWFfZGltc1tpIC0gMV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzdHJpZGViID0gbmV3IHVpbnRbY291bnQuTGVuZ3RoXTtcclxuICAgICAgICAgICAgc3RyaWRlYlswXSA9IDE7XHJcbiAgICAgICAgICAgIGZvciAodWludCBpID0gMTsgaSA8ICh1aW50KWNvdW50Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHJpZGViW2ldID0gc3RyaWRlYltpIC0gMV0gKiBtZW1iX2RpbXNbaSAtIDFdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBNdWx0aURpbUFycmF5X0NhbGN1bGF0ZUNvcHlJbmRpY2VzSXRlcigpO1xyXG5cclxuICAgICAgICAgICAgby5tZW1hX2RpbXMgPSBtZW1hX2RpbXM7XHJcbiAgICAgICAgICAgIG8ubWVtYl9kaW1zID0gbWVtYl9kaW1zO1xyXG4gICAgICAgICAgICBvLm1lbWFfcG9zID0gbWVtYV9wb3M7XHJcbiAgICAgICAgICAgIG8ubWVtYl9wb3MgPSBtZW1iX3BvcztcclxuICAgICAgICAgICAgby5jb3VudCA9IGNvdW50OyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvLmN1cnJlbnRfY291bnQgPSBuZXcgdWludFtjb3VudC5MZW5ndGhdO1xyXG4gICAgICAgICAgICBvLmRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgby5zdHJpZGVhID0gc3RyaWRlYTtcclxuICAgICAgICAgICAgby5zdHJpZGViID0gc3RyaWRlYjtcclxuICAgICAgICAgICAgcmV0dXJuIG87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBOZXh0KG91dCB1aW50IGluZGV4YSwgb3V0IHVpbnQgaW5kZXhiLCBvdXQgdWludCBsZW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZG9uZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhhID0gMDtcclxuICAgICAgICAgICAgICAgIGluZGV4YiA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZW4gPSAwO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnQgYSA9IDA7XHJcbiAgICAgICAgICAgIGludCBiID0gMDtcclxuXHJcbiAgICAgICAgICAgIGluZGV4YSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodWludCBqID0gMDsgaiA8ICh1aW50KWNvdW50Lkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgaW5kZXhhICs9IChjdXJyZW50X2NvdW50W2pdICsgbWVtYV9wb3Nbal0pICogc3RyaWRlYVtqXTtcclxuICAgICAgICAgICAgaW5kZXhiID0gMDtcclxuICAgICAgICAgICAgZm9yICh1aW50IGogPSAwOyBqIDwgKHVpbnQpY291bnQuTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICBpbmRleGIgKz0gKGN1cnJlbnRfY291bnRbal0gKyBtZW1iX3Bvc1tqXSkgKiBzdHJpZGViW2pdO1xyXG5cclxuICAgICAgICAgICAgbGVuID0gY291bnRbMF07XHJcblxyXG4gICAgICAgICAgICBpZiAoY291bnQuTGVuZ3RoIDw9IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRfY291bnRbMV0rKztcclxuICAgICAgICAgICAgZm9yICh1aW50IGogPSAxOyBqIDwgKHVpbnQpY291bnQuTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X2NvdW50W2pdID4gKGNvdW50W2pdIC0gMSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb3VudFtqXSA9IGN1cnJlbnRfY291bnRbal0gLSBjb3VudFtqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA8ICh1aW50KWNvdW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NvdW50W2ogKyAxXSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTXVsdGlEaW1BcnJheVxyXG4gICAge1xyXG5cclxuICAgICAgICBwdWJsaWMgTXVsdGlEaW1BcnJheSgpIHsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTXVsdGlEaW1BcnJheSh1aW50W10gRGltcywgQXJyYXkgQXJyYXlfKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuRGltcyA9IERpbXM7XHJcbiAgICAgICAgICAgIHRoaXMuQXJyYXlfID0gQXJyYXlfO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVpbnRbXSBEaW1zO1xyXG4gICAgICAgIHB1YmxpYyBBcnJheSBBcnJheV87XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgUmV0cmlldmVTdWJBcnJheSh1aW50W10gbWVtb3J5cG9zLCBNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWludFtdIGJ1ZmZlcnBvcywgdWludFtdIGNvdW50KVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIE11bHRpRGltQXJyYXkgbWVtYSA9IHRoaXM7XHJcbiAgICAgICAgICAgIE11bHRpRGltQXJyYXkgbWVtYiA9IGJ1ZmZlcjtcclxuXHJcbiAgICAgICAgICAgIE11bHRpRGltQXJyYXlfQ2FsY3VsYXRlQ29weUluZGljZXNJdGVyIGl0ZXIgPSBNdWx0aURpbUFycmF5X0NhbGN1bGF0ZUNvcHlJbmRpY2VzSXRlci5CZWdpbkl0ZXIobWVtYS5EaW1zLCBtZW1vcnlwb3MsIG1lbWIuRGltcywgYnVmZmVycG9zLCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICB1aW50IGluZGV4YTtcclxuICAgICAgICAgICAgdWludCBpbmRleGI7XHJcbiAgICAgICAgICAgIHVpbnQgbGVuO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGl0ZXIuTmV4dChvdXQgaW5kZXhhLCBvdXQgaW5kZXhiLCBvdXQgbGVuKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShtZW1hLkFycmF5XywgKGxvbmcpaW5kZXhhLCBtZW1iLkFycmF5XywgKGxvbmcpaW5kZXhiLCAobG9uZylsZW4pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBBc3NpZ25TdWJBcnJheSh1aW50W10gbWVtb3J5cG9zLCBNdWx0aURpbUFycmF5IGJ1ZmZlciwgdWludFtdIGJ1ZmZlcnBvcywgdWludFtdIGNvdW50KVxyXG4gICAgICAgIHtcclxuXHJcblxyXG4gICAgICAgICAgICBNdWx0aURpbUFycmF5IG1lbWEgPSB0aGlzO1xyXG4gICAgICAgICAgICBNdWx0aURpbUFycmF5IG1lbWIgPSBidWZmZXI7XHJcblxyXG4gICAgICAgICAgICBNdWx0aURpbUFycmF5X0NhbGN1bGF0ZUNvcHlJbmRpY2VzSXRlciBpdGVyID0gTXVsdGlEaW1BcnJheV9DYWxjdWxhdGVDb3B5SW5kaWNlc0l0ZXIuQmVnaW5JdGVyKG1lbWEuRGltcywgbWVtb3J5cG9zLCBtZW1iLkRpbXMsIGJ1ZmZlcnBvcywgY291bnQpO1xyXG5cclxuICAgICAgICAgICAgdWludCBpbmRleGE7XHJcbiAgICAgICAgICAgIHVpbnQgaW5kZXhiO1xyXG4gICAgICAgICAgICB1aW50IGxlbjtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVyLk5leHQob3V0IGluZGV4YSwgb3V0IGluZGV4Yiwgb3V0IGxlbikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkobWVtYi5BcnJheV8sIChsb25nKWluZGV4YiwgbWVtYS5BcnJheV8sIChsb25nKWluZGV4YSwgKGxvbmcpbGVuKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBQb2RNdWx0aURpbUFycmF5XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFBvZE11bHRpRGltQXJyYXkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGltcyA9IG5ldyB1aW50W10geyAwIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUG9kTXVsdGlEaW1BcnJheSh1aW50W10gZGltcywgQXJyYXkgYXJyYXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEaW1zID0gZGltcztcclxuICAgICAgICAgICAgcG9kX2FycmF5ID0gYXJyYXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdWludFtdIERpbXM7XHJcbiAgICAgICAgcHVibGljIEFycmF5IHBvZF9hcnJheTtcclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBSZXRyaWV2ZVN1YkFycmF5KHVpbnRbXSBtZW1vcnlwb3MsIFBvZE11bHRpRGltQXJyYXkgYnVmZmVyLCB1aW50W10gYnVmZmVycG9zLCB1aW50W10gY291bnQpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgUG9kTXVsdGlEaW1BcnJheSBtZW1hID0gdGhpcztcclxuICAgICAgICAgICAgUG9kTXVsdGlEaW1BcnJheSBtZW1iID0gYnVmZmVyO1xyXG5cclxuICAgICAgICAgICAgTXVsdGlEaW1BcnJheV9DYWxjdWxhdGVDb3B5SW5kaWNlc0l0ZXIgaXRlciA9IE11bHRpRGltQXJyYXlfQ2FsY3VsYXRlQ29weUluZGljZXNJdGVyLkJlZ2luSXRlcihtZW1hLkRpbXMsIG1lbW9yeXBvcywgbWVtYi5EaW1zLCBidWZmZXJwb3MsIGNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIHVpbnQgaW5kZXhhO1xyXG4gICAgICAgICAgICB1aW50IGluZGV4YjtcclxuICAgICAgICAgICAgdWludCBsZW47XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoaXRlci5OZXh0KG91dCBpbmRleGEsIG91dCBpbmRleGIsIG91dCBsZW4pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KG1lbWEucG9kX2FycmF5LCAobG9uZylpbmRleGEsIG1lbWIucG9kX2FycmF5LCAobG9uZylpbmRleGIsIChsb25nKWxlbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIEFzc2lnblN1YkFycmF5KHVpbnRbXSBtZW1vcnlwb3MsIFBvZE11bHRpRGltQXJyYXkgYnVmZmVyLCB1aW50W10gYnVmZmVycG9zLCB1aW50W10gY291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBQb2RNdWx0aURpbUFycmF5IG1lbWEgPSB0aGlzO1xyXG4gICAgICAgICAgICBQb2RNdWx0aURpbUFycmF5IG1lbWIgPSBidWZmZXI7XHJcblxyXG4gICAgICAgICAgICBNdWx0aURpbUFycmF5X0NhbGN1bGF0ZUNvcHlJbmRpY2VzSXRlciBpdGVyID0gTXVsdGlEaW1BcnJheV9DYWxjdWxhdGVDb3B5SW5kaWNlc0l0ZXIuQmVnaW5JdGVyKG1lbWEuRGltcywgbWVtb3J5cG9zLCBtZW1iLkRpbXMsIGJ1ZmZlcnBvcywgY291bnQpO1xyXG5cclxuICAgICAgICAgICAgdWludCBpbmRleGE7XHJcbiAgICAgICAgICAgIHVpbnQgaW5kZXhiO1xyXG4gICAgICAgICAgICB1aW50IGxlbjtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVyLk5leHQob3V0IGluZGV4YSwgb3V0IGluZGV4Yiwgb3V0IGxlbikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkobWVtYi5wb2RfYXJyYXksIChsb25nKWluZGV4YiwgbWVtYS5wb2RfYXJyYXksIChsb25nKWluZGV4YSwgKGxvbmcpbGVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE5hbWVkTXVsdGlEaW1BcnJheVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBOYW1lZE11bHRpRGltQXJyYXkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGltcyA9IG5ldyB1aW50W10geyAwIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTmFtZWRNdWx0aURpbUFycmF5KHVpbnRbXSBkaW1zLCBBcnJheSBhcnJheSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIERpbXMgPSBkaW1zO1xyXG4gICAgICAgICAgICBuYW1lZGFycmF5X2FycmF5ID0gYXJyYXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdWludFtdIERpbXM7XHJcbiAgICAgICAgcHVibGljIEFycmF5IG5hbWVkYXJyYXlfYXJyYXk7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgUmV0cmlldmVTdWJBcnJheSh1aW50W10gbWVtb3J5cG9zLCBOYW1lZE11bHRpRGltQXJyYXkgYnVmZmVyLCB1aW50W10gYnVmZmVycG9zLCB1aW50W10gY291bnQpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgTmFtZWRNdWx0aURpbUFycmF5IG1lbWEgPSB0aGlzO1xyXG4gICAgICAgICAgICBOYW1lZE11bHRpRGltQXJyYXkgbWVtYiA9IGJ1ZmZlcjtcclxuXHJcbiAgICAgICAgICAgIE11bHRpRGltQXJyYXlfQ2FsY3VsYXRlQ29weUluZGljZXNJdGVyIGl0ZXIgPSBNdWx0aURpbUFycmF5X0NhbGN1bGF0ZUNvcHlJbmRpY2VzSXRlci5CZWdpbkl0ZXIobWVtYS5EaW1zLCBtZW1vcnlwb3MsIG1lbWIuRGltcywgYnVmZmVycG9zLCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICB1aW50IGluZGV4YTtcclxuICAgICAgICAgICAgdWludCBpbmRleGI7XHJcbiAgICAgICAgICAgIHVpbnQgbGVuO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGl0ZXIuTmV4dChvdXQgaW5kZXhhLCBvdXQgaW5kZXhiLCBvdXQgbGVuKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShtZW1hLm5hbWVkYXJyYXlfYXJyYXksIChsb25nKWluZGV4YSwgbWVtYi5uYW1lZGFycmF5X2FycmF5LCAobG9uZylpbmRleGIsIChsb25nKWxlbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIEFzc2lnblN1YkFycmF5KHVpbnRbXSBtZW1vcnlwb3MsIE5hbWVkTXVsdGlEaW1BcnJheSBidWZmZXIsIHVpbnRbXSBidWZmZXJwb3MsIHVpbnRbXSBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5hbWVkTXVsdGlEaW1BcnJheSBtZW1hID0gdGhpcztcclxuICAgICAgICAgICAgTmFtZWRNdWx0aURpbUFycmF5IG1lbWIgPSBidWZmZXI7XHJcblxyXG4gICAgICAgICAgICBNdWx0aURpbUFycmF5X0NhbGN1bGF0ZUNvcHlJbmRpY2VzSXRlciBpdGVyID0gTXVsdGlEaW1BcnJheV9DYWxjdWxhdGVDb3B5SW5kaWNlc0l0ZXIuQmVnaW5JdGVyKG1lbWEuRGltcywgbWVtb3J5cG9zLCBtZW1iLkRpbXMsIGJ1ZmZlcnBvcywgY291bnQpO1xyXG5cclxuICAgICAgICAgICAgdWludCBpbmRleGE7XHJcbiAgICAgICAgICAgIHVpbnQgaW5kZXhiO1xyXG4gICAgICAgICAgICB1aW50IGxlbjtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVyLk5leHQob3V0IGluZGV4YSwgb3V0IGluZGV4Yiwgb3V0IGxlbikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkobWVtYi5uYW1lZGFycmF5X2FycmF5LCAobG9uZylpbmRleGIsIG1lbWEubmFtZWRhcnJheV9hcnJheSwgKGxvbmcpaW5kZXhhLCAobG9uZylsZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgMjAxMS0yMDE5IFdhc29uIFRlY2hub2xvZ3ksIExMQ1xyXG4vL1xyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4vL1xyXG4vLyAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuLy9cclxuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXM7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcclxudXNpbmcgUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucztcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUm9ib3RSYWNvbnRldXJOb2RlXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFJvYm90UmFjb250ZXVyTm9kZSBzcDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBSb2JvdFJhY29udGV1ck5vZGUgc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzcCA9PSBudWxsKSBzcCA9IG5ldyBSb2JvdFJhY29udGV1ck5vZGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBWZXJzaW9uID0gXCIwLjkuMFwiO1xyXG5cclxuICAgICAgICBwcml2YXRlIE5vZGVJRCBtX05vZGVJRDtcclxuXHJcbiAgICAgICAgcHVibGljIE5vZGVJRCBOb2RlSURcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobV9Ob2RlSUQgPT0gbnVsbCkgbV9Ob2RlSUQgPSBOb2RlSUQuTmV3VW5pcXVlSUQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtX05vZGVJRDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1fTm9kZUlEID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbV9Ob2RlSUQgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb2RlSUQgY2Fubm90IGJlIGNoYW5nZWQgb25jZSBpdCBpcyBzZXRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIHN0cmluZyBtX05vZGVOYW1lO1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTm9kZU5hbWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobV9Ob2RlTmFtZSA9PSBudWxsKSBtX05vZGVOYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtX05vZGVOYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobV9Ob2RlTmFtZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVJlZ2V4Lk1hdGNoKHZhbHVlLCBcIl5bYS16QS1aXVthLXpBLVowLTlfXFxcXC5cXFxcLV0qJFwiKS5TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIG5vZGUgbmFtZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1fTm9kZU5hbWUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb2RlTmFtZSBjYW5ub3QgYmUgY2hhbmdlZCBvbmNlIGl0IGlzIHNldFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBpbnRlcm5hbCBEaWN0aW9uYXJ5PHVpbnQsIEVuZHBvaW50PiBlbmRwb2ludHMgPSBuZXcgRGljdGlvbmFyeTx1aW50LCBFbmRwb2ludD4oKTtcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgRGljdGlvbmFyeTx1aW50LCBUcmFuc3BvcnQ+IHRyYW5zcG9ydHMgPSBuZXcgRGljdGlvbmFyeTx1aW50LCBUcmFuc3BvcnQ+KCk7XHJcblxyXG4gICAgICAgIC8vcHVibGljIERpY3Rpb25hcnk8dWludCwgdWludD4gZW5kcG9pbnRfbWFwPW5ldyBEaWN0aW9uYXJ5PHVpbnQsdWludD47XHJcblxyXG4gICAgICAgIGludGVybmFsIERpY3Rpb25hcnk8c3RyaW5nLCBTZXJ2aWNlRmFjdG9yeT4gc2VydmljZV9mYWN0b3JpZXMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZpY2VGYWN0b3J5PigpO1xyXG5cclxuICAgICAgICBpbnRlcm5hbCBEeW5hbWljU2VydmljZUZhY3RvcnkgZHluYW1pY19mYWN0b3J5O1xyXG5cclxuICAgICAgICBwdWJsaWMgRHluYW1pY1NlcnZpY2VGYWN0b3J5IER5bmFtaWNTZXJ2aWNlRmFjdG9yeSB7IGdldCB7IHJldHVybiBkeW5hbWljX2ZhY3Rvcnk7IH0gfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBEaWN0aW9uYXJ5PHN0cmluZywgU2VydmVyQ29udGV4dD4gc2VydmljZXMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFNlcnZlckNvbnRleHQ+KCk7XHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIHVpbnQgdHJhbnNwb3J0X2NvdW50ID0gMDtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIHVpbnQgRW5kcG9pbnRJbmFjdGl2aXR5VGltZW91dCA9IDYwMDAwMDtcclxuICAgICAgICBwdWJsaWMgdWludCBUcmFuc3BvcnRJbmFjdGl2aXR5VGltZW91dCA9IDYwMDAwMDtcclxuICAgICAgICBwdWJsaWMgdWludCBSZXF1ZXN0VGltZW91dCA9IDE1MDAwO1xyXG4gICAgICAgIHByaXZhdGUgU2VydmljZUluZGV4ZXIgc2VydmljZWluZGV4ZXI7XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBNZW1vcnlNYXhUcmFuc2ZlclNpemUgPSAxMDI0MDA7XHJcblxyXG4jaWYgUk9CT1RSQUNPTlRFVVJfQlJJREdFXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IEJyb3dzZXJXZWJTb2NrZXRUcmFuc3BvcnQgYnJvd3Nlcl90cmFuc3BvcnQ7XHJcbiNlbmRpZlxyXG5cclxuICAgICAgICBSb2JvdFJhY29udGV1ck5vZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2VydmljZWluZGV4ZXIgPSBuZXcgU2VydmljZUluZGV4ZXIodGhpcyk7XHJcbiAgICAgICAgICAgIFJlZ2lzdGVyU2VydmljZVR5cGUobmV3IFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4LlJvYm90UmFjb250ZXVyU2VydmljZUluZGV4RmFjdG9yeSh0aGlzKSk7XHJcbiAgICAgICAgICAgIFJlZ2lzdGVyU2VydmljZShcIlJvYm90UmFjb250ZXVyU2VydmljZUluZGV4XCIsIFwiUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXhcIiwgc2VydmljZWluZGV4ZXIpO1xyXG4gICAgICAgICAgICBjbGVhbmRpc2NvdmVyZWRub2Rlc190YXNrID0gIFBlcmlvZGljVGFzay5SdW4oKEFjdGlvbilDbGVhbkRpc2NvdmVyZWROb2RlcywgVGltZVNwYW4uRnJvbVNlY29uZHMoNSksIHNodXRkb3duX3Rva2VuLlRva2VuKTtcclxuI2lmIFJPQk9UUkFDT05URVVSX0JSSURHRVxyXG4gICAgICAgICAgICBicm93c2VyX3RyYW5zcG9ydCA9IG5ldyBCcm93c2VyV2ViU29ja2V0VHJhbnNwb3J0KHRoaXMpO1xyXG4gICAgICAgICAgICBSZWdpc3RlclRyYW5zcG9ydChicm93c2VyX3RyYW5zcG9ydCk7XHJcbiNlbmRpZlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBTZXJ2aWNlRmFjdG9yeSBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUoc3RyaW5nIHR5cGUsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyBzZXJ2aWNlbmFtZSA9IFNlcnZpY2VEZWZpbml0aW9uVXRpbC5TcGxpdFF1YWxpZmllZE5hbWUodHlwZSkuSXRlbTE7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29udGV4dCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTZXJ2aWNlRmFjdG9yeSBmO1xyXG4gICAgICAgICAgICAgICAgaWYoY29udGV4dC5UcnlHZXRQdWxsZWRTZXJ2aWNlVHlwZShzZXJ2aWNlbmFtZSwgb3V0IGYpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlVHlwZShzZXJ2aWNlbmFtZSk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIFNlcnZpY2VGYWN0b3J5IEdldFNlcnZpY2VGYWN0b3J5Rm9yVHlwZShUeXBlIHR5cGUsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUoU2VydmljZURlZmluaXRpb25VdGlsLkZpbmRTdHJ1Y3RSUlR5cGUodHlwZSksIGNvbnRleHQpOyAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIFBhY2tTdHJ1Y3R1cmUoT2JqZWN0IHMsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIEdldFNlcnZpY2VGYWN0b3J5Rm9yVHlwZShzLkdldFR5cGUoKSwgY29udGV4dCkuUGFja1N0cnVjdHVyZShzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIFQgVW5wYWNrU3RydWN0dXJlPFQ+KE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIGwsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChsID09IG51bGwpIHJldHVybiBkZWZhdWx0KFQpO1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0U2VydmljZUZhY3RvcnlGb3JUeXBlKGwuVHlwZSwgY29udGV4dCkuVW5wYWNrU3RydWN0dXJlPFQ+KGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkgUGFja1BvZFRvQXJyYXk8VD4ocmVmIFQgcywgQ2xpZW50Q29udGV4dCBjb250ZXh0KSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0U2VydmljZUZhY3RvcnlGb3JUeXBlKHMuR2V0VHlwZSgpLCBjb250ZXh0KS5QYWNrUG9kVG9BcnJheTxUPihyZWYgcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVCBVbnBhY2tQb2RGcm9tQXJyYXk8VD4oTWVzc2FnZUVsZW1lbnRQb2RBcnJheSBsLCBDbGllbnRDb250ZXh0IGNvbnRleHQpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUobC5UeXBlLCBjb250ZXh0KS5VbnBhY2tQb2RGcm9tQXJyYXk8VD4obCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnRQb2RBcnJheSBQYWNrUG9kQXJyYXk8VD4oVFtdIHMsIENsaWVudENvbnRleHQgY29udGV4dCkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHMgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUocy5HZXRUeXBlKCksIGNvbnRleHQpLlBhY2tQb2RBcnJheTxUPihzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUW10gVW5wYWNrUG9kQXJyYXk8VD4oTWVzc2FnZUVsZW1lbnRQb2RBcnJheSBsLCBDbGllbnRDb250ZXh0IGNvbnRleHQpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChsID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0U2VydmljZUZhY3RvcnlGb3JUeXBlKGwuVHlwZSwgY29udGV4dCkuVW5wYWNrUG9kQXJyYXk8VD4obCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnRQb2RNdWx0aURpbUFycmF5IFBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KFBvZE11bHRpRGltQXJyYXkgcywgQ2xpZW50Q29udGV4dCBjb250ZXh0KSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocyA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIEdldFNlcnZpY2VGYWN0b3J5Rm9yVHlwZShzLnBvZF9hcnJheS5HZXRUeXBlKCksIGNvbnRleHQpLlBhY2tQb2RNdWx0aURpbUFycmF5PFQ+KHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBvZE11bHRpRGltQXJyYXkgVW5wYWNrUG9kTXVsdGlEaW1BcnJheTxUPihNZXNzYWdlRWxlbWVudFBvZE11bHRpRGltQXJyYXkgbCwgQ2xpZW50Q29udGV4dCBjb250ZXh0KSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobCA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIEdldFNlcnZpY2VGYWN0b3J5Rm9yVHlwZShsLlR5cGUsIGNvbnRleHQpLlVucGFja1BvZE11bHRpRGltQXJyYXk8VD4obCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFBhY2tQb2Qob2JqZWN0IHMsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gcy5HZXRUeXBlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodC5Jc1ZhbHVlVHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldFNlcnZpY2VGYWN0b3J5Rm9yVHlwZSh0LCBjb250ZXh0KS5QYWNrUG9kKHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHQuSXNBcnJheSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldFNlcnZpY2VGYWN0b3J5Rm9yVHlwZSh0LkdldEVsZW1lbnRUeXBlKCksIGNvbnRleHQpLlBhY2tQb2Qocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodCA9PSB0eXBlb2YoUG9kTXVsdGlEaW1BcnJheSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUoKChQb2RNdWx0aURpbUFycmF5KXMpLnBvZF9hcnJheS5HZXRUeXBlKCkuR2V0RWxlbWVudFR5cGUoKSwgY29udGV4dCkuUGFja1BvZChzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0ID09IHR5cGVvZihOYW1lZE11bHRpRGltQXJyYXkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gR2V0U2VydmljZUZhY3RvcnlGb3JUeXBlKCgoTmFtZWRNdWx0aURpbUFycmF5KXMpLm5hbWVkYXJyYXlfYXJyYXkuR2V0VHlwZSgpLkdldEVsZW1lbnRUeXBlKCksIGNvbnRleHQpLlBhY2tOYW1lZEFycmF5KHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIkludmFsaWQgcG9kIG9iamVjdFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgVW5wYWNrUG9kKG9iamVjdCBsLCBDbGllbnRDb250ZXh0IGNvbnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0U2VydmljZUZhY3RvcnlGb3JUeXBlKE1lc3NhZ2VFbGVtZW50VXRpbC5HZXRNZXNzYWdlRWxlbWVudERhdGFUeXBlU3RyaW5nKGwpLCBjb250ZXh0KS5VbnBhY2tQb2QobCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IFBhY2tOYW1lZEFycmF5VG9BcnJheTxUPihyZWYgVCBzLCBDbGllbnRDb250ZXh0IGNvbnRleHQpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUocy5HZXRUeXBlKCksIGNvbnRleHQpLlBhY2tOYW1lZEFycmF5VG9BcnJheTxUPihyZWYgcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVCBVbnBhY2tOYW1lZEFycmF5RnJvbUFycmF5PFQ+KE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSBsLCBDbGllbnRDb250ZXh0IGNvbnRleHQpIHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUobC5UeXBlLCBjb250ZXh0KS5VbnBhY2tOYW1lZEFycmF5RnJvbUFycmF5PFQ+KGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSBQYWNrTmFtZWRBcnJheTxUPihUW10gcywgQ2xpZW50Q29udGV4dCBjb250ZXh0KSB3aGVyZSBUIDogc3RydWN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocyA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIEdldFNlcnZpY2VGYWN0b3J5Rm9yVHlwZShzLkdldFR5cGUoKSwgY29udGV4dCkuUGFja05hbWVkQXJyYXk8VD4ocyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVFtdIFVucGFja05hbWVkQXJyYXk8VD4oTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IGwsIENsaWVudENvbnRleHQgY29udGV4dCkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUobC5UeXBlLCBjb250ZXh0KS5VbnBhY2tOYW1lZEFycmF5PFQ+KGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5IFBhY2tOYW1lZE11bHRpRGltQXJyYXk8VD4oTmFtZWRNdWx0aURpbUFycmF5IHMsIENsaWVudENvbnRleHQgY29udGV4dCkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHMgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUocy5uYW1lZGFycmF5X2FycmF5LkdldFR5cGUoKSwgY29udGV4dCkuUGFja05hbWVkTXVsdGlEaW1BcnJheTxUPihzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBOYW1lZE11bHRpRGltQXJyYXkgVW5wYWNrTmFtZWRNdWx0aURpbUFycmF5PFQ+KE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5IGwsIENsaWVudENvbnRleHQgY29udGV4dCkgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUobC5UeXBlLCBjb250ZXh0KS5VbnBhY2tOYW1lZE11bHRpRGltQXJyYXk8VD4obCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFBhY2tOYW1lZEFycmF5KG9iamVjdCBzLCBDbGllbnRDb250ZXh0IGNvbnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdCA9IHMuR2V0VHlwZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHQuSXNWYWx1ZVR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUodCwgY29udGV4dCkuUGFja05hbWVkQXJyYXkocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodC5Jc0FycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gR2V0U2VydmljZUZhY3RvcnlGb3JUeXBlKHQuR2V0RWxlbWVudFR5cGUoKSwgY29udGV4dCkuUGFja05hbWVkQXJyYXkocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodCA9PSB0eXBlb2YoTmFtZWRNdWx0aURpbUFycmF5KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldFNlcnZpY2VGYWN0b3J5Rm9yVHlwZSgoKE5hbWVkTXVsdGlEaW1BcnJheSlzKS5uYW1lZGFycmF5X2FycmF5LkdldFR5cGUoKS5HZXRFbGVtZW50VHlwZSgpLCBjb250ZXh0KS5QYWNrTmFtZWRBcnJheShzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIHBvZCBvYmplY3RcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFVucGFja05hbWVkQXJyYXkob2JqZWN0IGwsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRTZXJ2aWNlRmFjdG9yeUZvclR5cGUoTWVzc2FnZUVsZW1lbnRVdGlsLkdldE1lc3NhZ2VFbGVtZW50RGF0YVR5cGVTdHJpbmcobCksIGNvbnRleHQpLlVucGFja05hbWVkQXJyYXkobCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIE1lc3NhZ2VFbGVtZW50IFBhY2tDb250YWluZXJWYWx1ZTxUPihzdHJpbmcgbmFtZSwgcmVmIFQgZGF0YSwgQ2xpZW50Q29udGV4dCBjb250ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVHlwZSB0ID0gdHlwZW9mKFQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKG9iamVjdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNZXNzYWdlRWxlbWVudFV0aWwuTmV3TWVzc2FnZUVsZW1lbnQobmFtZSwgUGFja1ZhclR5cGUoKG9iamVjdClkYXRhLCBjb250ZXh0KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJvb2wgaXNfYXJyYXkgPSB0LklzQXJyYXk7XHJcbiAgICAgICAgICAgIGlmICghKHQuSXNWYWx1ZVR5cGUgfHwgIUVxdWFsaXR5Q29tcGFyZXI8VD4uRGVmYXVsdC5FcXVhbHMoZGF0YSwgZGVmYXVsdChUKSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZUVsZW1lbnRVdGlsLk5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodC5Jc1ByaW1pdGl2ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VFbGVtZW50VXRpbC5OZXdNZXNzYWdlRWxlbWVudChuYW1lLCBuZXcgVFtdIHsgZGF0YSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgIChpc19hcnJheSAmJiB0LkdldEVsZW1lbnRUeXBlKCkuSXNQcmltaXRpdmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNZXNzYWdlRWxlbWVudFV0aWwuTmV3TWVzc2FnZUVsZW1lbnQobmFtZSwgZGF0YSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodCA9PSB0eXBlb2Yoc3RyaW5nKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VFbGVtZW50VXRpbC5OZXdNZXNzYWdlRWxlbWVudChuYW1lLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKENEb3VibGUpIHx8IHQgPT0gdHlwZW9mKENTaW5nbGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZUVsZW1lbnRVdGlsLk5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNfYXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9IHQuR2V0RWxlbWVudFR5cGUoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0MiA9PSB0eXBlb2YoQ0RvdWJsZSkgfHwgdDIgPT0gdHlwZW9mKENTaW5nbGUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNZXNzYWdlRWxlbWVudFV0aWwuTmV3TWVzc2FnZUVsZW1lbnQobmFtZSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihNdWx0aURpbUFycmF5KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VFbGVtZW50VXRpbC5OZXdNZXNzYWdlRWxlbWVudChuYW1lLCBQYWNrTXVsdGlEaW1BcnJheSgoTXVsdGlEaW1BcnJheSkob2JqZWN0KWRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKFBvZE11bHRpRGltQXJyYXkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZUVsZW1lbnRVdGlsLk5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIFBhY2tQb2QoKG9iamVjdClkYXRhLCBjb250ZXh0KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihOYW1lZE11bHRpRGltQXJyYXkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZUVsZW1lbnRVdGlsLk5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIFBhY2tOYW1lZEFycmF5KChvYmplY3QpZGF0YSwgY29udGV4dCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodC5Jc0dlbmVyaWNUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIFJvYm90IFJhY29udGV1ciBjb250YWluZXIgdmFsdWUgdHlwZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0LklzVmFsdWVUeXBlICYmICFpc19hcnJheSAmJiB0ICE9IHR5cGVvZihQb2RNdWx0aURpbUFycmF5KSAmJiB0ICE9IHR5cGVvZihOYW1lZE11bHRpRGltQXJyYXkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZUVsZW1lbnRVdGlsLk5ld01lc3NhZ2VFbGVtZW50KG5hbWUsIFBhY2tTdHJ1Y3R1cmUoZGF0YSwgY29udGV4dCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHlwZSB0MiA9IHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodC5Jc0FycmF5KSB0MiA9IHQuR2V0RWxlbWVudFR5cGUoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0Mi5HZXRDdXN0b21BdHRyaWJ1dGVzKHR5cGVvZihSb2JvdFJhY29udGV1ck5hbWVkQXJyYXlFbGVtZW50VHlwZUFuZENvdW50KSwgZmFsc2UpLkxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VFbGVtZW50VXRpbC5OZXdNZXNzYWdlRWxlbWVudChuYW1lLCBQYWNrTmFtZWRBcnJheShkYXRhLCBjb250ZXh0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VFbGVtZW50VXRpbC5OZXdNZXNzYWdlRWxlbWVudChuYW1lLCBQYWNrUG9kKGRhdGEsIGNvbnRleHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBNZXNzYWdlRWxlbWVudCBQYWNrQ29udGFpbmVyVmFsdWU8VD4oaW50IG51bSwgcmVmIFQgZGF0YSwgQ2xpZW50Q29udGV4dCBjb250ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBhY2tDb250YWluZXJWYWx1ZTxUPihudW0uVG9TdHJpbmcoKSwgcmVmIGRhdGEsIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBUIFVucGFja0NvbnRhaW5lclZhbHVlPFQ+KE1lc3NhZ2VFbGVtZW50IGUsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZS5FbGVtZW50VHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudm9pZF90OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoVCkuSXNWYWx1ZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIlByaW1pdGl2ZSB0eXBlcyBtYXkgbm90IGJlIG51bGxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQoVCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5kb3VibGVfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnNpbmdsZV90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50OF90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDhfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDE2X3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MTZfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDMyX3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MzJfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDY0X3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50NjRfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmNkb3VibGVfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmNzaW5nbGVfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmJvb2xfdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKFQpLklzQXJyYXkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFQpZS5EYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZihUKSA9PSB0eXBlb2Yob2JqZWN0KSkgPyAoVCllLkRhdGEgOiAoKFRbXSllLkRhdGEpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnN0cmluZ190OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoVCllLkRhdGE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5tdWx0aWRpbWFycmF5X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudE11bHRpRGltQXJyYXkgbWQgPSAoTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5KWUuRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChUKShvYmplY3QpVW5wYWNrTXVsdGlEaW1BcnJheShtZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuc3RydWN0dXJlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSBtZCA9IChNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSllLkRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVbnBhY2tTdHJ1Y3R1cmU8VD4obWQsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qY2FzZSBEYXRhVHlwZXMucG9kX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgdXNpbmcgKE1lc3NhZ2VFbGVtZW50RGF0YSBtZCA9IChNZXNzYWdlRWxlbWVudERhdGEpZS5EYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChUKVVucGFja1BvZChtZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5wb2RfYXJyYXlfdDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkgbWQgPSAoTWVzc2FnZUVsZW1lbnRQb2RBcnJheSllLkRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoVCkuSXNWYWx1ZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZC5FbGVtZW50cy5Db3VudCAhPSAxKSB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIGFycmF5IHNpemUgZm9yIHNjYWxhciBzdHJ1Y3R1cmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKChUW10pVW5wYWNrUG9kKG1kLGNvbnRleHQpKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoVClVbnBhY2tQb2QobWQsY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5wb2RfbXVsdGlkaW1hcnJheV90OiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFQpVW5wYWNrUG9kKGUuRGF0YSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMubmFtZWRhcnJheV9hcnJheV90OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IG1kID0gKE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSllLkRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoVCkuSXNWYWx1ZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZC5FbGVtZW50cy5Db3VudCAhPSAxKSB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIGFycmF5IHNpemUgZm9yIHNjYWxhciBzdHJ1Y3R1cmVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoVFtdKVVucGFja05hbWVkQXJyYXkobWQsIGNvbnRleHQpKVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFQpVW5wYWNrTmFtZWRBcnJheShtZCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5uYW1lZGFycmF5X211bHRpZGltYXJyYXlfdDpcclxuICAgICAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChUKVVucGFja05hbWVkQXJyYXkoZS5EYXRhLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIkludmFsaWQgY29udGFpbmVyIGRhdGEgdHlwZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBUIFVucGFja0NvbnRhaW5lclZhbHVlPFQ+KE1lc3NhZ2VFbGVtZW50IGUsIG91dCBzdHJpbmcgbmFtZSwgQ2xpZW50Q29udGV4dCBjb250ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZSA9IGUuRWxlbWVudE5hbWU7XHJcbiAgICAgICAgICAgIHJldHVybiBVbnBhY2tDb250YWluZXJWYWx1ZTxUPihlLCBjb250ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgVCBVbnBhY2tDb250YWluZXJWYWx1ZTxUPihNZXNzYWdlRWxlbWVudCBlLCBvdXQgaW50IG51bSwgQ2xpZW50Q29udGV4dCBjb250ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbnVtID0gTWVzc2FnZUVsZW1lbnRVdGlsLkdldE1lc3NhZ2VFbGVtZW50TnVtYmVyKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gVW5wYWNrQ29udGFpbmVyVmFsdWU8VD4oZSwgY29udGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFBhY2tNYXBUeXBlPFRrZXksIFR2YWx1ZT4ob2JqZWN0IGRhdGEsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09IG51bGwpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZihUa2V5KSA9PSB0eXBlb2YoSW50MzIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbSA9IG5ldyBMaXN0PE1lc3NhZ2VFbGVtZW50PigpO1xyXG5cclxuICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8VGtleSwgVHZhbHVlPiBkZGF0YSA9IChEaWN0aW9uYXJ5PFRrZXksIFR2YWx1ZT4pZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChLZXlWYWx1ZVBhaXI8VGtleSwgVHZhbHVlPiBkIGluIGRkYXRhKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gZC5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudFV0aWwuQWRkTWVzc2FnZUVsZW1lbnQobSwgUGFja0NvbnRhaW5lclZhbHVlPFR2YWx1ZT4oQ29udmVydC5Ub0ludDMyKGQuS2V5KSwgcmVmIHYsIGNvbnRleHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWVzc2FnZUVsZW1lbnRNYXA8aW50PihtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZihUa2V5KSA9PSB0eXBlb2YoU3RyaW5nKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG0gPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKTtcclxuICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8VGtleSwgVHZhbHVlPiBkZGF0YSA9IChEaWN0aW9uYXJ5PFRrZXksIFR2YWx1ZT4pZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChLZXlWYWx1ZVBhaXI8VGtleSwgVHZhbHVlPiBkIGluIGRkYXRhKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gZC5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudFV0aWwuQWRkTWVzc2FnZUVsZW1lbnQobSwgUGFja0NvbnRhaW5lclZhbHVlPFR2YWx1ZT4oZC5LZXkuVG9TdHJpbmcoKSwgcmVmIHYsIGNvbnRleHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWVzc2FnZUVsZW1lbnRNYXA8c3RyaW5nPihtKTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiSW5kZXhlZCB0eXBlcyBjYW4gb25seSBiZSBpbmRleGVkIGJ5IGludDMyIGFuZCBzdHJpbmdcIik7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBVbnBhY2tNYXBUeXBlPFRrZXksIFR2YWx1ZT4ob2JqZWN0IGRhdGEsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09IG51bGwpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEgaXMgTWVzc2FnZUVsZW1lbnRNYXA8aW50PilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRGljdGlvbmFyeTxpbnQsIFR2YWx1ZT4gbyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgVHZhbHVlPigpO1xyXG5cclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50TWFwPGludD4gY2RhdGEgPSAoTWVzc2FnZUVsZW1lbnRNYXA8aW50PilkYXRhO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNkYXRhRWxlbWVudHMgPSBjZGF0YS5FbGVtZW50cztcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBlIGluIGNkYXRhRWxlbWVudHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgbnVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gVW5wYWNrQ29udGFpbmVyVmFsdWU8VHZhbHVlPihlLCBvdXQgbnVtLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5BZGQobnVtLCB2YWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YSBpcyBNZXNzYWdlRWxlbWVudE1hcDxzdHJpbmc+KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEaWN0aW9uYXJ5PHN0cmluZywgVHZhbHVlPiBvID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBUdmFsdWU+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnRNYXA8c3RyaW5nPiBjZGF0YSA9IChNZXNzYWdlRWxlbWVudE1hcDxzdHJpbmc+KWRhdGE7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2RhdGFFbGVtZW50cyA9IGNkYXRhLkVsZW1lbnRzO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gY2RhdGFFbGVtZW50cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gVW5wYWNrQ29udGFpbmVyVmFsdWU8VHZhbHVlPihlLCBvdXQgbmFtZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uQWRkKG5hbWUsIHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiSW5kZXhlZCB0eXBlcyBjYW4gb25seSBiZSBpbmRleGVkIGJ5IGludDMyIGFuZCBzdHJpbmdcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgUGFja0xpc3RUeXBlPFR2YWx1ZT4ob2JqZWN0IGRhdGEsIENsaWVudENvbnRleHQgY29udGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09IG51bGwpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKTtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTGlzdDxUdmFsdWU+IGRkYXRhID0gKExpc3Q8VHZhbHVlPilkYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChUdmFsdWUgZCBpbiBkZGF0YSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnRVdGlsLkFkZE1lc3NhZ2VFbGVtZW50KG0sIFBhY2tDb250YWluZXJWYWx1ZTxUdmFsdWU+KGNvdW50LCByZWYgdiwgY29udGV4dCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlRWxlbWVudExpc3QobSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgVW5wYWNrTGlzdFR5cGU8VHZhbHVlPihvYmplY3QgZGF0YSwgQ2xpZW50Q29udGV4dCBjb250ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIExpc3Q8VHZhbHVlPiBvID0gbmV3IExpc3Q8VHZhbHVlPigpO1xyXG4gICAgICAgICAgICBpbnQgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBNZXNzYWdlRWxlbWVudExpc3QgY2RhdGEgPSAoTWVzc2FnZUVsZW1lbnRMaXN0KWRhdGE7XHJcbiAgICAgICAgICAgIHZhciBjZGF0YUVsZW1lbnRzID0gY2RhdGEuRWxlbWVudHM7XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IGUgaW4gY2RhdGFFbGVtZW50cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgbnVtO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBVbnBhY2tDb250YWluZXJWYWx1ZTxUdmFsdWU+KGUsIG91dCBudW0sIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCAhPSBudW0pIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIkVycm9yIGluIGxpc3QgZm9ybWF0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG8uQWRkKHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFBhY2tWYXJUeXBlKG9iamVjdCBkYXRhLCBDbGllbnRDb250ZXh0IGNvbnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIFR5cGUgdCA9IGRhdGEuR2V0VHlwZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKERpY3Rpb25hcnk8aW50LCBvYmplY3Q+KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhY2tNYXBUeXBlPGludCwgb2JqZWN0PihkYXRhLCBjb250ZXh0KTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodCA9PSB0eXBlb2YoRGljdGlvbmFyeTxzdHJpbmcsIG9iamVjdD4pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFja01hcFR5cGU8c3RyaW5nLCBvYmplY3Q+KGRhdGEsIGNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0ID09IHR5cGVvZihMaXN0PG9iamVjdD4pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFja0xpc3RUeXBlPG9iamVjdD4oZGF0YSwgY29udGV4dCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBib29sIGlzX2FycmF5ID0gdC5Jc0FycmF5O1xyXG5cclxuICAgICAgICAgICAgaWYgKHQuSXNQcmltaXRpdmUgfHwgKGlzX2FycmF5ICYmIHQuR2V0RWxlbWVudFR5cGUoKS5Jc1ByaW1pdGl2ZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodCA9PSB0eXBlb2Yoc3RyaW5nKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihNdWx0aURpbUFycmF5KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhY2tNdWx0aURpbUFycmF5KChNdWx0aURpbUFycmF5KWRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoUG9kTXVsdGlEaW1BcnJheSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQYWNrUG9kKGRhdGEsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodC5Jc0dlbmVyaWNUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIFJvYm90IFJhY29udGV1ciB2YXJ2YWx1ZSB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXQuSXNWYWx1ZVR5cGUgJiYgIWlzX2FycmF5ICYmIHQgIT0gdHlwZW9mKFBvZE11bHRpRGltQXJyYXkpICYmIHQgIT0gdHlwZW9mKE5hbWVkTXVsdGlEaW1BcnJheSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQYWNrU3RydWN0dXJlKGRhdGEsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHlwZSB0MiA9IHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodC5Jc0FycmF5KSB0MiA9IHQuR2V0RWxlbWVudFR5cGUoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0Mi5HZXRDdXN0b21BdHRyaWJ1dGVzKHR5cGVvZihSb2JvdFJhY29udGV1ck5hbWVkQXJyYXlFbGVtZW50VHlwZUFuZENvdW50KSwgZmFsc2UpLkxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBhY2tOYW1lZEFycmF5KGRhdGEsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQYWNrUG9kKGRhdGEsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBVbnBhY2tWYXJUeXBlKE1lc3NhZ2VFbGVtZW50IG1lLCBDbGllbnRDb250ZXh0IGNvbnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobWUgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKG1lLkVsZW1lbnRUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy52b2lkX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy5kb3VibGVfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnNpbmdsZV90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuaW50OF90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMudWludDhfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDE2X3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MTZfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDMyX3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50MzJfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmludDY0X3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy51aW50NjRfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnN0cmluZ190OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZS5EYXRhO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMubXVsdGlkaW1hcnJheV90OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5IG1kID0gKE1lc3NhZ2VFbGVtZW50TXVsdGlEaW1BcnJheSltZS5EYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVW5wYWNrTXVsdGlEaW1BcnJheShtZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuc3RydWN0dXJlX3Q6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSBtZCA9IChNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSltZS5EYXRhOyAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVbnBhY2tTdHJ1Y3R1cmU8b2JqZWN0PihtZCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9jYXNlIERhdGFUeXBlcy5wb2RfdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLnBvZF9hcnJheV90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMucG9kX211bHRpZGltYXJyYXlfdDpcclxuICAgICAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVbnBhY2tQb2QobWUuRGF0YSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMubmFtZWRhcnJheV9hcnJheV90OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMubmFtZWRhcnJheV9tdWx0aWRpbWFycmF5X3Q6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVW5wYWNrTmFtZWRBcnJheShtZS5EYXRhLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlcy52ZWN0b3JfdDpcclxuICAgICAgICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVW5wYWNrTWFwVHlwZTxpbnQsIG9iamVjdD4obWUuRGF0YSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZXMuZGljdGlvbmFyeV90OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVucGFja01hcFR5cGU8c3RyaW5nLCBvYmplY3Q+KG1lLkRhdGEsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGVzLmxpc3RfdDogICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVucGFja0xpc3RUeXBlPG9iamVjdD4obWUuRGF0YSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJJbnZhbGlkIHZhcnZhbHVlIGRhdGEgdHlwZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5IFBhY2tNdWx0aURpbUFycmF5KE11bHRpRGltQXJyYXkgYXJyYXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGwgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKTtcclxuICAgICAgICAgICAgbC5BZGQobmV3IE1lc3NhZ2VFbGVtZW50KFwiZGltc1wiLGFycmF5LkRpbXMpKTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgbC5BZGQobmV3IE1lc3NhZ2VFbGVtZW50KFwiYXJyYXlcIiwgYXJyYXkuQXJyYXlfKSk7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWVzc2FnZUVsZW1lbnRNdWx0aURpbUFycmF5KGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE11bHRpRGltQXJyYXkgVW5wYWNrTXVsdGlEaW1BcnJheShNZXNzYWdlRWxlbWVudE11bHRpRGltQXJyYXkgbWFycmF5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG1hcnJheSA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIE11bHRpRGltQXJyYXkgbSA9IG5ldyBNdWx0aURpbUFycmF5KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtLkRpbXMgPSAoTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobWFycmF5LkVsZW1lbnRzLCBcImRpbXNcIikuQ2FzdERhdGE8dWludFtdPigpKTtcclxuICAgICAgICAgICAgbS5BcnJheV8gPSAoTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobWFycmF5LkVsZW1lbnRzLCBcImFycmF5XCIpLkNhc3REYXRhPEFycmF5PigpKTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBTZW5kTWVzc2FnZShNZXNzYWdlIG0sIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBpZiAobS5oZWFkZXIuU2VuZGVyTm9kZUlEICE9IE5vZGVJRClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJDb3VsZCBub3Qgcm91dGUgbWVzc2FnZVwiKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBFbmRwb2ludCBlO1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGUgPSBlbmRwb2ludHNbbS5oZWFkZXIuU2VuZGVyRW5kcG9pbnRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChLZXlOb3RGb3VuZEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRFbmRwb2ludEV4Y2VwdGlvbihcIkNvdWxkIG5vdCBmaW5kIGVuZHBvaW50XCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgVHJhbnNwb3J0IGM7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrICh0cmFuc3BvcnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSB0cmFuc3BvcnRzW2UudHJhbnNwb3J0XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoS2V5Tm90Rm91bmRFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiQ291bGQgbm90IGZpbmQgdHJhbnNwb3J0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBjLlNlbmRNZXNzYWdlKG0sIGNhbmNlbCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTWVzc2FnZVJlY2VpdmVkKE1lc3NhZ2UgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChtLmhlYWRlci5SZWNlaXZlck5vZGVJRCAhPSBOb2RlSUQpXHJcbiAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlIGVyZXQgPSBHZW5lcmF0ZUVycm9yUmV0dXJuTWVzc2FnZShtLCBNZXNzYWdlRXJyb3JUeXBlLk5vZGVOb3RGb3VuZCwgXCJSb2JvdFJhY29udGV1ci5Ob2RlTm90Rm91bmRcIiwgXCJDb3VsZCBub3QgZmluZCByb3V0ZSB0byByZW1vdGUgbm9kZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcmV0LmVudHJpZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIFNlbmRNZXNzYWdlKGVyZXQsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTsgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVuZHBvaW50IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKGVuZHBvaW50cylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGVuZHBvaW50c1ttLmhlYWRlci5SZWNlaXZlckVuZHBvaW50XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5NZXNzYWdlUmVjZWl2ZWQobSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChLZXlOb3RGb3VuZEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UgZXJldCA9IEdlbmVyYXRlRXJyb3JSZXR1cm5NZXNzYWdlKG0sIE1lc3NhZ2VFcnJvclR5cGUuSW52YWxpZEVuZHBvaW50LCBcIlJvYm90UmFjb250ZXVyLkludmFsaWRFbmRwb2ludFwiLCBcIkludmFsaWQgZGVzdGluYXRpb24gZW5kcG9pbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcmV0LmVudHJpZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VuZE1lc3NhZ2UoZXJldCwgZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIFxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZSBHZW5lcmF0ZUVycm9yUmV0dXJuTWVzc2FnZShNZXNzYWdlIG0sIE1lc3NhZ2VFcnJvclR5cGUgZXJyLCBzdHJpbmcgZXJybmFtZSwgc3RyaW5nIGVycmRlc2MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlIHJldCA9IG5ldyBNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIHJldC5oZWFkZXIgPSBuZXcgTWVzc2FnZUhlYWRlcigpO1xyXG4gICAgICAgICAgICByZXQuaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWUgPSBtLmhlYWRlci5TZW5kZXJOb2RlTmFtZTtcclxuICAgICAgICAgICAgcmV0LmhlYWRlci5TZW5kZXJOb2RlTmFtZSA9IG0uaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWU7XHJcbiAgICAgICAgICAgIHJldC5oZWFkZXIuUmVjZWl2ZXJOb2RlSUQgPSBtLmhlYWRlci5TZW5kZXJOb2RlSUQ7XHJcbiAgICAgICAgICAgIHJldC5oZWFkZXIuUmVjZWl2ZXJFbmRwb2ludCA9IG0uaGVhZGVyLlNlbmRlckVuZHBvaW50O1xyXG4gICAgICAgICAgICByZXQuaGVhZGVyLlNlbmRlckVuZHBvaW50ID0gbS5oZWFkZXIuUmVjZWl2ZXJFbmRwb2ludDtcclxuICAgICAgICAgICAgcmV0LmhlYWRlci5TZW5kZXJOb2RlSUQgPSBtLmhlYWRlci5SZWNlaXZlck5vZGVJRDtcclxuICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVudHJ5IG1lIGluIG0uZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCgoaW50KW1lLkVudHJ5VHlwZSkgJSAyID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IGVyZXQgPSBuZXcgTWVzc2FnZUVudHJ5KG1lLkVudHJ5VHlwZSsxLCBtZS5NZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBlcmV0LlJlcXVlc3RJRCA9IG1lLlJlcXVlc3RJRDtcclxuICAgICAgICAgICAgICAgICAgICBlcmV0LlNlcnZpY2VQYXRoID0gbWUuU2VydmljZVBhdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJldC5BZGRFbGVtZW50KFwiZXJyb3JuYW1lXCIsIGVycm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcImVycm9yc3RyaW5nXCIsIGVycmRlc2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVyZXQuRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0LmVudHJpZXMuQWRkKGVyZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlZ2lzdGVyU2VydmljZVR5cGUoU2VydmljZUZhY3RvcnkgZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHNlcnZpY2VfZmFjdG9yaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2ZhY3Rvcmllcy5BZGQoZi5HZXRTZXJ2aWNlTmFtZSgpLCBmKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFNlcnZpY2VGYWN0b3J5IEdldFNlcnZpY2VUeXBlKHN0cmluZyBzZXJ2aWNldHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNlcnZpY2VGYWN0b3J5IGY7XHJcbiAgICAgICAgICAgIGlmICghVHJ5R2V0U2VydmljZVR5cGUoc2VydmljZXR5cGUsIG91dCBmKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VFeGNlcHRpb24oXCJTZXJ2aWNlIGZhY3Rvcnkgbm90IGZvdW5kIGZvciBcIiArIHNlcnZpY2V0eXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZjsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFRyeUdldFNlcnZpY2VUeXBlKHN0cmluZyBzZXJ2aWNldHlwZSwgb3V0IFNlcnZpY2VGYWN0b3J5IGYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChzZXJ2aWNlX2ZhY3RvcmllcylcclxuICAgICAgICAgICAgeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlX2ZhY3Rvcmllcy5UcnlHZXRWYWx1ZShzZXJ2aWNldHlwZSxvdXQgZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nW10gR2V0U2VydmljZVR5cGVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHNlcnZpY2VfZmFjdG9yaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PHN0cmluZz4oc2VydmljZV9mYWN0b3JpZXMuS2V5cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlZ2lzdGVyRHluYW1pY1NlcnZpY2VGYWN0b3J5KER5bmFtaWNTZXJ2aWNlRmFjdG9yeSBmKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZHluYW1pY19mYWN0b3J5ICE9IG51bGwpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiRHluYW1pYyBzZXJ2aWNlIGZhY3RvcnkgYWxyZWFkeSBzZXRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY19mYWN0b3J5ID0gZjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJ2ZXJDb250ZXh0IFJlZ2lzdGVyU2VydmljZShzdHJpbmcgbmFtZSwgc3RyaW5nIHNlcnZpY2V0eXBlLCBPYmplY3Qgb2JqLFNlcnZpY2VTZWN1cml0eVBvbGljeSBzZWN1cml0eXBvbGljeT1udWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoc2VydmljZXMpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxzdHJpbmc+KHNlcnZpY2VzLktleXMsbmFtZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VTZXJ2aWNlKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFNlcnZlckNvbnRleHQgYyA9IG5ldyBTZXJ2ZXJDb250ZXh0KEdldFNlcnZpY2VUeXBlKHNlcnZpY2V0eXBlKSx0aGlzKTtcclxuICAgICAgICAgICAgICAgIGMuU2V0QmFzZU9iamVjdChuYW1lLCBvYmosIHNlY3VyaXR5cG9saWN5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1JlZ2lzdGVyRW5kcG9pbnQoYyk7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlcy5BZGQobmFtZSwgYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgVXBkYXRlU2VydmljZVN0YXRlTm9uY2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIFNlcnZlckNvbnRleHQgUmVnaXN0ZXJTZXJ2aWNlKFNlcnZlckNvbnRleHQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHNlcnZpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxzdHJpbmc+KHNlcnZpY2VzLktleXMsYy5TZXJ2aWNlTmFtZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VTZXJ2aWNlKGMuU2VydmljZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNlcnZpY2VzLkFkZChjLlNlcnZpY2VOYW1lLCBjKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbG9zZVNlcnZpY2Uoc3RyaW5nIHNuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoc2VydmljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNlcnZlckNvbnRleHQgcyA9IEdldFNlcnZpY2Uoc25hbWUpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy9EZWxldGVFbmRwb2ludChzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlcy5SZW1vdmUoc25hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBcclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFNlcnZlckNvbnRleHQgR2V0U2VydmljZShzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChzZXJ2aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZXNbbmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEtleU5vdEZvdW5kRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZU5vdEZvdW5kRXhjZXB0aW9uKFwiU2VydmljZSBcIiArIG5hbWUgKyBcIiBub3QgZm91bmRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVpbnQgUmVnaXN0ZXJUcmFuc3BvcnQoVHJhbnNwb3J0IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrICh0cmFuc3BvcnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnRfY291bnQrKztcclxuICAgICAgICAgICAgICAgIGMuVHJhbnNwb3J0SUQgPSB0cmFuc3BvcnRfY291bnQ7XHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnRzLkFkZCh0cmFuc3BvcnRfY291bnQsIGMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zcG9ydF9jb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICBcclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxNZXNzYWdlPiBTcGVjaWFsUmVxdWVzdChNZXNzYWdlIG0sIHVpbnQgdHJhbnNwb3J0aWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgaWYgKCEobS5oZWFkZXIuUmVjZWl2ZXJOb2RlSUQ9PU5vZGVJRC5BbnkgJiYgKG0uaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWU9PVwiXCIgfHwgbS5oZWFkZXIuUmVjZWl2ZXJOb2RlTmFtZT09Tm9kZU5hbWUpKVxyXG4gICAgICAgICAgICAgICAgJiYgIShtLmhlYWRlci5SZWNlaXZlck5vZGVJRCA9PSBOb2RlSUQpKVxyXG4gICAgICAgICAgICB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdlbmVyYXRlRXJyb3JSZXR1cm5NZXNzYWdlKG0sIE1lc3NhZ2VFcnJvclR5cGUuTm9kZU5vdEZvdW5kLCBcIlJvYm90UmFjb250ZXVyLk5vZGVOb3RGb3VuZFwiLCBcIkNvdWxkIG5vdCBmaW5kIHJvdXRlIHRvIHJlbW90ZSBub2RlXCIpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIE1lc3NhZ2UgcmV0ID0gbmV3IE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgcmV0LmhlYWRlciA9IG5ldyBNZXNzYWdlSGVhZGVyKCk7XHJcbiAgICAgICAgICAgIHJldC5oZWFkZXIuUmVjZWl2ZXJOb2RlTmFtZSA9IG0uaGVhZGVyLlNlbmRlck5vZGVOYW1lO1xyXG4gICAgICAgICAgICByZXQuaGVhZGVyLlNlbmRlck5vZGVOYW1lID0gdGhpcy5Ob2RlTmFtZTtcclxuICAgICAgICAgICAgcmV0LmhlYWRlci5SZWNlaXZlck5vZGVJRCA9IG0uaGVhZGVyLlNlbmRlck5vZGVJRDtcclxuICAgICAgICAgICAgcmV0LmhlYWRlci5SZWNlaXZlckVuZHBvaW50ID0gbS5oZWFkZXIuU2VuZGVyRW5kcG9pbnQ7XHJcbiAgICAgICAgICAgIHJldC5oZWFkZXIuU2VuZGVyRW5kcG9pbnQgPSBtLmhlYWRlci5SZWNlaXZlckVuZHBvaW50O1xyXG4gICAgICAgICAgICByZXQuaGVhZGVyLlNlbmRlck5vZGVJRCA9IHRoaXMuTm9kZUlEO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVudHJ5IGUgaW4gbS5lbnRyaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRW50cnkgZXJldCA9IHJldC5BZGRFbnRyeShlLkVudHJ5VHlwZSsxLGUuTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBlcmV0LlJlcXVlc3RJRCA9IGUuUmVxdWVzdElEO1xyXG4gICAgICAgICAgICAgICAgZXJldC5TZXJ2aWNlUGF0aCA9IGUuU2VydmljZVBhdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLkVudHJ5VHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuR2V0Tm9kZUluZm86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVudHJ5VHlwZS5PYmplY3RUeXBlTmFtZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHBhdGggPSAoc3RyaW5nKWUuU2VydmljZVBhdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdbXSBzMSA9IHBhdGguU3BsaXQobmV3IGNoYXJbXSB7ICcuJyB9LCAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlcnZlckNvbnRleHQgcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IEdldFNlcnZpY2UoczFbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBvYmp0eXBlID0gYXdhaXQgcy5HZXRPYmplY3RUeXBlKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcIm9iamVjdHR5cGVcIiwgb2JqdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcImVycm9ybmFtZVwiLCBcIlJvYm90UmFjb250ZXVyLk9iamVjdE5vdEZvdW5kRXhjZXB0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcImVycm9yc3RyaW5nXCIsIFwiT2JqZWN0IG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkVycm9yID0gTWVzc2FnZUVycm9yVHlwZS5PYmplY3ROb3RGb3VuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuR2V0U2VydmljZURlc2M6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc3RyaW5nIG5hbWUgPSAoc3RyaW5nKWUuRmluZEVsZW1lbnQoXCJzZXJ2aWNlbmFtZVwiKS5EYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSBlLlNlcnZpY2VQYXRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHNlcnZpY2VkZWY9XCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8TWVzc2FnZUVsZW1lbnQ+KGUuZWxlbWVudHMsKEZ1bmM8TWVzc2FnZUVsZW1lbnQsYm9vbD4pKHggPT54LkVsZW1lbnROYW1lID09IFwiU2VydmljZVR5cGVcIikpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGUuRmluZEVsZW1lbnQoXCJTZXJ2aWNlVHlwZVwiKS5DYXN0RGF0YTxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VkZWY9R2V0U2VydmljZVR5cGUobmFtZSkuRGVmU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PE1lc3NhZ2VFbGVtZW50PihlLmVsZW1lbnRzLChGdW5jPE1lc3NhZ2VFbGVtZW50LGJvb2w+KSh4ID0+IHguRWxlbWVudE5hbWUgPT0gXCJzZXJ2aWNldHlwZVwiKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gZS5GaW5kRWxlbWVudChcInNlcnZpY2V0eXBlXCIpLkNhc3REYXRhPHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZWRlZiA9IEdldFNlcnZpY2VUeXBlKG5hbWUpLkRlZlN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlZGVmPSBHZXRTZXJ2aWNlKG5hbWUpLlNlcnZpY2VEZWYuRGVmU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcImF0dHJpYnV0ZXNcIiwgUGFja01hcFR5cGU8c3RyaW5nLG9iamVjdD4oR2V0U2VydmljZShuYW1lKS5BdHRyaWJ1dGVzLCBudWxsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcInNlcnZpY2VkZWZcIiwgc2VydmljZWRlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcImVycm9ybmFtZVwiLCBcIlJvYm90UmFjb250ZXVyLlNlcnZpY2VOb3RGb3VuZEV4Y2VwdGlvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkFkZEVsZW1lbnQoXCJlcnJvcnN0cmluZ1wiLCBcIlNlcnZpY2Ugbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuRXJyb3IgPSBNZXNzYWdlRXJyb3JUeXBlLlNlcnZpY2VOb3RGb3VuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuQ29ubmVjdENsaWVudDpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSAoc3RyaW5nKWUuU2VydmljZVBhdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlcnZlckNvbnRleHQgYyA9IEdldFNlcnZpY2UobmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VydmVyRW5kcG9pbnQgc2UgPSBuZXcgU2VydmVyRW5kcG9pbnQoYyx0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZS5tX1JlbW90ZUVuZHBvaW50ID0gbS5oZWFkZXIuU2VuZGVyRW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2UubV9SZW1vdGVOb2RlSUQgPSBtLmhlYWRlci5TZW5kZXJOb2RlSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVnaXN0ZXJFbmRwb2ludChzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlLnRyYW5zcG9ydCA9IHRyYW5zcG9ydGlkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLkFkZENsaWVudChzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5oZWFkZXIuU2VuZGVyRW5kcG9pbnQgPSBzZS5Mb2NhbEVuZHBvaW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VydmljZXNbbmFtZV0uQWRkQ2xpZW50KG0uaGVhZGVyLlNlbmRlckVuZHBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VyZXQuQWRkRWxlbWVudChcInNlcnZpY2VkZWZcIiwgc2VydmljZWRlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcImVycm9ybmFtZVwiLCBcIlJvYm90UmFjb250ZXVyLlNlcnZpY2VOb3RGb3VuZEV4Y2VwdGlvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkFkZEVsZW1lbnQoXCJlcnJvcnN0cmluZ1wiLCBcIlNlcnZpY2Ugbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuRXJyb3IgPSBNZXNzYWdlRXJyb3JUeXBlLlNlcnZpY2VOb3RGb3VuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuRGlzY29ubmVjdENsaWVudDpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSBlLkZpbmRFbGVtZW50KFwic2VydmljZW5hbWVcIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlcnZlckVuZHBvaW50IHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKGVuZHBvaW50cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlID0gKFNlcnZlckVuZHBvaW50KWVuZHBvaW50c1ttLmhlYWRlci5SZWNlaXZlckVuZHBvaW50XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKHNlcnZpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2V0U2VydmljZShuYW1lKS5SZW1vdmVDbGllbnQoc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWxldGVFbmRwb2ludChzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9lcmV0LkFkZEVsZW1lbnQoXCJzZXJ2aWNlZGVmXCIsIHNlcnZpY2VkZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkFkZEVsZW1lbnQoXCJlcnJvcm5hbWVcIiwgXCJSb2JvdFJhY29udGV1ci5TZXJ2aWNlTm90Rm91bmRFeGNlcHRpb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJldC5BZGRFbGVtZW50KFwiZXJyb3JzdHJpbmdcIiwgXCJTZXJ2aWNlIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkVycm9yID0gTWVzc2FnZUVycm9yVHlwZS5TZXJ2aWNlTm90Rm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRW50cnlUeXBlLkNvbm5lY3Rpb25UZXN0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRW50cnlUeXBlLk5vZGVDaGVja0NhcGFiaWxpdHk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyZXQuQWRkRWxlbWVudChcInJldHVyblwiLCAodWludCkwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRW50cnlUeXBlLkdldFNlcnZpY2VBdHRyaWJ1dGVzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgcGF0aCA9IChzdHJpbmcpZS5TZXJ2aWNlUGF0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ1tdIHMxID0gcGF0aC5TcGxpdChuZXcgY2hhcltdIHsgJy4nIH0sIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VydmVyQ29udGV4dCBzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gR2V0U2VydmljZShzMVswXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8c3RyaW5nLG9iamVjdD4gYXR0ciA9IHMuQXR0cmlidXRlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgUGFja01hcFR5cGU8c3RyaW5nLG9iamVjdD4oYXR0ciwgbnVsbCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkFkZEVsZW1lbnQoXCJlcnJvcm5hbWVcIiwgXCJSb2JvdFJhY29udGV1ci5TZXJ2aWNlRXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJldC5BZGRFbGVtZW50KFwiZXJyb3JzdHJpbmdcIiwgXCJTZXJ2aWNlIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkVycm9yID0gTWVzc2FnZUVycm9yVHlwZS5TZXJ2aWNlRXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkVycm9yID0gTWVzc2FnZUVycm9yVHlwZS5Qcm90b2NvbEVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkFkZEVsZW1lbnQoXCJlcnJvcm5hbWVcIiwgXCJSb2JvdFJhY29udGV1ci5Qcm90b2NvbEVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcmV0LkFkZEVsZW1lbnQoXCJlcnJvcnN0cmluZ1wiLCBcIkludmFsaWQgU3BlY2lhbCBPcGVyYXRpb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxvYmplY3Q+IENvbm5lY3RTZXJ2aWNlKHN0cmluZyB1cmwsIHN0cmluZyB1c2VybmFtZSA9IG51bGwsIG9iamVjdCBjcmVkZW50aWFscyA9IG51bGwsIENsaWVudENvbnRleHQuQ2xpZW50U2VydmljZUxpc3RlbmVyRGVsZWdhdGUgbGlzdGVuZXIgPSBudWxsLCBzdHJpbmcgb2JqZWN0dHlwZSA9IG51bGwsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIC8vVE9ETzogU3BlY2lmeSB0YXJnZXQgb2JqZWN0IHR5cGVcclxuXHJcbiAgICAgICAgICAgIENsaWVudENvbnRleHQgYyA9IG5ldyBDbGllbnRDb250ZXh0KHRoaXMpO1xyXG4gICAgICAgICAgICBSZWdpc3RlckVuZHBvaW50KGMpO1xyXG4gICAgICAgICAgICBUcmFuc3BvcnRbXSBhdHJhbnNwb3J0cztcclxuICAgICAgICAgICAgbG9jayAodHJhbnNwb3J0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXRyYW5zcG9ydHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8VHJhbnNwb3J0Pih0cmFuc3BvcnRzLlZhbHVlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yZWFjaCAoVHJhbnNwb3J0IGVuZCBpbiBhdHJhbnNwb3J0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuZCA9PSBudWxsKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChlbmQuSXNDbGllbnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZC5DYW5Db25uZWN0U2VydmljZSh1cmwpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCByID0gYXdhaXQgYy5Db25uZWN0U2VydmljZShlbmQsIHVybCx1c2VybmFtZSxjcmVkZW50aWFscyxvYmplY3R0eXBlLGNhbmNlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIhPW51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGMuQ2xpZW50U2VydmljZUxpc3RlbmVyICs9IGxpc3RlbmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERlbGV0ZUVuZHBvaW50KGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfTtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJDb3VsZCBub3QgY29ubmVjdCB0byBzZXJ2aWNlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgRGlzY29ubmVjdFNlcnZpY2Uob2JqZWN0IG9iaiwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsPWRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2VydmljZVN0dWIgc3R1YiA9IChTZXJ2aWNlU3R1YilvYmo7XHJcbiAgICAgICAgICAgIGF3YWl0IHN0dWIuUlJDb250ZXh0LkNsb3NlKGNhbmNlbCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIERpY3Rpb25hcnk8c3RyaW5nLCBvYmplY3Q+IEdldFNlcnZpY2VBdHRyaWJ1dGVzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTZXJ2aWNlU3R1YiBzdHViID0gKFNlcnZpY2VTdHViKW9iajtcclxuICAgICAgICAgICAgcmV0dXJuIHN0dWIuUlJDb250ZXh0LkF0dHJpYnV0ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdWludCBSZWdpc3RlckVuZHBvaW50KEVuZHBvaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChlbmRwb2ludHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFJhbmRvbSByID0gbmV3IFJhbmRvbSgpO1xyXG4gICAgICAgICAgICAgICAgdWludCBsb2NhbF9lbmRwb2ludDtcclxuICAgICAgICAgICAgICAgIGRvXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZVtdIGIgPSBuZXcgYnl0ZVs0XTtcclxuICAgICAgICAgICAgICAgICAgICByLk5leHRCeXRlcyhiKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbF9lbmRwb2ludCA9IEJpdENvbnZlcnRlci5Ub1VJbnQzMihiLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKGVuZHBvaW50cy5Db250YWluc0tleShsb2NhbF9lbmRwb2ludCkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBlLm1fTG9jYWxFbmRwb2ludCA9IGxvY2FsX2VuZHBvaW50O1xyXG4gICAgICAgICAgICAgICAgZW5kcG9pbnRzLkFkZChsb2NhbF9lbmRwb2ludCwgZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxfZW5kcG9pbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERlbGV0ZUVuZHBvaW50KEVuZHBvaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHJhbnNwb3J0IGM7XHJcbiAgICAgICAgICAgICAgICBsb2NrICh0cmFuc3BvcnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGM9dHJhbnNwb3J0c1tlLnRyYW5zcG9ydF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjLkNsb3NlVHJhbnNwb3J0Q29ubmVjdGlvbihlLGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7fVxyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKGVuZHBvaW50cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRwb2ludHMuUmVtb3ZlKGUuTG9jYWxFbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDaGVja0Nvbm5lY3Rpb24odWludCBlbmRwb2ludClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFbmRwb2ludCBlO1xyXG4gICAgICAgICAgICAgICAgbG9jayAoZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGVuZHBvaW50c1tlbmRwb2ludF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChLZXlOb3RGb3VuZEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkRW5kcG9pbnRFeGNlcHRpb24oXCJJbnZhbGlkIGVuZHBvaW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBUcmFuc3BvcnQgYztcclxuICAgICAgICAgICAgICAgIGxvY2sgKHRyYW5zcG9ydHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gdHJhbnNwb3J0c1tlLnRyYW5zcG9ydF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChLZXlOb3RGb3VuZEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiVHJhbnNwb3J0IG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjLkNoZWNrQ29ubmVjdGlvbihlbmRwb2ludCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEtleU5vdEZvdW5kRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIlRyYW5zcG9ydCBub3QgY29ubmVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSBzaHV0ZG93bl90b2tlbiA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaHV0ZG93bigpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgc2h1dGRvd25fdG9rZW4uQ2FuY2VsKCk7XHJcblxyXG4gICAgICAgICAgICBUcmFuc3BvcnRbXSBjYztcclxuICAgICAgICAgICAgbG9jayAodHJhbnNwb3J0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8VHJhbnNwb3J0Pih0cmFuc3BvcnRzLlZhbHVlcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKFRyYW5zcG9ydCBjIGluIGNjKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgIGMuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2VydmVyQ29udGV4dFtdIHNjO1xyXG4gICAgICAgICAgICBsb2NrIChzZXJ2aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8U2VydmVyQ29udGV4dD4oc2VydmljZXMuVmFsdWVzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoU2VydmVyQ29udGV4dCBjIGluIHNjKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxvY2sgKGVuZHBvaW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAvL1JvYm90UmFjb250ZXVyTm9kZS5zcCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIHByaXZhdGUgRGljdGlvbmFyeTxzdHJpbmcsIE5vZGVEaXNjb3ZlcnlJbmZvPiBtX0Rpc2NvdmVyZWROb2RlcyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgTm9kZURpc2NvdmVyeUluZm8+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PHN0cmluZywgTm9kZURpc2NvdmVyeUluZm8+IERpc2NvdmVyZWROb2RlcyB7IGdldCB7IHJldHVybiBtX0Rpc2NvdmVyZWROb2RlczsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE5vZGVBbm5vdW5jZVBhY2tldFJlY2VpdmVkKHN0cmluZyBwYWNrZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nIHNlZWQgPSBcIlJvYm90IFJhY29udGV1ciBOb2RlIERpc2NvdmVyeSBQYWNrZXRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChwYWNrZXQuU3Vic3RyaW5nKDAsIHNlZWQuTGVuZ3RoKSA9PSBzZWVkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKG1fRGlzY292ZXJlZE5vZGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmdbXSBsaW5lcyA9IHBhY2tldC5TcGxpdChuZXcgY2hhcltdIHsgJ1xcbicgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nW10gaWRsaW5lID0gbGluZXNbMV0uU3BsaXQobmV3IGNoYXJbXSB7ICcsJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgTm9kZUlEIG5vZGVpZCA9IG5ldyBOb2RlSUQoaWRsaW5lWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgbm9kZW5hbWUgPSBpZGxpbmVbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHVybCA9IGxpbmVzWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaWYgKCFJUEFkZHJlc3MuUGFyc2UocGFja2V0LlNwbGl0KG5ldyBjaGFyW10geydcXG4nfSlbMV0pLkdldEFkZHJlc3NCeXRlcygpLlNlcXVlbmNlRXF1YWwoUm9ib3RSYWNvbnRldXJOb2RlLnMuTm9kZUlEKSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPHN0cmluZz4obV9EaXNjb3ZlcmVkTm9kZXMuS2V5cyxub2RlaWQuVG9TdHJpbmcoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vZGVEaXNjb3ZlcnlJbmZvIGkgPSBtX0Rpc2NvdmVyZWROb2Rlc1tub2RlaWQuVG9TdHJpbmcoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLk5vZGVOYW1lID0gbm9kZW5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PE5vZGVEaXNjb3ZlcnlJbmZvVVJMPihpLlVSTHMsKEZ1bmM8Tm9kZURpc2NvdmVyeUluZm9VUkwsYm9vbD4pKHggPT4geC5VUkwgPT0gdXJsKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm9kZURpc2NvdmVyeUluZm9VUkwgdSA9IG5ldyBOb2RlRGlzY292ZXJ5SW5mb1VSTCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuVVJMID0gdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuTGFzdEFubm91bmNlVGltZSA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLlVSTHMuQWRkKHUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxOb2RlRGlzY292ZXJ5SW5mb1VSTD4oICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLlVSTHMsKEZ1bmM8Tm9kZURpc2NvdmVyeUluZm9VUkwsYm9vbD4pKHggPT4geC5VUkwgPT0gdXJsKSkuTGFzdEFubm91bmNlVGltZSA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vZGVEaXNjb3ZlcnlJbmZvIGkgPSBuZXcgTm9kZURpc2NvdmVyeUluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuTm9kZUlEID0gbm9kZWlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5Ob2RlTmFtZSA9IG5vZGVuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTm9kZURpc2NvdmVyeUluZm9VUkwgdSA9IG5ldyBOb2RlRGlzY292ZXJ5SW5mb1VSTCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5VUkwgPSB1cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Lkxhc3RBbm5vdW5jZVRpbWUgPSBEYXRlVGltZS5VdGNOb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLlVSTHMuQWRkKHUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbV9EaXNjb3ZlcmVkTm9kZXMuQWRkKG5vZGVpZC5Ub1N0cmluZygpLGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL1JvYm90UmFjb250ZXVyTm9kZS5zLk5vZGVBbm5vdW5jZVBhY2tldFJlY2VpdmVkKHBhY2tldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfTtcclxuXHJcbiAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUocGFja2V0KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgTm9kZURldGVjdGVkKE5vZGVEaXNjb3ZlcnlJbmZvIG4pXHJcbiAgICAgICAgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAobV9EaXNjb3ZlcmVkTm9kZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8c3RyaW5nPihtX0Rpc2NvdmVyZWROb2Rlcy5LZXlzLG4uTm9kZUlELlRvU3RyaW5nKCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTm9kZURpc2NvdmVyeUluZm8gaSA9IG1fRGlzY292ZXJlZE5vZGVzW24uTm9kZUlELlRvU3RyaW5nKCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpLk5vZGVOYW1lID0gbi5Ob2RlTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHVybCBpbiBuLlVSTHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Tm9kZURpc2NvdmVyeUluZm9VUkw+KGkuVVJMcywoRnVuYzxOb2RlRGlzY292ZXJ5SW5mb1VSTCxib29sPikoeCA9PiB4LlVSTCA9PSB1cmwuVVJMKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm9kZURpc2NvdmVyeUluZm9VUkwgdSA9IG5ldyBOb2RlRGlzY292ZXJ5SW5mb1VSTCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuVVJMID0gdXJsLlVSTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Lkxhc3RBbm5vdW5jZVRpbWUgPSBEYXRlVGltZS5VdGNOb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5VUkxzLkFkZCh1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcblN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Tm9kZURpc2NvdmVyeUluZm9VUkw+KCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5VUkxzLChGdW5jPE5vZGVEaXNjb3ZlcnlJbmZvVVJMLGJvb2w+KSh4ID0+IHguVVJMID09IHVybC5VUkwpKS5MYXN0QW5ub3VuY2VUaW1lID0gRGF0ZVRpbWUuVXRjTm93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB1IGluIG4uVVJMcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5MYXN0QW5ub3VuY2VUaW1lID0gRGF0ZVRpbWUuVXRjTm93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1fRGlzY292ZXJlZE5vZGVzLkFkZChuLk5vZGVJRC5Ub1N0cmluZygpLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbikgeyB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBUYXNrIGNsZWFuZGlzY292ZXJlZG5vZGVzX3Rhc2s7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIENsZWFuRGlzY292ZXJlZE5vZGVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChtX0Rpc2NvdmVyZWROb2RlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBEYXRlVGltZSBub3cgPSBEYXRlVGltZS5VdGNOb3c7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1tdIGtleXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8c3RyaW5nPihtX0Rpc2NvdmVyZWROb2Rlcy5LZXlzKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcga2V5IGluIGtleXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMaXN0PE5vZGVEaXNjb3ZlcnlJbmZvVVJMPiBuZXd1cmxzID0gbmV3IExpc3Q8Tm9kZURpc2NvdmVyeUluZm9VUkw+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE5vZGVEaXNjb3ZlcnlJbmZvVVJMW10gdXJscyA9IG1fRGlzY292ZXJlZE5vZGVzW2tleV0uVVJMcy5Ub0FycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKE5vZGVEaXNjb3ZlcnlJbmZvVVJMIHUgaW4gdXJscylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSB0aW1lID0gKG5vdyAtIHUuTGFzdEFubm91bmNlVGltZSkuVG90YWxNaWxsaXNlY29uZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZSA8IDYwMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld3VybHMuQWRkKHUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtX0Rpc2NvdmVyZWROb2Rlc1trZXldLlVSTHMgPSBuZXd1cmxzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld3VybHMuQ291bnQgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbV9EaXNjb3ZlcmVkTm9kZXMuUmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbikgeyB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjbGFzcyBTZXJ2aWNlSW5kZXhlciA6IFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4LlNlcnZpY2VJbmRleFxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHByb3RlY3RlZCByZWFkb25seSAgUm9ib3RSYWNvbnRldXJOb2RlIG5vZGU7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgU2VydmljZUluZGV4ZXIoUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBUYXNrPERpY3Rpb25hcnk8aW50LCBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5TZXJ2aWNlSW5mbz4+IEdldExvY2FsTm9kZVNlcnZpY2VzKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbD1kZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFRyYW5zcG9ydC5DdXJyZW50VGhyZWFkVHJhbnNwb3J0Q29ubmVjdGlvblVSTCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKFwiR2V0TG9jYWxOb2RlU2VydmljZXMgbXVzdCBiZSBjYWxsZWQgdGhyb3VnaCBhIHRyYW5zcG9ydCB0aGF0IHN1cHBvcnRzIG5vZGUgZGlzY292ZXJ5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8aW50LCBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5TZXJ2aWNlSW5mbz4gbyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguU2VydmljZUluZm8+KCk7XHJcbiAgICAgICAgICAgICAgICBpbnQgY291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIFNlcnZlckNvbnRleHRbXSBzYztcclxuICAgICAgICAgICAgICAgIGxvY2sgKG5vZGUuc2VydmljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8U2VydmVyQ29udGV4dD4obm9kZS5zZXJ2aWNlcy5WYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKFNlcnZlckNvbnRleHQgYyBpbiBzYylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5TZXJ2aWNlSW5mbyBzID0gbmV3IFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4LlNlcnZpY2VJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5BdHRyaWJ1dGVzID0gYy5BdHRyaWJ1dGVzO1xyXG4gICAgICAgICAgICAgICAgICAgIHMuTmFtZSA9IGMuU2VydmljZU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5Sb290T2JqZWN0VHlwZSA9IGMuUm9vdE9iamVjdFR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5Db25uZWN0aW9uVVJMID0gbmV3IERpY3Rpb25hcnk8aW50LCBzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5Db25uZWN0aW9uVVJMLkFkZCgxLFRyYW5zcG9ydC5DdXJyZW50VGhyZWFkVHJhbnNwb3J0Q29ubmVjdGlvblVSTCArIFwiP1wiICsgKFwibm9kZWlkPVwiICsgbm9kZS5Ob2RlSUQuVG9TdHJpbmcoKS5UcmltKG5ldyBjaGFyW10geyd7JywnfSd9KSArIFwiJnNlcnZpY2U9XCIgKyBSUlVyaUV4dGVuc2lvbnMuRXNjYXBlRGF0YVN0cmluZyhzLk5hbWUpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5Sb290T2JqZWN0SW1wbGVtZW50cyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgc3RyaW5nPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIExpc3Q8c3RyaW5nPiBpbXBsZW1lbnRzPWMuU2VydmljZURlZi5TZXJ2aWNlRGVmKCkuT2JqZWN0c1tTZXJ2aWNlRGVmaW5pdGlvblV0aWwuU3BsaXRRdWFsaWZpZWROYW1lKGMuUm9vdE9iamVjdFR5cGUpLkl0ZW0yXS5JbXBsZW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW1wbGVtZW50cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcy5Sb290T2JqZWN0SW1wbGVtZW50cy5BZGQoaSwgaW1wbGVtZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBvLkFkZChjb3VudCwgcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PERpY3Rpb25hcnk8aW50LFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4LlNlcnZpY2VJbmZvPj4obyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBUYXNrPERpY3Rpb25hcnk8aW50LCBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5Ob2RlSW5mbz4+IEdldFJvdXRlZE5vZGVzKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICBEaWN0aW9uYXJ5PGludCwgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguTm9kZUluZm8+IHJldCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguTm9kZUluZm8+KCk7XHJcblxyXG4gICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8RGljdGlvbmFyeTxpbnQsUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguTm9kZUluZm8+PihyZXQpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIFRhc2s8RGljdGlvbmFyeTxpbnQsIFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4Lk5vZGVJbmZvPj4gR2V0RGV0ZWN0ZWROb2RlcyhDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAobm9kZS5tX0Rpc2NvdmVyZWROb2RlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmluZ1tdIG5vZGVpZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8c3RyaW5nPihub2RlLm1fRGlzY292ZXJlZE5vZGVzLktleXMpO1xyXG4gICAgICAgICAgICAgICAgaW50IGxlbiA9IG5vZGVpZHMuTGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8aW50LCBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5Ob2RlSW5mbz4gcmV0ID0gbmV3IERpY3Rpb25hcnk8aW50LCBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5Ob2RlSW5mbz4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE5vZGVEaXNjb3ZlcnlJbmZvIGluZm8gPSBub2RlLm1fRGlzY292ZXJlZE5vZGVzW25vZGVpZHNbaV1dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5Ob2RlSW5mbyBpaSA9IG5ldyBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5Ob2RlSW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlpLk5vZGVJRCA9IGluZm8uTm9kZUlELlRvQnl0ZUFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWkuTm9kZU5hbWUgPSBpbmZvLk5vZGVOYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBEaWN0aW9uYXJ5PGludCxzdHJpbmc+IGN1cmw9bmV3IERpY3Rpb25hcnk8aW50LHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGluZm8uVVJMcy5Db3VudDsgaisrIClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cmwuQWRkKGosIGluZm8uVVJMc1tqXS5VUkwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWkuU2VydmljZUluZGV4Q29ubmVjdGlvblVSTD1jdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldC5BZGQoaSwgaWkpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8RGljdGlvbmFyeTxpbnQsUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguTm9kZUluZm8+PihyZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbiBMb2NhbE5vZGVTZXJ2aWNlc0NoYW5nZWQ7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgU2VsZWN0UmVtb3RlTm9kZVVSTChzdHJpbmdbXSB1cmxzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHVybF9vcmRlciA9IG5ldyBzdHJpbmdbXSB7IFxyXG4gICAgICAgICAgICAgICAgXCJycitsb2NhbDovL1wiLFxyXG4gICAgICAgICAgICAgICAgXCJycitwY2k6Ly9cIixcclxuICAgICAgICAgICAgICAgIFwicnIrdXNiOi8vXCIsXHJcbiAgICAgICAgICAgICAgICBcInJyK3RjcDovLzEyNy4wLjAuMVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ0Y3A6Ly8xMjcuMC4wLjFcIixcclxuICAgICAgICAgICAgICAgIFwicnIrdGNwOi8vWzo6MV1cIixcclxuICAgICAgICAgICAgICAgIFwidGNwOi8vWzo6MV1cIixcclxuICAgICAgICAgICAgICAgIFwicnIrdGNwOi8vbG9jYWxob3N0XCIsXHJcbiAgICAgICAgICAgICAgICBcInRjcDovL2xvY2FsaG9zdFwiLFxyXG4gICAgICAgICAgICAgICAgXCJycnMrdGNwOi8vW2ZlODBcIixcclxuICAgICAgICAgICAgICAgIFwicnJzK3dzczovL1tmZTgwXCIsXHJcbiAgICAgICAgICAgICAgICBcInJycyt3czovL1tmZTgwXCIsXHJcbiAgICAgICAgICAgICAgICBcInJycyt0Y3A6Ly9cIiwgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcInJycyt3c3M6Ly9cIiwgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcInJycyt3czovL1wiLFxyXG4gICAgICAgICAgICAgICAgXCJycit0Y3A6Ly9bZmU4MFwiLFxyXG4gICAgICAgICAgICAgICAgXCJycit3c3M6Ly9bZmU4MFwiLFxyXG4gICAgICAgICAgICAgICAgXCJycit3czovL1tmZTgwXCIsXHJcbiAgICAgICAgICAgICAgICBcInJyK3RjcDovL1wiLCAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFwicnIrd3NzOi8vXCIsICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXCJycit3czovL1wiLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHUgaW4gdXJsX29yZGVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdTEgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PHN0cmluZz4odXJscywoRnVuYzxzdHJpbmcsYm9vbD4pKHggPT4geC5Ub0xvd2VyKCkuU3RhcnRzV2l0aCh1KSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHUxICE9IG51bGwpIHJldHVybiB1MTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8c3RyaW5nPih1cmxzKSA7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8b2JqZWN0PiBDb25uZWN0U2VydmljZShzdHJpbmdbXSB1cmxzLCBzdHJpbmcgdXNlcm5hbWUgPSBudWxsLCBvYmplY3QgY3JlZGVudGlhbHMgPSBudWxsLCBDbGllbnRDb250ZXh0LkNsaWVudFNlcnZpY2VMaXN0ZW5lckRlbGVnYXRlIGxpc3RlbmVyID0gbnVsbCwgc3RyaW5nIG9iamVjdHR5cGUgPSBudWxsLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8c3RyaW5nPiB1cmxzbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHN0cmluZz4odXJscyk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAodXJsc2wuQ291bnQgPiAwICYmICFjYW5jZWwuSXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmluZyB1cmwgPSBTZWxlY3RSZW1vdGVOb2RlVVJMKHVybHNsLlRvQXJyYXkoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IENvbm5lY3RTZXJ2aWNlKHVybCwgdXNlcm5hbWUsIGNyZWRlbnRpYWxzLCAoQ2xpZW50Q29udGV4dC5DbGllbnRTZXJ2aWNlTGlzdGVuZXJEZWxlZ2F0ZSlsaXN0ZW5lciwgb2JqZWN0dHlwZSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZSBpcyBSb2JvdFJhY29udGV1ckV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGUgaXMgQ29ubmVjdGlvbkV4Y2VwdGlvbiB8fCBlIGlzIFRpbWVvdXRFeGNlcHRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHVybHNsLlJlbW92ZUFsbCgoUHJlZGljYXRlPHN0cmluZz4pKHggPT4gKHggPT0gdXJsKSkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJDb3VsZCBub3QgY29ubmVjdCB0byBzZXJ2aWNlXCIpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBUYXNrIFVwZGF0ZURldGVjdGVkTm9kZXMoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRhc2tzID0gbmV3IExpc3Q8VGFzazxMaXN0PE5vZGVEaXNjb3ZlcnlJbmZvPj4+KCk7XHJcbiAgICAgICAgICAgIHZhciB0PW5ldyBMaXN0PFRyYW5zcG9ydD4oKTtcclxuICAgICAgICAgICAgbG9jayh0cmFuc3BvcnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdDIgaW4gdHJhbnNwb3J0cy5WYWx1ZXMpIHQuQWRkKHQyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQyIGluIHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXNrMSA9IHQyLkdldERldGVjdGVkTm9kZXMoY2FuY2VsKTtcclxuICAgICAgICAgICAgICAgIHRhc2tzLkFkZCh0YXNrMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IFRhc2suV2hlbkFsbDxMaXN0PE5vZGVEaXNjb3ZlcnlJbmZvPj4odGFza3MpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQyIGluIHRhc2tzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5mbz1hd2FpdCB0MjtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBpbmZvKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTm9kZURldGVjdGVkKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pIHsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBUYXNrPFR1cGxlPGJ5dGVbXSxzdHJpbmcsRGljdGlvbmFyeTxpbnQsIFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4LlNlcnZpY2VJbmZvPj4+IERvRmluZFNlcnZpY2VCeVR5cGUoc3RyaW5nW10gdXJscywgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguU2VydmljZUluZGV4IGluZCA9IChSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5TZXJ2aWNlSW5kZXgpYXdhaXQgdGhpcy5Db25uZWN0U2VydmljZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8c3RyaW5nPih1cmxzKSxjYW5jZWw6IGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHZhciBOb2RlSUQgPSAoKFNlcnZpY2VTdHViKWluZCkuUlJDb250ZXh0LlJlbW90ZU5vZGVJRC5Ub0J5dGVBcnJheSgpO1xyXG4gICAgICAgICAgICB2YXIgTm9kZU5hbWUgPSAoKFNlcnZpY2VTdHViKWluZCkuUlJDb250ZXh0LlJlbW90ZU5vZGVOYW1lO1xyXG4gICAgICAgICAgICB2YXIgaW5mID0gYXdhaXQgaW5kLkdldExvY2FsTm9kZVNlcnZpY2VzKGNhbmNlbCk7XHJcbiAgICAgICAgICAgIHJldHVybiBUdXBsZS5DcmVhdGU8Ynl0ZVtdLHN0cmluZyxEaWN0aW9uYXJ5PGludCxSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5TZXJ2aWNlSW5mbz4+KE5vZGVJRCwgTm9kZU5hbWUsIGluZik7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPFNlcnZpY2VJbmZvMltdPiBGaW5kU2VydmljZUJ5VHlwZShzdHJpbmcgc2VydmljZXR5cGUsIHN0cmluZ1tdIHRyYW5zcG9ydHNjaGVtZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2FuY2VsPW5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xyXG4gICAgICAgICAgICBjYW5jZWwuQ2FuY2VsQWZ0ZXIoNTAwMCk7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBGaW5kU2VydmljZUJ5VHlwZShzZXJ2aWNldHlwZSwgdHJhbnNwb3J0c2NoZW1lcywgY2FuY2VsLlRva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPFNlcnZpY2VJbmZvMltdPiBGaW5kU2VydmljZUJ5VHlwZShzdHJpbmcgc2VydmljZXR5cGUsIHN0cmluZ1tdIHRyYW5zcG9ydHNjaGVtZXMsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgVXBkYXRlRGV0ZWN0ZWROb2RlcyhjYW5jZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8U2VydmljZUluZm8yPiBzZXJ2aWNlcyA9IG5ldyBMaXN0PFNlcnZpY2VJbmZvMj4oKTtcclxuICAgICAgICAgICAgTGlzdDxzdHJpbmc+IG5vZGVpZHM7XHJcbiAgICAgICAgICAgIGxvY2sgKG1fRGlzY292ZXJlZE5vZGVzKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgIG5vZGVpZHM9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHN0cmluZz4oRGlzY292ZXJlZE5vZGVzLktleXMpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHRcdFx0dmFyIGluZm9fd2FpdCA9IG5ldyBMaXN0PFRhc2s8VHVwbGU8Ynl0ZVtdLHN0cmluZyxEaWN0aW9uYXJ5PGludCwgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguU2VydmljZUluZm8+Pj4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpPTA7IGk8bm9kZWlkcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTGlzdDxzdHJpbmc+IHVybHMgPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jayAobV9EaXNjb3ZlcmVkTm9kZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChOb2RlRGlzY292ZXJ5SW5mb1VSTCB1cmwgaW4gbV9EaXNjb3ZlcmVkTm9kZXNbbm9kZWlkc1tpXV0uVVJMcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHMgaW4gdHJhbnNwb3J0c2NoZW1lcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXJsLlVSTC5TdGFydHNXaXRoKHMgKyBcIjovL1wiKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHMuQWRkKHVybC5VUkwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cdFx0XHRcdFx0aWYgKHVybHMuQ291bnQgPiAwKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRpbmZvX3dhaXQuQWRkKERvRmluZFNlcnZpY2VCeVR5cGUodXJscy5Ub0FycmF5KCksIGNhbmNlbCkpO1xyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKG1fRGlzY292ZXJlZE5vZGVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtX0Rpc2NvdmVyZWROb2Rlcy5SZW1vdmUobm9kZWlkc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cdFx0XHRpZiAoaW5mb193YWl0LkNvdW50ID09IDApIFxyXG5cdFx0XHR7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNlcnZpY2VJbmZvMlswXTtcclxuXHRcdFx0fVxyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRhc2sgd2FpdHRhc2sgPSBUYXNrLldoZW5BbGw8VHVwbGU8Ynl0ZVtdLHN0cmluZyxEaWN0aW9uYXJ5PGludCxSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5TZXJ2aWNlSW5mbz4+PihpbmZvX3dhaXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHdhaXR0YXNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pIHsgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaT0wOyBpPG5vZGVpZHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWluZm9fd2FpdFtpXS5Jc0NvbXBsZXRlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUaW1lb3V0RXhjZXB0aW9uKFwiVGltZW91dFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmYgPSBhd2FpdCBpbmZvX3dhaXRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4Lk5vZGVJbmZvIG4gPSBuZXcgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguTm9kZUluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICBuLk5vZGVJRCA9IGluZi5JdGVtMTtcclxuICAgICAgICAgICAgICAgICAgICBuLk5vZGVOYW1lID0gaW5mLkl0ZW0yO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguU2VydmljZUluZm8gaWkgaW4gaW5mLkl0ZW0zLlZhbHVlcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpaS5Sb290T2JqZWN0VHlwZSA9PSBzZXJ2aWNldHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXMuQWRkKG5ldyBTZXJ2aWNlSW5mbzIoaWksIG4pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyBpbXBsIGluIGlpLlJvb3RPYmplY3RJbXBsZW1lbnRzLlZhbHVlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1wbCA9PSBzZXJ2aWNldHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXMuQWRkKG5ldyBTZXJ2aWNlSW5mbzIoaWksIG4pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2F0Y2hcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKG1fRGlzY292ZXJlZE5vZGVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtX0Rpc2NvdmVyZWROb2Rlcy5SZW1vdmUobm9kZWlkc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy5Ub0FycmF5KCkgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8Tm9kZUluZm8yW10+IEZpbmROb2RlQnlJRChOb2RlSUQgaWQsIHN0cmluZ1tdIHNjaGVtZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2FuY2VsID0gbmV3IENhbmNlbGxhdGlvblRva2VuU291cmNlKCk7XHJcbiAgICAgICAgICAgIGNhbmNlbC5DYW5jZWxBZnRlcig1MDAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IEZpbmROb2RlQnlJRChpZCwgc2NoZW1lcywgY2FuY2VsLlRva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPE5vZGVJbmZvMltdPiBGaW5kTm9kZUJ5SUQoTm9kZUlEIGlkLCBzdHJpbmdbXSBzY2hlbWVzLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgVXBkYXRlRGV0ZWN0ZWROb2RlcyhjYW5jZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvID0gbmV3IExpc3Q8Tm9kZUluZm8yPigpO1xyXG5cclxuICAgICAgICAgICAgbG9jayAobV9EaXNjb3ZlcmVkTm9kZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmluZyBub2RlaWRfc3RyPWlkLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobV9EaXNjb3ZlcmVkTm9kZXMuQ29udGFpbnNLZXkobm9kZWlkX3N0cikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5pPW1fRGlzY292ZXJlZE5vZGVzW25vZGVpZF9zdHJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuPW5ldyBOb2RlSW5mbzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBuLk5vZGVJRD1uZXcgTm9kZUlEKG5vZGVpZF9zdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG4uTm9kZU5hbWUgPSBuaS5Ob2RlTmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGM9bmV3IExpc3Q8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdXJsIGluIG5pLlVSTHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IFRyYW5zcG9ydFV0aWwuUGFyc2VDb25uZWN0aW9uVXJsKHVybC5VUkwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8c3RyaW5nPihzY2hlbWVzLChGdW5jPHN0cmluZyxib29sPikoeD0+IHg9PXUuc2NoZW1lKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBzaG9ydF91cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodS5wb3J0ID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0X3VybCA9IHUuc2NoZW1lICsgXCIvL1wiICsgdS5ob3N0ICsgdS5wYXRoICsgXCI/bm9kZWlkPVwiICsgbm9kZWlkX3N0ci5UcmltKG5ldyBjaGFyW10geyAneycsICd9JyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydF91cmwgPSB1LnNjaGVtZSArIFwiLy9cIiArIHUuaG9zdCArIFwiOlwiICsgdS5wb3J0ICsgdS5wYXRoICsgXCI/bm9kZWlkPVwiICsgbm9kZWlkX3N0ci5UcmltKG5ldyBjaGFyW10geyAneycsICd9JyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLkFkZChzaG9ydF91cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMuQ291bnQgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uQ29ubmVjdGlvblVSTCA9IGMuVG9BcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvLkFkZChuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPE5vZGVJbmZvMltdPiBGaW5kTm9kZUJ5TmFtZShzdHJpbmcgbmFtZSwgc3RyaW5nW10gc2NoZW1lcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjYW5jZWwgPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKTtcclxuICAgICAgICAgICAgY2FuY2VsLkNhbmNlbEFmdGVyKDUwMDApO1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgRmluZE5vZGVCeU5hbWUobmFtZSwgc2NoZW1lcywgY2FuY2VsLlRva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPE5vZGVJbmZvMltdPiBGaW5kTm9kZUJ5TmFtZShzdHJpbmcgbmFtZSwgc3RyaW5nW10gc2NoZW1lcywgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IFVwZGF0ZURldGVjdGVkTm9kZXMoY2FuY2VsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7IH07XHJcblxyXG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBMaXN0PE5vZGVJbmZvMj4oKTtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKG1fRGlzY292ZXJlZE5vZGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBtX0Rpc2NvdmVyZWROb2RlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WYWx1ZS5Ob2RlTmFtZSA9PSBuYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBuZXcgTm9kZUluZm8yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlaWRfc3RyID0gZS5WYWx1ZS5Ob2RlSUQuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbi5Ob2RlSUQgPSBuZXcgTm9kZUlEKG5vZGVpZF9zdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuLk5vZGVOYW1lID0gZS5WYWx1ZS5Ob2RlTmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHVybCBpbiBlLlZhbHVlLlVSTHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gVHJhbnNwb3J0VXRpbC5QYXJzZUNvbm5lY3Rpb25VcmwodXJsLlVSTCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8c3RyaW5nPihzY2hlbWVzLChGdW5jPHN0cmluZyxib29sPikoeCA9PiB4ID09IHUuc2NoZW1lKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHNob3J0X3VybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodS5wb3J0ID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRfdXJsID0gdS5zY2hlbWUgKyBcIi8vXCIgKyB1Lmhvc3QgKyB1LnBhdGggKyBcIj9ub2RlaWQ9XCIgKyBub2RlaWRfc3RyLlRyaW0obmV3IGNoYXJbXSB7ICd7JywgJ30nIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydF91cmwgPSB1LnNjaGVtZSArIFwiLy9cIiArIHUuaG9zdCArIFwiOlwiICsgdS5wb3J0ICsgdS5wYXRoICsgXCI/bm9kZWlkPVwiICsgbm9kZWlkX3N0ci5UcmltKG5ldyBjaGFyW10geyAneycsICd9JyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuQWRkKHNob3J0X3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5Db3VudCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLkNvbm5lY3Rpb25VUkwgPSBjLlRvQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uQWRkKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gby5Ub0FycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxzdHJpbmc+IFJlcXVlc3RPYmplY3RMb2NrKG9iamVjdCBvYmosIFJvYm90UmFjb250ZXVyT2JqZWN0TG9ja0ZsYWdzIGZsYWdzLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghKG9iaiBpcyBTZXJ2aWNlU3R1YikpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiQ2FuIG9ubHkgbG9jayBvYmplY3Qgb3BlbmVkIHRocm91Z2ggUm9ib3QgUmFjb250ZXVyXCIpO1xyXG4gICAgICAgICAgICBTZXJ2aWNlU3R1YiBzID0gKFNlcnZpY2VTdHViKW9iajtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzLlJSQ29udGV4dC5SZXF1ZXN0T2JqZWN0TG9jayhvYmosZmxhZ3MsIGNhbmNlbCk7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxzdHJpbmc+IFJlbGVhc2VPYmplY3RMb2NrKG9iamVjdCBvYmosIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCEob2JqIGlzIFNlcnZpY2VTdHViKSkgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJDYW4gb25seSB1bmxvY2sgb2JqZWN0IG9wZW5lZCB0aHJvdWdoIFJvYm90IFJhY29udGV1clwiKTtcclxuICAgICAgICAgICAgU2VydmljZVN0dWIgcyA9IChTZXJ2aWNlU3R1YilvYmo7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcy5SUkNvbnRleHQuUmVsZWFzZU9iamVjdExvY2sob2JqLCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIE1vbml0b3JMb2NrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnRlcm5hbCBJRGlzcG9zYWJsZSBsb2NrXztcclxuICAgICAgICAgICAgaW50ZXJuYWwgU2VydmljZVN0dWIgc3R1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPE1vbml0b3JMb2NrPiBNb25pdG9yRW50ZXIob2JqZWN0IG9iaiwgaW50IHRpbWVvdXQgPSAtMSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgU2VydmljZVN0dWIpKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk9ubHkgc2VydmljZSBzdHVicyBjYW4gYmUgbW9uaXRvcmVkIGJ5IFJvYm90UmFjb250ZXVyTm9kZVwiKTtcclxuICAgICAgICAgICAgU2VydmljZVN0dWIgcyA9IChTZXJ2aWNlU3R1YilvYmo7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcy5SUkNvbnRleHQuTW9uaXRvckVudGVyKG9iaix0aW1lb3V0LCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgTW9uaXRvckV4aXQoUm9ib3RSYWNvbnRldXJOb2RlLk1vbml0b3JMb2NrIGxvY2tfLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBsb2NrXy5zdHViLlJSQ29udGV4dC5Nb25pdG9yRXhpdChsb2NrXywgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPG9iamVjdD4gRmluZE9ialJlZlR5cGVkKG9iamVjdCBvYmosIHN0cmluZyBvYmpyZWYsIHN0cmluZyBvYmplY3R0eXBlLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgU2VydmljZVN0dWIpKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk9ubHkgc2VydmljZSBzdHVicyBjYW4gaGF2ZSBvYmpyZWZzXCIpO1xyXG4gICAgICAgICAgICBTZXJ2aWNlU3R1YiBzID0gKFNlcnZpY2VTdHViKW9iajtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzLkZpbmRPYmpSZWZUeXBlZChvYmpyZWYsIG9iamVjdHR5cGUsIGNhbmNlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxvYmplY3Q+IEZpbmRPYmpSZWZUeXBlZChvYmplY3Qgb2JqLCBzdHJpbmcgb2JqcmVmLCBzdHJpbmcgaW5kZXgsIHN0cmluZyBvYmplY3R0eXBlLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgU2VydmljZVN0dWIpKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk9ubHkgc2VydmljZSBzdHVicyBjYW4gaGF2ZSBvYmpyZWZzXCIpO1xyXG4gICAgICAgICAgICBTZXJ2aWNlU3R1YiBzID0gKFNlcnZpY2VTdHViKW9iajtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzLkZpbmRPYmpSZWZUeXBlZChvYmpyZWYsIGluZGV4LCBvYmplY3R0eXBlLCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIERhdGVUaW1lIFV0Y05vd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBEYXRlVGltZS5VdGNOb3c7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJVGltZXIgQ3JlYXRlVGltZXIoaW50IHBlcmlvZCwgQWN0aW9uPFRpbWVyRXZlbnQ+IGhhbmRsZXIsIGJvb2wgb25lc2hvdCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBuZXcgV2FsbFRpbWVyKHBlcmlvZCwgaGFuZGxlciwgb25lc2hvdCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElSYXRlIENyZWF0ZVJhdGUoZG91YmxlIHBlcmlvZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgV2FsbFJhdGUocGVyaW9kLCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgR2V0UmFuZG9tU3RyaW5nKGludCBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZyBvPVwiXCI7XHJcbiAgICAgICAgICAgIFJhbmRvbSByID0gbmV3IFJhbmRvbSgpO1xyXG4gICAgICAgICAgICBzdHJpbmcgc3RydmFscyA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODlcIjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbyArPSBzdHJ2YWxzW3IuTmV4dCgwLCAoc3RydmFscy5MZW5ndGggLSAxKSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0cmluZyBzZXJ2aWNlX3N0YXRlX25vbmNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFNlcnZpY2VTdGF0ZU5vbmNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayh0aGlzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlX3N0YXRlX25vbmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVXBkYXRlU2VydmljZVN0YXRlTm9uY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nIG5ld19ub25jZTtcclxuICAgICAgICAgICAgICAgIGRvXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUmFuZG9tIHIgPSBuZXcgUmFuZG9tKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3X25vbmNlID0gR2V0UmFuZG9tU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKG5ld19ub25jZSA9PSBzZXJ2aWNlX3N0YXRlX25vbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX3N0YXRlX25vbmNlID0gbmV3X25vbmNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2NrICh0cmFuc3BvcnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiB0cmFuc3BvcnRzLlZhbHVlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0LkxvY2FsTm9kZVNlcnZpY2VzQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgICAgIFxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJ2aWNlSW5mbzJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSb290T2JqZWN0VHlwZTtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nW10gUm9vdE9iamVjdEltcGxlbWVudHM7XHJcbiAgICAgICAgcHVibGljIHN0cmluZ1tdIENvbm5lY3Rpb25VUkw7XHJcbiAgICAgICAgcHVibGljIERpY3Rpb25hcnk8c3RyaW5nLCBvYmplY3Q+IEF0dHJpYnV0ZXM7XHJcbiAgICAgICAgcHVibGljIE5vZGVJRCBOb2RlSUQ7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOb2RlTmFtZTtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcnZpY2VJbmZvMigpIHsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU2VydmljZUluZm8yKFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4LlNlcnZpY2VJbmZvIGluZm8sUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguTm9kZUluZm8gbmluZm8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOYW1lID0gaW5mby5OYW1lO1xyXG4gICAgICAgICAgICBSb290T2JqZWN0VHlwZSA9IGluZm8uUm9vdE9iamVjdFR5cGU7XHJcbiAgICAgICAgICAgIFJvb3RPYmplY3RJbXBsZW1lbnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PHN0cmluZz4oaW5mby5Sb290T2JqZWN0SW1wbGVtZW50cy5WYWx1ZXMpO1xyXG4gICAgICAgICAgICBDb25uZWN0aW9uVVJMID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PHN0cmluZz4oaW5mby5Db25uZWN0aW9uVVJMLlZhbHVlcyk7XHJcbiAgICAgICAgICAgIEF0dHJpYnV0ZXMgPSBpbmZvLkF0dHJpYnV0ZXM7XHJcbiAgICAgICAgICAgIE5vZGVJRCA9IG5ldyBOb2RlSUQobmluZm8uTm9kZUlEKTtcclxuICAgICAgICAgICAgTm9kZU5hbWUgPSBuaW5mby5Ob2RlTmFtZTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTm9kZUluZm8yXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIE5vZGVJRCBOb2RlSUQ7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOb2RlTmFtZTtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nW10gQ29ubmVjdGlvblVSTDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgVGltZVNwZWNcclxuICAgIHtcclxuICAgICAgICBcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBsb25nIHN0YXJ0X3RpY2tzO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGxvbmcgdGlja3NfcGVyX3NlY29uZDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgbG9uZyBzdGFydF9zZWNvbmRzO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGludCBzdGFydF9uYW5vc2Vjb25kcztcclxuICAgICAgICBcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEYXRlVGltZSBzdGFydF90aW1lO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGJvb2wgc3RhcnRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBib29sIGlzd2luZG93cyA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBsb25nIHNlY29uZHM7XHJcbiAgICAgICAgcHVibGljIGludCBuYW5vc2Vjb25kcztcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb2JqZWN0IHN0YXJ0X2xvY2s9bmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGltZVNwZWMobG9uZyBzZWNvbmRzLCBpbnQgbmFub3NlY29uZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNlY29uZHMgPSBzZWNvbmRzO1xyXG4gICAgICAgICAgICB0aGlzLm5hbm9zZWNvbmRzID0gbmFub3NlY29uZHM7XHJcblxyXG4gICAgICAgICAgICBsb2NrKHN0YXJ0X2xvY2spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFzdGFydGVkKSBzdGFydCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjbGVhbnVwX25hbm9zZWNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGltZVNwZWMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFzdGFydGVkKSBzdGFydCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlY29uZHMgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLm5hbm9zZWNvbmRzID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGltZVNwZWMgTm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGltZVNwZWMgdCA9IG5ldyBUaW1lU3BlYygpO1xyXG4gICAgICAgICAgICAgICAgdC50aW1lc3BlY19ub3coKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIHRpbWVzcGVjX25vdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNlY29uZHMgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLm5hbm9zZWNvbmRzID0gMDtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKHN0YXJ0X2xvY2spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghc3RhcnRlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kcyA9IHN0YXJ0X3NlY29uZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW5vc2Vjb25kcyA9IHN0YXJ0X25hbm9zZWNvbmRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc3dpbmRvd3MpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb25nIHRpY2tzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBRdWVyeVBlcmZvcm1hbmNlQ291bnRlcihvdXQgdGlja3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9uZyBkaWZmX3RpY2tzID0gdGlja3MgLSBzdGFydF90aWNrcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9uZyBkaWZmX3NlY3MgPSBkaWZmX3RpY2tzIC8gdGlja3NfcGVyX3NlY29uZDtcclxuICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9uZyBkaWZmX25hbm9zZWNzID0gKChkaWZmX3RpY2tzICogKGxvbmcpMWU5KSAvIHRpY2tzX3Blcl9zZWNvbmQpICUgKGxvbmcpMWU5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlY29uZHMgPSBkaWZmX3NlY3MgKyBzdGFydF9zZWNvbmRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbm9zZWNvbmRzID0gKGludClkaWZmX25hbm9zZWNzICsgc3RhcnRfbmFub3NlY29uZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRpbWVTcGFuIHQgPSBEYXRlVGltZS5VdGNOb3cuVG9Vbml2ZXJzYWxUaW1lKCkgLSAobmV3IERhdGVUaW1lKDE5NzAsIDEsIDEsIDAsIDAsIDAsIERhdGVUaW1lS2luZC5VdGMpKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZWNvbmRzID0gKGxvbmcpTWF0aC5Sb3VuZCh0LlRvdGFsU2Vjb25kcyk7XHJcblx0XHRcdFx0XHRcdHRoaXMubmFub3NlY29uZHMgPSAoaW50KU1hdGguSUVFRVJlbWFpbmRlcih0LlRvdGFsTWlsbGlzZWNvbmRzICogMWU2LCAxZTkpIDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNsZWFudXBfbmFub3NlY3MoKTtcclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBzdGFydCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIXN0YXJ0ZWQpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiNpZiAhUk9CT1RSQUNPTlRFVVJfQlJJREdFXHJcbiAgICAgICAgICAgICAgICBpZiAoRW52aXJvbm1lbnQuT1NWZXJzaW9uLlBsYXRmb3JtID09IFBsYXRmb3JtSUQuV2luMzJOVCB8fCBFbnZpcm9ubWVudC5PU1ZlcnNpb24uUGxhdGZvcm0gPT0gUGxhdGZvcm1JRC5XaW5DRSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpc3dpbmRvd3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFF1ZXJ5UGVyZm9ybWFuY2VDb3VudGVyKG91dCBzdGFydF90aWNrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgUXVlcnlQZXJmb3JtYW5jZUZyZXF1ZW5jeShvdXQgdGlja3NfcGVyX3NlY29uZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiNlbmRpZlxyXG5cclxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWUgPSBEYXRlVGltZS5VdGNOb3cuVG9Vbml2ZXJzYWxUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICBUaW1lU3BhbiB0ID0gc3RhcnRfdGltZSAtIChuZXcgRGF0ZVRpbWUoMTk3MCwgMSwgMSwgMCwgMCwgMCwgRGF0ZVRpbWVLaW5kLlV0YykpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRfc2Vjb25kcyA9IChsb25nKU1hdGguUm91bmQodC5Ub3RhbFNlY29uZHMpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRfbmFub3NlY29uZHMgPSAoaW50KU1hdGguSUVFRVJlbWFpbmRlcih0LlRvdGFsTWlsbGlzZWNvbmRzICogMWU2LCAxZTkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcblxyXG5cclxuICAgICAgICAvKltEbGxJbXBvcnQoXCJLZXJuZWwzMi5kbGxcIildXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZXh0ZXJuIGJvb2wgUXVlcnlQZXJmb3JtYW5jZUNvdW50ZXIob3V0IGxvbmcgbHBQZXJmb3JtYW5jZUNvdW50KTtcclxuXHJcbiAgICAgICAgW0RsbEltcG9ydChcIktlcm5lbDMyLmRsbFwiKV1cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBleHRlcm4gYm9vbCBRdWVyeVBlcmZvcm1hbmNlRnJlcXVlbmN5KG91dCBsb25nIGxwRnJlcXVlbmN5KTsqL1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyAgYm9vbCBRdWVyeVBlcmZvcm1hbmNlQ291bnRlcihvdXQgbG9uZyBscFBlcmZvcm1hbmNlQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBscFBlcmZvcm1hbmNlQ291bnQ9U3lzdGVtLkRpYWdub3N0aWNzLlN0b3B3YXRjaC5HZXRUaW1lc3RhbXAoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyAgYm9vbCBRdWVyeVBlcmZvcm1hbmNlRnJlcXVlbmN5KG91dCBsb25nIGxwRnJlcXVlbmN5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbHBGcmVxdWVuY3kgPSBTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoLkZyZXF1ZW5jeTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIGNsZWFudXBfbmFub3NlY3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IG5hbm9zZWNvbmRzMSA9IG5hbm9zZWNvbmRzO1xyXG5cclxuICAgICAgICAgICAgaW50IG5hbm9fZGl2ID0gbmFub3NlY29uZHMgLyAoaW50KSgxZTkpO1xyXG4gICAgICAgICAgICBuYW5vc2Vjb25kcyA9IG5hbm9zZWNvbmRzICUgKGludCkoMWU5KTtcclxuICAgICAgICAgICAgc2Vjb25kcyArPSBuYW5vX2RpdjtcclxuXHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgaWYgKHNlY29uZHMgPiAwICYmIG5hbm9zZWNvbmRzIDwgMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2Vjb25kcyA9IHNlY29uZHMgLSAxO1xyXG4gICAgICAgICAgICAgICAgbmFub3NlY29uZHMgPSAoaW50KTFlOSArIG5hbm9zZWNvbmRzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc2Vjb25kcyA8IDAgJiYgbmFub3NlY29uZHMgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzID0gc2Vjb25kcyArIDE7XHJcbiAgICAgICAgICAgICAgICBuYW5vc2Vjb25kcyA9IG5hbm9zZWNvbmRzIC0gKGludCkxZTk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciA9PShUaW1lU3BlYyB0MSwgVGltZVNwZWMgdDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKChvYmplY3QpdDEpID09IG51bGwgJiYgKChvYmplY3QpdDIpID09IG51bGwpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoKChvYmplY3QpdDEpID09IG51bGwgfHwgKChvYmplY3QpdDIpID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodDEuc2Vjb25kcyA9PSB0Mi5zZWNvbmRzICYmIHQxLm5hbm9zZWNvbmRzID09IHQyLm5hbm9zZWNvbmRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShUaW1lU3BlYyB0MSwgVGltZVNwZWMgdDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gISh0MSA9PSB0Mik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRpbWVTcGVjIG9wZXJhdG9yIC0oVGltZVNwZWMgdDEsIFRpbWVTcGVjIHQyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lU3BlYyh0MS5zZWNvbmRzIC0gdDIuc2Vjb25kcywgdDEubmFub3NlY29uZHMgLSB0Mi5uYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRpbWVTcGVjIG9wZXJhdG9yICsoVGltZVNwZWMgdDEsIFRpbWVTcGVjIHQyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lU3BlYyh0MS5zZWNvbmRzICsgdDIuc2Vjb25kcywgdDEubmFub3NlY29uZHMgKyB0Mi5uYW5vc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPihUaW1lU3BlYyB0MSwgVGltZVNwZWMgdDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUaW1lU3BlYyBkaWZmID0gdDEgLSB0MjtcclxuICAgICAgICAgICAgaWYgKGRpZmYuc2Vjb25kcyA9PSAwKSByZXR1cm4gZGlmZi5uYW5vc2Vjb25kcyA+IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBkaWZmLnNlY29uZHMgPiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID49KFRpbWVTcGVjIHQxLCBUaW1lU3BlYyB0MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0MSA9PSB0MikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0MSA+IHQyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yIDwoVGltZVNwZWMgdDEsIFRpbWVTcGVjIHQyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHQyPj0gdDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPD0oVGltZVNwZWMgdDEsIFRpbWVTcGVjIHQyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHQyID4gdDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgVGltZVNwZWMpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzID09IChUaW1lU3BlYylvYmo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuYW5vc2Vjb25kcysoaW50KXNlY29uZHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIFJvYm90UmFjb250ZXVyT2JqZWN0TG9ja0ZsYWdzXHJcbiAgICB7XHJcbiAgICAgICAgVVNFUl9MT0NLPTAsXHJcbiAgICAgICAgQ0xJRU5UX0xPQ0tcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTm9kZURpc2NvdmVyeUluZm9cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTm9kZUlEIE5vZGVJRDtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5vZGVOYW1lID0gXCJcIjtcclxuICAgICAgICBwdWJsaWMgTGlzdDxOb2RlRGlzY292ZXJ5SW5mb1VSTD4gVVJMcyA9IG5ldyBMaXN0PE5vZGVEaXNjb3ZlcnlJbmZvVVJMPigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBOb2RlRGlzY292ZXJ5SW5mb1VSTFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVVJMO1xyXG4gICAgICAgIHB1YmxpYyBEYXRlVGltZSBMYXN0QW5ub3VuY2VUaW1lO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTm9kZUlEXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBieXRlW10gaWQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBOb2RlSUQoYnl0ZVtdIGlkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGlkLkxlbmd0aCAhPSAxNikgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb2RlIElEIG11c3QgYmUgMTI4IGJpdHMgbG9uZ1wiKTtcclxuICAgICAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE5vZGVJRChzdHJpbmcgaWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlW10gaWQxID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKFRyeVBhcnNlKGlkLCBvdXQgaWQxKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pZCA9IGlkMTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGlkMSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgZm9ybWF0IGZvciBOb2RlSURcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5pZCA9IGlkMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzdGF0aWMgYm9vbCBUcnlQYXJzZShzdHJpbmcgc3RyaW5naWQsIG91dCBieXRlW10gYnl0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3RyaW5naWQgPT0gXCJ7MH1cIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMgPSBuZXcgYnl0ZVsxNl07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnl0ZXMgPSBudWxsO1xyXG4gICAgICAgICAgICBSZWdleCByID0gbmV3IFJlZ2V4KEBcIlxcez8oW2EtZkEtRjAtOV17OH0pLShbYS1mQS1GMC05XXs0fSktKFthLWZBLUYwLTldezR9KS0oW2EtZkEtRjAtOV17NH0pLShbYS1mQS1GMC05XXsxMn0pXFx9P1wiKTtcclxuICAgICAgICAgICAgdmFyIHJlcyA9IHIuTWF0Y2goc3RyaW5naWQpO1xyXG4gICAgICAgICAgICBpZiAoIXJlcy5TdWNjZXNzKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHN0cmluZyByZXMxID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCA2OyBpKyspIHJlczEgKz0gcmVzLkdyb3Vwc1tpXS5WYWx1ZTtcclxuICAgICAgICAgICAgYnl0ZXMgPSBuZXcgYnl0ZVsxNl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTY7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXNbaV0gPSBDb252ZXJ0LlRvQnl0ZShyZXMxLlN1YnN0cmluZyhpICogMiwgMiksIDE2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgVHJ5UGFyc2Uoc3RyaW5nIHN0cmluZ2lkLCBvdXQgTm9kZUlEIG5vZGVpZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGVbXSBieXRlcztcclxuICAgICAgICAgICAgbm9kZWlkID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCFUcnlQYXJzZShzdHJpbmdpZCwgb3V0IGJ5dGVzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGVpZCA9IG5ldyBOb2RlSUQoYnl0ZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBieXRlW10gVG9CeXRlQXJyYXkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZVtdIGJpZCA9IG5ldyBieXRlWzE2XTtcclxuICAgICAgICAgICAgQXJyYXkuQ29weShpZCwgYmlkLCAxNik7XHJcbiAgICAgICAgICAgIHJldHVybiBiaWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZ1tdIGhleHZhbHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxieXRlLHN0cmluZz4oaWQsKEZ1bmM8Ynl0ZSxzdHJpbmc+KSh4ID0+IFN0cmluZy5Gb3JtYXQoXCJ7MDp4Mn1cIiwgeCkpKS5Ub0FycmF5KCk7XHJcbiAgICAgICAgICAgIHN0cmluZyBnMSA9IFN0cmluZy5Kb2luKFwiXCIsIGhleHZhbHMsIDAsIDQpO1xyXG4gICAgICAgICAgICBzdHJpbmcgZzIgPSBTdHJpbmcuSm9pbihcIlwiLCBoZXh2YWxzLCA0LCAyKTtcclxuICAgICAgICAgICAgc3RyaW5nIGczID0gU3RyaW5nLkpvaW4oXCJcIiwgaGV4dmFscywgNiwgMik7XHJcbiAgICAgICAgICAgIHN0cmluZyBnNCA9IFN0cmluZy5Kb2luKFwiXCIsIGhleHZhbHMsIDgsIDIpO1xyXG4gICAgICAgICAgICBzdHJpbmcgZzUgPSBTdHJpbmcuSm9pbihcIlwiLCBoZXh2YWxzLCAxMCwgNik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gXCJ7XCIgKyBTdHJpbmcuSm9pbihcIi1cIiwgbmV3IHN0cmluZ1tdIHsgZzEsIGcyLCBnMywgZzQsIGc1IH0pICsgXCJ9XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGV4cGxpY2l0IG9wZXJhdG9yIGJ5dGVbXShOb2RlSUQgaSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpLlRvQnl0ZUFycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE5vZGVJRCBOZXdVbmlxdWVJRCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZ3VpZCA9IFN5c3RlbS5HdWlkLk5ld0d1aWQoKS5Ub1N0cmluZyhcIkJcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9kZUlEKGd1aWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KE5vZGVJRCBpZDEsIE5vZGVJRCBpZDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKG9iamVjdClpZDEgPT0gbnVsbCAmJiAob2JqZWN0KWlkMiA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKCgob2JqZWN0KWlkMSA9PSBudWxsICYmIChvYmplY3QpaWQyICE9IG51bGwpIHx8ICgob2JqZWN0KWlkMSAhPSBudWxsICYmIChvYmplY3QpaWQyID09IG51bGwpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGJ5dGU+KGlkMS5pZCxpZDIuaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yICE9KE5vZGVJRCBpZDEsIE5vZGVJRCBpZDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKG9iamVjdClpZDEgPT0gbnVsbCAmJiAob2JqZWN0KWlkMiA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICgoKG9iamVjdClpZDEgPT0gbnVsbCAmJiAob2JqZWN0KWlkMiAhPSBudWxsKSB8fCAoKG9iamVjdClpZDEgIT0gbnVsbCAmJiAob2JqZWN0KWlkMiA9PSBudWxsKSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxieXRlPihpZDEuaWQsaWQyLmlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQW55Tm9kZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxieXRlPihpZCwoRnVuYzxieXRlLGJvb2w+KSh4ID0+IHggPT0gMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgTm9kZUlEKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcyA9PSAoKE5vZGVJRClvYmopO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBOb2RlSUQgQW55IHsgZ2V0IHsgcmV0dXJuIG5ldyBOb2RlSUQobmV3IGJ5dGVbMTZdKTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHN1bSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKGJ5dGUgYiBpbiBpZClcclxuICAgICAgICAgICAgICAgIHN1bSArPSBiO1xyXG4gICAgICAgICAgICByZXR1cm4gc3VtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IDIwMTEtMjAxOSBXYXNvbiBUZWNobm9sb2d5LCBMTENcclxuLy9cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy9cclxuLy8gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbi8vXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUGVyaW9kaWNUYXNrXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhc3luYyBUYXNrIFJ1bihBY3Rpb24gYWN0aW9uLCBUaW1lU3BhbiBwZXJpb2QsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbGxhdGlvblRva2VuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKCFjYW5jZWxsYXRpb25Ub2tlbi5Jc0NhbmNlbGxhdGlvblJlcXVlc3RlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheShwZXJpb2QsIGNhbmNlbGxhdGlvblRva2VuKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYW5jZWxsYXRpb25Ub2tlbi5Jc0NhbmNlbGxhdGlvblJlcXVlc3RlZCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUYXNrIFJ1bihBY3Rpb24gYWN0aW9uLCBUaW1lU3BhbiBwZXJpb2QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gUnVuKChBY3Rpb24pYWN0aW9uLCBwZXJpb2QsIENhbmNlbGxhdGlvblRva2VuLk5vbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgMjAxMS0yMDE5IFdhc29uIFRlY2hub2xvZ3ksIExMQ1xyXG4vL1xyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4vL1xyXG4vLyAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuLy9cclxuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucztcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcbiAgICAvL1RPRE86IEFkZCB0aHJlYWRpbmcgbG9ja3NcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgUGlwZTxUPlxyXG4gICAgeyAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGNvbnN0IGludCBBTllfSU5ERVggPSAtMTtcclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIFBpcGVFbmRwb2ludFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHJpdmF0ZSB1aW50IHNlbmRfcGFja2V0X251bWJlciA9IDA7XHJcbiAgICAgICAgICAgIHByaXZhdGUgdWludCByZWN2X3BhY2tldF9udW1iZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgcHJpdmF0ZSBQaXBlPFQ+IHBhcmVudDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBpbnQgaW5kZXg7XHJcbiAgICAgICAgICAgIHByaXZhdGUgRW5kcG9pbnQgZW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEluZGV4IHsgZ2V0IHsgcmV0dXJuIGluZGV4OyB9IH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB1aW50IEVuZHBvaW50IHsgZ2V0IHsgcmV0dXJuIGVuZHBvaW50LkxvY2FsRW5kcG9pbnQ7IH0gfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGJvb2wgUmVxdWVzdFBhY2tldEFjayA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIFBpcGVFbmRwb2ludChQaXBlPFQ+IHBhcmVudCwgaW50IGluZGV4LCBFbmRwb2ludCBlbmRwb2ludCA9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwcml2YXRlIEFzeW5jTXV0ZXggc2VuZF9tdXRleCA9IG5ldyBBc3luY011dGV4KCk7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazx1aW50PiBTZW5kUGFja2V0KFQgcGFja2V0LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGFzayBtdXRleCA9IHNlbmRfbXV0ZXguRW50ZXIoKTtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG11dGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbmRfcGFja2V0X251bWJlciA9IChzZW5kX3BhY2tldF9udW1iZXIgPCBVSW50MzIuTWF4VmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VuZF9wYWNrZXRfbnVtYmVyICsgMSA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBhcmVudC5TZW5kUGlwZVBhY2tldChwYWNrZXQsIGluZGV4LCBzZW5kX3BhY2tldF9udW1iZXIsIFJlcXVlc3RQYWNrZXRBY2ssIGVuZHBvaW50LCBjYW5jZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kX3BhY2tldF9udW1iZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaW5hbGx5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VuZF9tdXRleC5FeGl0KG11dGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIENsb3NlKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcGFyZW50LkNsb3NlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwcml2YXRlIHVpbnQgaW5jcmVtZW50X3BhY2tldF9udW1iZXIodWludCBwYWNrZXRudW0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAocGFja2V0bnVtIDwgVUludDMyLk1heFZhbHVlKSA/IHBhY2tldG51bSArIDEgOiAwO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJpdmF0ZSBEaWN0aW9uYXJ5PHVpbnQsIFQ+IG91dF9vZl9vcmRlcl9wYWNrZXRzID0gbmV3IERpY3Rpb25hcnk8dWludCwgVD4oKTtcclxuICAgICAgICAgICAgcHJpdmF0ZSBvYmplY3QgcmVjdl9sb2NrID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIGV2ZW50IFBpcGVQYWNrZXRSZWNlaXZlZENhbGxiYWNrRnVuY3Rpb24gUGFja2V0UmVjZWl2ZWRFdmVudDtcclxuXHJcbiAgICAgICAgICAgIGludGVybmFsIHByb3RlY3RlZCB2b2lkIFBpcGVQYWNrZXRSZWNlaXZlZChUIHBhY2tldCwgdWludCBwYWNrZXRudW0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKHJlY3ZfbG9jaylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFja2V0bnVtID09IGluY3JlbWVudF9wYWNrZXRfbnVtYmVyKHJlY3ZfcGFja2V0X251bWJlcikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN2X3BhY2tldHMuRW5xdWV1ZShwYWNrZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN2X3BhY2tldF9udW1iZXIgPSBpbmNyZW1lbnRfcGFja2V0X251bWJlcihyZWN2X3BhY2tldF9udW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0X29mX29yZGVyX3BhY2tldHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczx1aW50PihvdXRfb2Zfb3JkZXJfcGFja2V0cy5LZXlzLGluY3JlbWVudF9wYWNrZXRfbnVtYmVyKHJlY3ZfcGFja2V0X251bWJlcikpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3ZfcGFja2V0X251bWJlciA9IGluY3JlbWVudF9wYWNrZXRfbnVtYmVyKHJlY3ZfcGFja2V0X251bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCBvcGFja2V0ID0gb3V0X29mX29yZGVyX3BhY2tldHNbcmVjdl9wYWNrZXRfbnVtYmVyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN2X3BhY2tldHMuRW5xdWV1ZShvcGFja2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRfb2Zfb3JkZXJfcGFja2V0cy5SZW1vdmUocmVjdl9wYWNrZXRfbnVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFBhY2tldFJlY2VpdmVkRXZlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFja2V0UmVjZWl2ZWRFdmVudCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dF9vZl9vcmRlcl9wYWNrZXRzLkFkZChwYWNrZXRudW0sIHBhY2tldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgZXZlbnQgUGlwZVBhY2tldEFja1JlY2VpdmVkQ2FsbGJhY2tGdW5jdGlvbiBQYWNrZXRBY2tSZWNlaXZlZEV2ZW50O1xyXG5cclxuICAgICAgICAgICAgaW50ZXJuYWwgdm9pZCBQaXBlUGFja2V0QWNrUmVjZWl2ZWQodWludCBwYWNrZXRudW0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFBhY2tldEFja1JlY2VpdmVkRXZlbnQodGhpcywgcGFja2V0bnVtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJpdmF0ZSBRdWV1ZTxUPiByZWN2X3BhY2tldHMgPSBuZXcgUXVldWU8VD4oKTtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgQXZhaWxhYmxlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKHJlY3ZfbG9jaylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWN2X3BhY2tldHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgVCBQZWVrTmV4dFBhY2tldCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKHJlY3ZfbG9jaylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdl9wYWNrZXRzLlBlZWsoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIFQgUmVjZWl2ZVBhY2tldCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKHJlY3ZfbG9jaylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdl9wYWNrZXRzLkRlcXVldWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJpdmF0ZSBQaXBlRGlzY29ubmVjdENhbGxiYWNrRnVuY3Rpb24gY2xvc2VfY2FsbGJhY2s7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgUGlwZURpc2Nvbm5lY3RDYWxsYmFja0Z1bmN0aW9uIFBpcGVDbG9zZUNhbGxiYWNrXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiBjbG9zZV9jYWxsYmFjazsgfVxyXG4gICAgICAgICAgICAgICAgc2V0IHsgY2xvc2VfY2FsbGJhY2sgPSB2YWx1ZTsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGludGVybmFsIHZvaWQgUmVtb3RlQ2xvc2UoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VfY2FsbGJhY2sgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlX2NhbGxiYWNrKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCB7IH07XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDbG9zZSgpLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCByYXdlbGVtZW50cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgUGlwZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKFQpID09IHR5cGVvZihNZXNzYWdlRWxlbWVudCkpXHJcbiAgICAgICAgICAgICAgICByYXdlbGVtZW50cyA9IHRydWU7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IHN0cmluZyBNZW1iZXJOYW1lIHsgZ2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxlZ2F0ZSB2b2lkIFBpcGVDb25uZWN0Q2FsbGJhY2tGdW5jdGlvbihQaXBlRW5kcG9pbnQgbmV3cGlwZSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxlZ2F0ZSB2b2lkIFBpcGVEaXNjb25uZWN0Q2FsbGJhY2tGdW5jdGlvbihQaXBlRW5kcG9pbnQgY2xvc2VkcGlwZSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxlZ2F0ZSB2b2lkIFBpcGVQYWNrZXRSZWNlaXZlZENhbGxiYWNrRnVuY3Rpb24oUGlwZUVuZHBvaW50IGUpO1xyXG5cclxuICAgICAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBQaXBlUGFja2V0QWNrUmVjZWl2ZWRDYWxsYmFja0Z1bmN0aW9uKFBpcGVFbmRwb2ludCBlLCB1aW50IHBhY2tldG51bSk7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBUYXNrIFNlbmRQaXBlUGFja2V0KFQgcGFja2V0LCBpbnQgaW5kZXgsIHVpbnQgcGFja2V0bnVtYmVyLCBib29sIHJlcXVlc3RhY2ssIEVuZHBvaW50IGVuZHBvaW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFRhc2s8UGlwZUVuZHBvaW50PiBDb25uZWN0KGludCBpbmRleCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgUGlwZUNvbm5lY3RDYWxsYmFja0Z1bmN0aW9uIFBpcGVDb25uZWN0Q2FsbGJhY2sgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3Qgdm9pZCBQaXBlUGFja2V0UmVjZWl2ZWQoTWVzc2FnZUVudHJ5IG0sIEVuZHBvaW50IGUgPSBudWxsKTtcclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IHZvaWQgU2h1dGRvd24oKTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IFRhc2sgQ2xvc2UoUGlwZUVuZHBvaW50IGUsIEVuZHBvaW50IGVlID0gbnVsbCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBEaXNwYXRjaFBhY2tldEFjayhNZXNzYWdlRWxlbWVudCBtZSwgUGlwZUVuZHBvaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHBudW0gPSBtZS5DYXN0RGF0YTx1aW50W10+KClbMF07XHJcbiAgICAgICAgICAgIGUuUGlwZVBhY2tldEFja1JlY2VpdmVkKHBudW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGJvb2wgRGlzcGF0Y2hQYWNrZXQoTWVzc2FnZUVsZW1lbnQgbWUsIFBpcGVFbmRwb2ludCBlLCBvdXQgdWludCBwYWNrZXRudW1iZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgaW5kZXggPSBJbnQzMi5QYXJzZShtZS5FbGVtZW50TmFtZSk7XHJcbiAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGVsZW1zID0gKChNZXNzYWdlRWxlbWVudE1hcDxzdHJpbmc+KW1lLkRhdGEpLkVsZW1lbnRzO1xyXG4gICAgICAgICAgICBwYWNrZXRudW1iZXIgPSAoTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQoZWxlbXMsIFwicGFja2V0bnVtYmVyXCIpLkNhc3REYXRhPHVpbnRbXT4oKSlbMF07XHJcbiAgICAgICAgICAgIG9iamVjdCBkYXRhO1xyXG4gICAgICAgICAgICBpZiAoIXJhd2VsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IFVucGFja1ZhclR5cGUoTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQoZWxlbXMsIFwicGFja2V0XCIpKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IE1lc3NhZ2VFbGVtZW50LkZpbmRFbGVtZW50KGVsZW1zLCBcInBhY2tldFwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhIGlzIEFycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKFQpLklzQXJyYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgZS5QaXBlUGFja2V0UmVjZWl2ZWQoKFQpZGF0YSwgcGFja2V0bnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZS5QaXBlUGFja2V0UmVjZWl2ZWQoKChUW10pZGF0YSlbMF0sIHBhY2tldG51bWJlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgZS5QaXBlUGFja2V0UmVjZWl2ZWQoKFQpZGF0YSwgcGFja2V0bnVtYmVyKTtcclxuXHJcbiAgICAgICAgICAgIGJvb2wgcmVxdWVzdGFjaz0oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8TWVzc2FnZUVsZW1lbnQ+KGVsZW1zLChGdW5jPE1lc3NhZ2VFbGVtZW50LGJvb2w+KSh4ID0+IHguRWxlbWVudE5hbWUgPT0gXCJyZXF1ZXN0YWNrXCIpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0YWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgTWVzc2FnZUVsZW1lbnQgUGFja1BhY2tldChUIGRhdGEsIGludCBpbmRleCwgdWludCBwYWNrZXRudW1iZXIsIGJvb2wgcmVxdWVzdGFjaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGVsZW1zID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgIGVsZW1zLkFkZChuZXcgTWVzc2FnZUVsZW1lbnQoXCJwYWNrZXRudW1iZXJcIiwgcGFja2V0bnVtYmVyKSk7XHJcbiAgICAgICAgICAgIGlmICghcmF3ZWxlbWVudHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdCBwZGF0YSA9IFBhY2tWYXJUeXBlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgZWxlbXMuQWRkKG5ldyBNZXNzYWdlRWxlbWVudChcInBhY2tldFwiLCBwZGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnQgcG1lID0gKChNZXNzYWdlRWxlbWVudCkob2JqZWN0KWRhdGEpO1xyXG4gICAgICAgICAgICAgICAgcG1lLkVsZW1lbnROYW1lID0gXCJwYWNrZXRcIjtcclxuICAgICAgICAgICAgICAgIGVsZW1zLkFkZChwbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVxdWVzdGFjaylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbXMuQWRkKG5ldyBNZXNzYWdlRWxlbWVudChcInJlcXVlc3RhY2tcIiwgbmV3IGludFtdIHsgMSB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50TWFwPHN0cmluZz4gZGVsZW1zID0gbmV3IE1lc3NhZ2VFbGVtZW50TWFwPHN0cmluZz4oZWxlbXMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnQgbWUgPSBuZXcgTWVzc2FnZUVsZW1lbnQoaW5kZXguVG9TdHJpbmcoKSwgZGVsZW1zKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IHZvaWQgRGVsZXRlRW5kcG9pbnQoUGlwZUVuZHBvaW50IGUpO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgb2JqZWN0IFBhY2tWYXJUeXBlKG9iamVjdCBvKTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IG9iamVjdCBVbnBhY2tWYXJUeXBlKE1lc3NhZ2VFbGVtZW50IG8pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VhbGVkIGNsYXNzIFBpcGVDbGllbnQ8VD4gOiBQaXBlPFQ+XHJcbiAgICB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgRGljdGlvbmFyeTxpbnQsIFBpcGVFbmRwb2ludD4gcGlwZWVuZHBvaW50cyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgUGlwZUVuZHBvaW50PigpO1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0cmluZyBtX05hbWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBNZW1iZXJOYW1lIHsgZ2V0IHsgcmV0dXJuIG1fTmFtZTsgfSB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgU2VydmljZVN0dWIgc3R1YjtcclxuXHJcbiAgICAgICAgcHVibGljIFBpcGVDbGllbnQoc3RyaW5nIG5hbWUsIFNlcnZpY2VTdHViIHN0dWIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtX05hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnN0dWIgPSBzdHViO1xyXG4gICAgICAgICAgICBzdHViLlJSQ29udGV4dC5DbGllbnRTZXJ2aWNlTGlzdGVuZXIgKz0gQ2xpZW50Q29udGV4dExpc3RlbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXN5bmMgVGFzayBTZW5kUGlwZVBhY2tldChUIGRhdGEsIGludCBpbmRleCwgdWludCBwYWNrZXRudW1iZXIsIGJvb2wgcmVxdWVzdGFjaywgRW5kcG9pbnQgZSA9IG51bGwsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnQgbWUgPSBQYWNrUGFja2V0KGRhdGEsIGluZGV4LCBwYWNrZXRudW1iZXIsIHJlcXVlc3RhY2spO1xyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5QaXBlUGFja2V0LCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgbS5BZGRFbGVtZW50KG1lKTtcclxuICAgICAgICAgICAgYXdhaXQgc3R1Yi5TZW5kUGlwZU1lc3NhZ2UobSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8VHVwbGU8aW50LG9iamVjdD4+IGNvbm5lY3RpbmcgPSBuZXcgTGlzdDxUdXBsZTxpbnQsb2JqZWN0Pj4oKTtcclxuICAgICAgICBEaWN0aW9uYXJ5PGludCxQaXBlRW5kcG9pbnQ+IGVhcmx5X2VuZHBvaW50cyA9IG5ldyBEaWN0aW9uYXJ5PGludCxQaXBlRW5kcG9pbnQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrPFBpcGVFbmRwb2ludD4gQ29ubmVjdChpbnQgaW5kZXgsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2JqZWN0IGNvbm5lY3Rpbmdfa2V5ID0gbmV3IG9iamVjdCgpO1xyXG4gICAgICAgICAgICBjb25uZWN0aW5nLkFkZChUdXBsZS5DcmVhdGU8aW50LG9iamVjdD4oaW5kZXgsY29ubmVjdGluZ19rZXkpKTtcclxuICAgICAgICAgICAgaW50IHJpbmRleD0tMTtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLlBpcGVDb25uZWN0UmVxLCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgIG0uQWRkRWxlbWVudChcImluZGV4XCIsIGluZGV4KTtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSByZXQgPSBhd2FpdCBzdHViLlByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmluZGV4ID0gKHJldC5GaW5kRWxlbWVudChcImluZGV4XCIpLkNhc3REYXRhPGludFtdPigpKVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICBQaXBlRW5kcG9pbnQgZTtcclxuICAgICAgICAgICAgICAgIGlmIChlYXJseV9lbmRwb2ludHMuQ29udGFpbnNLZXkocmluZGV4KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlID0gZWFybHlfZW5kcG9pbnRzW3JpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgZWFybHlfZW5kcG9pbnRzLlJlbW92ZShyaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGU9IG5ldyBQaXBlRW5kcG9pbnQodGhpcywgcmluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBpcGVlbmRwb2ludHMuQWRkKHJpbmRleCwgZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3RpbmcuUmVtb3ZlQWxsKChQcmVkaWNhdGU8VHVwbGU8aW50LG9iamVjdD4+KSh4ID0+IE9iamVjdC5SZWZlcmVuY2VFcXVhbHMoeC5JdGVtMiwgY29ubmVjdGluZ19rZXkpKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGluZy5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVhcmx5X2VuZHBvaW50cy5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBhc3luYyBUYXNrIENsb3NlKFBpcGVFbmRwb2ludCBlLCBFbmRwb2ludCBlZSA9IG51bGwsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuUGlwZURpc2Nvbm5lY3RSZXEsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICBtLkFkZEVsZW1lbnQoXCJpbmRleFwiLCBlLkluZGV4KTtcclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IHJldCA9IGF3YWl0IHN0dWIuUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFBpcGVDb25uZWN0Q2FsbGJhY2tGdW5jdGlvbiBQaXBlQ29ubmVjdENhbGxiYWNrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKCk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUGlwZVBhY2tldFJlY2VpdmVkKE1lc3NhZ2VFbnRyeSBtLCBFbmRwb2ludCBlID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlBpcGVDbG9zZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnQgaW5kZXggPSAobS5GaW5kRWxlbWVudChcImluZGV4XCIpLkNhc3REYXRhPGludFtdPigpKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBwaXBlZW5kcG9pbnRzW2luZGV4XS5SZW1vdGVDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuUGlwZVBhY2tldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTGlzdDxNZXNzYWdlRWxlbWVudD4gYWNrID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChNZXNzYWdlRWxlbWVudCBtZSBpbiBtLmVsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBpbmRleCA9IEludDMyLlBhcnNlKG1lLkVsZW1lbnROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWludCBwbnVtO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgUGlwZUVuZHBvaW50IHA9bnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpcGVlbmRwb2ludHMuQ29udGFpbnNLZXkoaW5kZXgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gcGlwZWVuZHBvaW50c1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWFybHlfZW5kcG9pbnRzLkNvbnRhaW5zS2V5KGluZGV4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gZWFybHlfZW5kcG9pbnRzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW5nLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8VHVwbGU8aW50LG9iamVjdD4+KGNvbm5lY3RpbmcsKEZ1bmM8VHVwbGU8aW50LG9iamVjdD4sYm9vbD4pKHggPT4geC5JdGVtMSA9PSAtMSB8fCB4Lkl0ZW0xID09IGluZGV4KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gbmV3IFBpcGVFbmRwb2ludCh0aGlzLCBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhcmx5X2VuZHBvaW50cy5BZGQoaW5kZXgsIHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPT0gbnVsbCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEaXNwYXRjaFBhY2tldChtZSwgcCwgb3V0IHBudW0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2suQWRkKG5ldyBNZXNzYWdlRWxlbWVudChtZS5FbGVtZW50TmFtZSwgbmV3IHVpbnRbXSB7IHBudW0gfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWNrLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtYWNrID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLlBpcGVQYWNrZXRSZXQsIG0uTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hY2suZWxlbWVudHMgPSBhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0dWIuU2VuZFBpcGVNZXNzYWdlKG1hY2ssIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlBpcGVQYWNrZXRSZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IG1lIGluIG0uZWxlbWVudHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgaW5kZXggPSBJbnQzMi5QYXJzZShtZS5FbGVtZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERpc3BhdGNoUGFja2V0QWNrKG1lLCBwaXBlZW5kcG9pbnRzW2luZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgU2h1dGRvd24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGlwZTxUPi5QaXBlRW5kcG9pbnRbXSBlbmRwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9BcnJheTxQaXBlPFQ+LlBpcGVFbmRwb2ludD4ocGlwZWVuZHBvaW50cy5WYWx1ZXMpO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChQaXBlPFQ+LlBpcGVFbmRwb2ludCBlIGluIGVuZHBzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlLlJlbW90ZUNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBEZWxldGVFbmRwb2ludChQaXBlRW5kcG9pbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBpcGVlbmRwb2ludHMuUmVtb3ZlKGUuSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBDbGllbnRDb250ZXh0TGlzdGVuZXIoQ2xpZW50Q29udGV4dCBjb250ZXh0LCBDbGllbnRTZXJ2aWNlTGlzdGVuZXJFdmVudFR5cGUgZXZlbnRfLCBvYmplY3QgcGFyYW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRfID09IENsaWVudFNlcnZpY2VMaXN0ZW5lckV2ZW50VHlwZS5DbGllbnRDbG9zZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNodXRkb3duKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBvYmplY3QgUGFja1ZhclR5cGUob2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3R1Yi5SUkNvbnRleHQuUGFja1ZhclR5cGUobyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgb2JqZWN0IFVucGFja1ZhclR5cGUoTWVzc2FnZUVsZW1lbnQgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHViLlJSQ29udGV4dC5VbnBhY2tWYXJUeXBlKG8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHNlYWxlZCBjbGFzcyBQaXBlU2VydmVyPFQ+IDogUGlwZTxUPlxyXG4gICAge1xyXG5cclxuICAgICAgICBwcml2YXRlIERpY3Rpb25hcnk8dWludCwgRGljdGlvbmFyeTxpbnQsIFBpcGVFbmRwb2ludD4+IHBpcGVlbmRwb2ludHMgPSBuZXcgRGljdGlvbmFyeTx1aW50LCBEaWN0aW9uYXJ5PGludCwgUGlwZUVuZHBvaW50Pj4oKTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBQaXBlQ29ubmVjdENhbGxiYWNrRnVuY3Rpb24gY2FsbGJhY2s7ICAgICAgICBcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgbV9OYW1lO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgTWVtYmVyTmFtZSB7IGdldCB7IHJldHVybiBtX05hbWU7IH0gfVxyXG5cclxuICAgICAgICBwcml2YXRlIFNlcnZpY2VTa2VsIHNrZWw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQaXBlU2VydmVyKHN0cmluZyBuYW1lLCBTZXJ2aWNlU2tlbCBza2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbV9OYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgdGhpcy5za2VsID0gc2tlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIGFzeW5jIFRhc2sgU2VuZFBpcGVQYWNrZXQoVCBkYXRhLCBpbnQgaW5kZXgsIHVpbnQgcGFja2V0bnVtYmVyLCBib29sIHJlcXVlc3RhY2ssIEVuZHBvaW50IGUgPSBudWxsLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghcGlwZWVuZHBvaW50cy5Db250YWluc0tleShlLkxvY2FsRW5kcG9pbnQpKSB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiUGlwZSBoYXMgYmVlbiBkaXNjb25uZWN0XCIpO1xyXG4gICAgICAgICAgICBpZiAoIXBpcGVlbmRwb2ludHNbZS5Mb2NhbEVuZHBvaW50XS5Db250YWluc0tleShpbmRleCkpIHRocm93IG5ldyBFeGNlcHRpb24oXCJQaXBlIGhhcyBiZWVuIGRpc2Nvbm5lY3RlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50IG1lID0gUGFja1BhY2tldChkYXRhLCBpbmRleCwgcGFja2V0bnVtYmVyLCByZXF1ZXN0YWNrKTtcclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuUGlwZVBhY2tldCwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgIG0uQWRkRWxlbWVudChtZSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBza2VsLlNlbmRQaXBlTWVzc2FnZShtLCBlLCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVGFzazxQaXBlRW5kcG9pbnQ+IENvbm5lY3QoaW50IGVuZHBvaW50LCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBhc3luYyBUYXNrIENsb3NlKFBpcGVFbmRwb2ludCBlLCBFbmRwb2ludCBlZSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5QaXBlQ2xvc2VkLCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgbS5BZGRFbGVtZW50KFwiaW5kZXhcIiwgZS5JbmRleCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHNrZWwuU2VuZFBpcGVNZXNzYWdlKG0sIGVlLCBjYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgRGVsZXRlRW5kcG9pbnQoZSk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBQaXBlQ29ubmVjdENhbGxiYWNrRnVuY3Rpb24gUGlwZUNvbm5lY3RDYWxsYmFja1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGNhbGxiYWNrOyB9XHJcbiAgICAgICAgICAgIHNldCB7IGNhbGxiYWNrID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUGlwZVBhY2tldFJlY2VpdmVkKE1lc3NhZ2VFbnRyeSBtLCBFbmRwb2ludCBlID0gbnVsbClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5QaXBlUGFja2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBhY2sgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKE1lc3NhZ2VFbGVtZW50IG1lIGluIG0uZWxlbWVudHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgaW5kZXggPSBJbnQzMi5QYXJzZShtZS5FbGVtZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgcG51bTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERpc3BhdGNoUGFja2V0KG1lLCBwaXBlZW5kcG9pbnRzW2UuTG9jYWxFbmRwb2ludF1baW5kZXhdLCBvdXQgcG51bSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjay5BZGQobmV3IE1lc3NhZ2VFbGVtZW50KG1lLkVsZW1lbnROYW1lLCBuZXcgdWludFtdIHsgcG51bSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWNrLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtYWNrID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLlBpcGVQYWNrZXRSZXQsIG0uTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hY2suZWxlbWVudHMgPSBhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZWwuU2VuZFBpcGVNZXNzYWdlKG1hY2ssIGUsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5QaXBlUGFja2V0UmV0KVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVsZW1lbnQgbWUgaW4gbS5lbGVtZW50cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBpbmRleCA9IEludDMyLlBhcnNlKG1lLkVsZW1lbnROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGF0Y2hQYWNrZXRBY2sobWUsIHBpcGVlbmRwb2ludHNbZS5Mb2NhbEVuZHBvaW50XVtpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iamVjdCBwaXBlZW5kcG9pbnRsb2NrID0gbmV3IG9iamVjdCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBUYXNrPE1lc3NhZ2VFbnRyeT4gUGlwZUNvbW1hbmQoTWVzc2FnZUVudHJ5IG0sIEVuZHBvaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChwaXBlZW5kcG9pbnRsb2NrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG0uRW50cnlUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVudHJ5VHlwZS5QaXBlQ29ubmVjdFJlcTpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPHVpbnQ+KHBpcGVlbmRwb2ludHMuS2V5cyxlLkxvY2FsRW5kcG9pbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVlbmRwb2ludHMuQWRkKGUuTG9jYWxFbmRwb2ludCwgbmV3IERpY3Rpb25hcnk8aW50LCBQaXBlRW5kcG9pbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8aW50LCBQaXBlRW5kcG9pbnQ+IGVwID0gcGlwZWVuZHBvaW50c1tlLkxvY2FsRW5kcG9pbnRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBpbmRleCA9IChtLkZpbmRFbGVtZW50KFwiaW5kZXhcIikuQ2FzdERhdGE8aW50W10+KCkpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gKGVwLkNvdW50ID09IDApID8gMSA6IChlcC5LZXlzLk1heCgpICsgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8aW50PihlcC5LZXlzLGluZGV4KSkgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlBpcGUgZW5kcG9pbnQgaW5kZXggaW4gdXNlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBpcGVFbmRwb2ludCBwID0gbmV3IFBpcGVFbmRwb2ludCh0aGlzLCBpbmRleCwgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcC5BZGQoaW5kZXgsIHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwpIGNhbGxiYWNrKHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IHJldCA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5QaXBlQ29ubmVjdFJldCwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuQWRkRWxlbWVudChcImluZGV4XCIsIGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8TWVzc2FnZUVudHJ5PihyZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVudHJ5VHlwZS5QaXBlRGlzY29ubmVjdFJlcTpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPHVpbnQ+KHBpcGVlbmRwb2ludHMuS2V5cyxlLkxvY2FsRW5kcG9pbnQpKSB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSW52YWxpZCBwaXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGljdGlvbmFyeTxpbnQsIFBpcGVFbmRwb2ludD4gZXAgPSBwaXBlZW5kcG9pbnRzW2UuTG9jYWxFbmRwb2ludF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGluZGV4ID0gKG0uRmluZEVsZW1lbnQoXCJpbmRleFwiKS5DYXN0RGF0YTxpbnRbXT4oKSlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8aW50PihlcC5LZXlzLGluZGV4KSkgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIkludmFsaWQgcGlwZVwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXAuUmVtb3ZlKGluZGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PE1lc3NhZ2VFbnRyeT4obmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLlBpcGVEaXNjb25uZWN0UmVxLCBNZW1iZXJOYW1lKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSW52YWxpZCBDb21tYW5kXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTaHV0ZG93bigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChwaXBlZW5kcG9pbnRsb2NrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL0N5Y2xlIHRocm91Z2ggYW5kIGNsb3NlIGFsbCBlbmRwb2ludHNcclxuICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8aW50LCBQaXBlPFQ+LlBpcGVFbmRwb2ludD5bXSBlbmRwb2ludHMxID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PERpY3Rpb25hcnk8aW50LFBpcGU8VD4uUGlwZUVuZHBvaW50Pj4ocGlwZWVuZHBvaW50cy5WYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoRGljdGlvbmFyeTxpbnQsIFBpcGU8VD4uUGlwZUVuZHBvaW50PiBlbmRwb2ludHMyIGluIGVuZHBvaW50czEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUGlwZTxUPi5QaXBlRW5kcG9pbnRbXSBlbmRwb2ludHMzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PFBpcGU8VD4uUGlwZUVuZHBvaW50PihlbmRwb2ludHMyLlZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoUGlwZTxUPi5QaXBlRW5kcG9pbnQgZW5kcG9pbnQgaW4gZW5kcG9pbnRzMylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludC5DbG9zZSgpLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnRzMi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwaXBlZW5kcG9pbnRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgRGVsZXRlRW5kcG9pbnQoUGlwZUVuZHBvaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChwaXBlZW5kcG9pbnRsb2NrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwaXBlZW5kcG9pbnRzW2UuRW5kcG9pbnRdLlJlbW92ZShlLkluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIG9iamVjdCBQYWNrVmFyVHlwZShvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBza2VsLlJSQ29udGV4dC5QYWNrVmFyVHlwZShvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBvYmplY3QgVW5wYWNrVmFyVHlwZShNZXNzYWdlRWxlbWVudCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNrZWwuUlJDb250ZXh0LlVucGFja1ZhclR5cGUobyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBQaXBlQnJvYWRjYXN0ZXI8VD5cclxuICAgIHtcclxuICAgICAgICBwcm90ZWN0ZWQgUGlwZTxUPiBwaXBlO1xyXG4gICAgICAgIHByb3RlY3RlZCBMaXN0PGNvbm5lY3RlZF9lbmRwb2ludD4gZW5kcG9pbnRzID0gbmV3IExpc3Q8Y29ubmVjdGVkX2VuZHBvaW50PigpO1xyXG4gICAgICAgIHByb3RlY3RlZCBpbnQgbWF4aW11bV9iYWNrbG9nO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY2xhc3MgY29ubmVjdGVkX2VuZHBvaW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgUGlwZTxUPi5QaXBlRW5kcG9pbnQgZXA7XHJcbiAgICAgICAgICAgIHB1YmxpYyBMaXN0PHVpbnQ+IGJhY2tsb2cgPSBuZXcgTGlzdDx1aW50PigpO1xyXG4gICAgICAgICAgICBwdWJsaWMgTGlzdDx1aW50PiBmb3J3YXJkX2JhY2tsb2cgPSBuZXcgTGlzdDx1aW50PigpO1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBzZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHB1YmxpYyBMaXN0PG9iamVjdD4gYWN0aXZlX3NlbmRzID0gbmV3IExpc3Q8b2JqZWN0PigpO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIGNvbm5lY3RlZF9lbmRwb2ludChQaXBlPFQ+LlBpcGVFbmRwb2ludCBlcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lcCA9IGVwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUGlwZTxUPiBQaXBlIHtcclxuICAgIGdldFxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiAoUGlwZTxUPilwaXBlO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuICAgICAgICBwdWJsaWMgUGlwZUJyb2FkY2FzdGVyKFBpcGU8VD4gcGlwZSwgaW50IG1heGltdW1fYmFja2xvZyA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5waXBlID0gcGlwZTtcclxuICAgICAgICAgICAgdGhpcy5tYXhpbXVtX2JhY2tsb2cgPSBtYXhpbXVtX2JhY2tsb2c7XHJcbiAgICAgICAgICAgIHBpcGUuUGlwZUNvbm5lY3RDYWxsYmFjayA9IEVuZHBvaW50Q29ubmVjdGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgRW5kcG9pbnRDb25uZWN0ZWQoUGlwZTxUPi5QaXBlRW5kcG9pbnQgZXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChlbmRwb2ludHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9lbmRwb2ludCBjZXAgPSBuZXcgY29ubmVjdGVkX2VuZHBvaW50KGVwKTtcclxuICAgICAgICAgICAgICAgIGVwLlBpcGVDbG9zZUNhbGxiYWNrID0gZGVsZWdhdGUoUGlwZTxUPi5QaXBlRW5kcG9pbnQgZXAxKSB7IEVuZHBvaW50Q2xvc2VkKGNlcCk7IH07XHJcbiAgICAgICAgICAgICAgICBlcC5QYWNrZXRSZWNlaXZlZEV2ZW50ICs9IFBhY2tldFJlY2VpdmVkO1xyXG4gICAgICAgICAgICAgICAgZXAuUGFja2V0QWNrUmVjZWl2ZWRFdmVudCArPSBkZWxlZ2F0ZShQaXBlPFQ+LlBpcGVFbmRwb2ludCBlcDEsIHVpbnQgcG51bSkgeyBQYWNrZXRBY2tSZWNlaXZlZChjZXAsIHBudW0pOyB9O1xyXG4gICAgICAgICAgICAgICAgZXAuUmVxdWVzdFBhY2tldEFjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludHMuQWRkKGNlcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIEVuZHBvaW50Q2xvc2VkKGNvbm5lY3RlZF9lbmRwb2ludCBlcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKGVuZHBvaW50cylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZHBvaW50cy5SZW1vdmUoZXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIFBhY2tldFJlY2VpdmVkKFBpcGU8VD4uUGlwZUVuZHBvaW50IGVwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9SZWNlaXZlIHBhY2tldHMgYW5kIGRpc2NhcmQuXHJcbiAgICAgICAgICAgIGxvY2sgKGVuZHBvaW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGVwLkF2YWlsYWJsZSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcC5SZWNlaXZlUGFja2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIFBhY2tldEFja1JlY2VpdmVkKGNvbm5lY3RlZF9lbmRwb2ludCBlcCwgdWludCBwbnVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDx1aW50PihlcC5iYWNrbG9nLChGdW5jPHVpbnQsYm9vbD4pKHggPT4geCA9PSBwbnVtKSkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwLmZvcndhcmRfYmFja2xvZy5BZGQocG51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwLmJhY2tsb2cuUmVtb3ZlKHBudW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBBc3luY1NlbmRQYWNrZXQoVCBwYWNrZXQsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbD1kZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8Y29ubmVjdGVkX2VuZHBvaW50PiBlbmRwb2ludHMxID0gbmV3IExpc3Q8Y29ubmVjdGVkX2VuZHBvaW50PigpO1xyXG4gICAgICAgICAgICBsb2NrIChlbmRwb2ludHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50cy5Gb3JFYWNoKChBY3Rpb248UGlwZUJyb2FkY2FzdGVyPFQ+LmNvbm5lY3RlZF9lbmRwb2ludD4pKGl0ZW0gPT4gZW5kcG9pbnRzMS5BZGQoaXRlbSkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVwcz1uZXcgTGlzdDxUdXBsZTxUYXNrPHVpbnQ+LGNvbm5lY3RlZF9lbmRwb2ludCxvYmplY3Q+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoY29ubmVjdGVkX2VuZHBvaW50IGNlcCBpbiBlbmRwb2ludHMxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBQaXBlPFQ+LlBpcGVFbmRwb2ludCBlcCA9IGNlcC5lcCBhcyBQaXBlPFQ+LlBpcGVFbmRwb2ludDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXAgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKGVuZHBvaW50cylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnRzLlJlbW92ZShjZXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKGVuZHBvaW50cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXhpbXVtX2JhY2tsb2cgIT0gLTEgJiYgY2VwLmJhY2tsb2cuQ291bnQgKyBjZXAuYWN0aXZlX3NlbmRzLkNvdW50ID4gbWF4aW11bV9iYWNrbG9nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGVwLlNlbmRQYWNrZXQocGFja2V0LCBjYW5jZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZW5kX2tleSA9IG5ldyBvYmplY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jayAoZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VwLmFjdGl2ZV9zZW5kcy5BZGQoc2VuZF9rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlcHMuQWRkKFR1cGxlLkNyZWF0ZTxUYXNrPHVpbnQ+LFBpcGVCcm9hZGNhc3RlcjxUPi5jb25uZWN0ZWRfZW5kcG9pbnQsb2JqZWN0Pih0LGNlcCxzZW5kX2tleSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChlcHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBUYXNrLldoZW5Bbnk8dWludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8VHVwbGU8VGFzazx1aW50PixQaXBlQnJvYWRjYXN0ZXI8VD4uY29ubmVjdGVkX2VuZHBvaW50LG9iamVjdD4sVGFzazx1aW50Pj4oZXBzLChGdW5jPFR1cGxlPFRhc2s8dWludD4sUGlwZUJyb2FkY2FzdGVyPFQ+LmNvbm5lY3RlZF9lbmRwb2ludCxvYmplY3Q+LFRhc2s8dWludD4+KSh4ID0+IHguSXRlbTEpKS5Ub0FycmF5KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZXBzLkNvdW50OyApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQ9ZXBzW2ldLkl0ZW0xO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjZXAxID0gZXBzW2ldLkl0ZW0yO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0LklzQ29tcGxldGVkIHx8IHQuSXNGYXVsdGVkIHx8IHQuSXNDYW5jZWxlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IHBudW0gPSBhd2FpdCB0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jayAoZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlcDEuYWN0aXZlX3NlbmRzLlJlbW92ZShlcHNbaV0uSXRlbTMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXhpbXVtX2JhY2tsb2cgIT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PHVpbnQ+KGNlcDEuZm9yd2FyZF9iYWNrbG9nLChGdW5jPHVpbnQsYm9vbD4pKHggPT4geCA9PSBwbnVtKSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VwMS5mb3J3YXJkX2JhY2tsb2cuUmVtb3ZlKHBudW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VwMS5iYWNrbG9nLkFkZChwbnVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jayAoZW5kcG9pbnRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50cy5SZW1vdmUoY2VwMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwcy5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBSb2JvdFJhY29udGV1cldlYi5FeHRlbnNpb25zO1xyXG5cclxubmFtZXNwYWNlIFJvYm90UmFjb250ZXVyV2ViXHJcbnsgICAgXHJcbiAgICBwdWJsaWMgaW50ZXJmYWNlIElTdHJ1Y3R1cmVTdHViXHJcbiAgICB7ICAgICAgICBcclxuICAgICAgICBNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSBQYWNrU3RydWN0dXJlKE9iamVjdCBzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIFQgVW5wYWNrU3RydWN0dXJlPFQ+KE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIG0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbnRlcmZhY2UgSVBvZFN0dWJcclxuICAgIHtcclxuICAgICAgICBvYmplY3QgUGFja1BvZChvYmplY3Qgcyk7XHJcblxyXG4gICAgICAgIG9iamVjdCBVbnBhY2tQb2Qob2JqZWN0IG0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBQb2RTdHViPFQ+IDogSVBvZFN0dWIgd2hlcmUgVCA6IHN0cnVjdFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBNZXNzYWdlRWxlbWVudFBvZCBQYWNrUG9kKHJlZiBUIHMpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgVCBVbnBhY2tQb2QoTWVzc2FnZUVsZW1lbnRQb2QgbSk7XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBNZXNzYWdlRWxlbWVudFBvZEFycmF5IFBhY2tQb2RUb0FycmF5KHJlZiBUIHMyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1tID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50VXRpbC5BZGRNZXNzYWdlRWxlbWVudChtbSxcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50VXRpbC5OZXdNZXNzYWdlRWxlbWVudCgwLCBQYWNrUG9kKHJlZiBzMikpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkoVHlwZU5hbWUsIG1tKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkgUGFja1BvZEFycmF5KFRbXSBzMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzMiA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciBtbSA9IG5ldyBMaXN0PE1lc3NhZ2VFbGVtZW50PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHMyLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRWxlbWVudFV0aWwuQWRkTWVzc2FnZUVsZW1lbnQobW0sXHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnRVdGlsLk5ld01lc3NhZ2VFbGVtZW50KGksIFBhY2tQb2QocmVmIHMyW2ldKSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWVzc2FnZUVsZW1lbnRQb2RBcnJheShUeXBlTmFtZSwgbW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgTWVzc2FnZUVsZW1lbnRQb2RNdWx0aURpbUFycmF5IFBhY2tQb2RNdWx0aURpbUFycmF5KFBvZE11bHRpRGltQXJyYXkgczMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoczMgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHZhciBsID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50VXRpbC5BZGRNZXNzYWdlRWxlbWVudChsLCBcImRpbXNcIiwgczMuRGltcyk7XHJcbiAgICAgICAgICAgIHZhciBzNCA9IFBhY2tQb2RBcnJheSgoVFtdKXMzLnBvZF9hcnJheSk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50VXRpbC5BZGRNZXNzYWdlRWxlbWVudChsLCBcImFycmF5XCIsIHM0KTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlRWxlbWVudFBvZE11bHRpRGltQXJyYXkoVHlwZU5hbWUsIGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgVCBVbnBhY2tQb2RGcm9tQXJyYXkoTWVzc2FnZUVsZW1lbnRQb2RBcnJheSBzMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzMi5UeXBlICE9IFR5cGVOYW1lKSB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJwb2QgdHlwZSBtaXNtYXRjaFwiKTtcclxuICAgICAgICAgICAgdmFyIGNkYXRhRWxlbWVudHMgPSBzMi5FbGVtZW50cztcclxuICAgICAgICAgICAgaWYgKGNkYXRhRWxlbWVudHMuQ291bnQgIT0gMSkgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwicG9kIHR5cGUgbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgIHZhciBlID0gY2RhdGFFbGVtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKDAgIT0gTWVzc2FnZUVsZW1lbnRVdGlsLkdldE1lc3NhZ2VFbGVtZW50TnVtYmVyKGUpKSB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJFcnJvciBpbiBsaXN0IGZvcm1hdFwiKTtcclxuICAgICAgICAgICAgdmFyIG1kID0gKE1lc3NhZ2VFbGVtZW50UG9kKWUuRGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIFVucGFja1BvZChtZCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgVFtdIFVucGFja1BvZEFycmF5KE1lc3NhZ2VFbGVtZW50UG9kQXJyYXkgczIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoczIuVHlwZSAhPSBUeXBlTmFtZSkgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwicG9kIHR5cGUgbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgIGludCBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjZGF0YUVsZW1lbnRzID0gczIuRWxlbWVudHM7XHJcbiAgICAgICAgICAgICAgICBUW10gbyA9IG5ldyBUW2NkYXRhRWxlbWVudHMuQ291bnRdO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoTWVzc2FnZUVsZW1lbnQgZSBpbiBjZGF0YUVsZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCAhPSBNZXNzYWdlRWxlbWVudFV0aWwuR2V0TWVzc2FnZUVsZW1lbnROdW1iZXIoZSkpIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIkVycm9yIGluIGxpc3QgZm9ybWF0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9bY291bnRdID0gVW5wYWNrUG9kKChNZXNzYWdlRWxlbWVudFBvZCllLkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgUG9kTXVsdGlEaW1BcnJheSBVbnBhY2tQb2RNdWx0aURpbUFycmF5KE1lc3NhZ2VFbGVtZW50UG9kTXVsdGlEaW1BcnJheSBzMylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzMy5UeXBlICE9IFR5cGVOYW1lKSB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJwb2QgdHlwZSBtaXNtYXRjaFwiKTtcclxuICAgICAgICAgICAgdmFyIG8gPSBuZXcgUG9kTXVsdGlEaW1BcnJheSgpO1xyXG4gICAgICAgICAgICB2YXIgbWFycmF5RWxlbWVudHMgPSBzMy5FbGVtZW50cztcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgby5EaW1zID0gKE1lc3NhZ2VFbGVtZW50VXRpbC5GaW5kRWxlbWVudEFuZENhc3Q8dWludFtdPihtYXJyYXlFbGVtZW50cywgXCJkaW1zXCIpKTtcclxuICAgICAgICAgICAgICAgIHZhciBzMiA9IChNZXNzYWdlRWxlbWVudFV0aWwuRmluZEVsZW1lbnRBbmRDYXN0PE1lc3NhZ2VFbGVtZW50UG9kQXJyYXk+KG1hcnJheUVsZW1lbnRzLCBcImFycmF5XCIpKTtcclxuICAgICAgICAgICAgICAgIG8ucG9kX2FycmF5ID0gVW5wYWNrUG9kQXJyYXkoczIpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBQYWNrUG9kKG9iamVjdCBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHMgaXMgVClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVCBzMiA9IChUKXM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFja1BvZFRvQXJyYXkocmVmIHMyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHMzID0gcyBhcyBUW107XHJcbiAgICAgICAgICAgIGlmIChzMyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFja1BvZEFycmF5KHMzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHM0ID0gcyBhcyBQb2RNdWx0aURpbUFycmF5O1xyXG4gICAgICAgICAgICBpZiAoczQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhY2tQb2RNdWx0aURpbUFycmF5KHM0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiVW5leHBlY3RlZCBtZXNzYWdlIGVsZW1lbnQgdHlwZSBmb3IgUGFja1BvZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFVucGFja1BvZChvYmplY3QgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8qdmFyIG0yID0gbSBhcyBNZXNzYWdlRWxlbWVudFBvZDtcclxuICAgICAgICAgICAgaWYgKG0yICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVucGFja1BvZChtMik7ICAgICAgICAgICBcclxuICAgICAgICAgICAgfSovXHJcblxyXG4gICAgICAgICAgICB2YXIgbTMgPSBtIGFzIE1lc3NhZ2VFbGVtZW50UG9kQXJyYXk7XHJcbiAgICAgICAgICAgIGlmIChtMyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVW5wYWNrUG9kQXJyYXkobTMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbTQgPSBtIGFzIE1lc3NhZ2VFbGVtZW50UG9kTXVsdGlEaW1BcnJheTtcclxuICAgICAgICAgICAgaWYgKG00ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBVbnBhY2tQb2RNdWx0aURpbUFycmF5KG00KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiVW5leHBlY3RlZCBtZXNzYWdlIGVsZW1lbnQgdHlwZSBmb3IgVW5wYWNrUG9kXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IHN0cmluZyBUeXBlTmFtZSB7IGdldDsgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBSb2JvdFJhY29udGV1clNlcnZpY2VQb2QgOiBTeXN0ZW0uQXR0cmlidXRlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFJvYm90UmFjb250ZXVyU2VydmljZVBvZChzdHJpbmcgcnJfdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFJSVHlwZSA9IHJyX3R5cGU7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJSVHlwZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgUm9ib3RSYWNvbnRldXJOYW1lZEFycmF5RWxlbWVudFR5cGVBbmRDb3VudCA6IFN5c3RlbS5BdHRyaWJ1dGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgUm9ib3RSYWNvbnRldXJOYW1lZEFycmF5RWxlbWVudFR5cGVBbmRDb3VudChzdHJpbmcgcnJfdHlwZSwgVHlwZSBlbGVtZW50X3R5cGUsIGludCBlbGVtZW50X2FycmF5X2NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUlJUeXBlID0gcnJfdHlwZTtcclxuICAgICAgICAgICAgRWxlbWVudEFycmF5VHlwZSA9IGVsZW1lbnRfdHlwZTtcclxuICAgICAgICAgICAgRWxlbWVudEFycmF5Q291bnQgPSBlbGVtZW50X2FycmF5X2NvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSUlR5cGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFR5cGUgRWxlbWVudEFycmF5VHlwZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEVsZW1lbnRBcnJheUNvdW50IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW50ZXJmYWNlIElOYW1lZEFycmF5U3R1YlxyXG4gICAge1xyXG4gICAgICAgIG9iamVjdCBQYWNrTmFtZWRBcnJheShvYmplY3Qgcyk7XHJcblxyXG4gICAgICAgIG9iamVjdCBVbnBhY2tOYW1lZEFycmF5KG9iamVjdCBtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW50ZXJmYWNlIElOYW1lZEFycmF5U3R1YjxUPiA6IElOYW1lZEFycmF5U3R1YlxyXG4gICAge1xyXG4gICAgICAgIE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSBQYWNrTmFtZWRBcnJheVN0cnVjdFRvQXJyYXkocmVmIFQgczIpO1xyXG5cclxuICAgICAgICBNZXNzYWdlRWxlbWVudE5hbWVkQXJyYXkgUGFja05hbWVkQXJyYXkoVFtdIHMyKTtcclxuXHJcbiAgICAgICAgTWVzc2FnZUVsZW1lbnROYW1lZE11bHRpRGltQXJyYXkgUGFja05hbWVkTXVsdGlEaW1BcnJheShOYW1lZE11bHRpRGltQXJyYXkgczMpO1xyXG5cclxuICAgICAgICBUIFVucGFja05hbWVkQXJyYXlTdHJ1Y3RGcm9tQXJyYXkoTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IHMyKTtcclxuXHJcbiAgICAgICAgVFtdIFVucGFja05hbWVkQXJyYXkoTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IHMyKTtcclxuXHJcbiAgICAgICAgTmFtZWRNdWx0aURpbUFycmF5IFVucGFja05hbWVkTXVsdGlEaW1BcnJheShNZXNzYWdlRWxlbWVudE5hbWVkTXVsdGlEaW1BcnJheSBzMyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIE5hbWVkQXJyYXlTdHViPFQsIFU+IDogSU5hbWVkQXJyYXlTdHViPFQ+IHdoZXJlIFQgOiBzdHJ1Y3RcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgVVtdIEdldE51bWVyaWNBcnJheUZyb21OYW1lZEFycmF5U3RydWN0KHJlZiBUIHMpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgVCBHZXROYW1lZEFycmF5U3RydWN0RnJvbU51bWVyaWNBcnJheShVW10gbSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBVW10gR2V0TnVtZXJpY0FycmF5RnJvbU5hbWVkQXJyYXkoVFtdIHMpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgVFtdIEdldE5hbWVkQXJyYXlGcm9tTnVtZXJpY0FycmF5KFVbXSBtKTtcclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSBQYWNrTmFtZWRBcnJheVN0cnVjdFRvQXJyYXkocmVmIFQgczIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbW0gPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKTtcclxuICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnRVdGlsLkFkZE1lc3NhZ2VFbGVtZW50KG1tLFxyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnRVdGlsLk5ld01lc3NhZ2VFbGVtZW50KFwiYXJyYXlcIiwgR2V0TnVtZXJpY0FycmF5RnJvbU5hbWVkQXJyYXlTdHJ1Y3QocmVmIHMyKSlcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheShUeXBlTmFtZSwgbW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IFBhY2tOYW1lZEFycmF5KFRbXSBzMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzMiA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgdmFyIG1tID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50VXRpbC5BZGRNZXNzYWdlRWxlbWVudChtbSxcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50VXRpbC5OZXdNZXNzYWdlRWxlbWVudChcImFycmF5XCIsIEdldE51bWVyaWNBcnJheUZyb21OYW1lZEFycmF5KHMyKSlcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheShUeXBlTmFtZSwgbW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgTWVzc2FnZUVsZW1lbnROYW1lZE11bHRpRGltQXJyYXkgUGFja05hbWVkTXVsdGlEaW1BcnJheShOYW1lZE11bHRpRGltQXJyYXkgczMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoczMgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHZhciBsID0gbmV3IExpc3Q8TWVzc2FnZUVsZW1lbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlRWxlbWVudFV0aWwuQWRkTWVzc2FnZUVsZW1lbnQobCwgXCJkaW1zXCIsIHMzLkRpbXMpO1xyXG4gICAgICAgICAgICBNZXNzYWdlRWxlbWVudFV0aWwuQWRkTWVzc2FnZUVsZW1lbnQobCwgXCJhcnJheVwiLCBQYWNrTmFtZWRBcnJheSgoVFtdKXMzLm5hbWVkYXJyYXlfYXJyYXkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlRWxlbWVudE5hbWVkTXVsdGlEaW1BcnJheShUeXBlTmFtZSwgbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBUIFVucGFja05hbWVkQXJyYXlTdHJ1Y3RGcm9tQXJyYXkoTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5IHMyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHMyLlR5cGUgIT0gVHlwZU5hbWUpIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIm5hbWVkYXJyYXkgdHlwZSBtaXNtYXRjaFwiKTtcclxuICAgICAgICAgICAgdmFyIGNkYXRhRWxlbWVudHMgPSBzMi5FbGVtZW50cztcclxuICAgICAgICAgICAgaWYgKGNkYXRhRWxlbWVudHMuQ291bnQgIT0gMSkgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwicG9kIHR5cGUgbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgIHZhciBhID0gTWVzc2FnZUVsZW1lbnRVdGlsLkZpbmRFbGVtZW50QW5kQ2FzdDxVW10+KGNkYXRhRWxlbWVudHMsIFwiYXJyYXlcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXROYW1lZEFycmF5U3RydWN0RnJvbU51bWVyaWNBcnJheShhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIFRbXSBVbnBhY2tOYW1lZEFycmF5KE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheSBzMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzMi5UeXBlICE9IFR5cGVOYW1lKSB0aHJvdyBuZXcgRGF0YVR5cGVFeGNlcHRpb24oXCJuYW1lZGFycmF5IHR5cGUgbWlzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgIHZhciBjZGF0YUVsZW1lbnRzID0gczIuRWxlbWVudHM7XHJcbiAgICAgICAgICAgIGlmIChjZGF0YUVsZW1lbnRzLkNvdW50ICE9IDEpIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcInBvZCB0eXBlIG1pc21hdGNoXCIpO1xyXG4gICAgICAgICAgICB2YXIgYSA9IE1lc3NhZ2VFbGVtZW50VXRpbC5GaW5kRWxlbWVudEFuZENhc3Q8VVtdPihjZGF0YUVsZW1lbnRzLCBcImFycmF5XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0TmFtZWRBcnJheUZyb21OdW1lcmljQXJyYXkoYSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBOYW1lZE11bHRpRGltQXJyYXkgVW5wYWNrTmFtZWRNdWx0aURpbUFycmF5KE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5IHMzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHMzLlR5cGUgIT0gVHlwZU5hbWUpIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcInBvZCB0eXBlIG1pc21hdGNoXCIpO1xyXG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBOYW1lZE11bHRpRGltQXJyYXkoKTtcclxuICAgICAgICAgICAgdmFyIG1hcnJheUVsZW1lbnRzID0gczMuRWxlbWVudHM7XHJcbiAgICAgICAgICAgIG8uRGltcyA9IChNZXNzYWdlRWxlbWVudFV0aWwuRmluZEVsZW1lbnRBbmRDYXN0PHVpbnRbXT4obWFycmF5RWxlbWVudHMsIFwiZGltc1wiKSk7XHJcbiAgICAgICAgICAgIHZhciBzMiA9IChNZXNzYWdlRWxlbWVudFV0aWwuRmluZEVsZW1lbnRBbmRDYXN0PE1lc3NhZ2VFbGVtZW50TmFtZWRBcnJheT4obWFycmF5RWxlbWVudHMsIFwiYXJyYXlcIikpO1xyXG4gICAgICAgICAgICBvLm5hbWVkYXJyYXlfYXJyYXkgPSBVbnBhY2tOYW1lZEFycmF5KHMyKTtcclxuICAgICAgICAgICAgcmV0dXJuIG87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBvYmplY3QgUGFja05hbWVkQXJyYXkob2JqZWN0IHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocyBpcyBUKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUIHMyID0gKFQpcztcclxuICAgICAgICAgICAgICAgIHJldHVybiBQYWNrTmFtZWRBcnJheVN0cnVjdFRvQXJyYXkocmVmIHMyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHMzID0gcyBhcyBUW107XHJcbiAgICAgICAgICAgIGlmIChzMyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFja05hbWVkQXJyYXkoczMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgczQgPSBzIGFzIE5hbWVkTXVsdGlEaW1BcnJheTtcclxuICAgICAgICAgICAgaWYgKHM0ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQYWNrTmFtZWRNdWx0aURpbUFycmF5KHM0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiVW5leHBlY3RlZCBtZXNzYWdlIGVsZW1lbnQgdHlwZSBmb3IgUGFja05hbWVkQXJyYXlcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIG9iamVjdCBVbnBhY2tOYW1lZEFycmF5KG9iamVjdCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLyp2YXIgbTIgPSBtIGFzIE1lc3NhZ2VFbGVtZW50UG9kO1xyXG4gICAgICAgICAgICBpZiAobTIgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVW5wYWNrUG9kKG0yKTsgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgICAgIHZhciBtMyA9IG0gYXMgTWVzc2FnZUVsZW1lbnROYW1lZEFycmF5O1xyXG4gICAgICAgICAgICBpZiAobTMgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVucGFja05hbWVkQXJyYXkobTMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbTQgPSBtIGFzIE1lc3NhZ2VFbGVtZW50TmFtZWRNdWx0aURpbUFycmF5O1xyXG4gICAgICAgICAgICBpZiAobTQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVucGFja05hbWVkTXVsdGlEaW1BcnJheShtNCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIlVuZXhwZWN0ZWQgbWVzc2FnZSBlbGVtZW50IHR5cGUgZm9yIFVucGFja05hbWVkQXJyYXlcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3Qgc3RyaW5nIFR5cGVOYW1lIHsgZ2V0OyB9XHJcbiAgICB9XHJcblxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uTmV0LldlYlNvY2tldHM7XHJcbnVzaW5nIFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYlxyXG57XHJcbiAgICBwdWJsaWMgc2VhbGVkIGNsYXNzIEJyb3dzZXJXZWJTb2NrZXRUcmFuc3BvcnQgOiBUcmFuc3BvcnRcclxuICAgIHtcclxuXHJcbiAgICAgICAgLy9wcm90ZWN0ZWQgaW50IFBvcnQge2dldCB7cmV0dXJuIG1fUG9ydDt9fVxyXG4gICAgICAgIHByaXZhdGUgaW50IG1fUG9ydDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIHRyYW5zcG9ydG9wZW4gPSBmYWxzZTtcclxuICAgICAgICBwcml2YXRlIENhbmNlbGxhdGlvblRva2VuU291cmNlIHRyYW5zcG9ydGNhbmNlbCA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBJc1NlcnZlciB7IGdldCB7IHJldHVybiB0cnVlOyB9IH1cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBJc0NsaWVudCB7IGdldCB7IHJldHVybiB0cnVlOyB9IH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgRGljdGlvbmFyeTx1aW50LCBBc3luY1N0cmVhbVRyYW5zcG9ydD4gVHJhbnNwb3J0Q29ubmVjdGlvbnMgPSBuZXcgRGljdGlvbmFyeTx1aW50LCBBc3luY1N0cmVhbVRyYW5zcG9ydD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZWZhdWx0UmVjZWl2ZVRpbWVvdXQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVmYXVsdENvbm5lY3RUaW1lb3V0IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQWNjZXB0V2ViU29ja2V0cyB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmdbXSBVcmxTY2hlbWVTdHJpbmcgeyBnZXQgeyByZXR1cm4gbmV3IHN0cmluZ1tdIHsgXCJ0Y3BcIiwgXCJycit0Y3BcIiwgXCJycit3c1wiLCBcInJyK3dzc1wifTsgfSB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IG1fSGVhcnRiZWF0UGVyaW9kID0gNTAwMDtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBIZWFydGJlYXRQZXJpb2RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbV9IZWFydGJlYXRQZXJpb2Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDUwMCkgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oKTtcclxuICAgICAgICAgICAgICAgIG1fSGVhcnRiZWF0UGVyaW9kID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIEJyb3dzZXJXZWJTb2NrZXRUcmFuc3BvcnQoUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUgPSBudWxsKSA6IGJhc2Uobm9kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIERlZmF1bHRSZWNlaXZlVGltZW91dCA9IDE1MDAwO1xyXG4gICAgICAgICAgICBEZWZhdWx0Q29ubmVjdFRpbWVvdXQgPSAyNTAwO1xyXG4gICAgICAgICAgICBwYXJlbnRfYWRhcHRlciA9IG5ldyBBc3luY1N0cmVhbVRyYW5zcG9ydFBhcmVudEltcGwodGhpcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrPElUcmFuc3BvcnRDb25uZWN0aW9uPiBDcmVhdGVUcmFuc3BvcnRDb25uZWN0aW9uKHN0cmluZyB1cmwsIEVuZHBvaW50IGUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJyb3dzZXJXZWJTb2NrZXRDbGllbnRUcmFuc3BvcnQgcCA9IG5ldyBCcm93c2VyV2ViU29ja2V0Q2xpZW50VHJhbnNwb3J0KHRoaXMpO1xyXG4gICAgICAgICAgICBwLlJlY2VpdmVUaW1lb3V0ID0gRGVmYXVsdFJlY2VpdmVUaW1lb3V0O1xyXG4gICAgICAgICAgICBhd2FpdCBwLkNvbm5lY3RUcmFuc3BvcnQodXJsLCBlLCBjYW5jZWwpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgVGFzayBDbG9zZVRyYW5zcG9ydENvbm5lY3Rpb24oRW5kcG9pbnQgZSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFRyYW5zcG9ydENvbm5lY3Rpb25zLkNvbnRhaW5zS2V5KGUuTG9jYWxFbmRwb2ludCkpXHJcbiAgICAgICAgICAgICAgICBUcmFuc3BvcnRDb25uZWN0aW9uc1tlLkxvY2FsRW5kcG9pbnRdLkNsb3NlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8aW50PigwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIENhbkNvbm5lY3RTZXJ2aWNlKHN0cmluZyB1cmwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdSA9IFRyYW5zcG9ydFV0aWwuUGFyc2VDb25uZWN0aW9uVXJsKHVybCk7XHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uQXJyYXlFeHRlbnNpb25zLkNvbnRhaW5zPHN0cmluZz4oVXJsU2NoZW1lU3RyaW5nLHUuc2NoZW1lKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAvL2lmICh1Lkhvc3QgIT0gXCJsb2NhbGhvc3RcIikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGFzeW5jIFRhc2sgU2VuZE1lc3NhZ2UoTWVzc2FnZSBtLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobS5oZWFkZXIuU2VuZGVyTm9kZUlEICE9IG5vZGUuTm9kZUlEKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9kZU5vdEZvdW5kRXhjZXB0aW9uKFwiSW52YWxpZCBzZW5kZXIgbm9kZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgVHJhbnNwb3J0Q29ubmVjdGlvbnNbbS5oZWFkZXIuU2VuZGVyRW5kcG9pbnRdLlNlbmRNZXNzYWdlKG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEtleU5vdEZvdW5kRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIkNvbm5lY3Rpb24gdG8gcmVtb3RlIG5vZGUgaGFzIGJlZW4gY2xvc2VkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIG92ZXJyaWRlIHZvaWQgTWVzc2FnZVJlY2VpdmVkKE1lc3NhZ2UgbSlcclxuICAgICAgICB7XHJcblxyXG5cclxuICAgICAgICAgICAgbm9kZS5NZXNzYWdlUmVjZWl2ZWQobSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2sgQ2xvc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJhbnNwb3J0b3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0cmFuc3BvcnRjYW5jZWwuQ2FuY2VsKCk7XHJcblxyXG4gICAgICAgICAgICBBc3luY1N0cmVhbVRyYW5zcG9ydFtdIGNjID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PEFzeW5jU3RyZWFtVHJhbnNwb3J0PihUcmFuc3BvcnRDb25uZWN0aW9ucy5WYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoQXN5bmNTdHJlYW1UcmFuc3BvcnQgYyBpbiBjYylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIFRyYW5zcG9ydENvbm5lY3Rpb25zLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB9XHJcblxyXG4gICAgICAgICAgICBiYXNlLkNsb3NlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBDaGVja0Nvbm5lY3Rpb24odWludCBlbmRwb2ludClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUcmFuc3BvcnRDb25uZWN0aW9uc1tlbmRwb2ludF0uQ2hlY2tDb25uZWN0aW9uKGVuZHBvaW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoS2V5Tm90Rm91bmRFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiVHJhbnNwb3J0IG5vdCBjb25uZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFJlbW92ZVRyYW5zcG9ydENvbm5lY3Rpb24odWludCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVHJhbnNwb3J0Q29ubmVjdGlvbnMuUmVtb3ZlKGUpO1xyXG5cclxuICAgICAgICAgICAgRmlyZVRyYW5zcG9ydEV2ZW50TGlzdGVuZXIoVHJhbnNwb3J0TGlzdGVuZXJFdmVudFR5cGUuVHJhbnNwb3J0Q29ubmVjdGlvbkNsb3NlZCwgZSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHVpbnQgVHJhbnNwb3J0Q2FwYWJpbGl0eShzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlLlRyYW5zcG9ydENhcGFiaWxpdHkobmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNsYXNzIEFzeW5jU3RyZWFtVHJhbnNwb3J0UGFyZW50SW1wbCA6IEFzeW5jU3RyZWFtVHJhbnNwb3J0UGFyZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCcm93c2VyV2ViU29ja2V0VHJhbnNwb3J0IHBhcmVudDtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBBc3luY1N0cmVhbVRyYW5zcG9ydFBhcmVudEltcGwoQnJvd3NlcldlYlNvY2tldFRyYW5zcG9ydCBwYXJlbnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgVGFzazxNZXNzYWdlPiBTcGVjaWFsUmVxdWVzdChNZXNzYWdlIG0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQuU3BlY2lhbFJlcXVlc3QobSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBUYXNrIE1lc3NhZ2VSZWNlaXZlZChNZXNzYWdlIG0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5NZXNzYWdlUmVjZWl2ZWQobSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIEFkZFRyYW5zcG9ydENvbm5lY3Rpb24odWludCBlbmRwb2ludCwgQXN5bmNTdHJlYW1UcmFuc3BvcnQgdHJhbnNwb3J0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChwYXJlbnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LlRyYW5zcG9ydENvbm5lY3Rpb25zLkFkZChlbmRwb2ludCwgdHJhbnNwb3J0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgUmVtb3ZlVHJhbnNwb3J0Q29ubmVjdGlvbihBc3luY1N0cmVhbVRyYW5zcG9ydCB0cmFuc3BvcnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKHBhcmVudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuVHJhbnNwb3J0Q29ubmVjdGlvbnMuUmVtb3ZlKHRyYW5zcG9ydC5Mb2NhbEVuZHBvaW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCByZWFkb25seSBBc3luY1N0cmVhbVRyYW5zcG9ydFBhcmVudCBwYXJlbnRfYWRhcHRlcjtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBzZWFsZWQgY2xhc3MgQnJvd3NlcldlYlNvY2tldENsaWVudFRyYW5zcG9ydCA6IEFzeW5jU3RyZWFtVHJhbnNwb3J0XHJcbiAgICB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgQ2xpZW50V2ViU29ja2V0IHdlYnNvY2tldDtcclxuICAgICAgICAvL3B1YmxpYyBOZXR3b3JrU3RyZWFtIG5ldHN0cmVhbTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBCcm93c2VyV2ViU29ja2V0VHJhbnNwb3J0IHBhcmVudHRyYW5zcG9ydDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBEYXRlVGltZSBMYXN0TWVzc2FnZVJlY2VpdmVkVGltZSA9IERhdGVUaW1lLlV0Y05vdztcclxuXHJcbiAgICAgICAgcHVibGljIEJyb3dzZXJXZWJTb2NrZXRDbGllbnRUcmFuc3BvcnQoQnJvd3NlcldlYlNvY2tldFRyYW5zcG9ydCBjKSA6IGJhc2UoYy5ub2RlLCBjLnBhcmVudF9hZGFwdGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGFyZW50dHJhbnNwb3J0ID0gYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIGNvbm5lY3R1cmwgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBDb25uZWN0VHJhbnNwb3J0KHN0cmluZyB1cmwsIEVuZHBvaW50IGUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0dXJsID0gdXJsO1xyXG5cclxuICAgICAgICAgICAgdmFyIHUgPSBUcmFuc3BvcnRVdGlsLlBhcnNlQ29ubmVjdGlvblVybCh1cmwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHUuaG9zdCA9PSBcIlwiKSB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgY29ubmVjdGlvbiBVUkwgZm9yIFRDUFwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IENvbm5lY3RXZWJzb2NrZXRUcmFuc3BvcnQodXJsLCBlLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFzeW5jIFRhc2sgQ29ubmVjdFdlYnNvY2tldFRyYW5zcG9ydChzdHJpbmcgdXJsLCBFbmRwb2ludCBlLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB1ID0gVHJhbnNwb3J0VXRpbC5QYXJzZUNvbm5lY3Rpb25VcmwodXJsKTtcclxuICAgICAgICAgICAgLypVcmkgdSA9IG5ldyBVcmkodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN0cmluZyBhcCA9IFVyaS5VbmVzY2FwZURhdGFTdHJpbmcodS5BYnNvbHV0ZVBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoYXBbMF0gPT0gJy8nKVxyXG4gICAgICAgICAgICAgICAgYXAgPSBhcC5SZW1vdmUoMCwgMSk7XHJcblxyXG4gICAgICAgICAgICBzdHJpbmdbXSBzID0gYXAuU3BsaXQobmV3IGNoYXJbXSB7ICcvJyB9LCBTdHJpbmdTcGxpdE9wdGlvbnMuUmVtb3ZlRW1wdHlFbnRyaWVzKTsqL1xyXG5cclxuICAgICAgICAgICAgc3RyaW5nIGh0dHBfc2NoZW1lID0gXCJ3c1wiO1xyXG4gICAgICAgICAgICBpZiAodS5zY2hlbWUuRW5kc1dpdGgoXCJ3c3NcIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGh0dHBfc2NoZW1lID0gXCJ3c3NcIjtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgdmFyIHUyID0gbmV3IFVyaSh1cmwuUmVwbGFjZUZpcnN0KHUuc2NoZW1lICsgXCI6Ly9cIiwgaHR0cF9zY2hlbWUgKyBcIjovL1wiKSk7XHJcblxyXG5cclxuICAgICAgICAgICAgTm9kZUlEIHRhcmdldF9ub2RlaWQgPSBudWxsO1xyXG4gICAgICAgICAgICBzdHJpbmcgdGFyZ2V0X25vZGVuYW1lID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIG1fTG9jYWxFbmRwb2ludCA9IGUuTG9jYWxFbmRwb2ludDtcclxuXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vc29ja2V0ID0gbmV3IFRjcENsaWVudCh1Lkhvc3QsIHUuUG9ydCk7XHJcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIENsaWVudFdlYlNvY2tldCBzb2NrZXQxID0gbmV3IENsaWVudFdlYlNvY2tldCgpO1xyXG4gICAgICAgICAgICAgICAgZHluYW1pYyBzb2NrZXQyID0gc29ja2V0MTtcclxuICAgICAgICAgICAgICAgIHNvY2tldDIub3B0aW9ucy5hZGRTdWJQcm90b2NvbChcInJvYm90cmFjb250ZXVyLnJvYm90cmFjb250ZXVyLmNvbVwiKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNvY2tldDEuQ29ubmVjdEFzeW5jKHUyLCBjYW5jZWwpLkF3YWl0V2l0aFRpbWVvdXQocGFyZW50dHJhbnNwb3J0LkRlZmF1bHRDb25uZWN0VGltZW91dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0ID0gc29ja2V0MTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1fQ29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIHdlYnN0cmVhbSA9IG5ldyBXZWJTb2NrZXRTdHJlYW1XcmFwcGVyKHdlYnNvY2tldCk7XHJcbiAgICAgICAgICAgIGF3YWl0IENvbm5lY3RTdHJlYW0od2Vic3RyZWFtLCBmYWxzZSwgdGFyZ2V0X25vZGVpZCwgdGFyZ2V0X25vZGVuYW1lLCBmYWxzZSwgZmFsc2UsIHBhcmVudHRyYW5zcG9ydC5IZWFydGJlYXRQZXJpb2QsIGNhbmNlbCk7XHJcblxyXG4gICAgICAgICAgICBwYXJlbnR0cmFuc3BvcnQuVHJhbnNwb3J0Q29ubmVjdGlvbnMuQWRkKExvY2FsRW5kcG9pbnQsIHRoaXMpO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldENvbm5lY3Rpb25VUkwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3R1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIFdlYlNvY2tldFN0cmVhbVdyYXBwZXIgOiBTdHJlYW1cclxuICAgIHtcclxuXHJcbiAgICAgICAgQ2xpZW50V2ViU29ja2V0IHdlYnNvY2s7XHJcblxyXG4gICAgICAgIHB1YmxpYyBXZWJTb2NrZXRTdHJlYW1XcmFwcGVyKENsaWVudFdlYlNvY2tldCB3ZWJzb2NrZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3ZWJzb2NrID0gd2Vic29ja2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgQ2FuUmVhZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHRydWU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIENhblNlZWtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgQ2FuV3JpdGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB0cnVlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBGbHVzaCgpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBsb25nIExlbmd0aFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEV4Y2VwdGlvbigpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgbG9uZyBQb3NpdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFeGNlcHRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFzeW5jIFRhc2s8aW50PiBEb0JlZ2luUmVhZChieXRlW10gYnVmZmVyLCBpbnQgb2Zmc2V0LCBpbnQgY291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnVmZmVyMiA9IG5ldyBieXRlW2NvdW50XTtcclxuICAgICAgICAgICAgdmFyIHIgPSBhd2FpdCB3ZWJzb2NrLlJlY2VpdmVBc3luYyhuZXcgQXJyYXlTZWdtZW50PGJ5dGU+KGJ1ZmZlcjIsIDAsIGNvdW50KSwgZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG4gICAgICAgICAgICBpZiAoci5NZXNzYWdlVHlwZSAhPSBXZWJTb2NrZXRNZXNzYWdlVHlwZS5CaW5hcnkpIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkludmFsaWQgd2Vic29ja2V0IG1lc3NhZ2UgdHlwZVwiKTtcclxuICAgICAgICAgICAgQXJyYXkuQ29weShidWZmZXIyLCAwLCBidWZmZXIsIG9mZnNldCwgci5Db3VudCk7XHJcbiAgICAgICAgICAgIHJldHVybiByLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIElBc3luY1Jlc3VsdCBCZWdpblJlYWQoYnl0ZVtdIGJ1ZmZlciwgaW50IG9mZnNldCwgaW50IGNvdW50LCBBc3luY0NhbGxiYWNrIGNhbGxiYWNrLCBvYmplY3Qgc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLkFzQXBtPGludD4oRG9CZWdpblJlYWQoYnVmZmVyLCBvZmZzZXQsIGNvdW50KSwoQXN5bmNDYWxsYmFjayljYWxsYmFjayxzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEVuZFJlYWQoSUFzeW5jUmVzdWx0IGFzeW5jUmVzdWx0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZHluYW1pYyBhc3luY1Jlc3VsdDEgPSBhc3luY1Jlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpYXN5bmNSZXN1bHQxLmdldFJlc3VsdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBUYXNrPGludD4gRG9CZWdpbldyaXRlKGJ5dGVbXSBidWZmZXIsIGludCBvZmZzZXQsIGludCBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA8PSA2NTUzNilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgd2Vic29jay5TZW5kQXN5bmMobmV3IEFycmF5U2VnbWVudDxieXRlPihidWZmZXIsIG9mZnNldCwgY291bnQpLCBXZWJTb2NrZXRNZXNzYWdlVHlwZS5CaW5hcnksIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IHBvcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocG9zIDwgY291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjb3VudCAtIHBvcykgPD0gNjU1MzYpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWJzb2NrLlNlbmRBc3luYyhuZXcgQXJyYXlTZWdtZW50PGJ5dGU+KGJ1ZmZlciwgb2Zmc2V0ICsgcG9zLCBjb3VudCAtIHBvcyksIFdlYlNvY2tldE1lc3NhZ2VUeXBlLkJpbmFyeSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWJzb2NrLlNlbmRBc3luYyhuZXcgQXJyYXlTZWdtZW50PGJ5dGU+KGJ1ZmZlciwgb2Zmc2V0ICsgcG9zLCA2NTUzNiksIFdlYlNvY2tldE1lc3NhZ2VUeXBlLkJpbmFyeSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSA2NTUzNjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIElBc3luY1Jlc3VsdCBCZWdpbldyaXRlKGJ5dGVbXSBidWZmZXIsIGludCBvZmZzZXQsIGludCBjb3VudCwgQXN5bmNDYWxsYmFjayBjYWxsYmFjaywgb2JqZWN0IHN0YXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnMuRXh0ZW5zaW9ucy5Bc0FwbTxpbnQ+KERvQmVnaW5Xcml0ZShidWZmZXIsIG9mZnNldCwgY291bnQpLChBc3luY0NhbGxiYWNrKWNhbGxiYWNrLCBzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBFbmRXcml0ZShJQXN5bmNSZXN1bHQgYXN5bmNSZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbm9vcCA9ICgoVGFzazxpbnQ+KWFzeW5jUmVzdWx0KS5SZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IFJlYWQoYnl0ZVtdIGJ1ZmZlciwgaW50IG9mZnNldCwgaW50IGNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIGZvciBicm93c2VyXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGxvbmcgU2Vlayhsb25nIG9mZnNldCwgU2Vla09yaWdpbiBvcmlnaW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTZXRMZW5ndGgobG9uZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFeGNlcHRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFdyaXRlKGJ5dGVbXSBidWZmZXIsIGludCBvZmZzZXQsIGludCBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBmb3IgYnJvd3NlclwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgQ2xvc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2Vic29jay5DbG9zZUFzeW5jKFdlYlNvY2tldENsb3NlU3RhdHVzLk5vcm1hbENsb3N1cmUsIFwiXCIsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IDIwMTEtMjAxOSBXYXNvbiBUZWNobm9sb2d5LCBMTENcclxuLy9cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy9cclxuLy8gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbi8vXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRleHQuUmVndWxhckV4cHJlc3Npb25zO1xyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnM7XHJcblxyXG5uYW1lc3BhY2UgUm9ib3RSYWNvbnRldXJXZWJcclxue1xyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFdpcmU8VD5cclxuICAgIHtcclxuXHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgV2lyZUNvbm5lY3Rpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBFbmRwb2ludCBlbmRwb2ludDtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB1aW50IEVuZHBvaW50IHsgZ2V0IHsgcmV0dXJuIGVuZHBvaW50LkxvY2FsRW5kcG9pbnQ7IH0gfVxyXG5cclxuICAgICAgICAgICAgcHJvdGVjdGVkIFQgaW52YWw7XHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBib29sIGludmFsX3ZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBUaW1lU3BlYyBsYXN0X3NlbmR0aW1lID0gbmV3IFRpbWVTcGVjKDAsIDApO1xyXG5cclxuICAgICAgICAgICAgcHJvdGVjdGVkIFdpcmU8VD4gcGFyZW50O1xyXG5cclxuICAgICAgICAgICAgcHVibGljIFdpcmVDb25uZWN0aW9uKFdpcmU8VD4gcGFyZW50LCBFbmRwb2ludCBlbmRwb2ludCA9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwcm90ZWN0ZWQgb2JqZWN0IHNlbmRsb2NrID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIHZpcnR1YWwgVCBJblZhbHVlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW52YWxfdmFsaWQpIHRocm93IG5ldyBFeGNlcHRpb24oXCJWYWx1ZSBub3Qgc2V0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJvdGVjdGVkIFQgb3V0dmFsO1xyXG4gICAgICAgICAgICBwcm90ZWN0ZWQgYm9vbCBvdXR2YWxfdmFsaWQ9ZmFsc2U7XHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBUaW1lU3BlYyBsYXN0dGltZV9zZW5kO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIHZpcnR1YWwgVCBPdXRWYWx1ZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW91dHZhbF92YWxpZCkgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlZhbHVlIG5vdCBzZXRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dHZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKHNlbmRsb2NrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGltZVNwZWMgdGltZSA9IFRpbWVTcGVjLk5vdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPT0gbGFzdF9zZW5kdGltZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5uYW5vc2Vjb25kcyArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LlNlbmRXaXJlUGFja2V0KHZhbHVlLCB0aW1lLCBlbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3Rfc2VuZHRpbWUgPSB0aW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXR2YWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0dmFsX3ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdHRpbWVfc2VuZCA9IFRpbWVTcGVjLk5vdztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgdmlydHVhbCBUaW1lU3BlYyBMYXN0VmFsdWVSZWNlaXZlZFRpbWVcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbnZhbF92YWxpZCkgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIk5vIHZhbHVlIHJlY2VpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0dGltZV9yZWN2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgdmlydHVhbCBUaW1lU3BlYyBMYXN0VmFsdWVTZW50VGltZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW91dHZhbF92YWxpZCkgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIk5vIHZhbHVlIHNlbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3R0aW1lX3NlbmQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgdmlydHVhbCBUYXNrIENsb3NlKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5DbG9zZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGV2ZW50IFdpcmVWYWx1ZUNoYW5nZWRGdW5jdGlvbiBXaXJlVmFsdWVDaGFuZ2VkO1xyXG5cclxuICAgICAgICAgICAgcHJpdmF0ZSBvYmplY3QgcmVjdl9sb2NrID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICAgICAgcHJpdmF0ZSBUaW1lU3BlYyBsYXN0dGltZV9yZWN2ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCB2aXJ0dWFsIHZvaWQgV2lyZVBhY2tldFJlY2VpdmVkKFRpbWVTcGVjIHRpbWVzcGVjLCBUIHBhY2tldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAocmVjdl9sb2NrKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3R0aW1lX3JlY3YgPT0gbnVsbCB8fCB0aW1lc3BlYyA+IGxhc3R0aW1lX3JlY3YpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0dGltZV9yZWN2ID0gdGltZXNwZWM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsID0gcGFja2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbF92YWxpZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFdpcmVWYWx1ZUNoYW5nZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaXJlVmFsdWVDaGFuZ2VkKHRoaXMsIHBhY2tldCwgdGltZXNwZWMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHByaXZhdGUgV2lyZURpc2Nvbm5lY3RDYWxsYmFja0Z1bmN0aW9uIGNsb3NlX2NhbGxiYWNrO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIFdpcmVEaXNjb25uZWN0Q2FsbGJhY2tGdW5jdGlvbiBXaXJlQ2xvc2VDYWxsYmFja1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gY2xvc2VfY2FsbGJhY2s7IH1cclxuICAgICAgICAgICAgICAgIHNldCB7IGNsb3NlX2NhbGxiYWNrID0gdmFsdWU7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGludGVybmFsIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgUmVtb3RlQ2xvc2UoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VfY2FsbGJhY2sgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlX2NhbGxiYWNrKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCB7IH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIHJhd2VsZW1lbnRzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBUYXNrPFdpcmVDb25uZWN0aW9uPiBDb25uZWN0KENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRlbGVnYXRlIHZvaWQgV2lyZUNvbm5lY3RDYWxsYmFja0Z1bmN0aW9uKFdpcmU8VD4gd2lyZSwgV2lyZUNvbm5lY3Rpb24gY29ubmVjdGlvbik7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxlZ2F0ZSB2b2lkIFdpcmVEaXNjb25uZWN0Q2FsbGJhY2tGdW5jdGlvbihXaXJlQ29ubmVjdGlvbiB3aXJlKTtcclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFdpcmVDb25uZWN0Q2FsbGJhY2tGdW5jdGlvbiBXaXJlQ29ubmVjdENhbGxiYWNrIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGRlbGVnYXRlIHZvaWQgV2lyZVZhbHVlQ2hhbmdlZEZ1bmN0aW9uKFdpcmVDb25uZWN0aW9uIGNvbm5lY3Rpb24sIFQgdmFsdWUsIFRpbWVTcGVjIHRpbWUpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3Qgc3RyaW5nIE1lbWJlck5hbWUgeyBnZXQ7IH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uIGRpcmVjdGlvbiA9IE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uLmJvdGg7XHJcblxyXG4gICAgICAgIHB1YmxpYyBXaXJlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoVCkgPT0gdHlwZW9mKE1lc3NhZ2VFbGVtZW50KSlcclxuICAgICAgICAgICAgICAgIHJhd2VsZW1lbnRzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgVCBVbnBhY2tQYWNrZXQoTGlzdDxNZXNzYWdlRWxlbWVudD4gbWUsIG91dCBUaW1lU3BlYyB0aW1lc3BlYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIHMgPSAoTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobWUsIFwicGFja2V0dGltZVwiKS5DYXN0RGF0YTxNZXNzYWdlRWxlbWVudFN0cnVjdHVyZT4oKSk7XHJcbiAgICAgICAgICAgIGxvbmcgc2Vjb25kcyA9IE1lc3NhZ2VFbGVtZW50LkZpbmRFbGVtZW50KHMuRWxlbWVudHMsIFwic2Vjb25kc1wiKS5DYXN0RGF0YTxsb25nW10+KClbMF07XHJcbiAgICAgICAgICAgIGludCBuYW5vc2Vjb25kcyA9IE1lc3NhZ2VFbGVtZW50LkZpbmRFbGVtZW50KHMuRWxlbWVudHMsIFwibmFub3NlY29uZHNcIikuQ2FzdERhdGE8aW50W10+KClbMF07XHJcbiAgICAgICAgICAgIHRpbWVzcGVjID0gbmV3IFRpbWVTcGVjKHNlY29uZHMsIG5hbm9zZWNvbmRzKTtcclxuICAgICAgICAgICAgb2JqZWN0IGRhdGE7XHJcbiAgICAgICAgICAgIGlmICghcmF3ZWxlbWVudHMpXHJcbiAgICAgICAgICAgICAgICBkYXRhID0gVW5wYWNrVmFyVHlwZShNZXNzYWdlRWxlbWVudC5GaW5kRWxlbWVudChtZSwgXCJwYWNrZXRcIikpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBkYXRhID0gTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobWUsIFwicGFja2V0XCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEgaXMgQXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoVCkuSXNBcnJheSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFQpZGF0YTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoVFtdKWRhdGEpWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiAoVClkYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgRGlzcGF0Y2hQYWNrZXQoTGlzdDxNZXNzYWdlRWxlbWVudD4gbWUsIFdpcmVDb25uZWN0aW9uIGUpXHJcbiAgICAgICAgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBUaW1lU3BlYyB0aW1lc3BlYztcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBVbnBhY2tQYWNrZXQobWUsIG91dCB0aW1lc3BlYyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlLldpcmVQYWNrZXRSZWNlaXZlZCh0aW1lc3BlYywgKFQpZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3RlY3RlZCBMaXN0PE1lc3NhZ2VFbGVtZW50PiBQYWNrUGFja2V0KFQgZGF0YSwgVGltZVNwZWMgdGltZSlcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiB0aW1lc3BlYzEgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKTtcclxuICAgICAgICAgICAgdGltZXNwZWMxLkFkZChuZXcgTWVzc2FnZUVsZW1lbnQoXCJzZWNvbmRzXCIsIHRpbWUuc2Vjb25kcykpO1xyXG4gICAgICAgICAgICB0aW1lc3BlYzEuQWRkKG5ldyBNZXNzYWdlRWxlbWVudChcIm5hbm9zZWNvbmRzXCIsIHRpbWUubmFub3NlY29uZHMpKTtcclxuICAgICAgICAgICAgTWVzc2FnZUVsZW1lbnRTdHJ1Y3R1cmUgcyA9IG5ldyBNZXNzYWdlRWxlbWVudFN0cnVjdHVyZShcIlJvYm90UmFjb250ZXVyLlRpbWVTcGVjXCIsIHRpbWVzcGVjMSk7XHJcblxyXG5cclxuICAgICAgICAgICAgTGlzdDxNZXNzYWdlRWxlbWVudD4gZWxlbXMgPSBuZXcgTGlzdDxNZXNzYWdlRWxlbWVudD4oKTtcclxuICAgICAgICAgICAgZWxlbXMuQWRkKG5ldyBNZXNzYWdlRWxlbWVudChcInBhY2tldHRpbWVcIiwgcykpO1xyXG4gICAgICAgICAgICBpZiAoIXJhd2VsZW1lbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QgcGRhdGEgPSBQYWNrVmFyVHlwZShkYXRhKTtcclxuICAgICAgICAgICAgICAgIGVsZW1zLkFkZChuZXcgTWVzc2FnZUVsZW1lbnQoXCJwYWNrZXRcIiwgcGRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbGVtZW50IHBtZSA9ICgoTWVzc2FnZUVsZW1lbnQpKG9iamVjdClkYXRhKTtcclxuICAgICAgICAgICAgICAgIHBtZS5FbGVtZW50TmFtZSA9IFwicGFja2V0XCI7XHJcbiAgICAgICAgICAgICAgICBlbGVtcy5BZGQocG1lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCB2b2lkIFNlbmRXaXJlUGFja2V0KFQgcGFja2V0LCBUaW1lU3BlYyB0aW1lLCBFbmRwb2ludCBlID0gbnVsbCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCB2b2lkIFdpcmVQYWNrZXRSZWNlaXZlZChNZXNzYWdlRW50cnkgbSwgRW5kcG9pbnQgZSA9IG51bGwpO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgVGFzayBDbG9zZShXaXJlQ29ubmVjdGlvbiBjLCBFbmRwb2ludCBlID0gbnVsbCwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsPWRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IHZvaWQgU2h1dGRvd24oKTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IG9iamVjdCBQYWNrVmFyVHlwZShvYmplY3Qgbyk7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBvYmplY3QgVW5wYWNrVmFyVHlwZShNZXNzYWdlRWxlbWVudCBvKTtcclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFRhc2s8VHVwbGU8VCwgVGltZVNwZWM+PiBQZWVrSW5WYWx1ZShDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSk7XHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IFRhc2s8VHVwbGU8VCwgVGltZVNwZWM+PiBQZWVrT3V0VmFsdWUoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBUYXNrIFBva2VPdXRWYWx1ZShUIHZhbHVlLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBGdW5jPHVpbnQsIFQ+IFBlZWtJblZhbHVlQ2FsbGJhY2sgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBGdW5jPHVpbnQsIFQ+IFBlZWtPdXRWYWx1ZUNhbGxiYWNrIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgQWN0aW9uPFQsIFRpbWVTcGVjLCB1aW50PiBQb2tlT3V0VmFsdWVDYWxsYmFjayB7IGdldDsgc2V0OyB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIFxyXG4gICAgcHVibGljIGNsYXNzIFdpcmVDbGllbnQ8VD4gOiBXaXJlPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIFNlcnZpY2VTdHViIHN0dWI7XHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIFdpcmVDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSBudWxsO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RyaW5nIG1fTWVtYmVyTmFtZTtcclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBNZW1iZXJOYW1lIHsgZ2V0IHsgcmV0dXJuIG1fTWVtYmVyTmFtZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBXaXJlQ2xpZW50KHN0cmluZyBuYW1lLCBTZXJ2aWNlU3R1YiBzdHViKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbV9NZW1iZXJOYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgdGhpcy5zdHViID0gc3R1YjtcclxuICAgICAgICAgICAgc3R1Yi5SUkNvbnRleHQuQ2xpZW50U2VydmljZUxpc3RlbmVyICs9IENsaWVudENvbnRleHRMaXN0ZW5lcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBvYmplY3QgY29ubmVjdF9sb2NrID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgb3ZlcnJpZGUgVGFzazxXaXJlQ29ubmVjdGlvbj4gQ29ubmVjdChDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWw9ZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKGNvbm5lY3RfbG9jaylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiQWxyZWFkeSBjb25uZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSBuZXcgV2lyZUNvbm5lY3Rpb24odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRW50cnkgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5XaXJlQ29ubmVjdFJlcSwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUVudHJ5IHJldCA9IGF3YWl0IHN0dWIuUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBBc3luY011dGV4IENsb3NlX211dGV4ID0gbmV3IEFzeW5jTXV0ZXgoKTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIGFzeW5jIFRhc2sgQ2xvc2UoV2lyZUNvbm5lY3Rpb24gYywgRW5kcG9pbnQgZSA9IG51bGwsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGFzayBtdXRleCA9IENsb3NlX211dGV4LkVudGVyKCk7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBtdXRleDtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLldpcmVEaXNjb25uZWN0UmVxLCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSByZXQgPSBhd2FpdCBzdHViLlByb2Nlc3NSZXF1ZXN0KG0sIGNhbmNlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDbG9zZV9tdXRleC5FeGl0KG11dGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFdpcmVDb25uZWN0Q2FsbGJhY2tGdW5jdGlvbiBXaXJlQ29ubmVjdENhbGxiYWNrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKCk7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBGdW5jPHVpbnQsIFQ+IFBlZWtJblZhbHVlQ2FsbGJhY2sge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuICgoU3lzdGVtLkZ1bmM8RnVuYzx1aW50LCBUPj4pKCgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgZm9yIHdpcmUgY2xpZW50XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgKSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHNldFxyXG4gICAge1xyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBmb3Igd2lyZSBjbGllbnRcIik7XHJcbiAgICB9XHJcbiAgICBcclxufSAgICAgICAgcHVibGljIG92ZXJyaWRlIEZ1bmM8dWludCwgVD4gUGVla091dFZhbHVlQ2FsbGJhY2sge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuICgoU3lzdGVtLkZ1bmM8RnVuYzx1aW50LCBUPj4pKCgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgZm9yIHdpcmUgY2xpZW50XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgKSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHNldFxyXG4gICAge1xyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBmb3Igd2lyZSBjbGllbnRcIik7XHJcbiAgICB9XHJcbiAgICBcclxufSAgICAgICAgcHVibGljIG92ZXJyaWRlIEFjdGlvbjxULCBUaW1lU3BlYywgdWludD4gUG9rZU91dFZhbHVlQ2FsbGJhY2sge1xyXG4gICAgZ2V0XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuICgoU3lzdGVtLkZ1bmM8QWN0aW9uPFQsIFRpbWVTcGVjLCB1aW50Pj4pKCgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgZm9yIHdpcmUgY2xpZW50XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgKSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHNldFxyXG4gICAge1xyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZCBmb3Igd2lyZSBjbGllbnRcIik7XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFdpcmVQYWNrZXRSZWNlaXZlZChNZXNzYWdlRW50cnkgbSwgRW5kcG9pbnQgZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5XaXJlQ2xvc2VkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChtLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLldpcmVQYWNrZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uID09IG51bGwpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBEaXNwYXRjaFBhY2tldChtLmVsZW1lbnRzLCBjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFNlbmRXaXJlUGFja2V0KFQgcGFja2V0LCBUaW1lU3BlYyB0aW1lLCBFbmRwb2ludCBlID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TWVzc2FnZUVsZW1lbnQ+IGVsID0gUGFja1BhY2tldChwYWNrZXQsIHRpbWUpO1xyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5XaXJlUGFja2V0LCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgbS5lbGVtZW50cyA9IGVsO1xyXG4gICAgICAgICAgICBzdHViLlNlbmRXaXJlTWVzc2FnZShtLCBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSkuSWdub3JlUmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIENsaWVudENvbnRleHRMaXN0ZW5lcihDbGllbnRDb250ZXh0IGNvbnRleHQsIENsaWVudFNlcnZpY2VMaXN0ZW5lckV2ZW50VHlwZSBldmVudF8sIG9iamVjdCBwYXJhbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChldmVudF8gPT0gQ2xpZW50U2VydmljZUxpc3RlbmVyRXZlbnRUeXBlLkNsaWVudENsb3NlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2h1dGRvd24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgU2h1dGRvd24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5SZW1vdGVDbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIG9iamVjdCBQYWNrVmFyVHlwZShvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHViLlJSQ29udGV4dC5QYWNrVmFyVHlwZShvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBvYmplY3QgVW5wYWNrVmFyVHlwZShNZXNzYWdlRWxlbWVudCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0dWIuUlJDb250ZXh0LlVucGFja1ZhclR5cGUobyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgVGFzazxUdXBsZTxULCBUaW1lU3BlYz4+IFBlZWtJblZhbHVlKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBlZWtJblZhbHVlUmVxLCBNZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgdmFyIG1yID0gYXdhaXQgc3R1Yi5Qcm9jZXNzUmVxdWVzdChtLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICBUaW1lU3BlYyB0cztcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSAgVW5wYWNrUGFja2V0KG1yLmVsZW1lbnRzLCBvdXQgdHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gVHVwbGUuQ3JlYXRlPFQsVGltZVNwZWM+KGRhdGEsIHRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrPFR1cGxlPFQsIFRpbWVTcGVjPj4gUGVla091dFZhbHVlKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBlZWtPdXRWYWx1ZVJlcSwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBtciA9IGF3YWl0IHN0dWIuUHJvY2Vzc1JlcXVlc3QobSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgVGltZVNwZWMgdHM7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gVW5wYWNrUGFja2V0KG1yLmVsZW1lbnRzLCBvdXQgdHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gVHVwbGUuQ3JlYXRlPFQsVGltZVNwZWM+KGRhdGEsIHRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrIFBva2VPdXRWYWx1ZShUIHZhbHVlLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwgPSBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLldpcmVQb2tlT3V0VmFsdWVSZXEsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICBtLmVsZW1lbnRzID0gUGFja1BhY2tldCh2YWx1ZSwgVGltZVNwZWMuTm93KTtcclxuICAgICAgICAgICAgYXdhaXQgc3R1Yi5Qcm9jZXNzUmVxdWVzdChtLCBjYW5jZWwpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgV2lyZVNlcnZlcjxUPiA6IFdpcmU8VD5cclxuICAgIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0cmluZyBtX01lbWJlck5hbWU7XHJcbiAgICAgICAgcHJvdGVjdGVkIFNlcnZpY2VTa2VsIHNrZWw7XHJcblxyXG4gICAgICAgIERpY3Rpb25hcnk8dWludCwgV2lyZUNvbm5lY3Rpb24+IGNvbm5lY3Rpb25zID0gbmV3IERpY3Rpb25hcnk8dWludCwgV2lyZUNvbm5lY3Rpb24+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgTWVtYmVyTmFtZSB7IGdldCB7IHJldHVybiBtX01lbWJlck5hbWU7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgV2lyZVNlcnZlcihzdHJpbmcgbmFtZSwgU2VydmljZVNrZWwgc2tlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1fTWVtYmVyTmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2tlbCA9IHNrZWw7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8V2lyZUNvbm5lY3Rpb24+IENvbm5lY3QoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkNhbm5vdCBjb25uZWN0IGZyb20gc2VydmVyIHNpZGVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIFdpcmVDb25uZWN0Q2FsbGJhY2tGdW5jdGlvbiBjb25uZWN0X2NhbGxiYWNrID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFdpcmVDb25uZWN0Q2FsbGJhY2tGdW5jdGlvbiBXaXJlQ29ubmVjdENhbGxiYWNrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gY29ubmVjdF9jYWxsYmFjazsgfVxyXG4gICAgICAgICAgICBzZXQgeyBjb25uZWN0X2NhbGxiYWNrID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBGdW5jPHVpbnQsIFQ+IFBlZWtJblZhbHVlQ2FsbGJhY2sgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBGdW5jPHVpbnQsIFQ+IFBlZWtPdXRWYWx1ZUNhbGxiYWNrIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgQWN0aW9uPFQsIFRpbWVTcGVjLCB1aW50PiBQb2tlT3V0VmFsdWVDYWxsYmFjayB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFdpcmVQYWNrZXRSZWNlaXZlZChNZXNzYWdlRW50cnkgbSwgRW5kcG9pbnQgZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5XaXJlUGFja2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBEaXNwYXRjaFBhY2tldChtLmVsZW1lbnRzLCBjb25uZWN0aW9uc1tlLkxvY2FsRW5kcG9pbnRdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvYmplY3QgY29ubmVjdGlvbnNsb2NrID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGFzazxNZXNzYWdlRW50cnk+IFdpcmVDb21tYW5kKE1lc3NhZ2VFbnRyeSBtLCBFbmRwb2ludCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoY29ubmVjdGlvbnNsb2NrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG0uRW50cnlUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUVudHJ5VHlwZS5XaXJlQ29ubmVjdFJlcTpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9ucy5Db250YWluc0tleShlLkxvY2FsRW5kcG9pbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLkFkZChlLkxvY2FsRW5kcG9pbnQsIG5ldyBXaXJlQ29ubmVjdGlvbih0aGlzLCBlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaXJlQ29ubmVjdGlvbiBjb24gPSBjb25uZWN0aW9uc1tlLkxvY2FsRW5kcG9pbnRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3RfY2FsbGJhY2sgIT0gbnVsbCkgY29ubmVjdF9jYWxsYmFjayh0aGlzLCBjb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSByZXQgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuV2lyZUNvbm5lY3RSZXQsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdDxNZXNzYWdlRW50cnk+KHJldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuV2lyZURpc2Nvbm5lY3RSZXE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbnMuQ29udGFpbnNLZXkoZS5Mb2NhbEVuZHBvaW50KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihcIkludmFsaWQgd2lyZSBjb25uZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbnMuUmVtb3ZlKGUuTG9jYWxFbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PE1lc3NhZ2VFbnRyeT4obmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLldpcmVEaXNjb25uZWN0UmV0LCBNZW1iZXJOYW1lKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBlZWtJblZhbHVlUmVxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IE1lbWJlckRlZmluaXRpb25fRGlyZWN0aW9uLndyaXRlb25seSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVPbmx5TWVtYmVyRXhjZXB0aW9uKFwiV3JpdGUgb25seSBtZW1iZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBQZWVrSW5WYWx1ZUNhbGxiYWNrKGUuTG9jYWxFbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXJfZGF0ID0gUGFja1BhY2tldCh2YWx1ZSwgVGltZVNwZWMuTm93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtciA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5XaXJlUGVla0luVmFsdWVSZXQsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXIuZWxlbWVudHMgPSBtcl9kYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PE1lc3NhZ2VFbnRyeT4obXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlRW50cnlUeXBlLldpcmVQZWVrT3V0VmFsdWVSZXE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gTWVtYmVyRGVmaW5pdGlvbl9EaXJlY3Rpb24ucmVhZG9ubHlfKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWFkT25seU1lbWJlckV4Y2VwdGlvbihcIlJlYWQgb25seSBtZW1iZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBQZWVrT3V0VmFsdWVDYWxsYmFjayhlLkxvY2FsRW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1yX2RhdCA9IFBhY2tQYWNrZXQodmFsdWUsIFRpbWVTcGVjLk5vdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXIgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBlZWtPdXRWYWx1ZVJldCwgTWVtYmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtci5lbGVtZW50cyA9IG1yX2RhdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8TWVzc2FnZUVudHJ5Pihtcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBva2VPdXRWYWx1ZVJlcTpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBNZW1iZXJEZWZpbml0aW9uX0RpcmVjdGlvbi5yZWFkb25seV8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlYWRPbmx5TWVtYmVyRXhjZXB0aW9uKFwiUmVhZCBvbmx5IG1lbWJlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpbWVTcGVjIHRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gVW5wYWNrUGFja2V0KG0uZWxlbWVudHMsIG91dCB0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb2tlT3V0VmFsdWVDYWxsYmFjayh2YWx1ZSwgdHMsIGUuTG9jYWxFbmRwb2ludCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1yID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLldpcmVQb2tlT3V0VmFsdWVSZXQsIE1lbWJlck5hbWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8TWVzc2FnZUVudHJ5Pihtcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgQ29tbWFuZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIGFzeW5jIFRhc2sgQ2xvc2UoV2lyZUNvbm5lY3Rpb24gYywgRW5kcG9pbnQgZWUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IG0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuV2lyZUNsb3NlZCwgTWVtYmVyTmFtZSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBza2VsLlNlbmRXaXJlTWVzc2FnZShtLCBlZSwgY2FuY2VsKTtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChjb25uZWN0aW9uc2xvY2spXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25zLkNvbnRhaW5zS2V5KGMuRW5kcG9pbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5SZW1vdmUoYy5FbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTZW5kV2lyZVBhY2tldChUIHBhY2tldCwgVGltZVNwZWMgdGltZSwgRW5kcG9pbnQgZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb25zLkNvbnRhaW5zS2V5KGUuTG9jYWxFbmRwb2ludCkpIHRocm93IG5ldyBFeGNlcHRpb24oXCJXaXJlIGhhcyBiZWVuIGRpc2Nvbm5lY3RlZFwiKTtcclxuICAgICAgICAgICAgTGlzdDxNZXNzYWdlRWxlbWVudD4gZWwgPSBQYWNrUGFja2V0KHBhY2tldCwgdGltZSk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLldpcmVQYWNrZXQsIE1lbWJlck5hbWUpO1xyXG4gICAgICAgICAgICBtLmVsZW1lbnRzID0gZWw7XHJcblxyXG4gICAgICAgICAgICBza2VsLlNlbmRXaXJlTWVzc2FnZShtLCBlLCBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSkuSWdub3JlUmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTaHV0ZG93bigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBXaXJlPFQ+LldpcmVDb25uZWN0aW9uW10gY29ucyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9BcnJheTxXaXJlPFQ+LldpcmVDb25uZWN0aW9uPihjb25uZWN0aW9ucy5WYWx1ZXMpO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChXaXJlPFQ+LldpcmVDb25uZWN0aW9uIGNvbiBpbiBjb25zKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb24uUmVtb3RlQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgb2JqZWN0IFBhY2tWYXJUeXBlKG9iamVjdCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNrZWwuUlJDb250ZXh0LlBhY2tWYXJUeXBlKG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIG9iamVjdCBVbnBhY2tWYXJUeXBlKE1lc3NhZ2VFbGVtZW50IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc2tlbC5SUkNvbnRleHQuVW5wYWNrVmFyVHlwZShvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBUYXNrPFR1cGxlPFQsIFRpbWVTcGVjPj4gUGVla0luVmFsdWUoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgZm9yIHdpcmUgc2VydmVyXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2s8VHVwbGU8VCwgVGltZVNwZWM+PiBQZWVrT3V0VmFsdWUoQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsID0gZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgZm9yIHdpcmUgc2VydmVyXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIFRhc2sgUG9rZU91dFZhbHVlKFQgdmFsdWUsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbCA9IGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJJbnZhbGlkIGZvciB3aXJlIHNlcnZlclwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFdpcmVCcm9hZGNhc3RlcjxUPlxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBjbGFzcyBjb25uZWN0ZWRfY29ubmVjdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIFdpcmU8VD4uV2lyZUNvbm5lY3Rpb24gY29ubmVjdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgY29ubmVjdGVkX2Nvbm5lY3Rpb24oV2lyZTxUPi5XaXJlQ29ubmVjdGlvbiBjb25uZWN0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIExpc3Q8Y29ubmVjdGVkX2Nvbm5lY3Rpb24+IGNvbm5lY3RlZF93aXJlcyA9IG5ldyBMaXN0PGNvbm5lY3RlZF9jb25uZWN0aW9uPigpO1xyXG4gICAgICAgIHByb3RlY3RlZCBvYmplY3QgY29ubmVjdGVkX3dpcmVzX2xvY2sgPSBuZXcgb2JqZWN0KCk7XHJcbiAgICAgICAgcHJvdGVjdGVkIFdpcmU8VD4gd2lyZTtcclxuXHJcbiAgICAgICAgcHVibGljIFdpcmU8VD4gV2lyZSB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gKFdpcmU8VD4pd2lyZTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgQ29ubmVjdGlvbkNsb3NlZChjb25uZWN0ZWRfY29ubmVjdGlvbiBlcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKGNvbm5lY3RlZF93aXJlc19sb2NrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfd2lyZXMuUmVtb3ZlKGVwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIENvbm5lY3Rpb25Db25uZWN0ZWQoV2lyZTxUPiB3LCBXaXJlPFQ+LldpcmVDb25uZWN0aW9uIGVwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoY29ubmVjdGVkX3dpcmVzX2xvY2spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9jb25uZWN0aW9uIGMgPSBuZXcgY29ubmVjdGVkX2Nvbm5lY3Rpb24oZXApO1xyXG4gICAgICAgICAgICAgICAgZXAuV2lyZUNsb3NlQ2FsbGJhY2sgPSBkZWxlZ2F0ZShXaXJlPFQ+LldpcmVDb25uZWN0aW9uIHcyKSB7IENvbm5lY3Rpb25DbG9zZWQoYyk7IH07XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0ZWRfd2lyZXMuQWRkKGMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFdpcmVCcm9hZGNhc3RlcihXaXJlPFQ+IHdpcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLndpcmUgPSB3aXJlO1xyXG4gICAgICAgICAgICB3aXJlLldpcmVDb25uZWN0Q2FsbGJhY2sgPSBDb25uZWN0aW9uQ29ubmVjdGVkO1xyXG4gICAgICAgICAgICB3aXJlLlBlZWtJblZhbHVlQ2FsbGJhY2sgPSBDbGllbnRQZWVrSW5WYWx1ZTtcclxuICAgICAgICAgICAgd2lyZS5QZWVrT3V0VmFsdWVDYWxsYmFjayA9IENsaWVudFBlZWtPdXRWYWx1ZTtcclxuICAgICAgICAgICAgd2lyZS5Qb2tlT3V0VmFsdWVDYWxsYmFjayA9IENsaWVudFBva2VPdXRWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBUIGN1cnJlbnRfb3V0X3ZhbHVlID0gZGVmYXVsdChUKTtcclxuXHJcbiAgICAgICAgcHVibGljIFQgT3V0VmFsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChjb25uZWN0ZWRfd2lyZXNfbG9jaylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50X291dF92YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIExpc3Q8Y29ubmVjdGVkX2Nvbm5lY3Rpb24+IGNlcHMgPSBuZXcgTGlzdDxjb25uZWN0ZWRfY29ubmVjdGlvbj4oKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChjb25uZWN0ZWRfY29ubmVjdGlvbiBjIGluIGNvbm5lY3RlZF93aXJlcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlcHMuQWRkKGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoY29ubmVjdGVkX2Nvbm5lY3Rpb24gZWUgaW4gY2VwcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaXJlPFQ+LldpcmVDb25uZWN0aW9uIGMgPSBlZS5jb25uZWN0aW9uIGFzIFdpcmU8VD4uV2lyZUNvbm5lY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF93aXJlcy5SZW1vdmUoZWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5PdXRWYWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4cCkgeyB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgVCBDbGllbnRQZWVrSW5WYWx1ZSh1aW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChjb25uZWN0ZWRfd2lyZXNfbG9jaylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRfb3V0X3ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgVCBDbGllbnRQZWVrT3V0VmFsdWUodWludCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJlYWRPbmx5TWVtYmVyRXhjZXB0aW9uKFwiUmVhZCBvbmx5IHdpcmVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBDbGllbnRQb2tlT3V0VmFsdWUoVCB2LCBUaW1lU3BlYyB0cywgdWludCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJlYWRPbmx5TWVtYmVyRXhjZXB0aW9uKFwiUmVhZCBvbmx5IHdpcmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBXaXJlVW5pY2FzdFJlY2VpdmVyPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgcHJvdGVjdGVkIGNsYXNzIGNvbm5lY3RlZF9jb25uZWN0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgV2lyZTxUPi5XaXJlQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBjb25uZWN0ZWRfY29ubmVjdGlvbihXaXJlPFQ+LldpcmVDb25uZWN0aW9uIGNvbm5lY3Rpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25uZWN0ZWRfY29ubmVjdGlvbiBhY3RpdmVfY29ubmVjdGlvbiA9IG51bGw7ICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgV2lyZTxUPiB3aXJlO1xyXG5cclxuICAgICAgICBUIGluX3ZhbHVlO1xyXG4gICAgICAgIFRpbWVTcGVjIGluX3ZhbHVlX3RzO1xyXG4gICAgICAgIGJvb2wgaW5fdmFsdWVfdmFsaWQ7XHJcbiAgICAgICAgdWludCBpbl92YWx1ZV9lcDtcclxuXHJcbiAgICAgICAgcHVibGljIFdpcmU8VD4gV2lyZSB7XHJcbiAgICBnZXRcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gKFdpcmU8VD4pd2lyZTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgQ29ubmVjdGlvbkNsb3NlZChjb25uZWN0ZWRfY29ubmVjdGlvbiBlcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVfY29ubmVjdGlvbiA9PSBlcClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVfY29ubmVjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIENvbm5lY3Rpb25Db25uZWN0ZWQoV2lyZTxUPiB3LCBXaXJlPFQ+LldpcmVDb25uZWN0aW9uIGVwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZV9jb25uZWN0aW9uICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoKFdpcmU8VD4uV2lyZUNvbm5lY3Rpb24pYWN0aXZlX2Nvbm5lY3Rpb24uY29ubmVjdGlvbikuQ2xvc2UoKS5Db250aW51ZVdpdGgoKEFjdGlvbjxUYXNrPikoeCA9PiB7IH0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGVkX2Nvbm5lY3Rpb24gYyA9IG5ldyBjb25uZWN0ZWRfY29ubmVjdGlvbihlcCk7XHJcbiAgICAgICAgICAgICAgICBlcC5XaXJlQ2xvc2VDYWxsYmFjayA9IGRlbGVnYXRlIChXaXJlPFQ+LldpcmVDb25uZWN0aW9uIHcyKSB7IENvbm5lY3Rpb25DbG9zZWQoYyk7IH07XHJcbiAgICAgICAgICAgICAgICBlcC5XaXJlVmFsdWVDaGFuZ2VkICs9IChjMSx2YWx1ZSx0aW1lKSA9PiBDbGllbnRQb2tlT3V0VmFsdWUodmFsdWUsIHRpbWUsIGMxLkVuZHBvaW50KTtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZV9jb25uZWN0aW9uID0gYztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBXaXJlVW5pY2FzdFJlY2VpdmVyKFdpcmU8VD4gd2lyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMud2lyZSA9IHdpcmU7XHJcbiAgICAgICAgICAgIHdpcmUuV2lyZUNvbm5lY3RDYWxsYmFjayA9IENvbm5lY3Rpb25Db25uZWN0ZWQ7XHJcbiAgICAgICAgICAgIHdpcmUuUGVla0luVmFsdWVDYWxsYmFjayA9IENsaWVudFBlZWtJblZhbHVlO1xyXG4gICAgICAgICAgICB3aXJlLlBlZWtPdXRWYWx1ZUNhbGxiYWNrID0gQ2xpZW50UGVla091dFZhbHVlO1xyXG4gICAgICAgICAgICB3aXJlLlBva2VPdXRWYWx1ZUNhbGxiYWNrID0gQ2xpZW50UG9rZU91dFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFQgR2V0SW5WYWx1ZShvdXQgVGltZVNwZWMgdHMsIG91dCB1aW50IGVwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWluX3ZhbHVlX3ZhbGlkKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIlZhbHVlIG5vdCBzZXRcIik7XHJcbiAgICAgICAgICAgICAgICB0cyA9IGluX3ZhbHVlX3RzO1xyXG4gICAgICAgICAgICAgICAgZXAgPSBpbl92YWx1ZV9lcDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbl92YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIFQgQ2xpZW50UGVla0luVmFsdWUodWludCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlT25seU1lbWJlckV4Y2VwdGlvbihcIldyaXRlIG9ubHkgd2lyZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBUIENsaWVudFBlZWtPdXRWYWx1ZSh1aW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWluX3ZhbHVlX3ZhbGlkKSB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIlZhbHVlIG5vdCBzZXRcIik7ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5fdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIENsaWVudFBva2VPdXRWYWx1ZShUIHYsIFRpbWVTcGVjIHRzLCB1aW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrKHRoaXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGluX3ZhbHVlID0gdjtcclxuICAgICAgICAgICAgICAgIGluX3ZhbHVlX3RzID0gdHM7XHJcbiAgICAgICAgICAgICAgICBpbl92YWx1ZV92YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpbl92YWx1ZV9lcCA9IGM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChJblZhbHVlQ2hhbmdlZCE9bnVsbCkgSW5WYWx1ZUNoYW5nZWQodiwgdHMsIGMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxULCBUaW1lU3BlYywgdWludD4gIEluVmFsdWVDaGFuZ2VkOyBcclxuICAgIH1cclxuXHJcbn0iLCIvL1RoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZC4gRE8gTk9UIEVESVQhXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgUm9ib3RSYWNvbnRldXJXZWI7XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5uYW1lc3BhY2UgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXh7XHJcblxyXG5wdWJsaWMgY2xhc3MgTm9kZUluZm9fc3R1YiA6IElTdHJ1Y3R1cmVTdHViIHtcclxuICAgIHB1YmxpYyBOb2RlSW5mb19zdHViKFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4RmFjdG9yeSBkKSB7ZGVmPWQ7fVxyXG4gICAgcHJpdmF0ZSBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleEZhY3RvcnkgZGVmO1xyXG4gICAgcHVibGljIE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIFBhY2tTdHJ1Y3R1cmUoT2JqZWN0IHMxKSB7XHJcbiAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBtPW5ldyBMaXN0PE1lc3NhZ2VFbGVtZW50PigpO1xyXG4gICAgaWYgKHMxID09bnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICBOb2RlSW5mbyBzID0gKE5vZGVJbmZvKXMxO1xyXG4gICAgbS5BZGQobmV3IE1lc3NhZ2VFbGVtZW50KFwiTm9kZU5hbWVcIixzLk5vZGVOYW1lKSk7XHJcbiAgICBtLkFkZChuZXcgTWVzc2FnZUVsZW1lbnQoXCJOb2RlSURcIixzLk5vZGVJRCkpO1xyXG4gICAgbS5BZGQobmV3IE1lc3NhZ2VFbGVtZW50KFwiU2VydmljZUluZGV4Q29ubmVjdGlvblVSTFwiLGRlZi5QYWNrTWFwVHlwZTxpbnQsc3RyaW5nPihzLlNlcnZpY2VJbmRleENvbm5lY3Rpb25VUkwpKSk7XHJcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlKFwiUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguTm9kZUluZm9cIixtKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBUIFVucGFja1N0cnVjdHVyZTxUPihNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSBtKSB7XHJcbiAgICBpZiAobSA9PSBudWxsICkgcmV0dXJuIGRlZmF1bHQoVCk7XHJcbiAgICBOb2RlSW5mbyBzPW5ldyBOb2RlSW5mbygpO1xyXG4gICAgcy5Ob2RlTmFtZT1NZXNzYWdlRWxlbWVudC5GaW5kRWxlbWVudChtLkVsZW1lbnRzLFwiTm9kZU5hbWVcIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG4gICAgcy5Ob2RlSUQ9TWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobS5FbGVtZW50cyxcIk5vZGVJRFwiKS5DYXN0RGF0YTxieXRlW10+KCk7XHJcbiAgICBzLlNlcnZpY2VJbmRleENvbm5lY3Rpb25VUkw9KERpY3Rpb25hcnk8aW50LHN0cmluZz4pZGVmLlVucGFja01hcFR5cGU8aW50LHN0cmluZz4oTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobS5FbGVtZW50cyxcIlNlcnZpY2VJbmRleENvbm5lY3Rpb25VUkxcIikuRGF0YSk7XHJcbiAgICBUIHN0OyB0cnkge3N0PShUKSgob2JqZWN0KXMpO30gY2F0Y2ggKEludmFsaWRDYXN0RXhjZXB0aW9uIGUpIHt0aHJvdyBuZXcgRGF0YVR5cGVNaXNtYXRjaEV4Y2VwdGlvbihcIldyb25nIHN0cnVjdHVyZXR5cGVcIik7fVxyXG4gICAgcmV0dXJuIHN0O1xyXG4gICAgfVxyXG59XHJcblxyXG5wdWJsaWMgY2xhc3MgU2VydmljZUluZm9fc3R1YiA6IElTdHJ1Y3R1cmVTdHViIHtcclxuICAgIHB1YmxpYyBTZXJ2aWNlSW5mb19zdHViKFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4RmFjdG9yeSBkKSB7ZGVmPWQ7fVxyXG4gICAgcHJpdmF0ZSBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleEZhY3RvcnkgZGVmO1xyXG4gICAgcHVibGljIE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIFBhY2tTdHJ1Y3R1cmUoT2JqZWN0IHMxKSB7XHJcbiAgICBMaXN0PE1lc3NhZ2VFbGVtZW50PiBtPW5ldyBMaXN0PE1lc3NhZ2VFbGVtZW50PigpO1xyXG4gICAgaWYgKHMxID09bnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICBTZXJ2aWNlSW5mbyBzID0gKFNlcnZpY2VJbmZvKXMxO1xyXG4gICAgbS5BZGQobmV3IE1lc3NhZ2VFbGVtZW50KFwiTmFtZVwiLHMuTmFtZSkpO1xyXG4gICAgbS5BZGQobmV3IE1lc3NhZ2VFbGVtZW50KFwiUm9vdE9iamVjdFR5cGVcIixzLlJvb3RPYmplY3RUeXBlKSk7XHJcbiAgICBtLkFkZChuZXcgTWVzc2FnZUVsZW1lbnQoXCJSb290T2JqZWN0SW1wbGVtZW50c1wiLGRlZi5QYWNrTWFwVHlwZTxpbnQsc3RyaW5nPihzLlJvb3RPYmplY3RJbXBsZW1lbnRzKSkpO1xyXG4gICAgbS5BZGQobmV3IE1lc3NhZ2VFbGVtZW50KFwiQ29ubmVjdGlvblVSTFwiLGRlZi5QYWNrTWFwVHlwZTxpbnQsc3RyaW5nPihzLkNvbm5lY3Rpb25VUkwpKSk7XHJcbiAgICBtLkFkZChuZXcgTWVzc2FnZUVsZW1lbnQoXCJBdHRyaWJ1dGVzXCIsZGVmLlBhY2tNYXBUeXBlPHN0cmluZyxvYmplY3Q+KHMuQXR0cmlidXRlcykpKTtcclxuICAgIHJldHVybiBuZXcgTWVzc2FnZUVsZW1lbnRTdHJ1Y3R1cmUoXCJSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleC5TZXJ2aWNlSW5mb1wiLG0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIFQgVW5wYWNrU3RydWN0dXJlPFQ+KE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIG0pIHtcclxuICAgIGlmIChtID09IG51bGwgKSByZXR1cm4gZGVmYXVsdChUKTtcclxuICAgIFNlcnZpY2VJbmZvIHM9bmV3IFNlcnZpY2VJbmZvKCk7XHJcbiAgICBzLk5hbWU9TWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobS5FbGVtZW50cyxcIk5hbWVcIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG4gICAgcy5Sb290T2JqZWN0VHlwZT1NZXNzYWdlRWxlbWVudC5GaW5kRWxlbWVudChtLkVsZW1lbnRzLFwiUm9vdE9iamVjdFR5cGVcIikuQ2FzdERhdGE8c3RyaW5nPigpO1xyXG4gICAgcy5Sb290T2JqZWN0SW1wbGVtZW50cz0oRGljdGlvbmFyeTxpbnQsc3RyaW5nPilkZWYuVW5wYWNrTWFwVHlwZTxpbnQsc3RyaW5nPihNZXNzYWdlRWxlbWVudC5GaW5kRWxlbWVudChtLkVsZW1lbnRzLFwiUm9vdE9iamVjdEltcGxlbWVudHNcIikuRGF0YSk7XHJcbiAgICBzLkNvbm5lY3Rpb25VUkw9KERpY3Rpb25hcnk8aW50LHN0cmluZz4pZGVmLlVucGFja01hcFR5cGU8aW50LHN0cmluZz4oTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobS5FbGVtZW50cyxcIkNvbm5lY3Rpb25VUkxcIikuRGF0YSk7XHJcbiAgICBzLkF0dHJpYnV0ZXM9KERpY3Rpb25hcnk8c3RyaW5nLG9iamVjdD4pZGVmLlVucGFja01hcFR5cGU8c3RyaW5nLG9iamVjdD4oTWVzc2FnZUVsZW1lbnQuRmluZEVsZW1lbnQobS5FbGVtZW50cyxcIkF0dHJpYnV0ZXNcIikuRGF0YSk7XHJcbiAgICBUIHN0OyB0cnkge3N0PShUKSgob2JqZWN0KXMpO30gY2F0Y2ggKEludmFsaWRDYXN0RXhjZXB0aW9uIGUpIHt0aHJvdyBuZXcgRGF0YVR5cGVNaXNtYXRjaEV4Y2VwdGlvbihcIldyb25nIHN0cnVjdHVyZXR5cGVcIik7fVxyXG4gICAgcmV0dXJuIHN0O1xyXG4gICAgfVxyXG59XHJcblxyXG5wdWJsaWMgY2xhc3MgU2VydmljZUluZGV4X3N0dWIgOiBTZXJ2aWNlU3R1YiAsIFNlcnZpY2VJbmRleCB7XHJcbiAgICBwdWJsaWMgU2VydmljZUluZGV4X3N0dWIoc3RyaW5nIHBhdGgsQ2xpZW50Q29udGV4dCBjKSA6IGJhc2UocGF0aCxjKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIFRhc2s8RGljdGlvbmFyeTxpbnQsU2VydmljZUluZm8+PiBHZXRMb2NhbE5vZGVTZXJ2aWNlcyhDYW5jZWxsYXRpb25Ub2tlbiBycl9jYW5jZWw9ZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpIHtcclxuICAgIE1lc3NhZ2VFbnRyeSBycl9tbT1uZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuRnVuY3Rpb25DYWxsUmVxLFwiR2V0TG9jYWxOb2RlU2VydmljZXNcIik7XHJcbiAgICBNZXNzYWdlRW50cnkgcnJfbXI9YXdhaXQgUHJvY2Vzc1JlcXVlc3QocnJfbW0scnJfY2FuY2VsKTtcclxuICAgIE1lc3NhZ2VFbGVtZW50IHJyX21lID0gcnJfbXIuRmluZEVsZW1lbnQoXCJyZXR1cm5cIik7XHJcbiAgICByZXR1cm4gKERpY3Rpb25hcnk8aW50LFNlcnZpY2VJbmZvPilSUkNvbnRleHQuVW5wYWNrTWFwVHlwZTxpbnQsU2VydmljZUluZm8+KHJyX21lLkRhdGEpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIFRhc2s8RGljdGlvbmFyeTxpbnQsTm9kZUluZm8+PiBHZXRSb3V0ZWROb2RlcyhDYW5jZWxsYXRpb25Ub2tlbiBycl9jYW5jZWw9ZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpIHtcclxuICAgIE1lc3NhZ2VFbnRyeSBycl9tbT1uZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuRnVuY3Rpb25DYWxsUmVxLFwiR2V0Um91dGVkTm9kZXNcIik7XHJcbiAgICBNZXNzYWdlRW50cnkgcnJfbXI9YXdhaXQgUHJvY2Vzc1JlcXVlc3QocnJfbW0scnJfY2FuY2VsKTtcclxuICAgIE1lc3NhZ2VFbGVtZW50IHJyX21lID0gcnJfbXIuRmluZEVsZW1lbnQoXCJyZXR1cm5cIik7XHJcbiAgICByZXR1cm4gKERpY3Rpb25hcnk8aW50LE5vZGVJbmZvPilSUkNvbnRleHQuVW5wYWNrTWFwVHlwZTxpbnQsTm9kZUluZm8+KHJyX21lLkRhdGEpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIFRhc2s8RGljdGlvbmFyeTxpbnQsTm9kZUluZm8+PiBHZXREZXRlY3RlZE5vZGVzKENhbmNlbGxhdGlvblRva2VuIHJyX2NhbmNlbD1kZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSkge1xyXG4gICAgTWVzc2FnZUVudHJ5IHJyX21tPW5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5GdW5jdGlvbkNhbGxSZXEsXCJHZXREZXRlY3RlZE5vZGVzXCIpO1xyXG4gICAgTWVzc2FnZUVudHJ5IHJyX21yPWF3YWl0IFByb2Nlc3NSZXF1ZXN0KHJyX21tLHJyX2NhbmNlbCk7XHJcbiAgICBNZXNzYWdlRWxlbWVudCBycl9tZSA9IHJyX21yLkZpbmRFbGVtZW50KFwicmV0dXJuXCIpO1xyXG4gICAgcmV0dXJuIChEaWN0aW9uYXJ5PGludCxOb2RlSW5mbz4pUlJDb250ZXh0LlVucGFja01hcFR5cGU8aW50LE5vZGVJbmZvPihycl9tZS5EYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXZlbnQgQWN0aW9uIExvY2FsTm9kZVNlcnZpY2VzQ2hhbmdlZDtcclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsIG92ZXJyaWRlIHZvaWQgRGlzcGF0Y2hFdmVudChNZXNzYWdlRW50cnkgcnJfbSkge1xyXG4gICAgc3RyaW5nIHJyX2VuYW1lPXJyX20uTWVtYmVyTmFtZTtcclxuICAgIHN3aXRjaCAocnJfZW5hbWUpIHtcclxuICAgIGNhc2UgXCJMb2NhbE5vZGVTZXJ2aWNlc0NoYW5nZWRcIjoge1xyXG4gICAgaWYgKExvY2FsTm9kZVNlcnZpY2VzQ2hhbmdlZCE9bnVsbCkge1xyXG4gICAgdGhpcy5Mb2NhbE5vZGVTZXJ2aWNlc0NoYW5nZWQoKTtcclxuICAgIH1cclxuICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgfVxyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsIG92ZXJyaWRlIHZvaWQgRGlzcGF0Y2hQaXBlTWVzc2FnZShNZXNzYWdlRW50cnkgbSlcclxuICAgIHtcclxuICAgIHN3aXRjaCAobS5NZW1iZXJOYW1lKSB7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigpO1xyXG4gICAgfVxyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsIG92ZXJyaWRlIGFzeW5jIFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsYmFja0NhbGwoTWVzc2FnZUVudHJ5IHJyX20pIHtcclxuICAgIHN0cmluZyBycl9lbmFtZT1ycl9tLk1lbWJlck5hbWU7XHJcbiAgICBNZXNzYWdlRW50cnkgcnJfbXI9bmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLkNhbGxiYWNrQ2FsbFJldCwgcnJfZW5hbWUpO1xyXG4gICAgcnJfbXIuU2VydmljZVBhdGg9cnJfbS5TZXJ2aWNlUGF0aDtcclxuICAgIHJyX21yLlJlcXVlc3RJRD1ycl9tLlJlcXVlc3RJRDtcclxuICAgIHN3aXRjaCAocnJfZW5hbWUpIHtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJNZW1iZXIgbm90IGZvdW5kXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJyX21yO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsIG92ZXJyaWRlIHZvaWQgRGlzcGF0Y2hXaXJlTWVzc2FnZShNZXNzYWdlRW50cnkgbSlcclxuICAgIHtcclxuICAgIHN3aXRjaCAobS5NZW1iZXJOYW1lKSB7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigpO1xyXG4gICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5wdWJsaWMgY2xhc3MgU2VydmljZUluZGV4X3NrZWwgOiBTZXJ2aWNlU2tlbCB7XHJcbiAgICBTZXJ2aWNlSW5kZXggb2JqIHsgZ2V0IHsgcmV0dXJuIChTZXJ2aWNlSW5kZXgpdW5jYXN0b2JqO319XHJcbiAgICBwdWJsaWMgU2VydmljZUluZGV4X3NrZWwoc3RyaW5nIHAsU2VydmljZUluZGV4IG8sU2VydmVyQ29udGV4dCBjKSA6IGJhc2UocCxvLGMpIHtcclxuICAgIHVuY2FzdG9iaj1vO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG92ZXJyaWRlIGFzeW5jIFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsR2V0UHJvcGVydHkoTWVzc2FnZUVudHJ5IG0pIHtcclxuICAgIHN0cmluZyBlbmFtZT1tLk1lbWJlck5hbWU7XHJcbiAgICBNZXNzYWdlRW50cnkgbXI9bmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLlByb3BlcnR5R2V0UmVzLCBlbmFtZSk7XHJcbiAgICBzd2l0Y2ggKGVuYW1lKSB7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgdGhyb3cgbmV3IE1lbWJlck5vdEZvdW5kRXhjZXB0aW9uKFwiTWVtYmVyIG5vdCBmb3VuZFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgVGFzazxNZXNzYWdlRW50cnk+IENhbGxTZXRQcm9wZXJ0eShNZXNzYWdlRW50cnkgbSkge1xyXG4gICAgc3RyaW5nIGVuYW1lPW0uTWVtYmVyTmFtZTtcclxuICAgIE1lc3NhZ2VFbGVtZW50IG1lPW0uRmluZEVsZW1lbnQoXCJ2YWx1ZVwiKTtcclxuICAgIE1lc3NhZ2VFbnRyeSBtcj1uZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuUHJvcGVydHlTZXRSZXMsIGVuYW1lKTtcclxuICAgIHN3aXRjaCAoZW5hbWUpIHtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJNZW1iZXIgbm90IGZvdW5kXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrPE1lc3NhZ2VFbnRyeT4gQ2FsbEZ1bmN0aW9uKE1lc3NhZ2VFbnRyeSBycl9tKSB7XHJcbiAgICBzdHJpbmcgcnJfZW5hbWU9cnJfbS5NZW1iZXJOYW1lO1xyXG4gICAgTWVzc2FnZUVudHJ5IHJyX21yPW5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5GdW5jdGlvbkNhbGxSZXMsIHJyX2VuYW1lKTtcclxuICAgIHN3aXRjaCAocnJfZW5hbWUpIHtcclxuICAgIGNhc2UgXCJHZXRMb2NhbE5vZGVTZXJ2aWNlc1wiOiB7XHJcbiAgICBvYmplY3QgcnJfcmV0PWF3YWl0IG9iai5HZXRMb2NhbE5vZGVTZXJ2aWNlcyhkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSk7XHJcbiAgICBycl9tci5BZGRFbGVtZW50KG5ldyBNZXNzYWdlRWxlbWVudChcInJldHVyblwiLFJSQ29udGV4dC5QYWNrTWFwVHlwZTxpbnQsU2VydmljZUluZm8+KHJyX3JldCkpKTtcclxuICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIkdldFJvdXRlZE5vZGVzXCI6IHtcclxuICAgIG9iamVjdCBycl9yZXQ9YXdhaXQgb2JqLkdldFJvdXRlZE5vZGVzKGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuICAgIHJyX21yLkFkZEVsZW1lbnQobmV3IE1lc3NhZ2VFbGVtZW50KFwicmV0dXJuXCIsUlJDb250ZXh0LlBhY2tNYXBUeXBlPGludCxOb2RlSW5mbz4ocnJfcmV0KSkpO1xyXG4gICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiR2V0RGV0ZWN0ZWROb2Rlc1wiOiB7XHJcbiAgICBvYmplY3QgcnJfcmV0PWF3YWl0IG9iai5HZXREZXRlY3RlZE5vZGVzKGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuICAgIHJyX21yLkFkZEVsZW1lbnQobmV3IE1lc3NhZ2VFbGVtZW50KFwicmV0dXJuXCIsUlJDb250ZXh0LlBhY2tNYXBUeXBlPGludCxOb2RlSW5mbz4ocnJfcmV0KSkpO1xyXG4gICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgdGhyb3cgbmV3IE1lbWJlck5vdEZvdW5kRXhjZXB0aW9uKFwiTWVtYmVyIG5vdCBmb3VuZFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBycl9tcjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbGVhc2VDYXN0T2JqZWN0KCkge31cclxuXHJcblxyXG4gICAgcHVibGljIHZvaWQgTG9jYWxOb2RlU2VydmljZXNDaGFuZ2VkX0hhbmRsZXIoKSB7XHJcbiAgICBNZXNzYWdlRW50cnkgcnJfbW09bmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLkV2ZW50UmVxLFwiTG9jYWxOb2RlU2VydmljZXNDaGFuZ2VkXCIpO1xyXG4gICAgdGhpcy5TZW5kRXZlbnQocnJfbW0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlZ2lzdGVyRXZlbnRzKE9iamVjdCBvYmoxKSB7XHJcbiAgICBTZXJ2aWNlSW5kZXggb2JqID0gb2JqMSBhcyBTZXJ2aWNlSW5kZXg7XHJcbiAgICBvYmouTG9jYWxOb2RlU2VydmljZXNDaGFuZ2VkICs9IExvY2FsTm9kZVNlcnZpY2VzQ2hhbmdlZF9IYW5kbGVyO1xyXG4gICAgYmFzZS5SZWdpc3RlckV2ZW50cyhvYmoxKTtcclxuXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBVbnJlZ2lzdGVyRXZlbnRzKE9iamVjdCBvYmoxKSB7XHJcbiAgICBTZXJ2aWNlSW5kZXggb2JqID0gb2JqMSBhcyBTZXJ2aWNlSW5kZXg7XHJcbiAgICBvYmouTG9jYWxOb2RlU2VydmljZXNDaGFuZ2VkIC09IExvY2FsTm9kZVNlcnZpY2VzQ2hhbmdlZF9IYW5kbGVyO1xyXG4gICAgYmFzZS5VbnJlZ2lzdGVyRXZlbnRzKG9iajEpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgVGFzazxPYmplY3Q+IEdldFN1Yk9iaihzdHJpbmcgbmFtZSwgc3RyaW5nIGluZCkge1xyXG4gICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgdGhyb3cgbmV3IE1lbWJlck5vdEZvdW5kRXhjZXB0aW9uKFwiTWVtYmVyIG5vdCBmb3VuZFwiKTtcclxuICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgYm9vbCBycl9Jbml0UGlwZVNlcnZlcnNSdW49ZmFsc2U7XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBJbml0UGlwZVNlcnZlcnMob2JqZWN0IG8pIHtcclxuICAgIGlmICh0aGlzLnJyX0luaXRQaXBlU2VydmVyc1J1bikgcmV0dXJuO1xyXG4gICAgdGhpcy5ycl9Jbml0UGlwZVNlcnZlcnNSdW49dHJ1ZTtcclxuICAgIFNlcnZpY2VJbmRleCBjYXN0b2JqPShTZXJ2aWNlSW5kZXgpbztcclxuICAgIH1cclxuICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIERpc3BhdGNoUGlwZU1lc3NhZ2UoTWVzc2FnZUVudHJ5IG0sIEVuZHBvaW50IGUpXHJcbiAgICB7XHJcbiAgICBzd2l0Y2ggKG0uTWVtYmVyTmFtZSkge1xyXG4gICAgZGVmYXVsdDpcclxuICAgIHRocm93IG5ldyBNZW1iZXJOb3RGb3VuZEV4Y2VwdGlvbihcIk1lbWJlciBub3QgZm91bmRcIik7XHJcbiAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBEaXNwYXRjaFdpcmVNZXNzYWdlKE1lc3NhZ2VFbnRyeSBtLCBFbmRwb2ludCBlKVxyXG4gICAge1xyXG4gICAgc3dpdGNoIChtLk1lbWJlck5hbWUpIHtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJNZW1iZXIgbm90IGZvdW5kXCIpO1xyXG4gICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIG92ZXJyaWRlIHZvaWQgSW5pdENhbGxiYWNrU2VydmVycyhvYmplY3Qgbykge1xyXG4gICAgU2VydmljZUluZGV4IGNhc3RvYmo9KFNlcnZpY2VJbmRleClvO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG92ZXJyaWRlIG9iamVjdCBHZXRDYWxsYmFja0Z1bmN0aW9uKHVpbnQgZW5kcG9pbnQsc3RyaW5nIG1lbWJlcm5hbWUpIHtcclxuICAgIHN3aXRjaChtZW1iZXJuYW1lKSB7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgdGhyb3cgbmV3IE1lbWJlck5vdEZvdW5kRXhjZXB0aW9uKFwiTWVtYmVyIG5vdCBmb3VuZFwiKTtcclxuICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvdmVycmlkZSBhc3luYyBUYXNrPE1lc3NhZ2VFbnRyeT4gQ2FsbFBpcGVGdW5jdGlvbihNZXNzYWdlRW50cnkgbSxFbmRwb2ludCBlKSB7XHJcbiAgICBzdHJpbmcgZW5hbWU9bS5NZW1iZXJOYW1lO1xyXG4gICAgc3dpdGNoIChlbmFtZSkge1xyXG4gICAgZGVmYXVsdDpcclxuICAgIHRocm93IG5ldyBNZW1iZXJOb3RGb3VuZEV4Y2VwdGlvbihcIk1lbWJlciBub3QgZm91bmRcIik7XHJcbiAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgVGFzazxNZXNzYWdlRW50cnk+IENhbGxXaXJlRnVuY3Rpb24oTWVzc2FnZUVudHJ5IG0sRW5kcG9pbnQgZSkge1xyXG4gICAgc3RyaW5nIGVuYW1lPW0uTWVtYmVyTmFtZTtcclxuICAgIHN3aXRjaCAoZW5hbWUpIHtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJNZW1iZXIgbm90IGZvdW5kXCIpO1xyXG4gICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIG92ZXJyaWRlIGFzeW5jIFRhc2s8TWVzc2FnZUVudHJ5PiBDYWxsTWVtb3J5RnVuY3Rpb24oTWVzc2FnZUVudHJ5IG0sRW5kcG9pbnQgZSkge1xyXG4gICAgc3RyaW5nIGVuYW1lPW0uTWVtYmVyTmFtZTtcclxuICAgIHN3aXRjaCAoZW5hbWUpIHtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJNZW1iZXIgbm90IGZvdW5kXCIpO1xyXG4gICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG59XHJcbiIsIi8vVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkLiBETyBOT1QgRURJVCFcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBSb2JvdFJhY29udGV1cldlYjtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleCB7XHJcblxyXG5wdWJsaWMgY2xhc3MgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXhGYWN0b3J5IDogU2VydmljZUZhY3Rvcnkge1xyXG4gICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZTdHJpbmcoKSB7XHJcbiAgICBjb25zdCBzdHJpbmcgZD1AXCJzZXJ2aWNlIFJvYm90UmFjb250ZXVyU2VydmljZUluZGV4XHJcbnN0cnVjdCBOb2RlSW5mb1xyXG5maWVsZCBzdHJpbmcgTm9kZU5hbWVcclxuZmllbGQgdWludDhbMTZdIE5vZGVJRFxyXG5maWVsZCBzdHJpbmd7aW50MzJ9IFNlcnZpY2VJbmRleENvbm5lY3Rpb25VUkxcclxuZW5kIHN0cnVjdFxyXG5zdHJ1Y3QgU2VydmljZUluZm9cclxuZmllbGQgc3RyaW5nIE5hbWVcclxuZmllbGQgc3RyaW5nIFJvb3RPYmplY3RUeXBlXHJcbmZpZWxkIHN0cmluZ3tpbnQzMn0gUm9vdE9iamVjdEltcGxlbWVudHNcclxuZmllbGQgc3RyaW5ne2ludDMyfSBDb25uZWN0aW9uVVJMXHJcbmZpZWxkIHZhcnZhbHVle3N0cmluZ30gQXR0cmlidXRlc1xyXG5lbmQgc3RydWN0XHJcbm9iamVjdCBTZXJ2aWNlSW5kZXhcclxuZnVuY3Rpb24gU2VydmljZUluZm97aW50MzJ9IEdldExvY2FsTm9kZVNlcnZpY2VzKClcclxuZnVuY3Rpb24gTm9kZUluZm97aW50MzJ9IEdldFJvdXRlZE5vZGVzKClcclxuZnVuY3Rpb24gTm9kZUluZm97aW50MzJ9IEdldERldGVjdGVkTm9kZXMoKVxyXG5ldmVudCBMb2NhbE5vZGVTZXJ2aWNlc0NoYW5nZWQoKVxyXG5lbmQgb2JqZWN0XCI7XHJcbiAgICByZXR1cm4gZDtcclxuICAgIH1cclxuLy9wdWJsaWMgUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXhGYWN0b3J5KFJvYm90UmFjb250ZXVyTm9kZSBub2RlPW51bGwpIDogYmFzZShub2RlKSB7fVxyXG4gICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXRTZXJ2aWNlTmFtZSgpIHtyZXR1cm4gXCJSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleFwiO31cclxuICAgIHB1YmxpYyBOb2RlSW5mb19zdHViIE5vZGVJbmZvX3N0dWJlbnRyeTtcclxuICAgIHB1YmxpYyBTZXJ2aWNlSW5mb19zdHViIFNlcnZpY2VJbmZvX3N0dWJlbnRyeTtcclxuICAgIHB1YmxpYyBSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleEZhY3RvcnkoUm9ib3RSYWNvbnRldXJOb2RlIG5vZGU9bnVsbCkgOiBiYXNlKG5vZGUpIHtcclxuICAgIE5vZGVJbmZvX3N0dWJlbnRyeT1uZXcgTm9kZUluZm9fc3R1Yih0aGlzKTtcclxuICAgIFNlcnZpY2VJbmZvX3N0dWJlbnRyeT1uZXcgU2VydmljZUluZm9fc3R1Yih0aGlzKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvdmVycmlkZSBJU3RydWN0dXJlU3R1YiBGaW5kU3RydWN0dXJlU3R1YihzdHJpbmcgb2JqZWN0dHlwZSkge1xyXG4gICAgc3RyaW5nIG9ianNob3J0PVJlbW92ZVBhdGgob2JqZWN0dHlwZSk7XHJcbiAgICBzd2l0Y2ggKG9ianNob3J0KSB7XHJcbiAgICBjYXNlIFwiTm9kZUluZm9cIjpcclxuICAgIHJldHVybiAgTm9kZUluZm9fc3R1YmVudHJ5O1xyXG4gICAgY2FzZSBcIlNlcnZpY2VJbmZvXCI6XHJcbiAgICByZXR1cm4gIFNlcnZpY2VJbmZvX3N0dWJlbnRyeTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBEYXRhVHlwZUV4Y2VwdGlvbihcIkNhbm5vdCBmaW5kIGFwcHJvcHJpYXRlIHN0cnVjdHVyZSBzdHViXCIpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG92ZXJyaWRlIE1lc3NhZ2VFbGVtZW50U3RydWN0dXJlIFBhY2tTdHJ1Y3R1cmUoT2JqZWN0IHMpIHtcclxuICAgIGlmIChzPT1udWxsKSByZXR1cm4gbnVsbDtcclxuICAgIHN0cmluZyBvYmp0eXBlPVNlcnZpY2VEZWZpbml0aW9uVXRpbC5GaW5kU3RydWN0UlJUeXBlKHMuR2V0VHlwZSgpKTtcclxuICAgIGlmIChTZXJ2aWNlRGVmaW5pdGlvblV0aWwuU3BsaXRRdWFsaWZpZWROYW1lKG9ianR5cGUpLkl0ZW0xID09IFwiUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXhcIikge1xyXG4gICAgc3RyaW5nIG9ianNob3J0PVJlbW92ZVBhdGgob2JqdHlwZSk7XHJcbiAgICBzd2l0Y2ggKG9ianNob3J0KSB7XHJcbiAgICBjYXNlIFwiTm9kZUluZm9cIjpcclxuICAgIHJldHVybiAgTm9kZUluZm9fc3R1YmVudHJ5LlBhY2tTdHJ1Y3R1cmUocyk7XHJcbiAgICBjYXNlIFwiU2VydmljZUluZm9cIjpcclxuICAgIHJldHVybiAgU2VydmljZUluZm9fc3R1YmVudHJ5LlBhY2tTdHJ1Y3R1cmUocyk7XHJcbiAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGJhc2UuUGFja1N0cnVjdHVyZShzKTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFeGNlcHRpb24oKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvdmVycmlkZSBUIFVucGFja1N0cnVjdHVyZTxUPihNZXNzYWdlRWxlbWVudFN0cnVjdHVyZSBsKSB7XHJcbiAgICBpZiAobD09bnVsbCkgcmV0dXJuIGRlZmF1bHQoVCk7XHJcbiAgICBpZiAoU2VydmljZURlZmluaXRpb25VdGlsLlNwbGl0UXVhbGlmaWVkTmFtZShsLlR5cGUpLkl0ZW0xID09IFwiUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXhcIikge1xyXG4gICAgc3RyaW5nIG9ianNob3J0PVJlbW92ZVBhdGgobC5UeXBlKTtcclxuICAgIHN3aXRjaCAob2Jqc2hvcnQpIHtcclxuICAgIGNhc2UgXCJOb2RlSW5mb1wiOlxyXG4gICAgcmV0dXJuICBOb2RlSW5mb19zdHViZW50cnkuVW5wYWNrU3RydWN0dXJlPFQ+KGwpO1xyXG4gICAgY2FzZSBcIlNlcnZpY2VJbmZvXCI6XHJcbiAgICByZXR1cm4gIFNlcnZpY2VJbmZvX3N0dWJlbnRyeS5VbnBhY2tTdHJ1Y3R1cmU8VD4obCk7XHJcbiAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGJhc2UuVW5wYWNrU3RydWN0dXJlPFQ+KGwpO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IERhdGFUeXBlRXhjZXB0aW9uKFwiQ291bGQgbm90IHVucGFjayBzdHJ1Y3R1cmVcIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgU2VydmljZVN0dWIgQ3JlYXRlU3R1YihzdHJpbmcgb2JqZWN0dHlwZSwgc3RyaW5nIHBhdGgsIENsaWVudENvbnRleHQgY29udGV4dCkge1xyXG4gICAgaWYgKFNlcnZpY2VEZWZpbml0aW9uVXRpbC5TcGxpdFF1YWxpZmllZE5hbWUob2JqZWN0dHlwZSkuSXRlbTEgPT0gXCJSb2JvdFJhY29udGV1clNlcnZpY2VJbmRleFwiKSB7XHJcbiAgICBzdHJpbmcgb2Jqc2hvcnQ9UmVtb3ZlUGF0aChvYmplY3R0eXBlKTtcclxuICAgIHN3aXRjaCAob2Jqc2hvcnQpIHtcclxuICAgIGNhc2UgXCJTZXJ2aWNlSW5kZXhcIjpcclxuICAgIHJldHVybiBuZXcgU2VydmljZUluZGV4X3N0dWIocGF0aCxjb250ZXh0KTtcclxuICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gYmFzZS5DcmVhdGVTdHViKG9iamVjdHR5cGUscGF0aCxjb250ZXh0KTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKFwiQ291bGQgbm90IGNyZWF0ZSBzdHViXCIpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG92ZXJyaWRlIFNlcnZpY2VTa2VsIENyZWF0ZVNrZWwoc3RyaW5nIHBhdGgsb2JqZWN0IG9iaixTZXJ2ZXJDb250ZXh0IGNvbnRleHQpIHtcclxuICAgIHN0cmluZyBvYmp0eXBlPVNlcnZpY2VEZWZpbml0aW9uVXRpbC5GaW5kT2JqZWN0UlJUeXBlKG9iaik7XHJcbiAgICBpZiAoU2VydmljZURlZmluaXRpb25VdGlsLlNwbGl0UXVhbGlmaWVkTmFtZShvYmp0eXBlKS5JdGVtMSA9PSBcIlJvYm90UmFjb250ZXVyU2VydmljZUluZGV4XCIpIHtcclxuICAgIHN0cmluZyBzb2JqdHlwZT1SZW1vdmVQYXRoKG9ianR5cGUpO1xyXG4gICAgc3dpdGNoKHNvYmp0eXBlKSB7XHJcbiAgICBjYXNlIFwiU2VydmljZUluZGV4XCI6XHJcbiAgICByZXR1cm4gbmV3IFNlcnZpY2VJbmRleF9za2VsKHBhdGgsKFNlcnZpY2VJbmRleClvYmosY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGJhc2UuQ3JlYXRlU2tlbChwYXRoLG9iaixjb250ZXh0KTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKFwiQ291bGQgbm90IGNyZWF0ZSBza2VsXCIpO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBJUG9kU3R1YiBGaW5kUG9kU3R1YihzdHJpbmcgb2JqZWN0dHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIElOYW1lZEFycmF5U3R1YiBGaW5kTmFtZWRBcnJheVN0dWIoc3RyaW5nIG9iamVjdHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5bUm9ib3RSYWNvbnRldXJTZXJ2aWNlU3RydWN0KFwiUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguTm9kZUluZm9cIildXHJcbnB1YmxpYyBjbGFzcyBOb2RlSW5mbyB7XHJcbiAgICBwdWJsaWMgc3RyaW5nIE5vZGVOYW1lO1xyXG4gICAgcHVibGljIGJ5dGVbXSBOb2RlSUQ7XHJcbiAgICBwdWJsaWMgRGljdGlvbmFyeTxpbnQsc3RyaW5nPiBTZXJ2aWNlSW5kZXhDb25uZWN0aW9uVVJMO1xyXG59XHJcblxyXG5bUm9ib3RSYWNvbnRldXJTZXJ2aWNlU3RydWN0KFwiUm9ib3RSYWNvbnRldXJTZXJ2aWNlSW5kZXguU2VydmljZUluZm9cIildXHJcbnB1YmxpYyBjbGFzcyBTZXJ2aWNlSW5mbyB7XHJcbiAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICBwdWJsaWMgc3RyaW5nIFJvb3RPYmplY3RUeXBlO1xyXG4gICAgcHVibGljIERpY3Rpb25hcnk8aW50LHN0cmluZz4gUm9vdE9iamVjdEltcGxlbWVudHM7XHJcbiAgICBwdWJsaWMgRGljdGlvbmFyeTxpbnQsc3RyaW5nPiBDb25uZWN0aW9uVVJMO1xyXG4gICAgcHVibGljIERpY3Rpb25hcnk8c3RyaW5nLG9iamVjdD4gQXR0cmlidXRlcztcclxufVxyXG5cclxuW1JvYm90UmFjb250ZXVyU2VydmljZU9iamVjdEludGVyZmFjZShcIlJvYm90UmFjb250ZXVyU2VydmljZUluZGV4LlNlcnZpY2VJbmRleFwiKV1cclxucHVibGljIGludGVyZmFjZSBTZXJ2aWNlSW5kZXggIHtcclxuXHJcbiAgICBUYXNrPERpY3Rpb25hcnk8aW50LFNlcnZpY2VJbmZvPj4gR2V0TG9jYWxOb2RlU2VydmljZXMoQ2FuY2VsbGF0aW9uVG9rZW4gcnJfY2FuY2VsPWRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuICAgIFRhc2s8RGljdGlvbmFyeTxpbnQsTm9kZUluZm8+PiBHZXRSb3V0ZWROb2RlcyhDYW5jZWxsYXRpb25Ub2tlbiBycl9jYW5jZWw9ZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG4gICAgVGFzazxEaWN0aW9uYXJ5PGludCxOb2RlSW5mbz4+IEdldERldGVjdGVkTm9kZXMoQ2FuY2VsbGF0aW9uVG9rZW4gcnJfY2FuY2VsPWRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuXHJcbiAgICBldmVudCBBY3Rpb24gTG9jYWxOb2RlU2VydmljZXNDaGFuZ2VkO1xyXG5cclxuXHJcblxyXG59XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IDIwMTEtMjAxOSBXYXNvbiBUZWNobm9sb2d5LCBMTENcclxuLy9cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy9cclxuLy8gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbi8vXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucztcclxuI2lmICFST0JPVFJBQ09OVEVVUl9CUklER0VcclxudXNpbmcgU3lzdGVtLk5ldC5TZWN1cml0eTtcclxudXNpbmcgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5YNTA5Q2VydGlmaWNhdGVzO1xyXG51c2luZyBTeXN0ZW0uU2VjdXJpdHkuQXV0aGVudGljYXRpb247XHJcbiNlbmRpZlxyXG51c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBSb2JvdFJhY29udGV1cldlYiBcclxue1xyXG5cclxucHVibGljIGFic3RyYWN0IGNsYXNzIEFzeW5jU3RyZWFtVHJhbnNwb3J0IDogSVRyYW5zcG9ydENvbm5lY3Rpb25cclxue1xyXG4gICAgcHVibGljIHVpbnQgTG9jYWxFbmRwb2ludCB7IGdldCB7IHJldHVybiBtX0xvY2FsRW5kcG9pbnQ7IH0gfVxyXG4gICAgcHJvdGVjdGVkIHVpbnQgbV9Mb2NhbEVuZHBvaW50PTA7XHJcbiAgICBwdWJsaWMgdWludCBSZW1vdGVFbmRwb2ludCB7IGdldCB7IHJldHVybiBtX1JlbW90ZUVuZHBvaW50OyB9IH1cclxuICAgIHByb3RlY3RlZCB1aW50IG1fUmVtb3RlRW5kcG9pbnQ9MDtcclxuXHJcbiAgICBwdWJsaWMgTm9kZUlEIFJlbW90ZU5vZGVJRCB7IGdldCB7IGxvY2sgKHRoaXMpIHsgcmV0dXJuIG1fUmVtb3RlTm9kZUlEOyB9IH0gfVxyXG4gICAgcHJvdGVjdGVkIE5vZGVJRCBtX1JlbW90ZU5vZGVJRD1Ob2RlSUQuQW55O1xyXG5cclxuICAgIHByb3RlY3RlZCBOb2RlSUQgdGFyZ2V0X25vZGVpZD1udWxsO1xyXG4gICAgcHJvdGVjdGVkIHN0cmluZyB0YXJnZXRfbm9kZW5hbWU9bnVsbDtcclxuICAgIHByb3RlY3RlZCBib29sIGlzX3NlcnZlciA9IGZhbHNlO1xyXG5cclxuICAgIHByb3RlY3RlZCByZWFkb25seSBSb2JvdFJhY29udGV1ck5vZGUgbm9kZTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgQXN5bmNTdHJlYW1UcmFuc3BvcnRQYXJlbnQgcGFyZW50O1xyXG5cclxuICAgIHByb3RlY3RlZCBBc3luY1N0cmVhbVRyYW5zcG9ydChSb2JvdFJhY29udGV1ck5vZGUgbm9kZSwgQXN5bmNTdHJlYW1UcmFuc3BvcnRQYXJlbnQgcGFyZW50KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByb3RlY3RlZCBib29sIG1fQ29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgYm9vbCBDb25uZWN0ZWQgeyBcclxuICAgICAgICBnZXQgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbV9Db25uZWN0ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByb3RlY3RlZCBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSBjYW5jZWxsYXRpb25Ub2tlbiA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xyXG5cclxuICAgIHByb3RlY3RlZCBNZW1vcnlTdHJlYW0gbXdyaXRlO1xyXG4gICAgcHJvdGVjdGVkIE1lbW9yeVN0cmVhbSBtcmVhZDtcclxuICAgIHByaXZhdGUgYnl0ZVtdIHJlY2J1ZjtcclxuICAgIHByaXZhdGUgYnl0ZVtdIHNlbmRidWY7XHJcblxyXG4gICAgcHJvdGVjdGVkIEFycmF5QmluYXJ5V3JpdGVyIHN3cml0ZXI7XHJcbiAgICBwcm90ZWN0ZWQgQXJyYXlCaW5hcnlSZWFkZXIgc3JlYWRlcjtcclxuXHJcbiAgICBcclxuXHJcbiAgICBwcm90ZWN0ZWQgU3RyZWFtIGJhc2VzdHJlYW07XHJcblxyXG5cclxuICAgIHByb3RlY3RlZCBib29sIG1fUmVxdWlyZVRscyA9IGZhbHNlO1xyXG4gICAgcHVibGljIGJvb2wgUmVxdWlyZVRscyB7IGdldCB7IHJldHVybiBtX1JlcXVpcmVUbHM7IH0gfVxyXG5cclxuICAgIHByb3RlY3RlZCBib29sIG1fSXNUbHMgPSBmYWxzZTtcclxuICAgIHB1YmxpYyBib29sIElzVGxzIHsgZ2V0IHsgcmV0dXJuIG1fSXNUbHM7IH0gfVxyXG5cclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFRhc2sgQ29ubmVjdFN0cmVhbShTdHJlYW0gcywgYm9vbCBpc19zZXJ2ZXIsIE5vZGVJRCB0YXJnZXRfbm9kZWlkLCBzdHJpbmcgdGFyZ2V0X25vZGVuYW1lLCBib29sIHN0YXJ0dGxzLCBib29sIHJlcXVpcmV0bHMsIGludCBoZWFydGJlYXRfcGVyaW9kLCBDYW5jZWxsYXRpb25Ub2tlbiBjYW5jZWwpXHJcbiAgICB7IFxyXG4gICAgICAgIG1fSGVhcnRiZWF0UGVyaW9kID0gaGVhcnRiZWF0X3BlcmlvZDtcclxuICAgICAgICB0aGlzLm1fUmVxdWlyZVRscyA9IHJlcXVpcmV0bHM7XHJcbiAgICAgICAgc2VuZGJ1ZiA9IG5ldyBieXRlWzEwMDAwMF07XHJcbiAgICAgICAgbXdyaXRlID0gbmV3IE1lbW9yeVN0cmVhbShzZW5kYnVmKTtcclxuXHJcbiAgICAgICAgcmVjYnVmID0gbmV3IGJ5dGVbMTAwMDAwXTtcclxuICAgICAgICBtcmVhZCA9IG5ldyBNZW1vcnlTdHJlYW0ocmVjYnVmKTtcclxuXHJcbiAgICAgICAgc3dyaXRlciA9IG5ldyBBcnJheUJpbmFyeVdyaXRlcihtd3JpdGUsIHNlbmRidWYsIHNlbmRidWYuTGVuZ3RoKTtcclxuICAgICAgICBzcmVhZGVyID0gbmV3IEFycmF5QmluYXJ5UmVhZGVyKG1yZWFkLCByZWNidWYscmVjYnVmLkxlbmd0aCk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNfc2VydmVyID0gaXNfc2VydmVyO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0X25vZGVuYW1lID0gdGFyZ2V0X25vZGVuYW1lO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0X25vZGVpZCA9IHRhcmdldF9ub2RlaWQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldF9ub2RlbmFtZSA9PSBudWxsKSB0aGlzLnRhcmdldF9ub2RlbmFtZSA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0X25vZGVpZCA9PSBudWxsKSB0aGlzLnRhcmdldF9ub2RlaWQgPSBOb2RlSUQuQW55O1xyXG5cclxuICAgICAgICBiYXNlc3RyZWFtID0gcztcclxuICAgICAgICBcclxuICAgICAgICB0bGFzdHNlbmQgPSBEYXRlVGltZS5VdGNOb3c7XHJcbiAgICAgICAgdGxhc3RyZWMgPSBEYXRlVGltZS5VdGNOb3c7XHJcbiAgICAgICAgdGxhc3RyZWNfbWVzID0gRGF0ZVRpbWUuVXRjTm93O1xyXG5cclxuICAgICAgIFRhc2sgcmVjdnRhc2sgPSBEb1JlY2VpdmUoKTtcclxuXHJcbiAgICAgICAgaWYgKCFpc19zZXJ2ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0dGxzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4jaWYgIVJPQk9UUkFDT05URVVSX0JSSURHRVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgRG9DbGllbnRUbHNIYW5kc2hha2UoY2FuY2VsKTtcclxuI2Vsc2VcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oXCJUTFMgc3VwcG9ydCBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiNlbmRpZlxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTm9kZUlEIHJpZCA9IChOb2RlSUQpYXdhaXQgU3RyZWFtT3AoXCJDcmVhdGVDb25uZWN0aW9uXCIsIFR1cGxlLkNyZWF0ZTxOb2RlSUQsc3RyaW5nPih0aGlzLnRhcmdldF9ub2RlaWQsIHRoaXMudGFyZ2V0X25vZGVuYW1lKSwgY2FuY2VsKTtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbV9SZW1vdGVOb2RlSUQgPSByaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBub29wID0gRG9IZWFydGJlYXQoKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGJvb2wgcmVxdWVzdF9yZWNlaXZlX3BhdXNlPWZhbHNlO1xyXG4gICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiByZXF1ZXN0X3JlY2VpdmVfcGF1c2VfdGFzayA9IG51bGw7XHJcbiAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+IHBhdXNlX3JlY2VpdmVfdGFzaz1udWxsO1xyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBUYXNrIFJlcXVlc3RSZWNlaXZlUGF1c2UoKVxyXG4gICAge1xyXG4gICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gcmVxdWVzdF9wYXVzZV90YXNrMSA9IG5ldyBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+KCk7XHJcbiAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0X3JlY2VpdmVfcGF1c2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0X3JlY2VpdmVfcGF1c2VfdGFzayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RfcGF1c2VfdGFzazEgPSByZXF1ZXN0X3JlY2VpdmVfcGF1c2VfdGFzaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0X3JlY2VpdmVfcGF1c2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF9yZWNlaXZlX3BhdXNlX3Rhc2sgPSByZXF1ZXN0X3BhdXNlX3Rhc2sxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCByZXF1ZXN0X3BhdXNlX3Rhc2sxLlRhc2s7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIFRhc2sgUmVzdW1lUmVjZWl2ZVBhdXNlKClcclxuICAgIHtcclxuICAgICAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+IHBhdXNlX3Rhc2sxID0gbnVsbDtcclxuICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVxdWVzdF9yZWNlaXZlX3BhdXNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBhdXNlX3Rhc2sxID0gcGF1c2VfcmVjZWl2ZV90YXNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGF1c2VfdGFzazEgIT0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBhdXNlX3Rhc2sxLlRyeVNldFJlc3VsdCgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8aW50PigwKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFRhc2sgRG9SZWNlaXZlKClcclxuICAgIHtcclxuICAgICAgICB0cnlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLkNvbm5lY3RlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiByZXF1ZXN0X3BhdXNlX3Rhc2sxPW51bGw7XHJcbiAgICAgICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0X3JlY2VpdmVfcGF1c2UpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXVzZV9yZWNlaXZlX3Rhc2sgPSBuZXcgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0X3BhdXNlX3Rhc2sxID0gcmVxdWVzdF9yZWNlaXZlX3BhdXNlX3Rhc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RfcmVjZWl2ZV9wYXVzZV90YXNrID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGF1c2VfcmVjZWl2ZV90YXNrICE9IG51bGwgJiYgcmVxdWVzdF9wYXVzZV90YXNrMSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RfcGF1c2VfdGFzazEuVHJ5U2V0UmVzdWx0KDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBhdXNlX3JlY2VpdmVfdGFzay5UYXNrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF1c2VfcmVjZWl2ZV90YXNrID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgbWVtcG9zID0gMDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChtZW1wb3MgPCA4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBuID0gYXdhaXQgUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLkNvbmZpZ3VyZUF3YWl0PGludD4oYmFzZXN0cmVhbS5SZWFkQXN5bmMocmVjYnVmLCBtZW1wb3MsIDggLSBtZW1wb3MpLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtZW1wb3MgKz0gbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzdHJpbmcgc2VlZCA9IEFTQ0lJRW5jb2RpbmcuQVNDSUkuR2V0U3RyaW5nKHJlY2J1ZiwgMCwgNCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VlZCAhPSBcIlJSQUNcIikgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiSW52YWxpZCBzZWVkXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBtZXNsZW5ndGggPSAoaW50KUJpdENvbnZlcnRlci5Ub1VJbnQzMihyZWNidWYsIDQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZWNidWYuTGVuZ3RoIDwgbWVzbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBuZXdidWYgPSBuZXcgYnl0ZVsoaW50KShtZXNsZW5ndGggKiAxLjIpXTtcclxuICAgICAgICAgICAgICAgICAgICBCdWZmZXIuQmxvY2tDb3B5KHJlY2J1ZiwgMCwgbmV3YnVmLCAwLCA4KTtcclxuICAgICAgICAgICAgICAgICAgICByZWNidWYgPSBuZXdidWY7XHJcbiAgICAgICAgICAgICAgICAgICAgbXJlYWQgPSBuZXcgTWVtb3J5U3RyZWFtKHJlY2J1ZiwgMCwgcmVjYnVmLkxlbmd0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JlYWRlciA9IG5ldyBBcnJheUJpbmFyeVJlYWRlcihtcmVhZCwgcmVjYnVmLHJlY2J1Zi5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChtZW1wb3MgPCBtZXNsZW5ndGgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IG4gPSBhd2FpdCBSb2JvdFJhY29udGV1cldlYi5FeHRlbnNpb25zLkV4dGVuc2lvbnMuQ29uZmlndXJlQXdhaXQ8aW50PihiYXNlc3RyZWFtLlJlYWRBc3luYyhyZWNidWYsIG1lbXBvcywgbWVzbGVuZ3RoIC0gbWVtcG9zKSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbWVtcG9zICs9IG47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1lbXBvcyA9PSBtZXNsZW5ndGgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbXJlYWQuUG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmVhZGVyLlJlc2V0KG1lc2xlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UgbWVzID0gbmV3IE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzLlJlYWQoc3JlYWRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG1lcy5lbnRyaWVzLkNvdW50ID09IDEpICYmIChtZXMuZW50cmllc1swXS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5TdHJlYW1PcCB8fCBtZXMuZW50cmllc1swXS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5TdHJlYW1PcFJldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuI2lmICFST0JPVFJBQ09OVEVVUl9CUklER0VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXMuZW50cmllc1swXS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5TdHJlYW1PcCAmJiBtZXMuZW50cmllc1swXS5NZW1iZXJOYW1lID09IFwiU1RBUlRUTFNcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IGVuZm9yY2UgZGlyZWN0aW9uIG9mIGhhbmRzaGFrZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IERvU2VydmVyVGxzSGFuZHNoYWtlKG1lcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWVzLmVudHJpZXNbMF0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuU3RyZWFtT3BSZXQgJiYgbWVzLmVudHJpZXNbMF0uTWVtYmVyTmFtZSA9PSBcIlNUQVJUVExTXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBlbmZvcmNlIGRpcmVjdGlvbiBvZiBoYW5kc2hha2VcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZT4gcmV0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gd2FpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gY2xpZW50aGFuZHNoYWtlX3JlY3ZfdGFzaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCA9IGNsaWVudGhhbmRzaGFrZV9yZWN2X2RvbmVfdGFzaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXQgPT0gbnVsbCB8fCB3YWl0ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0ICE9IG51bGwpIHJldC5UcnlTZXRDYW5jZWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuVHJ5U2V0UmVzdWx0KG1lcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHdhaXQuVGFzaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4jZW5kaWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBTdHJlYW1PcE1lc3NhZ2VSZWNlaXZlZChtZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRhc2sgbm9vcD0gUHJvY2Vzc01lc3NhZ2UobWVzKS5JZ25vcmVSZXN1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHZpcnR1YWwgYXN5bmMgVGFzayBQcm9jZXNzTWVzc2FnZShNZXNzYWdlIG1lcylcclxuICAgIHtcclxuICAgICAgICB0cnlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVJRCBSZW1vdGVOb2RlSUQxO1xyXG4gICAgICAgICAgICB1aW50IGxvY2FsX2VwO1xyXG4gICAgICAgICAgICB1aW50IHJlbW90ZV9lcDtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVtb3RlTm9kZUlEMSA9IG1fUmVtb3RlTm9kZUlEO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxfZXAgPSBtX0xvY2FsRW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICByZW1vdGVfZXAgPSBtX1JlbW90ZUVuZHBvaW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoUmVxdWlyZVRscyAmJiAhSXNUbHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvb2wgYmFkX21lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lcy5lbnRyaWVzLkNvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lcy5lbnRyaWVzWzBdLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlN0cmVhbU9wICYmIG1lcy5lbnRyaWVzWzBdLk1lbWJlck5hbWUgPT0gXCJTVEFSVFRMU1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFkX21lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYmFkX21lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChJc1RscylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFSZW1vdGVOb2RlSUQxLklzQW55Tm9kZSlcclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJlbW90ZU5vZGVJRDEgIT0gbWVzLmhlYWRlci5TZW5kZXJOb2RlSUQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0MSA9IG5vZGUuR2VuZXJhdGVFcnJvclJldHVybk1lc3NhZ2UobWVzLCBNZXNzYWdlRXJyb3JUeXBlLk5vZGVOb3RGb3VuZCwgXCJSb2JvdFJhY29udGV1ck5vZGUuTm9kZU5vdEZvdW5kXCIsIFwiSW52YWxpZCBzZW5kZXIgbm9kZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldDEuZW50cmllcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhc2sgbm9vcCA9IFNlbmRNZXNzYWdlKHJldDEsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobG9jYWxfZXAgIT0gMCAmJiByZW1vdGVfZXAgIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxfZXAgIT0gbWVzLmhlYWRlci5SZWNlaXZlckVuZHBvaW50IHx8IHJlbW90ZV9lcCAhPSBtZXMuaGVhZGVyLlNlbmRlckVuZHBvaW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldDEgPSBub2RlLkdlbmVyYXRlRXJyb3JSZXR1cm5NZXNzYWdlKG1lcywgTWVzc2FnZUVycm9yVHlwZS5JbnZhbGlkRW5kcG9pbnQsIFwiUm9ib3RSYWNvbnRldXJOb2RlLkludmFsaWRFbmRwb2ludFwiLCBcIkludmFsaWQgc2VuZGVyIGVuZHBvaW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0MS5lbnRyaWVzLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFzayBub29wID0gU2VuZE1lc3NhZ2UocmV0MSwgZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICBNZXNzYWdlIHJldCA9IGF3YWl0IHBhcmVudC5TcGVjaWFsUmVxdWVzdChtZXMpO1xyXG4gICAgICAgICAgICBpZiAocmV0ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgobWVzLmVudHJpZXNbMF0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuQ29ubmVjdGlvblRlc3QgfHwgbWVzLmVudHJpZXNbMF0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuQ29ubmVjdGlvblRlc3RSZXQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lcy5lbnRyaWVzWzBdLkVycm9yICE9IE1lc3NhZ2VFcnJvclR5cGUuTm9uZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyZXQuZW50cmllc1swXS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5Db25uZWN0Q2xpZW50UmV0IHx8IHJldC5lbnRyaWVzWzBdLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlJlY29ubmVjdENsaWVudCkgJiYgcmV0LmVudHJpZXNbMF0uRXJyb3IgPT0gTWVzc2FnZUVycm9yVHlwZS5Ob25lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldC5oZWFkZXIuU2VuZGVyTm9kZUlEID09IG5vZGUuTm9kZUlEKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbV9SZW1vdGVFbmRwb2ludCA9IHJldC5oZWFkZXIuUmVjZWl2ZXJFbmRwb2ludDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1fTG9jYWxFbmRwb2ludCA9IHJldC5oZWFkZXIuU2VuZGVyRW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuQWRkVHJhbnNwb3J0Q29ubmVjdGlvbihyZXQuaGVhZGVyLlNlbmRlckVuZHBvaW50LCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETzogSGFuZGxlIHRoaXMgYmV0dGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzLmVudHJpZXNbMF0uRW50cnlUeXBlICE9IE1lc3NhZ2VFbnRyeVR5cGUuQ29ubmVjdGlvblRlc3QgJiYgbWVzLmVudHJpZXNbMF0uRW50cnlUeXBlICE9IE1lc3NhZ2VFbnRyeVR5cGUuQ29ubmVjdGlvblRlc3RSZXQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bGFzdHJlYyA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBUYXNrIG5vb3AgPSBTZW5kTWVzc2FnZShyZXQsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB0bGFzdHJlYyA9IERhdGVUaW1lLlV0Y05vdztcclxuXHJcbiAgICAgICAgICAgIGlmICgobWVzLmVudHJpZXMuQ291bnQgPT0gMSkgJiYgKG1lcy5lbnRyaWVzWzBdLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlN0cmVhbU9wIHx8IG1lcy5lbnRyaWVzWzBdLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlN0cmVhbU9wUmV0KSlcclxuICAgICAgICAgICAge1xyXG4jaWYgIVJPQk9UUkFDT05URVVSX0JSSURHRVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lcy5lbnRyaWVzWzBdLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlN0cmVhbU9wICYmIG1lcy5lbnRyaWVzWzBdLk1lbWJlck5hbWUgPT0gXCJTVEFSVFRMU1wiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IERvU2VydmVyVGxzSGFuZHNoYWtlKG1lcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiNlbmRpZlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgU3RyZWFtT3BNZXNzYWdlUmVjZWl2ZWQobWVzKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAobWVzLmVudHJpZXMuQ291bnQgPT0gMSAmJiAobWVzLmVudHJpZXNbMF0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuU3RyZWFtQ2hlY2tDYXBhYmlsaXR5IHx8IG1lcy5lbnRyaWVzWzBdLkVudHJ5VHlwZSA9PSBNZXNzYWdlRW50cnlUeXBlLlN0cmVhbUNoZWNrQ2FwYWJpbGl0eVJldCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoZWNrU3RyZWFtQ2FwYWJpbGl0eV9NZXNzYWdlUmVjZWl2ZWQobWVzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1lcy5lbnRyaWVzLkNvdW50ID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtZXMuZW50cmllc1swXS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5Db25uZWN0Q2xpZW50UmV0ICYmIHJlbW90ZV9lcCA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobV9SZW1vdGVFbmRwb2ludCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtX1JlbW90ZUVuZHBvaW50ID0gbWVzLmhlYWRlci5TZW5kZXJFbmRwb2ludDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVfZXAgPSBtX1JlbW90ZUVuZHBvaW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChJc1RscylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsX2VwID09IDAgfHwgcmVtb3RlX2VwID09IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lcy5lbnRyaWVzLkNvdW50ICE9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb21tYW5kID0gbWVzLmVudHJpZXNbMF0uRW50cnlUeXBlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCh1c2hvcnQpY29tbWFuZCA+IDUwMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgaWYgKCEoKG1lcy5lbnRyaWVzLkNvdW50ID09IDEpICYmICgobWVzLmVudHJpZXNbMF0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuQ29ubmVjdGlvblRlc3QpIHx8IChtZXMuZW50cmllc1swXS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5Db25uZWN0aW9uVGVzdFJldCkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGxhc3RyZWNfbWVzID0gRGF0ZVRpbWUuVXRjTm93O1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvY2Vzc01lc3NhZ2UyKG1lcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyB2aXJ0dWFsIGFzeW5jIFRhc2sgUHJvY2Vzc01lc3NhZ2UyKE1lc3NhZ2UgbSlcclxuICAgIHtcclxuICAgICAgICB0cnlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRyYW5zcG9ydC5tX0N1cnJlbnRUaHJlYWRUcmFuc3BvcnRDb25uZWN0aW9uVVJMID0gR2V0Q29ubmVjdGlvblVSTCgpO1xyXG4gICAgICAgICAgICBUcmFuc3BvcnQubV9DdXJyZW50VGhyZWFkVHJhbnNwb3J0ID0gdGhpcztcclxuICAgICAgICAgICAgYXdhaXQgTWVzc2FnZVJlY2VpdmVkKG0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVHJhbnNwb3J0Lm1fQ3VycmVudFRocmVhZFRyYW5zcG9ydENvbm5lY3Rpb25VUkwgPSBudWxsO1xyXG4gICAgICAgICAgICBUcmFuc3BvcnQubV9DdXJyZW50VGhyZWFkVHJhbnNwb3J0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZpcnR1YWwgYXN5bmMgVGFzayBNZXNzYWdlUmVjZWl2ZWQoTWVzc2FnZSBtKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IHBhcmVudC5NZXNzYWdlUmVjZWl2ZWQobSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHN0cmluZyBHZXRDb25uZWN0aW9uVVJMKCk7XHJcbiAgICBcclxuXHJcbiAgICBwcml2YXRlIGJvb2wgc2VuZGluZyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBMaXN0PFR1cGxlPFRhc2tDb21wbGV0aW9uU291cmNlPGludD4sIE1lc3NhZ2U+PiBzZW5kX3F1ZXVlID0gbmV3IExpc3Q8VHVwbGU8VGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiwgTWVzc2FnZT4+KCk7XHJcblxyXG4gICAgYm9vbCByZXF1ZXN0X3NlbmRfcGF1c2UgPSBmYWxzZTtcclxuICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gcmVxdWVzdF9zZW5kX3BhdXNlX3Rhc2sgPSBudWxsO1xyXG4gICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiBwYXVzZV9zZW5kX3Rhc2sgPSBudWxsO1xyXG4gICBcclxuXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgVGFzayBSZXF1ZXN0U2VuZFBhdXNlKClcclxuICAgIHtcclxuICAgICAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+IHJlcXVlc3RfcGF1c2VfdGFzazEgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIXNlbmRpbmcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlbmRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0X3BhdXNlX3Rhc2sxID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPGludD4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0X3NlbmRfcGF1c2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Rfc2VuZF9wYXVzZV90YXNrICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0X3BhdXNlX3Rhc2sxID0gcmVxdWVzdF9zZW5kX3BhdXNlX3Rhc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdF9zZW5kX3BhdXNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0X3NlbmRfcGF1c2VfdGFzayA9IHJlcXVlc3RfcGF1c2VfdGFzazE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VuZGluZylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdXNlX3NlbmRfdGFzayA9IG5ldyBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXF1ZXN0X3BhdXNlX3Rhc2sxICE9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCByZXF1ZXN0X3BhdXNlX3Rhc2sxLlRhc2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBUYXNrIFJlc3VtZVNlbmRQYXVzZSgpXHJcbiAgICB7XHJcbiAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiBwYXVzZV90YXNrMSA9IG51bGw7XHJcbiAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Rfc2VuZF9wYXVzZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwYXVzZV90YXNrMSA9IHBhdXNlX3NlbmRfdGFzaztcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHBhdXNlX3Rhc2sxID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZW5kX3F1ZXVlLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHNlbmRfcXVldWVbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VuZF9xdWV1ZS5SZW1vdmVBdCgwKTtcclxuICAgICAgICAgICAgICAgICAgICB0Lkl0ZW0xLlRyeVNldFJlc3VsdCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwYXVzZV90YXNrMSE9bnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBhdXNlX3Rhc2sxLlRyeVNldFJlc3VsdCgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PGludD4oMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZpcnR1YWwgYXN5bmMgVGFzayBTZW5kTWVzc2FnZShNZXNzYWdlIG0sIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgIHsgICAgICAgICAgXHJcblxyXG4gICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gd2FpdGVyPW51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghbV9Db25uZWN0ZWQpIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiVHJhbnNwb3J0IGNvbm5lY3Rpb24gY2xvc2VkXCIpO1xyXG4gICAgICAgICAgICBpZiAoc2VuZGluZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2FpdGVyID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPGludD4oKTtcclxuUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLkF0dGFjaENhbmNlbGxhdGlvblRva2VuPGludD4oICAgICAgICAgICAgICAgIHdhaXRlcixjYW5jZWwsIG5ldyBUaW1lb3V0RXhjZXB0aW9uKFwiVGltZWQgb3V0XCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBib29sIHJlcGxhY2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzZW5kX3F1ZXVlLkNvdW50OylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBib29sIHJlbW92ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaDEgPSBtLmhlYWRlcjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaDIgPSBzZW5kX3F1ZXVlW2ldLkl0ZW0yLmhlYWRlcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaDEuUmVjZWl2ZXJOb2RlTmFtZSA9PSBoMi5SZWNlaXZlck5vZGVOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGgxLlNlbmRlck5vZGVOYW1lID09IGgyLlNlbmRlck5vZGVOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGgxLlJlY2VpdmVyTm9kZUlEID09IGgyLlJlY2VpdmVyTm9kZUlEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGgxLlNlbmRlck5vZGVJRCA9PSBoMi5TZW5kZXJOb2RlSURcclxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgaDEuUmVjZWl2ZXJFbmRwb2ludCA9PSBoMi5SZWNlaXZlckVuZHBvaW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGgxLlNlbmRlckVuZHBvaW50ID09IGgyLlNlbmRlckVuZHBvaW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbmRfcXVldWVbaV0uSXRlbTIuZW50cmllcy5Db3VudCA9PSBtLmVudHJpZXMuQ291bnQgJiYgbS5lbnRyaWVzLkNvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtbTEgPSBzZW5kX3F1ZXVlW2ldLkl0ZW0yLmVudHJpZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW0yID0gbS5lbnRyaWVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1tMS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5Db25uZWN0aW9uVGVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIG1tMi5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5Db25uZWN0aW9uVGVzdCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtbTEuRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuV2lyZVBhY2tldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIG1tMi5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5XaXJlUGFja2V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtbTEuU2VydmljZVBhdGggPT0gbW0yLlNlcnZpY2VQYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIG1tMS5NZW1iZXJOYW1lID09IG1tMi5NZW1iZXJOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGM9c2VuZF9xdWV1ZVtpXS5JdGVtMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZF9xdWV1ZS5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfcXVldWVbaV0gPSBUdXBsZS5DcmVhdGU8VGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PixNZXNzYWdlPih3YWl0ZXIsIG0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVGVsbCB0aGlzIHNlbmQgbWVzc2FnZSB0byByZXR1cm4gaW1tZWRpYXRlbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYy5UcnlTZXRSZXN1bHQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghcmVwbGFjZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VuZF9xdWV1ZS5BZGQoVHVwbGUuQ3JlYXRlPFRhc2tDb21wbGV0aW9uU291cmNlPGludD4sTWVzc2FnZT4od2FpdGVyLCBtKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZW5kaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3YWl0ZXIgIT0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhd2FpdCB3YWl0ZXIuVGFzayAhPSAwKSByZXR1cm47IDtcclxuICAgICAgICAgICAgaWYgKCFDb25uZWN0ZWQpIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiVHJhbnNwb3J0IGNvbm5lY3Rpb24gY2xvc2VkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiByZXF1ZXN0X3BhdXNlX3Rhc2sxID0gbnVsbDtcclxuICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3Rfc2VuZF9wYXVzZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBwYXVzZV9zZW5kX3Rhc2sgPSBuZXcgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PigpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfcGF1c2VfdGFzazEgPSByZXF1ZXN0X3NlbmRfcGF1c2VfdGFzaztcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Rfc2VuZF9wYXVzZV90YXNrID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhdXNlX3NlbmRfdGFzayAhPSBudWxsICYmIHJlcXVlc3RfcGF1c2VfdGFzazEgIT0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RfcGF1c2VfdGFzazEuVHJ5U2V0UmVzdWx0KDApO1xyXG4gICAgICAgICAgICBhd2FpdCBwYXVzZV9zZW5kX3Rhc2suVGFzazsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXVzZV9zZW5kX3Rhc2sgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IG1lc2xlbmd0aCA9IG0uQ29tcHV0ZVNpemUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtZXNsZW5ndGggPiBzZW5kYnVmLkxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VuZGJ1ZiA9IG5ldyBieXRlWyhpbnQpKG1lc2xlbmd0aCAqIDEuMildO1xyXG4gICAgICAgICAgICAgICAgbXdyaXRlID0gbmV3IE1lbW9yeVN0cmVhbShzZW5kYnVmLCAwLCBzZW5kYnVmLkxlbmd0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBzd3JpdGVyID0gbmV3IEFycmF5QmluYXJ5V3JpdGVyKG13cml0ZSwgc2VuZGJ1Ziwgc2VuZGJ1Zi5MZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtd3JpdGUuUG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICBzd3JpdGVyLlJlc2V0KChpbnQpbWVzbGVuZ3RoKTtcclxuICAgICAgICAgICAgbS5Xcml0ZShzd3JpdGVyKTtcclxuXHJcbiAgICAgICAgICAgIHRsYXN0c2VuZCA9IERhdGVUaW1lLlV0Y05vdztcclxuICAgICAgICAgICAgYXdhaXQgUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLkNvbmZpZ3VyZUF3YWl0PGludD4oYmFzZXN0cmVhbS5Xcml0ZUFzeW5jKHNlbmRidWYsIDAsIChpbnQpbXdyaXRlLlBvc2l0aW9uLCBjYW5jZWwpLGZhbHNlKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiBuZXh0X3NlbmQgPSBudWxsO1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VuZF9xdWV1ZS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBzZW5kX3F1ZXVlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbmRfcXVldWUuUmVtb3ZlQXQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dF9zZW5kID0gdC5JdGVtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChuZXh0X3NlbmQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmV4dF9zZW5kLlRyeVNldFJlc3VsdCgwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIERhdGVUaW1lIHRsYXN0c2VuZDtcclxuICAgIHByaXZhdGUgRGF0ZVRpbWUgdGxhc3RyZWM7XHJcbiAgICBwcml2YXRlIERhdGVUaW1lIHRsYXN0cmVjX21lcztcclxuXHJcbiAgICBwdWJsaWMgaW50IFJlY2VpdmVUaW1lb3V0ID0gMjUwMDtcclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIGludCBtX0hlYXJ0YmVhdFBlcmlvZCA9IDUwMDA7XHJcbiAgICBcclxuICAgIHByaXZhdGUgYXN5bmMgVGFzayBEb0hlYXJ0YmVhdCgpXHJcbiAgICB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAobV9Db25uZWN0ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IFRhc2suRGVsYXkoNTAwLCBjYW5jZWxsYXRpb25Ub2tlbi5Ub2tlbik7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmICgoRGF0ZVRpbWUuVXRjTm93IC0gdGxhc3RzZW5kKS5Ub3RhbE1pbGxpc2Vjb25kcyA+IG1fSGVhcnRiZWF0UGVyaW9kKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UgbSA9IG5ldyBNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5oZWFkZXIgPSBuZXcgTWVzc2FnZUhlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG0uaGVhZGVyLlNlbmRlck5vZGVJRCA9IG5vZGUuTm9kZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5Db25uZWN0aW9uVGVzdCwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5lbnRyaWVzLkFkZChtbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFNlbmRNZXNzYWdlKG0sIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoKHRsYXN0c2VuZCAtIHRsYXN0cmVjKS5Ub3RhbE1pbGxpc2Vjb25kcyA+IFJlY2VpdmVUaW1lb3V0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgoRGF0ZVRpbWUuVXRjTm93IC0gdGxhc3RyZWNfbWVzKS5Ub3RhbE1pbGxpc2Vjb25kcyA+IG5vZGUuVHJhbnNwb3J0SW5hY3Rpdml0eVRpbWVvdXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgQ2xvc2UoKVxyXG4gICAge1xyXG4gICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2U+IHIxPW51bGw7XHJcbiAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZT4gcjI9bnVsbDtcclxuXHJcbiAgICAgICAgTGlzdDxUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+PiBxMT1uZXcgTGlzdDxUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+PigpO1xyXG4gICAgICAgIExpc3Q8VGFza0NvbXBsZXRpb25Tb3VyY2U8aW50Pj4gcTIgPSBuZXcgTGlzdDxUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+PigpO1xyXG5cclxuICAgICAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxNZXNzYWdlPiBoMSA9IG51bGw7XHJcbiAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiBoMiA9IG51bGw7XHJcblxyXG5cclxuICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFtX0Nvbm5lY3RlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBtX0Nvbm5lY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5SZW1vdmVUcmFuc3BvcnRDb25uZWN0aW9uKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pIHsgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gc2VuZF9xdWV1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdC5JdGVtMS5UcnlTZXRFeGNlcHRpb24obmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJUcmFuc3BvcnQgY29ubmVjdGlvbiBjbG9zZWRcIikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZW5kX3F1ZXVlLkNsZWFyKCk7XHJcbiAgICAgICBcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gc3RyZWFtb3BfcXVldWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHExLkFkZCh0KTtcclxuICAgICAgICAgICAgICAgIC8vdC5UcnlTZXRFeGNlcHRpb24obmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJUcmFuc3BvcnQgY29ubmVjdGlvbiBjbG9zZWRcIikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdHJlYW1vcF9xdWV1ZS5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgcjEgPSBzdHJlYW1vcF9yZXQ7XHJcbiAgICAgICAgICAgIHN0cmVhbW9wX3JldCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RyZWFtb3BfcmV0IT1udWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHJlYW1vcF9yZXQuVHJ5U2V0RXhjZXB0aW9uKG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiVHJhbnNwb3J0IGNvbm5lY3Rpb24gY2xvc2VkXCIpKTtcclxuICAgICAgICAgICAgICAgIHN0cmVhbW9wX3JldCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIENoZWNrU3RyZWFtQ2FwYWJpbGl0eV9xdWV1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy90LlRyeVNldEV4Y2VwdGlvbihuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIlRyYW5zcG9ydCBjb25uZWN0aW9uIGNsb3NlZFwiKSk7XHJcbiAgICAgICAgICAgICAgICBxMi5BZGQodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIENoZWNrU3RyZWFtQ2FwYWJpbGl0eV9xdWV1ZS5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgLy9DaGVja1N0cmVhbUNhcGFiaWxpdHlfcmV0LlRyeVNldEV4Y2VwdGlvbihuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIlRyYW5zcG9ydCBjb25uZWN0aW9uIGNsb3NlZFwiKSk7XHJcbiAgICAgICAgICAgIHIyID0gQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3JldDtcclxuICAgICAgICAgICAgQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3JldCA9IG51bGw7XHJcbiNpZiAhUk9CT1RSQUNPTlRFVVJfQlJJREdFXHJcbiAgICAgICAgICAgIGgxID0gY2xpZW50aGFuZHNoYWtlX3JlY3ZfdGFzaztcclxuICAgICAgICAgICAgaDIgPSBjbGllbnRoYW5kc2hha2VfcmVjdl9kb25lX3Rhc2s7XHJcbiNlbmRpZlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHIxIT1udWxsKSByMS5UcnlTZXRFeGNlcHRpb24obmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJUcmFuc3BvcnQgY29ubmVjdGlvbiBjbG9zZWRcIikpO1xyXG4gICAgICAgIGlmIChyMiAhPSBudWxsKSByMi5UcnlTZXRFeGNlcHRpb24obmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJUcmFuc3BvcnQgY29ubmVjdGlvbiBjbG9zZWRcIikpO1xyXG5cclxuICAgICAgICBmb3JlYWNoICh2YXIgcSBpbiBxMSkgcS5UcnlTZXRFeGNlcHRpb24obmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJUcmFuc3BvcnQgY29ubmVjdGlvbiBjbG9zZWRcIikpO1xyXG4gICAgICAgIGZvcmVhY2ggKHZhciBxIGluIHEyKSBxLlRyeVNldEV4Y2VwdGlvbihuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIlRyYW5zcG9ydCBjb25uZWN0aW9uIGNsb3NlZFwiKSk7XHJcblxyXG4gICAgICAgIGlmIChoMSAhPSBudWxsKSBoMS5UcnlTZXRDYW5jZWxlZCgpO1xyXG4gICAgICAgIGlmIChoMiAhPSBudWxsKSBoMi5UcnlTZXRDYW5jZWxlZCgpO1xyXG5cclxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbi5DYW5jZWwoKTtcclxuXHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlc3RyZWFtLkNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChFeGNlcHRpb24pIHsgfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHZpcnR1YWwgdm9pZCBDaGVja0Nvbm5lY3Rpb24odWludCBlbmRwb2ludClcclxuICAgIHtcclxuICAgICAgICBpZiAoZW5kcG9pbnQgIT0gTG9jYWxFbmRwb2ludCkgdGhyb3cgbmV3IEludmFsaWRFbmRwb2ludEV4Y2VwdGlvbihcIkluY29ycmVjdCBUcmFuc3BvcnRlbmRwb2ludFwiKTtcclxuXHJcbiAgICAgICAgaWYgKCFtX0Nvbm5lY3RlZCkgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJUcmFuc3BvcnQgbm90IGNvbm5lY3RlZFwiKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIHZpcnR1YWwgVGFzazxNZXNzYWdlRW50cnk+IFBhY2tTdHJlYW1PcFJlcXVlc3Qoc3RyaW5nIGNvbW1hbmQsIG9iamVjdCBhcmdzKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBtbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5TdHJlYW1PcCwgY29tbWFuZCk7XHJcblxyXG4gICAgICAgIGlmIChjb21tYW5kID09IFwiR2V0UmVtb3RlTm9kZUlEXCIpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJVbmtub3duIFN0cmVhbU9wIGNvbW1hbmRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PE1lc3NhZ2VFbnRyeT4obW0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdmlydHVhbCBUYXNrPG9iamVjdD4gVW5wYWNrU3RyZWFtT3BSZXNwb25zZShNZXNzYWdlRW50cnkgcmVzcG9uc2UsIE1lc3NhZ2VIZWFkZXIgaGVhZGVyKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBjb21tYW5kID0gcmVzcG9uc2UuTWVtYmVyTmFtZTtcclxuICAgICAgICBzd2l0Y2ggKGNvbW1hbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIFwiR2V0UmVtb3RlTm9kZUlEXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTm9kZUlEIG4gPSBoZWFkZXIuU2VuZGVyTm9kZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8b2JqZWN0PihuKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQ3JlYXRlQ29ubmVjdGlvblwiOlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLkVycm9yICE9IE1lc3NhZ2VFcnJvclR5cGUuTm9uZSAmJiByZXNwb25zZS5FcnJvciAhPSBNZXNzYWdlRXJyb3JUeXBlLlByb3RvY29sRXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFJvYm90UmFjb250ZXVyRXhjZXB0aW9uVXRpbC5NZXNzYWdlRW50cnlUb0V4Y2VwdGlvbihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbV9SZW1vdGVOb2RlSUQuSXNBbnlOb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLlNlbmRlck5vZGVJRCAhPSBtX1JlbW90ZU5vZGVJRClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIkludmFsaWQgbm9kZSBjb25uZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldF9ub2RlbmFtZSAhPSBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRfbm9kZW5hbWUgIT0gaGVhZGVyLlNlbmRlck5vZGVOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJJbnZhbGlkIG5vZGUgY29ubmVjdGlvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRfbm9kZWlkLklzQW55Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0X25vZGVpZCAhPSBoZWFkZXIuU2VuZGVyTm9kZUlEKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJJbnZhbGlkIG5vZGUgY29ubmVjdGlvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE5vZGVJRCBuID0gaGVhZGVyLlNlbmRlck5vZGVJRDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PG9iamVjdD4obik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWVtYmVyTm90Rm91bmRFeGNlcHRpb24oXCJVbmtub3duIGNvbW1hbmRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdmlydHVhbCBUYXNrPE1lc3NhZ2VFbnRyeT4gUHJvY2Vzc1N0cmVhbU9wUmVxdWVzdChNZXNzYWdlRW50cnkgcmVxdWVzdCwgTWVzc2FnZUhlYWRlciBoZWFkZXIpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGNvbW1hbmQgPSByZXF1ZXN0Lk1lbWJlck5hbWU7XHJcbiAgICAgICAgdmFyIG1tcmV0ID0gbmV3IE1lc3NhZ2VFbnRyeShNZXNzYWdlRW50cnlUeXBlLlN0cmVhbU9wUmV0LCBjb21tYW5kKTtcclxuXHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNvbW1hbmQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZXRSZW1vdGVOb2RlSURcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJDcmVhdGVDb25uZWN0aW9uXCI6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLlJlY2VpdmVyTm9kZUlELklzQW55Tm9kZSAmJiBoZWFkZXIuUmVjZWl2ZXJOb2RlTmFtZSA9PSBcIlwiIHx8IGhlYWRlci5SZWNlaXZlck5vZGVOYW1lID09IG5vZGUuTm9kZU5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbV9SZW1vdGVOb2RlSUQgPSBoZWFkZXIuU2VuZGVyTm9kZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQ8TWVzc2FnZUVudHJ5PihtbXJldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlci5SZWNlaXZlck5vZGVJRCA9PSBub2RlLk5vZGVJRClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWUgPT0gXCJcIiB8fCBoZWFkZXIuUmVjZWl2ZXJOb2RlTmFtZSA9PSBub2RlLk5vZGVOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbV9SZW1vdGVOb2RlSUQgPSBoZWFkZXIuU2VuZGVyTm9kZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PE1lc3NhZ2VFbnRyeT4obW1yZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tcmV0LkVycm9yID0gTWVzc2FnZUVycm9yVHlwZS5Ob2RlTm90Rm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tcmV0LkFkZEVsZW1lbnQoXCJlcnJvcm5hbWVcIiwgXCJSb2JvdFJhY29udGV1ci5Ob2RlTm90Rm91bmRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tcmV0LkFkZEVsZW1lbnQoXCJlcnJvcnN0cmluZ1wiLCBcIk5vZGUgbm90IGZvdW5kXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvY29sRXhjZXB0aW9uKFwiVW5rbm93biBTdHJlYW1PcCBDb21tYW5kXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbW1yZXQuRXJyb3IgPSBNZXNzYWdlRXJyb3JUeXBlLlByb3RvY29sRXJyb3I7XHJcbiAgICAgICAgICAgIG1tcmV0LkFkZEVsZW1lbnQoXCJlcnJvcm5hbWVcIiwgXCJSb2JvdFJhY29udGV1ci5Qcm90b2NvbEVycm9yXCIpO1xyXG4gICAgICAgICAgICBtbXJldC5BZGRFbGVtZW50KFwiZXJyb3JzdHJpbmdcIiwgXCJJbnZhbGlkIFN0cmVhbSBPcGVyYXRpb25cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0PE1lc3NhZ2VFbnRyeT4obW1yZXQpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIFF1ZXVlPFRhc2tDb21wbGV0aW9uU291cmNlPGludD4+IHN0cmVhbW9wX3F1ZXVlID0gbmV3IFF1ZXVlPFRhc2tDb21wbGV0aW9uU291cmNlPGludD4+KCk7XHJcbiAgICBwcml2YXRlIFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2U+IHN0cmVhbW9wX3JldCA9IG51bGw7XHJcblxyXG4gICAgcHJvdGVjdGVkIHZpcnR1YWwgYXN5bmMgVGFzazxvYmplY3Q+IFN0cmVhbU9wKHN0cmluZyBjb21tYW5kLG9iamVjdCBhcmdzPW51bGwsIENhbmNlbGxhdGlvblRva2VuIGNhbmNlbD1kZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSlcclxuICAgIHtcclxuICAgICAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+IHQgPSBudWxsO1xyXG4gICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIW1fQ29ubmVjdGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIlRyYW5zcG9ydCBjb25uZWN0aW9uIGNsb3NlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHN0cmVhbW9wX3JldCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHJlYW1vcF9yZXQgPSBuZXcgVGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZT4oKTtcclxuUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLkF0dGFjaENhbmNlbGxhdGlvblRva2VuPE1lc3NhZ2U+KCAgICAgICAgICAgICAgICBzdHJlYW1vcF9yZXQsY2FuY2VsLCBuZXcgVGltZW91dEV4Y2VwdGlvbihcIlRpbWVkIG91dFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0ID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPGludD4oKTtcclxuUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLkF0dGFjaENhbmNlbGxhdGlvblRva2VuPGludD4oICAgICAgICAgICAgICAgIHQsY2FuY2VsLCBuZXcgVGltZW91dEV4Y2VwdGlvbihcIlRpbWVkIG91dFwiKSk7XHJcbiAgICAgICAgICAgICAgICBzdHJlYW1vcF9xdWV1ZS5FbnF1ZXVlKHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodCAhPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgdC5UYXNrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlIG0gPSBuZXcgTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICBtLmhlYWRlciA9IG5ldyBNZXNzYWdlSGVhZGVyKCk7XHJcbiAgICAgICAgICAgIG0uaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICBtLmhlYWRlci5TZW5kZXJOb2RlTmFtZSA9IG5vZGUuTm9kZU5hbWU7XHJcbiAgICAgICAgICAgIG0uaGVhZGVyLlNlbmRlck5vZGVJRCA9IG5vZGUuTm9kZUlEO1xyXG4gICAgICAgICAgICBtLmhlYWRlci5SZWNlaXZlck5vZGVJRCA9IFJlbW90ZU5vZGVJRDtcclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoY29tbWFuZCA9PSBcIkNyZWF0ZUNvbm5lY3Rpb25cIilcclxuICAgICAgICAgICAgeyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSAoVHVwbGU8Tm9kZUlELCBzdHJpbmc+KWFyZ3M7XHJcbiAgICAgICAgICAgICAgICBtLmhlYWRlci5SZWNlaXZlck5vZGVJRCA9IGEuSXRlbTE7XHJcbiAgICAgICAgICAgICAgICBtLmhlYWRlci5SZWNlaXZlck5vZGVOYW1lID0gYS5JdGVtMjtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5TdHJlYW1PcCwgY29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICBtLmVudHJpZXMuQWRkKG1tKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VFbnRyeSBtbSA9IGF3YWl0IFBhY2tTdHJlYW1PcFJlcXVlc3QoY29tbWFuZCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICBtLmVudHJpZXMuQWRkKG1tKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgU2VuZE1lc3NhZ2UobSxjYW5jZWwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgTWVzc2FnZSBzdHJlYW1vcF9yZXQxID0gYXdhaXQgUm9ib3RSYWNvbnRldXJXZWIuRXh0ZW5zaW9ucy5FeHRlbnNpb25zLkF3YWl0V2l0aFRpbWVvdXQ8TWVzc2FnZT4oc3RyZWFtb3BfcmV0LlRhc2ssMTAwMDApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IFVucGFja1N0cmVhbU9wUmVzcG9uc2Uoc3RyZWFtb3BfcmV0MS5lbnRyaWVzWzBdLCBzdHJlYW1vcF9yZXQxLmhlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdHJlYW1vcF9xdWV1ZS5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbW9wX3JldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtb3BfcmV0ID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2U+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PiB0MiA9IHN0cmVhbW9wX3F1ZXVlLkRlcXVldWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0Mi5UcnlTZXRSZXN1bHQoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHZpcnR1YWwgYXN5bmMgVGFzayBTdHJlYW1PcE1lc3NhZ2VSZWNlaXZlZChNZXNzYWdlIG0pXHJcbiAgICB7XHJcbiAgICAgICAgTWVzc2FnZUVudHJ5IG1tO1xyXG4gICAgICAgXHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtbSA9IG0uZW50cmllc1swXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggeyByZXR1cm47IH1cclxuICAgICAgICBpZiAobW0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuU3RyZWFtT3ApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgY29tbWFuZCA9IG1tLk1lbWJlck5hbWU7XHJcbiAgICAgICAgICAgIE1lc3NhZ2UgbXJldCA9IG5ldyBNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIG1yZXQuaGVhZGVyID0gbmV3IE1lc3NhZ2VIZWFkZXIoKTtcclxuICAgICAgICAgICAgbXJldC5oZWFkZXIuU2VuZGVyTm9kZU5hbWUgPSBub2RlLk5vZGVOYW1lO1xyXG4gICAgICAgICAgICBtcmV0LmhlYWRlci5SZWNlaXZlck5vZGVOYW1lID0gbS5oZWFkZXIuU2VuZGVyTm9kZU5hbWU7XHJcbiAgICAgICAgICAgIG1yZXQuaGVhZGVyLlNlbmRlck5vZGVJRCA9IG5vZGUuTm9kZUlEO1xyXG4gICAgICAgICAgICBtcmV0LmhlYWRlci5SZWNlaXZlck5vZGVJRCA9IG0uaGVhZGVyLlNlbmRlck5vZGVJRDtcclxuICAgICAgICAgICAgTWVzc2FnZUVudHJ5IG1tcmV0ID0gYXdhaXQgUHJvY2Vzc1N0cmVhbU9wUmVxdWVzdChtbSwgbS5oZWFkZXIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1tcmV0ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1yZXQuZW50cmllcy5BZGQobW1yZXQpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgU2VuZE1lc3NhZ2UobXJldCwgZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpLklnbm9yZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2U+IHIgPSBudWxsO1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtb3BfcmV0PT1udWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICByPXN0cmVhbW9wX3JldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByLlRyeVNldFJlc3VsdChtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2U+IENoZWNrU3RyZWFtQ2FwYWJpbGl0eV9yZXQgPSBudWxsO1xyXG4gICAgUXVldWU8VGFza0NvbXBsZXRpb25Tb3VyY2U8aW50Pj4gQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3F1ZXVlID0gbmV3IFF1ZXVlPFRhc2tDb21wbGV0aW9uU291cmNlPGludD4+KCk7XHJcbiAgICBcclxuICAgIHB1YmxpYyBhc3luYyBUYXNrPHVpbnQ+IENoZWNrU3RyZWFtQ2FwYWJpbGl0eShzdHJpbmcgbmFtZSwgQ2FuY2VsbGF0aW9uVG9rZW4gY2FuY2VsPWRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKVxyXG4gICAge1xyXG4gICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gdCA9IG51bGw7XHJcbiAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghbV9Db25uZWN0ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiVHJhbnNwb3J0IGNvbm5lY3Rpb24gY2xvc2VkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3JldCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDaGVja1N0cmVhbUNhcGFiaWxpdHlfcmV0ID0gbmV3IFRhc2tDb21wbGV0aW9uU291cmNlPE1lc3NhZ2U+KCk7XHJcblJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnMuRXh0ZW5zaW9ucy5BdHRhY2hDYW5jZWxsYXRpb25Ub2tlbjxNZXNzYWdlPiggICAgICAgICAgICAgICAgQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3JldCxjYW5jZWwsIG5ldyBUaW1lb3V0RXhjZXB0aW9uKFwiVGltZWQgb3V0XCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHQgPSBuZXcgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PigpO1xyXG5Sb2JvdFJhY29udGV1cldlYi5FeHRlbnNpb25zLkV4dGVuc2lvbnMuQXR0YWNoQ2FuY2VsbGF0aW9uVG9rZW48aW50PiggICAgICAgICAgICAgICAgdCxjYW5jZWwsIG5ldyBUaW1lb3V0RXhjZXB0aW9uKFwiVGltZWQgb3V0XCIpKTtcclxuICAgICAgICAgICAgICAgIENoZWNrU3RyZWFtQ2FwYWJpbGl0eV9xdWV1ZS5FbnF1ZXVlKHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodCAhPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgdC5UYXNrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlIG0gPSBuZXcgTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbS5oZWFkZXIuU2VuZGVyTm9kZUlEID0gbm9kZS5Ob2RlSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtLmhlYWRlci5SZWNlaXZlck5vZGVJRCA9UmVtb3RlTm9kZUlEO1xyXG4gICAgICAgICAgICBNZXNzYWdlRW50cnkgbW0gPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuU3RyZWFtQ2hlY2tDYXBhYmlsaXR5LCBuYW1lKTtcclxuICAgICAgICAgICAgbS5lbnRyaWVzLkFkZChtbSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBTZW5kTWVzc2FnZShtLCBjYW5jZWwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgTWVzc2FnZSBtcmV0ID0gYXdhaXQgQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3JldC5UYXNrLkF3YWl0V2l0aFRpbWVvdXQ8TWVzc2FnZT4oKGludClub2RlLlJlcXVlc3RUaW1lb3V0KTtcclxuICAgICAgICAgICAgcmV0dXJuIG1yZXQuZW50cmllc1swXS5GaW5kRWxlbWVudChcInJldHVyblwiKS5DYXN0RGF0YTx1aW50PigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3F1ZXVlLkNvdW50ID09IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3JldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2hlY2tTdHJlYW1DYXBhYmlsaXR5X3JldCA9IG5ldyBUYXNrQ29tcGxldGlvblNvdXJjZTxNZXNzYWdlPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gdDIgPSBDaGVja1N0cmVhbUNhcGFiaWxpdHlfcXVldWUuRGVxdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHQyLlRyeVNldFJlc3VsdCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCB2b2lkIENoZWNrU3RyZWFtQ2FwYWJpbGl0eV9NZXNzYWdlUmVjZWl2ZWQoTWVzc2FnZSBtKVxyXG4gICAge1xyXG4gICAgICAgIHRyeVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG0uZW50cmllc1swXS5FbnRyeVR5cGUgPT0gTWVzc2FnZUVudHJ5VHlwZS5TdHJlYW1DaGVja0NhcGFiaWxpdHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2UgcmV0ID0gbmV3IE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICAgIHJldC5oZWFkZXIgPSBuZXcgTWVzc2FnZUhlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgcmV0LmhlYWRlci5TZW5kZXJOb2RlSUQgPSBub2RlLk5vZGVJRDtcclxuICAgICAgICAgICAgICAgIHJldC5oZWFkZXIuUmVjZWl2ZXJOb2RlSUQgPSBtLmhlYWRlci5TZW5kZXJOb2RlSUQ7XHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRW50cnkgbXJldCA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5TdHJlYW1DaGVja0NhcGFiaWxpdHlSZXQsIG0uZW50cmllc1swXS5NZW1iZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgIG1yZXQuU2VydmljZVBhdGggPSBtLmVudHJpZXNbMF0uU2VydmljZVBhdGg7XHJcbiAgICAgICAgICAgICAgICBtcmV0LkFkZEVsZW1lbnQoXCJyZXR1cm5cIiwgU3RyZWFtQ2FwYWJpbGl0aWVzKG0uZW50cmllc1swXS5NZW1iZXJOYW1lKSk7XHJcbiAgICAgICAgICAgICAgICByZXQuZW50cmllcy5BZGQobXJldCk7XHJcbiAgICAgICAgICAgICAgICBTZW5kTWVzc2FnZShyZXQsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKS5JZ25vcmVSZXN1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChtLmVudHJpZXNbMF0uRW50cnlUeXBlID09IE1lc3NhZ2VFbnRyeVR5cGUuU3RyZWFtQ2hlY2tDYXBhYmlsaXR5UmV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxNZXNzYWdlPiByID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKENoZWNrU3RyZWFtQ2FwYWJpbGl0eV9yZXQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICByPUNoZWNrU3RyZWFtQ2FwYWJpbGl0eV9yZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByLlRyeVNldFJlc3VsdChtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCB7IH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZpcnR1YWwgdWludCBTdHJlYW1DYXBhYmlsaXRpZXMoc3RyaW5nIG5hbWUpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiNpZiAhUk9CT1RSQUNPTlRFVVJfQlJJREdFXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgVGFzayBEb1NlcnZlclRsc0hhbmRzaGFrZShNZXNzYWdlIG0pXHJcbiAgICB7XHJcbiAgICAgICAgTWVzc2FnZSBtcmV0ID0gbmV3IE1lc3NhZ2UoKTtcclxuICAgICAgICBtcmV0LmhlYWRlciA9IG5ldyBNZXNzYWdlSGVhZGVyKCk7XHJcbiAgICAgICAgbXJldC5oZWFkZXIuU2VuZGVyTm9kZU5hbWUgPSBub2RlLk5vZGVOYW1lO1xyXG4gICAgICAgIG1yZXQuaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWUgPSBtLmhlYWRlci5TZW5kZXJOb2RlTmFtZTtcclxuICAgICAgICBtcmV0LmhlYWRlci5TZW5kZXJOb2RlSUQgPSBub2RlLk5vZGVJRDtcclxuICAgICAgICBtcmV0LmhlYWRlci5SZWNlaXZlck5vZGVJRCA9IG0uaGVhZGVyLlNlbmRlck5vZGVJRDtcclxuICAgICAgICBNZXNzYWdlRW50cnkgbW1yZXQgPSBuZXcgTWVzc2FnZUVudHJ5KE1lc3NhZ2VFbnRyeVR5cGUuU3RyZWFtT3BSZXQsIFwiU1RBUlRUTFNcIik7XHJcbiAgICAgICAgbXJldC5lbnRyaWVzLkFkZChtbXJldCk7XHJcblxyXG4gICAgICAgIHZhciBjZXJ0ID0gR2V0VGxzQ2VydGlmaWNhdGUoKTtcclxuXHJcbiAgICAgICAgaWYgKGNlcnQgPT0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1tcmV0LkFkZEVsZW1lbnQoXCJlcnJvcm5hbWVcIiwgXCJSb2JvdFJhY29udGV1ci5Db25uZWN0aW9uRXJyb3JcIik7XHJcbiAgICAgICAgICAgIG1tcmV0LkFkZEVsZW1lbnQoXCJlcnJvcnN0cmluZ1wiLCBcIlNlcnZlciBjZXJ0aWZpY2F0ZSBub3QgbG9hZGVkXCIpO1xyXG4gICAgICAgICAgICBhd2FpdCBTZW5kTWVzc2FnZShtcmV0LCBkZWZhdWx0KENhbmNlbGxhdGlvblRva2VuKSk7XHJcbiAgICAgICAgICAgIENsb3NlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjsgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGJvb2wgZ29vZCA9IGZhbHNlO1xyXG4gICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobS5oZWFkZXIuUmVjZWl2ZXJOb2RlSUQuSXNBbnlOb2RlICYmIG0uaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWUgPT0gXCJcIiB8fCBtLmhlYWRlci5SZWNlaXZlck5vZGVOYW1lID09IG5vZGUuTm9kZU5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1fUmVtb3RlTm9kZUlEID0gbS5oZWFkZXIuU2VuZGVyTm9kZUlEO1xyXG4gICAgICAgICAgICAgICAgZ29vZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtLmhlYWRlci5SZWNlaXZlck5vZGVJRCA9PSBub2RlLk5vZGVJRCAmJiAhZ29vZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG0uaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWUgPT0gXCJcIiB8fCBtLmhlYWRlci5SZWNlaXZlck5vZGVOYW1lID09IG5vZGUuTm9kZU5hbWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbV9SZW1vdGVOb2RlSUQgPSBtLmhlYWRlci5TZW5kZXJOb2RlSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZ29vZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWdvb2QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtbXJldC5BZGRFbGVtZW50KFwiZXJyb3JuYW1lXCIsIFwiUm9ib3RSYWNvbnRldXIuTm9kZU5vdEZvdW5kXCIpO1xyXG4gICAgICAgICAgICBtbXJldC5BZGRFbGVtZW50KFwiZXJyb3JzdHJpbmdcIiwgXCJOb2RlIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgYXdhaXQgU2VuZE1lc3NhZ2UobXJldCwgZGVmYXVsdChDYW5jZWxsYXRpb25Ub2tlbikpO1xyXG4gICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIG11dHVhbGF1dGg9ZmFsc2U7XHJcbiAgICAgICAgdmFyIG11dHVhbGF1dGgxID0gbS5lbnRyaWVzWzBdLmVsZW1lbnRzLkZpcnN0T3JEZWZhdWx0KHggPT4geC5FbGVtZW50TmFtZSA9PSBcIm11dHVhbGF1dGhcIik7XHJcbiAgICAgICAgaWYgKG11dHVhbGF1dGgxIT1udWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYobXV0dWFsYXV0aDEuQ2FzdERhdGE8c3RyaW5nPigpLlRvTG93ZXIoKT09XCJ0cnVlXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG11dHVhbGF1dGg9dHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAgeyAgXHJcbiAgICAgICAgICAgIGF3YWl0IFNlbmRNZXNzYWdlKG1yZXQsIGRlZmF1bHQoQ2FuY2VsbGF0aW9uVG9rZW4pKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IFJlcXVlc3RTZW5kUGF1c2UoKTtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIHNzbCA9IG5ldyBTc2xTdHJlYW0oYmFzZXN0cmVhbSwgZmFsc2UsIFJlbW90ZUNlcnRpZmljYXRlVmFsaWRhdGlvbkNhbGxiYWNrKTtcclxuICAgICAgICAgICAgYXdhaXQgc3NsLkF1dGhlbnRpY2F0ZUFzU2VydmVyQXN5bmMoY2VydC5JdGVtMSwgbXV0dWFsYXV0aCwgU3NsUHJvdG9jb2xzLlRscyB8IFNzbFByb3RvY29scy5UbHMxMSB8IFNzbFByb3RvY29scy5UbHMxMiwgZmFsc2UpLkF3YWl0V2l0aFRpbWVvdXQoNTAwMCkuQ29uZmlndXJlQXdhaXQoZmFsc2UpO1xyXG4gICAgICAgICAgICBiYXNlc3RyZWFtID0gc3NsOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgUmVzdW1lU2VuZFBhdXNlKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2xvc2UoKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5Bc3ltbWV0cmljQWxnb3JpdGhtIE9uUFZLU2VsZWN0aW9uIChYNTA5Q2VydGlmaWNhdGUgY2VydGlmaWNhdGUsIHN0cmluZyB0YXJnZXRIb3N0KVxyXG4gICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKChYNTA5Q2VydGlmaWNhdGUyKUdldFRsc0NlcnRpZmljYXRlKCkuSXRlbTEpLlByaXZhdGVLZXk7XHJcbiAgICB9XHJcblxyXG4gICAgVGFza0NvbXBsZXRpb25Tb3VyY2U8TWVzc2FnZT4gY2xpZW50aGFuZHNoYWtlX3JlY3ZfdGFzayA9IG51bGw7XHJcbiAgICBUYXNrQ29tcGxldGlvblNvdXJjZTxpbnQ+IGNsaWVudGhhbmRzaGFrZV9yZWN2X2RvbmVfdGFzayA9IG51bGw7XHJcbiAgICAgICAgICAgIFxyXG4gICAgc3RyaW5nIGhhbmRzaGFrZV9ob3N0PW51bGw7XHJcbiAgICBwcm90ZWN0ZWQgdmlydHVhbCBhc3luYyBUYXNrIERvQ2xpZW50VGxzSGFuZHNoYWtlKENhbmNlbGxhdGlvblRva2VuIGNhbmNlbClcclxuICAgIHtcclxuICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2xpZW50aGFuZHNoYWtlX3JlY3ZfdGFzayA9IG5ldyBUYXNrQ29tcGxldGlvblNvdXJjZTxNZXNzYWdlPigpO1xyXG4gICAgICAgICAgICBjbGllbnRoYW5kc2hha2VfcmVjdl9kb25lX3Rhc2sgPSBuZXcgVGFza0NvbXBsZXRpb25Tb3VyY2U8aW50PigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgUmVxdWVzdFNlbmRQYXVzZSgpO1xyXG5cclxuICAgICAgICB0cnlcclxuICAgICAgICB7ICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgbS5oZWFkZXIgPSBuZXcgTWVzc2FnZUhlYWRlcigpO1xyXG4gICAgICAgICAgICBtLmhlYWRlci5SZWNlaXZlck5vZGVJRCA9IHRhcmdldF9ub2RlaWQ7XHJcbiAgICAgICAgICAgIG0uaGVhZGVyLlJlY2VpdmVyTm9kZU5hbWUgPSB0YXJnZXRfbm9kZW5hbWU7XHJcbiAgICAgICAgICAgIHZhciBtbSA9IG5ldyBNZXNzYWdlRW50cnkoTWVzc2FnZUVudHJ5VHlwZS5TdHJlYW1PcCwgXCJTVEFSVFRMU1wiKTtcclxuICAgICAgICAgICAgdmFyIGNlcnQgPSBHZXRUbHNDZXJ0aWZpY2F0ZSgpO1xyXG4gICAgICAgICAgICBib29sIG11dHVhbGF1dGggPSBjZXJ0ICE9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChtdXR1YWxhdXRoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtbS5BZGRFbGVtZW50KFwibXV0dWFsYXV0aFwiLCBcInRydWVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbS5lbnRyaWVzLkFkZChtbSk7XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgYnl0ZVtdIG1fbXN0cmVhbV9idWY9bmV3IGJ5dGVbbS5Db21wdXRlU2l6ZSgpXTtcclxuICAgICAgICAgICAgdmFyIG1fbXN0cmVhbSA9IG5ldyBNZW1vcnlTdHJlYW0oKTtcclxuICAgICAgICAgICAgdmFyIG1zdHJlYW0gPSBuZXcgQXJyYXlCaW5hcnlXcml0ZXIobV9tc3RyZWFtLG1fbXN0cmVhbV9idWYsIG1fbXN0cmVhbV9idWYuTGVuZ3RoKTtcclxuICAgICAgICAgICAgbS5Xcml0ZShtc3RyZWFtKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtc3RyZWFtX2J1ZiA9IG1fbXN0cmVhbS5Ub0FycmF5KCk7XHJcbiAgICAgICAgICAgIGF3YWl0IGJhc2VzdHJlYW0uV3JpdGVBc3luYyhtc3RyZWFtX2J1ZiwgMCwgbXN0cmVhbV9idWYuTGVuZ3RoKS5Db25maWd1cmVBd2FpdChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbXJldCA9IGF3YWl0IGNsaWVudGhhbmRzaGFrZV9yZWN2X3Rhc2suVGFzaztcclxuICAgICAgICAgICAgTm9kZUlEIHJlY3Zfbm9kZWlkID0gbXJldC5oZWFkZXIuU2VuZGVyTm9kZUlEO1xyXG4gICAgICAgICAgICBzdHJpbmcgcmVjdl9ub2RlbmFtZSA9IG1yZXQuaGVhZGVyLlNlbmRlck5vZGVOYW1lO1xyXG4gICAgICAgICAgICBpZiAoIXRhcmdldF9ub2RlaWQuSXNBbnlOb2RlICYmIHRhcmdldF9ub2RlaWQgIT0gcmVjdl9ub2RlaWQpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIkNvdWxkIG5vdCB2YWxpZGF0ZSByZW1vdGUgbm9kZVwiKTtcclxuICAgICAgICAgICAgaWYgKCFTdHJpbmcuSXNOdWxsT3JFbXB0eSh0YXJnZXRfbm9kZW5hbWUpICYmIHRhcmdldF9ub2RlbmFtZSE9cmVjdl9ub2RlbmFtZSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0aW9uRXhjZXB0aW9uKFwiQ291bGQgbm90IHZhbGlkYXRlIHJlbW90ZSBub2RlXCIpO1xyXG4gICAgICAgICAgICBpZiAobXJldC5lbnRyaWVzLkNvdW50IT0xKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJUTFMgaGFuZHNoYWtlIGVycm9yXCIpO1xyXG4gICAgICAgICAgICBpZihtcmV0LmVudHJpZXNbMF0uRW50cnlUeXBlIT1NZXNzYWdlRW50cnlUeXBlLlN0cmVhbU9wUmV0XHJcbiAgICAgICAgICAgICAgICB8fCBtcmV0LmVudHJpZXNbMF0uTWVtYmVyTmFtZSE9XCJTVEFSVFRMU1wiKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbm5lY3Rpb25FeGNlcHRpb24oXCJUTFMgaGFuZHNoYWtlIGVycm9yXCIpO1xyXG4gICAgICAgICAgICBpZiAobXV0dWFsYXV0aCAmJiBtcmV0LmVudHJpZXNbMF0uZWxlbWVudHMuQ291bnQoeCA9PiB4LkVsZW1lbnROYW1lID09IFwibXV0dWFsYXV0aFwiICYmIHguQ2FzdERhdGE8c3RyaW5nPigpLlRvTG93ZXIoKSA9PSBcInRydWVcIik9PTApXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdGlvbkV4Y2VwdGlvbihcIlRMUyBoYW5kc2hha2UgZXJyb3JcIik7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgaG9zdD1cIlJvYm90IFJhY29udGV1ciBOb2RlIFwiICsgcmVjdl9ub2RlaWQuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgaGFuZHNoYWtlX2hvc3Q9aG9zdDtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgWDUwOUNlcnRpZmljYXRlQ29sbGVjdGlvbiBjZXJ0cyA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChtdXR1YWxhdXRoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjZXJ0cyA9IG5ldyBYNTA5Q2VydGlmaWNhdGVDb2xsZWN0aW9uKG5ld1tdIHsgY2VydC5JdGVtMSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHNzbCA9IG5ldyBTc2xTdHJlYW0oYmFzZXN0cmVhbSwgZmFsc2UsIFJlbW90ZUNlcnRpZmljYXRlVmFsaWRhdGlvbkNhbGxiYWNrKTtcclxuICAgICAgICAgICAgYXdhaXQgc3NsLkF1dGhlbnRpY2F0ZUFzQ2xpZW50QXN5bmMoaG9zdCwgY2VydHMsIFNzbFByb3RvY29scy5UbHMgfCBTc2xQcm90b2NvbHMuVGxzMTEgfCBTc2xQcm90b2NvbHMuVGxzMTIsIGZhbHNlKS5Bd2FpdFdpdGhUaW1lb3V0KDUwMDApLkNvbmZpZ3VyZUF3YWl0KGZhbHNlKTtcclxuICAgICAgICAgICAgYmFzZXN0cmVhbSA9IHNzbDsgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IFJlc3VtZVNlbmRQYXVzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgdGhyb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRhc2tDb21wbGV0aW9uU291cmNlPGludD4gZG9uZV90YXNrID0gbnVsbDtcclxuICAgICAgICAgICAgbG9jayh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkb25lX3Rhc2sgPSBjbGllbnRoYW5kc2hha2VfcmVjdl9kb25lX3Rhc2s7XHJcbiAgICAgICAgICAgICAgICBjbGllbnRoYW5kc2hha2VfcmVjdl9kb25lX3Rhc2sgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgY2xpZW50aGFuZHNoYWtlX3JlY3ZfdGFzayA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZG9uZV90YXNrLlRyeVNldFJlc3VsdCgwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBUdXBsZTxYNTA5Q2VydGlmaWNhdGUsWDUwOUNlcnRpZmljYXRlQ29sbGVjdGlvbj4gR2V0VGxzQ2VydGlmaWNhdGUoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBwYXJlbnQuR2V0VGxzQ2VydGlmaWNhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBSZW1vdGVDZXJ0aWZpY2F0ZVZhbGlkYXRpb25DYWxsYmFjayhvYmplY3Qgc2VuZGVyLCBYNTA5Q2VydGlmaWNhdGUgY2VydGlmaWNhdGUsIFg1MDlDaGFpbiBjaGFpbiwgU3NsUG9saWN5RXJyb3JzIHNzbFBvbGljeUVycm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzX3NlcnZlciAmJiBjZXJ0aWZpY2F0ZSA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNzbFBvbGljeUVycm9ycyAhPSBTc2xQb2xpY3lFcnJvcnMuUmVtb3RlQ2VydGlmaWNhdGVDaGFpbkVycm9ycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlbW90ZUNlcnRpZmljYXRlVmFsaWRhdGlvbkNhbGxiYWNrMihjaGFpbiwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hhaW4wID0gbmV3IFg1MDlDaGFpbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlbmRlciBpcyBTc2xTdHJlYW0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNoYWluMC5DaGFpblBvbGljeS5SZXZvY2F0aW9uTW9kZSA9ICgoU3NsU3RyZWFtKXNlbmRlcikuQ2hlY2tDZXJ0UmV2b2NhdGlvblN0YXR1cyA/IFg1MDlSZXZvY2F0aW9uTW9kZS5PbmxpbmUgOiBYNTA5UmV2b2NhdGlvbk1vZGUuTm9DaGVjaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNoYWluMC5DaGFpblBvbGljeS5SZXZvY2F0aW9uTW9kZSA9IFg1MDlSZXZvY2F0aW9uTW9kZS5Ob0NoZWNrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBYNTA5Q2VydGlmaWNhdGUyIHJvb3RjZXJ0O1xyXG4gICAgICAgICAgICB1c2luZyAodmFyIHJvb3RfY2VydF9zdHJlYW0xID0gdHlwZW9mKEFzeW5jU3RyZWFtVHJhbnNwb3J0KS5Bc3NlbWJseS5HZXRNYW5pZmVzdFJlc291cmNlU3RyZWFtKFwiUm9ib3RSYWNvbnRldXJORVRTdGFuZGFyZC5EYXRhLlJvYm90X1JhY29udGV1cl9Ob2RlX1Jvb3RfQ0FcIikpXHJcbiAgICAgICAgICAgIHVzaW5nICh2YXIgcm9vdF9jZXJ0X3N0cmVhbSA9IG5ldyBNZW1vcnlTdHJlYW0oKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcm9vdF9jZXJ0X3N0cmVhbTEuQ29weVRvKHJvb3RfY2VydF9zdHJlYW0pO1xyXG4gICAgICAgICAgICAgICAgcm9vdGNlcnQgPSBuZXcgWDUwOUNlcnRpZmljYXRlMihyb290X2NlcnRfc3RyZWFtLlRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNoYWluMC5DaGFpblBvbGljeS5FeHRyYVN0b3JlLkFkZChyb290Y2VydCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgY2hhaW4uQ2hhaW5FbGVtZW50cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjaGFpbjAuQ2hhaW5Qb2xpY3kuRXh0cmFTdG9yZS5BZGQoY2hhaW4uQ2hhaW5FbGVtZW50c1tpXS5DZXJ0aWZpY2F0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYm9vbCBpc1ZhbGlkID0gY2hhaW4wLkJ1aWxkKChYNTA5Q2VydGlmaWNhdGUyKWNlcnRpZmljYXRlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjaGFpbjAuQ2hhaW5TdGF0dXMuQW55KHggPT4geC5TdGF0dXMgPT0gWDUwOUNoYWluU3RhdHVzRmxhZ3MuVW50cnVzdGVkUm9vdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFpbjAuQ2hhaW5FbGVtZW50c1tjaGFpbjAuQ2hhaW5FbGVtZW50cy5Db3VudCAtIDFdLkNlcnRpZmljYXRlLlRodW1icHJpbnQgIT0gcm9vdGNlcnQuVGh1bWJwcmludClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSZW1vdGVDZXJ0aWZpY2F0ZVZhbGlkYXRpb25DYWxsYmFjazIoY2hhaW4wLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgYm9vbCBSZW1vdGVDZXJ0aWZpY2F0ZVZhbGlkYXRpb25DYWxsYmFjazIoWDUwOUNoYWluIGNoYWluLCBib29sIGVtYmVkZGVkX3Jvb3QpXHJcbiAgICB7XHJcbiAgICBcclxuXHJcbiAgICAgICAgaWYgKGNoYWluLkNoYWluRWxlbWVudHNbMF0uQ2VydGlmaWNhdGUuU3ViamVjdCAhPSBcIkNOPVwiICsgaGFuZHNoYWtlX2hvc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgQ0VSVF9UUlVTVF9IQVNfTk9UX1NVUFBPUlRFRF9DUklUSUNBTF9FWFQgPSAweDA4MDAwMDAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoaW50IGk9MDsgaTxjaGFpbi5DaGFpbkVsZW1lbnRzLkNvdW50OyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGNoYWluLkNoYWluRWxlbWVudHNbaV07XHJcbiAgICAgICAgICAgIGJvb2wgZm91bmRfZXh0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJvb2wgZm91bmRfY3JpdF9leHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHMgaW4gZWxlbWVudC5DaGFpbkVsZW1lbnRTdGF0dXMpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocy5TdGF0dXMgPT0gWDUwOUNoYWluU3RhdHVzRmxhZ3MuSW52YWxpZEV4dGVuc2lvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZF9leHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGludCB2MSA9IChpbnQpcy5TdGF0dXM7XHJcbiAgICAgICAgICAgICAgICBpbnQgdjIgPSAoaW50KVg1MDlDaGFpblN0YXR1c0ZsYWdzLk5vRXJyb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKChpbnQpcy5TdGF0dXMgPT0gQ0VSVF9UUlVTVF9IQVNfTk9UX1NVUFBPUlRFRF9DUklUSUNBTF9FWFQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRfY3JpdF9leHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFmb3VuZF9leHQgfHwgIWZvdW5kX2NyaXRfZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL1RPRE86IHJlLWVuYWJsZSB0aGlzIG9pZCBjaGVja1xyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBib29sIGZvdW5kX3JyX29pZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWxlbWVudC5DZXJ0aWZpY2F0ZS5FeHRlbnNpb25zKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWUuQ3JpdGljYWwpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHN0cmluZyBvaWQgPSBlLk9pZC5WYWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChvaWQgPT0gXCIyLjUuMjkuMTVcIiB8fCBvaWQgPT0gXCIyLjUuMjkuMTRcIiB8fCBvaWQgPT0gXCIyLjUuMjkuMTlcIiB8fCBvaWQgPT0gXCIyLjUuMjkuMzVcIiB8fCBvaWQgPT0gXCIyLjUuMjkuMzJcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzdHJpbmcgcnJfb2lkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpID09IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnJfb2lkPVwiMS4zLjYuMS40LjEuNDU0NTUuMS4xLjMuM1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSBjaGFpbi5DaGFpbkVsZW1lbnRzLkNvdW50LTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnJfb2lkID0gXCIxLjMuNi4xLjQuMS40NTQ1NS4xLjEuMy4xXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnJfb2lkID0gXCIxLjMuNi4xLjQuMS40NTQ1NS4xLjEuMy4yXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9pZCAhPSBycl9vaWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiByZS1lbmFibGUgdGhpcyBvaWQgY2hlY2tcclxuICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZF9ycl9vaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1RPRE86IHJlLWVuYWJsZSB0aGlzIG9pZCBjaGVja1xyXG4gICAgICAgICAgICAvL2lmICghZm91bmRfcnJfb2lkKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yZWFjaCAodmFyIHMgaW4gY2hhaW4uQ2hhaW5TdGF0dXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocy5TdGF0dXMgIT0gWDUwOUNoYWluU3RhdHVzRmxhZ3MuSW52YWxpZEV4dGVuc2lvbiAmJiAoaW50KXMuU3RhdHVzICE9IENFUlRfVFJVU1RfSEFTX05PVF9TVVBQT1JURURfQ1JJVElDQUxfRVhUKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShzLlN0YXR1cyA9PSBYNTA5Q2hhaW5TdGF0dXNGbGFncy5VbnRydXN0ZWRSb290ICYmIGVtYmVkZGVkX3Jvb3QpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBib29sIElzU2VjdXJlXHJcbiAgICB7XHJcbiAgICAgICAgZ2V0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYmFzZXN0cmVhbSBpcyBTc2xTdHJlYW0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJvb2wgSXNTZWN1cmVQZWVySWRlbnRpdHlWZXJpZmllZFxyXG4gICAge1xyXG4gICAgICAgIGdldFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gYmFzZXN0cmVhbSBhcyBTc2xTdHJlYW07XHJcbiAgICAgICAgICAgICAgICBpZiAocyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjZXJ0ID0gcy5SZW1vdGVDZXJ0aWZpY2F0ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VydCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RyaW5nIEdldFNlY3VyZVBlZXJJZGVudGl0eSgpXHJcbiAgICB7XHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcyA9IGJhc2VzdHJlYW0gYXMgU3NsU3RyZWFtO1xyXG4gICAgICAgICAgICBpZiAocyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2VydCA9IHMuUmVtb3RlQ2VydGlmaWNhdGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2VydCA9PSBudWxsKSB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FeGNlcHRpb24oXCJQZWVyIGlkZW50aXR5IGlzIG5vdCB2ZXJpZmllZFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjZXJ0LlN1YmplY3QuUmVwbGFjZUZpcnN0KFwiQ049Um9ib3QgUmFjb250ZXVyIE5vZGUgXCIsIFwiXCIpOyBcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FeGNlcHRpb24oXCJDb25uZWN0aW9uIGlzIG5vdCBzZWNjdXJlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkV4Y2VwdGlvbihcIkNvbm5lY3Rpb24gaXMgbm90IHNlY2N1cmVcIik7XHJcbiAgICAgICAgfSAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuI2VuZGlmXHJcbn1cclxuXHJcbnB1YmxpYyBpbnRlcmZhY2UgQXN5bmNTdHJlYW1UcmFuc3BvcnRQYXJlbnRcclxue1xyXG4gICAgVGFzazxNZXNzYWdlPiBTcGVjaWFsUmVxdWVzdChNZXNzYWdlIG0pO1xyXG5cclxuICAgIFRhc2sgTWVzc2FnZVJlY2VpdmVkKE1lc3NhZ2UgbSk7XHJcblxyXG4gICAgdm9pZCBBZGRUcmFuc3BvcnRDb25uZWN0aW9uKHVpbnQgZW5kcG9pbnQsIEFzeW5jU3RyZWFtVHJhbnNwb3J0IHRyYW5zcG9ydCk7XHJcblxyXG4gICAgdm9pZCBSZW1vdmVUcmFuc3BvcnRDb25uZWN0aW9uKEFzeW5jU3RyZWFtVHJhbnNwb3J0IHRyYW5zcG9ydCk7XHJcblxyXG4jaWYgIVJPQk9UUkFDT05URVVSX0JSSURHRVxyXG4gICAgVHVwbGU8WDUwOUNlcnRpZmljYXRlLCBYNTA5Q2VydGlmaWNhdGVDb2xsZWN0aW9uPiBHZXRUbHNDZXJ0aWZpY2F0ZSgpO1xyXG4jZW5kaWZcclxufVxyXG5cclxufSIsIi8vIENvcHlyaWdodCAyMDExLTIwMTkgV2Fzb24gVGVjaG5vbG9neSwgTExDXHJcbi8vXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vXHJcbi8vICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vL1xyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIFJvYm90UmFjb250ZXVyV2ViLkV4dGVuc2lvbnM7XHJcblxyXG5uYW1lc3BhY2UgUm9ib3RSYWNvbnRldXJXZWJcclxue1xyXG4gICAgcHVibGljIGludGVyZmFjZSBJVGltZXJcclxuICAgIHtcclxuICAgICAgICB2b2lkIFN0YXJ0KCk7XHJcbiAgICAgICAgdm9pZCBTdG9wKCk7XHJcbiAgICAgICAgaW50IFBlcmlvZCB7Z2V0OyBzZXQ7fVxyXG4gICAgICAgIGJvb2wgSXNSdW5uaW5nIHsgZ2V0OyBwcml2YXRlIHNldDsgfSAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGludGVyZmFjZSBJUmF0ZVxyXG4gICAge1xyXG4gICAgICAgIFRhc2sgU2xlZXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RydWN0IFRpbWVyRXZlbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgYm9vbCBzdG9wcGVkO1xyXG4gICAgICAgIHB1YmxpYyBEYXRlVGltZSBsYXN0X2V4cGVjdGVkO1xyXG4gICAgICAgIHB1YmxpYyBEYXRlVGltZSBsYXN0X3JlYWw7XHJcbiAgICAgICAgcHVibGljIERhdGVUaW1lIGN1cnJlbnRfZXhwZWN0ZWQ7XHJcbiAgICAgICAgcHVibGljIERhdGVUaW1lIGN1cnJlbnRfcmVhbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgV2FsbFRpbWVyIDogSVRpbWVyXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBEYXRlVGltZSBzdGFydF90aW1lO1xyXG4gICAgICAgIHByb3RlY3RlZCBEYXRlVGltZSBhY3R1YWxfbGFzdF90aW1lO1xyXG4gICAgICAgIHByb3RlY3RlZCBEYXRlVGltZSBsYXN0X3RpbWU7XHJcbiAgICAgICAgcHJvdGVjdGVkIGJvb2wgb25lc2hvdDtcclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgUm9ib3RSYWNvbnRldXJOb2RlIG5vZGU7XHJcbiAgICAgICAgcHJvdGVjdGVkIEFjdGlvbjxUaW1lckV2ZW50PiBoYW5kbGVyO1xyXG4gICAgICAgIHByb3RlY3RlZCBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSBjYW5jZWw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBXYWxsVGltZXIoaW50IHBlcmlvZCwgQWN0aW9uPFRpbWVyRXZlbnQ+IGhhbmRsZXIsIGJvb2wgb25lc2hvdCwgUm9ib3RSYWNvbnRldXJOb2RlIG5vZGUgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlID0gUm9ib3RSYWNvbnRldXJOb2RlLnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLlBlcmlvZCA9IHBlcmlvZDtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcclxuICAgICAgICAgICAgdGhpcy5vbmVzaG90ID0gb25lc2hvdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFN0YXJ0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKHRoaXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChJc1J1bm5pbmcpIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiQWxyZWFkeSBydW5uaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZSA9IG5vZGUuVXRjTm93O1xyXG4gICAgICAgICAgICAgICAgbGFzdF90aW1lID0gc3RhcnRfdGltZTtcclxuICAgICAgICAgICAgICAgIGFjdHVhbF9sYXN0X3RpbWUgPSBsYXN0X3RpbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FuY2VsID0gbmV3IENhbmNlbGxhdGlvblRva2VuU291cmNlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9uZXNob3QpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vb3AgPSBQZXJpb2RpY1Rhc2suUnVuKChBY3Rpb24pcGVyaW9kaWNfaGFuZGxlciwgVGltZVNwYW4uRnJvbU1pbGxpc2Vjb25kcyhQZXJpb2QpLCBjYW5jZWwuVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgUnVuT25lKCkuSWdub3JlUmVzdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBUYXNrIFJ1bk9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCBUYXNrLkRlbGF5KFBlcmlvZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWNhbmNlbC5Jc0NhbmNlbGxhdGlvblJlcXVlc3RlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWwuQ2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBUaW1lckV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9wcGVkID0gSXNSdW5uaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0X2V4cGVjdGVkID0gdGhpcy5sYXN0X3RpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfcmVhbCA9IHRoaXMuYWN0dWFsX2xhc3RfdGltZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9leHBlY3RlZCA9IGxhc3RfdGltZSArIFRpbWVTcGFuLkZyb21NaWxsaXNlY29uZHMoUGVyaW9kKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9yZWFsID0gbm9kZS5VdGNOb3dcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBwZXJpb2RpY19oYW5kbGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRpbWVyRXZlbnQgZTtcclxuICAgICAgICAgICAgbG9jayAodGhpcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZSA9IG5ldyBUaW1lckV2ZW50XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcHBlZCA9IElzUnVubmluZyxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0X2V4cGVjdGVkID0gdGhpcy5sYXN0X3RpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdF9yZWFsID0gdGhpcy5hY3R1YWxfbGFzdF90aW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfZXhwZWN0ZWQgPSBsYXN0X3RpbWUgKyBUaW1lU3Bhbi5Gcm9tTWlsbGlzZWNvbmRzKFBlcmlvZCksXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9yZWFsID0gbm9kZS5VdGNOb3dcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0X3RpbWUgPSBlLmN1cnJlbnRfZXhwZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdHVhbF9sYXN0X3RpbWUgPSBlLmxhc3RfcmVhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBoYW5kbGVyKGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU3RvcCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzUnVubmluZykgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3QgcnVubmluZ1wiKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYW5jZWwgIT0gbnVsbCkgY2FuY2VsLkNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgY2FuY2VsID0gbnVsbDtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBQZXJpb2Qge2dldDsgc2V0O30gICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1J1bm5pbmdcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrICh0aGlzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWwgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhY2FuY2VsLklzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuI2lmICFST0JPVFJBQ09OVEVVUl9CUklER0VcclxuICAgICAgICB+V2FsbFRpbWVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IGNhbmNlbDtcclxuICAgICAgICAgICAgICAgIGlmIChjICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgYy5DYW5jZWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICB9XHJcbiNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBXYWxsUmF0ZSA6IElSYXRlXHJcbiAgICB7XHJcbiAgICAgICAgcHJvdGVjdGVkIFJvYm90UmFjb250ZXVyTm9kZSBub2RlO1xyXG4gICAgICAgIHByb3RlY3RlZCBkb3VibGUgcGVyaW9kOyBcclxuICAgICAgICBwcm90ZWN0ZWQgRGF0ZVRpbWUgc3RhcnRfdGltZTtcclxuICAgICAgICBwcm90ZWN0ZWQgRGF0ZVRpbWUgbGFzdF90aW1lO1xyXG5cclxuICAgICAgICBwdWJsaWMgV2FsbFJhdGUoZG91YmxlIGZyZXF1ZW5jeSwgUm9ib3RSYWNvbnRldXJOb2RlIG5vZGU9bnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChub2RlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IFJvYm90UmFjb250ZXVyTm9kZS5zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5wZXJpb2QgPSAoZG91YmxlKSgxMDAwLjAgLyBmcmVxdWVuY3kpO1xyXG4gICAgICAgICAgICBsYXN0X3RpbWUgPSBub2RlLlV0Y05vdztcclxuICAgICAgICAgICAgc3RhcnRfdGltZSA9IG5vZGUuVXRjTm93O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgU2xlZXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHAyID0gbGFzdF90aW1lICsgVGltZVNwYW4uRnJvbU1pbGxpc2Vjb25kcyhwZXJpb2QpO1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheSgoaW50KShwMiAtIG5vZGUuVXRjTm93KS5Ub3RhbE1pbGxpc2Vjb25kcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIGxhc3RfdGltZSA9IHAyOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuIl0KfQo=
